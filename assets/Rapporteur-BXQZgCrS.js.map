{"version":3,"file":"Rapporteur-BXQZgCrS.js","sources":["../../src/lib/2d/Rapporteur.ts"],"sourcesContent":["import { arc } from './Arc'\nimport { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport { fixeBordures } from './fixeBordures'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { point } from './PointAbstrait'\nimport { segment } from './segmentsVecteurs'\nimport { texteParPoint } from './textes'\nimport { homothetie, rotation } from './transformations'\nimport { pointSurSegment } from './utilitairesPoint'\n\nexport class Rapporteur extends ObjetMathalea2D {\n  x: number\n  y: number\n  taille: number\n\n  constructor({\n    x = 0,\n    y = 0,\n    taille = 7,\n    depart = 0,\n    semi = false,\n    avecNombre = 'deuxSens',\n    precisionAuDegre = 1,\n    stepGraduation = 10,\n    rayonsVisibles = true,\n    color = 'gray',\n  }) {\n    super()\n    this.x = x\n    this.y = y\n    this.taille = taille\n    this.opacite = 0.7\n    this.color = colorToLatexOrHTML(color)\n    this.objets = []\n    let numero\n    let azimut\n    let rayon\n    let nbDivisions\n    let arcPlein\n    if (semi) {\n      arcPlein = 180\n      nbDivisions = 18\n    } else {\n      arcPlein = 360\n      nbDivisions = 36\n    }\n\n    const centre = point(this.x, this.y)\n    azimut = rotation(point(this.x + 1, this.y), centre, depart)\n    let azimut2 = pointSurSegment(centre, azimut, this.taille)\n    const arc1 = arc(azimut, centre, arcPlein - 0.1, false, 'none', color)\n    const arc2 = arc(azimut2, centre, arcPlein - 0.1, false, 'none', color)\n    this.objets.push(segment(azimut2, rotation(azimut2, centre, 180), color))\n    rayon = segment(azimut, azimut2, color)\n    if (rayonsVisibles) this.objets.push(arc1)\n    // this.objets.push(arc2, rayon)\n    this.objets.push(arc2)\n    for (let i = 0; i < nbDivisions; i++) {\n      if (avecNombre !== '') {\n        if (avecNombre === 'deuxSens') {\n          if (i === 0) {\n            numero = texteParPoint(\n              String(arcPlein),\n              rotation(homothetie(azimut2, centre, 0.8), centre, 2),\n              -depart,\n              color,\n              0.65,\n            )\n            numero.contour = true\n            this.objets.push(numero)\n          }\n          if (i === nbDivisions - 1) {\n            numero = texteParPoint(\n              String(arcPlein - (1 + i) * 10),\n              rotation(\n                homothetie(azimut2, centre, 0.8),\n                centre,\n                arcPlein / nbDivisions - 2,\n              ),\n              -depart,\n              color,\n              0.65,\n            )\n            numero.contour = true\n            this.objets.push(numero)\n          } else if ((arcPlein - (1 + i) * 10) % stepGraduation === 0) {\n            numero = texteParPoint(\n              String(arcPlein - (1 + i) * 10),\n              rotation(\n                homothetie(azimut2, centre, 0.8),\n                centre,\n                arcPlein / nbDivisions,\n              ),\n              90 - (1 + i) * 10 - depart,\n              color,\n              0.78,\n            )\n            numero.contour = true\n            this.objets.push(numero)\n          }\n        }\n        if (i === 0) {\n          numero = texteParPoint(\n            '0',\n            rotation(homothetie(azimut2, centre, 0.9), centre, 2),\n            -depart,\n            color,\n            0.65,\n          )\n          numero.contour = true\n          this.objets.push(numero)\n        }\n        if (i === nbDivisions - 1) {\n          numero = texteParPoint(\n            String((1 + i) * 10),\n            rotation(\n              homothetie(azimut2, centre, 0.9),\n              centre,\n              arcPlein / nbDivisions - 2,\n            ),\n            -depart,\n            color,\n            0.65,\n          )\n          numero.contour = true\n          this.objets.push(numero)\n        } else if (((i + 1) * 10) % stepGraduation === 0) {\n          numero = texteParPoint(\n            String((1 + i) * 10),\n            rotation(\n              homothetie(azimut2, centre, 0.9),\n              centre,\n              arcPlein / nbDivisions,\n            ),\n            90 - (1 + i) * 10 - depart,\n            color,\n            0.65,\n          )\n          numero.contour = true\n          this.objets.push(numero)\n        }\n      }\n      for (let s = 1, r; s < 10; s++) {\n        if (s === 5 && precisionAuDegre < 10) {\n          r = segment(\n            homothetie(rotation(azimut2, centre, s), centre, 0.92),\n            homothetie(rotation(azimut2, centre, s), centre, 0.99),\n            color,\n          )\n          r.opacite = 0.6\n          r.tailleExtremites = 0.65\n          this.objets.push(r)\n        } else if (precisionAuDegre === 1) {\n          r = segment(\n            homothetie(rotation(azimut2, centre, s), centre, 0.96),\n            homothetie(rotation(azimut2, centre, s), centre, 0.99),\n            color,\n          )\n          r.opacite = 0.6\n          r.tailleExtremites = 0.65\n          this.objets.push(r)\n        }\n      }\n      if (i !== 0 && i !== 36 && i !== 18) this.objets.push(rayon)\n      azimut = rotation(azimut, centre, arcPlein / nbDivisions)\n      azimut2 = rotation(azimut2, centre, arcPlein / nbDivisions)\n\n      if (rayonsVisibles) rayon = segment(azimut, azimut2, color)\n      else rayon = segment(homothetie(azimut2, centre, 0.9), azimut2, color)\n      rayon.opacite = this.opacite\n    }\n    if (!semi) {\n      rayon = segment(\n        homothetie(rotation(azimut, centre, -90), centre, -0.2),\n        homothetie(rotation(azimut, centre, -90), centre, 0.2),\n        color,\n      )\n      this.objets.push(rayon)\n      rayon = segment(\n        homothetie(azimut, centre, -0.2),\n        homothetie(azimut, centre, 0.2),\n        color,\n      )\n    } else {\n      rayon = segment(\n        centre,\n        homothetie(rotation(azimut, centre, -90), centre, 0.2),\n        color,\n      )\n    }\n    this.objets.push(rayon)\n    const bordures = fixeBordures(this.objets, {\n      rxmin: 0,\n      rxmax: 0,\n      rymin: 0,\n      rymax: 0,\n    })\n    this.bordures = [bordures.xmin, bordures.ymin, bordures.xmax, bordures.ymax]\n  }\n\n  svg(coeff: number) {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      code += '\\n\\t' + objet.svg(coeff)\n    }\n    return code\n  }\n\n  tikz() {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      code += '\\n\\t' + objet.tikz()\n    }\n    return code\n  }\n}\n/**\n * place un rapporteur centré en (x,y) avec le zéro orienté à depart degrés.\n * @param {object} parametres\n * @param {number} [parametres.x] abscisse du centre du rapporteur\n * @param {number} [parametres.y] ordonnée du centre du rapporteur\n * @param {number} [parametres.taille] taille du rapporteur\n * @param {number} [parametres.depart] orientation du zéro du rapporteur en degrés\n * @param {boolean} [parametres.semi] si semi === false alors les graduations vont de 0 à 180° sinon de 0 à 360°\n * @param {string} [parametres.avecNombre] === \"\", il n'y a pas de graduations, si avecNombre === \"deuxSens\" il est gradué dans les deux directions\n * si avecNombre === \"unSens\" il est gradué dans le sens trigo.\n * @param {number}[parametres. precisionAuDegre] === 10 alors il n'y aura pas de graduations entre les multiples de 10°, les autres valeurs sont 5 et 1.\n * @param {number} [parametres.stepGraduation] est un multiple de 10 qui divise 180 (c'est mieux) donc 10 (par défaut), ou 20, ou 30, ou 60 ou 90.\n * @param {boolean} [parametres.rayonsVisibles] = false permet de supprimer les rayons et le cercle central\n * @param {object} param0 = {x: 'number', y: 'number', taille: 'number', semi: boolean, avecNombre: string}\n * @return {Rapporteur} // crée un instance de l'objet 2d Rapporteur\n */\n\nexport function rapporteur({\n  x = 0,\n  y = 0,\n  taille = 7,\n  depart = 0,\n  semi = false,\n  avecNombre = 'deuxSens',\n  precisionAuDegre = 1,\n  stepGraduation = 10,\n  rayonsVisibles = true,\n  color = 'gray',\n}) {\n  return new Rapporteur({\n    x,\n    y,\n    taille,\n    depart,\n    semi,\n    avecNombre,\n    precisionAuDegre,\n    stepGraduation,\n    rayonsVisibles,\n    color,\n  })\n}\n"],"names":["Rapporteur","ObjetMathalea2D","x","y","taille","depart","semi","avecNombre","precisionAuDegre","stepGraduation","rayonsVisibles","color","__publicField","colorToLatexOrHTML","numero","azimut","rayon","nbDivisions","arcPlein","centre","point","rotation","azimut2","pointSurSegment","arc1","arc","arc2","segment","i","texteParPoint","homothetie","s","r","bordures","fixeBordures","coeff","code","objet","rapporteur"],"mappings":"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"}