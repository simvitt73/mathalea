{"version":3,"file":"3F13-VVwfWQB3.js","sources":["../../src/exercices/3e/3F13.ts"],"sourcesContent":["// import Decimal from 'decimal.js'\nimport { courbe } from '../../lib/2d/Courbe'\nimport { repere } from '../../lib/2d/reperes'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { resolutionSystemeLineaire2x2 } from '../../lib/mathFonctions/outilsMaths'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  listeQuestionsToContenuSansNumero,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = \"Lire les antécédents d'un nombre à partir d'un graphique\"\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const dateDeModifImportante = '23/09/2023'\n/**\n * Un graphique étant tracé, déterminer les antécédents de nombres donnés.\n * La fonction est un polynôme de degré 1, 2 ou 3 et les nombres des questions ne sont que des entiers.\n * Interactivité et multiples questions ajoutés par J-C Lhote le 23/09/2023\n * @author Rémi Angot\n * 3F13\n */\nexport const uuid = '8117d'\n\nexport const refs = {\n  'fr-fr': ['3F13', 'BP2AutoO8'],\n  'fr-ch': ['11FA7-4'],\n}\nexport default class AntecedentGraphique extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Type de fonctions',\n      3,\n      '1 : Affine\\n2 : Polynôme du 2nd degré\\n3 : Mélange',\n    ]\n\n    this.sup = 2\n\n    context.isHtml ? (this.spacingCorr = 3) : (this.spacingCorr = 1)\n    this.nbQuestions = 1\n\n    // this.listeAvecNumerotation = false\n  }\n\n  nouvelleVersion() {\n    let a = 0\n    let b = 0\n    let c = 0\n    let x1 = 0\n    let x2 = 0\n    let x3 = 0\n    let fx1 = 0\n    let fx2 = 0\n    let fx3 = 0\n    let texte: string, texteCorr: string, f: (x: number) => number\n    f = (x) => 0\n    let indexInteractif = 0\n    let incrementInteractif = 0\n    this.sup = Number(this.sup)\n    for (let i = 0; i < this.nbQuestions; ) {\n      const initialiseVariables = function () {\n        if (context.isHtml) {\n          // repère -10 || 10\n          x1 = randint(-6, -3)\n          x2 = randint(x1 + 3, 2)\n          x3 = randint(1, 8)\n          fx1 = randint(-5, 5)\n          fx2 = randint(-6, 6, fx1)\n          fx3 = randint(-5, 5)\n          c = randint(-5, 5)\n        } else {\n          // repère -5 || 5\n          x1 = randint(-4, -2)\n          x2 = randint(-1, 2, [0])\n          x3 = randint(1, 4)\n          fx1 = randint(-4, 4)\n          fx2 = randint(-4, 4, fx1)\n          fx3 = randint(-4, 4)\n          c = randint(-3, 3)\n        }\n      }\n\n      initialiseVariables()\n      texte =\n        'On a tracé ci-dessous la courbe représentative de la fonction $f$.<br>'\n      texteCorr = ''\n      const choix = this.sup === 1 ? 1 : this.sup === 2 ? 2 : (i % 2) + 1\n      if (choix === 1) {\n        a = (fx2 - fx1) / (x2 - x1)\n        b = a * x1 - fx1\n        f = (x) => a * x - b\n        texte += `Déterminer par lecture graphique les antécédents de $${fx1}$ et de $${fx2}$ par cette fonction $f$.<br><br>`\n        texte += ajouteChampTexteMathLive(this, indexInteractif, '', {\n          texteAvant: `Le ou les antécédents de $${fx1}$ (séparer les nombres avec un point-virgule) :`,\n        })\n        texte += ajouteChampTexteMathLive(this, indexInteractif + 1, '', {\n          texteAvant: `<br>Le ou les antécédents de $${fx2}$ (séparer les nombres avec un point-virgule) :`,\n        })\n        setReponse(this, indexInteractif, x1, { formatInteractif: 'calcul' })\n        setReponse(this, indexInteractif + 1, x2, {\n          formatInteractif: 'calcul',\n        })\n        incrementInteractif = 2\n        texteCorr = `L'antécédent de $${fx1}$ est $${x1}$, on note $f(${x1})=${fx1}$.<br>`\n        texteCorr += `L'antécédent de $${fx2}$ est $${x2}$, on note $f(${x2})=${fx2}$.`\n      } else if (choix === 2) {\n        if (randint(1, 4) < 2) {\n          // une fois sur 4 il n'y a qu'un seul antécédent\n          const x0 = randint(-2, 2)\n          let fx0 = randint(-4, 4)\n          if (!context.isHtml) {\n            fx0 = randint(-2, 2)\n          }\n          a = randint(-3, 3, 0)\n          texte += `Déterminer par lecture graphique le (ou les) antécédent(s) de $${fx0}$ par cette fonction $f$.<br><br>`\n          texte += ajouteChampTexteMathLive(this, indexInteractif, '', {\n            texteAvant: `Le ou les antécédents de ${fx0} (séparer les nombres avec un point-virgule) :`,\n          })\n          setReponse(this, indexInteractif, x0, { formatInteractif: 'calcul' })\n          incrementInteractif = 1\n          texteCorr = `$${fx0}$ a un unique antécédent $${x0}$, on note $f(${x0})=${fx0}$.<br>`\n          f = (x) => a * (x - x0) ** 2 + fx0\n        } else {\n          fx3 = fx1\n          ;[a, b] = resolutionSystemeLineaire2x2(x1, x3, fx1, fx3, c)\n          // console.info('Initial values:', { x1, x3, fx1, fx3, c, a, b })\n          let tentatives = 0\n          while (\n            (Number.isNaN(a) || Number.isNaN(b) || a === 0) &&\n            tentatives < 50\n          ) {\n            x1 = randint(-4, -1)\n            x3 = randint(1, 4)\n            fx1 = randint(-7, 7)\n            fx3 = fx1\n            c = randint(-6, 6)\n            ;[a, b] = resolutionSystemeLineaire2x2(x1, x3, fx1, fx3, c)\n            tentatives++\n            if (tentatives % 10 === 0) {\n              /*  console.info(`Tentative ${tentatives}:`, {\n                x1,\n                x3,\n                fx1,\n                fx3,\n                c,\n                a,\n                b,\n              })\n            */\n            }\n          }\n          // Si après 50 tentatives on n'a pas trouvé, on force des valeurs valides\n          if (a === 0 || Number.isNaN(a) || Number.isNaN(b)) {\n            console.warn('Forcing fallback values after 50 attempts')\n            a = 1\n            b = 0\n            c = 0\n            x1 = -2\n            x3 = 2\n            fx1 = 4\n            fx3 = 4\n          } else {\n            /* console.info('Success after', tentatives, 'attempts:', {\n              x1,\n              x3,\n              fx1,\n              fx3,\n              c,\n              a,\n              b,\n            }) */\n          }\n          x2 = 0\n          fx2 = c\n          f = (x) => a * x ** 2 + b * x + c\n          texte += `Déterminer par lecture graphique le (ou les) antécédent(s) de $${fx1}$ par cette fonction $f$.<br><br>`\n          texte += ajouteChampTexteMathLive(this, indexInteractif, '', {\n            texteAvant: `Le ou les antécédents de ${fx1} (séparer les nombres avec un point-virgule) :`,\n          })\n          setReponse(this, indexInteractif, [`${x1};${x3}`, `${x3};${x1}`], {\n            formatInteractif: 'texte',\n          })\n          incrementInteractif = 1\n          texteCorr = `$${fx1}$ a deux antécédents $${x1}$ et $${x3}$, on note $f(${x1})=f(${x3})=${fx1}$.<br>`\n        }\n      }\n      const r = repere({ xMin: -10, xMax: 10, yMin: -10, yMax: 10 })\n      const Cf = courbe(f, { repere: r, step: 0.2, color: 'purple' })\n      texte += mathalea2d(\n        { xmin: -10, xmax: 10, ymin: -10, ymax: 10, scale: 0.5 },\n        r,\n        Cf,\n      )\n      if (this.questionJamaisPosee(i, a, fx1)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n\n        indexInteractif += incrementInteractif\n        i++\n      }\n    }\n\n    listeQuestionsToContenuSansNumero(this)\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDeModifImportante","uuid","refs","AntecedentGraphique","Exercice","context","a","b","x1","x2","x3","fx1","fx2","fx3","texte","texteCorr","f","x","indexInteractif","incrementInteractif","i","randint","choix","ajouteChampTexteMathLive","setReponse","x0","fx0","resolutionSystemeLineaire2x2","tentatives","r","repere","Cf","courbe","mathalea2d","listeQuestionsToContenuSansNumero"],"mappings":"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"}