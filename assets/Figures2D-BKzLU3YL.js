var G=Object.defineProperty;var H=(p,$,t)=>$ in p?G(p,$,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[$]=t;var l=(p,$,t)=>H(p,typeof $!="symbol"?$+"":$,t);import{P as O}from"./index-Dkwu26bg.js";import{O as J}from"./ObjetMathalea2D-CXcNXRpD.js";import{a as K}from"./PointAbstrait-Cz1GEocE.js";import{a as B,r as Q}from"./transformations-CrKJZhMe.js";function z(p,$,t,s){const e=$*Math.PI/180,i=Math.cos(e),h=Math.sin(e),r=1-2*p,o=i*i+h*h*r,n=i*h*(1-r),a=i*h*(1-r),d=h*h+i*i*r,x=t-o*t-a*s,c=s-n*t-d*s;return{a:o,b:n,c:a,d,tx:x,ty:c}}function f(p,$,t,s,e,i,h){const r=(t-p)/2,o=(s-$)/2,n=Math.cos(e),a=Math.sin(e),d=Math.abs(r*n)+Math.abs(o*a),x=Math.abs(r*a)+Math.abs(o*n),c=(p+t)/2,u=($+s)/2,m=n*(c-i)-a*(u-h)+i,g=a*(c-i)+n*(u-h)+h;return[m-d,g-x,m+d,g+x]}class N extends J{constructor({name:t="",codeSvg:s,codeTikz:e,x:i=0,y:h=0,angle:r=0,scale:o={x:1,y:1},width:n,height:a,pixelsParCm:d=O.pixelsParCm,opacite:x=1,bordures:c}){super();l(this,"codeSvg");l(this,"codeTikz");l(this,"x");l(this,"y");l(this,"angle");l(this,"scale");l(this,"width");l(this,"height");l(this,"pixelsParCm");l(this,"bordures");l(this,"opacite",1);this.name=t,this.codeSvg=s,this.codeTikz=e,this.x=i,this.y=h,this.angle=r,this.scale=o,this.width=n,this.height=a,this.pixelsParCm=d,this.opacite=x,this.bordures=c??[this.x-this.width/2,this.y-this.height/2,this.x+this.width/2,this.y+this.height/2]}svg(t){return`<g opacity=${this.opacite} transform="translate(${(this.x*t).toFixed(2)}, ${(-this.y*t).toFixed(2)}) ${this.scale.x!==1||this.scale.y!==1||t!==20?`scale(${(this.scale.x*t/20).toFixed(3)},${(this.scale.y*t/20).toFixed(3)})`:""} ${this.angle!==0?`rotate(${(-this.angle).toFixed(2)})`:""}">${this.codeSvg}</g>`}tikz(){return`\\begin{scope}[fill opacity=${this.opacite}, shift={(${this.x.toFixed(2)},${this.y.toFixed(2)})}${this.scale.x!==1?`, xscale=${this.scale.x.toFixed(3)}`:""}${this.scale.y!==1?`, yscale=${this.scale.y.toFixed(3)}`:""}${this.angle!==0?`, rotate around={${this.angle}:(0,0)}`:""}]
    ${this.codeTikz}
    \\end{scope}`}updateBordures(){this.bordures=[this.x-this.width/2,this.y-this.height/2,this.x+this.width/2,this.y+this.height/2],this.angle!==0&&(this.bordures=f(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],this.angle*Math.PI/180,this.x,this.y))}rotate(t){return this.angle+=t,this.bordures=f(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],t*Math.PI/180,this.x,this.y),this}dilate(t){typeof t=="number"&&(t={x:t,y:t}),this.scale.x*=t.x,this.scale.y*=t.y,this.width=this.width*t.x,this.height=this.height*t.y;let s=this.bordures[0],e=this.bordures[1],i=this.bordures[2],h=this.bordures[3];return s=(s-this.x)*t.x+this.x,e=(e-this.y)*t.y+this.y,i=(i-this.x)*t.x+this.x,h=(h-this.y)*t.y+this.y,this.bordures=[s,e,i,h],this}translate(t,s){return this.x+=t,this.y+=s,this.bordures=[this.bordures[0]+t,this.bordures[1]+s,this.bordures[2]+t,this.bordures[3]+s],this}flip(t="x"){return t==="x"?(this.scale.x=-this.scale.x,this.angle=-this.angle):t==="y"?(this.scale.y=-this.scale.y,this.angle=-this.angle):t==="xy"&&(this.scale.x=-this.scale.x,this.scale.y=-this.scale.y),this}clone(){const t=String(this.codeTikz),s=String(this.codeSvg),e=Number(this.x),i=Number(this.y),h=Number(this.angle),r={x:this.scale.x,y:this.scale.y},o=Number(this.width),n=Number(this.height),a=Number(this.pixelsParCm);return new N({codeSvg:s,codeTikz:t,x:e,y:i,angle:h,scale:r,width:o,height:n,pixelsParCm:a,opacite:this.opacite,bordures:this.bordures})}}class P extends N{constructor({codeSvg:t,codeTikz:s,x:e=0,y:i=0,angle:h=0,scale:r={x:1,y:1},width:o=0,height:n=0,pixelsParCm:a=O.pixelsParCm,axes:d=[],nonAxe:x=null,centre:c=null,nbAxes:u,opacite:m=1,name:g=Date.now().toString(),bordures:A}){super({codeSvg:t,codeTikz:s,x:e,y:i,angle:h,scale:r,width:o,height:n});l(this,"codeSvg");l(this,"codeTikz");l(this,"scale");l(this,"angle");l(this,"width");l(this,"height");l(this,"pixelsParCm");l(this,"axes");l(this,"nonAxe");l(this,"centre");l(this,"nbAxes");l(this,"name");l(this,"bordures");l(this,"opacite");this.name=g,this.x=e,this.y=i,this.width=o,this.height=n,this.pixelsParCm=a,this.angle=h,this.scale=r,this.codeSvg=t,this.codeTikz=s,this.opacite=m,this.bordures=[this.x-this.width/2,this.y-this.height/2,this.x+this.width/2,this.y+this.height/2],this.axes=d,this.nonAxe=x,this.nbAxes=u??this.axes.length,this.centre=c,this.angle!==0&&(this.bordures=f(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],this.angle*Math.PI/180,this.x,this.y))}svg(t){return`<g opacity=${this.opacite} transform="translate(${(this.x*t).toFixed(2)}, ${(-this.y*t).toFixed(2)}) scale(${this.scale.x.toFixed(3)},${this.scale.y.toFixed(3)}) rotate(${(-this.angle).toFixed(2)})">${this.codeSvg}</g>`}tikz(){return`\\begin{scope}[fill opacity=${this.opacite}, shift={(${this.x.toFixed(2)},${this.y.toFixed(2)})}, xscale=${this.scale.x.toFixed(3)}, yscale=${this.scale.y.toFixed(3)}, rotate around={${-this.angle.toFixed(2)}:(0,0)}]
    ${this.codeTikz}
    \\end{scope}`}rotate(t){return this.angle+=t,this.bordures=f(this.bordures[0],this.bordures[1],this.bordures[2],this.bordures[3],this.angle*Math.PI/180,this.x,this.y),this}dilate(t){typeof t=="number"&&(t={x:t,y:t}),this.scale.x*=t.x,this.scale.y*=t.y,this.width=this.width*t.x,this.height=this.height*t.y;let s=this.bordures[0],e=this.bordures[1],i=this.bordures[2],h=this.bordures[3];return s=(s-this.x)*t.x+this.x,e=(e-this.y)*t.y+this.y,i=(i-this.x)*t.x+this.x,h=(h-this.y)*t.y+this.y,this.bordures=[s,e,i,h],this}translate(t,s){return this.x+=t,this.y+=s,this.bordures=[this.bordures[0]+t,this.bordures[1]+s,this.bordures[2]+t,this.bordures[3]+s],this}flip(t="x"){return t==="x"?(this.scale.x=-this.scale.x,this.angle=-this.angle):t==="y"?(this.scale.y=-this.scale.y,this.angle=-this.angle):t==="xy"&&(this.scale.x=-this.scale.x,this.scale.y=-this.scale.y),this}symetrie(t){const s=Math.atan2(t.y1-t.y2,t.x2-t.x1)*180/Math.PI,{a:e,b:i,c:h,d:r,tx:o,ty:n}=z(1,s,0,0),a=`<g transform="matrix(${e}, ${i}, ${h}, ${r}, ${o}, ${n})">${this.codeSvg}</g>`,d=e*this.x-h*this.y+o,x=-i*this.x+r*this.y-n,c=`\\begin{scope}[cm={${e.toFixed(4)},${-i.toFixed(4)},${-h.toFixed(4)},${r.toFixed(4)},(${o.toFixed(4)},${-n.toFixed(4)})}]
  ${this.codeTikz}
  \\end{scope}`,u=new P({codeSvg:a,codeTikz:c,x:d,y:x,angle:(360-this.angle)%360,scale:this.scale,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm,axes:this.axes.map(m=>B(m,t)),nonAxe:this.nonAxe,centre:this.centre==null?null:B(this.centre,t),nbAxes:this.nbAxes,opacite:this.opacite,name:this.name+"_sym"});return u.bordures=f(u.bordures[0],u.bordures[1],u.bordures[2],u.bordures[3],s*Math.PI/180,d,x),u}copy(t){const s=String(this.codeTikz),e=String(this.codeSvg),i=Number(this.x),h=Number(this.y),r=Number(this.angle),o={x:this.scale.x,y:this.scale.y},n=Number(this.width),a=Number(this.height),d=Number(this.pixelsParCm),x=this.axes.map(A=>A),c=this.centre,u=Number(this.nbAxes),m=Number(this.opacite),g=t;return new P({codeSvg:e,codeTikz:s,x:i,y:h,angle:r,scale:o,width:n,height:a,pixelsParCm:d,axes:x,centre:c,nbAxes:u,opacite:m,name:g})}rotationAnimee({angleStart:t=0,angleEnd:s=180,cx:e,cy:i,duration:h="2s",repeatCount:r="indefinite",loop:o=!0,delay:n=0}){return e===void 0?e=this.x*this.pixelsParCm:e*=this.pixelsParCm,i===void 0?i=-this.y*this.pixelsParCm:i*=-this.pixelsParCm,new P({codeSvg:`<g> 
      <animateTransform
      attributeName="transform"
      type="rotate"
      from="${t} ${e} ${i}"
      to="${s} ${e} ${i}"
      dur="${h}"
      repeatCount="${r}"
      begin="${o?`0s; ${n}s`:"0s"}"
      keyTimes="0;0.4;0.5;0.9;1"
      values="${t} ${e} ${i};${s} ${e} ${i};${s} ${e} ${i};${t} ${e} ${i};${t} ${e} ${i}"
      />
        <g transform="translate(${this.x*this.pixelsParCm}, ${-this.y*this.pixelsParCm}) scale(${this.scale.x},${this.scale.y}) rotate(${-this.angle})">${this.codeSvg}</g>
      </g>`,codeTikz:`\\begin{scope}[shift={(${this.x},${this.y})}, xscale=${this.scale.x}, yscale=${this.scale.y}, rotate around={${this.angle}:(0,0)}]${this.codeTikz}\\end{scope})`,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm})}dilatationAnimee({cx:t,cy:s,factorXStart:e=1,factorXEnd:i=-1,factorYStart:h=1,factorYEnd:r=1,duration:o="1s",repeatCount:n="infinite",loop:a=!0,delay:d=0}){return t===void 0&&(t=this.x*this.pixelsParCm),s===void 0&&(s=-this.y*this.pixelsParCm),new P({codeSvg:`<g transform="translate(${t}, ${s})"> 
      <g>
      <animateTransform
      attributeName="transform"
      type="scale"
      from="${e} ${h}"
      to="${i} ${r}"
      dur="${o}"
      repeatCount="${n}"
      begin="${a?`0s; ${d}s`:"0s"}"
      keyTimes="0;0.4;0.5;0.9;1"
      values="${e} ${h};${i} ${r};${i} ${r};${e} ${h};${e} ${h}"
      />
        <g transform=" scale(${this.scale.x},${this.scale.y}) rotate(${-this.angle})">${this.codeSvg}</g>
      </g>
      </g>`,codeTikz:`\\begin{scope}[shift={(${this.x},${this.y})}, xscale=${this.scale.x}, yscale=${this.scale.y}, rotate around={${this.angle}:(0,0)}]${this.codeTikz}\\end{scope})`,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm})}translationAnimee({dx:t,dy:s,duration:e="1s",repeatCount:i="infinite",loop:h=!0,delay:r=0}){return new P({codeSvg:`<g>
      <animateTransform
      attributeName="transform"
      type="translate"
      from="${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm}"
      to="${this.x*this.pixelsParCm+t} ${-this.y*this.pixelsParCm-s}"
      dur="${e}"
      repeatCount="${i}"
      begin="${h?`0s; ${r}s`:"0s"}"
      keyTimes="0;0.4;0.5;0.9;1"
      values="${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm};${this.x*this.pixelsParCm+t} ${-this.y*this.pixelsParCm-s};${this.x*this.pixelsParCm+t} ${-this.y*this.pixelsParCm-s};${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm};${this.x*this.pixelsParCm} ${-this.y*this.pixelsParCm}"
      />
        <g transform=" scale(${this.scale.x},${this.scale.y}) rotate(${-this.angle})">${this.codeSvg}</g>
      </g>`,codeTikz:`\\begin{scope}[shift={(${this.x},${this.y})}, xscale=${this.scale.x}, yscale=${this.scale.y}, rotate around={${this.angle}:(0,0)}]${this.codeTikz}\\end{scope})`,width:this.width,height:this.height,pixelsParCm:this.pixelsParCm})}get axesAngles(){let t=[];return this.Axes.length>0?t=this.Axes.map(s=>Math.atan2(s.y1-s.y2,s.x2-s.x1)*180/Math.PI):this.nonAxe&&(t=[Math.atan2(this.nonAxe.y1-this.nonAxe.y2,this.nonAxe.x2-this.nonAxe.x1)*180/Math.PI]),t}loopReflectionAnimee(t,s,e){const i=new P({codeSvg:`<g id="${s}" style="filter: drop-shadow(0px 0px 0px rgb(80, 80, 80))">
        ${this.svg(this.pixelsParCm)}
      </g>`,codeTikz:this.tikz(),width:this.width/this.scale.x,height:this.height/this.scale.y,pixelsParCm:this.pixelsParCm,scale:{x:1,y:1},angle:0,x:0,y:0,opacite:1}),h=this.pixelsParCm;return i.name=s,document.addEventListener("exercicesAffiches",()=>{const r=document.getElementById(s);if(!r)return;const o=(t.x1+t.x2)/2,n=(t.y1+t.y2)/2,a=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),d="clip-"+s;a.setAttribute("id",d);const x=document.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("id",`clipingRect_${s}`);const c=500,u=500;x.setAttribute("x",String(o*h-c/2)),x.setAttribute("y",String(n*h-u/2)),x.setAttribute("width",String(c)),x.setAttribute("height",String(u)),a.appendChild(x),r.appendChild(a),r.setAttribute("clip-path",`url(#${d})`);let m=0,g=1;const A=Math.atan2(t.y1-t.y2,t.x2-t.x1)*180/Math.PI;function w(){if(r==null)return;if(m+=.004*g,m>1){m=1,g=-1,e&&e(g),setTimeout(()=>{requestAnimationFrame(w)},2e3);return}else if(m<0){m=0,g=1,e&&e(g),setTimeout(()=>{requestAnimationFrame(w)},200);return}const b=(1-Math.abs(Math.cos(m*Math.PI)))*5*Math.cos(A*Math.PI/180),C=(1-Math.abs(Math.cos(m*Math.PI)))*5*Math.sin(A*Math.PI/180),y=`drop-shadow(${b}px ${C}px 5px rgb(80, 80, 80))`;r.setAttribute("style",`filter: ${y}`);const{a:v,b:M,c:S,d:T,tx:k,ty:F}=z(m,A,o*h,n*h);r.setAttribute("transform",`matrix(${v} ${M} ${S} ${T} ${k} ${F})`),requestAnimationFrame(w)}w()}),i}autoReflectionAnimee(t,s,e){const i=new P({codeSvg:`<g id="${t}" style="filter: drop-shadow(0px 0px 0px rgb(80, 80, 80))"> 
      ${this.svg(20)}
       transform="matrix(1 0 0 1 0 0)"
      </g>`,codeTikz:this.tikz(),width:this.width/this.scale.x,height:this.height/this.scale.y,pixelsParCm:this.pixelsParCm,scale:{x:1,y:1},angle:0,x:0,y:0,opacite:1,axes:this.Axes,nonAxe:this.nonAxe,centre:this.centre}),h=this.pixelsParCm;return i.name=t,document.addEventListener("exercicesAffiches",()=>{const r=document.getElementById(t),o=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),n="clip-"+t;o.setAttribute("id",n);const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("id",`clipingRect_${t}`);const d=500,x=500;a.setAttribute("x",String(s*h)),a.setAttribute("y",String(e*h-x/2)),a.setAttribute("width",String(d)),a.setAttribute("height",String(x)),o.appendChild(a),r==null||r.appendChild(o),r==null||r.setAttribute("clip-path",`url(#${n})`);let c=0,u=0,m=!1;function g(b,C){const y=document.getElementById(`clipingRect_${t}`);if(!y)return;const v=500,M=500;y.setAttribute("x",String(s*h)),y.setAttribute("y",String(e*h-M/2)),y.setAttribute("width",String(v)),y.setAttribute("height",String(M)),y.setAttribute("transform",`rotate(${b+90}, ${s*h}, ${e*h})`),c=0;function S(){c+=.004,c>1&&(c=1);const T=(1-Math.abs(Math.cos(c*Math.PI)))*5*Math.cos(b*Math.PI/180),k=(1-Math.abs(Math.cos(c*Math.PI)))*5*Math.sin(b*Math.PI/180),F=`drop-shadow(${T}px ${k}px 2px rgb(80, 80, 80))`,I=document.getElementById(`${t}`);I==null||I.setAttribute("style",`filter: ${F}`);const{a:q,b:R,c:E,d:L,tx:j,ty:W}=z(c,b,s*h,e*h);r==null||r.setAttribute("transform",`matrix(${q} ${R} ${E} ${L} ${j} ${W})`),c<1?requestAnimationFrame(S):C()}requestAnimationFrame(S)}function A(b){if(m)return;m=!0;function C(){const y=b[u];g(y,()=>{u=(u+1)%b.length,setTimeout(C,500)})}C()}const w=i.axesAngles;w.length===0?r==null||r.setAttribute("transform","scale(1,1)"):A(w)}),i}set Axes(t){this.axes=t,this.nbAxes=t.length}get Axes(){return this.axes.map(t=>Q(t,K(0,0),this.angle))}}export{P as F,N as S};
//# sourceMappingURL=Figures2D-BKzLU3YL.js.map
