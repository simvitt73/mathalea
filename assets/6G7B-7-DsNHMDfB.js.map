{"version":3,"file":"6G7B-7-DsNHMDfB.js","sources":["../../src/exercices/6e/6G7B-7.ts"],"sourcesContent":["import { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport { Droite, droiteAvecNomLatex } from '../../lib/2d/droites'\nimport { PointAbstrait } from '../../lib/2d/PointAbstrait'\nimport { segment } from '../../lib/2d/segmentsVecteurs'\nimport { texteParPosition } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { symetrieAxiale } from '../../lib/2d/transformations'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport {\n  choice,\n  combinaisonListes,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport {\n  miseEnEvidence,\n  texteEnCouleur,\n} from '../../lib/outils/embellissements'\nimport { numAlpha } from '../../lib/outils/outilString'\nimport { nombreAvecEspace } from '../../lib/outils/texNombre'\nimport { symetrieAnimee } from '../../modules/2dAnimation'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { egal, listeQuestionsToContenu, randint } from '../../modules/outils'\nimport { Pavage, pavage } from '../../modules/Pavage'\nimport Exercice from '../Exercice'\n\nimport { codageMediatrice } from '../../lib/2d/CodageMediatrice'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport type {\n  IDroite,\n  IPointAbstrait,\n  IPolygone,\n} from '../../lib/2d/Interfaces'\nimport { mediatrice } from '../../lib/2d/Mediatrice'\nimport { vide2d } from '../../lib/2d/Vide2d'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\n\nexport const titre =\n  \"Trouver l'image d'une figure par une symétrie axiale dans un pavage\"\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n// Gestion de la date de publication initiale\nexport const dateDePublication = '14/12/2020'\n\n/**\n * Trouver une figure symétrique dans un pavage. Symétrie axiale. 6 pavages différents.\n * @author Jean-Claude Lhote\n * Relecture : Novembre 2021 par EE\n */\nexport const uuid = '328b1'\n\nexport const refs = {\n  'fr-fr': ['6G7B-7'],\n  'fr-2016': ['6G25-3'],\n  'fr-ch': ['9ES6-20'],\n}\n\nconst longueur = (A: PointAbstrait, B: PointAbstrait) =>\n  Math.sqrt((A.x - B.x) ** 2 + (A.y - B.y) ** 2)\n\ntype FenetreType = {\n  xmin: number\n  xmax: number\n  ymin: number\n  ymax: number\n  pixelsParCm: number\n  scale: number\n}\n\nexport default class PavageEtReflexion2d extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n    this.besoinFormulaireNumerique = [\n      'Taille du pavage (la grande est automatique au-delà de 5 questions)',\n      2,\n      ' 1 : Taille modeste\\n 2 : Grande taille',\n    ]\n    this.besoinFormulaire2CaseACocher = ['Montrer les centres']\n    this.besoinFormulaire3Numerique = [\n      'Choix du pavage',\n      8,\n      \"1 : Triangles équilatéraux\\n2 : Carrés\\n3 : Hexagones réguliers\\n4 : Carrés et triangles équilatéraux\\n5 : Octogones et carrés\\n 6 : Losanges (pavage hexagonal d'écolier)\\n7 : Hexagones et triangles équilatéraux\\n8 : Un des sept pavages au hasard\",\n    ]\n    this.besoinFormulaire4Numerique = ['Nombre de symétriques à trouver', 3]\n    this.correctionDetaillee = true\n    this.correctionDetailleeDisponible = true\n\n    this.sup = 2 // 1 pour des pavages modestes, 2 pour des plus grands.\n    this.sup2 = false // On cache les centres par défaut.\n    this.sup3 = 7\n    this.sup4 = 3\n  }\n\n  nouvelleVersion() {\n    const nbSymetriques = Math.max(1, Math.min(7, parseInt(this.sup4)))\n    const videcouples = function (tableau: any[]) {\n      for (let k = 0; k < tableau.length; k++) {\n        for (let j = k + 1; j < tableau.length; j++) {\n          if (tableau[k][1] === tableau[j][0]) {\n            tableau.splice(j, 1)\n          }\n        }\n      }\n      return tableau\n    }\n    const compare2polys = function (poly1: IPolygone, poly2: IPolygone) {\n      if (comparenbsommets(poly1, poly2)) {\n        if (comparesommets(poly1, poly2)) {\n          return true\n        } else {\n          return false\n        }\n      } else {\n        return false\n      }\n    }\n    const comparenbsommets = function (poly1: IPolygone, poly2: IPolygone) {\n      if (poly1.listePoints.length === poly2.listePoints.length) {\n        return true\n      } else return false\n    }\n\n    const compare2sommets = function (\n      sommet1: IPointAbstrait,\n      sommet2: IPointAbstrait,\n    ) {\n      if (egal(sommet1.x, sommet2.x, 0.1) && egal(sommet1.y, sommet2.y, 0.1)) {\n        return true\n      } else return false\n    }\n    const comparesommets = function (poly1: IPolygone, poly2: IPolygone) {\n      let trouve = false\n      let trouves = 0\n      if (comparenbsommets(poly1, poly2)) {\n        for (const P of poly1.listePoints) {\n          for (const M of poly2.listePoints) {\n            if (compare2sommets(M, P)) {\n              trouve = true\n            }\n            if (trouve) break\n          }\n          if (trouve) {\n            trouves++\n            trouve = false\n          } else {\n            trouves -= 100\n          }\n          if (trouves < 0) {\n            break\n          }\n        }\n      }\n      if (trouves === poly1.listePoints.length) {\n        return true\n      } else return false\n    }\n\n    const refleccion = function (pavage: Pavage, d: IDroite, numero: number) {\n      // retourne le numero du polygone symétrique ou -1 si il n'existe pas\n      const poly = pavage.polygones[numero - 1]\n      let pol\n      const result = -1\n      const sympoly = symetrieAxiale(poly, d as IDroite)\n      for (let k = 0; k < pavage.polygones.length; k++) {\n        pol = pavage.polygones[k]\n        if (compare2polys(sympoly, pol)) {\n          return k + 1\n        }\n      }\n      return result\n    }\n\n    const objets: NestedObjetMathalea2dArray = []\n    const objetsCorrection: NestedObjetMathalea2dArray = []\n    let P1\n    let P2\n    let P3\n    let t\n    const codes = ['/', '//', '///', 'o', 'w', 'X', 'U', '*']\n    let taillePavage = parseInt(this.sup)\n    if (taillePavage < 1 || taillePavage > 2) {\n      taillePavage = 1\n    }\n    if (nbSymetriques > 5) {\n      taillePavage = 2\n    }\n\n    let Nx\n    let Ny\n    let index1: number\n    let index2\n    let A\n    let B\n    let d\n    let image\n    let couples = []\n    let tailles = []\n    let monpavage: Pavage = pavage()\n    let fenetre: FenetreType = {\n      xmin: 0,\n      ymin: 0,\n      xmax: 10,\n      ymax: 10,\n      pixelsParCm: 20,\n      scale: 0.5,\n    }\n    let texte = ''\n    let texteCorr = ''\n    let typeDePavage = Math.max(1, parseInt(this.sup3)) as\n      | 1\n      | 2\n      | 3\n      | 4\n      | 5\n      | 6\n      | 7\n    let nombreTentatives\n    let nombrePavageTestes = 1\n    if (this.sup3 === 8) {\n      typeDePavage = randint(1, 7) as 1 | 2 | 3 | 4 | 5 | 6 | 7\n    } else {\n      typeDePavage = Math.max(1, this.sup3 % 8) as 1 | 2 | 3 | 4 | 5 | 6 | 7\n    }\n    while (couples.length < nbSymetriques && nombrePavageTestes < 2) {\n      nombreTentatives = 0\n      monpavage = pavage() // On crée l'objet Pavage qui va s'appeler monpavage\n      tailles = [\n        [\n          [3, 2],\n          [3, 2],\n          [2, 2],\n          [2, 2],\n          [2, 2],\n          [2, 2],\n          [3, 2],\n        ],\n        [\n          [4, 3],\n          [4, 3],\n          [3, 3],\n          [3, 3],\n          [3, 3],\n          [3, 2],\n          [5, 3],\n        ],\n      ]\n      Nx = tailles[taillePavage - 1][typeDePavage - 1][0]\n      Ny = tailles[taillePavage - 1][typeDePavage - 1][1]\n      monpavage.construit(typeDePavage, Nx, Ny, 3) // On initialise toutes les propriétés de l'objet.\n      fenetre = monpavage.fenetre\n      context.fenetreMathalea2d = [\n        fenetre.xmin,\n        fenetre.ymin,\n        fenetre.xmax,\n        fenetre.ymax,\n      ]\n      while (couples.length < nbSymetriques && nombreTentatives < 5) {\n        // On cherche d pour avoir suffisamment de couples\n        couples = [] // On vide la liste des couples pour une nouvelle recherche\n        index1 = randint(\n          Math.floor(monpavage.nb_polygones / 3),\n          Math.ceil((monpavage.nb_polygones * 2) / 3),\n        ) // On choisit 2 points dans 2 polygones distincts.\n        A = monpavage.barycentres[index1]\n        const indicesSimilaires = shuffle(\n          monpavage.polygones\n            .map((poly, i) => ({ index: i, count: poly.listePoints.length }))\n            .filter(\n              (p) =>\n                p.index !== index1 &&\n                p.count === monpavage.polygones[index1].listePoints.length,\n            )\n            .map((p) => p.index),\n        )\n        const lastChoice: number[] = []\n        for (\n          let kt = 0;\n          kt < 20 && indicesSimilaires.length > lastChoice.length;\n          kt++\n        ) {\n          index2 = choice(indicesSimilaires, lastChoice)\n          B = monpavage.barycentres[index2]\n          if (longueur(A, B) === 0) continue\n          d = mediatrice(A, B, '', 'red') as IDroite // l'axe sera la droite passant par ces deux points si ça fonctionne\n          if (Math.abs(d.pente) < 0.1) {\n            continue\n          }\n          const sympoly = symetrieAxiale(monpavage.polygones[index1], d)\n          if (compare2polys(sympoly, monpavage.polygones[index2])) {\n            break\n          }\n          lastChoice.push(index2)\n        }\n        if (d && !isNaN(d.pente) && Math.abs(d.pente) > 0.1) {\n          d.epaisseur = 3\n          for (let i = 1; i <= monpavage.nb_polygones; i++) {\n            // on crée une liste des couples (antécédents, images)\n            image = refleccion(monpavage, d, i)\n            if (image !== -1) {\n              // si l'image du polygone i existe, on ajoute le couple à la liste\n              couples.push([i, image])\n            }\n          }\n          couples = videcouples(couples) // supprime tous les couples en double (x,y)=(y,x)\n          nombreTentatives++\n        }\n      }\n      if (couples.length < nbSymetriques) {\n        nombrePavageTestes++\n      }\n    }\n    if (couples.length < nbSymetriques || d == null) {\n      console.error('trop de questions, augmentez la taille du pavage')\n      return\n    }\n\n    objets.push(d) // la droite d est trouvée\n\n    objets.push(droiteAvecNomLatex(d as Droite, '(d)', 'red')) // on ajoute la droite d avec son nom\n\n    couples = shuffle(couples) // on mélange les couples\n    const texteNoir = []\n    const texteGris = []\n    for (let i = 0; i < monpavage.nb_polygones; i++) {\n      texteNoir.push(\n        texteParPosition(\n          nombreAvecEspace(i + 1),\n          monpavage.barycentres[i].x,\n          monpavage.barycentres[i].y + 0.5,\n          0,\n          'black',\n          1,\n          'milieu',\n          true,\n        ),\n      )\n      texteGris.push(\n        texteParPosition(\n          nombreAvecEspace(i + 1),\n          monpavage.barycentres[i].x,\n          monpavage.barycentres[i].y + 0.5,\n          0,\n          'gray',\n          1,\n          'milieu',\n          true,\n        ),\n      )\n    }\n    if (this.sup2) {\n      // Doit-on montrer les centres des figures ?\n      for (let i = 0; i < monpavage.nb_polygones; i++) {\n        objets.push(monpavage.tracesCentres[i])\n      }\n    }\n    for (let i = 0; i < monpavage.nb_polygones; i++) {\n      // il faut afficher tous les polygones du pavage\n      objets.push(monpavage.polygones[i])\n    }\n\n    texte = mathalea2d(\n      Object.assign({}, fixeBordures([...objets, ...texteNoir])),\n      objets,\n      texteNoir,\n    ) // monpavage.fenetre est calibrée pour faire entrer le pavage dans une feuille A4\n    const couleurs = combinaisonListes(['green', 'red', 'blue'], nbSymetriques)\n    for (let i = 0; i < nbSymetriques; i++) {\n      setReponse(this, i, couples[i][1])\n      texte +=\n        numAlpha(i) +\n        `Quelle est l'image de la figure $${couples[i][0]}$ dans la symétrie d'axe $(d)$ ?` +\n        ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers) +\n        '<br>'\n      texteCorr +=\n        numAlpha(i) +\n        `L'image de ${texteEnCouleur('la figure', couleurs[i])} $${miseEnEvidence(couples[i][0], couleurs[i])}$ dans la symétrie d'axe $(d)$ est la figure $${miseEnEvidence(couples[i][1])}$.<br>`\n      if (this.correctionDetaillee) {\n        t = nbSymetriques * 3\n        A = monpavage.barycentres[couples[i][0] - 1]\n        B = monpavage.barycentres[couples[i][1] - 1]\n        P1 = monpavage.polygones[couples[i][0] - 1]\n        P1.color = colorToLatexOrHTML(couleurs[i])\n        P1.couleurDeRemplissage = colorToLatexOrHTML(couleurs[i])\n        P1.opaciteDeRemplissage = 0.5\n        P1.epaisseur = 2\n        P2 = monpavage.polygones[couples[i][1] - 1]\n        P2.color = colorToLatexOrHTML(couleurs[i])\n        P2.couleurDeRemplissage = colorToLatexOrHTML(couleurs[i])\n        P2.opaciteDeRemplissage = 0.5\n        P2.epaisseur = 2\n        objetsCorrection.push(\n          tracePoint(A, B),\n          longueur(A, B) === 0 ? vide2d() : segment(A, B, couleurs[i]),\n          P1,\n          P2,\n        )\n        if (context.isHtml) {\n          P3 = symetrieAnimee(\n            P1,\n            d,\n            `begin=\"${i * 3}s;${i * 3 + t}s;${i * 3 + t * 2}s\" end=\"${i * 3 + 2}s;${i * 3 + t + 2}s;${i * 3 + t * 2 + 2}s\" dur=\"2s\" repeatCount=\"indefinite\" repeatDur=\"${9 * nbSymetriques}s\" id=\"poly-${i}-anim\"`,\n          )\n          objetsCorrection.push(P3)\n        }\n        if (longueur(A, B) !== 0)\n          objetsCorrection.push(codageMediatrice(A, B, couleurs[i], codes[i]))\n      }\n    }\n    if (this.correctionDetaillee) {\n      texteCorr += mathalea2d(\n        Object.assign(\n          {},\n          fixeBordures([...objets, ...objetsCorrection, ...texteGris]),\n        ),\n        objets,\n        objetsCorrection,\n        texteGris,\n      )\n    }\n    this.listeQuestions.push(texte)\n    this.listeCorrections.push(texteCorr)\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","uuid","refs","longueur","A","B","PavageEtReflexion2d","Exercice","nbSymetriques","videcouples","tableau","k","j","compare2polys","poly1","poly2","comparenbsommets","comparesommets","compare2sommets","sommet1","sommet2","egal","trouve","trouves","P","M","refleccion","pavage","d","numero","poly","pol","result","sympoly","symetrieAxiale","objets","objetsCorrection","P1","P2","P3","t","codes","taillePavage","Nx","Ny","index1","index2","image","couples","tailles","monpavage","fenetre","texte","texteCorr","typeDePavage","nombreTentatives","nombrePavageTestes","randint","context","indicesSimilaires","shuffle","i","p","lastChoice","kt","choice","mediatrice","droiteAvecNomLatex","texteNoir","texteGris","texteParPosition","nombreAvecEspace","mathalea2d","fixeBordures","couleurs","combinaisonListes","setReponse","numAlpha","ajouteChampTexteMathLive","KeyboardType","texteEnCouleur","miseEnEvidence","colorToLatexOrHTML","tracePoint","vide2d","segment","symetrieAnimee","codageMediatrice","listeQuestionsToContenu"],"mappings":"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"}