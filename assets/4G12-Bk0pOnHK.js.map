{"version":3,"file":"4G12-Bk0pOnHK.js","sources":["../../src/exercices/4e/4G12.ts"],"sourcesContent":["import { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport { Droite, droite } from '../../lib/2d/droites'\nimport { grille } from '../../lib/2d/Grille'\nimport { Point, point } from '../../lib/2d/PointAbstrait'\nimport { Polygone, polygone } from '../../lib/2d/polygones'\nimport { segment } from '../../lib/2d/segmentsVecteurs'\nimport { texteParPointEchelle } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { homothetie, translation } from '../../lib/2d/transformations'\nimport { milieu } from '../../lib/2d/utilitairesPoint'\nimport { vecteur, type Vecteur } from '../../lib/2d/Vecteur'\nimport { vide2d, type Vide2d } from '../../lib/2d/Vide2d'\nimport { centrage, deuxColonnes } from '../../lib/format/miseEnPage'\nimport { texcolors } from '../../lib/format/style'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport {\n  miseEnEvidence,\n  texteEnCouleur,\n  texteEnCouleurEtGras,\n} from '../../lib/outils/embellissements'\nimport { lettreDepuisChiffre, sp } from '../../lib/outils/outilString'\nimport type {\n  RotationAnimee,\n  SymetrieAnimee,\n  TranslationAnimee,\n} from '../../modules/2dAnimation'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\nimport { transfoPoly } from './4G12-1'\nimport { CHEMINS_PREDEFINIS } from './_4G12-paths'\n\nexport const titre = 'Trouver une série de transformations'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCOpen'\n\nexport const dateDePublication = '3/12/2021'\n\n/**\n * À partir de la figure 0, l'idée est de trouver un chemin qui mène à la figure 28 par une série\n * de transformations entre deux figures strictement voisines.\n * @author : Jean-Claude Lhote (et modifié par Eric Elter)\n */\n\nexport const uuid = '4ffdb'\n\nexport const refs = {\n  'fr-fr': ['4G12'],\n  'fr-ch': ['9ES6-23', '10ES2-5'],\n}\n\nconst motifs = [\n  polygone([\n    point(1, 1),\n    point(2, 1),\n    point(2, 4),\n    point(6, 4),\n    point(6, 5),\n    point(3, 5),\n    point(3, 6),\n    point(1, 6),\n  ]),\n  polygone([\n    point(1, 1),\n    point(3, 1),\n    point(3, 4),\n    point(6, 4),\n    point(6, 6),\n    point(3, 6),\n    point(3, 5),\n    point(1, 5),\n  ]),\n  polygone([\n    point(2, 1),\n    point(3, 1),\n    point(3, 3),\n    point(4, 3),\n    point(4, 4),\n    point(3, 4),\n    point(3, 5),\n    point(5, 5),\n    point(5, 6),\n    point(2, 6),\n    point(2, 4),\n    point(1, 4),\n    point(1, 3),\n    point(2, 3),\n  ]),\n  polygone([\n    point(1, 1),\n    point(4, 1),\n    point(4, 2),\n    point(5, 2),\n    point(5, 4),\n    point(4, 4),\n    point(4, 5),\n    point(3, 5),\n    point(3, 6),\n    point(2, 6),\n    point(2, 2),\n    point(1, 2),\n  ]),\n  polygone([\n    point(2, 1),\n    point(5, 1),\n    point(5, 3),\n    point(6, 3),\n    point(6, 4),\n    point(4, 4),\n    point(4, 3),\n    point(3, 3),\n    point(3, 5),\n    point(5, 5),\n    point(5, 6),\n    point(2, 6),\n  ]),\n  polygone([\n    point(1, 1),\n    point(5, 1),\n    point(5, 2),\n    point(2, 2),\n    point(2, 3),\n    point(3, 3),\n    point(3, 4),\n    point(2, 4),\n    point(2, 5),\n    point(4, 5),\n    point(4, 6),\n    point(1, 6),\n  ]),\n  polygone([\n    point(2, 6),\n    point(2, 1),\n    point(5, 1),\n    point(5, 2),\n    point(3, 2),\n    point(3, 6),\n  ]),\n  polygone([\n    point(2, 6),\n    point(5, 6),\n    point(5, 5),\n    point(4, 5),\n    point(4, 1),\n    point(1, 1),\n    point(1, 2),\n    point(3, 2),\n    point(3, 5),\n    point(2, 5),\n  ]),\n  polygone([\n    point(2, 1),\n    point(3, 1),\n    point(6, 1),\n    point(6, 2),\n    point(3, 2),\n    point(3, 3),\n    point(5, 3),\n    point(5, 5),\n    point(3, 5),\n    point(3, 6),\n    point(2, 6),\n  ]),\n  polygone([\n    point(2, 1),\n    point(3, 1),\n    point(3, 3),\n    point(5, 3),\n    point(5, 6),\n    point(2, 6),\n  ]),\n  polygone([\n    point(2, 1),\n    point(2, 6),\n    point(5, 6),\n    point(5, 3),\n    point(3, 3),\n    point(5, 1),\n    point(4, 1),\n    point(3, 2),\n    point(3, 1),\n  ]),\n  polygone([\n    point(2, 1),\n    point(6, 1),\n    point(6, 4),\n    point(3, 4),\n    point(3, 5),\n    point(5, 5),\n    point(5, 6),\n    point(2, 6),\n    point(2, 3),\n    point(5, 3),\n    point(5, 2),\n    point(2, 2),\n  ]),\n  polygone([\n    point(2, 1),\n    point(4, 1),\n    point(5, 2),\n    point(5, 1),\n    point(6, 1),\n    point(6, 6),\n    point(5, 6),\n    point(5, 3),\n    point(4, 2),\n    point(3, 2),\n    point(3, 6),\n    point(2, 6),\n  ]),\n  polygone([\n    point(1, 6),\n    point(2, 6),\n    point(4, 3),\n    point(5, 5),\n    point(6, 5),\n    point(4, 1),\n    point(3, 1),\n  ]),\n  polygone([\n    point(2, 6),\n    point(3, 6),\n    point(4, 4),\n    point(5, 6),\n    point(6, 6),\n    point(3, 1),\n    point(2, 1),\n    point(3, 3),\n  ]),\n  polygone([\n    point(1, 1),\n    point(6, 1),\n    point(6, 2),\n    point(3, 5),\n    point(5, 5),\n    point(5, 6),\n    point(1, 6),\n    point(5, 2),\n    point(1, 2),\n  ]),\n  polygone([\n    point(3, 6),\n    point(3, 5),\n    point(2, 5),\n    point(2, 4),\n    point(3, 4),\n    point(3, 3),\n    point(1, 3),\n    point(1, 2),\n    point(3, 2),\n    point(3, 1),\n    point(4, 1),\n    point(4, 2),\n    point(5, 2),\n    point(5, 3),\n    point(4, 3),\n    point(4, 4),\n    point(6, 4),\n    point(6, 5),\n    point(4, 5),\n    point(4, 6),\n  ]),\n  polygone([\n    point(2, 1),\n    point(3, 3),\n    point(2, 3),\n    point(2, 4),\n    point(6, 4),\n    point(6, 3),\n    point(5, 3),\n    point(5, 1),\n    point(4, 1),\n    point(4, 3),\n    point(3, 1),\n  ]),\n  polygone([\n    point(2, 2),\n    point(3, 3),\n    point(3, 2),\n    point(4, 3),\n    point(4, 2),\n    point(5, 3),\n    point(5, 2),\n    point(6, 3),\n    point(6, 5),\n    point(2, 5),\n  ]),\n  polygone([\n    point(1, 1),\n    point(3, 1),\n    point(3, 5),\n    point(5, 5),\n    point(5, 6),\n    point(2, 6),\n    point(2, 2),\n    point(1, 2),\n  ]),\n  polygone([\n    point(1, 1),\n    point(6, 1),\n    point(6, 2),\n    point(4, 2),\n    point(4, 4),\n    point(5, 4),\n    point(5, 5),\n    point(1, 5),\n    point(1, 4),\n    point(3, 4),\n    point(3, 2),\n    point(1, 2),\n  ]),\n  polygone([\n    point(2, 1),\n    point(2, 3),\n    point(4, 3),\n    point(4, 4),\n    point(3, 4),\n    point(3, 6),\n    point(6, 6),\n    point(6, 4),\n    point(5, 4),\n    point(5, 3),\n    point(6, 3),\n    point(6, 1),\n    point(5, 1),\n    point(5, 2),\n    point(4, 2),\n    point(4, 1),\n  ]),\n  polygone([\n    point(2, 6),\n    point(2, 4),\n    point(1, 4),\n    point(1, 2),\n    point(2, 2),\n    point(2, 1),\n    point(3, 1),\n    point(3, 3),\n    point(5, 3),\n    point(5, 4),\n    point(4, 4),\n    point(4, 5),\n    point(3, 5),\n    point(3, 6),\n  ]),\n  polygone([\n    point(1, 3),\n    point(1, 1),\n    point(3, 1),\n    point(3, 2),\n    point(6, 2),\n    point(6, 5),\n    point(3, 5),\n    point(3, 3),\n  ]),\n  polygone([\n    point(2, 1),\n    point(2, 2),\n    point(1, 2),\n    point(1, 4),\n    point(2, 4),\n    point(2, 3),\n    point(3, 3),\n    point(3, 2),\n    point(4, 2),\n    point(4, 4),\n    point(3, 4),\n    point(3, 6),\n    point(6, 6),\n    point(6, 4),\n    point(5, 4),\n    point(5, 3),\n    point(6, 3),\n    point(6, 1),\n  ]),\n  polygone([\n    point(3, 1),\n    point(3, 2),\n    point(1, 2),\n    point(1, 3),\n    point(2, 3),\n    point(2, 4),\n    point(3, 4),\n    point(3, 5),\n    point(5, 5),\n    point(5, 4),\n    point(6, 4),\n    point(6, 3),\n    point(5, 3),\n    point(5, 2),\n    point(4, 2),\n    point(4, 1),\n  ]),\n]\nconst noeuds: Point[] = []\nconst maGrille: NestedObjetMathalea2dArray = []\nconst labels = []\nmaGrille.push(grille(0, 0, 16, 16, 'black', 0.2, 0.4))\nfor (let i = 0; i < 6; i++) {\n  maGrille.push(segment(i * 3.2, 0, i * 3.2, 16))\n  maGrille.push(segment(0, i * 3.2, 16, i * 3.2))\n  for (let j = 0; j < 6; j++) {\n    labels[i * 6 + j] =\n      i * 6 + j < 26\n        ? lettreDepuisChiffre(i * 6 + j + 1)\n        : lettreDepuisChiffre(((i * 6 + j) % 26) + 1) + \"'\"\n    noeuds[i * 6 + j] = point(\n      i * 3.2,\n      j * 3.2,\n      labels[i * 6 + j],\n      'above right',\n    )\n    maGrille.push(tracePoint(noeuds[i * 6 + j]))\n  }\n}\n\nfunction definitElements(\n  type: 'symax' | 'trans' | 'rot90' | 'rot180',\n  depart: number,\n  arrivee: number,\n  leSens = true,\n  num = 0,\n  poly1: Polygone,\n) {\n  let texte,\n    texteCorr,\n    texteInteractif,\n    axeSymetrie,\n    nomDroite,\n    nomCentreRotation,\n    centreRotation,\n    centreSymetrie,\n    nomSegment\n  const sensProgression =\n    arrivee - depart === 6\n      ? 'Est'\n      : arrivee - depart === -6\n        ? 'Ouest'\n        : arrivee - depart === 1\n          ? 'Nord'\n          : 'Sud'\n  switch (type) {\n    case 'symax': // vers l'est la droite est définie par arrivee et arrivee+1 sinon c'est arrivee et arrivee+6\n      switch (sensProgression) {\n        case 'Est':\n          axeSymetrie = droite(noeuds[arrivee], noeuds[arrivee + 1])\n          nomDroite = '(' + noeuds[arrivee].nom + noeuds[arrivee + 1].nom + ')'\n          break\n        case 'Ouest':\n          axeSymetrie = droite(noeuds[depart], noeuds[depart + 1])\n          nomDroite = '(' + noeuds[depart].nom + noeuds[depart + 1].nom + ')'\n          break\n        case 'Nord':\n          axeSymetrie = droite(noeuds[arrivee], noeuds[arrivee + 6])\n          nomDroite = '(' + noeuds[arrivee].nom + noeuds[arrivee + 6].nom + ')'\n          break\n        case 'Sud':\n          axeSymetrie = droite(noeuds[depart], noeuds[depart + 6])\n          nomDroite = '(' + noeuds[depart].nom + noeuds[depart + 6].nom + ')'\n          break\n      }\n      texteCorr = `La figure ${texteEnCouleurEtGras(depart, texcolors(num + 11))} a pour image la figure ${texteEnCouleurEtGras(arrivee, texcolors(num + 12))} par la symétrie d'axe $${nomDroite}$.`\n      texte = `La figure \\\\ldots${sp()}a pour image la figure${sp(1)}\\\\ldots${sp(1)}par la symétrie d'axe (${sp(1)}\\\\ldots${sp(1)})`\n      texteInteractif =\n        \"Une symétrie axiale dont l'axe passe par deux points du quadrillage.\"\n      return {\n        texte,\n        texteCorr,\n        texteInteractif,\n        type,\n        axe: axeSymetrie,\n        depart,\n        arrivee,\n      }\n    case 'trans': // facile pour la translation : depart->arrivee\n      texteCorr = `La figure ${texteEnCouleurEtGras(depart, texcolors(num + 11))} a pour image la figure ${texteEnCouleurEtGras(arrivee, texcolors(num + 12))} par la translation transformant $${noeuds[depart].nom}$ en $${noeuds[arrivee].nom}$.`\n      texte = `La figure \\\\ldots${sp()}a pour image la figure${sp(1)}\\\\ldots${sp(1)}par la translation transformant${sp(1)}\\\\ldots${sp(1)}en${sp(1)}\\\\ldots${sp(1)}`\n      texteInteractif =\n        'Une translation définie par deux points du quadrillage.'\n      return {\n        texte,\n        texteCorr,\n        texteInteractif,\n        type,\n        vecteur: vecteur(noeuds[depart], noeuds[arrivee]),\n        depart,\n        arrivee,\n      }\n    case 'rot90': // la position du centre dépend du sens de rotation et de départ et arrivee.\n      switch (sensProgression) {\n        case 'Est':\n          centreRotation = leSens ? noeuds[arrivee + 1] : noeuds[arrivee]\n          nomCentreRotation = leSens\n            ? noeuds[arrivee + 1].nom\n            : noeuds[arrivee].nom\n          break\n        case 'Ouest':\n          centreRotation = leSens ? noeuds[depart] : noeuds[depart + 1]\n          nomCentreRotation = leSens\n            ? noeuds[depart].nom\n            : noeuds[depart + 1].nom\n          break\n        case 'Nord':\n          centreRotation = leSens ? noeuds[arrivee] : noeuds[arrivee + 6]\n          nomCentreRotation = leSens\n            ? noeuds[arrivee].nom\n            : noeuds[arrivee + 6].nom\n          break\n        case 'Sud':\n          centreRotation = leSens ? noeuds[depart + 6] : noeuds[depart]\n          nomCentreRotation = leSens\n            ? noeuds[depart + 6].nom\n            : noeuds[depart].nom\n          break\n      }\n      texteCorr = `La figure ${texteEnCouleurEtGras(depart, texcolors(num + 11))} a pour image la figure ${texteEnCouleurEtGras(arrivee, texcolors(num + 12))} par la rotation de centre $${nomCentreRotation}$ d'angle $90^\\\\circ$ dans le sens ${leSens ? \"contraire des aiguilles d'une montre\" : \"des aiguilles d'une montre\"}.`\n      texte = `La figure \\\\ldots${sp()}a pour image la figure${sp(1)}\\\\ldots${sp(1)}par la rotation de centre${sp(1)}\\\\ldots${sp(1)}d'angle $90^\\\\circ$ dans le sens  ${leSens ? \"contraire des aiguilles d'une montre\" : \"des aiguilles d'une montre\"}`\n      texteInteractif =\n        \"Une rotation d'angle 90° et dont le centre est un point du quadrillage.\"\n      return {\n        texte,\n        texteCorr,\n        texteInteractif,\n        type,\n        centre: centreRotation,\n        sens: leSens,\n        depart,\n        arrivee,\n      }\n    case 'rot180': // pas besoin du sens, mais le milieu choisi dépend de depart et arrivee\n      switch (sensProgression) {\n        case 'Est':\n          centreSymetrie = milieu(noeuds[arrivee], noeuds[arrivee + 1])\n          nomSegment = '[' + noeuds[arrivee + 1].nom + noeuds[arrivee].nom + ']'\n          break\n        case 'Ouest':\n          centreSymetrie = milieu(noeuds[depart], noeuds[depart + 1])\n          nomSegment = '[' + noeuds[depart + 1].nom + noeuds[depart].nom + ']'\n          break\n        case 'Nord':\n          centreSymetrie = milieu(noeuds[arrivee], noeuds[arrivee + 6])\n          nomSegment = '[' + noeuds[arrivee + 6].nom + noeuds[arrivee].nom + ']'\n          break\n        case 'Sud':\n          centreSymetrie = milieu(noeuds[depart], noeuds[depart + 6])\n          nomSegment = '[' + noeuds[depart + 6].nom + noeuds[depart].nom + ']'\n          break\n      }\n      texteCorr = `La figure ${texteEnCouleurEtGras(depart, texcolors(num + 11))} a pour image la figure ${texteEnCouleurEtGras(arrivee, texcolors(num + 12))} par la symétrie dont le centre est le milieu de $${nomSegment}$.`\n      texte = `La figure \\\\ldots${sp()}a pour image la figure${sp(1)}\\\\ldots${sp(1)}par la symétrie dont le centre est le milieu de $[$${sp(1)}\\\\ldots${sp(1)}$]$`\n      texteInteractif =\n        \"Une symétrie centrale dont le centre est un milieu d'un côté de case.\"\n      return {\n        texte,\n        texteCorr,\n        texteInteractif,\n        type,\n        centre: centreSymetrie,\n        depart,\n        arrivee,\n      }\n  }\n}\nexport default class SerieDeTransformations extends Exercice {\n  version: number\n  constructor() {\n    super()\n    this.nbQuestions = 1\n    this.besoinFormulaireNumerique = [\n      'Types de transformations possibles',\n      4,\n      '1 : Symétries axiales seulement\\n2 : Symétries axiales et centrales\\n3 : Symétries et translations\\n4 : Symétries, translations et quarts de tour',\n    ]\n    this.besoinFormulaire2Texte = [\n      \"Nombre de transformations entre le départ et l'arrivée\",\n      'Nombres séparés par des tirets(0 pour laisser le hasard choisir)\\n8 \\n10\\n12\\n14 \\n16',\n    ]\n    this.besoinFormulaire3CaseACocher = ['Énoncés raccourcis', false]\n    this.sup = 4\n    this.sup2 = '8-10-12'\n    this.sup3 = false\n    this.version = 4\n    this.nbQuestions = 1\n  }\n\n  nouvelleVersion() {\n    const A = point(0, 0)\n    let typeDeTransfos: ('symax' | 'trans' | 'rot90' | 'rot180')[]\n    if (this.version === 1) {\n      // On bride this.sup à 1 pour les 6èmes\n      this.sup = 1\n    } else if (this.version === 2) {\n      this.sup = 2 // On le bride à 2 pour les 5èmes\n    } // on ne bride pas pour ce 4G12 et visiblement, il n'existe pas en 3ème. c'est donc la référence max ici.\n\n    this.sup = contraindreValeur(1, 4, this.sup, 4)\n    if (this.sup === 1) typeDeTransfos = ['symax']\n    else if (this.sup === 2) typeDeTransfos = ['symax', 'rot180']\n    else if (this.sup === 3) typeDeTransfos = ['symax', 'trans', 'rot180']\n    else typeDeTransfos = ['symax', 'trans', 'rot90', 'rot180']\n    const nbTransfos = gestionnaireFormulaireTexte({\n      saisie: this.sup2,\n      min: 8,\n      max: 16,\n      melange: 0,\n      nbQuestions: this.nbQuestions,\n      defaut: 10,\n    })\n      .map(Number)\n      .map((el) => Math.floor(el / 2) * 2) // on force pair\n    for (\n      let i = 0,\n        cpt = 0,\n        texte,\n        texteCorr,\n        paramsCorrection,\n        paramsEnonce,\n        leurre0;\n      i < this.nbQuestions && cpt < 10;\n    ) {\n      this.autoCorrection[i] = {}\n      let chemin: number[]\n\n      const polys: (Polygone | Vide2d)[] = []\n      const transfos: {\n        texte: string\n        axe?: Droite\n        centre?: Point\n        sens?: boolean\n        texteCorr: string\n        texteInteractif: string\n        animation?: TranslationAnimee | RotationAnimee | SymetrieAnimee | Vide2d\n        vecteur?: Vecteur\n        depart: number\n        arrivee: number\n        type: 'symax' | 'trans' | 'rot90' | 'rot180'\n      }[] = []\n      const unMotif = randint(0, motifs.length - 1)\n      polys[0] = homothetie(motifs[unMotif], A, 0.4)\n      leurre0 = translation(\n        polys[0],\n        vecteur(\n          ...(choice([\n            [0.4, 0],\n            [0, 0.4],\n            [0.4, 0.4],\n          ]) as [number, number]),\n        ),\n      ) // on translate aléatoirement le motif de départ pour faire le leurre\n      for (let x = 0; x < 5; x++) {\n        for (let y = 0, dalle, transfoAlea, elements; y < 5; y++) {\n          if (x + y > 0) {\n            dalle = x * 6 + y\n            transfoAlea = choice(typeDeTransfos)\n            if (y > 0) {\n              elements = definitElements(\n                transfoAlea,\n                dalle - 1,\n                dalle,\n                choice([true, false]),\n                0,\n                polys[dalle - 1] as Polygone,\n              )\n              polys[dalle] = transfoPoly(\n                dalle === 1 ? leurre0 : polys[dalle - 1],\n                elements,\n              )\n              if (y === 4) polys[dalle + 1] = vide2d()\n            } else {\n              elements = definitElements(\n                transfoAlea,\n                dalle - 6,\n                dalle,\n                choice([true, false]),\n                0,\n                polys[dalle - 6] as Polygone,\n              )\n              polys[dalle] = transfoPoly(\n                dalle === 6 ? leurre0 : polys[dalle - 6],\n                elements,\n              )\n            }\n          }\n        }\n      }\n\n      // Construction d'un chemin pour aller de la figure de départ à celle d'arrivée\n      chemin = []\n      this.sup2 = parseInt(this.sup2)\n\n      chemin = genererCheminOptimise(nbTransfos[i])\n      for (let k = 0; k < chemin.length - 1; k++) {\n        transfos[k] = definitElements(\n          choice(typeDeTransfos),\n          chemin[k],\n          chemin[k + 1],\n          choice([true, false]),\n          k,\n          polys[chemin[k]] as Polygone,\n        )\n        polys[chemin[k + 1]] = transfoPoly(polys[chemin[k]], transfos[k])\n      }\n      const objetsEnonce: NestedObjetMathalea2dArray = []\n      const objetsCorrection: NestedObjetMathalea2dArray = []\n      texte = this.interactif\n        ? this.sup === 1\n          ? 'Compléter la liste des figures successives obtenues avec une suite de symétries axiales.<br>La liste commence par 0, finit par 28 et les numéros sont à séparer par des points-virgules.<br>'\n          : 'Compléter la liste des figures successives obtenues avec cette suite de transformations.<br>La liste commence par 0, finit par 28 et les numéros sont à séparer par des points-virgules.<br>'\n        : \"On passe de la figure $0$ à la figure $28$ en passant par des cases adjacentes, en suivant les transformations listées dans l'ordre précis des phrases ci-dessous qu'il faut compléter.<br>\"\n      texteCorr = ''\n\n      for (let x = 0; x < 5; x++) {\n        for (let y = 0, numero; y < 5; y++) {\n          numero = texteParPointEchelle(\n            Number(x * 6 + y).toString(),\n            point(x * 3.2 + 1.6, y * 3.2 + 1.6),\n            0,\n            'black',\n            1.5,\n            'milieu',\n            true,\n            0.4,\n          )\n          numero.contour = context.isHtml\n          numero.couleurDeRemplissage = colorToLatexOrHTML('black')\n          numero.opacite = context.isHtml ? 0.5 : 1\n          numero.opaciteDeRemplissage = 1\n          maGrille.push(numero)\n          polys[x * 6 + y].opacite = 0.7\n          polys[x * 6 + y].color = colorToLatexOrHTML('blue')\n        }\n      }\n\n      polys[0].opaciteDeRemplissage = 0.7\n      polys[0].couleurDeRemplissage = colorToLatexOrHTML(texcolors(11))\n      polys[28].opaciteDeRemplissage = 0.7\n      polys[28].couleurDeRemplissage = colorToLatexOrHTML(\n        texcolors(11 + (chemin.length - 1)),\n      )\n      objetsEnonce.push(...polys)\n      objetsEnonce.push(...maGrille)\n\n      for (let x = 0; x < 6; x++) {\n        for (let y = 0, label; y < 6; y++) {\n          label = texteParPointEchelle(\n            noeuds[x * 6 + y].nom,\n            translation(noeuds[x * 6 + y], vecteur(0.3, 0.3)),\n            0,\n            context.isHtml ? 'red' : 'black',\n            1.2,\n            'milieu',\n            true,\n            0.4,\n          )\n          label.contour = context.isHtml\n          label.couleurDeRemplissage = colorToLatexOrHTML('black')\n          label.opacite = context.isHtml ? 0.8 : 1\n          label.opaciteDeRemplissage = 1\n          objetsEnonce.push(label)\n        }\n      }\n      if (this.sup === 1) {\n        // cas des symétries axiales seules (une seule ligne par étape) plus de place pour la figure qui rétrécit en F° du nombre d'étapes.\n        paramsEnonce = {\n          xmin: -0.5,\n          ymin: -0.5,\n          xmax: 17,\n          ymax: 16.5,\n          pixelsParCm: 20,\n          scale: 1.1 - chemin.length * 0.03125,\n        }\n        paramsCorrection = {\n          xmin: -0.5,\n          ymin: -0.5,\n          xmax: 17,\n          ymax: 16.5,\n          pixelsParCm: 20,\n          scale: 1 - chemin.length * 0.03125,\n        }\n      } else {\n        // à partir de la symétrie centrale, il peut y avoir 2 lignes par étapes, donc on rétrécit davantage la figure.\n        paramsEnonce = {\n          xmin: -0.5,\n          ymin: -0.5,\n          xmax: 17,\n          ymax: 16.5,\n          pixelsParCm: 20,\n          scale: 1.2 - chemin.length * 0.05,\n        }\n        paramsCorrection = {\n          xmin: -0.5,\n          ymin: -0.5,\n          xmax: 17,\n          ymax: 16.5,\n          pixelsParCm: 20,\n          scale: 1.1 - chemin.length * 0.05,\n        }\n      }\n      for (let k = 1, figure; k < chemin.length - 1; k++) {\n        figure = translation(\n          polys[chemin[k]] as Polygone,\n          vecteur(0, 0),\n        ) as Polygone\n        figure.color = colorToLatexOrHTML(texcolors(k + 11))\n        figure.couleurDeRemplissage = colorToLatexOrHTML(texcolors(k + 11))\n        figure.opaciteDeRemplissage = 0.6\n        objetsCorrection.push(figure)\n      }\n      objetsCorrection.push(...objetsEnonce)\n      for (let etape = 0; etape < chemin.length - 1; etape++) {\n        texte +=\n          this.interactif && context.isHtml\n            ? this.sup === 1\n              ? ''\n              : `$${miseEnEvidence(etape + 1 + ')' + sp(1))}$` +\n                texteEnCouleur(\n                  transfos[etape].texteInteractif,\n                  etape % 2 === 0 ? 'black' : 'brown',\n                ) +\n                '<br>'\n            : etape === 0\n              ? `$${miseEnEvidence(etape + 1 + ')' + sp(1))}$` +\n                texteEnCouleur(\n                  transfos[0].texte + (this.sup3 ? ',' : '.') + '<br>',\n                  'black',\n                )\n              : this.sup3\n                ? `$${miseEnEvidence(etape + 1 + ')' + sp(1))}$` +\n                  texteEnCouleur(\n                    'qui ' +\n                      transfos[etape].texte.substr(context.isHtml ? 22 : 18) +\n                      (etape === chemin.length - 2 ? '.' : ','),\n                    etape % 2 === 0 ? 'black' : 'brown',\n                  ) +\n                  '<br>'\n                : `$${miseEnEvidence(etape + 1 + ')' + sp(1))}$` +\n                  texteEnCouleur(\n                    transfos[etape].texte + '.',\n                    etape % 2 === 0 ? 'black' : 'brown',\n                  ) +\n                  '<br>'\n        texteCorr += transfos[etape].texteCorr + '<br>'\n      }\n      if (context.isHtml) {\n        texte += ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers)\n        texte = deuxColonnes(texte, mathalea2d(paramsEnonce, objetsEnonce), 50)\n        texteCorr = deuxColonnes(\n          texteCorr,\n          mathalea2d(paramsCorrection, objetsCorrection),\n          50,\n        )\n      } else {\n        texte += '\\n' + centrage(mathalea2d(paramsEnonce, objetsEnonce))\n        texteCorr +=\n          '\\n' + centrage(mathalea2d(paramsCorrection, objetsCorrection))\n      }\n      texteCorr += this.interactif\n        ? 'La réponse était donc : ' +\n          texteEnCouleurEtGras(chemin.toString().replaceAll(',', ';')) +\n          '.'\n        : ''\n      if (context.isAmc) {\n        this.autoCorrection = [\n          {\n            enonce: texte,\n            propositions: [\n              {\n                texte: texteCorr,\n                statut: 3,\n                feedback: '',\n                sanscadre: true,\n              },\n            ],\n          },\n        ]\n      } else {\n        handleAnswers(this, i, {\n          reponse: {\n            value: chemin.toString().replaceAll(',', ';'),\n            options: { suiteRangeeDeNombres: true },\n          },\n        })\n      }\n      texte += context.isHtml ? '<br>' : '\\n \\\\medskip'\n      texteCorr += context.isHtml ? '<br>' : '\\n \\\\medskip'\n      if (\n        this.questionJamaisPosee(\n          i,\n          chemin.map(String).join(''),\n          unMotif.toString(),\n        )\n      ) {\n        this.listeQuestions.push(texte)\n        this.listeCorrections.push(texteCorr)\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction genererCheminOptimise(nbTransfos: number): number[] {\n  if (nbTransfos < 8 || nbTransfos > 16 || nbTransfos % 2 !== 0) {\n    nbTransfos = choice([8, 10, 12, 14, 16])\n  }\n  const longueursDisponibles = Object.keys(CHEMINS_PREDEFINIS)\n    .map(Number)\n    .filter((longueur) => longueur === nbTransfos)\n\n  const longueursEligibles =\n    longueursDisponibles.length > 0\n      ? longueursDisponibles\n      : Object.keys(CHEMINS_PREDEFINIS).map(Number)\n\n  const longueurChoisie = choice(longueursEligibles)\n  const cheminsPourLongueur = CHEMINS_PREDEFINIS[longueurChoisie]\n\n  if (!cheminsPourLongueur || cheminsPourLongueur.length === 0) {\n    window.notify(\n      'Aucun chemin prédéfini disponible pour la longueur choisie.',\n      { longueurChoisie },\n    )\n  }\n\n  return [...choice(cheminsPourLongueur)]\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","dateDePublication","uuid","refs","motifs","polygone","point","noeuds","maGrille","labels","grille","i","segment","j","lettreDepuisChiffre","tracePoint","definitElements","type","depart","arrivee","leSens","num","poly1","texte","texteCorr","texteInteractif","axeSymetrie","nomDroite","nomCentreRotation","centreRotation","centreSymetrie","nomSegment","sensProgression","droite","texteEnCouleurEtGras","texcolors","sp","vecteur","milieu","SerieDeTransformations","Exercice","__publicField","A","typeDeTransfos","contraindreValeur","nbTransfos","gestionnaireFormulaireTexte","el","cpt","paramsCorrection","paramsEnonce","leurre0","chemin","polys","transfos","unMotif","randint","homothetie","translation","choice","x","y","dalle","transfoAlea","elements","transfoPoly","vide2d","genererCheminOptimise","k","objetsEnonce","objetsCorrection","numero","texteParPointEchelle","context","colorToLatexOrHTML","label","figure","etape","miseEnEvidence","texteEnCouleur","ajouteChampTexteMathLive","KeyboardType","deuxColonnes","mathalea2d","centrage","handleAnswers","listeQuestionsToContenu","longueursDisponibles","CHEMINS_PREDEFINIS","longueur","longueursEligibles","longueurChoisie","cheminsPourLongueur"],"mappings":"k6HA0CO,MAAMA,GAAQ,uCACRC,GAAkB,GAClBC,GAAiB,WACjBC,GAAW,GACXC,GAAU,UAEVC,GAAoB,YAQpBC,GAAO,QAEPC,GAAO,CAClB,QAAS,CAAC,MAAM,EAChB,QAAS,CAAC,UAAW,SAAS,CAChC,EAEMC,EAAS,CACbC,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,CAAA,CACX,EACDD,EAAS,CACPC,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA,EAAM,EAAG,CAAC,EACVA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"}