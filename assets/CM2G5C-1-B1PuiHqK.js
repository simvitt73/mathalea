var oe=Object.defineProperty;var ne=(o,i,e)=>i in o?oe(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var P=(o,i,e)=>ne(o,typeof i!="symbol"?i+"":i,e);import{B as ae}from"./BoiteBuilder-CNadP7uD.js";import{E as ce,P as v,$ as R,_ as ue,r as A,p as q,bM as le,o as me,ce as $}from"./index-Bl1vqpvV.js";import{f as E}from"./fixeBordures-BSnKuTIe.js";import{t as fe}from"./textes-BRWEBQB6.js";import{a as G}from"./Canvas3DElement-D1zl0g6-.js";import{G as D,q as Fe,k as pe,D as he,b as K,s as W,B as J,V as de}from"./vendors/three-q_6hD11P.js";import{m as y}from"./mathalea2d-Bag0NjHD.js";import"./utilitairesGeometriques-rO8Jz15i.js";import"./PointAbstrait-Cz1GEocE.js";import"./ObjetMathalea2D-CXcNXRpD.js";import"./polygones-DsgvV9bw.js";import"./vendors/earcut-jJVragJp.js";import"./pattern-lywlDurK.js";import"./segmentsVecteurs-D7d77vVw.js";import"./vendors/roughjs-CycZv-lV.js";/* empty css                         */import"./vendors/svelte-BrkG1v2Q.js";import"./vendors/clsx-B-dksMZM.js";import"./vendors/esm-env-rsSWfq8L.js";import"./vendors/ua-parser-js-D4W63oil.js";import"./vendors/decimal.js-BceHFVC1.js";import"./vendors/katex-BISJkeK-.js";import"./vendors/seedrandom-Cz-2rAdY.js";import"./vendors/apigeom-CvUqzk7F.js";import"./vendors/mathjs-DKCMnljp.js";import"./vendors/babel_runtime-BFeZ_VDU.js";import"./vendors/javascript-natural-sort-QZS4Fyws.js";import"./vendors/escape-latex-BegatI0j.js";import"./vendors/complex.js-C1JbXRlX.js";import"./vendors/typed-function-CVM02vEe.js";import"./vendors/fraction.js-CYLvagDM.js";import"./vendors/tiny-emitter-DbO2P2s3.js";import"./vendors/xstate-BSXD3zxA.js";import"./vendors/crypto-js-DElKCTCw.js";import"./json/referentielStaticCH-DrWiqhRe.js";import"./json/referentielStaticFR-DTeSOhOd.js";import"./json/uuidsToUrlFR-Cc7zu7XX.js";import"./vendors/cortex-js_compute-engine-Bo_2zfG3.js";import"./vendors/jspreadsheet-ce-kKqtlqR-.js";import"./vendors/jsuites-D-TmSgJs.js";import"./vendors/jspreadsheet_formula-CXu1m5Ak.js";import"./vendors/mathlive-2YgxEGya.js";import"./vendors/bugsnag_js-B7oJ4uO9.js";import"./vendors/bugsnag_browser-CBi0d3dm.js";import"./vendors/big-integer-RrBdqg8C.js";import"./vendors/mixer_postmessage-rpc-JyZjM7pP.js";import"./vendors/eventemitter3-COjgItKg.js";import"./vendors/scratchblocks-BVPCj2Ee.js";import"./json/scratchFr-BNITwCy2.js";import"./json/refToUuidFR-B10GlhlX.js";import"./json/refToUuidCH-CKb1Gq_b.js";import"./json/codeToLevelList-BfkorBF2.js";import"./json/codeToThemeList-B4uzTsqe.js";import"./vendors/loadjs-Dy50zFDn.js";import"./json/referentielProfs-BdpwqI3j.js";import"./json/uuidsRessources-jdCgFfXb.js";import"./json/referentielBibliotheque-sQm1j5fm.js";import"./vendors/file-saver-Cqu1O8xU.js";import"./vendors/jszip-BuNf6wCF.js";import"./vendors/jszip-utils-DhFX1KUq.js";import"./vendors/copy-image-clipboard-Cf9y-QAU.js";import"./vendors/qrcode-BsrOgw3n.js";import"./vendors/dijkstrajs-COg3n3zL.js";import"./vendors/brace-DEOAbY2S.js";import"./json/referentielAppsTierce-SxU58PZT.js";import"./vendors/sortablejs-DdTU3J9A.js";import"./json/carouselContent-Bjt6Yxr-.js";import"./json/levelsThemesList-CXNnIZKX.js";import"./json/levelsThemesListCH-BErSids0.js";import"./json/referentiel2022CH-BM0iwKz4.js";import"./json/referentiel2022FR-DRcEqmJS.js";import"./json/referentielGeometrieDynamique-BJ2PHXsv.js";import"./json/referentielRessources-BU2QQoSD.js";import"./json/referentielsActivation-CpD_hoec.js";import"./vendors/troika-three-text-CseoN0LQ.js";import"./vendors/troika-worker-utils-DbVzmR1E.js";import"./vendors/webgl-sdf-generator-qD_8IFx2.js";import"./vendors/bidi-js-DLACMwmw.js";import"./vendors/troika-three-utils-DzUc9kqZ.js";const ge=[[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0}]],[[{numero:0,isFace:!1},{numero:0,isFace:!1},{numero:1,isFace:!0}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]]],xe=[[[{numero:1,isFace:!0,collision:6},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:6},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:5}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:2},{numero:0,isFace:!1},{numero:2,isFace:!0}],[{numero:3,isFace:!0},{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:5},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:5}],[{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0}],[{numero:4,isFace:!0}],[{numero:5,isFace:!0}],[{numero:6,isFace:!0}]],[[{numero:1,isFace:!0,collision:6},{numero:2,isFace:!0}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0,collision:6}],[{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0,collision:6}],[{numero:4,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:5}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0,collision:6}],[{numero:4,isFace:!0,collision:5},{numero:0,isFace:!1},{numero:5,isFace:!0}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:0,isFace:!1},{numero:1,isFace:!0}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]]];function X(o,i,e){return[{dx:0,dy:-1,dir:"T"},{dx:0,dy:1,dir:"B"},{dx:-1,dy:0,dir:"L"},{dx:1,dy:0,dir:"R"}].filter(({dx:s,dy:t})=>{var a,c;return(c=(a=o[e+t])==null?void 0:a[i+s])==null?void 0:c.isFace}).map(({dx:s,dy:t,dir:a})=>({x:i+s,y:e+t,dir:a}))}function be(o){let i=-1,e={x:0,y:0};for(let r=0;r<o.length;r++)for(let s=0;s<o[0].length;s++)if(o[r][s].isFace){const t=X(o,s,r);t.length>i&&(i=t.length,e={x:s,y:r})}return e}function Y(o,i,e,r,s,t=new Set){const a=`${i},${e}`;if(t.has(a))return null;t.add(a);const c={x:i,y:e,parent:r,children:[],directionFromParent:s};for(const u of X(o,i,e))if(!t.has(`${u.x},${u.y}`)){Math.abs(u.x-i)+Math.abs(u.y-e)!==1&&console.warn(`Parent (${i},${e}) et enfant (${u.x},${u.y}) ne sont pas adjacents !`);const n=Y(o,u.x,u.y,c,u.dir,t);n&&c.children.push(n)}return c}const N=.001;function U(o,i,e=[0,0,0],r=new Map){const s=`${o.x},${o.y}`;r.set(s,e);for(const t of o.children){let a=[0,0,0];switch(t.directionFromParent){case"T":a=[0,0,-1.501];break;case"B":a=[0,0,i+N];break;case"L":a=[-1.501,0,0];break;case"R":a=[i+N,0,0];break}U(t,i,[e[0]+a[0],e[1]+a[1],e[2]+a[2]],r)}return r}function ee(o,i,e,r){const s=`${o.x},${o.y}`,t=e.get(s)??[0,0,0];let a;if(!o.parent)a=t;else{const c=`${o.parent.x},${o.parent.y}`,u=e.get(c)??[0,0,0];a=[(u[0]+t[0])/2,(u[1]+t[1])/2,(u[2]+t[2])/2]}r.set(s,a);for(const c of o.children)ee(c,i,e,r);return r}function te(o,i,e,r,s,t={value:0}){const c=i-.004,u=i-2*.002,n=t.value%s.length;t.value++;const f=s[n],l=`${o.x},${o.y}`,m=e.get(l)??[0,0,0],d=r.get(l)??[0,0,0],h=o.parent?r.get(`${o.parent.x},${o.parent.y}`)??[0,0,0]:[0,0,0],F=new D;o.parent&&o.directionFromParent&&(F.userData.directionFromParent=o.directionFromParent),o.parent&&o.directionFromParent?F.position.set(d[0]-h[0],d[1]-h[1],d[2]-h[2]):F.position.set(m[0],m[1],m[2]);const M=new Fe(c,.01,u),k=new pe({color:f,side:he}),p=new K(M,k);o.parent&&o.directionFromParent?p.position.set(m[0]-d[0],m[1]-d[1],m[2]-d[2]):p.position.set(0,0,0),F.add(p);for(const C of o.children){const g=te(C,i,e,r,s,t);F.add(g)}return F}function H(o,i){const e=be(o),r=1.5,s=Y(o,e.x,e.y),t=U(s,r,[e.x,0,e.y],new Map),a=ee(s,r,t,new Map),u=te(s,r,t,a,["#3498db","#2ecc71","#e67e22","#9b59b6","#f1c40f","#5dade2"]);return u.traverse(f=>f.updateMatrix()),{type:"group",object:u.toJSON()}}function $e(){return{pliageEnCours:!1,depliageEnCours:!1,estPlie:!1,estDeplie:!0,blinkEnCours:!1}}function Ee(o,i,e){o._etatPatron=$e();const r=o.querySelector(`#btnPlier-${e}`),s=o.querySelector(`#btnDeplier-${e}`);r&&(r.disabled=!1),s&&(s.disabled=!0),o.addEventListener(`pliage-${e}`,()=>{const t=o._etatPatron;!t.estDeplie||t.pliageEnCours||(t.pliageEnCours=!0,t.estDeplie=!1,r.disabled=!0,s.disabled=!0,ye(i,()=>{t.pliageEnCours=!1,t.estPlie=!0;let a=!1;const c=[];i.traverse(n=>{n instanceof K&&c.push(n)});const u=[];for(let n=0;n<c.length;n++){const f=new J().setFromObject(c[n]);for(let l=n+1;l<c.length;l++){const m=new J().setFromObject(c[l]),d=f.clone();d.intersect(m);const h=d.getSize(new de);h.x*h.y*h.z>.01&&(a=!0,u.push(c[n],c[l]))}}if(a){t.blinkEnCours=!0,s.disabled=!0;let n=u.length;u.forEach(f=>{Pe(f,"#ff0000",7,200,()=>{n--,n===0&&(t.blinkEnCours=!1,s.disabled=!1)})})}else s.disabled=!1}))}),o.addEventListener(`depliage-${e}`,()=>{const t=o._etatPatron;!t.estPlie||t.depliageEnCours||t.blinkEnCours||(t.depliageEnCours=!0,t.estPlie=!1,s.disabled=!0,r.disabled=!0,Me(i,()=>{t.depliageEnCours=!1,t.estDeplie=!0,r.disabled=!1}))})}function ye(o,i,e=1e3){const r=[];o.traverse(t=>{t instanceof D&&t.userData.directionFromParent&&r.push(t)});let s=r.length;r.forEach(t=>{const a=t.rotation.clone(),c=new W;switch(t.userData.directionFromParent){case"T":c.set(Math.PI/2,0,0);break;case"B":c.set(-Math.PI/2,0,0);break;case"L":c.set(0,0,-Math.PI/2);break;case"R":c.set(0,0,Math.PI/2);break}se(t,a,c,e,()=>{s--,s===0&&i&&i()})})}function Me(o,i,e=1e3){const r=[];o.traverse(t=>{t instanceof D&&t.userData.directionFromParent&&r.push(t)});let s=r.length;r.forEach(t=>{const a=t.rotation.clone(),c=new W(0,0,0);se(t,a,c,e,()=>{s--,s===0&&i&&i()})})}function re(){document.querySelectorAll("canvas-3d").forEach(i=>{const r=(i.getAttribute("id")||"").match(/Ex\d+Q\d+/),s=r?r[0]:"",t=i.objects,a=Array.isArray(t)?t.find(c=>c instanceof D):void 0;a&&s&&Ee(i,a,s)}),document.removeEventListener("correctionsAffichees",re)}function se(o,i,e,r,s){const t=performance.now();function a(c){const u=Math.min((c-t)/r,1);o.rotation.set(i.x+(e.x-i.x)*u,i.y+(e.y-i.y)*u,i.z+(e.z-i.z)*u),u<1?requestAnimationFrame(a):(o.rotation.copy(e),s&&s())}requestAnimationFrame(a)}function Pe(o,i="#ff0000",e=26,r=200,s){let t=0;const a=o.material;if(!a.color)return s&&s(),()=>{};const c=a.color.clone();function u(){a.color&&a.color.set(t%2===0?i:"#ffffff"),t++,t<e*2?setTimeout(u,r):(a.color&&a.color.copy(c),s&&s())}u()}const Ut=!0,er="qcmMono",tr=!0,rr="cliqueFigure",sr="Choisir le patron de cube",ir="18/07/2025",or="f57fe",nr={"fr-fr":["CM2G5C-1"],"fr-2016":["6G45"],"fr-ch":[]};function Q(o){const i=o.findIndex(s=>s.flat().filter(t=>t.isFace).length===6&&s.flat().filter(t=>t.collision!==void 0).length===0),e=o.findIndex(s=>s.flat().filter(t=>t.isFace).length!==6),r=o.map((s,t)=>{const a=s.flat().reduce((c,u)=>(u.collision!==void 0&&c.push([t,u.collision]),c),[]);return{index:t,collision:a}}).filter(s=>s.collision.length>0);if(r.length===0)throw new Error("Aucun faux patron trouvé dans la liste fournie.");return{indexVraiPatron:i,indexPas6Faces:e,indexFauxPatrons:r}}class ar extends ce{constructor(){super();P(this,"listeMatrices");P(this,"listeners");this.nbQuestions=1,this.besoinFormulaire2CaseACocher=["3d dynamique",!0],this.sup2=!0,this.listeMatrices=[],this.listeners=[]}nouvelleVersion(){this.figures=[],this.consigne="Parmi les dessins suivants, lequel est un patron de cube ? <br>",this.consigne+=this.interactif?"Cliquer sur":v.vue!=="diap"&&!v.isAmc?"Entourer":"Choisir",this.consigne+=" la bonne figure.";const e=.4,r=.3,t=R(["type1"],this.nbQuestions),a=R(["1","2","3","4","5","6","7","8","9","10","11"],this.nbQuestions),c=Z(ge),u=Z(xe);for(let n=0,f=0;n<this.nbQuestions&&f<50;){let l="",m="";const d=ue([0,1,2,3]),h=[],F=[];switch(this.listeMatrices[n]=[],t[n]){case"type1":{l="",h.push(c[Number(a[n])-1]);const M=A(0,u.length-1);h.push(u[A(0,M)]),h.push(u[A(0,u.length-1,M)]);const k=q([5,7]);h.push(ke(k));for(let x=0;x<4;x++)h[x].braceMatrice(),F[x]=h[d[x]],this.listeMatrices[n][x]=h[d[x]].matrice;const p=Q(this.listeMatrices[n]).indexVraiPatron,C=Q(this.listeMatrices[n]).indexPas6Faces,g=Q(this.listeMatrices[n]).indexFauxPatrons,L=F[0].dessineMatrice({numeroterFaces:!1,numeroDessin:0}),S=F[1].dessineMatrice({numeroterFaces:!1,numeroDessin:1}),j=F[2].dessineMatrice({numeroterFaces:!1,numeroDessin:2}),T=F[3].dessineMatrice({numeroterFaces:!1,numeroDessin:3}),B=y(Object.assign({style:"display: inline-block",scale:r,id:`cliquefigure0Ex${this.numeroExercice}Q${n}`},E(L)),L),O=y(Object.assign({style:"display: inline-block",scale:r,id:`cliquefigure1Ex${this.numeroExercice}Q${n}`},E(S)),S),V=y(Object.assign({style:"display: inline-block",scale:r,id:`cliquefigure2Ex${this.numeroExercice}Q${n}`},E(j)),j),I=y(Object.assign({style:"display: inline-block",scale:r,id:`cliquefigure3Ex${this.numeroExercice}Q${n}`},E(T)),T);this.autoCorrection[n]={},this.autoCorrection[n].enonce=this.consigne+l,this.autoCorrection[n].propositions=[{texte:B,statut:p===0},{texte:O,statut:p===1},{texte:V,statut:p===2},{texte:I,statut:p===3}],this.autoCorrection[n].options={ordered:!0,lastChoice:4},le(this.autoCorrection[n]),this.figures[n]=[{id:`cliquefigure0Ex${this.numeroExercice}Q${n}`,solution:p===0},{id:`cliquefigure1Ex${this.numeroExercice}Q${n}`,solution:p===1},{id:`cliquefigure2Ex${this.numeroExercice}Q${n}`,solution:p===2},{id:`cliquefigure3Ex${this.numeroExercice}Q${n}`,solution:p===3}];const ie=[B,O,V,I];if(!v.isAmc){l+=ie.join("")+"<br><br>",this.interactif&&v.isHtml&&(l+=`<span id="resultatCheckEx${this.numeroExercice}Q${n}"></span>`),m="Procédons par élimination:<br>",m+=`- Le dessin ${C+1} contient ${k} faces au lieu de 6 faces.<br><br>`,m+=`- Le dessin ${g[0].index+1} poséde des faces qui vont se superposer :<br>`;const x=F[g[0].index].dessineMatrice({numeroterFaces:!0,numeroDessin:g[0].index});m+=y(Object.assign({style:"display: inline-block",scale:e,id:`correction0Ex${this.numeroExercice}Q${n}`},E(x)),x)+"<br>",m+=F[g[0].index].ecritFacesQuiSeSuperposent()+"<br><br>",m+=`- Le dessin ${g[1].index+1} poséde des faces qui vont se superposer :<br>`;const _=F[g[1].index].dessineMatrice({numeroterFaces:!0,numeroDessin:g[1].index});m+=y(Object.assign({style:"display: inline-block",scale:e,id:`correction1Ex${this.numeroExercice}Q${n}`},E(_)),_)+"<br>",m+=F[g[1].index].ecritFacesQuiSeSuperposent()+"<br><br>",m+=`Le dessin ${p+1} posséde 6 faces qui ne vont pas se superposer en le pliant, c'est donc le dessin d'un patron.<br>`;const z=F[p].dessineMatrice({numeroterFaces:!0,numeroDessin:p});m+=y(Object.assign({style:"display: inline-block",scale:e,id:`correction2Ex${this.numeroExercice}Q${n}`},E(z)),z)+"<br><br>"}}break;case"type2":l=`Question ${n+1} de type 2`,m=`Correction ${n+1} de type 2`;break;case"type3":l=`Question ${n+1} de type 3`,m=`Correction ${n+1} de type 3`;break}if(this.questionJamaisPosee(n,l)){if(v.isHtml&&this.sup2){const M=Q(this.listeMatrices[n]).indexVraiPatron,C={objects:[H(this.listeMatrices[n][M],`patron3dEx${this.numeroExercice}Q${n}`),{type:"ambientLight",color:16777215},{type:"directionalLight",color:16777215,position:[8,8,8]},{type:"canvas3dButton",id:`btnPlier-Ex${this.numeroExercice}Q${n}`,text:"Plier",position:{left:"10px",bottom:"10px"},onClick:`pliage-Ex${this.numeroExercice}Q${n}`},{type:"canvas3dButton",id:`btnDeplier-Ex${this.numeroExercice}Q${n}`,text:"Déplier",position:{left:"90px",bottom:"10px"},onClick:`depliage-Ex${this.numeroExercice}Q${n}`}],autoCenterZoomMargin:1};m+=G({id:`canvas3dEx${this.numeroExercice}Q${n}`,content:C,width:200,height:200})}this.listeQuestions[n]=l,this.listeCorrections[n]=m??"",n++}f++}me(this),document.addEventListener("correctionsAffichees",re,{once:!0})}callback(e,r){if("listeMatrices"in e&&Array.isArray(e.listeMatrices)&&e.listeMatrices.length>=r){const s=Array.from(document.querySelectorAll(`[id^="cliquefigure"][id$="Ex${e.numeroExercice}Q${r}"]`)).filter(f=>new RegExp(`^cliquefigure\\dEx${e.numeroExercice}Q${r}$`).test(f.id));let t=Array.from(s).findIndex(f=>!!f.etat);t===-1&&Array.isArray(e.autoCorrection[r].propositions)&&(t=Q(e.listeMatrices[r]).indexVraiPatron);const u={objects:[H(e.listeMatrices[r][t],`patron3dEx${e.numeroExercice}Q${r}`),{type:"ambientLight",color:16777215},{type:"directionalLight",color:16777215,position:[8,8,8]},{type:"canvas3dButton",id:`btnPlier-Ex${e.numeroExercice}Q${r}`,text:"Plier",position:{left:"10px",bottom:"10px"},onClick:`pliage-Ex${e.numeroExercice}Q${r}`},{type:"canvas3dButton",id:`btnDeplier-Ex${e.numeroExercice}Q${r}`,text:"Déplier",position:{left:"90px",bottom:"10px"},onClick:`depliage-Ex${e.numeroExercice}Q${r}`}],autoCenterZoomMargin:1.2},n=G({id:`canvas3dEx${e.numeroExercice}Q${r}`,content:u,width:200,height:200});e.listeCorrections[r]=e.listeCorrections[r].replace(/<canvas-3d[^>]*>.*?<\/canvas-3d>/s,n)}}}const w=1;function Z(o){const i=[];for(const e of o){const r=new b(e[0].length,e.length);r.matrice=e.map(s=>[...s]),i.push(r)}return i}function ke(o){const i=new Ce;return i.faitUnPatron(o),i.faitUnPatronMatrice(),i.matrice}class b{constructor(i,e,r=0,s=!1){P(this,"matrice",[]);for(let t=0;t<e;t++){this.matrice[t]=[];for(let a=0;a<i;a++)this.matrice[t][a]={numero:r,isFace:s}}}get larg(){return this.matrice.reduce((i,e)=>Math.max(i,e.length),0)}get long(){return this.matrice.length}initMatrice(i,e,r=0,s=!1){for(let t=0;t<e;t++){this.matrice[t]=[];for(let a=0;a<i;a++)this.matrice[t][a]={numero:r,isFace:s}}}setcell(i,e,r,s){e<this.long&&i<this.larg&&(this.matrice[e][i]={numero:r,isFace:s})}dimensions(){return[this.larg,this.long]}ecritMatrice(){let i=`[
`;const e=this.matrice.map(r=>r.map(s=>s.isFace?1:0));return i+=e.map(r=>`[${r.join(", ")}]`).join(`,
`),i+=`]
`,i}braceMatrice(){const[i,e]=[this.larg,this.long],r=new b(i,e);r.matrice=$(this.matrice);let s=q([1,2,3,3,0]);switch(s){case 1:r.symetrieMatriceH();break;case 2:r.symetrieMatriceV();break;case 3:r.symetrieMatriceD();break}switch(s=q([1,1,2,3,3,3,3,0]),s){case 1:r.rotationMatrice90p();break;case 2:r.rotationMatrice90n();break;case 3:r.rotationMatrice180();break}this.matrice=$(r.matrice)}ecritFacesQuiSeSuperposent(){let i="";for(let e=0;e<this.long;e++)for(let r=0;r<this.larg;r++)this.matrice[e][r].isFace&&this.matrice[e][r].collision&&(i+=` Les faces ${this.matrice[e][r].numero} et  ${this.matrice[e][r].collision} vont se superposer.`);return i}dessineMatrice({numeroterFaces:i,numeroDessin:e}){const r=i??!1,s=[];for(let c=0;c<this.long;c++)for(let u=0;u<this.larg;u++)if(this.matrice[c][u].isFace){const n=new ae({xMin:c*w,yMin:u*w,xMax:(c+1)*w,yMax:(u+1)*w});r&&n.addTextIn({textIn:`${this.matrice[c][u].numero}`});const f=n.render();s.push(f)}const{xmin:t,xmax:a}=E(s);if(e!==void 0&&typeof e=="number"){const c=fe(`Dessin ${e+1}`,(t+a)/2,-.5,0,"black",1,"milieu",!1,1);s.push(c)}return s}symetrieMatriceH(){const[i,e]=[this.larg,this.long],r=new b(i,e);for(let s=0;s<e;s++)for(let t=0;t<i;t++)r.matrice[e-1-s][t]=this.matrice[s][t];this.matrice=$(r.matrice)}symetrieMatriceV(){const[i,e]=[this.larg,this.long],r=new b(i,e);for(let s=0;s<e;s++)for(let t=0;t<i;t++)r.matrice[s][i-1-t]=this.matrice[s][t];this.matrice=$(r.matrice)}symetrieMatriceD(){const[i,e]=[this.larg,this.long],r=new b(e,i);for(let s=0;s<e;s++)for(let t=0;t<i;t++)r.matrice[t][s]=this.matrice[s][t];this.matrice=$(r.matrice)}rotationMatrice90p(){const[i,e]=[this.long,this.larg],r=new b(i,e);for(let s=0;s<e;s++)for(let t=0;t<i;t++)r.matrice[s][i-t-1]=this.matrice[t][s];this.matrice=$(r.matrice)}rotationMatrice90n(){const[i,e]=[this.long,this.larg],r=new b(i,e);for(let s=0;s<e;s++)for(let t=0;t<i;t++)r.matrice[e-s-1][t]=this.matrice[t][s];this.matrice=$(r.matrice)}rotationMatrice180(){const[i,e]=[this.larg,this.long],r=new b(i,e);for(let s=0;s<e;s++)for(let t=0;t<i;t++)r.matrice[e-1-s][i-1-t]=this.matrice[s][t];this.matrice=$(r.matrice)}}class Ce{constructor(){P(this,"_couples",[]);P(this,"_matrice",new b(0,0));this._couples=[[0,0],[1,0]]}get couples(){return this._couples}get matrice(){return this._matrice}set couples(i){}ecritCouples(){return this._couples.map(([i,e])=>`[${i}, ${e}]`).join("; ")}ecritlongueur(){return this._couples.length}faitUnPatron(i=6){const e=[-1,1],r=this._couples.length;for(let s=0;s<i-r;s++){const t=[];for(let a=0;a<this._couples.length;a++){const[c,u]=this._couples[a];for(const n of e)this._couples.some(([f,l])=>f===c+n&&(l===u||l===u+1||l===u-1))||t.push([c+n,u]);for(const n of e)this._couples.some(([f,l])=>l===u+n&&(f===c||f===c+1||f===c-1))||t.push([c,u+n])}this._couples.push(t[A(0,t.length-1)])}}faitUnPatronMatrice(){let i=0,e=0,r=0,s=0;for(const[c,u]of this._couples)r=Math.max(r,c),s=Math.max(s,u),i=Math.min(i,c),e=Math.min(e,u);const t=r-i+1,a=s-e+1;this._matrice.initMatrice(t,a);for(const[c,u]of this._couples)this._matrice.setcell(c-i,s-u,1,!0)}}export{Ut as amcReady,er as amcType,ir as dateDePublication,ar as default,tr as interactifReady,rr as interactifType,nr as refs,sr as titre,or as uuid};
//# sourceMappingURL=CM2G5C-1-B1PuiHqK.js.map
