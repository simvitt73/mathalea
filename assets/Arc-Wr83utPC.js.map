{"version":3,"file":"Arc-Wr83utPC.js","sources":["../../src/lib/2d/Arc.ts"],"sourcesContent":["import { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport { droite } from './droites'\nimport type { IPointAbstrait } from './Interfaces'\nimport MainLevee from './MainLevee'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { pattern } from './pattern'\nimport { PointAbstrait, pointAbstrait } from './PointAbstrait'\nimport { angleModulo, angleOriente, longueur } from './utilitairesGeometriques'\n\n/**\n * Convertit un angle de degrés en radians\n * @param angle Angle en degrés\n * @returns Angle en radians\n */\nconst degToRad = (angle: number): number => (angle * Math.PI) / 180\n\n/**\n * Calcule les coordonnées de l'image d'un point par rotation\n * @param point Point à transformer\n * @param centre Centre de rotation\n * @param angle Angle de rotation en degrés\n * @returns Point abstrait résultat\n */\nexport const rotationPoint = (\n  point: IPointAbstrait,\n  centre: IPointAbstrait,\n  angle: number,\n): IPointAbstrait => {\n  const angleRad = degToRad(angle)\n  const cos = Math.cos(angleRad)\n  const sin = Math.sin(angleRad)\n  const dx = point.x - centre.x\n  const dy = point.y - centre.y\n  return pointAbstrait(\n    centre.x + dx * cos - dy * sin,\n    centre.y + dx * sin + dy * cos,\n  )\n}\n\n/** Trace un arc de cercle, connaissant une extrémité, son centre et la mesure de l'angle\n * @param {Point} M Extrémité de départ de l'arc\n * @param {Point} Omega Centre de l'arc\n * @param {number|Point} angle Mesure de l'angle compris entre -360 et 360 (valeur négative = sens indirect) ou bien point formant un angle avec M et Omega.\n * @param {boolean} [rayon = false] Si true, les rayons délimitant l'arc sont ajoutés.\n * @param {string} [couleurDeRemplissage = 'none'] Couleur ou 'none' : du type 'blue' ou du type '#f15929'\n * @param {string} [color = 'black'] Couleur de l'arc ou 'none' : du type 'blue' ou du type '#f15929'\n * @param {number} [opaciteDeRemplissage = 0.2] Opacité de remplissage de 0 à 1.\n * @param {string} [couleurDesHachures = 'none'] Couleur des hachures ou 'none' : du type 'blue' ou du type '#f15929' Si 'none', pas de hachures.\n * @property {string} svg Sortie au format vectoriel (SVG) que l'on peut afficher dans un navigateur\n * @property {string} svgml Sortie, à main levée, au format vectoriel (SVG) que l'on peut afficher dans un navigateur\n * @property {string} tikz Sortie au format TikZ que l'on peut utiliser dans un fichier LaTeX\n * @property {string} tikzml Sortie, à main levée, au format TikZ que l'on peut utiliser dans un fichier LaTeX\n * @property {string} color Couleur de l'arc ou 'none'. À associer obligatoirement à colorToLatexOrHTML().\n * @property {string} couleurDeRemplissage Couleur ou 'none'. À associer obligatoirement à colorToLatexOrHTML().\n * @property {number} opaciteDeRemplissage Opacité de remplissage de 0 à 1.\n * @property {string} hachures Hachures ou pas ?\n * @property {string} couleurDesHachures Couleur des hachures ou 'none'. À associer obligatoirement à colorToLatexOrHTML(). Si 'none' ou '', pas de hachures.\n * @property {number} [opacite = 1] Opacité du cercle de 0 à 1.\n * @property {number} [epaisseurDesHachures = 1] Epaisseur des hachures si couleur de hachures choisie.\n * @property {number} [distanceDesHachures = 10] Distance des hachures si couleur de remplissage choisie.\n * @property {number} [pointilles = 0] Type de pointillés choisis (entre 1 et 5). Si autre nombre, pas de pointillés.\n * @property {number[]} bordures Coordonnées de la fenêtre d'affichage du genre [-2,-2,5,5]\n * @author Jean-Claude Lhote\n * @class\n **/\n// JSDOC Validee par EE Juin 2022\nexport class Arc extends ObjetMathalea2D {\n  rayons: boolean\n  couleurDeRemplissage: string[]\n  opaciteDeRemplissage: number\n  hachures?: string\n  couleurDesHachures: string[]\n  epaisseurDesHachures?: number\n  distanceDesHachures?: number\n  angle: number\n  rayon: number\n  angleFin: number\n  azimut: number\n  pointDepart: IPointAbstrait\n  centre: IPointAbstrait\n  pointFinal: IPointAbstrait\n  constructor(\n    M: IPointAbstrait,\n    omega: IPointAbstrait,\n    angle: IPointAbstrait | number,\n    rayons = false,\n    couleurDeRemplissage = 'none',\n    color = 'black',\n    opaciteDeRemplissage = 0.2,\n    couleurDesHachures = 'none',\n    opacite = 1,\n    epaisseurDesHachures = 1,\n    distanceDesHachures = 10,\n  ) {\n    super()\n    this.pointDepart = M\n    this.centre = omega\n    this.rayons = rayons\n    this.typeObjet = 'arc'\n    this.color = colorToLatexOrHTML(color)\n    this.couleurDeRemplissage = colorToLatexOrHTML(couleurDeRemplissage)\n    this.opaciteDeRemplissage = opaciteDeRemplissage\n    this.opacite = opacite ?? 1\n    this.epaisseurDesHachures = epaisseurDesHachures ?? 1\n    this.distanceDesHachures = distanceDesHachures ?? 10\n    this.pointilles = 0\n    this.epaisseur = 1\n    this.couleurDesHachures = colorToLatexOrHTML(couleurDesHachures)\n    this.angle =\n      typeof angle === 'number' ? angle : angleOriente(M, omega, angle)\n    const medX: number[] = []\n    const medY: number[] = []\n    for (let ee = 1; ee < 9; ee++) {\n      const p = rotationPoint(M, omega, (ee * this.angle) / 10)\n      medX.push(p.x)\n      medY.push(p.y)\n    }\n    this.rayon = longueur(omega, M, 2)\n    const A = pointAbstrait(omega.x + 1, omega.y)\n    this.azimut = angleOriente(A, omega, M)\n    this.angleFin = this.azimut + this.angle\n    const angleSVG = angleModulo(this.angle)\n\n    this.pointFinal = rotationPoint(M, omega, angleSVG)\n    this.bordures = [\n      Math.min(M.x, this.pointFinal.x, ...medX) - 0.1,\n      Math.min(M.y, this.pointFinal.y, ...medY) - 0.1,\n      Math.max(M.x, this.pointFinal.x, ...medX) + 0.1,\n      Math.max(M.y, this.pointFinal.y, ...medY) + 0.1,\n    ]\n  }\n\n  svg(coeff: number) {\n    let sweep: number\n    let large: number\n    if (this.angle > 180) {\n      sweep = 0 // option pour path : permet de savoir quel morceau de cercle tracé parmi les 2 possibles. Voir https://developer.mozilla.org/fr/docs/Web/SVG/Tutorial/Paths pour plus de détails\n      large = 1 // option pour path : permet de savoir sur un morceau de cercle choisi, quel parcours prendre.\n    } else if (this.angle < -180) {\n      large = 1\n      sweep = 1\n    } else {\n      large = 0\n      sweep = 1 - (this.angle > 0 ? 1 : 0)\n    }\n    if (this.rayons) {\n      this.style = ''\n      if (this.opacite !== 1) {\n        this.style += ` stroke-opacity=\"${this.opacite}\" `\n      }\n      if (this.epaisseur !== 1) {\n        this.style += ` stroke-width=\"${this.epaisseur}\" `\n      }\n      switch (this.pointilles) {\n        case 1:\n          this.style += ' stroke-dasharray=\"6 10\" '\n          break\n        case 2:\n          this.style += ' stroke-dasharray=\"6 3\" '\n          break\n        case 3:\n          this.style += ' stroke-dasharray=\"3 2 6 2 \" '\n          break\n        case 4:\n          this.style += ' stroke-dasharray=\"1 2\" '\n          break\n        case 5:\n          this.style += ' stroke-dasharray=\"5 5\" '\n          break\n      }\n      if (\n        this.hachures != null &&\n        typeof this.hachures === 'string' &&\n        this.hachures !== ''\n      ) {\n        if (this.couleurDeRemplissage.length < 1) {\n          this.couleurDeRemplissage = colorToLatexOrHTML('none')\n        }\n        return (\n          pattern({\n            motif: this.hachures,\n            id: String(this.id),\n            distanceDesHachures: this.distanceDesHachures,\n            epaisseurDesHachures: this.epaisseurDesHachures,\n            couleurDesHachures: this.couleurDesHachures[0] ?? 'black',\n            couleurDeRemplissage: this.couleurDeRemplissage[0],\n            opaciteDeRemplissage: this.opaciteDeRemplissage,\n          }) +\n          `<path d=\"M${this.pointDepart.x * coeff} ${-this.pointDepart.y * coeff} A ${this.rayon * coeff} ${this.rayon * coeff} 0 ${large} ${sweep} ${this.pointFinal.x * coeff} ${-this.pointFinal.y * coeff} L ${this.centre.x * coeff} ${-this.centre.y * coeff} Z\" stroke=\"${this.color[0]}\" ${this.style} id=\"${this.id}\" fill=\"url(#pattern${this.id})\"/>`\n        )\n      } else {\n        if (\n          this.couleurDeRemplissage[0] === '' ||\n          this.couleurDeRemplissage[0] === undefined ||\n          this.couleurDeRemplissage[0] === 'none'\n        ) {\n          this.style += ' fill=\"none\" '\n        } else {\n          this.style += ` fill=\"${this.couleurDeRemplissage[0]}\" `\n          this.style += ` fill-opacity=\"${this.opaciteDeRemplissage}\" `\n        }\n        return `<path d=\"M${this.pointDepart.x * coeff} ${-this.pointDepart.y * coeff} A ${this.rayon * coeff} ${this.rayon * coeff} 0 ${large} ${sweep} ${this.pointFinal.x * coeff} ${-this.pointFinal.y * coeff} L ${this.centre.x * coeff} ${-this.centre.y * coeff} Z\" stroke=\"${this.color[0]}\" ${this.style}/>`\n      }\n    } else {\n      this.style = ''\n      if (this.epaisseur !== 1) {\n        this.style += ` stroke-width=\"${this.epaisseur}\" `\n      }\n      switch (this.pointilles) {\n        case 1:\n          this.style += ' stroke-dasharray=\"6 10\" '\n          break\n        case 2:\n          this.style += ' stroke-dasharray=\"6 3\" '\n          break\n        case 3:\n          this.style += ' stroke-dasharray=\"3 2 6 2 \" '\n          break\n        case 4:\n          this.style += ' stroke-dasharray=\"1 2\" '\n          break\n        case 5:\n          this.style += ' stroke-dasharray=\"5 5\" '\n          break\n      }\n      if (this.opacite !== 1) {\n        this.style += ` stroke-opacity=\"${this.opacite}\" `\n      }\n      if (\n        this.couleurDeRemplissage[0] === '' ||\n        this.couleurDeRemplissage[0] === undefined ||\n        this.couleurDeRemplissage[0] === 'none'\n      ) {\n        this.style += ' fill=\"none\" '\n      } else {\n        this.style += ` fill=\"${this.couleurDeRemplissage[0]}\" `\n        this.style += ` fill-opacity=\"${this.opaciteDeRemplissage}\" `\n      }\n      return `<path d=\"M${this.pointDepart.x * coeff} ${-this.pointDepart.y * coeff} A ${this.rayon * coeff} ${this.rayon * coeff} 0 ${large} ${sweep} ${this.pointFinal.x * coeff} ${-this.pointFinal.y * coeff}\" stroke=\"${this.color[0]}\" ${this.style} id=\"${this.id}\" />`\n    }\n  }\n\n  tikz() {\n    let optionsDraw: string = ''\n    const tableauOptions = []\n    if (this.color[1].length > 1 && this.color[1] !== 'black') {\n      tableauOptions.push(`color=${this.color[1]}`)\n    }\n    if (this.epaisseur !== 1) {\n      tableauOptions.push(`line width = ${this.epaisseur}`)\n    }\n    switch (this.pointilles) {\n      case 1:\n        tableauOptions.push(' dash dot ')\n        break\n      case 2:\n        tableauOptions.push(' densely dash dot dot ')\n        break\n      case 3:\n        tableauOptions.push(' dash dot dot ')\n        break\n      case 4:\n        tableauOptions.push(' dotted ')\n        break\n      case 5:\n        tableauOptions.push(' dashed ')\n        break\n    }\n\n    if (this.opacite !== 1) {\n      tableauOptions.push(`opacity = ${this.opacite}`)\n    }\n    if (\n      // this.rayons && (EE (14/05/2025) : ai commenté cette ligne car je ne comprends pas pourquoi le remplissage dépendrait de this.rayons. Si présent, cela fait dysfonctionner la sortie LaTeX des cas 3-4-5-6 de 6M21.)\n      this.couleurDeRemplissage[1] !== 'none' &&\n      this.couleurDeRemplissage[1] !== ''\n    ) {\n      tableauOptions.push(\n        `preaction={fill,color = ${this.couleurDeRemplissage[1]},opacity = ${this.opaciteDeRemplissage}}`,\n      )\n    }\n\n    if (\n      this.hachures != null &&\n      typeof this.hachures === 'string' &&\n      this.hachures !== ''\n    ) {\n      tableauOptions.push(\n        pattern({\n          motif: this.hachures,\n          id: String(this.id),\n          distanceDesHachures: this.distanceDesHachures,\n          couleurDesHachures: this.couleurDesHachures[1],\n          couleurDeRemplissage: this.couleurDeRemplissage[1],\n          opaciteDeRemplissage: this.opaciteDeRemplissage,\n        }),\n      )\n    }\n    if (tableauOptions.length > 0) {\n      optionsDraw = '[' + tableauOptions.join(',') + ']'\n    }\n    const lng = longueur(this.centre, this.pointDepart, 2)\n    if (this.rayons) {\n      return `\\\\draw  ${optionsDraw} (${this.pointFinal.x},${this.pointFinal.y}) -- (${this.centre.x},${this.centre.y}) -- (${this.pointDepart.x},${this.pointDepart.y}) arc (${this.azimut}:${this.angleFin}:${lng}) ;`\n    } else {\n      return `\\\\draw${optionsDraw} (${this.pointDepart.x},${this.pointDepart.y}) arc (${this.azimut}:${this.angleFin}:${lng}) ;`\n    }\n  }\n\n  svgml(coeff: number) {\n    const width = longueur(this.pointDepart, this.centre, 2) * coeff * 2\n    const height = width\n    const closed = this.rayons\n    const A = pointAbstrait(this.centre.x + 1, this.centre.y)\n    const end = degToRad(angleOriente(this.pointDepart, this.centre, A))\n    const start = end - degToRad(this.angle)\n    const mainLevee = MainLevee.create()\n    if (mainLevee != null) {\n      const code = mainLevee.arc(\n        this.centre.x * coeff,\n        -this.centre.y * coeff,\n        width,\n        height,\n        start > end ? end : start,\n        start > end ? start : end,\n        closed,\n      )\n      mainLevee.destroy()\n      return code\n    } else return ''\n  }\n\n  tikzml(amp: number) {\n    let optionsDraw: string = ''\n    const tableauOptions = []\n    if (this.color[1].length > 1 && this.color[1] !== 'black') {\n      tableauOptions.push(`color=${this.color[1]}`)\n    }\n    if (this.epaisseur !== 1) {\n      tableauOptions.push(`line width = ${this.epaisseur}`)\n    }\n    if (this.opacite !== 1) {\n      tableauOptions.push(`opacity = ${this.opacite}`)\n    }\n    tableauOptions.push(\n      `decorate,decoration={random steps , amplitude = ${amp}pt}`,\n    )\n\n    optionsDraw = '[' + tableauOptions.join(',') + ']'\n\n    return `\\\\draw${optionsDraw} (${this.pointDepart.x},${this.pointDepart.y}) arc (${this.azimut}:${this.angleFin}:${longueur(this.centre, this.pointDepart, 2).toFixed(2)}) ;`\n  }\n}\n\n/** Trace un arc de cercle, connaissant une extrémité, son centre et la mesure de l'angle\n * @param {Point} M Extrémité de départ de l'arc\n * @param {Point} Omega Centre de l'arc\n * @param {number} angle Mesure de l'angle compris entre -360 et 360 (valeur négative = sens indirect)\n * @param {boolean} [rayon = false] Booléen. Si true, les rayons délimitant l'arc sont ajoutés.\n * @param {string} [couleurDeRemplissage = 'none'] Couleur ou 'none' : du type 'blue' ou du type '#f15929'\n * @param {string} [color = 'black'] Couleur de l'arc ou 'none' : du type 'blue' ou du type '#f15929'\n * @param {number} [opaciteDeRemplissage = 0.2] Opacité de remplissage de 0 à 1.\n * @param {string} [couleurDesHachures = 'none'] Couleur des hachures ou 'none' : du type 'blue' ou du type '#f15929' Si 'none', pas de hachures.\n * @example arc(M,O,35)\n // Trace l'arc en noir de centre O, d'extrémité M et d'angle orienté 35° (sans remplissage et sans hachures)\n * @example arc(M,O,true,-40,'red','green',0.8,'white')\n // Trace l'arc en vert de centre O, d'extrémité M et d'angle orienté -40°, rempli en rouge à 80 %, avec des hachures blanches\n * @return {Arc}\n * @author Jean-Claude Lhote\n */\n// JSDOC Validee par EE Juin 2022\n\nexport function arc(\n  M: IPointAbstrait,\n  Omega: IPointAbstrait,\n  angle: IPointAbstrait | number,\n  rayon = false,\n  couleurDeRemplissage = 'none',\n  color = 'black',\n  opaciteDeRemplissage = 0.2,\n  couleurDesHachures = 'none',\n) {\n  return new Arc(\n    M,\n    Omega,\n    angle,\n    rayon,\n    couleurDeRemplissage,\n    color,\n    opaciteDeRemplissage,\n    couleurDesHachures,\n  )\n}\n\n/** Trace un arc de cercle, connaissant deux extrémités et la mesure de l'angle\n * @param {Point} M Première extrémité de l'arc\n * @param {Point} N Deuxième extrémité de l'arc\n * @param {number} angle Mesure de l'angle compris entre -360 et 360 (valeur négative = sens indirect)\n * @param {boolean} [rayon = false] Booléen. Si true, les rayons délimitant l'arc sont ajoutés.\n * @param {boolean|'none'} [couleurDeRemplissage = 'none'] Couleur ou 'none' : du type 'blue' ou du type '#f15929'\n * @param {string} [color = 'black'] Couleur de l'arc ou 'none' : du type 'blue' ou du type '#f15929'\n * @param {number} [opaciteDeRemplissage = 0.2] Opacité de remplissage de 0 à 1.\n * @param {string} [couleurDesHachures = 'none'] Couleur des hachures ou 'none' : du type 'blue' ou du type '#f15929' Si 'none', pas de hachures.\n * @example arcPointPointAngle(A,B,35)\n // Trace l'arc en noir d'extrémités A et B (dans cet ordre) et d'angle orienté 35° (sans remplissage et sans hachures)\n * @example arcPointPointAngle(A,B,true,-40,'red','green',0.8,'white')\n // Trace l'arc en vert d'extrémités A et B (dans cet ordre) et d'angle orienté -40°, rempli en rouge à 80 %, avec des hachures blanches\n * @return {Arc}\n * @author Jean-Claude Lhote\n */\n// JSDOC Validee par EE Juin 2022\nexport function arcPointPointAngle(\n  M: PointAbstrait,\n  N: PointAbstrait,\n  angle: number,\n  rayon = false,\n  couleurDeRemplissage = 'none',\n  color = 'black',\n  opaciteDeRemplissage = 0.2,\n  couleurDesHachures = 'none',\n): Arc {\n  let anglerot\n  if (angle < 0) anglerot = (angle + 180) / 2\n  else anglerot = (angle - 180) / 2\n  // Droite perpendiculaire à MN, passant par le milieu I de [MN]\n  const I = pointAbstrait((M.x + N.x) / 2, (M.y + N.y) / 2)\n  const vx = N.x - M.x\n  const vy = N.y - M.y\n  // Un point J sur la perpendiculaire en I (vecteur directeur perpendiculaire à MN : (-vy, vx))\n  // (pas besoin de normaliser, la construction par deux points suffit)\n  const J = pointAbstrait(I.x - vy, I.y + vx)\n  const d = droite(I, J)\n  // Rotation de la droite (N, M) autour de N avec angle anglerot\n  // = rotation des points N et M, puis construction de la droite\n  const NRotate = rotationPoint(N, N, anglerot) // N reste fixe (centre de rotation)\n  const MRotate = rotationPoint(M, N, anglerot)\n  const f = droite(\n    pointAbstrait(NRotate.x, NRotate.y),\n    pointAbstrait(MRotate.x, MRotate.y),\n  )\n  const determinant = d.a * f.b - f.a * d.b\n  const Omegax = (d.b * f.c - f.b * d.c) / determinant\n  const Omegay = (f.a * d.c - d.a * f.c) / determinant\n  const Omega = pointAbstrait(Omegax, Omegay)\n  return new Arc(\n    M,\n    Omega,\n    angle,\n    rayon,\n    couleurDeRemplissage,\n    color,\n    opaciteDeRemplissage,\n    couleurDesHachures,\n  )\n}\n"],"names":["degToRad","angle","rotationPoint","point","centre","angleRad","cos","sin","dx","dy","pointAbstrait","Arc","ObjetMathalea2D","M","omega","rayons","couleurDeRemplissage","color","opaciteDeRemplissage","couleurDesHachures","opacite","epaisseurDesHachures","distanceDesHachures","__publicField","colorToLatexOrHTML","angleOriente","medX","medY","ee","p","longueur","A","angleSVG","angleModulo","coeff","sweep","large","pattern","optionsDraw","tableauOptions","lng","width","height","closed","end","start","mainLevee","MainLevee","code","amp","arc","Omega","rayon","arcPointPointAngle","N","anglerot","I","vx","vy","J","d","droite","NRotate","MRotate","f","determinant","Omegax","Omegay"],"mappings":"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"}