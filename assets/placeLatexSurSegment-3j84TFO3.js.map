{"version":3,"file":"placeLatexSurSegment-3j84TFO3.js","sources":["../../src/lib/2d/placeLatexSurSegment.ts"],"sourcesContent":["import { PointAbstrait } from './PointAbstrait'\n// import { segment } from './segmentsVecteurs'\nimport { Latex2d, latex2d, type LetterSizeType } from './textes'\n\n/**\n * affiche du Latex 'sur' un segment orienté\n * @param {Point} A Première extrémité du segment\n * @param {Point} B Seconde extrémité du segment\n * @param {number} [distance = 0.5] Couleur du codage : du type 'blue' ou du type '#f15929'.\n * @author Olivier Mimeau\n * @return {Latex2d}\n */\n\nfunction directionLatex2d(A: PointAbstrait, B: PointAbstrait): number {\n  // angle d'AB par rapport à l'horizontale, en degrés\n  const dx = B.x - A.x\n  const dy = B.y - A.y\n  const len2 = dx * dx + dy * dy\n  if (len2 < 1e-16) return 0 // segment quasi nul → angle nul\n  let directionAB = (Math.atan2(dy, dx) * 180) / Math.PI\n  // ramener l'angle dans [-90°, 90°] pour un texte lisible\n  directionAB =\n    directionAB > 90\n      ? directionAB - 180\n      : directionAB < -90\n        ? directionAB + 180\n        : directionAB\n  return directionAB\n}\n\nfunction placeLatex2d(\n  A: PointAbstrait,\n  B: PointAbstrait,\n  distance: number = 0.5,\n): { x: number; y: number } {\n  // Milieu de [AB]\n  const Mx = (A.x + B.x) / 2\n  const My = (A.y + B.y) / 2\n  // Vecteur AB\n  const dx = B.x - A.x\n  const dy = B.y - A.y\n  const len = Math.hypot(dx, dy)\n  // Vecteur normal unitaire (perpendiculaire, orientation +90°)\n  const nx = len > 1e-12 ? -dy / len : 0\n  const ny = len > 1e-12 ? dx / len : 1\n  // Point décalé à distance le long de la normale\n  return { x: Mx + nx * distance, y: My + ny * distance }\n}\n\n/**\n *\n * @param t Place du latex sur un segment orienté une belle alternative à texteSurSegment\n * @param A\n * @param B\n * @param options\n * @returns {Latex2d}\n */\nexport function placeLatexSurSegment(\n  t: string,\n  A: PointAbstrait,\n  B: PointAbstrait,\n  {\n    distance = 0.5,\n    color = 'black',\n    backgroundColor = 'none',\n    letterSize = 'normalsize',\n    horizontal = false,\n    opacity = 1.0,\n  }: {\n    distance?: number\n    color?: string\n    backgroundColor?: string\n    letterSize?: LetterSizeType\n    horizontal?: boolean\n    opacity?: number\n  } = {},\n): Latex2d {\n  const position = placeLatex2d(A, B, distance)\n  const Q = latex2d(t, position.x, position.y, {\n    orientation: horizontal ? 0 : directionLatex2d(A, B),\n    color,\n    backgroundColor,\n    letterSize,\n    opacity,\n  })\n  return Q\n}\n"],"names":["directionLatex2d","A","B","dx","dy","directionAB","placeLatex2d","distance","Mx","My","len","nx","ny","placeLatexSurSegment","t","color","backgroundColor","letterSize","horizontal","opacity","position","latex2d"],"mappings":"yCAaA,SAASA,EAAiBC,EAAkBC,EAA0B,CAEpE,MAAMC,EAAKD,EAAE,EAAID,EAAE,EACbG,EAAKF,EAAE,EAAID,EAAE,EAEnB,GADaE,EAAKA,EAAKC,EAAKA,EACjB,MAAO,MAAO,GACzB,IAAIC,EAAe,KAAK,MAAMD,EAAID,CAAE,EAAI,IAAO,KAAK,GAEpD,OAAAE,EACEA,EAAc,GACVA,EAAc,IACdA,EAAc,IACZA,EAAc,IACdA,EACDA,CACT,CAEA,SAASC,EACPL,EACAC,EACAK,EAAmB,GACO,CAE1B,MAAMC,GAAMP,EAAE,EAAIC,EAAE,GAAK,EACnBO,GAAMR,EAAE,EAAIC,EAAE,GAAK,EAEnBC,EAAKD,EAAE,EAAID,EAAE,EACbG,EAAKF,EAAE,EAAID,EAAE,EACbS,EAAM,KAAK,MAAMP,EAAIC,CAAE,EAEvBO,EAAKD,EAAM,MAAQ,CAACN,EAAKM,EAAM,EAC/BE,EAAKF,EAAM,MAAQP,EAAKO,EAAM,EAEpC,MAAO,CAAE,EAAGF,EAAKG,EAAKJ,EAAU,EAAGE,EAAKG,EAAKL,CAAA,CAC/C,CAUO,SAASM,EACdC,EACAb,EACAC,EACA,CACE,SAAAK,EAAW,GACX,MAAAQ,EAAQ,QACR,gBAAAC,EAAkB,OAClB,WAAAC,EAAa,aACb,WAAAC,EAAa,GACb,QAAAC,EAAU,CACZ,EAOI,GACK,CACT,MAAMC,EAAWd,EAAaL,EAAGC,EAAGK,CAAQ,EAQ5C,OAPUc,EAAQP,EAAGM,EAAS,EAAGA,EAAS,EAAG,CAC3C,YAAaF,EAAa,EAAIlB,EAAiBC,EAAGC,CAAC,EACnD,MAAAa,EACA,gBAAAC,EACA,WAAAC,EACA,QAAAE,CAAA,CACD,CAEH"}