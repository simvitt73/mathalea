{"version":3,"file":"2dinteractif-_MOHpk0W.js","sources":["../../src/modules/2dinteractif.ts"],"sourcesContent":["import { colorToLatexOrHTML } from '../lib/2d/colorToLatexOrHtml'\nimport { ObjetMathalea2D } from '../lib/2d/ObjetMathalea2D'\nimport { PointAbstrait, pointAbstrait } from '../lib/2d/PointAbstrait'\nimport { Polygone, polygone } from '../lib/2d/polygones'\nimport { tracePoint } from '../lib/2d/TracePoint'\nimport { context } from './context'\n\n/**\n * @author Rémi ANGOT\n * @param {number} x abscisse du point\n * @param {number} y ordonnée du point\n * @param {object} options over, out et click sont des objets pour le style css des évènements de la souris, radius, width, color, opacite, size, style sont les paramètres possibles pour la trace du point\n */\nexport class PointCliquable extends ObjetMathalea2D {\n  point: PointAbstrait\n  etat: boolean\n  width: number\n  style: string\n  taille: number\n  stringColor: string\n  radius: number\n  groupe: HTMLElement | null\n  stopCliquable: () => void\n  out: Partial<CSSStyleDeclaration>\n  over: Partial<CSSStyleDeclaration>\n  click: Partial<CSSStyleDeclaration>\n\n  constructor(\n    x: number,\n    y: number,\n    options: {\n      over?: Partial<CSSStyleDeclaration>\n      out?: Partial<CSSStyleDeclaration>\n      click?: Partial<CSSStyleDeclaration>\n      radius?: number\n      width?: number\n      color?: string\n      opacite?: number\n      size?: number\n      style?: string\n      taille?: number\n      couleur?: string\n    },\n  ) {\n    super()\n    this.point = pointAbstrait(x, y)\n    this.width = options.width ?? options.size ?? 1\n    this.stringColor = options.color ?? 'black'\n    this.style = options.style ?? 'x'\n    this.taille = options.size ?? options.taille ?? 3\n    this.radius = options.radius ?? 1\n    this.groupe = null // il sera initialiser lorsque les exercices seront affichés.\n\n    if (!options) options = {}\n    this.out = options.out ?? { opacity: '0' }\n    this.over = options.over ?? { opacity: '0.5' }\n    this.click = options.click ?? { opacity: String(options.opacite) ?? '1' }\n    this.etat = false // Pour récupérer si le point est affiché ou pas\n    const gestionDeLaSouris = () => {\n      document.removeEventListener('exercicesAffiches', gestionDeLaSouris)\n      this.groupe = document.getElementById(`${this.id}`)\n      const changeEtatPoint = (etat: boolean) => {\n        this.etat = etat\n      }\n      const mouseOutEffect = () => {\n        for (const key in this.out) {\n          try {\n            if (this.out[key] != null) this.groupe!.style[key] = this.out[key]\n          } catch (error) {\n            const err =\n              error instanceof Error ? error : new Error('Erreur inconnue')\n            window.notify(\n              err.message +\n                `\\nProblème pour modifier groupe.style.${key} sur ${this}`,\n              { element: this, key },\n            )\n          }\n        }\n      }\n      const mouseOverEffect = () => {\n        for (const key in this.over) {\n          try {\n            if (this.over[key] != null) this.groupe!.style[key] = this.over[key]\n          } catch (error) {\n            const err =\n              error instanceof Error ? error : new Error('Erreur inconnue')\n            window.notify(\n              err.message +\n                `\\nProblème pour modifier groupe.style.${key} sur ${this}`,\n              { element: this, key },\n            )\n          }\n        }\n      }\n      const mouseClick = () => {\n        if (this.etat && this.groupe) {\n          // On désactive le point\n          this.groupe.addEventListener('mouseover', mouseOverEffect)\n          this.groupe.addEventListener('mouseout', mouseOutEffect)\n          // On lui remet le style de out\n          for (const key in this.out) {\n            try {\n              if (this.out[key] != null) this.groupe!.style[key] = this.out[key]\n            } catch (error) {\n              const err =\n                error instanceof Error ? error : new Error('Erreur inconnue')\n              window.notify(\n                err.message +\n                  `\\nProblème pour modifier style.${key} sur ${this}`,\n                { element: this, key },\n              )\n            }\n          }\n          this.etat = false\n          changeEtatPoint(false)\n        } else {\n          // On désactive les listeners\n          if (this.groupe) {\n            this.groupe.removeEventListener('mouseover', mouseOverEffect)\n            this.groupe.removeEventListener('mouseout', mouseOutEffect)\n            // On applique le style de click\n            for (const key in this.click) {\n              try {\n                if (this.click[key] != null)\n                  this.groupe!.style[key] = this.click[key]\n              } catch (error) {\n                const err =\n                  error instanceof Error ? error : new Error('Erreur inconnue')\n                window.notify(\n                  err.message +\n                    `\\nProblème pour modifier style.${key} sur ${this}`,\n                  { element: this, key },\n                )\n              }\n            }\n            this.etat = true\n          }\n        }\n      }\n\n      // On initialise avec le style de out\n      if (this.groupe) {\n        for (const key in this.out) {\n          try {\n            if (this.out[key] != null) this.groupe!.style[key] = this.out[key]\n          } catch (error) {\n            const err =\n              error instanceof Error ? error : new Error('Erreur inconnue')\n            window.notify(\n              err.message +\n                `\\nProblème pour modifier style.${key} sur ${this.groupe}`,\n              { element: this.groupe, key },\n            )\n          }\n        }\n        this.groupe.addEventListener('mouseover', mouseOverEffect)\n        this.groupe.addEventListener('mouseout', mouseOutEffect)\n        this.groupe.addEventListener('click', mouseClick)\n      }\n    }\n    document.addEventListener('exercicesAffiches', gestionDeLaSouris)\n    this.stopCliquable = () => {\n      // On retire tous les listener en le remplaçant par un clone\n      if (this.groupe) this.groupe.replaceWith(this.groupe.cloneNode(true))\n    }\n  }\n\n  svg(coeff: number) {\n    let code\n    const trace = tracePoint(this.point, this.stringColor)\n    trace.epaisseur = this.width ?? this.epaisseur ?? 1\n    trace.taille = this.taille ?? 3\n    trace.style = this.style ?? 'x'\n    code = `<g id=\"${this.id}\">\\n`\n    code += trace.svg(coeff) + '\\n'\n    // Le cercle est la zone d'effet pour les évènements\n    // Comme fill est à none, il faut ajouter pointer-events=\"visible\" cf https://www.smashingmagazine.com/2018/05/svg-interaction-pointer-events-property/\n    code += `<circle cx=\"${this.point.xSVG(coeff)}\" cy=\"${this.point.ySVG(coeff)}\" r=\"${(this.radius ?? 1) * coeff}\" fill=\"none\" pointer-events=\"visible\" />\\n`\n    code += '</g>'\n    return code\n  }\n\n  tikz() {\n    // PointCliquable n'a pas vocation à être utilisé en TikZ cependant, est-ce que ça peut être utile ?\n    return ''\n  }\n}\n\nexport function pointCliquable(\n  x: number,\n  y: number,\n  options: {\n    over?: Partial<CSSStyleDeclaration>\n    out?: Partial<CSSStyleDeclaration>\n    click?: Partial<CSSStyleDeclaration>\n    radius?: number\n    width?: number\n    color?: string\n    opacite?: number\n    size?: number\n    style?: string\n    taille?: number\n    couleur?: string\n  },\n) {\n  return new PointCliquable(x, y, options)\n}\n\n/**\n * @author Rémi ANGOT\n * @param {number} x abscisse du point\n * @param {number} y ordonnée du point\n * @param {object} options over, out et click sont des ojets pour le style css des évènements de la souris, radius, width, color, size, style sont les paramètres possibles pour la trace du point\n */\nexport class RectangleCliquable extends ObjetMathalea2D {\n  bordure: Polygone\n  rectangle: Polygone\n  etat: boolean\n  out: Partial<CSSStyleDeclaration>\n  over: Partial<CSSStyleDeclaration>\n  click: Partial<CSSStyleDeclaration>\n  stringColor: string\n  cliquable: boolean\n  groupe: null | HTMLElement\n  stopCliquable: () => void\n  constructor(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    options: {\n      over?: Partial<CSSStyleDeclaration>\n      out?: Partial<CSSStyleDeclaration>\n      click?: Partial<CSSStyleDeclaration>\n      couleur?: string\n      cliquable?: boolean\n      hachures?: boolean | string\n      epaisseur?: number\n      etat?: boolean\n      couleurDeRemplissage?: string\n      epaisseurDesHachures?: number\n    },\n  ) {\n    super()\n    const A = pointAbstrait(x1, y1)\n    const B = pointAbstrait(x2, y1)\n    const C = pointAbstrait(x2, y2)\n    const D = pointAbstrait(x1, y2)\n    this.rectangle = polygone(A, B, C, D)\n    this.bordure = polygone(A, B, C, D)\n    if (!options) options = {}\n    this.out = options.out ?? { opacity: '0' }\n    this.over = options.over ?? { opacity: '0.2' }\n    this.click = options.click ?? { opacity: '1' }\n    this.stringColor = options.couleur ?? '#f15929'\n    this.cliquable = options.cliquable !== undefined ? options.cliquable : true\n    this.rectangle.hachures = options.hachures ?? false\n    this.rectangle.couleurDesHachures = colorToLatexOrHTML('black')\n    this.rectangle.epaisseurDesHachures = options.epaisseurDesHachures ?? 4\n    this.bordure.epaisseur = options.epaisseur ?? 1\n    this.etat = options.etat ?? false // Pour récupérer si le rectangle est cliqué ou pas\n    this.groupe = null // il sera initialiser lorsque les exercices seront affichés.\n    this.stopCliquable = () => {\n      // On retire tous les listener en le remplaçant par un clone\n      this.groupe!.replaceWith(this.groupe!.cloneNode(true))\n    }\n    const gestionDeLaSouris = () => {\n      document.removeEventListener('exercicesAffiches', gestionDeLaSouris)\n      const changeEtatPoint = (etat: boolean) => {\n        this.etat = etat\n      }\n      if (this.groupe) {\n        // On initialise avec le style de out ou de click suivant l'état\n        for (const key in this.out) {\n          try {\n            const opacite = this.etat ? this.click[key] : this.out[key]\n            if (opacite != null) this.groupe!.style[key] = opacite\n          } catch (error) {\n            const err =\n              error instanceof Error ? error : new Error('Erreur inconnue')\n            window.notify(\n              err.message +\n                `\\nProblème pour modifier style.${key} sur ${this.groupe}`,\n              { element: this.groupe, key },\n            )\n          }\n        }\n      }\n      const mouseOverEffect = () => {\n        for (const key in this.over) {\n          try {\n            if (this.out[key] != null) this.groupe!.style[key] = this.out[key]\n          } catch (error) {\n            const err =\n              error instanceof Error ? error : new Error('Erreur inconnue')\n            window.notify(\n              err.message + `\\nProblème pour modifier style.${key} sur ${this}`,\n              { element: this, key },\n            )\n          }\n        }\n      }\n      const mouseOutEffect = () => {\n        for (const key in this.out) {\n          try {\n            if (this.out[key] != null) this.groupe!.style[key] = this.out[key]\n          } catch (error) {\n            const err =\n              error instanceof Error ? error : new Error('Erreur inconnue')\n            window.notify(\n              err.message + `\\nProblème pour modifier style.${key} sur ${this}`,\n              { element: this, key },\n            )\n          }\n        }\n      }\n      const mouseClick = () => {\n        if (this.etat && this.groupe) {\n          // On désactive le point\n          this.groupe.addEventListener('mouseover', mouseOverEffect)\n          this.groupe.addEventListener('mouseout', mouseOutEffect)\n          // On lui remet le style de out\n          for (const key in this.out) {\n            try {\n              if (this.out[key] != null) this.groupe.style[key] = this.out[key]\n            } catch (error) {\n              const err =\n                error instanceof Error ? error : new Error('Erreur inconnue')\n              window.notify(\n                err.message +\n                  `\\nProblème pour modifier style.${key} sur ${this}`,\n                { element: this, key },\n              )\n            }\n          }\n          this.etat = false\n          changeEtatPoint(false)\n        } else {\n          // On désactive les listeners\n          if (this.groupe) {\n            this.groupe.removeEventListener('mouseover', mouseOverEffect)\n            this.groupe.removeEventListener('mouseout', mouseOutEffect)\n            // On applique le style de click\n            for (const key in this.click) {\n              try {\n                if (this.click[key] != null)\n                  this.groupe.style[key] = this.click[key]\n              } catch (error) {\n                const err =\n                  error instanceof Error ? error : new Error('Erreur inconnue')\n                window.notify(\n                  err.message +\n                    `\\nProblème pour modifier style.${key} sur ${this}`,\n                  { element: this, key },\n                )\n              }\n            }\n            this.etat = true\n          }\n        }\n      }\n      if (this.groupe && this.cliquable) {\n        this.groupe.addEventListener('mouseover', mouseOverEffect)\n        this.groupe.addEventListener('mouseout', mouseOutEffect)\n        this.groupe.addEventListener('click', mouseClick)\n      }\n    }\n    document.addEventListener('exercicesAffiches', gestionDeLaSouris)\n  }\n\n  svg(coeff: number) {\n    let code\n    this.rectangle.couleurDeRemplissage = colorToLatexOrHTML(\n      this.stringColor ?? 'black',\n    )\n    this.rectangle.epaisseur = 0\n    code = `<g id=\"rectangle${this.id}\">\\n`\n    code += this.rectangle.svg(coeff) + '\\n'\n    code += '</g>'\n    code += this.bordure.svg(coeff)\n    return code\n  }\n\n  tikz() {\n    if (this.etat)\n      this.bordure.couleurDeRemplissage = colorToLatexOrHTML(this.stringColor)\n    this.bordure.couleurDesHachures = colorToLatexOrHTML('white')\n    this.bordure.hachures = this.rectangle.hachures\n    return this.bordure.tikz()\n  }\n}\n\nexport function rectangleCliquable(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  options: {\n    over?: Partial<CSSStyleDeclaration>\n    out?: Partial<CSSStyleDeclaration>\n    click?: Partial<CSSStyleDeclaration>\n    couleur?: string\n    cliquable?: boolean\n    hachures?: boolean | string\n    epaisseur?: number\n    etat?: boolean\n    couleurDeRemplissage?: string\n    epaisseurDesHachures?: number\n  },\n) {\n  return new RectangleCliquable(x1, y1, x2, y2, options)\n}\n\nexport class FractionCliquable extends ObjetMathalea2D {\n  constructor(\n    x: number,\n    y: number,\n    unites: number,\n    denominateur: number,\n    options: {\n      longueur?: number\n      ecart?: number\n      hauteur?: number\n      liste1?: number[]\n      liste2?: number[]\n      couleur1?: string\n      couleur2?: string\n      hachures1?: boolean\n      hachures2?: boolean\n      couleur?: string\n      cliquable?: boolean\n    } = {},\n  ) {\n    super()\n    this.objets = []\n    if (!options) options = {}\n    const longueur = options.longueur ?? 4\n    const ecart = options.ecart ?? 1\n    const hauteur = options.hauteur ?? 1\n    const liste1 = options.liste1 ?? []\n    const liste2 = options.liste2 ?? []\n    let couleur1 = options.couleur1 ?? '#f15929'\n    let couleur2 = options.couleur2 ?? '#1DA962'\n    if (!context.isHtml) {\n      couleur1 = options.couleur1 ?? 'gray'\n      couleur2 = options.couleur2 ?? 'lightgray'\n    }\n    const hachures1 = options.hachures1 ?? false\n    const hachures2 = options.hachures2 ?? false\n    const couleur =\n      options.couleur ?? (liste1.length === 0 ? couleur1 : 'white')\n    const cliquable = options.cliquable !== undefined ? options.cliquable : true\n    let O\n    for (let i = 0; i < unites; i++) {\n      O = pointAbstrait(x + i * (longueur + ecart), y)\n      for (let j = 0; j < denominateur; j++) {\n        if (liste1.includes(i * denominateur + j + 1)) {\n          this.objets.push(\n            rectangleCliquable(\n              O.x + (j * longueur) / denominateur,\n              y,\n              O.x + ((j + 1) * longueur) / denominateur,\n              y + hauteur,\n              { cliquable, etat: true, couleur: couleur1, hachures: hachures1 },\n            ),\n          )\n        } else if (liste2.includes(i * denominateur + j + 1)) {\n          this.objets.push(\n            rectangleCliquable(\n              O.x + (j * longueur) / denominateur,\n              y,\n              O.x + ((j + 1) * longueur) / denominateur,\n              y + hauteur,\n              { cliquable, etat: true, couleur: couleur2, hachures: hachures2 },\n            ),\n          )\n        } else {\n          this.objets.push(\n            rectangleCliquable(\n              O.x + (j * longueur) / denominateur,\n              y,\n              O.x + ((j + 1) * longueur) / denominateur,\n              y + hauteur,\n              { cliquable, couleur, etat: false },\n            ),\n          )\n        }\n      }\n    }\n  }\n}\n\nexport function fractionCliquable(\n  x: number,\n  y: number,\n  unites: number,\n  denominateur: number,\n  options: {\n    longueur?: number\n    ecart?: number\n    hauteur?: number\n    liste1?: number[]\n    liste2?: number[]\n    couleur1?: string\n    couleur2?: string\n    hachures1?: boolean\n    hachures2?: boolean\n    couleur?: string\n    cliquable?: boolean\n  },\n) {\n  return new FractionCliquable(x, y, unites, denominateur, options)\n}\n"],"names":["PointCliquable","ObjetMathalea2D","x","y","options","__publicField","pointAbstrait","gestionDeLaSouris","changeEtatPoint","etat","mouseOutEffect","key","error","err","mouseOverEffect","mouseClick","coeff","code","trace","tracePoint","pointCliquable","RectangleCliquable","x1","y1","x2","y2","A","B","C","D","polygone","colorToLatexOrHTML","opacite","rectangleCliquable","FractionCliquable","unites","denominateur","longueur","ecart","hauteur","liste1","liste2","couleur1","couleur2","context","hachures1","hachures2","couleur","cliquable","O","i","j","fractionCliquable"],"mappings":"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"}