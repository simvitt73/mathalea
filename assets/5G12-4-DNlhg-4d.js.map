{"version":3,"file":"5G12-4-DNlhg-4d.js","sources":["../../src/exercices/5e/5G12-4.ts"],"sourcesContent":["import { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport type { Figure2D } from '../../lib/2d/Figures2D'\nimport {\n  listeFigures2d,\n  type Forme,\n} from '../../lib/2d/figures2d/listeFigures2d'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { texteParPosition } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { translation } from '../../lib/2d/transformations'\nimport { vecteur } from '../../lib/2d/Vecteur'\nimport { propositionsQcm } from '../../lib/interactif/qcm'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { sp } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  gestionnaireFormulaireTexte,\n  randint,\n} from '../../modules/outils'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Reconnaitre une symétrie centrale'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n// Gestion de la date de publication initiale\nexport const dateDePublication = '18/05/2025'\n\n/**\n * Dire si une figure possède un centre de symétrie.\n * @author Jean-Claude Lhote\n */\nexport const uuid = '428b2'\n\nexport const refs = {\n  'fr-fr': ['5G12-4'],\n  'fr-ch': ['9ES6-29', '10ES2-16'],\n}\n\nexport default class NbAxesDeSymetrie extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 3\n    this.besoinFormulaireTexte = [\n      'Type de figures',\n      'Nombres séparés par des tirets :\\n1 : Panneaux\\n2 : Formes géométriques\\n3 : Legos\\n4 : Lettres\\n5 : Chiffres et nombres\\n6 : Mélange',\n    ]\n    this.sup = '6'\n    this.besoinFormulaire2Numerique = ['Nombre de figures par question', 3]\n    this.sup2 = 3\n    this.besoinFormulaire3CaseACocher = ['Avec des rotations aléatoires', false]\n    this.sup3 = false\n    this.besoinFormulaire4CaseACocher = ['Grandes figures', true]\n    this.sup4 = true\n  }\n\n  nouvelleVersion(): void {\n    let nbFigures = contraindreValeur(1, 3, this.sup2, 3)\n    const factor = this.sup4 ? 2 : 1\n    const typeDeFigures = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 5,\n      defaut: 1,\n      melange: 6,\n      nbQuestions: this.nbQuestions,\n    }).map(Number)\n    const numerosChoisis: number[] = []\n    for (let i = 0; i < this.nbQuestions; ) {\n      let texte = ''\n      let texteCorr = ''\n      const objets: NestedObjetMathalea2dArray = []\n      const objetsCorr: NestedObjetMathalea2dArray = []\n\n      const typeDeFigureChoisie = [\n        'panneau',\n        'geometrique',\n        'lego',\n        'lettre',\n        'chiffre',\n      ][typeDeFigures[i] - 1]\n      const listeFigs = listeFigures2d\n        .filter((el) => el.type === typeDeFigureChoisie)\n        .filter((el) => !numerosChoisis.includes(el.numero))\n        .filter((el, index, self) => {\n          // Si on ne parle pas d'un panneau, on ne filtre pas par style\n          if (typeDeFigureChoisie !== 'panneau') return true\n\n          // On garde seulement le premier élément pour chaque style défini\n          return (\n            index ===\n            self.findIndex((autre) => (autre.style ?? '') === (el.style ?? ''))\n          )\n        })\n      if (listeFigs.length === 0) {\n        this.listeQuestions.push('Aucune figure disponible')\n        this.listeCorrections.push('Aucune figure disponible')\n        break\n      }\n      const nbFigs = listeFigs.length\n      if (nbFigs < nbFigures) {\n        nbFigures = nbFigs\n      }\n      const figures = []\n      for (let j = 0; j < nbFigures; j++) {\n        const choix = listeFigs.filter(\n          (el) => !numerosChoisis.includes(el.numero),\n        )\n        if (choix.length === 0) {\n          nbFigures = j\n          break\n        }\n        const figure: Forme = choice(choix)\n        numerosChoisis.push(figure.numero)\n        figures.push(figure)\n      }\n      texte += this.interactif\n        ? `Dire si l${nbFigures > 1 ? 'es' : 'a'} figure${nbFigures > 1 ? 's' : ''} suivante${nbFigures > 1 ? 's' : ''} possède${nbFigures > 1 ? 'nt' : ''} un centre de symétrie.<br>`\n        : `Placer le centre de symétrie d${nbFigures > 1 ? 'es ' : 'e la'} figure${nbFigures > 1 ? 's' : ''} suivante${nbFigures > 1 ? 's' : ''} s'il existe.<br>`\n      const formes: Figure2D[] = []\n      const scale = nbFigures === 1 ? 1 : nbFigures === 2 ? 0.9 : 0.8\n      for (let j = 0; j < nbFigures; j++) {\n        const alpha = randint(-30, 30, 0)\n        const figure = figures[j]\n        const options = figure.options ?? {}\n        const forme = figure\n          .figure2d(options)\n          .dilate(factor)\n          .translate(j * 6.5 * factor * scale, 0)\n        forme.name = figure.name.replace(/ /g, '_')\n        if (this.sup3) forme.rotate(alpha)\n        formes.push(forme)\n\n        const formeTexte = texteParPosition(\n          `figure ${j + 1}`,\n          j * 6.5 * factor * scale,\n          2.8 * factor,\n        )\n        objets.push(forme, formeTexte)\n\n        const formeBis = forme.copy(forme.name + 'Bis')\n        formeBis.opacite = 0.3\n        const formeCorr = forme.rotationAnimee({\n          angleStart: 0,\n          angleEnd: 180,\n          cx: (forme.centre?.x ?? 0) + j * 6.5 * factor * scale,\n          cy: forme.centre?.y ?? 0,\n          loop: true,\n          duration: '4s',\n        })\n        formeCorr.opacite = 0.5\n        if (context.isHtml) {\n          objetsCorr.push(formeBis, formeCorr, formeTexte)\n        } else {\n          objetsCorr.push(formeBis, formeTexte)\n        }\n        if (forme.centre != null) {\n          const centre = translation(\n            forme.centre,\n            vecteur(j * 6.5 * factor * scale, 0),\n          )\n          const trace = tracePoint(centre)\n          trace.epaisseur = 3\n          trace.color = colorToLatexOrHTML('red')\n          trace.taille = 5\n          objetsCorr.push(trace)\n        } else {\n          objetsCorr.push(\n            texteParPosition(\n              `Pas de centre ${sp(2)} de symétrie !`,\n              j * 6.5 * factor * scale,\n              0,\n              45,\n              'red',\n            ),\n            texteParPosition(\n              `Pas de centre ${sp(2)} de symétrie !`,\n              j * 6.5 * factor * scale,\n              0,\n              -45,\n              'red',\n            ),\n          )\n        }\n      }\n      texte += mathalea2d(\n        Object.assign(\n          { pixelsParCm: 20, scale: factor === 1 ? scale : 0.7 * scale },\n          fixeBordures(objets),\n        ),\n        objets,\n      )\n      if (this.interactif) {\n        for (let j = 0; j < nbFigures; j++) {\n          this.autoCorrection[i * nbFigures + j] = {\n            propositions: [\n              { texte: 'oui', statut: formes[j].centre != null },\n              { texte: 'non', statut: formes[j].centre == null },\n            ],\n            options: {\n              ordered: true,\n              radio: true,\n            },\n          }\n          const monQcm = propositionsQcm(this, i * nbFigures + j, {\n            style: 'inline-block',\n            format: 'case',\n          })\n          texte += `figure ${j + 1} : ${monQcm.texte}`\n        }\n      }\n\n      texteCorr += mathalea2d(\n        Object.assign(\n          { pixelsParCm: 20, scale: factor === 1 ? scale : 0.7 * scale },\n          fixeBordures(objets),\n        ),\n        objetsCorr,\n      )\n      texteCorr += `${formes\n        .map((el, j) =>\n          el.centre != null\n            ? `${j === 0 ? 'L' : 'l'}a figure ${j + 1} possède un centre de symétrie.<br>`\n            : `${j === 0 ? 'L' : 'l'}a figure ${j + 1} ne possède pas de centre de symétrie.<br>`,\n        )\n        .join('')}`\n      this.listeQuestions.push(texte)\n      this.listeCorrections.push(texteCorr)\n      i++\n    }\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","uuid","refs","NbAxesDeSymetrie","Exercice","nbFigures","contraindreValeur","factor","typeDeFigures","gestionnaireFormulaireTexte","numerosChoisis","i","texte","texteCorr","objets","objetsCorr","typeDeFigureChoisie","listeFigs","listeFigures2d","el","index","self","autre","nbFigs","figures","j","choix","figure","choice","formes","scale","alpha","randint","options","forme","formeTexte","texteParPosition","formeBis","formeCorr","_a","_b","context","centre","translation","vecteur","trace","tracePoint","colorToLatexOrHTML","sp","mathalea2d","fixeBordures","monQcm","propositionsQcm"],"mappings":"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"}