{"version":3,"file":"canc3D04-v7pPWxJn.js","sources":["../../src/lib/InteractiveClock.ts","../../src/exercices/can/c3/canc3D04.ts"],"sourcesContent":["/**\n * Horloge interactive\n * @author R√©mi Angot\n *\n * @attr {number} hour - L'heure initiale de l'horloge (0-12)\n * @attr {number} minute - La minute initiale de l'horloge (0-59)\n * @attr {number} [second=0] - La seconde initiale de l'horloge (0-59)\n * @attr {boolean} [isDynamic=true] - Indique si l'horloge est interactive\n * @attr {boolean} [showHands=true] - Indique si les aiguilles de l'horloge doivent √™tre affich√©es\n * @attr {boolean} [showSecond=true] - Indique si l'aiguille des secondes doit √™tre affich√©e\n */\nclass InteractiveClock extends HTMLElement {\n  svgHandHour!: SVGElement\n  svgHandMinute!: SVGElement\n  svgHandSecond!: SVGElement\n  radius = 200\n  showHands = true\n  showSecond = false\n  draggingHand: boolean\n  previousMinute = 0\n  previousSecond = 0\n  private _isDynamic = true\n  private _currentAction?: 'hour' | 'minute' | 'second'\n\n  constructor() {\n    super()\n    this.hour = this.getAttribute('hour')\n      ? Number(this.getAttribute('hour'))\n      : 12\n    this.minute = this.getAttribute('minute')\n      ? Number(this.getAttribute('minute'))\n      : 0\n    this.svgHandHour = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.svgHandMinute = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.svgHandSecond = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.showHands = !(this.getAttribute('showHands') === 'false')\n    this.showSecond = this.hasAttribute('showSecond')\n      ? !(this.getAttribute('showSecond') === 'false')\n      : false\n    this.isDynamic = !(this.getAttribute('isDynamic') === 'false')\n    this.draggingHand = false\n  }\n\n  /**\n   * M√©thode appel√©e lorsque l'√©l√©ment est ajout√© au DOM\n   */\n  connectedCallback() {\n    const container = document.createElement('div')\n    container.className = 'flex flex-wrap items-center'\n\n    const svgContainer = document.createElement('div')\n    svgContainer.className = 'flex-1 flex justify-center items-center p-8'\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n    svgContainer.appendChild(svg)\n    svg.setAttribute('width', '200')\n    svg.setAttribute('height', '200')\n    svg.setAttribute('viewBox', '-200 -200 400 400')\n\n    const circle = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'circle',\n    )\n    circle.setAttribute('cx', '0')\n    circle.setAttribute('cy', '0')\n    circle.setAttribute('r', '200')\n    circle.setAttribute('stroke', 'black')\n    circle.setAttribute('stroke-opacity', '0.8')\n    circle.setAttribute('fill', 'none')\n    svg.appendChild(circle)\n\n    const circleCentral = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'circle',\n    )\n    circleCentral.setAttribute('cx', '0')\n    circleCentral.setAttribute('cy', '0')\n    circleCentral.setAttribute('r', '10')\n    circleCentral.setAttribute('stroke', 'black')\n    circleCentral.setAttribute('fill', 'black')\n    svg.appendChild(circleCentral)\n\n    // Ajouter les nombres de 1 √† 12\n    for (let i = 1; i <= 12; i++) {\n      const angle = (i / 12) * 2 * Math.PI\n      const x = Math.sin(angle) * 160\n      const y = -Math.cos(angle) * 160\n      const text = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'text',\n      )\n      text.setAttribute('x', x.toString())\n      text.setAttribute('y', y.toString())\n      text.setAttribute('text-anchor', 'middle')\n      text.setAttribute('alignment-baseline', 'middle')\n      text.setAttribute('font-size', '20')\n      text.textContent = i.toString()\n      text.setAttribute('pointer-events', 'none')\n      text.style.userSelect = 'none'\n      text.style.webkitUserSelect = 'none'\n      svg.appendChild(text)\n    }\n\n    // Ajouter les petits traits pour chaque graduation\n    for (let i = 0; i < 60; i++) {\n      const angle = (i / 60) * 2 * Math.PI\n      let x1 = Math.sin(angle) * 190\n      let y1 = -Math.cos(angle) * 190\n      const x2 = Math.sin(angle) * 200\n      const y2 = -Math.cos(angle) * 200\n      if (i % 5 === 0) {\n        x1 = Math.sin(angle) * 180\n        y1 = -Math.cos(angle) * 180\n      }\n\n      const line = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      line.setAttribute('x1', x1.toString())\n      line.setAttribute('y1', y1.toString())\n      line.setAttribute('x2', x2.toString())\n      line.setAttribute('y2', y2.toString())\n      line.setAttribute('stroke', 'black')\n      if (i % 5 === 0) {\n        line.setAttribute('stroke-width', '5')\n      }\n      svg.appendChild(line)\n    }\n\n    // Ajouter les aiguilles\n    if (this.showHands) {\n      this.svgHandHour = this.createHand(100, 'hour')\n      this.svgHandMinute = this.createHand(150, 'minute')\n      if (this.showSecond) {\n        this.svgHandSecond = this.createHand(170, 'second')\n      }\n      this.updateHandHour()\n      this.updateHandMinute()\n      if (this.showSecond) {\n        this.updateHandSecond()\n      }\n      svg.appendChild(this.svgHandHour)\n      svg.appendChild(this.svgHandMinute)\n      if (this.showSecond) {\n        svg.appendChild(this.svgHandSecond)\n      }\n    }\n\n    container.appendChild(svgContainer)\n    this.appendChild(container)\n\n    if (this.isDynamic) {\n      this.currentAction = 'minute'\n      const preventDefault = (event: PointerEvent | TouchEvent) => {\n        event.preventDefault()\n      }\n\n      const handlePointerDown = (event: PointerEvent | TouchEvent) => {\n        this.draggingHand = true\n        // Emp√™che le d√©filement pendant le drag\n        svg.addEventListener('pointermove', preventDefault, { passive: false })\n        svg.addEventListener('touchmove', preventDefault, { passive: false })\n      }\n\n      const handlePointerUp = () => {\n        this.draggingHand = false\n        // R√©active le d√©filement apr√®s le drag\n        svg.removeEventListener('pointermove', preventDefault)\n        svg.removeEventListener('touchmove', preventDefault)\n      }\n\n      svg.addEventListener('pointerdown', handlePointerDown)\n      svg.addEventListener('pointerup', handlePointerUp)\n      svg.addEventListener('pointermove', (event) => this.dragHand(event))\n\n      svg.addEventListener('touchstart', handlePointerDown)\n      svg.addEventListener('touchend', handlePointerUp)\n      svg.addEventListener('touchmove', (event) => this.dragHand(event))\n\n      this.svgHandHour.addEventListener('pointerdown', (event) => {\n        this.draggingHand = true\n        this.currentAction = 'hour'\n        handlePointerDown(event)\n      })\n      this.svgHandHour.addEventListener('pointerup', handlePointerUp)\n\n      this.svgHandMinute.addEventListener('pointerdown', (event) => {\n        this.draggingHand = true\n        this.currentAction = 'minute'\n        handlePointerDown(event)\n      })\n      this.svgHandMinute.addEventListener('pointerup', handlePointerUp)\n\n      if (this.showSecond) {\n        this.svgHandSecond.addEventListener('pointerdown', (event) => {\n          this.draggingHand = true\n          this.currentAction = 'second'\n          handlePointerDown(event)\n        })\n        this.svgHandSecond.addEventListener('pointerup', handlePointerUp)\n      }\n    }\n  }\n\n  /**\n   * Cr√©ation d'une aiguille\n   */\n  createHand(length: number, type: 'hour' | 'minute' | 'second') {\n    const hand = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n    hand.setAttribute('x1', '0')\n    hand.setAttribute('y1', '0')\n    hand.setAttribute('stroke', 'black')\n    if (type === 'hour') {\n      hand.setAttribute('stroke-width', '12')\n    } else if (type === 'minute') {\n      hand.setAttribute('stroke-width', '8')\n    } else {\n      hand.setAttribute('stroke-width', '3')\n    }\n    hand.setAttribute('stroke-linecap', 'round')\n    hand.setAttribute('class', type + '-hand')\n    return hand\n  }\n\n  updateHandHour(adaptHourHandToMinutes = true) {\n    let angle = (this.hour / 12) * 2 * Math.PI\n    if (adaptHourHandToMinutes) {\n      angle += (this.minute / 360) * Math.PI\n    }\n    const x2 = Math.sin(angle) * 100\n    const y2 = -Math.cos(angle) * 100\n    this.svgHandHour.setAttribute('x2', x2.toString())\n    this.svgHandHour.setAttribute('y2', y2.toString())\n  }\n\n  updateHandMinute() {\n    const angle = (this.minute / 60) * 2 * Math.PI\n    const x2 = Math.sin(angle) * 150\n    const y2 = -Math.cos(angle) * 150\n    this.svgHandMinute.setAttribute('x2', x2.toString())\n    this.svgHandMinute.setAttribute('y2', y2.toString())\n  }\n\n  updateHandSecond() {\n    const angle = (this.second / 60) * 2 * Math.PI\n    const x2 = Math.sin(angle) * 170\n    const y2 = -Math.cos(angle) * 170\n    this.svgHandSecond.setAttribute('x2', x2.toString())\n    this.svgHandSecond.setAttribute('y2', y2.toString())\n  }\n\n  dragHand(event: MouseEvent | TouchEvent) {\n    if (!this.isDynamic) return\n    if (!this.draggingHand) return\n    const rect = (event.target as SVGElement).getBoundingClientRect()\n    const clientX =\n      event instanceof MouseEvent ? event.clientX : event.touches[0].clientX\n    const clientY =\n      event instanceof MouseEvent ? event.clientY : event.touches[0].clientY\n    const x = clientX - rect.left - rect.width / 2\n    const y = clientY - rect.top - rect.height / 2\n    // Ne rien faire si on est trop pr√®s du centre\n    if (Math.sqrt(x * x + y * y) < 20) return\n    const angle = (Math.atan2(y, x) + Math.PI / 2 + 2 * Math.PI) % (2 * Math.PI)\n    const value = Math.round(\n      (angle / (2 * Math.PI)) * (this.currentAction === 'hour' ? 12 : 60),\n    )\n    if (this.currentAction === 'hour') {\n      this.hour = value\n    } else if (this.currentAction === 'minute') {\n      if (this.previousMinute > 50 && value < 10) {\n        this.hour = (this.hour + 1) % 12\n      } else if (this.previousMinute < 10 && value > 50) {\n        this.hour = (this.hour + 11) % 12\n      }\n      this.minute = value\n    } else if (this.currentAction === 'second') {\n      if (this.previousSecond > 50 && value < 10) {\n        this.minute = (this.minute + 1) % 60\n      } else if (this.previousSecond < 10 && value > 50) {\n        this.minute = (this.minute + 59) % 60\n      }\n      this.second = value\n    }\n    this.updateHandHour()\n    this.updateHandMinute()\n    this.updateHandSecond()\n  }\n\n  disconnectedCallback() {\n    // Code pour g√©rer la suppression de l'horloge du DOM\n  }\n\n  get currentAction() {\n    return this._currentAction\n  }\n\n  set currentAction(value: 'hour' | 'minute' | 'second' | undefined) {\n    this._currentAction = value\n    if (value === 'hour') {\n      this.svgHandHour.setAttribute('stroke', '#216D9A')\n      this.svgHandMinute.setAttribute('stroke', '#F15929')\n      this.svgHandSecond.setAttribute('stroke', '#F15929')\n    } else if (value === 'minute') {\n      this.svgHandHour.setAttribute('stroke', '#F15929')\n      this.svgHandMinute.setAttribute('stroke', '#216D9A')\n      this.svgHandSecond.setAttribute('stroke', '#F15929')\n    } else if (value === 'second') {\n      this.svgHandHour.setAttribute('stroke', '#F15929')\n      this.svgHandMinute.setAttribute('stroke', '#F15929')\n      this.svgHandSecond.setAttribute('stroke', '#216D9A')\n    } else {\n      this.svgHandHour.setAttribute('stroke', 'black')\n      this.svgHandMinute.setAttribute('stroke', 'black')\n      this.svgHandSecond.setAttribute('stroke', 'black')\n    }\n  }\n\n  get hour() {\n    return Number(this.getAttribute('hour'))\n  }\n\n  set hour(value: number) {\n    if (value === 0) {\n      value = 12\n    }\n    this.setAttribute('hour', value.toString())\n  }\n\n  get second() {\n    return Number(this.getAttribute('second')) || 0\n  }\n\n  set second(value: number) {\n    this.setAttribute('second', value.toString())\n    this.previousSecond = this.second\n  }\n\n  get isDynamic() {\n    return this._isDynamic\n  }\n\n  set isDynamic(value: boolean) {\n    this._isDynamic = value\n    if (!value) {\n      this.currentAction = undefined\n    }\n  }\n\n  get minute() {\n    return Number(this.getAttribute('minute'))\n  }\n\n  set minute(value) {\n    this.setAttribute('minute', value.toString())\n    this.previousMinute = this.minute\n  }\n}\n\nexport default function handleInteractiveClock() {\n  if (customElements.get('interactive-clock') === undefined) {\n    customElements.define('interactive-clock', InteractiveClock)\n  }\n}\n","/**\n * ‚ö†Ô∏è Cet exercice est utilis√© dans le test : tests/e2e/tests/view/view.capytale.save.can.test.ts ‚ö†Ô∏è\n */\n\nimport Horloge from '../../../lib/2d/horloge'\nimport handleInteractiveClock from '../../../lib/InteractiveClock'\nimport { combinaisonListes } from '../../../lib/outils/arrayOutils'\nimport { sp } from '../../../lib/outils/outilString'\nimport { formatMinute } from '../../../lib/outils/texNombre'\nimport { context } from '../../../modules/context'\nimport Hms from '../../../modules/Hms'\nimport { mathalea2d } from '../../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../../modules/outils'\nimport Exercice from '../../Exercice'\nexport const titre = \"Indiquer l'heure sur une horloge\"\nexport const interactifReady = true\nexport const interactifType = 'custom'\n\nexport const dateDePublication = '21/2/2025'\n\nexport const uuid = '51242'\nexport const refs = {\n  'fr-fr': ['canc3D04', 'auto6M4B-flash1'],\n  'fr-ch': ['PR-5'],\n}\n\n/**\n * @author R√©mi Angot\n\n*/\nexport default class ExerciceInteractiveClock extends Exercice {\n  goodAnswers: { hour: string; minute: string }[] = []\n  constructor() {\n    super()\n    this.nbQuestions = 1\n    this.interactifType = interactifType // MGu obligatoire car charg√© en statique avec la CAN2025\n    handleInteractiveClock() // Obligatoire pour la gestion de l'√©l√©ment custom <interactive-clock>\n    this.besoinFormulaireCaseACocher = [\n      \"Moiti√© des questions sur les heures de l'apr√®s-midi\",\n    ]\n    this.sup = false\n  }\n\n  nouvelleVersion(numeroExercice: number, numeroQuestion?: number) {\n    let isAfter12 = Array(this.nbQuestions).fill(false)\n    if (this.sup) {\n      isAfter12 = combinaisonListes([true, false], this.nbQuestions)\n    }\n    for (\n      let i = numeroQuestion ?? 0, cpt = 0;\n      i < (numeroQuestion ? numeroQuestion + 1 : this.nbQuestions) && cpt < 50;\n\n    ) {\n      let hour = randint(isAfter12[i] ? 13 : 1, isAfter12[i] ? 23 : 12)\n      let minute = randint(1, 11) * 5\n      if (this.canOfficielle) {\n        hour = 13\n        minute = 30\n      }\n      let enonce = `Placer correctement les aiguilles pour indiquer ${hour}${sp(1)}h${sp(1)}${formatMinute(minute)}.<br>`\n      if (context.isHtml) {\n        enonce += `<br><br><interactive-clock id=\"clockEx${this.numeroExercice}Q${i}\" isDynamic=\"${this.interactif}\" showHands=\"${this.interactif}\"/>`\n      } else {\n        const horloge = new Horloge(0, 0, 2)\n        enonce += mathalea2d(\n          {\n            xmin: -3,\n            ymin: -3,\n            xmax: 3,\n            ymax: 3,\n            scale: 0.6,\n            style: 'margin: auto',\n          },\n          horloge,\n        )\n      }\n      let correction = ''\n      if (context.isHtml) {\n        correction = `<interactive-clock hour=\"${hour}\" minute=\"${minute}\" isDynamic=\"false\"/>`\n      } else {\n        const horloge = new Horloge(0, 0, 2, new Hms({ hour, minute }))\n        correction = mathalea2d(\n          {\n            xmin: -3,\n            ymin: -3,\n            xmax: 3,\n            ymax: 3,\n            scale: 0.6,\n            style: 'margin: auto',\n          },\n          horloge,\n        )\n      }\n      if (hour > 12) {\n        correction += `<br>Remarque : ${hour} h correspond √† ${hour - 12} h ${hour < 18 ? \"de l'apr√®s-midi\" : 'du soir'}.`\n      }\n      if (this.questionJamaisPosee(i, hour, minute)) {\n        this.listeQuestions[i] = enonce\n        this.listeCorrections[i] = correction\n        this.goodAnswers[i] = {\n          hour: hour.toString(),\n          minute: minute.toString(),\n        }\n        this.autoCorrection[i] = {\n          reponse: {\n            valeur: {\n              reponse: { value: hour.toString() + 'h' + minute.toString() },\n            },\n            param: { formatInteractif: 'custom' },\n          },\n        }\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n\n  correctionInteractive = (i: number) => {\n    const id = `clockEx${this.numeroExercice}Q${i}`\n    const clock = document.querySelector(`#${id}`) as any\n    if (clock == null) {\n      return 'KO'\n    }\n    clock.isDynamic = false\n    const hour: string = clock.getAttribute('hour')\n    const minute: string = clock.getAttribute('minute')\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la r√©ponse pour Capytale\n    this.answers[id] = `${hour}h${minute.toString().padStart(2, '0')}`\n    if (\n      hour === formatHour012(this.goodAnswers[i].hour) &&\n      minute === this.goodAnswers[i].minute\n    ) {\n      const divFeedback = document.createElement('div')\n      divFeedback.innerHTML = 'üòé'\n      clock.parentElement?.appendChild(divFeedback)\n      return 'OK'\n    } else {\n      const divFeedback = document.createElement('div')\n      divFeedback.innerHTML = `‚òπÔ∏è Les aiguilles indiquent ${clock.getAttribute('hour')} h ${formatMinute(clock.getAttribute('minute'))}.`\n      clock.parentElement?.appendChild(divFeedback)\n      return 'KO'\n    }\n  }\n}\n\nfunction formatHour012(hour: string): string {\n  const hourNumber = parseInt(hour)\n  if (hourNumber > 12) {\n    return (hourNumber - 12).toString()\n  } else {\n    return hourNumber.toString()\n  }\n}\n"],"names":["InteractiveClock","__publicField","container","svgContainer","svg","circle","circleCentral","angle","x","y","text","x1","y1","x2","y2","line","preventDefault","event","handlePointerDown","handlePointerUp","length","type","hand","adaptHourHandToMinutes","rect","clientX","clientY","value","handleInteractiveClock","titre","interactifReady","interactifType","dateDePublication","uuid","refs","ExerciceInteractiveClock","Exercice","i","id","clock","hour","minute","formatHour012","divFeedback","_a","formatMinute","_b","numeroExercice","numeroQuestion","isAfter12","combinaisonListes","cpt","randint","enonce","sp","context","horloge","Horloge","mathalea2d","correction","Hms","listeQuestionsToContenu","hourNumber"],"mappings":"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"}