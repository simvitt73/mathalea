{"version":3,"file":"6N4B-BzhU3iS5.js","sources":["../../src/exercices/6e/6N4B.ts"],"sourcesContent":["import {\n  cubeDef,\n  project3dIso,\n  Shape3D,\n  shapeCubeIso,\n  updateCubeIso,\n} from '../../lib/2d/figures2d/Shape3d'\nimport { listeShapes2DInfos } from '../../lib/2d/figures2d/shapes2d'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport {\n  listePatternsSansRatioNiFraction,\n  type PatternRiche,\n  type PatternRiche3D,\n} from '../../lib/2d/patterns/patternsPreDef'\nimport { VisualPattern } from '../../lib/2d/patterns/VisualPattern'\nimport { VisualPattern3D } from '../../lib/2d/patterns/VisualPattern3D'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { polygone } from '../../lib/2d/polygones'\nimport { tableauColonneLigne } from '../../lib/2d/tableau'\nimport { texteParPosition } from '../../lib/2d/textes'\nimport { bleuMathalea } from '../../lib/colors'\nimport { createList } from '../../lib/format/lists'\nimport { ajouteQuestionMathlive } from '../../lib/interactif/questionMathLive'\nimport {\n  areSameArray,\n  completerNombresUniques,\n  compteOccurences,\n  enleveDoublonNum,\n  remplaceDansTableau,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { range1 } from '../../lib/outils/nombres'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  gestionnaireFormulaireTexte,\n  randint,\n} from '../../modules/outils'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n\nexport const titre = \"Identifier la structure d'un motif (itératif)\"\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\nexport const dateDePublication = '23/07/2025'\nexport const dateDeModifImportante = '22/11/2025'\n\n/**\n * Identifier la structure d'un motif (itératif)\n * Cet exercice contient des patterns issus de l'excellent site : https://www.visualpatterns.org/\n * @author Eric Elter (sur les bases du 6I13 de Jean-Claude Lhote)\n */\nexport const uuid = 'd41c5'\n\nexport const refs = {\n  'fr-fr': ['6N4B'],\n  'fr-2016': ['6I13-1'],\n  'fr-ch': [],\n}\n\nexport default class PatternIteratif extends Exercice {\n  destroyers: (() => void)[] = []\n\n  constructor() {\n    super()\n    this.nbQuestions = 3\n    this.comment = ` Les patterns sont des motifs figuratifs qui évoluent selon des règles définies.<br>\n Cet exercice contient des patterns issus de l'excellent site : <a href=\"https://www.visualpatterns.org/\" target=\"_blank\" style=\"color: blue\">https://www.visualpatterns.org/</a>.<br>\n Cet exercice propose d'étudier les premiers termes d'une série de motifs afin de répondre à différentes questions possibles.<br>\nGrâce au premier paramètre, on peut choisir le nombre de motifs visibles.<br>\nGrâce au deuxième paramètre, on peut choisir les questions à poser.<br>\nGrâce au troisième paramètre, on peut choisir le numéro du motif de la question d.<br>\nGrâce au quatrième paramètre, on peut imposer des patterns choisis dans cette <a href=\"https://coopmaths.fr/alea/?uuid=71ff5&s=1\" target=\"_blank\" style=\"color: blue\">liste de patterns</a>.<br>\nSi le nombre de questions est supérieur au nombre de patterns choisis, alors l'exercice sera complété par des patterns choisis au hasard.\n    `\n    this.besoinFormulaireNumerique = [\n      'Nombre de figures par question',\n      3,\n      'Deux figures\\nTrois Figures\\nQuatre Figures',\n    ]\n    this.sup = 2\n\n    this.besoinFormulaire2Texte = [\n      'Type de questions',\n      [\n        'Nombres séparés par des tirets :',\n        '1 : Motif suivant à dessiner',\n        \"2 : Nombre d'éléments du motif suivant\",\n        \"3 : Nombre d'éléments du motif 10\",\n        \"4 : Nombre d'éléments du motif choisi\",\n        \"5 : Nombre d'éléments du motif 100\",\n        \"6 : Un nombre d'éléments au hasard parmi les 4 précédents\",\n        '7 : Ensemble des 5 premières propositions',\n      ].join('\\n'),\n    ]\n    this.sup2 = '7'\n\n    this.besoinFormulaire3Numerique = [\n      'Numéro du motif de la question c) (choisi entre 11 et 99).\\nMettre 100 pour laisser le hasard choisir ',\n      listePatternsSansRatioNiFraction.length,\n    ]\n    this.sup3 = 0\n\n    const maxNumPattern = listePatternsSansRatioNiFraction.length\n    this.besoinFormulaire4Texte = [\n      'Numéro de pattern',\n      [\n        'Nombres séparés par des tirets :',\n        `* Numéros entre 1 et ${maxNumPattern}`,\n        '* Mettre 0 pour laisser le hasard choisir ',\n      ].join('\\n'),\n    ]\n    this.sup4 = '0'\n\n    this.listePackages = ['twemojis'] // this.listePackages est inutile mais la présence du mot \"twemojis\" est indispensable pour la sortie LaTeX.\n  }\n\n  destroy() {\n    // MGu quan l'exercice est supprimé par svelte : bouton supprimé\n    this.destroyers.forEach((destroy) => destroy())\n    this.destroyers.length = 0\n  }\n\n  nouvelleVersion(): void {\n    // MGu quand l'exercice est modifié, on détruit les anciens listeners\n    this.destroyers.forEach((destroy) => destroy())\n    this.destroyers.length = 0\n    // on ne conserve que les linéaires et les affines sans ratio, ni fraction, ni multiple shape\n    const listePatternReference = listePatternsSansRatioNiFraction\n    const angle = Math.PI / 6\n\n    let listePattern = gestionnaireFormulaireTexte({\n      nbQuestions: this.nbQuestions,\n      saisie: this.sup4,\n      min: 0,\n      max: listePatternReference.length,\n      melange: 0,\n      defaut: 0,\n      exclus: [0],\n    }).map(Number)\n\n    listePattern = enleveDoublonNum(listePattern)\n\n    listePattern = completerNombresUniques(\n      listePattern,\n      this.nbQuestions,\n      listePatternReference.length,\n    )\n\n    const listePreDef = shuffle(\n      listePattern.map((i) => listePatternReference[i - 1]),\n    )\n    const nbFigures = contraindreValeur(2, 4, this.sup + 1, 4)\n\n    let typesQuestionsInitiales = gestionnaireFormulaireTexte({\n      saisie: this.sup2,\n      min: 1,\n      max: 6,\n      defaut: 1,\n      melange: 7,\n      nbQuestions: 5,\n      shuffle: false,\n    }).map(Number)\n    typesQuestionsInitiales = enleveDoublonNum(typesQuestionsInitiales)\n    if (typesQuestionsInitiales.length === 6)\n      typesQuestionsInitiales = range1(5)\n    let typesQuestions\n    let indexInteractif = 0\n    for (\n      let i = 0;\n      i < Math.min(listePatternReference.length, this.nbQuestions);\n    ) {\n      typesQuestions = typesQuestionsInitiales\n      if (compteOccurences(typesQuestionsInitiales, 6) > 0) {\n        if (\n          typesQuestionsInitiales.length === 5 &&\n          typesQuestionsInitiales.includes(1)\n        )\n          typesQuestionsInitiales = range1(5)\n        else if (typesQuestionsInitiales.length < 5) {\n          typesQuestions = remplaceDansTableau(\n            typesQuestionsInitiales,\n            6,\n            randint(2, 5, typesQuestionsInitiales),\n          )\n          typesQuestions = enleveDoublonNum(typesQuestions)\n        }\n      }\n\n      const objetsCorr: NestedObjetMathalea2dArray = []\n      const pat = listePreDef[i]\n      const pattern =\n        'iterate3d' in pat\n          ? new VisualPattern3D({\n              initialCells: [],\n              type: 'iso',\n              prefixId: `Ex${this.numeroExercice}Q${i}`,\n              shapes: ['cube'],\n            })\n          : new VisualPattern([])\n      if ('iterate3d' in pattern) {\n        let xminCorr = Infinity\n        let yminCorr = Infinity\n        let xmaxCorr = -Infinity\n        let ymaxCorr = -Infinity\n        pattern.shape = shapeCubeIso(`cubeIsoQ${i}F0`) as Shape3D\n        pattern.iterate3d = (pat as PatternRiche3D).iterate3d\n\n        const figureCorr: NestedObjetMathalea2dArray = []\n        if (context.isHtml) {\n          pattern.shape.codeSvg = `<use href=\"#cubeIsoQ${i}F0\"></use>`\n          const cells = (pattern as VisualPattern3D).update3DCells(\n            nbFigures + 1,\n          )\n          // Ajouter les SVG générés par svg() de chaque objet\n          cells.forEach((cell) => {\n            const [px, py] = project3dIso(cell[0], cell[1], cell[2], angle)\n            const obj = shapeCubeIso(`cubeIsoQ${i}F0`, px, py)\n            figureCorr.push(obj)\n            yminCorr = Math.min(yminCorr, -py / 20)\n            ymaxCorr = Math.max(ymaxCorr, -py / 20)\n            xminCorr = Math.min(xminCorr, px / 20)\n            xmaxCorr = Math.max(xmaxCorr, px / 20)\n          })\n        } else {\n          figureCorr.push(\n            (pattern as VisualPattern3D).render(nbFigures + 1, 0, 0, angle),\n          )\n        }\n        objetsCorr.push(cubeDef(`cubeIsoQ${i}F0`))\n        objetsCorr.push(...figureCorr)\n        // On ajoute un cadre en Html à cause de la bordure car les éléments sont tous clonés à partir du même modèle centré à l'origine et en utilsant des href.\n        if (context.isHtml) {\n          const cadre = polygone(\n            point(xminCorr - 1, yminCorr - 2),\n            point(xmaxCorr + 2, yminCorr - 2),\n            point(xmaxCorr + 2, ymaxCorr + 2),\n            point(xminCorr - 1, ymaxCorr + 2),\n          )\n          objetsCorr.push(cadre)\n        }\n      } else {\n        const pat2D = pat as PatternRiche\n        pattern.iterate = (pat as PatternRiche).iterate\n        pattern.shapes = pat2D.shapes || ['carré', 'carré']\n        for (const shape of pattern.shapes) {\n          if (shape in listeShapes2DInfos) {\n            objetsCorr.push(listeShapes2DInfos[shape].shapeDef)\n          } else {\n            throw new Error(\n              `Shape ${shape} not found in listeShapes2DInfos or emojis.`,\n            )\n          }\n        }\n        const rendered = pattern.render(nbFigures + 1, 0, 0)\n        objetsCorr.push(...rendered)\n      }\n\n      let yMax = 0\n      let yMin = 0\n\n      let texte = `Voici les ${nbFigures} premiers motifs d'une série de motifs figuratifs. Ils évoluent selon des règles définies.<br>`\n      const figures: NestedObjetMathalea2dArray[] = []\n      for (let j = 0; j < nbFigures; j++) {\n        figures[j] = []\n        if (pattern instanceof VisualPattern3D) {\n          figures[j].push(cubeDef(`cubeIsoQ${i}F${j}`))\n        } else {\n          for (const shape of pattern.shapes) {\n            if (shape in listeShapes2DInfos) {\n              figures[j].push(listeShapes2DInfos[shape].shapeDef)\n            } else {\n              throw new Error(\n                `Shape ${shape} not found in listeShapes2DInfos or emojis.`,\n              )\n            }\n          }\n        }\n\n        let xmin = Infinity\n        let ymin = Infinity\n        let xmax = -Infinity\n        let ymax = -Infinity\n        if ('iterate3d' in pattern) {\n          pattern.shape = shapeCubeIso('cubeIso')\n          if (context.isHtml) {\n            const listeners = updateCubeIso({ pattern, i, j, angle })\n            if (listeners) this.destroyers.push(listeners)\n            pattern.shape.codeSvg = `<use href=\"#cubeIsoQ${i}F${j}\"></use>`\n            const cells = (pattern as VisualPattern3D).update3DCells(j + 1)\n            // Ajouter les SVG générés par svg() de chaque objet\n            cells.forEach((cell) => {\n              const [px, py] = project3dIso(cell[0], cell[1], cell[2], angle)\n              const obj = shapeCubeIso(`cubeIsoQ${i}F${j}`, px, py)\n              figures[j].push(obj)\n              ymin = Math.min(ymin, -py / 20)\n              ymax = Math.max(ymax, -py / 20)\n              xmin = Math.min(xmin, px / 20)\n              xmax = Math.max(xmax, px / 20)\n            })\n            xmin -= 1\n            xmax += 1\n          } else {\n            figures[j].push(\n              ...(pattern as VisualPattern3D).render(j + 1, 0, 0, Math.PI / 6),\n            )\n            ;({ xmin, ymin, xmax, ymax } = fixeBordures(figures[j]))\n          }\n        } else {\n          figures[j].push(...pattern.render(j + 1, 0, 0))\n          ;({ xmin, ymin, xmax, ymax } = fixeBordures(figures[j]))\n        }\n        figures[j].push(\n          texteParPosition(\n            `Motif ${j + 1}`,\n            (xmax + xmin + 1) / 2,\n            ymin - 1.5,\n            0,\n            'black',\n            0.8,\n            'milieu',\n          ),\n        )\n        const cadre = polygone(\n          point(xmin - 1, ymin - 2),\n          point(xmax + 2, ymin - 2),\n          point(xmax + 2, ymax + 2),\n          point(xmin - 1, ymax + 2),\n        )\n        cadre.pointilles = 4\n        figures[j].push(cadre)\n        yMax = Math.max(yMax, ymax)\n        yMin = Math.min(yMin, ymin)\n      }\n      texte += figures\n        .map((fig, index) =>\n          mathalea2d(\n            Object.assign(\n              fixeBordures(fig, { rxmin: 0, rymin: -1, rxmax: 0, rymax: 1 }),\n              {\n                id: `Motif${i}F${index}`,\n                pixelsParCm: 20,\n                yMax,\n                yMin,\n                scale: 0.4,\n                style: 'display: inline-block',\n                optionsTikz: 'transform shape',\n              },\n            ),\n            fig,\n          ),\n        )\n        .join('\\n')\n      let texteCorr = ''\n      const listeQuestions: string[] = []\n      const listeCorrections: string[] = []\n      const infosShape =\n        pattern.shapes[0] in listeShapes2DInfos\n          ? listeShapes2DInfos[pattern.shapes[0]]\n          : { articleCourt: 'de ', nomPluriel: 'cubes' }\n\n      let complementCorrection = true\n      const delta = pat.fonctionNb(2) - pat.fonctionNb(1)\n      const b = pat.fonctionNb(1) - delta\n      const explain = `On constate que le nombre ${infosShape.articleCourt} ${infosShape.nomPluriel} augmente de $${delta}$ à chaque étape.<br>\n      ${\n        b === 0\n          ? `Au départ, il y a $${pat.fonctionNb(1)}$ ${pattern.shapes[0]}s sur le motif $1$ et $${delta * 2}$ ${pattern.shapes[0]}s sur le motif $2$. Donc le nombre de ${infosShape.nomPluriel} correspond à $${delta}$ fois le numéro du motif.<br>`\n          : `Cependant, il n'y a pas ${delta} ${pattern.shapes[0]}s sur le motif 1, mais ${pat.fonctionNb(1)}. Par conséquent, il faut multiplier le numéro du motif par ${delta} et ${b < 0 ? `retirer ${-b}` : `ajouter ${b}`}.<br>`\n      }`\n\n      const colonne1TabCorrection = []\n      const colonne2TabCorrection = []\n      for (let indice = 1; indice < nbFigures + 1; indice++) {\n        colonne1TabCorrection.push(indice.toString())\n        colonne2TabCorrection.push(\n          pat.fonctionNb(indice) +\n            '=' +\n            pat.formule.replaceAll('n', miseEnEvidence(indice, bleuMathalea)),\n        )\n      }\n\n      for (const q of typesQuestions) {\n        let numeroMotif = 0\n        switch (q) {\n          case 1:\n            listeQuestions.push(`\\nDessiner le motif $${nbFigures + 1}$.`)\n            listeCorrections.push(`Voici le motif $${nbFigures + 1}$ :<br>\n              ${mathalea2d(Object.assign(fixeBordures(objetsCorr, { rxmin: 0, rymin: -1, rxmax: 0, rymax: 1 }), { scale: 0.4, optionsTikz: 'transform shape' }), objetsCorr)}`)\n            break\n          case 2:\n            numeroMotif = nbFigures + 1\n            break\n          case 3:\n            numeroMotif = 10\n            break\n          case 4:\n            this.sup3 = contraindreValeur(1, 100, this.sup3, randint(11, 99))\n            numeroMotif =\n              this.sup3 === 100 || this.sup3 < 11 ? randint(11, 99) : this.sup3\n            break\n          case 5:\n            numeroMotif = 100\n            break\n        }\n\n        if (q !== 1) {\n          const nbFormes = pat.fonctionNb(numeroMotif)\n          const nbTex = texNombre(nbFormes, 0)\n\n          listeQuestions.push(\n            `\\nQuel sera le nombre ${infosShape.articleCourt} ${infosShape.nomPluriel} dans le motif $${numeroMotif}$ ?${ajouteQuestionMathlive(\n              {\n                exercice: this,\n                question: indexInteractif++,\n                objetReponse: { reponse: { value: nbTex } },\n                typeInteractivite: 'mathlive',\n              },\n            )}`,\n          )\n          listeCorrections.push(\n            (complementCorrection ? explain : '') +\n              `Une formule pour trouver le nombre ${infosShape.articleCourt} ${infosShape.nomPluriel} est donc : $${pat.formule.replaceAll('n', miseEnEvidence(`${numeroMotif}`, bleuMathalea))}=${miseEnEvidence(texNombre(nbFormes))}$.<br>\n              Le motif $${numeroMotif}$ contient $${miseEnEvidence(texNombre(nbFormes, 0))}$ ${infosShape.nomPluriel}.`,\n          )\n          if (complementCorrection) complementCorrection = false\n\n          if (q > 2) {\n            colonne1TabCorrection.push('\\\\ldots')\n            colonne2TabCorrection.push('')\n          }\n          colonne1TabCorrection.push(\n            miseEnEvidence(numeroMotif.toString(), 'black'),\n          )\n          colonne2TabCorrection.push(\n            pat.formule.replaceAll(\n              'n',\n              miseEnEvidence(numeroMotif, bleuMathalea),\n            ) +\n              '=' +\n              miseEnEvidence(pat.fonctionNb(numeroMotif)),\n          )\n        }\n      }\n      texte +=\n        listeQuestions.length === 1\n          ? '<br>' + listeQuestions[0]\n          : createList({\n              items: listeQuestions,\n              style: 'alpha',\n            })\n      texteCorr +=\n        listeCorrections.length === 1\n          ? listeCorrections[0]\n          : createList({\n              items: listeCorrections,\n              style: 'alpha',\n            })\n\n      if (!areSameArray(typesQuestions, [1])) {\n        texteCorr +=\n          '<br><br>Les informations recherchées sont résumées dans ce tableau.<br><br>' +\n          tableauColonneLigne(\n            [\n              '\\\\text{Numéro du motif}',\n              `\\\\text{Nombre ${infosShape.articleCourt} ${infosShape.nomPluriel}}`,\n            ],\n            colonne1TabCorrection,\n            colonne2TabCorrection,\n          )\n      }\n\n      this.listeQuestions.push(texte)\n      this.listeCorrections.push(texteCorr)\n      i++\n    }\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","dateDeModifImportante","uuid","refs","PatternIteratif","Exercice","__publicField","listePatternsSansRatioNiFraction","maxNumPattern","destroy","listePatternReference","angle","listePattern","gestionnaireFormulaireTexte","enleveDoublonNum","completerNombresUniques","listePreDef","shuffle","nbFigures","contraindreValeur","typesQuestionsInitiales","range1","typesQuestions","indexInteractif","compteOccurences","remplaceDansTableau","randint","objetsCorr","pat","pattern","VisualPattern3D","VisualPattern","xminCorr","yminCorr","xmaxCorr","ymaxCorr","shapeCubeIso","figureCorr","context","cell","px","py","project3dIso","obj","cubeDef","cadre","polygone","point","pat2D","shape","listeShapes2DInfos","rendered","yMax","yMin","texte","figures","j","xmin","ymin","xmax","ymax","listeners","updateCubeIso","fixeBordures","texteParPosition","fig","index","mathalea2d","texteCorr","listeQuestions","listeCorrections","infosShape","complementCorrection","delta","b","explain","colonne1TabCorrection","colonne2TabCorrection","indice","miseEnEvidence","bleuMathalea","q","numeroMotif","nbFormes","nbTex","texNombre","ajouteQuestionMathlive","createList","areSameArray","tableauColonneLigne"],"mappings":"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"}