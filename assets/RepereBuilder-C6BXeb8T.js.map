{"version":3,"file":"RepereBuilder-C6BXeb8T.js","sources":["../../src/lib/2d/RepereBuilder.ts"],"sourcesContent":["import { arrondi } from '../outils/nombres'\nimport { Repere } from './reperes'\ntype LAbel = {\n  valeur: number\n  texte: string\n}\n/**\n * exemple : const repere = new RepereBuilder({xMin: -5, xMax:5, yMin: -3, yMax: 3}).setUniteX(1).setUniteY(2).buildCustom()\n */\nexport default class RepereBuilder {\n  xMin: number\n  xMax: number\n  yMin: number\n  yMax: number\n  private yThickDistance: number = 1\n  private xThickDistance: number = 1\n  private xThickMax: number = 10\n  private xThickMin: number = -10\n  private yThickMax: number = 10\n  private yThickMin: number = -10\n  private xUnite: number = 1\n  private yUnite: number = 1\n  private grilleX: boolean | 'pointilles' = true\n  private grilleXDistance: number = 1\n  private grilleXMin: number = -10\n  private grilleXMax: number = 10\n  private grilleY: boolean | 'pointilles' = true\n  private grilleYDistance: number = 1\n  private grilleYMin: number = -10\n  private grilleYMax: number = 10\n  private grilleSecondaireX: boolean | 'pointilles' = false\n  private grilleSecondaireXDistance: number = 1\n  private grilleSecondaireXMin: number = -10\n  private grilleSecondaireXMax: number = 10\n  private grilleSecondaireY: boolean | 'pointilles' = false\n  private grilleSecondaireYDistance: number = 1\n  private grilleSecondaireYMin: number = -10\n  private grilleSecondaireYMax: number = 10\n  private axesEpaisseur: number = 1\n  private thickEpaisseur: number = 1\n  private xLabelMax: number = 10\n  private xLabelMin: number = -10\n  private xLabelDistance: number = 1\n  private yLabelMax: number = 10\n  private yLabelMin: number = -10\n  private yLabelDistance: number = 1\n  private xLabelListe: number[] | { valeur: number; texte: string }[] = []\n  private yLabelListe: number[] | { valeur: number; texte: string }[] = []\n  private thickHauteur: number = 0.13\n  private axesCouleur: string = 'black'\n  axeXStyle: string = '->'\n  axeYStyle: string = '->'\n  xLabelEcart: number = 0.5\n  yLabelEcart: number = 0.5\n  xThickListe?: boolean | number[] = true\n  yThickListe?: boolean | number[] = true\n  grilleCouleur?: string\n  grilleOpacite?: number\n  grilleSecondaireCouleur?: string\n\n  /**\n   * Le constructeur de l'objet RepereBuilder. Les paramètres à fournir sont minimales. Le reste est à configurer via les setters et l'instanciation du repère se fait à travers les builders exposés.\n   * @param {number} xMin\n   * @param {number} xMax\n   * @param {number} yMin\n   * @param {number} yMax\n   */\n  constructor(\n    {\n      xMin,\n      xMax,\n      yMin,\n      yMax,\n    }: { xMin: number; xMax: number; yMin: number; yMax: number } = {\n      xMin: -10,\n      xMax: 10,\n      yMin: -10,\n      yMax: 10,\n    },\n  ) {\n    this.xMin = xMin ?? -10\n    this.xMax = xMax ?? 10\n    this.yMin = yMin ?? -10\n    this.yMax = yMax ?? 10\n    this.grilleX = false\n    this.grilleY = false\n    this.grilleSecondaireX = false\n    this.grilleSecondaireY = false\n    this.axesEpaisseur = 1\n    this.thickEpaisseur = 1.2\n  }\n\n  /**\n   * méthode qui retourne l'objet Repere construit est invoquée par les méthodes buildCustom() et buildStandard() qui elles sont exposées.\n   * @private\n   */\n  private build() {\n    return new Repere({\n      xMin: this.xMin,\n      xMax: this.xMax,\n      yMin: this.yMin,\n      yMax: this.yMax,\n      xUnite: this.xUnite,\n      yUnite: this.yUnite,\n      xThickDistance: this.xThickDistance,\n      yThickDistance: this.yThickDistance,\n      yThickMin: this.yThickMin,\n      yThickMax: this.yThickMax,\n      xThickMin: this.xThickMin,\n      xThickMax: this.xThickMax,\n      grilleX: this.grilleX,\n      grilleXMin: this.grilleXMin,\n      grilleXMax: this.grilleXMax,\n      grilleXDistance: this.grilleXDistance,\n      grilleY: this.grilleY,\n      grilleYMin: this.grilleYMin,\n      grilleYMax: this.grilleYMax,\n      grilleYDistance: this.grilleYDistance,\n      grilleSecondaireX: this.grilleSecondaireX,\n      grilleSecondaireXMin: this.grilleSecondaireXMin,\n      grilleSecondaireXMax: this.grilleSecondaireXMax,\n      grilleSecondaireXDistance: this.grilleSecondaireXDistance,\n      grilleSecondaireY: this.grilleSecondaireY,\n      grilleSecondaireYMin: this.grilleSecondaireYMin,\n      grilleSecondaireYMax: this.grilleSecondaireYMax,\n      grilleSecondaireYDistance: this.grilleSecondaireYDistance,\n      axesEpaisseur: this.axesEpaisseur,\n      thickEpaisseur: this.thickEpaisseur,\n      xLabelMin: this.xLabelMin,\n      xLabelMax: this.xLabelMax,\n      xLabelDistance: this.xLabelDistance,\n      yLabelMin: this.yLabelMin,\n      yLabelMax: this.yLabelMax,\n      yLabelDistance: this.yLabelDistance,\n      xLabelListe: this.xLabelListe,\n      yLabelListe: this.yLabelListe,\n      axeXisVisible: true,\n      axeYisVisible: true,\n      axesCouleur: 'black',\n      axeXStyle: this.axeXStyle,\n      axeYStyle: this.axeYStyle,\n      grilleXOpacite: 0.4,\n      grilleYOpacite: 0.4,\n      grilleSecondaireXOpacite: 0.3,\n      grilleSecondaireYOpacite: 0.3,\n\n      thickHauteur: 0.13,\n      thickCouleur: this.axesCouleur,\n      xThickListe: this.xThickListe ?? false,\n      yThickListe: this.yThickListe ?? false,\n      precisionLabelX: 1,\n      precisionLabelY: 1,\n      xLabelEcart: this.xLabelEcart,\n      yLabelEcart: this.yLabelEcart,\n      xLegende: '',\n      xLegendePosition: [],\n      yLegende: '',\n      yLegendePosition: [],\n      grille: true,\n      grilleDistance: 1,\n      grilleCouleur: 'black',\n      grilleOpacite: 0.4,\n      grilleEpaisseur: 1,\n      grilleSecondaire: false,\n      grilleSecondaireDistance: 1,\n      grilleSecondaireCouleur: 'gray',\n      grilleSecondaireOpacite: 0.3,\n      grilleSecondaireEpaisseur: 1,\n      grilleXListe: [],\n      grilleXCouleur: this.grilleCouleur ?? 'gray',\n      grilleYListe: [],\n      grilleYCouleur: this.grilleCouleur ?? 'gray',\n      grilleSecondaireXListe: [],\n      grilleSecondaireXCouleur: this.grilleSecondaireCouleur ?? 'lightgray',\n      grilleSecondaireYListe: [],\n      grilleSecondaireYCouleur: this.grilleSecondaireCouleur ?? 'lightgray',\n    })\n  }\n\n  /**\n   * Un build avec des axes à coordonnées entières\n   */\n  buildStandard() {\n    this.xUnite = 1\n    this.yUnite = 1\n    this.xThickDistance = 1\n    this.yThickDistance = 1\n    return this.build()\n  }\n\n  /**\n   * Un build libre pour faire ce qu'on veut\n   */\n  buildCustom() {\n    return this.build()\n  }\n\n  /**\n   * Un build pour la trigo\n   * @param {number} n diviseur de Pi pour graduer l'axe des abscisses.\n   */\n  buildTrigo(n: number) {\n    const labels = []\n    let i = 0\n    for (let x = 0; x < this.xLabelMax; x += Math.PI / n) {\n      if (x !== 0) {\n        labels.push({\n          valeur: arrondi(x, 2),\n          texte: `\\\\frac{${i > 1 ? i.toString() : ''}\\\\Pi}{${n}}`,\n        })\n      }\n      i++\n    }\n    i = 0\n    for (let x = 0; x > this.xLabelMin; x -= Math.PI / n) {\n      if (x !== 0) {\n        labels.push({\n          valeur: arrondi(x, 2),\n          texte: `\\\\frac{${i < -1 ? i.toString() : '-'}\\\\Pi}{${n}}`,\n        })\n      }\n      i--\n    }\n    this.xLabelListe = labels\n    return this.build()\n  }\n\n  /**\n   * méthode pour fixer l'échelle en x\n   * @param {number} u l'échelle (1 par défaut)\n   */\n  setUniteX(u: number) {\n    this.xUnite = u\n    return this\n  }\n\n  /**\n   * méthode pour fixer l'échelle en y\n   * @param {number} u l'échelle (1 par défaut)\n   */\n  setUniteY(u: number) {\n    this.yUnite = u\n    return this\n  }\n\n  /**\n   * méthode pour paramétrer les graduations sur l'axe des abscisses\n   * @param {number} xMax la première\n   * @param {number} xMin la dernière\n   * @param {number} dx la distance entre deux graduations\n   */\n  setThickX({ xMax, xMin, dx }: { xMax: number; xMin: number; dx: number }) {\n    this.xThickDistance = dx\n    this.xThickMin = xMin\n    this.xThickMax = xMax\n    return this\n  }\n\n  /**\n   * méthode pour paramétrer les graduations sur l'axe des ordonnées\n   * @param {number} yMax la première\n   * @param {number} yMin la dernière\n   * @param {number} dy la distance entre deux graduations\n   */\n  setThickY({ yMax, yMin, dy }: { yMax: number; yMin: number; dy: number }) {\n    this.yThickDistance = dy\n    this.yThickMin = yMin\n    this.yThickMax = yMax\n    return this\n  }\n\n  /**\n   * méthode pour paramétrer la grille principale\n   * @param {{dx: number, xMin: number, xMax: number, style: string}} grilleX\n   * @param {{dy: number, yMin: number, yMax: number, style: string}} grilleY\n   */\n  setGrille({\n    grilleX,\n    grilleY,\n  }: {\n    grilleX: { dx: number; xMin?: number; xMax?: number; style?: 'pointilles' }\n    grilleY: { dy: number; yMin?: number; yMax?: number; style?: 'pointilles' }\n  }) {\n    if (grilleX) {\n      this.grilleX = grilleX.style ? grilleX.style : true\n      this.grilleXDistance = grilleX.dx ?? 1\n      this.grilleXMin = grilleX.xMin ?? this.xMin\n      this.grilleXMax = grilleX.xMax ?? this.xMax\n    } else this.grilleX = false\n    if (grilleY) {\n      this.grilleY = grilleY.style ? grilleY.style : true\n      this.grilleYDistance = grilleY.dy ?? 1\n      this.grilleYMin = grilleY.yMin ?? this.yMin\n      this.grilleYMax = grilleY.yMax ?? this.yMax\n    } else this.grilleY = false\n    return this\n  }\n\n  /**\n   * méthode pour paramétrer la grille secondaire\n   * @param {{dx: number, xMin: number, xMax: number}} grilleX\n   * @param {{dy: number, yMin: number, yMax: number}} grilleY\n   */\n  setGrilleSecondaire({\n    grilleX,\n    grilleY,\n  }: {\n    grilleX: { dx: number; xMin?: number; xMax?: number; style?: 'pointilles' }\n    grilleY: { dy: number; yMin?: number; yMax?: number; style?: 'pointilles' }\n  }) {\n    if (grilleX) {\n      this.grilleSecondaireX = grilleX.style ? grilleX.style : true\n      this.grilleSecondaireXDistance = grilleX.dx ?? 1\n      this.grilleSecondaireXMin = grilleX.xMin ?? this.xMin\n      this.grilleSecondaireXMax = grilleX.xMax ?? this.xMax\n    } else this.grilleSecondaireX = false\n    if (grilleY) {\n      this.grilleSecondaireY = grilleY.style ? grilleY.style : true\n      this.grilleSecondaireYDistance = grilleY.dy ?? 1\n      this.grilleSecondaireYMin = grilleY.yMin ?? this.yMin\n      this.grilleSecondaireYMax = grilleY.yMax ?? this.yMax\n    } else this.grilleSecondaireY = false\n    return this\n  }\n\n  /**\n   * méthode pour paramétrer les labels sur l'axe des abscisses\n   * @param {number} dx distance entre deux labels\n   * @param {number} xMin le premier\n   * @param {number} xMax le dernier\n   */\n  setLabelX({ dx, xMin, xMax }: { xMax?: number; xMin?: number; dx: number }) {\n    this.xLabelMin = xMin ?? this.xMin\n    this.xLabelMax = xMax ?? this.xMax\n    this.xLabelDistance = dx\n    return this\n  }\n\n  /**\n   * méthode pour paramétrer les labels sur l'axe des ordonnées\n   * @param {number} dy distance entre deux labels\n   * @param {number} yMin le premier\n   * @param {number} yMax le dernier\n   */\n  setLabelY({ dy, yMin, yMax }: { yMax?: number; yMin?: number; dy: number }) {\n    this.yLabelMin = yMin ?? this.yMin\n    this.yLabelMax = yMax ?? this.yMax\n    this.yLabelDistance = dy\n    return this\n  }\n\n  /**\n   * Une méthode pour renseigner des labels non standards\n   * @param {{valeur: number, texte: string}[]} labels un array de valeurs et leurs traduction en latex\n   */\n  setLabelsX(labels: LAbel[]) {\n    this.xLabelListe = labels\n    return this\n  }\n\n  /**\n   * Une méthode pour renseigner des labels non standards\n   * @param {{valeur: number, texte: string}[]} labels un array de valeurs et leurs traduction en latex\n   */\n  setLabelsY(labels: LAbel[]) {\n    this.yLabelListe = labels\n    return this\n  }\n}\n"],"names":["RepereBuilder","xMin","xMax","yMin","yMax","__publicField","Repere","n","labels","i","x","arrondi","u","dx","dy","grilleX","grilleY"],"mappings":"sPASA,MAAqBA,CAAc,CA0DjC,YACE,CACE,KAAAC,EACA,KAAAC,EACA,KAAAC,EACA,KAAAC,CAAA,EAC8D,CAC9D,KAAM,IACN,KAAM,GACN,KAAM,IACN,KAAM,EAAA,EAER,CArEFC,EAAA,aACAA,EAAA,aACAA,EAAA,aACAA,EAAA,aACQA,EAAA,sBAAyB,GACzBA,EAAA,sBAAyB,GACzBA,EAAA,iBAAoB,IACpBA,EAAA,iBAAoB,KACpBA,EAAA,iBAAoB,IACpBA,EAAA,iBAAoB,KACpBA,EAAA,cAAiB,GACjBA,EAAA,cAAiB,GACjBA,EAAA,eAAkC,IAClCA,EAAA,uBAA0B,GAC1BA,EAAA,kBAAqB,KACrBA,EAAA,kBAAqB,IACrBA,EAAA,eAAkC,IAClCA,EAAA,uBAA0B,GAC1BA,EAAA,kBAAqB,KACrBA,EAAA,kBAAqB,IACrBA,EAAA,yBAA4C,IAC5CA,EAAA,iCAAoC,GACpCA,EAAA,4BAA+B,KAC/BA,EAAA,4BAA+B,IAC/BA,EAAA,yBAA4C,IAC5CA,EAAA,iCAAoC,GACpCA,EAAA,4BAA+B,KAC/BA,EAAA,4BAA+B,IAC/BA,EAAA,qBAAwB,GACxBA,EAAA,sBAAyB,GACzBA,EAAA,iBAAoB,IACpBA,EAAA,iBAAoB,KACpBA,EAAA,sBAAyB,GACzBA,EAAA,iBAAoB,IACpBA,EAAA,iBAAoB,KACpBA,EAAA,sBAAyB,GACzBA,EAAA,mBAA8D,CAAA,GAC9DA,EAAA,mBAA8D,CAAA,GAC9DA,EAAA,oBAAuB,KACvBA,EAAA,mBAAsB,SAC9BA,EAAA,iBAAoB,MACpBA,EAAA,iBAAoB,MACpBA,EAAA,mBAAsB,IACtBA,EAAA,mBAAsB,IACtBA,EAAA,mBAAmC,IACnCA,EAAA,mBAAmC,IACnCA,EAAA,sBACAA,EAAA,sBACAA,EAAA,gCAsBE,KAAK,KAAOJ,GAAQ,IACpB,KAAK,KAAOC,GAAQ,GACpB,KAAK,KAAOC,GAAQ,IACpB,KAAK,KAAOC,GAAQ,GACpB,KAAK,QAAU,GACf,KAAK,QAAU,GACf,KAAK,kBAAoB,GACzB,KAAK,kBAAoB,GACzB,KAAK,cAAgB,EACrB,KAAK,eAAiB,GACxB,CAMQ,OAAQ,CACd,OAAO,IAAIE,EAAO,CAChB,KAAM,KAAK,KACX,KAAM,KAAK,KACX,KAAM,KAAK,KACX,KAAM,KAAK,KACX,OAAQ,KAAK,OACb,OAAQ,KAAK,OACb,eAAgB,KAAK,eACrB,eAAgB,KAAK,eACrB,UAAW,KAAK,UAChB,UAAW,KAAK,UAChB,UAAW,KAAK,UAChB,UAAW,KAAK,UAChB,QAAS,KAAK,QACd,WAAY,KAAK,WACjB,WAAY,KAAK,WACjB,gBAAiB,KAAK,gBACtB,QAAS,KAAK,QACd,WAAY,KAAK,WACjB,WAAY,KAAK,WACjB,gBAAiB,KAAK,gBACtB,kBAAmB,KAAK,kBACxB,qBAAsB,KAAK,qBAC3B,qBAAsB,KAAK,qBAC3B,0BAA2B,KAAK,0BAChC,kBAAmB,KAAK,kBACxB,qBAAsB,KAAK,qBAC3B,qBAAsB,KAAK,qBAC3B,0BAA2B,KAAK,0BAChC,cAAe,KAAK,cACpB,eAAgB,KAAK,eACrB,UAAW,KAAK,UAChB,UAAW,KAAK,UAChB,eAAgB,KAAK,eACrB,UAAW,KAAK,UAChB,UAAW,KAAK,UAChB,eAAgB,KAAK,eACrB,YAAa,KAAK,YAClB,YAAa,KAAK,YAClB,cAAe,GACf,cAAe,GACf,YAAa,QACb,UAAW,KAAK,UAChB,UAAW,KAAK,UAChB,eAAgB,GAChB,eAAgB,GAChB,yBAA0B,GAC1B,yBAA0B,GAE1B,aAAc,IACd,aAAc,KAAK,YACnB,YAAa,KAAK,aAAe,GACjC,YAAa,KAAK,aAAe,GACjC,gBAAiB,EACjB,gBAAiB,EACjB,YAAa,KAAK,YAClB,YAAa,KAAK,YAClB,SAAU,GACV,iBAAkB,CAAA,EAClB,SAAU,GACV,iBAAkB,CAAA,EAClB,OAAQ,GACR,eAAgB,EAChB,cAAe,QACf,cAAe,GACf,gBAAiB,EACjB,iBAAkB,GAClB,yBAA0B,EAC1B,wBAAyB,OACzB,wBAAyB,GACzB,0BAA2B,EAC3B,aAAc,CAAA,EACd,eAAgB,KAAK,eAAiB,OACtC,aAAc,CAAA,EACd,eAAgB,KAAK,eAAiB,OACtC,uBAAwB,CAAA,EACxB,yBAA0B,KAAK,yBAA2B,YAC1D,uBAAwB,CAAA,EACxB,yBAA0B,KAAK,yBAA2B,WAAA,CAC3D,CACH,CAKA,eAAgB,CACd,YAAK,OAAS,EACd,KAAK,OAAS,EACd,KAAK,eAAiB,EACtB,KAAK,eAAiB,EACf,KAAK,MAAA,CACd,CAKA,aAAc,CACZ,OAAO,KAAK,MAAA,CACd,CAMA,WAAWC,EAAW,CACpB,MAAMC,EAAS,CAAA,EACf,IAAIC,EAAI,EACR,QAASC,EAAI,EAAGA,EAAI,KAAK,UAAWA,GAAK,KAAK,GAAKH,EAC7CG,IAAM,GACRF,EAAO,KAAK,CACV,OAAQG,EAAQD,EAAG,CAAC,EACpB,MAAO,UAAUD,EAAI,EAAIA,EAAE,SAAA,EAAa,EAAE,SAASF,CAAC,GAAA,CACrD,EAEHE,IAEFA,EAAI,EACJ,QAASC,EAAI,EAAGA,EAAI,KAAK,UAAWA,GAAK,KAAK,GAAKH,EAC7CG,IAAM,GACRF,EAAO,KAAK,CACV,OAAQG,EAAQD,EAAG,CAAC,EACpB,MAAO,UAAUD,EAAI,GAAKA,EAAE,SAAA,EAAa,GAAG,SAASF,CAAC,GAAA,CACvD,EAEHE,IAEF,YAAK,YAAcD,EACZ,KAAK,MAAA,CACd,CAMA,UAAUI,EAAW,CACnB,YAAK,OAASA,EACP,IACT,CAMA,UAAUA,EAAW,CACnB,YAAK,OAASA,EACP,IACT,CAQA,UAAU,CAAE,KAAAV,EAAM,KAAAD,EAAM,GAAAY,GAAkD,CACxE,YAAK,eAAiBA,EACtB,KAAK,UAAYZ,EACjB,KAAK,UAAYC,EACV,IACT,CAQA,UAAU,CAAE,KAAAE,EAAM,KAAAD,EAAM,GAAAW,GAAkD,CACxE,YAAK,eAAiBA,EACtB,KAAK,UAAYX,EACjB,KAAK,UAAYC,EACV,IACT,CAOA,UAAU,CACR,QAAAW,EACA,QAAAC,CAAA,EAIC,CACD,OAAID,GACF,KAAK,QAAUA,EAAQ,MAAQA,EAAQ,MAAQ,GAC/C,KAAK,gBAAkBA,EAAQ,IAAM,EACrC,KAAK,WAAaA,EAAQ,MAAQ,KAAK,KACvC,KAAK,WAAaA,EAAQ,MAAQ,KAAK,WAC7B,QAAU,GAClBC,GACF,KAAK,QAAUA,EAAQ,MAAQA,EAAQ,MAAQ,GAC/C,KAAK,gBAAkBA,EAAQ,IAAM,EACrC,KAAK,WAAaA,EAAQ,MAAQ,KAAK,KACvC,KAAK,WAAaA,EAAQ,MAAQ,KAAK,WAC7B,QAAU,GACf,IACT,CAOA,oBAAoB,CAClB,QAAAD,EACA,QAAAC,CAAA,EAIC,CACD,OAAID,GACF,KAAK,kBAAoBA,EAAQ,MAAQA,EAAQ,MAAQ,GACzD,KAAK,0BAA4BA,EAAQ,IAAM,EAC/C,KAAK,qBAAuBA,EAAQ,MAAQ,KAAK,KACjD,KAAK,qBAAuBA,EAAQ,MAAQ,KAAK,WACvC,kBAAoB,GAC5BC,GACF,KAAK,kBAAoBA,EAAQ,MAAQA,EAAQ,MAAQ,GACzD,KAAK,0BAA4BA,EAAQ,IAAM,EAC/C,KAAK,qBAAuBA,EAAQ,MAAQ,KAAK,KACjD,KAAK,qBAAuBA,EAAQ,MAAQ,KAAK,WACvC,kBAAoB,GACzB,IACT,CAQA,UAAU,CAAE,GAAAH,EAAI,KAAAZ,EAAM,KAAAC,GAAsD,CAC1E,YAAK,UAAYD,GAAQ,KAAK,KAC9B,KAAK,UAAYC,GAAQ,KAAK,KAC9B,KAAK,eAAiBW,EACf,IACT,CAQA,UAAU,CAAE,GAAAC,EAAI,KAAAX,EAAM,KAAAC,GAAsD,CAC1E,YAAK,UAAYD,GAAQ,KAAK,KAC9B,KAAK,UAAYC,GAAQ,KAAK,KAC9B,KAAK,eAAiBU,EACf,IACT,CAMA,WAAWN,EAAiB,CAC1B,YAAK,YAAcA,EACZ,IACT,CAMA,WAAWA,EAAiB,CAC1B,YAAK,YAAcA,EACZ,IACT,CACF"}