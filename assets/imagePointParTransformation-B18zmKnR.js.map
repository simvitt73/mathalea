{"version":3,"file":"imagePointParTransformation-B18zmKnR.js","sources":["../../src/modules/imagePointParTransformation.ts"],"sourcesContent":["import { Matrice, matrice } from '../lib/mathFonctions/Matrice'\nexport type TransformationsIndex =\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 11\n  | 12\n  | 13\n  | 14\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\nexport function isTransformationsIndex(\n  obj: unknown,\n): obj is TransformationsIndex {\n  if (typeof obj !== 'number') return false\n  if (!Number.isInteger(obj)) return false\n  return obj >= 1 && obj <= 14\n}\n/**\n * Description\n * @param {any} transformation Entier déterminant la transformation voulue\n **1=symétrie / passant par O\n **2=symétrie \\ passant par O\n **3=symétrie _ passant par O\n **4=symétrie | passant par O\n **5= rotation 90° anti-horaire centre O\n **6= rotation 90° horaire centre O\n **7= symétrie centrale centre O\n **11= rotation 60° anti-horaire centre O\n **12= rotation 60° horaire centre O\n **13= rotation 120° anti-horaire centre O\n **14= rotation 120° horaire centre O\n **8= translation coordonnées de O = vecteur de translation\n **9= homothétie. centre O rapport k\n **10= homothétie. centre O rapport 1/k\n * @param {any} pointA Point dont on cherche l'image\n * @param {any} pointO Centre du repère local pour les symétries, centre pour les rotations et les homothéties\n * @param {any} vecteur=[] Vecteur de la translation\n * @param {number} rapport=1 rapport d'homothétie\n * @author Jean-Claude Lhote\n * @returns {number[]} Le point résultat\n */\nexport function imagePointParTransformation(\n  transformation: TransformationsIndex,\n  pointA: [number, number],\n  pointO: [number, number],\n  vecteur = [0, 0],\n  rapport = 1,\n): [number, number] {\n  // pointA,centre et pointO sont des tableaux de deux coordonnées\n  // on les rends homogènes en ajoutant un 1 comme 3ème coordonnée)\n  // nécessite d'être en repère orthonormal...\n  // Point O sert pour les rotations et homothéties en tant que centre (il y a un changement d'origine du repère en O pour simplifier l'expression des matrices de transformations.)\n\n  if (pointA.length === 2) pointA.push(1)\n  const x2 = pointO[0] // Point O' (origine du repère dans lequel les transformations sont simples (centre des rotations et point d'intersection des axes))\n  const y2 = pointO[1]\n  const u = vecteur[0] // (u,v) vecteur de translation.\n  const v = vecteur[1]\n  const k = rapport // rapport d'homothétie\n\n  const matriceChangementDeRepere = matrice([\n    [1, 0, x2],\n    [0, 1, y2],\n    [0, 0, 1],\n  ])\n  const matriceChangementDeRepereInv = matrice([\n    [1, 0, -x2],\n    [0, 1, -y2],\n    [0, 0, 1],\n  ])\n\n  let maMatrice\n  switch (transformation) {\n    case 1:\n      {\n        // Symétrie par rapport à la première bissectrice\n        const matriceSymObl1 = matrice([\n          [0, 1, 0],\n          [1, 0, 0],\n          [0, 0, 1],\n        ]) // x'=y et y'=x\n        maMatrice = matriceSymObl1!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 2:\n      {\n        // symétrie par rapport à la deuxième bissectrice\n        const matriceSymObl2 = matrice([\n          [0, -1, 0],\n          [-1, 0, 0],\n          [0, 0, 1],\n        ]) // x'=-y et y'=-x\n        maMatrice = matriceSymObl2!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 3:\n      {\n        // Symétrie par rapport à l'axe des abscisses\n        const matriceSymxxprime = matrice([\n          [1, 0, 0],\n          [0, -1, 0],\n          [0, 0, 1],\n        ]) // x'=x et y'=-y\n        maMatrice = matriceSymxxprime!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 4:\n      {\n        // symétrie par rapport à l'axe des ordonnées\n        const matriceSymYyPrime = matrice([\n          [-1, 0, 0],\n          [0, 1, 0],\n          [0, 0, 1],\n        ]) // x'=-x et y'=y\n        maMatrice = matriceSymYyPrime!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 5:\n      {\n        // rotation 90 direct\n        const matriceQuartDeTourDirect = matrice([\n          [0, -1, 0],\n          [1, 0, 0],\n          [0, 0, 1],\n        ]) // x'=-y et y'=x\n        maMatrice = matriceQuartDeTourDirect!.multiply(\n          matriceChangementDeRepereInv,\n        )\n      }\n      break\n    case 6:\n      {\n        // rotation quart de tour indirect\n        const matriceQuartDeTourIndirect = matrice([\n          [0, 1, 0],\n          [-1, 0, 0],\n          [0, 0, 1],\n        ]) // x'=y et y'=-x\n        maMatrice = matriceQuartDeTourIndirect!.multiply(\n          matriceChangementDeRepereInv,\n        )\n      }\n      break\n    case 7:\n      {\n        // symétrie centrale\n        const matriceSymCentrale = matrice([\n          [-1, 0, 0],\n          [0, -1, 0],\n          [0, 0, 1],\n        ]) // x'=-x et y'=-y\n        maMatrice = matriceSymCentrale.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 11:\n      {\n        // rotation 60° direct\n        const matriceRotation60Direct = matrice([\n          [0.5, -Math.sin(Math.PI / 3), 0],\n          [Math.sin(Math.PI / 3), 0.5, 0],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceRotation60Direct.multiply(\n          matriceChangementDeRepereInv,\n        )\n      }\n      break\n    case 12:\n      {\n        // rotation 60° indirect\n        const matriceRotation60Indirect = matrice([\n          [0.5, Math.sin(Math.PI / 3), 0],\n          [-Math.sin(Math.PI / 3), 0.5, 0],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceRotation60Indirect.multiply(\n          matriceChangementDeRepereInv,\n        )\n      }\n      break\n    case 13:\n      {\n        // rotation 120° direct\n        const matriceRotation120Direct = matrice([\n          [-0.5, -Math.sin(Math.PI / 3), 0],\n          [Math.sin(Math.PI / 3), -0.5, 0],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceRotation120Direct!.multiply(\n          matriceChangementDeRepereInv,\n        )\n      }\n      break\n    case 14:\n      {\n        // rotation 120° indirect\n        const matriceRotation120Indirect = matrice([\n          [-0.5, Math.sin(Math.PI / 3), 0],\n          [-Math.sin(Math.PI / 3), -0.5, 0],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceRotation120Indirect!.multiply(\n          matriceChangementDeRepereInv,\n        )\n      }\n      break\n    case 8:\n      {\n        // translation\n        const matriceTranslation = matrice([\n          [1, 0, u],\n          [0, 1, v],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceTranslation!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 9:\n      {\n        // homothétie rapport entier\n        const matriceHomothetie = matrice([\n          [k, 0, 0],\n          [0, k, 0],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceHomothetie!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n    case 10:\n      {\n        // homothetie rapport inverse d'entier\n        const matriceHomothetie2 = matrice([\n          [1 / k, 0, 0],\n          [0, 1 / k, 0],\n          [0, 0, 1],\n        ])\n        maMatrice = matriceHomothetie2!.multiply(matriceChangementDeRepereInv)\n      }\n      break\n  }\n  const pointA1 = (maMatrice! as Matrice).multiply(pointA)\n  const pointA2 = matriceChangementDeRepere.multiply(pointA1)\n  return typeof (pointA2 as any).toArray === 'function'\n    ? ((pointA2 as any).toArray().slice(0, 2) as [number, number])\n    : Array.isArray(pointA2)\n      ? (pointA2.slice(0, 2) as [number, number])\n      : [0, 0]\n}\n"],"names":["imagePointParTransformation","transformation","pointA","pointO","vecteur","rapport","x2","y2","u","v","k","matriceChangementDeRepere","matrice","matriceChangementDeRepereInv","maMatrice","pointA1","pointA2"],"mappings":"0CAmDO,SAASA,EACdC,EACAC,EACAC,EACAC,EAAU,CAAC,EAAG,CAAC,EACfC,EAAU,EACQ,CAMdH,EAAO,SAAW,GAAGA,EAAO,KAAK,CAAC,EACtC,MAAMI,EAAKH,EAAO,CAAC,EACbI,EAAKJ,EAAO,CAAC,EACbK,EAAIJ,EAAQ,CAAC,EACbK,EAAIL,EAAQ,CAAC,EACbM,EAAIL,EAEJM,EAA4BC,EAAQ,CACxC,CAAC,EAAG,EAAGN,CAAE,EACT,CAAC,EAAG,EAAGC,CAAE,EACT,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACKM,EAA+BD,EAAQ,CAC3C,CAAC,EAAG,EAAG,CAACN,CAAE,EACV,CAAC,EAAG,EAAG,CAACC,CAAE,EACV,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAED,IAAIO,EACJ,OAAQb,EAAA,CACN,IAAK,GAQDa,EALuBF,EAAQ,CAC7B,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC2B,SAASC,CAA4B,EAEnE,MACF,IAAK,GAQDC,EALuBF,EAAQ,CAC7B,CAAC,EAAG,GAAI,CAAC,EACT,CAAC,GAAI,EAAG,CAAC,EACT,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC2B,SAASC,CAA4B,EAEnE,MACF,IAAK,GAQDC,EAL0BF,EAAQ,CAChC,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,GAAI,CAAC,EACT,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC8B,SAASC,CAA4B,EAEtE,MACF,IAAK,GAQDC,EAL0BF,EAAQ,CAChC,CAAC,GAAI,EAAG,CAAC,EACT,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC8B,SAASC,CAA4B,EAEtE,MACF,IAAK,GAQDC,EALiCF,EAAQ,CACvC,CAAC,EAAG,GAAI,CAAC,EACT,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACqC,SACpCC,CAAA,EAGJ,MACF,IAAK,GAQDC,EALmCF,EAAQ,CACzC,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,GAAI,EAAG,CAAC,EACT,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACuC,SACtCC,CAAA,EAGJ,MACF,IAAK,GAQDC,EAL2BF,EAAQ,CACjC,CAAC,GAAI,EAAG,CAAC,EACT,CAAC,EAAG,GAAI,CAAC,EACT,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC8B,SAASC,CAA4B,EAEtE,MACF,IAAK,IAQDC,EALgCF,EAAQ,CACtC,CAAC,GAAK,CAAC,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,CAAC,EAC/B,CAAC,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,GAAK,CAAC,EAC9B,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACmC,SAClCC,CAAA,EAGJ,MACF,IAAK,IAQDC,EALkCF,EAAQ,CACxC,CAAC,GAAK,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,CAAC,EAC9B,CAAC,CAAC,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,GAAK,CAAC,EAC/B,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACqC,SACpCC,CAAA,EAGJ,MACF,IAAK,IAQDC,EALiCF,EAAQ,CACvC,CAAC,IAAM,CAAC,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,CAAC,EAChC,CAAC,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,IAAM,CAAC,EAC/B,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACqC,SACpCC,CAAA,EAGJ,MACF,IAAK,IAQDC,EALmCF,EAAQ,CACzC,CAAC,IAAM,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,CAAC,EAC/B,CAAC,CAAC,KAAK,IAAI,KAAK,GAAK,CAAC,EAAG,IAAM,CAAC,EAChC,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EACuC,SACtCC,CAAA,EAGJ,MACF,IAAK,GAQDC,EAL2BF,EAAQ,CACjC,CAAC,EAAG,EAAGJ,CAAC,EACR,CAAC,EAAG,EAAGC,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC+B,SAASI,CAA4B,EAEvE,MACF,IAAK,GAQDC,EAL0BF,EAAQ,CAChC,CAACF,EAAG,EAAG,CAAC,EACR,CAAC,EAAGA,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC8B,SAASG,CAA4B,EAEtE,MACF,IAAK,IAQDC,EAL2BF,EAAQ,CACjC,CAAC,EAAIF,EAAG,EAAG,CAAC,EACZ,CAAC,EAAG,EAAIA,EAAG,CAAC,EACZ,CAAC,EAAG,EAAG,CAAC,CAAA,CACT,EAC+B,SAASG,CAA4B,EAEvE,KAAA,CAEJ,MAAME,EAAWD,EAAuB,SAASZ,CAAM,EACjDc,EAAUL,EAA0B,SAASI,CAAO,EAC1D,OAAO,OAAQC,EAAgB,SAAY,WACrCA,EAAgB,UAAU,MAAM,EAAG,CAAC,EACtC,MAAM,QAAQA,CAAO,EAClBA,EAAQ,MAAM,EAAG,CAAC,EACnB,CAAC,EAAG,CAAC,CACb"}