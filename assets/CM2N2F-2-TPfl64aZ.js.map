{"version":3,"file":"CM2N2F-2-TPfl64aZ.js","sources":["../../src/exercices/CM2/CM2N2F-2.ts"],"sourcesContent":["import { droiteGraduee } from '../../lib/2d/DroiteGraduee'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { remplisLesBlancs } from '../../lib/interactif/questionMathLive'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { lettreIndiceeDepuisChiffre } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { fraction } from '../../modules/fractions'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Lire des abscisses fractionnaires de points (niv 2)'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCOpen'\nexport const dateDePublication = '25/01/2024'\n\n/**\n *  :\n * Lire des abscisses sous forme de fractions avec possibilté d'avoir des fractions simplifiées\n * @author Jean-Claude Lhote à partir de 6N21-1 de Mickaël Guironnet\n */\nexport const uuid = '442f4'\n\nexport const refs = {\n  'fr-fr': ['CM2N2F-2'],\n  'fr-2016': ['6N21-2'],\n  'fr-ch': ['9NO11-6'],\n}\nexport default class LireAbscissesFractionnairesComplexes extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Niveau de difficulté :',\n      3,\n      '1 : Graduation en 1/4, 1/6, 1/8, 1/9, 1/10\\n2 : Graduation en 1/12, 1/14, 1/16, 1/18 et 1/20\\n3 : Mélange',\n    ]\n    this.besoinFormulaire2CaseACocher = ['Avec des fractions simplifiées', true]\n    this.besoinFormulaire3CaseACocher = ['Avec des valeurs négatives', false]\n    this.nbQuestions = 5\n\n    this.sup = 1 // Niveau de difficulté\n    this.sup2 = true // avec des fractions simplifiées\n    this.sup3 = false // valeurs positives si false sinon valeurs positives et négatives\n  }\n\n  nouvelleVersion() {\n    let typeDeQuestions: number[]\n    if (this.sup > 2) {\n      typeDeQuestions = combinaisonListes([0, 1], this.nbQuestions)\n    } else {\n      typeDeQuestions = combinaisonListes(\n        [parseInt(this.sup) - 1],\n        this.nbQuestions,\n      )\n    }\n    const data: Record<\n      number,\n      { id: number; den: number[]; max: number; min: number }\n    > = {\n      4: {\n        id: 4,\n        den: [2, 4],\n        max: !this.sup3 ? 8 : 4,\n        min: !this.sup3 ? 0 : -4,\n      },\n      6: {\n        id: 6,\n        den: [2, 3, 6],\n        max: !this.sup3 ? 6 : 3,\n        min: !this.sup3 ? 0 : -3,\n      },\n      8: {\n        id: 8,\n        den: [2, 4, 8],\n        max: !this.sup3 ? 4 : 2,\n        min: !this.sup3 ? 0 : -2,\n      },\n      9: {\n        id: 9,\n        den: [3, 9],\n        max: !this.sup3 ? 4 : 2,\n        min: !this.sup3 ? 0 : -2,\n      },\n      10: {\n        id: 10,\n        den: [2, 5, 10],\n        max: !this.sup3 ? 4 : 2,\n        min: !this.sup3 ? 0 : -2,\n      },\n      12: {\n        id: 12,\n        den: [2, 3, 4, 6, 12],\n        max: !this.sup3 ? 3 : 2,\n        min: !this.sup3 ? 0 : -1,\n      },\n      14: {\n        id: 14,\n        den: [2, 7, 14],\n        max: !this.sup3 ? 2 : 1,\n        min: !this.sup3 ? 0 : -1,\n      },\n      15: {\n        id: 15,\n        den: [3, 5, 15],\n        max: !this.sup3 ? 2 : 1,\n        min: !this.sup3 ? 0 : -1,\n      },\n      16: {\n        id: 16,\n        den: [2, 4, 8, 16],\n        max: !this.sup3 ? 1 : 1,\n        min: !this.sup3 ? 0 : -1,\n      },\n      18: {\n        id: 18,\n        den: [2, 3, 6, 9, 18],\n        max: !this.sup3 ? 1 : 1,\n        min: !this.sup3 ? 0 : -1,\n      },\n      20: {\n        id: 20,\n        den: [2, 4, 5, 10, 20],\n        max: !this.sup3 ? 1 : 1,\n        min: !this.sup3 ? 0 : -1,\n      },\n    }\n    const tableDisponibles = [\n      [4, 6, 8, 9, 10],\n      [12, 14, 15, 16, 18, 20],\n    ]\n\n    const tableUtilisees: number[][] = [[], []]\n    for (let i = 0, texte, cpt = 0; i < this.nbQuestions && cpt < 50; cpt++) {\n      if (\n        tableDisponibles[typeDeQuestions[i]].length ===\n        tableUtilisees[typeDeQuestions[i]].length\n      ) {\n        tableUtilisees[typeDeQuestions[i]] = []\n      }\n      const tab = choice(\n        tableDisponibles[typeDeQuestions[i]],\n        tableUtilisees[typeDeQuestions[i]],\n      )\n      tableUtilisees[typeDeQuestions[i]].push(tab)\n      const origine = data[tab].min\n\n      const den1 = !this.sup2 ? data[tab].id : choice(data[tab].den)\n      const tab1 = tab / den1\n      const num1 = trouveNumerateur(den1, origine, data[tab].max)\n      const den2 = !this.sup2 ? data[tab].id : choice(data[tab].den, den1)\n      const tab2 = tab / den2\n      const num2 = trouveNumerateur(den2, origine, data[tab].max, [\n        { num: num1, den: den1 },\n      ])\n      const den3 = !this.sup2\n        ? data[tab].id\n        : choice(\n            data[tab].den,\n            data[tab].den.length > 2 ? [den1, den2] : [den1],\n          )\n      const tab3 = tab / den3\n      const num3 = trouveNumerateur(den3, origine, data[tab].max, [\n        { num: num1, den: den1 },\n        { num: num2, den: den2 },\n      ])\n      texte =\n        'Donner les abscisses des points ' +\n        remplisLesBlancs(\n          this,\n          i,\n          `\\\\quad ${lettreIndiceeDepuisChiffre(i * 3 + 1)}\\\\; %{champ1} \\\\quad ${lettreIndiceeDepuisChiffre(i * 3 + 2)} \\\\; %{champ2} \\\\quad ${lettreIndiceeDepuisChiffre(i * 3 + 3)} \\\\;  %{champ3}`,\n          'clavierDeBaseAvecFraction',\n          '\\\\ldots',\n        )\n      handleAnswers(\n        this,\n        i,\n        {\n          bareme: (listePoints) => [\n            listePoints[0] + listePoints[1] + listePoints[2],\n            3,\n          ],\n          champ1: { value: fraction(num1, den1).reduire(tab1 * 2).texFraction },\n          champ2: { value: fraction(num2, den2).reduire(tab2 * 2).texFraction },\n          champ3: { value: fraction(num3, den3).reduire(tab3 * 2).texFraction },\n        },\n        { formatInteractif: 'fillInTheBlank' },\n      )\n\n      const tailleUnite = 20 / (data[tab].max - origine)\n      const d = droiteGraduee({\n        Min: origine,\n        Max: data[tab].max,\n        Unite: tailleUnite,\n        thickSec: true,\n        thickSecDist: 1 / data[tab].id,\n        thickEpaisseur: 3,\n        pointListe: [\n          [num1 / den1, lettreIndiceeDepuisChiffre(i * 3 + 1)],\n          [num2 / den2, lettreIndiceeDepuisChiffre(i * 3 + 2)],\n          [num3 / den3, lettreIndiceeDepuisChiffre(i * 3 + 3)],\n        ],\n      })\n\n      texte +=\n        '<br>' +\n        mathalea2d(\n          {\n            xmin: -0.2,\n            xmax: (data[tab].max - origine) * tailleUnite + 1,\n            ymin: -1,\n            ymax: 1,\n            style: 'margin-top:10px ',\n            scale: 0.6,\n          },\n          d,\n        )\n      const dCorr = droiteGraduee({\n        Min: origine,\n        Max: data[tab].max,\n        Unite: tailleUnite,\n        thickSec: true,\n        thickSecDist: 1 / data[tab].id,\n        thickEpaisseur: 3,\n        pointListe: [\n          [num1 / den1, lettreIndiceeDepuisChiffre(i * 3 + 1)],\n          [num2 / den2, lettreIndiceeDepuisChiffre(i * 3 + 2)],\n          [num3 / den3, lettreIndiceeDepuisChiffre(i * 3 + 3)],\n        ],\n        labelListe: [\n          [num1 / den1, fraction(num1, den1).texFraction],\n          [num2 / den2, fraction(num2, den2).texFraction],\n          [num3 / den3, fraction(num3, den3).texFraction],\n        ],\n        labelDistance: 0.8,\n        labelCustomDistance: 1.7,\n      })\n\n      const texteCorr = mathalea2d(\n        {\n          xmin: -0.2,\n          xmax: (data[tab].max - origine) * tailleUnite + 1,\n          ymin: -2.5,\n          ymax: 1,\n          style: 'margin-top:10px ',\n          scale: 0.6,\n        },\n        dCorr,\n      )\n\n      if (this.questionJamaisPosee(i, num1, num2, num3)) {\n        // Si la question n'a jamais été posée, on en crée une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n\n        if (context.isAmc) {\n          this.autoCorrection[i] = {\n            enonce: texte + '\\n',\n            propositions: [\n              {\n                texte: texteCorr,\n                statut: 5,\n                sanscadre: true,\n                pointilles: true,\n                feedback: '',\n              },\n            ],\n          }\n        }\n        i++\n      }\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction trouveNumerateur(\n  den: number,\n  min: number,\n  max: number,\n  fractionsAEviter: { num: number; den: number }[] = [],\n) {\n  const isNombreEntier = function (nu: number, de: number) {\n    if (nu % de === 0) return true\n    return false\n  }\n\n  let trouve = false\n  let num = 0\n  let i = 0\n  while (!trouve && i < 10) {\n    num = randint(min * den, den * max)\n\n    // on veut éviter l'entier\n    let k = 0\n    while (isNombreEntier(num, den) && k < 5) {\n      num = randint(min * den, den * max)\n      k++\n    }\n\n    // on veut éviter d'être trop proche d'un autre point\n    trouve = true\n    for (const fraction of fractionsAEviter) {\n      if (Math.abs(fraction.num / fraction.den - num / den) < 2 / den) {\n        trouve = false\n        break\n      }\n    }\n    i++\n  }\n  return num\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","dateDePublication","uuid","refs","LireAbscissesFractionnairesComplexes","Exercice","typeDeQuestions","combinaisonListes","data","tableDisponibles","tableUtilisees","i","texte","cpt","tab","choice","origine","den1","tab1","num1","trouveNumerateur","den2","tab2","num2","den3","tab3","num3","remplisLesBlancs","lettreIndiceeDepuisChiffre","handleAnswers","listePoints","fraction","tailleUnite","d","droiteGraduee","mathalea2d","dCorr","texteCorr","context","listeQuestionsToContenu","den","min","max","fractionsAEviter","isNombreEntier","nu","de","trouve","num","randint","k"],"mappings":"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"}