{"version":3,"file":"Integrale-DdnkRNHe.js","sources":["../../src/lib/2d/Integrale.ts"],"sourcesContent":["import { inferieurouegal } from '../../modules/outils'\nimport { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport type { IRepere } from './Interfaces'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { motifs } from './pattern'\nimport { point } from './PointAbstrait'\nimport { polygone } from './polygones'\n\n/**\n * Trace l'aire entre la courbe d'une fonction et l'axe des abscisses\n * @param {function} f fonction dont on veut tracer l'aire entre sa courbe et l'axe des abscisses comme par exemple : const f = x => a * x ** 2 + b * x + c\n * @param {Object} parametres À saisir entre accolades\n * @param {Repere} [parametres.repere  = {}]  Repère dans lequel le tracé de la fonction se fait\n * @param {string} [parametres.color = 'black']  Couleur du contour de l'aire : du type 'blue' ou du type '#f15929'\n * @param {number} [parametres.epaisseur = 2]  Epaisseur du contour de l'aire\n * @param {string} [parametres.couleurDeRemplissage = 'blue']  Couleur de l'intérieur de l'aire : du type 'blue' ou du type '#f15929'\n * @param {number} [parametres.opacite = 0.5] Taux d'opacité du remplissage entre 0 et 1\n * @param {number} [parametres.hachures = 0] Style des hachures dans cette aire (entier entre 0 et 10).\n * @param {boolean|number} [parametres.step = false] Si false, le pas entre deux abscisses pour tracer l'aire est 0.2/xUnite. Sinon, ce pas vaut la valeur indiquée.\n * @param {number} [parametres.a = 0]  Abscisse minimale du tracé de la courbe avec a < b\n * @param {number} [parametres.b = 1]  Abscisse maximale du tracé de la courbe avec a < b\n * @property {string} svg Sortie au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} svgml Sortie, à main levée, au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} tikz Sortie au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @property {string} tikzml Sortie, à main levée, au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @property {string} color Couleur du contour de l'aire. À associer obligatoirement à colorToLatexOrHTML().\n * @property {string} couleurDeRemplissage Couleur de l'intérieur de l'aire. À associer obligatoirement à colorToLatexOrHTML().\n * @property {number} xUnite Unité des abscisses du repère\n * @property {number} yUnite Unité des ordonnées du repère\n * @property {number} ymin Ordonnée minimale du repère\n * @property {number} ymax Ordonnée maximale du repère\n * @author Rémi Angot\n * @class\n */\n// JSDOC Validee par EE Juin 2022\n\nexport class Integrale extends ObjetMathalea2D {\n  constructor(\n    f: (x: number) => number,\n    {\n      repere,\n      color = 'black',\n      couleurDeRemplissage = 'blue',\n      epaisseur = 2,\n      step = false,\n      a = 0,\n      b = 1,\n      opacite = 0.5,\n      hachures = 0,\n    }: {\n      repere?: IRepere\n      color?: string\n      epaisseur?: number\n      couleurDeRemplissage?: string\n      step?: boolean | number\n      a?: number\n      b?: number\n      opacite?: number\n      hachures?: number\n    } = {},\n  ) {\n    super()\n    this.objets = []\n    const ymin = repere?.yMin ?? -10\n    const ymax = repere?.yMax ?? 10\n    const xunite = repere?.xUnite ?? 1\n    const yunite = repere?.yUnite ?? 1\n\n    const objets = []\n    const points = []\n    let pas: number\n    if (!step) {\n      pas = 0.2 / xunite\n    } else {\n      pas = Number(step)\n    }\n    for (let x = a; inferieurouegal(x, b); x += pas) {\n      if (x > b) x = b // normalement x<xMax... mais inférieurouegal ne compare qu'à 0.0000001 près, on peut donc avoir xMax+epsilon qui sort de l'intervalle de déf\n      if (isFinite(f(x))) {\n        if (f(x) < ymax + 1 && f(x) > ymin - 1) {\n          points.push(point(x * xunite, f(x) * yunite))\n        } else {\n          window.notify(\n            \"Erreur dans Integrale : Il semble que la fonction ne soit pas continue sur l'intervalle\",\n            {\n              f,\n              a,\n              b,\n            },\n          )\n        }\n      } else {\n        x += 0.05\n      }\n    }\n    points.push(\n      point(b * xunite, f(b) * yunite),\n      point(b * xunite, 0),\n      point(a * xunite, 0),\n    )\n    const p = polygone([...points], color)\n    p.epaisseur = epaisseur\n    p.couleurDeRemplissage = colorToLatexOrHTML(couleurDeRemplissage)\n    p.opaciteDeRemplissage = opacite\n    p.hachures = hachures !== -1 ? motifs(hachures) : false\n    this.bordures = repere?.bordures as unknown as [\n      number,\n      number,\n      number,\n      number,\n    ]\n    objets.push(p)\n  }\n\n  svg(coeff: number) {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      code += '\\n\\t' + objet.svg(coeff)\n    }\n    return code\n  }\n\n  tikz() {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      code += '\\n\\t' + objet.tikz()\n    }\n    return code\n  }\n\n  svgml(coeff: number, amp: number) {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      if (typeof objet.svgml === 'undefined') code += '\\n\\t' + objet.svg(coeff)\n      else code += '\\n\\t' + objet.svgml(coeff, amp)\n    }\n    return code\n  }\n\n  tikzml(amp: number) {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      if (typeof objet.tikzml === 'undefined') code += '\\n\\t' + objet.tikz()\n      else code += '\\n\\t' + objet.tikzml(amp)\n    }\n    return code\n  }\n}\n/**\n * Trace l'aire entre la courbe d'une fonction et l'axe des abscisses\n * @param {function} f fonction dont on veut tracer l'aire entre sa courbe et l'axe des abscisses comme par exemple : const f = x => a * x ** 2 + b * x + c\n * @param {Object} parametres À saisir entre accolades\n * @param {Repere} [parametres.repere  = {}]  Repère dans lequel le tracé de la fonction se fait\n * @param {string} [parametres.color = 'black']  Couleur du contour de l'aire : du type 'blue' ou du type '#f15929'\n * @param {number} [parametres.epaisseur = 2]  Epaisseur du contour de l'aire\n * @param {string} [parametres.couleurDeRemplissage = 'blue']  Couleur de l'intérieur de l'aire : du type 'blue' ou du type '#f15929'\n * @param {number} [parametres.opacite = 0.5] Taux d'opacité du remplissage entre 0 et 1\n * @param {number} [parametres.hachures = 0] Style des hachures dans cette aire (entier entre 0 et 10).\n * @param {boolean|number} [parametres.step = false] Si false, le pas entre deux abscisses pour tracer l'aire est 0.2/xUnite. Sinon, ce pas vaut la valeur indiquée.\n * @param {number} [parametres.a = 0]  Abscisse minimale du tracé de la courbe avec a < b\n * @param {number} [parametres.b = 1]  Abscisse maximale du tracé de la courbe avec a < b\n * @example integrale(g, {repere: r})\n * // Trace avec une épaisseur de 2, l'aire entre la courbe de la fonction g et l'axe des abscisses dans le repère r, tous deux précédemment définis.\n * @example integrale(g,  {repere: r, epaisseur: 5, color: 'blue', couleurDeRemplissage: 'red'})\n * // Trace avec une épaisseur de 5, l'aire entre la courbe de la fonction g et l'axe des abscisses dans le repère r, tous deux précédemment définis. L'aire est entourée de bleu et remplie de rouge.\n * @author Rémi Angot\n * @return {Integrale}\n */\n// JSDOC Validee par EE Juin 2022\n\nexport function integrale(\n  f: (x: number) => number,\n  {\n    repere,\n    color = 'black',\n    couleurDeRemplissage = 'blue',\n    epaisseur = 2,\n    step = false,\n    a = 0,\n    b = 1,\n    opacite = 0.5,\n    hachures = 0,\n  }: {\n    repere?: IRepere\n    color?: string\n    epaisseur?: number\n    couleurDeRemplissage?: string\n    step?: boolean | number\n    a?: number\n    b?: number\n    opacite?: number\n    hachures?: number\n  } = {},\n) {\n  return new Integrale(f, {\n    repere,\n    color,\n    couleurDeRemplissage,\n    epaisseur,\n    step,\n    a,\n    b,\n    opacite,\n    hachures,\n  })\n}\n"],"names":["Integrale","ObjetMathalea2D","f","repere","color","couleurDeRemplissage","epaisseur","step","a","b","opacite","hachures","ymin","ymax","xunite","yunite","points","pas","x","inferieurouegal","point","p","polygone","colorToLatexOrHTML","motifs","coeff","code","objet","amp","integrale"],"mappings":"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"}