{"version":3,"file":"apigeomGraduatedLine-B67-Lgxm.js","sources":["../../src/lib/apigeom/apigeomGraduatedLine.ts"],"sourcesContent":["import Figure from 'apigeom'\nimport GraduatedLine from 'apigeom/src/elements/grid/GraduatedLine'\nimport { round } from 'apigeom/src/lib/format'\nimport { arrondi } from '../outils/nombres'\n\nexport function apigeomGraduatedLine({\n  xMin,\n  xMax,\n  scale = 1,\n  points,\n}: {\n  xMin: number\n  xMax: number\n  scale?: number\n  points?: Array<{ x: number; label: string }>\n}): { figure: Figure; latex: string } {\n  //  const width = 900\n  const width = 650\n  const height = 80\n  const figure = new Figure({\n    xMin: xMin - 0.2 / scale,\n    yMin: -1.5,\n    width,\n    height,\n    dy: 10,\n    dx: arrondi(1 / (10 * scale), 6),\n    xScale: 3 * scale,\n    snapGrid: true,\n  })\n  figure.setToolbar({ tools: ['POINT', 'DRAG', 'REMOVE'], position: 'top' })\n\n  const figureXMaxInPIxels =\n    figure.xMax * figure.pixelsPerUnit * figure.scale * figure.xScale\n  const lineXMaxInPIxels =\n    xMax * figure.pixelsPerUnit * figure.scale * figure.xScale\n  const ecart = figureXMaxInPIxels - lineXMaxInPIxels\n  if (ecart < 15) {\n    xMax =\n      (figureXMaxInPIxels - 15) /\n      (figure.pixelsPerUnit * figure.scale * figure.xScale)\n  }\n\n  const d = new GraduatedLine(figure, {\n    min: xMin,\n    max: xMax,\n    step: arrondi(1 / scale, 6),\n    stepBis: arrondi(1 / (10 * scale), 6),\n  })\n  d.draw()\n  const step = arrondi(1 / scale, 6)\n  const start = round(Math.ceil(xMin / step) * step)\n  // const end = round(Math.floor(xMax / step) * step)\n  let latex = `\\n\\\\bigskip\n    \\\\begin{tikzpicture}[x=2.2mm]\n    \\\\draw[-{Latex[round]},thick] (0,0) -- (72,0);\n    \\\\foreach \\\\x in {0,1,...,70} \\\\draw[thick] ([yshift=-0.8mm]\\\\x,0) -- ([yshift=0.8mm]\\\\x,0);\n    \\\\foreach \\\\x [count=\\\\i from 0] in {0,10,...,70} \\\\draw[ultra thick] ([yshift=-1.5mm]\\\\x,0) coordinate (a\\\\i) -- ([yshift=1.5mm]\\\\x,0);\n    \\\\foreach \\\\x [count=\\\\i from 0] in {${arrondi(start)},${arrondi(start + 1 * step)},${arrondi(start + 2 * step)},${arrondi(start + 3 * step)},${arrondi(start + 4 * step)},${arrondi(start + 5 * step)},${arrondi(start + 6 * step)},${arrondi(start + 7 * step)}} {\n      \\\\node[below=2mm of a\\\\i,inner sep=0pt,font=\\\\small] {$\\\\num{\\\\x}$};\n    }`\n  if (points !== undefined) {\n    const xA = arrondi((points[0].x - xMin) * scale * 10)\n    const xB = arrondi((points[1].x - xMin) * scale * 10)\n    const xC = arrondi((points[2].x - xMin) * scale * 10)\n    const labelA = points[0].label\n    const labelB = points[1].label\n    const labelC = points[2].label\n    latex += `\\n\\\\tkzText[above=2mm](${xA},0){${labelA}}\n      \\n\\\\tkzText[above=2mm](${xB},0){${labelB}}\n      \\n\\\\tkzText[above=2mm](${xC},0){${labelC}}\n      \\n\\\\tkzDrawPoint[shape=cross out, size=5pt, thick](${xA},0)\n      \\n\\\\tkzDrawPoint[shape=cross out, size=5pt, thick](${xB},0)\n      \\n\\\\tkzDrawPoint[shape=cross out, size=5pt, thick](${xC},0)`\n  }\n  latex += '\\n\\\\end{tikzpicture}'\n\n  return { figure, latex }\n}\n"],"names":["apigeomGraduatedLine","xMin","xMax","scale","points","figure","Figure","arrondi","figureXMaxInPIxels","lineXMaxInPIxels","GraduatedLine","step","start","round","latex","xA","xB","xC","labelA","labelB","labelC"],"mappings":"wGAKO,SAASA,EAAqB,CACnC,KAAAC,EACA,KAAAC,EACA,MAAAC,EAAQ,EACR,OAAAC,CACF,EAKsC,CAIpC,MAAMC,EAAS,IAAIC,EAAO,CACxB,KAAML,EAAO,GAAME,EACnB,KAAM,KACN,UACA,UACA,GAAI,GACJ,GAAII,EAAQ,GAAK,GAAKJ,GAAQ,CAAC,EAC/B,OAAQ,EAAIA,EACZ,SAAU,EAAA,CACX,EACDE,EAAO,WAAW,CAAE,MAAO,CAAC,QAAS,OAAQ,QAAQ,EAAG,SAAU,MAAO,EAEzE,MAAMG,EACJH,EAAO,KAAOA,EAAO,cAAgBA,EAAO,MAAQA,EAAO,OACvDI,EACJP,EAAOG,EAAO,cAAgBA,EAAO,MAAQA,EAAO,OACxCG,EAAqBC,EACvB,KACVP,GACGM,EAAqB,KACrBH,EAAO,cAAgBA,EAAO,MAAQA,EAAO,SAGxC,IAAIK,EAAcL,EAAQ,CAClC,IAAKJ,EACL,IAAKC,EACL,KAAMK,EAAQ,EAAIJ,EAAO,CAAC,EAC1B,QAASI,EAAQ,GAAK,GAAKJ,GAAQ,CAAC,CAAA,CACrC,EACC,KAAA,EACF,MAAMQ,EAAOJ,EAAQ,EAAIJ,EAAO,CAAC,EAC3BS,EAAQC,EAAM,KAAK,KAAKZ,EAAOU,CAAI,EAAIA,CAAI,EAEjD,IAAIG,EAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAK6BP,EAAQK,CAAK,CAAC,IAAIL,EAAQK,EAAQ,EAAID,CAAI,CAAC,IAAIJ,EAAQK,EAAQ,EAAID,CAAI,CAAC,IAAIJ,EAAQK,EAAQ,EAAID,CAAI,CAAC,IAAIJ,EAAQK,EAAQ,EAAID,CAAI,CAAC,IAAIJ,EAAQK,EAAQ,EAAID,CAAI,CAAC,IAAIJ,EAAQK,EAAQ,EAAID,CAAI,CAAC,IAAIJ,EAAQK,EAAQ,EAAID,CAAI,CAAC;AAAA;AAAA,OAGlQ,GAAIP,IAAW,OAAW,CACxB,MAAMW,EAAKR,GAASH,EAAO,CAAC,EAAE,EAAIH,GAAQE,EAAQ,EAAE,EAC9Ca,EAAKT,GAASH,EAAO,CAAC,EAAE,EAAIH,GAAQE,EAAQ,EAAE,EAC9Cc,EAAKV,GAASH,EAAO,CAAC,EAAE,EAAIH,GAAQE,EAAQ,EAAE,EAC9Ce,EAASd,EAAO,CAAC,EAAE,MACnBe,EAASf,EAAO,CAAC,EAAE,MACnBgB,EAAShB,EAAO,CAAC,EAAE,MACzBU,GAAS;AAAA,uBAA0BC,CAAE,OAAOG,CAAM;AAAA;AAAA,uBACvBF,CAAE,OAAOG,CAAM;AAAA;AAAA,uBACfF,CAAE,OAAOG,CAAM;AAAA;AAAA,mDACaL,CAAE;AAAA;AAAA,mDACFC,CAAE;AAAA;AAAA,mDACFC,CAAE,KAC3D,CACA,OAAAH,GAAS;AAAA,oBAEF,CAAE,OAAAT,EAAQ,MAAAS,CAAA,CACnB"}