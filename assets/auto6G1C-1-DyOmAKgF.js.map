{"version":3,"file":"auto6G1C-1-DyOmAKgF.js","sources":["../../src/exercices/6e/auto6G1C-1.ts"],"sourcesContent":["import { droite } from '../../lib/2d/droites'\nimport {\n  listeFigures2d,\n  type Forme,\n} from '../../lib/2d/figures2d/listeFigures2d'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { latex2d } from '../../lib/2d/textes'\nimport {\n  homothetie,\n  projectionOrtho,\n  rotation,\n} from '../../lib/2d/transformations'\nimport { vecteur } from '../../lib/2d/Vecteur'\nimport { propositionsQcm } from '../../lib/interactif/qcm'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { texteEnCouleurEtGras } from '../../lib/outils/embellissements'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { gestionnaireFormulaireTexte, randint } from '../../modules/outils'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n\nexport const titre =\n  'Dire si deux figures sont symétriques par rapport à une droite'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n// Gestion de la date de publication initiale\nexport const dateDePublication = '17/05/2025'\n\n/**\n * Reconnaitre des figures symétriques par rapport à une droite donnée.\n * @author Jean-Claude Lhote\n */\nexport const uuid = '528b2'\n\nexport const refs = {\n  'fr-fr': ['auto6G1C-1'],\n  'fr-2016': ['6G25-5'],\n  'fr-ch': ['9ES6-31', '10ES2-18'],\n}\n\nexport default class NbAxesDeSymetrie extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 3\n    this.sup = '1'\n    this.besoinFormulaireTexte = [\n      \"Type d'axes\",\n      'Nombres séparés par des tirets :\\n1 : Plutôt vertical\\n2 : Plutôt horizontal\\n3 : Plutôt oblique\\n4 : Mélange',\n    ]\n    this.besoinFormulaire4CaseACocher = ['Grandes figures', true]\n    this.sup4 = true\n  }\n\n  nouvelleVersion(): void {\n    const factor = this.sup4 ? 2 : 1\n    const numerosChoisis: number[] = []\n    const typeAxe = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 3,\n      melange: 4,\n      defaut: 1,\n      nbQuestions: this.nbQuestions,\n      listeOfCase: ['vertical', 'horizontal', 'oblique'],\n    })\n    for (let i = 0; i < this.nbQuestions; ) {\n      let texte = ''\n      let texteCorr = ''\n      const objets: NestedObjetMathalea2dArray = []\n      const objetsCorr: NestedObjetMathalea2dArray = []\n\n      const typeDeFigureChoisie = 'geometrique'\n      const listeFigs = listeFigures2d\n        .filter((el) => el.type === typeDeFigureChoisie)\n        .filter((el) => !numerosChoisis.includes(el.numero))\n      if (listeFigs.length === 0) {\n        this.listeQuestions.push('Aucune figure disponible')\n        this.listeCorrections.push('Aucune figure disponible')\n        break\n      }\n      const choix = listeFigs.filter(\n        (el) => !numerosChoisis.includes(el.numero),\n      )\n      const figure: Forme = choice(choix)\n      numerosChoisis.push(figure.numero)\n      texte += `Les deux figures sont-elles symétriques par rapport à la droite $(d_{${(i + 1) % 10}})$ ?<br>`\n      const alpha = 0 // randint(-30, 30, 0)\n      const options = figure.options ?? {}\n      const forme =\n        typeAxe[i] === 'vertical'\n          ? figure\n              .figure2d(options)\n              .dilate(factor)\n              .rotate(alpha)\n              .translate(-4.5, 0)\n          : typeAxe[i] === 'horizontal'\n            ? figure\n                .figure2d(options)\n                .dilate(factor)\n                .rotate(alpha)\n                .translate(0, 4.5)\n            : figure\n                .figure2d(options)\n                .dilate(factor)\n                .rotate(alpha)\n                .translate(-4.5, 4.5)\n      forme.name = figure.name.replace(/ /g, '_')\n      forme.opacite = 0.5\n      objets.push(forme)\n      const beta = randint(-4, 4, [0, 1, -1]) * 2\n      const angle =\n        typeAxe[i] === 'vertical' ? 0 : typeAxe[i] === 'horizontal' ? 90 : -45\n      const axe = rotation(\n        droite(point(0, -1), point(0, 1)),\n        point(0, 0),\n        angle + beta,\n      )\n\n      objets.push(axe)\n      const centre =\n        typeAxe[i] === 'vertical'\n          ? point(-4.5, 0)\n          : typeAxe[i] === 'horizontal'\n            ? point(0, 4.5)\n            : point(-4.5, 4.5)\n      const h = projectionOrtho(centre, axe)\n      const v = homothetie(vecteur(centre, h), h, 2)\n      const choixReponse = choice([\n        'translation',\n        'symetrie',\n        'rotation',\n        'homothetie',\n      ])\n      let forme2\n      switch (choixReponse) {\n        case 'translation':\n          forme2 = forme.copy(forme.name + 'b').translate(v.x, 0)\n          objets.push(forme2)\n\n          break\n        case 'symetrie':\n          forme2 = forme.symetrie(axe)\n          forme2.opacite = 0.5\n          objets.push(forme2)\n          break\n\n        case 'homothetie':\n          forme2 = forme\n            .copy(forme.name + 'b')\n            .translate(-centre.x, -centre.y)\n            .dilate(choice([1.2, 1.3, 1.1, 0.9, 0.8]))\n            .translate(centre.x, centre.y)\n          forme2 = forme2.symetrie(axe)\n          objets.push(forme2)\n          break\n\n        case 'rotation':\n        default:\n          forme2 = forme\n            .copy(forme.name + 'b')\n            .rotate(180 - angle - 4 * beta)\n            .translate(v.x, v.y)\n          objets.push(forme2)\n          break\n      }\n      const nomDroite = latex2d(\n        `(d_{${(i + 1) % 10}})`,\n        axe.x2 + 0.6,\n        axe.y2,\n        {},\n      )\n      objets.push(nomDroite)\n      texte += mathalea2d(\n        Object.assign(\n          { pixelsParCm: 20, scale: 0.5 },\n          fixeBordures(objets, { rxmax: 3, rymax: 1, rymin: -1 }),\n        ),\n        objets,\n      )\n      if (this.interactif) {\n        this.autoCorrection[i] = {\n          propositions: [\n            { texte: 'Oui', statut: choixReponse === 'symetrie' },\n            { texte: 'Non', statut: choixReponse !== 'symetrie' },\n          ],\n          options: {\n            ordered: true,\n            radio: true,\n          },\n        }\n        // const monQcm = propositionsQcm(this, i, { style: 'inline-block', format: 'case', radio: true })\n        const monQcm = propositionsQcm(this, i, {\n          style: 'inline-block',\n          format: 'case',\n        })\n        texte += `${monQcm.texte}`\n      }\n      const onDirectionChange = (direction = 1) => {\n        if (direction === 1) return\n        // Ajoute l'icône à côté de la figure symétrique (forme2)\n        const elem = document.getElementById(\n          `${forme.name}Corr_${i - 1}`,\n        ) as unknown as SVGElement // Je n'ai pas compris pourquoi il faut -1\n        // On ne peut pas insérer un span dans un SVG, donc on crée un élément SVG pour l'icône\n        if (\n          elem &&\n          !elem.ownerSVGElement?.querySelector(`#icone-resultat-${i}`)\n        ) {\n          const svgNS = 'http://www.w3.org/2000/svg'\n          const iconGroup = document.createElementNS(svgNS, 'g')\n          iconGroup.setAttribute('id', `icone-resultat-${i}`)\n          iconGroup.setAttribute('class', 'icone-resultat')\n          // Positionne l'icône à droite de la figure (décalage arbitraire, à ajuster si besoin)\n          //   const bbox = elem.getBBox()\n          const x = 0 // bbox.x + bbox.width + 100\n          const y = 0 // bbox.y + bbox.height / 2\n          if (choixReponse === 'symetrie') {\n            // coche verte\n            const path = document.createElementNS(svgNS, 'path')\n            path.setAttribute('d', 'M4 20 L16 32 L36 8')\n            path.setAttribute('stroke', 'green')\n            path.setAttribute('stroke-width', '5')\n            path.setAttribute('fill', 'none')\n            path.setAttribute('stroke-linecap', 'round')\n            path.setAttribute('stroke-linejoin', 'round')\n            iconGroup.appendChild(path)\n          } else {\n            // croix rouge\n            const line1 = document.createElementNS(svgNS, 'line')\n            line1.setAttribute('x1', '4')\n            line1.setAttribute('y1', '4')\n            line1.setAttribute('x2', '36')\n            line1.setAttribute('y2', '36')\n            line1.setAttribute('stroke', 'red')\n            line1.setAttribute('stroke-width', '5')\n            line1.setAttribute('stroke-linecap', 'round')\n            const line2 = document.createElementNS(svgNS, 'line')\n            line2.setAttribute('x1', '36')\n            line2.setAttribute('y1', '4')\n            line2.setAttribute('x2', '4')\n            line2.setAttribute('y2', '36')\n            line2.setAttribute('stroke', 'red')\n            line2.setAttribute('stroke-width', '5')\n            line2.setAttribute('stroke-linecap', 'round')\n            iconGroup.appendChild(line1)\n            iconGroup.appendChild(line2)\n          }\n          iconGroup.setAttribute('transform', `translate(${x},${y}) scale(1.2)`)\n          elem.ownerSVGElement?.appendChild(iconGroup)\n          setTimeout(() => {\n            iconGroup.remove()\n          }, 2000)\n        }\n      }\n      const anim = forme.loopReflectionAnimee(\n        axe,\n        `${forme.name}Corr_${i}`,\n        onDirectionChange,\n      )\n      const formeBis = forme.copy(forme.name + 'Bis')\n      formeBis.opacite = 0.3\n      const forme2Bis = forme2.copy(forme2.name + 'Bis')\n      forme2Bis.opacite = 0.3\n      objetsCorr.push(formeBis, forme2Bis, anim, axe, nomDroite)\n      texteCorr += mathalea2d(\n        Object.assign(\n          { pixelsParCm: 20, scale: 0.5 },\n          fixeBordures(objetsCorr, { rxmax: 4, rymax: 2, rymin: -2.5 }),\n        ),\n        objetsCorr,\n      )\n      texteCorr += `Les deux figures ${texteEnCouleurEtGras((choixReponse === 'symetrie' ? 'sont' : 'ne sont pas') + ' symétriques')} par rapport à la droite $(d_{${(i + 1) % 10}})$.<br>`\n      texteCorr +=\n        choixReponse === 'homothetie'\n          ? \"Les figures n'ont pas la même taille.\"\n          : choixReponse === 'translation'\n            ? `Les figures ne sont pas symétriques par rapport à la droite $(d_{${(i + 1) % 10}})$, comme le montre l'animation.`\n            : choixReponse === 'rotation'\n              ? `L'animation montre que les figures ne sont pas symétriques par rapport à la droite $(d_{${(i + 1) % 10}})$.`\n              : `L'animation montre que par pliage selon l'axe  $(d_{${(i + 1) % 10}})$ les deux figures se superposent parfaitement.`\n      this.listeQuestions.push(texte)\n      this.listeCorrections.push(texteCorr)\n      i++\n    }\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","uuid","refs","NbAxesDeSymetrie","Exercice","factor","numerosChoisis","typeAxe","gestionnaireFormulaireTexte","i","texte","texteCorr","objets","objetsCorr","typeDeFigureChoisie","listeFigs","listeFigures2d","el","choix","figure","choice","alpha","options","forme","beta","randint","angle","axe","rotation","droite","point","centre","h","projectionOrtho","v","homothetie","vecteur","choixReponse","forme2","nomDroite","latex2d","mathalea2d","fixeBordures","monQcm","propositionsQcm","onDirectionChange","direction","elem","_a","svgNS","iconGroup","x","y","path","line1","line2","_b","anim","formeBis","forme2Bis","texteEnCouleurEtGras"],"mappings":"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"}