{"version":3,"file":"200F3-02-Ca371aPU.js","sources":["../../src/lib/2d/croche.ts","../../src/exercices/2e/200F3-02.ts"],"sourcesContent":["import { arc } from './Arc'\nimport { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport { point } from './PointAbstrait'\n\n/**\n * crée un petit demi-cercle en x,y pour marquer une courbe sur un intervalle ouvert\n * @param {number} x\n * @param {number} y\n * @param {'gauche'|'droite'} sens 'gauche' par défaut\n * @param {number} rayon\n * @param {string} couleur\n * @returns {Arc}\n */\n\nexport function croche(\n  x: number,\n  y: number,\n  sens = 'gauche',\n  rayon = 0.1,\n  couleur = 'black',\n) {\n  const centre = point(x + (sens === 'gauche' ? -rayon : rayon), y)\n  const dessous = point(x + (sens === 'gauche' ? -rayon : rayon), y - rayon)\n  const dessus = point(x + (sens === 'gauche' ? -rayon : rayon), y + rayon)\n  const croche =\n    sens === 'gauche'\n      ? arc(dessous, centre, dessus)\n      : arc(dessus, centre, dessous)\n  croche.color = colorToLatexOrHTML(couleur)\n  return croche\n}\n","import { courbe } from '../../lib/2d/Courbe'\nimport { croche } from '../../lib/2d/croche'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport RepereBuilder from '../../lib/2d/RepereBuilder'\nimport { spline, type NoeudSpline } from '../../lib/mathFonctions/Spline'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { randint } from '../../modules/outils'\nimport ExerciceSimple from '../ExerciceSimple'\n\nimport { plot } from '../../lib/2d/Plot'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\n\nexport const titre = 'Lecture graphique de domaine de définition'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\nexport const dateDePublication = '11/07/2023' // La date de publication initiale au format 'jj/mm/aaaa' pour affichage temporaire d'un tag\nexport const dateDeModifImportante = '18/02/2025'\nexport const uuid = 'e46e6'\n\nexport const refs = {\n  'fr-fr': ['200F3-02'],\n  'fr-ch': ['11FA7-5'],\n}\n\n/**\n * Trois niveaux, trouver les signes d'une fonction affine\n * @author Jean-Claude Lhote\n */\nexport default class LectureEnsebleDef extends ExerciceSimple {\n  constructor() {\n    super()\n\n    this.typeExercice = 'simple'\n    this.nbQuestions = 1\n    this.sup = 1\n    this.besoinFormulaireNumerique = ['Niveau', 3]\n    this.formatChampTexte = KeyboardType.clavierEnsemble\n  }\n\n  nouvelleVersion() {\n    // Dans ce modèle, j'ai pris la première question du fichier Doc-Automatismes-2de-acOT-GTCAN-2023.pdf.\n    // La question posée est de lister tous les diviseurs d'un entier.\n    // Selon le niveau choisi, on augmente la difficulté de l'entier choisi.\n    // Le reste est identique pour les trois niveaux\n    // Le bloc décidant de l'aléatoire\n    function aleatoiriseSpline(noeuds: NoeudSpline[]) {\n      const coeffX = choice([-1, 1]) // symétries ou pas\n      const coeffY = choice([-1, 1])\n      const deltaX = randint(-1, +1) // translations\n      const deltaY = randint(-2, +2) / 2\n      // la liste des noeuds de notre fonction\n      const nuage = noeuds.map((noeud) =>\n        Object({\n          x: (noeud.x + deltaX) * coeffX,\n          y: (noeud.y + deltaY) * coeffY,\n          deriveeGauche: noeud.deriveeGauche * coeffX * coeffY,\n          deriveeDroit: noeud.deriveeDroit * coeffX * coeffY,\n          isVisible: noeud.isVisible,\n        }),\n      )\n      return spline(nuage)\n    }\n\n    const noeuds1 = [\n      {\n        x: -2 + randint(-1, 1),\n        y: 1,\n        deriveeGauche: 1,\n        deriveeDroit: 1,\n        isVisible: true,\n      },\n      { x: 0, y: 2, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n      { x: 3, y: -2, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n      {\n        x: 5 + randint(-1, 1),\n        y: 1,\n        deriveeGauche: 1,\n        deriveeDroit: 1,\n        isVisible: true,\n      },\n    ]\n    const noeuds2 = [\n      {\n        x: -3 + randint(-1, 1),\n        y: 3 + randint(-1, 1),\n        deriveeGauche: -2,\n        deriveeDroit: -2,\n        isVisible: true,\n      },\n      {\n        x: -1,\n        y: 0 + randint(-1, 1),\n        deriveeGauche: 0,\n        deriveeDroit: 0,\n        isVisible: false,\n      },\n      {\n        x: 1,\n        y: -2 + randint(0, 1),\n        deriveeGauche: 0,\n        deriveeDroit: 0,\n        isVisible: false,\n      },\n      {\n        x: 3,\n        y: 1 + randint(-1, 1),\n        deriveeGauche: 0,\n        deriveeDroit: 0,\n        isVisible: false,\n      },\n      {\n        x: 5 + randint(-1, 1),\n        y: -2 + randint(-1, 1),\n        deriveeGauche: -2,\n        deriveeDroit: -2,\n        isVisible: true,\n      },\n    ]\n    let courbeAvecTrace, xmin, xmax, repere\n    let ouvertDroit, ouvertGauche\n    switch (this.sup) {\n      case 1:\n        {\n          // défini aux 2 extrémités par des points d'abscisses entières\n          const spline = aleatoiriseSpline(choice([noeuds1, noeuds2]))\n          const { xMin, xMax, yMin, yMax } = spline.trouveMaxes()\n          ;[xmin, xmax] = [xMin, xMax]\n          repere = new RepereBuilder({\n            xMin: xMin - 2,\n            xMax: xMax + 2,\n            yMin: yMin - 2,\n            yMax: yMax + 2,\n          })\n            .setGrille({\n              grilleX: { dx: 1, xMin: xMin - 2, xMax: xMax + 2 },\n              grilleY: { dy: 1, yMin: yMin - 2, yMax: yMax + 2 },\n            })\n            .setThickX({ xMin, xMax, dx: 1 })\n            .setThickY({ yMin, yMax, dy: 1 })\n            .buildStandard()\n\n          ouvertGauche = Math.random() < 0.5\n          ouvertDroit = Math.random() < 0.5\n\n          courbeAvecTrace = [\n            spline.courbe({\n              color: 'blue',\n              ajouteNoeuds: false,\n              optionsNoeuds: { style: '.', epaisseur: 2 },\n            }),\n          ]\n          if (ouvertGauche) {\n            courbeAvecTrace.push(\n              croche(spline.x[0], spline.y[0], 'gauche', 0.1, 'blue'),\n            )\n          } else {\n            courbeAvecTrace.push(\n              plot(spline.x[0], spline.y[0], { couleur: 'blue' }),\n            )\n          }\n          if (ouvertDroit) {\n            courbeAvecTrace.push(\n              croche(\n                spline.x[spline.n - 1],\n                spline.y[spline.n - 1],\n                'droit',\n                0.1,\n                'blue',\n              ),\n            )\n          } else {\n            courbeAvecTrace.push(\n              plot(spline.x[spline.n - 1], spline.y[spline.n - 1], {\n                couleur: 'blue',\n              }),\n            )\n          }\n        }\n        break\n      case 2:\n        {\n          // borné à droite mais pas à gauche.\n          const dx = randint(-2, 2)\n          const dy = randint(-2, 2) / 2\n          const signe = choice([-1, 1])\n          const parabole = (x: number) => signe * (x + dx) ** 2 + dy\n          repere = new RepereBuilder({\n            xMin: -5,\n            xMax: 5,\n            yMin: -5,\n            yMax: 5,\n          })\n            .setGrille({\n              grilleX: { dx: 1, xMin: -5, xMax: 5 },\n              grilleY: { dy: 1, yMin: -5, yMax: 5 },\n            })\n            .setThickX({ xMin: -5, xMax: 5, dx: 1 })\n            .setThickY({ yMin: -5, yMax: 5, dy: 1 })\n            .buildStandard()\n          if (choice([true, false])) {\n            xmin = -dx - 1\n            xmax = '+\\\\infty'\n            ouvertGauche = false\n            ouvertDroit = true\n            courbeAvecTrace = [\n              courbe(parabole, {\n                repere,\n                xMin: -dx - 1,\n                step: 0.05,\n                epaisseur: 1,\n              }),\n              plot(-dx - 1, parabole(-dx - 1), { rayon: 0.1 }),\n            ]\n          } else {\n            xmax = -dx + 1\n            xmin = '-\\\\infty'\n            ouvertGauche = true\n            ouvertDroit = false\n            courbeAvecTrace = [\n              courbe(parabole, {\n                repere,\n                xMax: -dx + 1,\n                step: 0.05,\n                epaisseur: 1,\n              }),\n              plot(-dx + 1, parabole(-dx + 1), { rayon: 0.1 }),\n            ]\n          }\n        }\n        break\n      case 3:\n      default:\n        {\n          // cubique non bornée\n          const dx = randint(-2, 2)\n          const dy = randint(-2, 2) / 2\n          const signe = choice([-1, 1])\n          const hyperbole = (x: number) => signe * (x + dx) * (x - dx) * x + dy\n          repere = new RepereBuilder({\n            xMin: -5,\n            xMax: 5,\n            yMin: -5,\n            yMax: 5,\n          })\n            .setGrille({\n              grilleX: { dx: 1, xMin: -5, xMax: 5 },\n              grilleY: { dy: 1, yMin: -5, yMax: 5 },\n            })\n            .setThickX({ xMin: -5, xMax: 5, dx: 1 })\n            .setThickY({ yMin: -5, yMax: 5, dy: 1 })\n            .buildStandard()\n          xmin = '-\\\\infty'\n          xmax = '+\\\\infty'\n          ouvertGauche = true\n          ouvertDroit = true\n          courbeAvecTrace = courbe(hyperbole, {\n            repere,\n            xMin: -5,\n            xMax: 5,\n            step: 0.05,\n            epaisseur: 1,\n          })\n        }\n        break\n    }\n\n    this.question =\n      mathalea2d(Object.assign({}, fixeBordures([repere])), [\n        repere,\n        courbeAvecTrace,\n      ]) +\n      \"Quel est l'ensemble de définition de la fonction représentée ci-dessus ?\"\n    this.correction = `L'ensemble de définition de la fonction est $${miseEnEvidence(`${ouvertGauche ? ']' : '['}${xmin};${xmax}${ouvertDroit ? '[' : ']'}`)}$.`\n    this.reponse = {\n      reponse: {\n        value: `${ouvertGauche ? '\\\\left\\\\rbrack' : '\\\\left\\\\lbrack'}${xmin};${xmax}${ouvertDroit ? '\\\\right\\\\lbrack' : '\\\\right\\\\rbrack'}`,\n        options: { intervalle: true },\n      },\n    }\n  }\n}\n"],"names":["croche","x","y","sens","rayon","couleur","centre","point","dessous","dessus","arc","colorToLatexOrHTML","titre","interactifReady","interactifType","dateDePublication","dateDeModifImportante","uuid","refs","LectureEnsebleDef","ExerciceSimple","KeyboardType","aleatoiriseSpline","noeuds","coeffX","choice","coeffY","deltaX","randint","deltaY","nuage","noeud","spline","noeuds1","noeuds2","courbeAvecTrace","xmin","xmax","repere","ouvertDroit","ouvertGauche","xMin","xMax","yMin","yMax","RepereBuilder","plot","dx","dy","signe","parabole","courbe","hyperbole","mathalea2d","fixeBordures","miseEnEvidence"],"mappings":"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"}