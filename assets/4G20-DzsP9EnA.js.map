{"version":3,"file":"4G20-DzsP9EnA.js","sources":["../../src/exercices/4e/4G20.ts"],"sourcesContent":["/**\n * ⚠️ Cet exercice est utilisé dans le test : tests/e2e/tests/view/view.eleve.can.2025.4e.test.ts ⚠️\n */\n\nimport { afficheLongueurSegment } from '../../lib/2d/afficheLongueurSegment'\nimport { codageAngleDroit } from '../../lib/2d/CodageAngleDroit'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { nommePolygone, polygone } from '../../lib/2d/polygones'\nimport { rotation, similitude } from '../../lib/2d/transformations'\nimport { longueur } from '../../lib/2d/utilitairesGeometriques'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { arrondi, nombreDeChiffresDe } from '../../lib/outils/nombres'\nimport { creerNomDePolygone, sp } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport Grandeur from '../../modules/Grandeur'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport { RedactionPythagore } from './_pythagore'\n\nimport type { MathfieldElement } from 'mathlive'\nimport { bleuMathalea, orangeMathalea } from '../../lib/colors'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport engine from '../../lib/interactif/comparisonFunctions'\nimport { ordreAlphabetique } from '../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\n\nexport const titre = 'Calculer une longueur avec le théorème de Pythagore'\nexport const amcType = 'AMCHybride'\nexport const amcReady = true\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n/**\n * Fonction utilisée pour la vérification des questions de cet exercice.\n * @param {string} input\n * @param {string} goodAnswer // L'expression commencera par la somme des carrés et comportera (ou pas) l'égalité avec le carré de l'hypoténuse\n * @return {{isOk: boolean, feedback: string}}\n */\nexport function pythagoreCompare(input: string, goodAnswer: string) {\n  input = input.replaceAll(/([A-Z]{2})/g, '\\\\mathrm{$1}')\n  const parsedInput = engine.parse(input)\n  const parsedAnswer = engine.parse(goodAnswer)\n  if (parsedAnswer.operator === 'Equal') {\n    if (parsedInput.operator !== 'Equal')\n      return {\n        isOk: false,\n        feedback: 'Il faut saisir une égalité de Pythagore.',\n      }\n    // on a deux égalités. c'est le cas écrire l'égalité\n    const inputOps = parsedInput.ops\n    const answerOps = parsedAnswer.ops\n    if (inputOps != null && answerOps != null) {\n      const inputM1 = inputOps[0]\n      const inputM2 = inputOps[1]\n      const answerSum = answerOps[0]\n      const answerHypo = answerOps[1]\n      if (inputM1 && inputM2) {\n        const inputHypo = ['Power', 'Square'].includes(inputM1.operator)\n          ? inputM1\n          : inputM2\n        const inputSum = ['Power', 'Square'].includes(inputM1.operator)\n          ? inputM2\n          : inputM1\n        const inputT1 = inputSum.ops![0] // un ['Square','BC'] par exemple\n        const inputT2 = inputSum.ops![1]\n        const answerT1 = answerSum.ops![0]\n        const answerT2 = answerSum.ops![1]\n        for (const term of [inputT1, inputT2]) {\n          // On ne vérifie pas la réponse, c'est nous qui l'avons écrite\n          if (!['Square', 'Power'].includes(term.operator)) {\n            return { isOk: false, feedback: 'Il manque au moins un carré.' }\n          }\n        }\n\n        // c'est la même longueur pour l'hypoténuse ?\n        if (\n          ordreAlphabetique(inputHypo.ops![0].toString()) !==\n          ordreAlphabetique(answerHypo.ops![0].toString())\n        )\n          return { isOk: false, feedback: \"L'hypoténuse est mal identifiée.\" }\n        // l'élève a-t-il bien mis l'hypoténuse au carré ?\n        if (inputHypo.ops![1].toString() !== '2')\n          return {\n            isOk: false,\n            feedback: \"L'hypoténuse doit être mise au carré.\",\n          }\n        if (inputSum.operator !== 'Add')\n          return {\n            isOk: false,\n            feedback:\n              \"Le carré de l'hypoténuse est égal à la $somme$ des carrés des deux autres côtés.\",\n          }\n        // le premier terme de la saisie est-il un carré ?\n        if (!['Square', 'Power'].includes(inputT1.operator))\n          return { isOk: false, feedback: 'Il manque au moins un carré.' }\n        const L1 = ordreAlphabetique(inputT1.ops![0].toString()) // on met la longueur saisie dans l'ordre alphabétique\n        // le deuxième terme de la saisie est-il un carré ?\n        if (!['Square', 'Power'].includes(inputT2.operator))\n          return { isOk: false, feedback: 'Il manque au moins un carré.' }\n        const L2 = ordreAlphabetique(inputT2.ops![0].toString()) // on met la longueur saisie dans l'ordre alphabétique\n        const LL1 = ordreAlphabetique(answerT1.ops![0].toString()) // Ces longueurs sont déjà dans l'ordre alphabétique\n        const LL2 = ordreAlphabetique(answerT2.ops![0].toString())\n        // on teste les deux possibilités identiques ou croisées\n        if ((LL1 === L1 && LL2 === L2) || (LL1 === L2 && LL2 === L1))\n          return { isOk: true }\n        // else return { isOk: false, feedback: 'Regarde bien la correction.' }\n      }\n    }\n  } else {\n    // on a une réponse sans égalité, il faut un input sans égalité\n    // EE : computeEngine 0.47.0\n    // L'usage de mathrm rend le parse problématique alphabétiquement avec un negate d'où les 4 nouvelles lignes\n    // et la suppression de l'ordre alphabétique qui n'a plus d'intérêt.\n    /* input = input.replace(/\\\\mathrm\\{([^}]+)\\}/g, '{$1}')\n    goodAnswer = goodAnswer.replace(/\\\\mathrm\\{([^}]+)\\}/g, '{$1}')\n    parsedInput = engine.parse(input)\n    parsedAnswer = engine.parse(goodAnswer) */\n\n    if (parsedInput.operator !== 'Add')\n      return {\n        isOk: false,\n        feedback: 'Il faut saisir une somme ou une différence de deux carrés.',\n      }\n    const isSub = parsedAnswer.ops![0].operator === 'Negate'\n    const inputOp = parsedInput.ops![0].operator\n    if (isSub && inputOp !== 'Negate')\n      return {\n        isOk: false,\n        feedback: 'Il fallait saisir une différence de deux carrés.',\n      }\n    if (!isSub && inputOp === 'Negate')\n      return {\n        isOk: false,\n        feedback: 'Il fallait saisir une somme de deux carrés.',\n      }\n    if (parsedAnswer.operator !== parsedInput.operator)\n      return {\n        isOk: false,\n        feedback: \"L'opération n'est pas une somme ou une différence.\",\n      }\n\n    const inputT1 = parsedInput.ops![1] // un ['Square','BC'] par exemple\n    const inputT2 = isSub ? parsedInput.ops![0].ops![0] : parsedInput.ops![0]\n    const answerT1 = parsedAnswer.ops![1]\n    const answerT2 = isSub ? parsedAnswer.ops![0].ops![0] : parsedAnswer.ops![0]\n    for (const term of [inputT1, inputT2]) {\n      // On vérifie qu'il y a bien des carrés (on ne vérifie pas la réponse, c'est nous qui l'avons écrite)\n      if (!['Square', 'Power'].includes(term.operator)) {\n        return { isOk: false, feedback: 'Il manque au moins un carré.' }\n      }\n    }\n\n    const L1 = ordreAlphabetique(inputT1.ops![0].toString()).replaceAll('\"', '') // on met la longueur saisie dans l'ordre alphabétique\n    const L2 = ordreAlphabetique(inputT2.ops![0].toString()).replaceAll('\"', '') // on met la longueur saisie dans l'ordre alphabétique\n    // const L1 = inputT1.ops![0].toString().replaceAll('\"', '') // on met la longueur saisie dans l'ordre alphabétique\n    // const L2 = inputT2.ops![0].toString().replaceAll('\"', '') // on met la longueur saisie dans l'ordre alphabétique\n    const LL1 = answerT1.ops![0].toString().replaceAll('\"', '') // Ces longueurs sont déjà dans l'ordre alphabétique\n    const LL2 = answerT2.ops![0].toString().replaceAll('\"', '')\n\n    if ((LL1 === L1 && LL2 === L2) || (LL1 === L2 && LL2 === L1 && !isSub))\n      return { isOk: true }\n    // else return { isOk: false, feedback: 'Regarde bien la correction.' }\n  }\n  // return { isOk: parsedInput.isEqual(parsedAnswer), feedback: '' }\n  return { isOk: false, feedback: 'Regarde bien la correction.' }\n}\n\n/**\n * Exercices sur le théorème de Pythagore avec MathALEA2D\n * @author Rémi Angot (Factorisation de la rédaction de Pythagore par Eric Elter )\n */\nexport const uuid = 'bd660'\n\nexport const refs = {\n  'fr-fr': ['4G20', 'BP2AutoR1', 'BP2G6'],\n  'fr-ch': ['10GM4-1', '11GM1-1'],\n}\n\nexport default class Pythagore2D extends Exercice {\n  typeDeQuestion: string\n  constructor() {\n    super()\n    this.nbQuestions = 3\n    this.nbCols = 3\n\n    this.sup = 3\n    this.sup2 = 3\n    this.sup3 = false\n    this.typeDeQuestion = 'Calculer :'\n    this.video = 'M9sceJ8gzNc'\n    this.besoinFormulaire2Numerique = [\n      'Recherche de côtés ',\n      3,\n      \"1 : Hypoténuse\\n2 : Côtés de l'angle droit\\n3: Mélange\",\n    ]\n  }\n\n  nouvelleVersion() {\n    let listeTypeDeQuestions\n    if (this.sup2 === 1) {\n      listeTypeDeQuestions = ['BC']\n    } else if (this.sup2 === 2) {\n      listeTypeDeQuestions = ['AB', 'AC']\n    } else {\n      listeTypeDeQuestions = ['AB', 'BC', 'AC']\n    }\n    let listeDeNomsDePolygones: string[] = []\n    if (this.sup === 1) {\n      this.consigne =\n        (context.vue !== 'diap' && this.nbQuestions > 1\n          ? 'Dans chaque cas, donner'\n          : 'Donner') + \" l'égalité de Pythagore.\"\n    } else if (this.sup === 2) {\n      this.consigne =\n        (context.vue !== 'diap' && this.nbQuestions > 1\n          ? 'Dans chaque cas, compléter'\n          : 'Compléter') + \" l'égalité en utilisant le théorème de Pythagore.\"\n    } else {\n      this.consigne =\n        (context.vue !== 'diap' && this.nbQuestions > 1\n          ? 'Dans chaque cas, calculer'\n          : 'Calculer') +\n        \" la longueur manquante (si nécessaire, l'arrondir au millimètre près).\"\n    }\n    listeTypeDeQuestions = combinaisonListes(\n      listeTypeDeQuestions,\n      this.nbQuestions,\n    )\n    for (\n      let i = 0, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      if (i % 5 === 0) listeDeNomsDePolygones = ['QD']\n      texte = ''\n      texteCorr = ''\n      const c1 = randint(22, 50) / 10\n      const c2 = randint(22, 50) / 10\n      const A1 = point(0, 0)\n      const B1 = point(c1, 0)\n      const C1 = similitude(B1, A1, 90, c2 / longueur(A1, B1))\n      const p1 = polygone(A1, B1, C1)\n      p1.isVisible = false\n      const p2 = rotation(p1, A1, randint(0, 360))\n      const A = p2.listePoints[0]\n      const B = p2.listePoints[1]\n      const C = p2.listePoints[2]\n      const codage = codageAngleDroit(B, A, C)\n      const xmin = Math.min(A.x, B.x, C.x) - 1\n      const ymin = Math.min(A.y, B.y, C.y) - 1\n      const xmax = Math.max(A.x, B.x, C.x) + 1\n      const ymax = Math.max(A.y, B.y, C.y) + 1\n      const nomDuPolygone = creerNomDePolygone(3, listeDeNomsDePolygones)\n\n      listeDeNomsDePolygones.push(nomDuPolygone)\n      const nomme = nommePolygone(p2, nomDuPolygone)\n      const affAB = afficheLongueurSegment(B, A)\n      const affAC = afficheLongueurSegment(A, C)\n      const affBC = afficheLongueurSegment(C, B)\n      const longueurAB = longueur(A, B, 1)\n      const longueurAC = longueur(A, C, 1)\n      const longueurBC = longueur(B, C, 1)\n      const mesObjetsATracer: NestedObjetMathalea2dArray = [codage, p2, nomme]\n\n      if (\n        this.typeDeQuestion === 'Calculer :' &&\n        listeTypeDeQuestions[i] === 'AB'\n      ) {\n        mesObjetsATracer.push(affAC, affBC)\n      } else if (\n        this.typeDeQuestion === 'Calculer :' &&\n        listeTypeDeQuestions[i] === 'BC'\n      ) {\n        mesObjetsATracer.push(affAC, affAB)\n      } else if (\n        this.typeDeQuestion === 'Calculer :' &&\n        listeTypeDeQuestions[i] === 'AC'\n      ) {\n        mesObjetsATracer.push(affAB, affBC)\n      }\n\n      if (!context.isHtml) {\n        texte = '~\\\\\\\\'\n      }\n      texte += mathalea2d(\n        { xmin, xmax, ymin, ymax, scale: 0.6, style: 'display: block' },\n        mesObjetsATracer,\n      )\n\n      let redaction\n      let nomCote = ''\n      if (this.typeDeQuestion === 'Calculer :') {\n        let reponse\n        if (listeTypeDeQuestions[i] === 'AB') {\n          nomCote = A.nom + B.nom\n          reponse = arrondi(Math.sqrt(longueurBC ** 2 - longueurAC ** 2), 1)\n          redaction = RedactionPythagore(\n            A.nom,\n            B.nom,\n            C.nom,\n            2,\n            reponse,\n            longueurAC,\n            longueurBC,\n          )\n        } else if (listeTypeDeQuestions[i] === 'BC') {\n          nomCote = B.nom + C.nom\n          reponse = arrondi(Math.sqrt(longueurAB ** 2 + longueurAC ** 2), 1)\n          redaction = RedactionPythagore(\n            A.nom,\n            B.nom,\n            C.nom,\n            1,\n            longueurAB,\n            longueurAC,\n            reponse,\n          )\n        } else {\n          // listeTypeDeQuestions[i] === 'AC'\n          nomCote = A.nom + C.nom\n          reponse = arrondi(Math.sqrt(longueurBC ** 2 - longueurAB ** 2), 1)\n          redaction = RedactionPythagore(\n            A.nom,\n            C.nom,\n            B.nom,\n            2,\n            reponse,\n            longueurAB,\n            longueurBC,\n          )\n        }\n        texteCorr = redaction[0] ?? ''\n        texte += this.interactif\n          ? `$${nomCote} ${redaction[1]}$` +\n            ajouteChampTexteMathLive(this, i, KeyboardType.longueur, {\n              texteApres:\n                '<em class=\"ml-2\">(Une unité de longueur est attendue.)</em>',\n            })\n          : ''\n        handleAnswers(this, i, {\n          reponse: {\n            value: new Grandeur(reponse, 'cm'),\n            options: { precisionUnite: 0.1, unite: true },\n          },\n        })\n\n        if (context.isAmc) {\n          this.autoCorrection[i] = {\n            enonce: texte,\n            enonceAvant: false,\n            propositions: [\n              {\n                type: 'AMCOpen',\n                propositions: [\n                  {\n                    texte: '',\n                    enonce: 'Calculer la longueur manquante.\\\\\\\\',\n                    statut: 3,\n                    pointilles: true,\n                    multicolsBegin: true,\n                  },\n                ],\n              },\n              {\n                type: 'AMCNum',\n                propositions: [\n                  {\n                    texte: '',\n                    statut: '',\n                    multicolsEnd: true,\n                    reponse: {\n                      texte: texte + 'longueur arrondie à 0,1 cm : ',\n                      valeur: [arrondi(reponse, 1)],\n                      param: {\n                        digits: Math.max(nombreDeChiffresDe(reponse), 2),\n                        decimals: 1,\n                        signe: false,\n                      },\n                    },\n                  },\n                ],\n              },\n            ],\n          }\n        }\n      } else {\n        const hypotenuse = [\n          `\\\\mathrm{${ordreAlphabetique(B.nom + C.nom)}}^2`,\n          `\\\\mathrm{${ordreAlphabetique(C.nom + B.nom)}}^2`,\n        ]\n        const cote1 = [\n          `\\\\mathrm{${ordreAlphabetique(B.nom + A.nom)}}^2`,\n          `\\\\mathrm{${ordreAlphabetique(A.nom + B.nom)}}^2`,\n        ]\n        const cote2 = [\n          `\\\\mathrm{${ordreAlphabetique(C.nom + A.nom)}}^2`,\n          `\\\\mathrm{${ordreAlphabetique(A.nom + C.nom)}}^2`,\n        ]\n\n        if (this.interactif) {\n          handleButtons(this.numeroExercice ?? 0, i, A.nom, B.nom, C.nom)\n        }\n\n        redaction = RedactionPythagore(\n          A.nom,\n          B.nom,\n          C.nom,\n          0,\n          longueurAB,\n          longueurAC,\n          undefined,\n          undefined,\n          this.sup === 1 || listeTypeDeQuestions[i] === 'BC'\n            ? orangeMathalea\n            : bleuMathalea,\n        )\n        texteCorr = redaction[0] ?? ''\n        let expr\n        if (this.sup === 1) {\n          expr = cote1[0] + '+' + cote2[0] + '=' + hypotenuse[0]\n        } else {\n          if (listeTypeDeQuestions[i] === 'AB') {\n            texte += `<br>$${A.nom + B.nom}^2=$`\n            texteCorr += '<br>'\n            texteCorr += ` d'où $${miseEnEvidence(`${A.nom + B.nom}^2=${B.nom + C.nom}^2-${A.nom + C.nom}^2`)}$.`\n            expr = `\\\\mathrm{${ordreAlphabetique(B.nom + C.nom)}}^2-\\\\mathrm{${ordreAlphabetique(A.nom + C.nom)}}^2`\n          } else if (listeTypeDeQuestions[i] === 'AC') {\n            texte += `<br>$${A.nom + C.nom}^2=$`\n            texteCorr += '<br>'\n            texteCorr += ` d'où $${miseEnEvidence(`${A.nom + C.nom}^2=${B.nom + C.nom}^2-${A.nom + B.nom}^2`)}$.`\n            expr = `\\\\mathrm{${ordreAlphabetique(B.nom + C.nom)}}^2-\\\\mathrm{${ordreAlphabetique(A.nom + B.nom)}}^2`\n          } else {\n            texte += `<br>$${B.nom + C.nom}^2=$`\n            expr = `\\\\mathrm{${ordreAlphabetique(A.nom + B.nom)}}^2+\\\\mathrm{${ordreAlphabetique(A.nom + C.nom)}}^2`\n          }\n          texte += this.interactif ? '' : `$${sp(2)}\\\\ldots$`\n        }\n\n        if (this.interactif) {\n          handleAnswers(this, i, {\n            reponse: { value: expr, compare: pythagoreCompare },\n          })\n          texte += ajouteChampTexteMathLive(\n            this,\n            i,\n            `${KeyboardType.clavierDeBase} ${KeyboardType.alphanumeric}`,\n          )\n          texte += `<div id=\"containerForButtonsEx${this.numeroExercice}Q${i}\"></div>`\n        }\n      }\n      if (this.questionJamaisPosee(i, B1.x, B.y, C1.x, C1.y)) {\n        // Si la question n'a jamais été posée, on en créé une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction handleButtons(\n  numeroExercice: number,\n  indiceQuestion: number,\n  label1: string,\n  label2: string,\n  label3: string,\n) {\n  // wait for event 'exercicesAffiches'\n  document.addEventListener('exercicesAffiches', () => {\n    const container = document.getElementById(\n      `containerForButtonsEx${numeroExercice}Q${indiceQuestion}`,\n    )\n    if (!container) return\n    container.innerHTML = ''\n    container.classList.add('my-4')\n    const mathfield = document.querySelector(\n      `#champTexteEx${numeroExercice}Q${indiceQuestion}`,\n    ) as MathfieldElement\n    if (!mathfield) return\n    const addButton = (label: string, insertText: string) => {\n      const button = document.createElement('button')\n      button.textContent = label\n      button.className =\n        'inline-flex mx-4 justify-center items-center text-sm md:text-xl border-b-2 border-r border-r-slate-400 dark:border-r-gray-500 border-b-slate-300 dark:border-b-gray-600 active:border-b-0 active:border-r-0 text-coopmaths-corpus-light dark:text-coopmathsdark-corpus-light active:text-coopmaths-canvas active:translate-y-[1.5px] dark:active:text-coopmathsdark-canvas active:bg-coopmaths-action active:shadow-none dark:active:bg-coopmathsdark-action dark:active:shadow-none transition-transform ease-in-out shadow-[2px_2px_4px_rgba(180,180,180,0.5)] bg-coopmaths-canvas-darkest dark:bg-coopmathsdark-canvas py-1 px-1 md:py-2 md:px-4 text-center rounded-md font-mono touch-none'\n      button.addEventListener('click', () => {\n        if (insertText === 'remove') {\n          mathfield.executeCommand('deleteBackward')\n        } else {\n          mathfield.insert(insertText)\n        }\n      })\n      container.appendChild(button)\n    }\n    addButton(label1, label1)\n    addButton(label2, label2)\n    addButton(label3, label3)\n    addButton('+', '+')\n    addButton('-', '-')\n    addButton('=', '=')\n    addButton('²', '^2')\n    addButton('⌫', 'remove')\n  })\n}\n"],"names":["titre","amcType","amcReady","interactifReady","interactifType","pythagoreCompare","input","goodAnswer","parsedInput","engine","parsedAnswer","inputOps","answerOps","inputM1","inputM2","answerSum","answerHypo","inputHypo","inputSum","inputT1","inputT2","answerT1","answerT2","term","ordreAlphabetique","L1","L2","LL1","LL2","isSub","inputOp","uuid","refs","Pythagore2D","Exercice","__publicField","listeTypeDeQuestions","listeDeNomsDePolygones","context","combinaisonListes","i","texte","texteCorr","cpt","c1","randint","c2","A1","point","B1","C1","similitude","longueur","p1","polygone","p2","rotation","A","B","C","codage","codageAngleDroit","xmin","ymin","xmax","ymax","nomDuPolygone","creerNomDePolygone","nomme","nommePolygone","affAB","afficheLongueurSegment","affAC","affBC","longueurAB","longueurAC","longueurBC","mesObjetsATracer","mathalea2d","redaction","nomCote","reponse","arrondi","RedactionPythagore","ajouteChampTexteMathLive","KeyboardType","handleAnswers","Grandeur","nombreDeChiffresDe","hypotenuse","cote1","cote2","handleButtons","orangeMathalea","bleuMathalea","expr","miseEnEvidence","sp","listeQuestionsToContenu","numeroExercice","indiceQuestion","label1","label2","label3","container","mathfield","addButton","label","insertText","button"],"mappings":"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"}