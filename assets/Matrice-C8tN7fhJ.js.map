{"version":3,"file":"Matrice-C8tN7fhJ.js","sources":["../../src/lib/mathFonctions/Matrice.js"],"sourcesContent":["import {\n  addDependencies,\n  create,\n  detDependencies,\n  divideDependencies,\n  fractionDependencies,\n  indexDependencies,\n  invDependencies,\n  matrixDependencies,\n  multiplyDependencies,\n  parseDependencies,\n  subsetDependencies,\n  transposeDependencies,\n  zerosDependencies,\n} from 'mathjs'\n\nimport { rangeMinMax } from '../outils/nombres'\n\nconst config = {\n  epsilon: 1e-12,\n  matrix: 'Array',\n  number: 'Fraction',\n  precision: 64,\n  predictable: false,\n  randomSeed: null,\n}\n\nconst math = create(\n  {\n    addDependencies,\n    detDependencies,\n    divideDependencies,\n    indexDependencies,\n    invDependencies,\n    matrixDependencies,\n    multiplyDependencies,\n    parseDependencies,\n    subsetDependencies,\n    transposeDependencies,\n    zerosDependencies,\n    fractionDependencies,\n  },\n  config,\n)\n\n/**\n *\n * Classe MatriceCarree\n *  Cette classe a été crée à une époque où nous n'utilisions pas encore la librairie mathjs !\n *  Vous avez le choix d'utiliser ce code ou d'utiliser mathjs et toutes ses possibilités de calcul matriciel\n * Générateur de Matrice :\n * Si l'argument est un nombre, alors on s'en sert pour définir la taille de la matrice carrée qu'on rempli de zéros.\n * Sinon, c'est le tableau qui sert à remplir la Matrice\n * // Créer une matrice\n * const A = new Matrice([\n *   [2, 3],\n *  [1, 4],\n * ])\n *\n * console.log('A =', A._data)\n * console.log('det(A) =', A.determinant())\n * const B = A.inverse()\n * console.log('A⁻¹ =', B._data)\n * const C = A.multiply(B)\n * console.log('A × A⁻¹ =', C._data)\n * // Affichage LaTeX (par exemple pour KaTeX ou MathJax)\n * console.log('LaTeX de A :', A.toTex())\n * console.log('Déterminant LaTeX :', A.texDet())\n *\n * Refactoring par Mickael Guironnet 10/2025 pour éviter de charger tout MATHJS\n *  @author Jean-Claude Lhote & Mickael Guironnet\n */\nexport class Matrice {\n  constructor(table) {\n    this._data = Array.isArray(table)\n      ? table\n      : math.zeros(table, table).valueOf()\n    this.dim = this._data.length\n  }\n\n  determinant() {\n    return math.det(this._data)\n  }\n\n  inverse() {\n    return math.det(this._data) !== 0\n      ? matrice(math.inv(this._data))\n      : new Matrice(math.zeros(this.dim, this.dim).valueOf())\n  }\n\n  /**\n   * Extraction d'une sous-matrice ou un element\n   * @param {Array|number} lignes indices de lignes à garder\n   * @param {Array|number} colonnes indices de colonnes à garder\n   */\n  subset(lignes, colonnes) {\n    const sub = math.subset(this._data, math.index(lignes, colonnes))\n    return typeof sub === 'number' ? sub : matrice(sub)\n  }\n\n  // ✅ Récupérer un élément spécifique\n  getValue(i, j) {\n    return math.subset(this._data, math.index(i, j))\n  }\n\n  transpose() {\n    return matrice(math.transpose(this._data))\n  }\n\n  multiply(v) {\n    // On récupère toujours les données réelles\n    const vData = v._data ?? v // si v._data existe, on l'utilise, sinon v lui-même\n\n    const produit = math.multiply(this._data, vData)\n\n    // Si le résultat n'est pas une matrice (ex: scalaire), on retourne tel quel\n    if (!Array.isArray(produit)) return produit\n\n    // Sinon on retourne une nouvelle instance de Matrice\n    return matrice(produit)\n  }\n\n  add(m) {\n    return matrice(math.add(this._data, m))\n  }\n\n  divide(k) {\n    return matrice(math.divide(this._data, k))\n  }\n\n  toTex() {\n    return math.parse(this.toString()).toTex().replaceAll('bmatrix', 'pmatrix')\n  }\n\n  toArray() {\n    return this._data\n  }\n\n  // Retourne la matrice sous forme de chaîne mathjs-compatible\n  toString() {\n    return (\n      '[' + this._data.map((row) => '[' + row.join(',') + ']').join(',') + ']'\n    )\n  }\n\n  texDet() {\n    let content = ''\n    for (let arrIndex = 0; arrIndex < this._data.length; arrIndex++) {\n      content += `${this._data[arrIndex].join(' & ')}`\n      if (arrIndex < this._data.length - 1) content += '\\\\\\\\'\n    }\n    return `\\\\begin{vmatrix}\\n${content}\\n\\\\end{vmatrix}`\n  }\n\n  reduite(l, c) {\n    const lignes = rangeMinMax(0, this.dim - 1, l)\n    const colonnes = rangeMinMax(0, this.dim - 1, c)\n    return matrice(math.subset(this._data, math.index(lignes, colonnes)))\n  }\n}\n\nexport function matrice(table) {\n  if (Array.isArray(table) || typeof table === 'number') {\n    return new Matrice(table)\n  } else if (table._data != null) {\n    return new Matrice(table._data)\n  }\n  // on doit jamais arriver ici normalement\n  throw new Error('Invalid argument for matrice()')\n}\n"],"names":["config","math","create","addDependencies","detDependencies","divideDependencies","indexDependencies","invDependencies","matrixDependencies","multiplyDependencies","parseDependencies","subsetDependencies","transposeDependencies","zerosDependencies","fractionDependencies","Matrice","table","matrice","lignes","colonnes","sub","i","j","v","vData","produit","m","k","row","content","arrIndex","l","c","rangeMinMax"],"mappings":"wKAkBA,MAAMA,EAAS,CACb,QAAS,MACT,OAAQ,QACR,OAAQ,WACR,UAAW,GACX,YAAa,GACb,WAAY,IACd,EAEMC,EAAOC,EACX,CACE,gBAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,kBAAAC,EACA,gBAAAC,EACA,mBAAAC,EACA,qBAAAC,EACA,kBAAAC,EACA,mBAAAC,EACA,sBAAAC,EACA,kBAAAC,EACA,qBAAAC,CACJ,EACEd,CACF,EA6BO,MAAMe,CAAQ,CACnB,YAAYC,EAAO,CACjB,KAAK,MAAQ,MAAM,QAAQA,CAAK,EAC5BA,EACAf,EAAK,MAAMe,EAAOA,CAAK,EAAE,QAAO,EACpC,KAAK,IAAM,KAAK,MAAM,MACxB,CAEA,aAAc,CACZ,OAAOf,EAAK,IAAI,KAAK,KAAK,CAC5B,CAEA,SAAU,CACR,OAAOA,EAAK,IAAI,KAAK,KAAK,IAAM,EAC5BgB,EAAQhB,EAAK,IAAI,KAAK,KAAK,CAAC,EAC5B,IAAIc,EAAQd,EAAK,MAAM,KAAK,IAAK,KAAK,GAAG,EAAE,QAAO,CAAE,CAC1D,CAOA,OAAOiB,EAAQC,EAAU,CACvB,MAAMC,EAAMnB,EAAK,OAAO,KAAK,MAAOA,EAAK,MAAMiB,EAAQC,CAAQ,CAAC,EAChE,OAAO,OAAOC,GAAQ,SAAWA,EAAMH,EAAQG,CAAG,CACpD,CAGA,SAASC,EAAGC,EAAG,CACb,OAAOrB,EAAK,OAAO,KAAK,MAAOA,EAAK,MAAMoB,EAAGC,CAAC,CAAC,CACjD,CAEA,WAAY,CACV,OAAOL,EAAQhB,EAAK,UAAU,KAAK,KAAK,CAAC,CAC3C,CAEA,SAASsB,EAAG,CAEV,MAAMC,EAAQD,EAAE,OAASA,EAEnBE,EAAUxB,EAAK,SAAS,KAAK,MAAOuB,CAAK,EAG/C,OAAK,MAAM,QAAQC,CAAO,EAGnBR,EAAQQ,CAAO,EAHcA,CAItC,CAEA,IAAIC,EAAG,CACL,OAAOT,EAAQhB,EAAK,IAAI,KAAK,MAAOyB,CAAC,CAAC,CACxC,CAEA,OAAOC,EAAG,CACR,OAAOV,EAAQhB,EAAK,OAAO,KAAK,MAAO0B,CAAC,CAAC,CAC3C,CAEA,OAAQ,CACN,OAAO1B,EAAK,MAAM,KAAK,SAAQ,CAAE,EAAE,MAAK,EAAG,WAAW,UAAW,SAAS,CAC5E,CAEA,SAAU,CACR,OAAO,KAAK,KACd,CAGA,UAAW,CACT,MACE,IAAM,KAAK,MAAM,IAAK2B,GAAQ,IAAMA,EAAI,KAAK,GAAG,EAAI,GAAG,EAAE,KAAK,GAAG,EAAI,GAEzE,CAEA,QAAS,CACP,IAAIC,EAAU,GACd,QAASC,EAAW,EAAGA,EAAW,KAAK,MAAM,OAAQA,IACnDD,GAAW,GAAG,KAAK,MAAMC,CAAQ,EAAE,KAAK,KAAK,CAAC,GAC1CA,EAAW,KAAK,MAAM,OAAS,IAAGD,GAAW,QAEnD,MAAO;AAAA,EAAqBA,CAAO;AAAA,eACrC,CAEA,QAAQE,EAAGC,EAAG,CACZ,MAAMd,EAASe,EAAY,EAAG,KAAK,IAAM,EAAGF,CAAC,EACvCZ,EAAWc,EAAY,EAAG,KAAK,IAAM,EAAGD,CAAC,EAC/C,OAAOf,EAAQhB,EAAK,OAAO,KAAK,MAAOA,EAAK,MAAMiB,EAAQC,CAAQ,CAAC,CAAC,CACtE,CACF,CAEO,SAASF,EAAQD,EAAO,CAC7B,GAAI,MAAM,QAAQA,CAAK,GAAK,OAAOA,GAAU,SAC3C,OAAO,IAAID,EAAQC,CAAK,EACnB,GAAIA,EAAM,OAAS,KACxB,OAAO,IAAID,EAAQC,EAAM,KAAK,EAGhC,MAAM,IAAI,MAAM,gCAAgC,CAClD"}