{"version":3,"file":"4P10-1-CEAkfQdG.js","sources":["../../src/exercices/4e/4P10-1.ts"],"sourcesContent":["import { courbe } from '../../lib/2d/Courbe'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { repere } from '../../lib/2d/reperes'\nimport { segment } from '../../lib/2d/segmentsVecteurs'\nimport { texPrix, texteGras } from '../../lib/format/style'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { texteEnCouleur } from '../../lib/outils/embellissements'\nimport { arrondi } from '../../lib/outils/nombres'\nimport { numAlpha } from '../../lib/outils/outilString'\nimport { prenom } from '../../lib/outils/Personne'\nimport { premierMultipleSuperieur } from '../../lib/outils/primalite'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\nexport const titre =\n  \"Résoudre un problème de proportionnalité à l'aide d'un graphique\"\n\n/**\n * fork de 4P10-1 par Jean-Claude Lhote\n * @author Sébastien LOZANO\n */\n\nexport const uuid = 'c668a'\n\nexport const refs = {\n  'fr-fr': ['4P10-1', 'BP2AutoL2'],\n  'fr-ch': ['9FA3-15', '10FA4-3'],\n}\nexport default class GraphiquesEtProportionnalite2 extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 1\n    this.spacingCorr = 2\n    this.spacing = context.isHtml ? 2 : 1\n  }\n\n  nouvelleVersion() {\n    for (\n      let i = 0, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      // on prévoit un peu d'aléatoire pour les prix unitaires\n      const prixUnitaireOranges = choice([0.8, 1.2, 1.4])\n      const prixUnitaireBaguettes = choice([0.6, 0.8, 1.2])\n      // on prévoit un tableau avec des situations\n      const situations = [\n        {\n          lieu: \"l'épicerie\",\n          prenom: prenom(),\n          articles: 'oranges',\n          art_articles: \"d'oranges\",\n          prix_unitaire: prixUnitaireOranges,\n          qte: 'poids',\n          qte_max: 10,\n          qte2: randint(2, 7),\n          unite: \"kg d'\",\n          legendeX: 'poids en kg',\n          legendeY: 'prix en €',\n          fig: {},\n          figureCorr: {},\n        },\n        {\n          lieu: 'la boulangerie',\n          prenom: prenom(),\n          articles: 'baguettes',\n          art_articles: 'de baguettes',\n          prix_unitaire: prixUnitaireBaguettes,\n          qte: 'nombre',\n          qte_max: 10,\n          qte2: randint(2, 7),\n          unite: '',\n          legendeX: 'quantité',\n          legendeY: 'prix en €',\n          fig: {},\n          figureCorr: {},\n        },\n      ]\n      // on en choisit une\n      const situation = choice(situations)\n      let r\n      const xscale = 1\n      const yscale = 1\n      // pour aléatoiriser un peu le pas sur l'axe des prix\n      const stepAxeSecondaire = 0.2\n      // on finit les appels\n      const mesAppels: NestedObjetMathalea2dArray = [\n        (r = repere({\n          xMin: 0,\n          yMin: 0,\n          yMax: premierMultipleSuperieur(\n            yscale,\n            (situation.qte_max + 1) * situation.prix_unitaire + yscale,\n          ),\n          xMax: situation.qte_max + 1,\n          xUnite: 1,\n          yUnite: 1 / yscale,\n          yThickDistance: yscale,\n          xLegende: situation.legendeX,\n          yLegende: situation.legendeY,\n          grille: true,\n          grilleOpacite: 0.5,\n          grilleXDistance: 1,\n          grilleYDistance: yscale,\n          grilleXMin: 0,\n          grilleYMin: 0,\n          grilleSecondaire: true,\n          grilleSecondaireXDistance: 0.2,\n          grilleSecondaireYDistance: yscale / 5,\n          grilleSecondaireXMin: 0,\n          grilleSecondaireYMin: 0,\n          grilleSecondaireXMax: situation.qte_max + 1,\n          grilleSecondaireYMax: premierMultipleSuperieur(\n            yscale,\n            (situation.qte_max + 1) * situation.prix_unitaire + yscale,\n          ),\n          yLegendePosition: [\n            1,\n            premierMultipleSuperieur(\n              yscale,\n              (situation.qte_max + 1) * situation.prix_unitaire + yscale,\n            ) /\n              yscale +\n              0.5,\n          ],\n          xLegendePosition: [situation.qte_max + 1 + 0.2, -1],\n        })),\n      ]\n      const f = (x: number) => situation.prix_unitaire * x\n      mesAppels.push(\n        r,\n        courbe(f, {\n          repere: r,\n          xMin: 0,\n          xMax: situation.qte_max + 1,\n          color: 'black',\n          epaisseur: 1.5,\n        }),\n      )\n      // on prépare l'objet figure\n      const fig = mathalea2d(\n        {\n          xmin: -xscale,\n          ymin: -1.5,\n          xmax: situation.qte_max / xscale + 3,\n          ymax:\n            ((situation.qte_max + 1) * situation.prix_unitaire + yscale) /\n              yscale +\n            2,\n          pixelsParCm: 30,\n        },\n        mesAppels,\n      )\n      situation.fig = fig\n\n      // on prépare les appels supplémentaires pour la correction\n      const mesAppelsCorr = mesAppels\n      const A = point(situation.qte_max, 0)\n      const B = point(\n        situation.qte_max,\n        arrondi((situation.qte_max * situation.prix_unitaire) / yscale),\n      )\n      const s1 = segment(A, B, 'red')\n      s1.epaisseur = 2\n      s1.pointilles = 5\n      s1.styleExtremites = '->'\n      const C = point(\n        0,\n        arrondi((situation.qte_max * situation.prix_unitaire) / yscale),\n      )\n      const s2 = segment(B, C, 'red')\n      s2.epaisseur = 2\n      s2.pointilles = 5\n      s2.styleExtremites = '->'\n\n      const D = point(situation.qte2, 0)\n      const E = point(\n        situation.qte2,\n        arrondi((situation.qte2 * situation.prix_unitaire) / yscale),\n      )\n      const s3 = segment(D, E, 'blue')\n      s3.epaisseur = 2\n      s3.pointilles = 5\n      s3.styleExtremites = '->'\n      const F = point(\n        0,\n        arrondi((situation.qte2 * situation.prix_unitaire) / yscale),\n      )\n      const s4 = segment(E, F, 'blue')\n      s4.epaisseur = 2\n      s4.pointilles = 5\n      s4.styleExtremites = '->'\n\n      // on ajoute les appels pour la correction\n      mesAppelsCorr.push(s1, s2, s3, s4)\n\n      // on prépare l'objet figure correction\n      const figureCorr = mathalea2d(\n        {\n          xmin: -xscale,\n          ymin: -1,\n          xmax: situation.qte_max / xscale + 3,\n          ymax: (situation.qte_max * situation.prix_unitaire + 4) / yscale + 1,\n          pixelsParCm: 30,\n        },\n        mesAppelsCorr,\n      )\n      situation.figureCorr = figureCorr\n\n      // un compteur pour les sous-questions\n      let k = 0\n      let kCorr = 0\n\n      const enonces = []\n      enonces.push({\n        enonce: `\n          À ${situation.lieu}, ${situation.prenom} utilise le graphique ci-dessous pour indiquer le prix de ses ${situation.articles} en fonction du ${situation.qte} ${situation.art_articles}.\n          <br>${situation.fig}\n          ${numAlpha(k++)} Justifier que c'est une situation de proportionnalité à l'aide du graphique.\n          <br> ${numAlpha(k++)} Quel est le prix de $${situation.qte_max}$ ${situation.unite}  ${situation.articles} ?\n          <br> ${numAlpha(k++)} Quel est le prix de $${situation.qte2}$ ${situation.unite}  ${situation.articles} ?\n          `,\n        // question:``,\n        correction: `\n         ${numAlpha(kCorr++)} Ce graphique est une droite qui passe par l'origine.\n        <br> ${texteEnCouleur(\"C'est donc bien le graphique d'une situation de proportionnalité.\")}\n        <br> ${numAlpha(kCorr++)} Par lecture graphique, en utilisant les pointillés rouges du graphe ci-dessous, ${texteEnCouleur(`${situation.qte_max} ${situation.unite}  ${situation.articles} coûtent ${texPrix(arrondi(situation.qte_max * situation.prix_unitaire))} €.`)}\n        <br> ${situation.figureCorr}\n        ${numAlpha(kCorr++)} Pour $${situation.qte2}$ ${situation.unite}  ${situation.articles}, la lecture graphique est moins facile, nous allons détailler deux méthodes.\n        <br><br> ${texteGras('Première méthode par lecture graphique :')}\n        <br> Il faut prendre en compte que chaque petit carreau représente $${texPrix(stepAxeSecondaire * yscale)}$ € et utiliser les pointillés bleus.\n        <br><br> ${texteGras('Seconde méthode en calculant une quatrième proportionnelle :')}\n        <br> $${situation.qte_max}$ ${situation.unite}  ${situation.articles} coûtent $${texPrix(arrondi(situation.qte_max * situation.prix_unitaire))}$ €\n        donc $${situation.qte2}$ ${situation.unite}  ${situation.articles} coûtent : <br> $(${texPrix(arrondi(situation.qte_max * situation.prix_unitaire))}$ € $\\\\div ${situation.qte_max}$ ${situation.articles} $)\\\\times (${situation.qte2}$ ${situation.articles})  $= ${texPrix(arrondi(situation.qte2 * situation.prix_unitaire))}$ €\n        <br><br>${texteEnCouleur(`Quelle que soit la méthode utilisée, ${situation.qte2} ${situation.unite}  ${situation.articles} coûtent ${texPrix(arrondi(situation.qte2 * situation.prix_unitaire)).replace('{,}', ',')} €.`)}\n        `,\n      })\n      texte = `${enonces[0].enonce}`\n      texteCorr = `${enonces[0].correction}`\n\n      if (\n        this.questionJamaisPosee(i, prixUnitaireBaguettes, prixUnitaireOranges)\n      ) {\n        // Si la question n'a jamais été posée, on en créé une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","uuid","refs","GraphiquesEtProportionnalite2","Exercice","context","i","texte","texteCorr","cpt","prixUnitaireOranges","choice","prixUnitaireBaguettes","situations","prenom","randint","situation","r","xscale","yscale","stepAxeSecondaire","mesAppels","repere","premierMultipleSuperieur","f","x","courbe","fig","mathalea2d","mesAppelsCorr","A","point","B","arrondi","s1","segment","C","s2","D","E","s3","F","s4","figureCorr","k","kCorr","enonces","numAlpha","texteEnCouleur","texPrix","texteGras","listeQuestionsToContenu"],"mappings":"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"}