{"version":3,"file":"CM2G5B-2-CI57yPvk.js","sources":["../../src/exercices/CM2/CM2G5B-2.ts"],"sourcesContent":["import { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { point3d } from '../../lib/3d/3dProjectionMathalea2d/elementsEtTransformations3d'\nimport { pave3d } from '../../lib/3d/3dProjectionMathalea2d/PaveEtPaveLPH3dPerspectiveCavaliere'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport { propositionsQcm } from '../../lib/interactif/qcm'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choisitLettresDifferentes } from '../../lib/outils/aleatoires'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { texteEnCouleurEtGras } from '../../lib/outils/embellissements'\nimport { rangeMinMax } from '../../lib/outils/nombres'\nimport { numAlpha } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Nommer des faces dans un pavé droit'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\nexport const interactifReady = true\nexport const interactifType = ['qcm', 'mathLive']\n\nexport const dateDePublication = '06/11/2022'\n\n/**\n * Nommer des faces dans un pavé droit\n * @author Eric Elter\n */\n\nexport const uuid = '6809f'\n\nexport const refs = {\n  'fr-fr': ['CM2G5B-2', 'BP2G1'],\n  'fr-2016': ['6G42-1', 'BP2G1'],\n  'fr-ch': ['9ES7-5'],\n}\n\n/**\n * Inverse une chaîne de caractères\n * @param {string} str Chaîne à inverser\n * @author Eric Elter\n * @example inverseChaine('laval') renvoie 'laval' /// Hihihihi...\n * @example inverseChaine('parfait') renvoie 'tiafrap'\n * @example inverseChaine('1234') renvoie '4321'\n */\nfunction inverseChaine(str: string): string {\n  return str === '' ? '' : inverseChaine(str.substr(1)) + str.charAt(0)\n}\n\nfunction differentsNomsPossiblesDUneFace(\n  face: string,\n  nomSolide: string,\n): string[] {\n  let nouvelleFaceChiffree = ''\n  let nouvelleFace = ''\n  const tabChiffre: string[] = [face, inverseChaine(face)]\n  const tab = []\n  for (let i = 0; i < face.length - 1; i++) {\n    nouvelleFaceChiffree = `${tabChiffre[2 * i].charAt(3)}${tabChiffre[2 * i].slice(0, 3)}`\n    tabChiffre.push(nouvelleFaceChiffree, inverseChaine(nouvelleFaceChiffree))\n  }\n  for (let i = 0; i < tabChiffre.length; i++) {\n    nouvelleFace = ''\n    for (let j = 0; j < face.length; j++) {\n      nouvelleFace += nomSolide[Number(tabChiffre[i][j])]\n    }\n    tab.push(nouvelleFace)\n  }\n  return tab\n}\nexport default class LireFacePaveDroit extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Nombre de faces à trouver (entre 1 et 6)',\n      6,\n    ]\n    this.besoinFormulaire2Texte = [\n      'Faces à exclure du choix',\n      'Nombres séparés par des tirets :\\n1 : de devant\\n2 : de derrière\\n3 : de gauche\\n4 : de droite\\n5 : du dessus\\n6 : du dessous\\n7 : aucune à exclure',\n    ]\n    this.besoinFormulaire3Numerique = [\n      \"Type d'exercice interactif ou AMC\",\n      2,\n      '1 : QCM\\n2 : Numérique',\n    ]\n    this.besoinFormulaire4Numerique = [\n      'Nombre de réponses dans le QCM (entre 2 et 6)',\n      6,\n    ]\n    this.nbQuestions = 1\n    this.sup = 3\n    this.sup2 = 7\n    this.sup3 = 1\n    this.sup4 = 6\n  }\n\n  nouvelleVersion() {\n    this.sup4 = contraindreValeur(2, 6, this.sup4, 6)\n    this.interactifType = this.sup3 === 2 ? 'mathLive' : 'qcm'\n\n    const typesDeQuestionsIndisponibles = gestionnaireFormulaireTexte({\n      max: 6,\n      defaut: randint(1, 6),\n      nbQuestions: this.nbQuestions,\n      shuffle: false,\n      saisie: this.sup2,\n      enleveDoublons: true,\n      melange: 0,\n    }).map(Number)\n\n    function comparerNombres(a: number, b: number): number {\n      return a - b\n    }\n\n    typesDeQuestionsIndisponibles.sort(comparerNombres)\n    let choixFace = rangeMinMax(0, 5)\n    for (let i = typesDeQuestionsIndisponibles.length - 1; i >= 0; i--) {\n      choixFace.splice(typesDeQuestionsIndisponibles[i], 1)\n    }\n    choixFace = combinaisonListes(choixFace, choixFace.length)\n    let indiceQuestion\n\n    for (\n      let i = 0,\n        texte,\n        texteCorr,\n        objetsEnonce,\n        A,\n        B,\n        D,\n        E,\n        solideDessine,\n        nomSolide,\n        enonceAMC,\n        enonceFigure,\n        L,\n        p,\n        choixProfondeur,\n        facesPossibles,\n        h,\n        resultatsPossibles,\n        cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      texte = ''\n      texteCorr = ''\n      objetsEnonce = []\n      let resultatsImpossibles = []\n      context.anglePerspective = choice([-30, -60, 30, 60])\n\n      L = randint(5, 20)\n      h = randint(5, 20, [L])\n      p = randint(5, 20, [L, h])\n      A = point3d(0, 0, 0)\n      B = point3d(L, 0, 0)\n      D = point3d(0, 0, h)\n      choixProfondeur = choice([p, -p])\n      E = point3d(0, choixProfondeur, 0)\n\n      nomSolide = choisitLettresDifferentes(8, 'OQWXD').join('')\n      solideDessine = pave3d(A, B, D, E, 'blue', true, nomSolide)\n      objetsEnonce.push(...solideDessine.c2d)\n      // enonceFigure = (context.isAmc ? '' : '<br>') + mathalea2d(Object.assign({}, fixeBordures(objetsEnonce), { scale: context.isHtml ? 0.7 : 0.2, style: 'block' }), objetsEnonce) + '<br>'\n      enonceFigure =\n        mathalea2d(\n          Object.assign({}, fixeBordures(objetsEnonce), {\n            scale: context.isHtml ? 0.7 : 0.3,\n            style: 'block',\n          }),\n          objetsEnonce,\n        ) + '<br>'\n      texte += enonceFigure\n      facesPossibles = [\n        ['de devant', '0123'],\n        ['de derrière', '4567'],\n        ['de gauche', '0374'],\n        ['de droite', '1265'],\n        ['du dessus', '2376'],\n        ['du dessous', '0154'],\n      ]\n\n      if (context.isAmc) {\n        this.autoCorrection[i] = {\n          enonce: enonceFigure,\n          enonceCentre: false,\n          options: {\n            ordered: false,\n          },\n        }\n        this.autoCorrection[i].propositions = []\n      }\n\n      for (let ee = 0; ee < Math.min(choixFace.length, this.sup); ee++) {\n        indiceQuestion = i * Math.min(choixFace.length, this.sup) + ee\n\n        enonceAMC =\n          this.sup === 1\n            ? ''\n            : (ee === 0 || context.isAmc ? '' : '<br>') + numAlpha(ee)\n\n        enonceAMC += `Comment peut se nommer la face ${facesPossibles[choixFace[ee]][0]} du pavé droit ${nomSolide} ?`\n        texte += enonceAMC\n        resultatsPossibles = combinaisonListes(\n          differentsNomsPossiblesDUneFace(\n            facesPossibles[choixFace[ee]][1],\n            nomSolide,\n          ),\n        )\n        texteCorr += this.sup === 1 ? '' : numAlpha(ee)\n        texteCorr += `La face ${facesPossibles[choixFace[ee]][0]} du pavé droit ${nomSolide} peut se nommer ${texteEnCouleurEtGras(resultatsPossibles[0])} mais aussi `\n        for (let j = 1; j < resultatsPossibles.length - 2; j++)\n          texteCorr += `${resultatsPossibles[j]}, `\n        texteCorr += `${resultatsPossibles[resultatsPossibles.length - 2]} ou ${resultatsPossibles[resultatsPossibles.length - 1]}.<br>`\n\n        if (\n          (this.interactifType && this.interactifType === 'qcm') ||\n          context.isAmc\n        ) {\n          resultatsImpossibles = []\n          for (let j = 0; j < 6; j++) {\n            if (j !== choixFace[ee]) {\n              resultatsImpossibles.push(\n                combinaisonListes(\n                  differentsNomsPossiblesDUneFace(\n                    facesPossibles[j][1],\n                    nomSolide,\n                  ),\n                )[0],\n              )\n            }\n          }\n        }\n        this.autoCorrection[indiceQuestion] = {}\n        if (this.interactifType === 'qcm') {\n          this.autoCorrection[indiceQuestion].enonce = `${texte}\\n`\n          this.autoCorrection[indiceQuestion].propositions = [\n            {\n              texte: `${resultatsPossibles[0]}`,\n              statut: true,\n            },\n          ]\n          for (\n            let j = 0;\n            j < Math.min(resultatsImpossibles.length, this.sup4 - 1);\n            j++\n          ) {\n            const props = this.autoCorrection[indiceQuestion].propositions\n            if (props) {\n              props.push({\n                texte: `${resultatsImpossibles[j]}`,\n                statut: false,\n              })\n            }\n          }\n\n          this.autoCorrection[indiceQuestion].options = {}\n          texte += propositionsQcm(this, indiceQuestion).texte\n        } else {\n          setReponse(this, indiceQuestion, resultatsPossibles, {\n            formatInteractif: 'texte',\n          })\n          texte +=\n            ajouteChampTexteMathLive(\n              this,\n              indiceQuestion,\n              KeyboardType.alphanumeric,\n            ) + '<br>'\n        }\n        if (context.isAmc) {\n          // @ts-expect-error\n          this.autoCorrection[i].propositions.push({\n            type: 'qcmMono',\n            enonce: enonceAMC,\n            propositions: [\n              {\n                texte: `${resultatsPossibles[0]}`,\n                statut: true,\n              },\n            ],\n          })\n          for (\n            let j = 0;\n            j < Math.min(resultatsImpossibles.length, this.sup4 - 1);\n            j++\n          ) {\n            const props = this.autoCorrection[i].propositions\n            if (props) {\n              const props2 = props[ee].propositions\n              props2!.push({\n                texte: `${resultatsImpossibles[j]}`,\n                statut: false,\n              })\n            }\n          }\n        }\n      }\n\n      if (this.questionJamaisPosee(i, nomSolide)) {\n        // Si la question n'a jamais été posée, on en crée une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","amcReady","amcType","interactifReady","interactifType","dateDePublication","uuid","refs","inverseChaine","str","differentsNomsPossiblesDUneFace","face","nomSolide","nouvelleFaceChiffree","nouvelleFace","tabChiffre","tab","i","j","LireFacePaveDroit","Exercice","contraindreValeur","typesDeQuestionsIndisponibles","gestionnaireFormulaireTexte","randint","comparerNombres","a","b","choixFace","rangeMinMax","combinaisonListes","indiceQuestion","texte","texteCorr","objetsEnonce","A","B","D","E","solideDessine","enonceAMC","enonceFigure","L","p","choixProfondeur","facesPossibles","h","resultatsPossibles","cpt","resultatsImpossibles","context","choice","point3d","choisitLettresDifferentes","pave3d","mathalea2d","fixeBordures","ee","numAlpha","texteEnCouleurEtGras","props","propositionsQcm","setReponse","ajouteChampTexteMathLive","KeyboardType","listeQuestionsToContenu"],"mappings":"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"}