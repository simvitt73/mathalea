{"version":3,"file":"5R21-1-DUFtIpyU.js","sources":["../../src/exercices/5e/5R21-1.ts"],"sourcesContent":["/**\n * ⚠️ Cet exercice est utilisé dans le test : tests/e2e/tests/interactivity/mathLive.fillInTheBlanks.test.ts ⚠️\n */\n\nimport { randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport {\n  ecritureNombreRelatif,\n  ecritureParentheseSiNegatif,\n} from '../../lib/outils/ecritures'\nimport { context } from '../../modules/context'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { remplisLesBlancs } from '../../lib/interactif/questionMathLive'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { sp } from '../../lib/outils/outilString'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\n\nexport const titre = 'Transformer une soustraction en addition puis calculer'\nexport const dateDePublication = '13/11/2023'\nexport const dateDeModifImportante = '13/03/2025'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\n\n/**\n * Transformer une soustraction en addition puis calculer\n * @author Rémi Angot ; Olivier Mimeau (ajout Decimaux et Modification de l'interactivité)\n */\nexport const uuid = 'f2db1'\n\nexport const refs = {\n  'fr-fr': ['5R21-1'],\n  'fr-ch': ['9NO9-14'],\n}\n\ntype TypeQuestionsDisponibles = '+-' | '--' | '-+'\n\nexport default class SoustractionRelatifs extends Exercice {\n  listeA: number[] = []\n  listeB: number[] = []\n  typeQuestionsDisponibles = ['+-', '--', '-+'] as TypeQuestionsDisponibles[]\n  constructor() {\n    super()\n    this.nbQuestions = 5\n    this.sup = 20\n    this.sup2 = false\n    this.sup3 = false\n    this.besoinFormulaireNumerique = ['Valeur maximale', 99999]\n    this.besoinFormulaire2CaseACocher = [\n      'Seul le 2e terme négatif est entre parenthèses',\n    ]\n    this.besoinFormulaire3CaseACocher = ['Avec des nombres décimaux']\n  }\n\n  nouvelleVersion() {\n    const listeTypeQuestions = combinaisonListes(\n      this.typeQuestionsDisponibles,\n      this.nbQuestions,\n    ) as TypeQuestionsDisponibles[]\n    this.consigne =\n      this.nbQuestions > 1\n        ? 'Transformer chaque soustraction en une addition puis calculer.'\n        : 'Transformer la soustraction en une addition puis calculer.'\n\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      let texte = ''\n      let texteCorr = ''\n      const CoefDecimales = this.sup3 ? 10 : 1\n      let a = randint(1, this.sup * CoefDecimales) / CoefDecimales\n      let b = randint(1, this.sup * CoefDecimales) / CoefDecimales\n      switch (listeTypeQuestions[i]) {\n        case '+-':\n          b *= -1\n          break\n        case '--':\n          a *= -1\n          b *= -1\n          break\n        case '-+':\n          a *= -1\n          break\n      }\n      this.listeA[i] = a\n      this.listeB[i] = b\n      const textea = this.sup2 ? texNombre(a, 1) : ecritureNombreRelatif(a)\n      const texteb = this.sup2\n        ? ecritureParentheseSiNegatif(b)\n        : ecritureNombreRelatif(b)\n      const texteReponse = this.sup2\n        ? texNombre(a - b, 1)\n        : ecritureNombreRelatif(a - b)\n      texte = `$${textea} - ${texteb}=$`\n      texteCorr = `$${textea} - ${texteb} = ${miseEnEvidence(textea)} + ${miseEnEvidence(ecritureNombreRelatif(-b))} = ${miseEnEvidence(texteReponse)}$`\n\n      if (this.interactif) {\n        const texteRemplisLesBlancs = this.sup2\n          ? ` ${sp(1)}%{champ1}${sp(1)} + (%{champ2}) = ${sp(1)}%{champ3}${sp(1)}`\n          : ' (%{champ1}) + (%{champ2}) = (%{champ3})'\n        texte += remplisLesBlancs(\n          this,\n          i,\n          texteRemplisLesBlancs,\n          ` ${KeyboardType.clavierDeBase}`,\n          '',\n        )\n\n        handleAnswers(this, i, {\n          bareme: (listePoints) => [\n            Math.min(listePoints[0], listePoints[1]) + listePoints[2],\n            2,\n          ],\n          champ1: { value: textea },\n          champ2: { value: ecritureNombreRelatif(-b) },\n          champ3: { value: texteReponse },\n        })\n      } else {\n        texte +=\n          ' $\\\\ldots\\\\ldots\\\\ldots + \\\\ldots\\\\ldots\\\\ldots = \\\\ldots\\\\ldots\\\\ldots$'\n      }\n\n      if (this.questionJamaisPosee(i, a, b, listeTypeQuestions[i])) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n\n        if (context.isAmc) {\n          this.autoCorrection[i] = {\n            enonce: '',\n            enonceAvant: false,\n            propositions: [\n              {\n                type: 'AMCOpen',\n                propositions: [\n                  {\n                    enonce: this.titre + ' : ' + texte,\n                    texte: texteCorr,\n                    statut: 1,\n                    pointilles: false,\n                  },\n                ],\n              },\n              {\n                type: 'AMCNum',\n                propositions: [\n                  {\n                    texte: '',\n                    statut: '',\n                    reponse: {\n                      texte: 'Résultat du calcul : ',\n                      valeur: [b - a],\n                      param: {\n                        digits: 2,\n                        decimals: 0,\n                        signe: true,\n                        approx: 0,\n                      },\n                    },\n                  },\n                ],\n              },\n            ],\n          }\n        }\n        i++\n      }\n      cpt++\n    }\n  }\n}\n"],"names":["titre","dateDePublication","dateDeModifImportante","interactifReady","interactifType","amcReady","amcType","uuid","refs","SoustractionRelatifs","Exercice","__publicField","listeTypeQuestions","combinaisonListes","i","cpt","texte","texteCorr","CoefDecimales","a","randint","b","textea","texNombre","ecritureNombreRelatif","texteb","ecritureParentheseSiNegatif","texteReponse","miseEnEvidence","texteRemplisLesBlancs","sp","remplisLesBlancs","KeyboardType","handleAnswers","listePoints","context"],"mappings":"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"}