{"version":3,"file":"betaReconnaitreFraction-DwHCkVN4.js","sources":["../../src/lib/apps/fraction_visualizer.ts","../../src/exercices/beta/betaReconnaitreFraction.ts"],"sourcesContent":["import FractionVisualizer from 'fraction-visualizer'\nimport { context } from '../../modules/context'\n\nexport type ShapeName = 'square' | 'disk' | 'rectangle' | 'bar' | 'segment'\nexport type BorderMode = 'none' | 'filled' | 'all' | 'cursor'\n\n/**\n * Définit le customElement fraction-visualizer\n */\nif (customElements.get('fraction-visualizer') === undefined) {\n  customElements.define('fraction-visualizer', FractionVisualizer)\n}\n\ntype FractionVisualizerOptions = {\n  shape?: ShapeName\n  filled?: number\n  total?: number\n  showFilledSlider?: boolean\n  borderMode?: BorderMode\n  showPartNumbers?: boolean\n  showLabels?: boolean\n  labelStart?: number\n  labelValues?: string\n  sliderMaxInput?: number\n  borderCount?: number\n}\n\n/**\n * Retourne le code HTML pour afficher un fraction-visualizer interactif\n * @param options - options pour personnaliser le composant\n * @param options.shape - forme de la fraction ('square', 'disk', 'rectangle', 'bar', 'segment')\n * @param options.filled - nombre de parties remplies\n * @param options.total - nombre total de parties par unité\n * @param options.showFilledSlider - afficher le curseur pour ajuster les parties remplies\n * @param options.sliderMaxInput - valeur maximale pour les curseurs\n * @param options.borderMode - mode des bordures ('none', 'filled', 'all', 'cursor')\n * @param options.showPartNumbers - afficher les numéros des parties\n * @param options.showLabels - afficher les abscisses\n * @param options.labelStart - valeur de départ des abscisses\n * @param options.labelValues - abscisses à afficher\n * @param options.borderCount - nombre de bordures à afficher\n * @returns le code HTML du fraction-visualizer interactif\n * @author Guillaume Valmont\n */\nexport function fractionVisualizer(\n  options?: FractionVisualizerOptions,\n): string {\n  if (!context.isHtml) {\n    return '' // La sortie LaTeX n'est pas encore gérée\n  }\n  let optionsString: string = ''\n  if (options) {\n    if (options.shape !== undefined)\n      optionsString += `shape=\"${options.shape}\" `\n    if (options.filled !== undefined)\n      optionsString += `filled=\"${options.filled}\" `\n    if (options.total !== undefined)\n      optionsString += `total=\"${options.total}\" `\n    if (options.showFilledSlider !== undefined)\n      optionsString += `show-filled-slider=\"${options.showFilledSlider}\" `\n    if (options.borderMode !== undefined)\n      optionsString += `border-mode=\"${options.borderMode}\" `\n    if (options.showPartNumbers !== undefined)\n      optionsString += `show-part-numbers=\"${options.showPartNumbers}\" `\n    if (options.showLabels !== undefined)\n      optionsString += `show-labels=\"${options.showLabels}\" `\n    if (options.labelStart !== undefined)\n      optionsString += `label-start=\"${options.labelStart}\" `\n    if (options.labelValues !== undefined)\n      optionsString += `label-values=\"${options.labelValues}\" `\n    if (options.sliderMaxInput !== undefined)\n      optionsString += `slider-max-input=\"${options.sliderMaxInput}\" `\n    if (options.borderCount !== undefined)\n      optionsString += `border-count=\"${options.borderCount}\" `\n  }\n  return `<div class=\"block\"><fraction-visualizer ${optionsString}></fraction-visualizer></div>`\n}\n","import {\n  fractionVisualizer,\n  type BorderMode,\n  type ShapeName,\n} from '../../lib/apps/fraction_visualizer'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { listeDesDiviseurs } from '../../lib/outils/primalite'\nimport { context } from '../../modules/context'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Reconnaître une fraction sur des représentations variées'\nexport const dateDePublication = '02/11/2025'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const uuid = '35b4c'\nexport const refs = {\n  'fr-fr': [],\n  'fr-2016': [],\n  'fr-ch': [],\n}\n\n/**\n * Reconnaître une fraction sur des représentations variées\n * Projet abandonné par manque de temps pour concevoir une version LaTeX et vu le manque d'intérêt de l'exercice.\n * L'exercice n'est donc pas référencé et n'est accessible que par son UUID.\n * @author Guillaume Valmont\n */\n\nexport default class ConnaitreQuart extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 5\n    this.besoinFormulaireTexte = [\n      'Choix des représentations',\n      [\n        'Nombres séparés par des tirets :',\n        '0 : Mélange',\n        '1 : Disque',\n        '2 : Carré',\n        '3 : Rectangle',\n        '4 : Barre',\n        '5 : Segment',\n      ].join('\\n'),\n    ]\n    this.sup = '1-2-3-4-5'\n\n    this.besoinFormulaire2Texte = [\n      'Choix des types de fraction',\n      [\n        'Nombres séparés par des tirets :',\n        '0 : Mélange',\n        '1 : Fractions unitaires (1/n)',\n        '2 : Fractions <= 1',\n        '3 : Fractions > 1',\n      ].join('\\n'),\n    ]\n    this.sup2 = '1-2-3'\n\n    this.besoinFormulaire3Numerique = [\n      'Choix du curseur',\n      5,\n      [\n        'Pas de curseur',\n        'Limité à la première part',\n        'Limité à la première unité',\n        'Limité à la partie colorée',\n        'Minimum la première unité, limité à la partie colorée',\n        'Limité à la dernière unité',\n      ].join('\\n'),\n    ]\n    this.sup3 = 3\n\n    this.spacingCorr = 2.5\n  }\n\n  nouvelleVersion() {\n    const representationsDisponibles = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 0,\n      max: 5,\n      melange: 0,\n      defaut: 0,\n      nbQuestions: this.nbQuestions,\n    })\n    const listeRepresentations = combinaisonListes(\n      representationsDisponibles,\n      this.nbQuestions,\n    )\n    const typesFractionsDisponibles = gestionnaireFormulaireTexte({\n      saisie: this.sup2,\n      min: 0,\n      max: 3,\n      melange: 0,\n      defaut: 0,\n      nbQuestions: this.nbQuestions,\n    })\n    const listeTypesFractions = combinaisonListes(\n      typesFractionsDisponibles,\n      this.nbQuestions,\n    )\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      const forme = getShapeNameFr(listeRepresentations[i])\n      const shape = getShapeName(listeRepresentations[i])\n      const typeFraction = getFractionType(listeTypesFractions[i])\n      const nbPartsUnite =\n        forme === 'carré' || forme === 'rectangle'\n          ? choice([2, 4, 8])\n          : randint(3, 10)\n      const nbPartsColorees =\n        typeFraction === 'Fractions unitaires (1/n)'\n          ? 1\n          : typeFraction === 'fraction inférieure ou égale à 1'\n            ? randint(2, nbPartsUnite)\n            : randint(nbPartsUnite + 1, nbPartsUnite * 3)\n      let limiteCurseur = nbPartsUnite\n      let borderMode: BorderMode = 'cursor'\n      switch (this.sup3) {\n        case 1:\n          borderMode = 'none'\n          break\n        case 2:\n          limiteCurseur = 1\n          break\n        case 3:\n          limiteCurseur = nbPartsUnite\n          break\n        case 4:\n          limiteCurseur = nbPartsColorees\n          break\n        case 5:\n          limiteCurseur = Math.max(nbPartsColorees, nbPartsUnite)\n          break\n        case 6:\n          limiteCurseur =\n            nbPartsUnite * Math.ceil(nbPartsColorees / nbPartsUnite)\n          break\n      }\n      const texte = `L'unité est ${forme === 'barre' ? 'la' : 'le'} ${forme}.<br>\n      Indiquer la fraction représentée par la partie colorée.<br>\n      ${fractionVisualizer({\n        filled: nbPartsColorees,\n        total: nbPartsUnite,\n        shape,\n        borderMode,\n        sliderMaxInput: limiteCurseur,\n      })}`\n\n      let texteCorr = ''\n      const diviseurs = listeDesDiviseurs(nbPartsUnite)\n      const decoupages = []\n      for (const diviseur of diviseurs) {\n        if (nbPartsColorees % diviseur === 0) {\n          decoupages.push(diviseur)\n        }\n      }\n      switch (typeFraction) {\n        case 'Fractions unitaires (1/n)':\n          texteCorr += `${fractionVisualizer({\n            filled: nbPartsColorees,\n            total: nbPartsUnite,\n            shape,\n            borderMode: 'all',\n            showPartNumbers: true,\n          })}<br>\n          Il faut $${miseEnEvidence(nbPartsUnite, 'blue')}$ parts pour représenter une unité,\n          donc la partie colorée représente $\\\\dfrac{1}{${miseEnEvidence(nbPartsUnite, 'blue')}}$ de l'unité.`\n          break\n        default:\n          if (decoupages.length > 1) {\n            texteCorr += `Il y a plusieurs possibilités :<br>`\n          }\n          for (let i = 0; i < decoupages.length; i++) {\n            const decoupage = decoupages[i]\n            const partsColoreesDecoupage = Math.round(\n              nbPartsColorees / decoupage,\n            )\n            const partsUniteDecoupage = Math.round(nbPartsUnite / decoupage)\n            texteCorr += `${fractionVisualizer({\n              filled: partsColoreesDecoupage,\n              total: partsUniteDecoupage,\n              shape,\n              borderMode: 'all',\n              showPartNumbers: true,\n            })} ${context.isHtml ? '' : '<br>'}\n            Avec $${miseEnEvidence(partsUniteDecoupage, 'blue')}$ part${partsUniteDecoupage > 1 ? 's' : ''} pour représenter une unité,\n            chaque part représente ${partsUniteDecoupage === 1 ? 'une unité' : `$\\\\dfrac{1}{${miseEnEvidence(partsUniteDecoupage, 'blue')}}$ de l'unité`} .<br>\n            Il faut $${miseEnEvidence(partsColoreesDecoupage, 'green')}$ ${partsUniteDecoupage === 1 ? `unité${partsUniteDecoupage > 1 ? 's' : ''}` : `parts de $\\\\dfrac{1}{${partsUniteDecoupage}}$`} pour représenter toute la partie colorée\n            donc la partie colorée représente ${partsUniteDecoupage === 1 ? `$${miseEnEvidence(partsColoreesDecoupage, 'green')}$ unité${partsUniteDecoupage > 1 ? 's' : ''}` : `$\\\\dfrac{${miseEnEvidence(partsColoreesDecoupage, 'green')}}{${partsUniteDecoupage}}$ de l'unité`}.`\n            if (i < decoupages.length - 1) {\n              texteCorr += `<br>Ce n'est pas le seul découpage possible.<br>`\n            }\n          }\n      }\n      if (this.questionJamaisPosee(i, forme, nbPartsUnite)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction getShapeName(type: string | number): ShapeName {\n  const typeNumber = Number(type)\n  switch (typeNumber) {\n    case 1:\n      return 'disk'\n    case 2:\n      return 'square'\n    case 3:\n      return 'rectangle'\n    case 4:\n      return 'bar'\n    case 5:\n      return 'segment'\n    default:\n      return 'disk'\n  }\n}\n\nfunction getShapeNameFr(type: string | number): string {\n  const typeNumber = Number(type)\n  switch (typeNumber) {\n    case 1:\n      return 'disque'\n    case 2:\n      return 'carré'\n    case 3:\n      return 'rectangle'\n    case 4:\n      return 'barre'\n    case 5:\n      return 'segment'\n    default:\n      return 'disque'\n  }\n}\n\nfunction getFractionType(type: string | number): string {\n  const typeNumber = Number(type)\n  switch (typeNumber) {\n    case 1:\n      return 'Fractions unitaires (1/n)'\n    case 2:\n      return 'fraction inférieure ou égale à 1'\n    case 3:\n      return 'Fractions > 1'\n    default:\n      return 'Fractions unitaires (1/n)'\n  }\n}\n"],"names":["FractionVisualizer","fractionVisualizer","options","context","optionsString","titre","dateDePublication","interactifReady","interactifType","uuid","refs","ConnaitreQuart","Exercice","representationsDisponibles","gestionnaireFormulaireTexte","listeRepresentations","combinaisonListes","typesFractionsDisponibles","listeTypesFractions","i","cpt","forme","getShapeNameFr","shape","getShapeName","typeFraction","getFractionType","nbPartsUnite","choice","randint","nbPartsColorees","limiteCurseur","borderMode","texte","texteCorr","diviseurs","listeDesDiviseurs","decoupages","diviseur","miseEnEvidence","decoupage","partsColoreesDecoupage","partsUniteDecoupage","listeQuestionsToContenu","type"],"mappings":"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"}