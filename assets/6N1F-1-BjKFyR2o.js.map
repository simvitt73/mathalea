{"version":3,"file":"6N1F-1-BjKFyR2o.js","sources":["../../src/exercices/6e/6N1F-1.ts"],"sourcesContent":["import Decimal from 'decimal.js'\nimport { format } from 'mathjs'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport {\n  ajouteChampTexteMathLive,\n  remplisLesBlancs,\n} from '../../lib/interactif/questionMathLive'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = \"Donner l'écriture décimale ou une fraction décimale\"\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\nexport const dateDePublication = '28/09/22'\n\n/**\n * On donne une fraction qui a pour dénominateur 10, 100 ou 1 000, il faut donner l'écriture décimale.\n * ou réciproquement\n * Le numérateur est de la forme X, XX, X0X, X00X ou XXX\n * @author Mickael Guironnet\n */\n\nexport const refs = {\n  'fr-fr': ['6N1F-1', 'BP2AutoC4'],\n  'fr-2016': ['6N23-8', 'BP2AutoC4'],\n  'fr-ch': ['9NO10-10'],\n}\nexport const uuid = '708a9'\nexport default class ExerciceEcritureDecimaleOuFractionDecimale extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireTexte = [\n      'Type de questions',\n      [\n        'Nombres séparés par des tirets  :',\n        '1 : Ecriture décimale -> fraction décimale',\n        '2 : Fraction décimale -> écriture décimale',\n        '3 : Mélange',\n      ].join('\\n'),\n    ]\n    this.besoinFormulaire2CaseACocher = ['Dénominateur déjà saisi']\n    this.besoinFormulaire3CaseACocher = ['Avec des zéros inutiles']\n\n    this.consigne = \"Donner l'écriture décimale ou la fraction décimale.\"\n    this.spacing = 2\n    this.spacingCorr = 2\n    this.nbQuestions = 8\n    this.nbCols = 2\n    this.nbColsCorr = 2\n    this.sup = '1-2' // Type de question\n    this.sup2 = true\n    this.sup3 = true\n  }\n\n  nouvelleVersion() {\n    const listeTypeDeQuestions = gestionnaireFormulaireTexte({\n      max: 2,\n      defaut: 3,\n      melange: 3,\n      nbQuestions: this.nbQuestions,\n      saisie: this.sup,\n    })\n\n    const consi = [false, false]\n    for (\n      let i = 0, a, b, n, typesDeQuestions, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      typesDeQuestions = listeTypeDeQuestions[i]\n      a = choice([\n        randint(2, 9),\n        randint(11, 99),\n        randint(1, 9) * 100 + randint(1, 9),\n        randint(1, 9) * 1000 + randint(1, 9),\n        randint(1, 9) * 100 + randint(1, 9) * 10,\n      ])\n      // X, XX, X0X, X00X, XX0\n      b = [10, 100, 1000, 10, 100][i % 5]\n      const aDecimal = new Decimal(a)\n      const bDecimal = new Decimal(b)\n      n = aDecimal.div(bDecimal).toNumber()\n\n      switch (typesDeQuestions) {\n        case 2: // fraction décimale -> écriture décimale\n          consi[1] = true\n          handleAnswers(this, i, { reponse: { value: texNombre(n, 3) } })\n          texte =\n            `$${texFraction(texNombre(a), texNombre(b))}  ${!this.interactif ? '=\\\\ldots\\\\ldots\\\\ldots\\\\ldots' : '='} $` +\n            ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers)\n          texteCorr =\n            '$ ' +\n            texFraction(String(a), String(b)) +\n            ' = ' +\n            texNombre(n, 3) +\n            ' $'\n          // @ts-expect-error\n          this.autoCorrection[i].reponse.param.digits = 5\n          // @ts-expect-error\n          this.autoCorrection[i].reponse.param.decimals = 3\n          break\n        case 1:\n        default: {\n          // / écriture décimale -> fraction décimale\n          consi[0] = true\n          const nombre = format(n, {\n            notation: 'auto',\n            lowerExp: -12,\n            upperExp: 12,\n            precision: 12,\n          }).replace('.', ',')\n          const rangVirgule = nombre.indexOf(',')\n          let nbdigits = 0\n          if (rangVirgule !== -1) {\n            nbdigits = nombre.length - rangVirgule - 1\n          }\n          let precision = nbdigits\n          if (nbdigits === 2 && b === 100) {\n            precision = 3\n          } else if (nbdigits === 1 && b === 10) {\n            precision = randint(2, 3)\n          }\n          handleAnswers(this, i, {\n            bareme: (listePoints) => [listePoints[0], 1],\n            champ1: { value: String(a) },\n          })\n\n          if (this.interactif) {\n            texte = this.sup2\n              ? remplisLesBlancs(\n                  this,\n                  i,\n                  `${texNombre(n, precision, this.sup3)} = \\\\dfrac{%{champ1}}{${texNombre(b)}}`,\n                  KeyboardType.clavierNumbers,\n                )\n              : ajouteChampTexteMathLive(\n                  this,\n                  i,\n                  KeyboardType.clavierDeBaseAvecFraction,\n                  {\n                    texteAvant: `$${texNombre(n, precision, this.sup3)} = $`,\n                  },\n                )\n\n            if (!this.sup2) {\n              handleAnswers(this, i, {\n                reponse: { value: n, options: { fractionDecimale: true } },\n              })\n            }\n          } else {\n            texte = this.sup2\n              ? `$${texNombre(n, precision, this.sup3)} = ${texFraction('\\\\ldots\\\\ldots\\\\ldots\\\\ldots', texNombre(b))} $`\n              : `$${texNombre(n, precision, this.sup3)} = ${texFraction('\\\\ldots\\\\ldots\\\\ldots\\\\ldots', '\\\\ldots\\\\ldots\\\\ldots\\\\ldots')} $`\n          }\n          texteCorr =\n            '$ ' +\n            texNombre(n) +\n            ' = ' +\n            texFraction(texNombre(a), texNombre(b)) +\n            ' $'\n          // @ts-expect-error\n          this.autoCorrection[i].reponse.param.digits = 6\n          // @ts-expect-error\n          this.autoCorrection[i].reponse.param.decimals = 0\n          break\n        }\n      }\n      if (this.questionJamaisPosee(i, a, b)) {\n        // Si la question n'a jamais été posée, on en crée une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    if (consi[0] === true && consi[1] === true) {\n      this.consigne = \"Donner l'écriture décimale ou une fraction décimale\"\n    } else if (consi[0] === false && consi[1] === true) {\n      this.consigne = \"Donner l'écriture décimale\"\n    } else {\n      this.consigne = 'Donner une fraction décimale'\n    }\n    this.consigne +=\n      this.nbQuestions > 1 ? ' de ces nombres.' : ' de ce nombre.'\n    listeQuestionsToContenu(this)\n  }\n}\nconst texFraction = (a: string | number, b: string | number) =>\n  `\\\\dfrac{${a}}{${b}}`\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","dateDePublication","refs","uuid","ExerciceEcritureDecimaleOuFractionDecimale","Exercice","listeTypeDeQuestions","gestionnaireFormulaireTexte","consi","i","a","b","n","typesDeQuestions","texte","texteCorr","cpt","choice","randint","aDecimal","Decimal","bDecimal","handleAnswers","texNombre","texFraction","ajouteChampTexteMathLive","KeyboardType","nombre","format","rangVirgule","nbdigits","precision","listePoints","remplisLesBlancs","listeQuestionsToContenu"],"mappings":"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"}