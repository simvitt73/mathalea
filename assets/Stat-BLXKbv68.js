var te=Object.defineProperty;var ie=(B,e,t)=>e in B?te(B,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):B[e]=t;var U=(B,e,t)=>ie(B,typeof e!="symbol"?e+"":e,t);import{_ as se,B as Q,P as G}from"./index-CMKaCP9B.js";import{m as J}from"./mathalea2d-hmD9nuW5.js";import{B as K}from"./BoiteBuilder-CO6E317I.js";import{c as re}from"./utilitairesGeometriques-rO8Jz15i.js";import{f as W}from"./fixeBordures-BSnKuTIe.js";import{p as h}from"./PointAbstrait-Cz1GEocE.js";import{p as ne}from"./polygones-CHA8469v.js";import{m as O,s as P}from"./segmentsVecteurs-DhSnlc3S.js";import{a as w}from"./textes-BId1S-Qs.js";import{t as ae}from"./TracePoint-eOswwPl5.js";import{v as X}from"./Vide2d-lYMmc9eB.js";class ge{constructor(e,t=!1,n=!0){U(this,"serie");U(this,"serieTableau");U(this,"isQualitative",!1);if(!Array.isArray(e)||e.length===0)throw new Error("La série doit être un array non vide");const s=[];for(const l of e)if(Array.isArray(l)){if(l.length!==2)throw new Error("Chaque paire doit être [valeur, effectif]");const[c,y]=l;if(typeof y!="number"||!isFinite(y)||y<0)throw new Error("L'effectif doit être un nombre positif");const p=Math.floor(y);for(let v=0;v<p;v++)s.push(c)}else s.push(l);if(s.length===0)throw new Error("Après expansion, la série est vide");const m=s.some(l=>typeof l=="string");let i,f;m?(i=s.map(l=>String(l)),f=!0):(i=s.map(l=>Number(l)),f=!1),this.isQualitative=typeof t=="boolean"?t:f,n?this.serie=se(i):this.serie=i;const a=new Map;for(const l of this.serie)a.set(l,(a.get(l)||0)+1);this.isQualitative?this.serieTableau=Array.from(a.entries()).map(([l,c])=>[String(l),c]):(this.serieTableau=Array.from(a.entries()).map(([l,c])=>[Number(l),c]),this.serieTableau.sort((l,c)=>l[0]-c[0]))}moyenne(){if(this.isQualitative)throw new Error("Moyenne non définie : la série est qualitative");const e=this.serie.map(Number);return e.reduce((n,s)=>n+s,0)/e.length}variance(){if(this.isQualitative)throw new Error("Variance non définie : la série est qualitative");const e=this.moyenne();return this.serie.reduce((n,s)=>n+Math.pow(Number(s)-e,2),0)/this.serie.length}ecartType(){if(this.isQualitative)throw new Error("Écart-type non défini : la série est qualitative");return Math.sqrt(this.variance())}mediane(){if(this.isQualitative)throw new Error("Médiane non définie : la série est qualitative");const e=[...this.serie].map(Number).sort((n,s)=>n-s),t=Math.floor(e.length/2);return e.length%2===0?(e[t-1]+e[t])/2:e[t]}medianeArray(e){const t=[...e].sort((s,m)=>s-m),n=Math.floor(t.length/2);return t.length%2===0?(t[n-1]+t[n])/2:t[n]}mode(){if(this.isQualitative)throw new Error("Mode (numérique) : la série est qualitative — utiliser this.serieTableau pour les modalités");const e={};for(const n of this.serie){const s=Number(n);e[s]=(e[s]||0)+1}const t=Math.max(...Object.values(e));return Object.keys(e).filter(n=>e[Number(n)]===t).map(Number)}min(){if(this.isQualitative)throw new Error("Min non défini : la série est qualitative");return Math.min(...this.serie.map(Number))}max(){if(this.isQualitative)throw new Error("Max non défini : la série est qualitative");return Math.max(...this.serie.map(Number))}etendue(){if(this.isQualitative)throw new Error("Étendue non définie : la série est qualitative");return this.max()-this.min()}coefVariation(){if(this.isQualitative)throw new Error("Coefficient de variation non défini : la série est qualitative");return this.ecartType()/this.moyenne()}get q1(){return this.quartiles().q1}get q3(){return this.quartiles().q3}quartiles(){if(this.isQualitative)throw new Error("Quartiles non définis : la série est qualitative");const e=[...this.serie].map(Number).sort((l,c)=>l-c),t=e.length,n=Math.floor(t/2),s=(t%2===0,e.slice(0,n)),m=t%2===0?e.slice(n):e.slice(n+1),i=s.length?this.medianeArray(s):e[0],f=this.medianeArray(e),a=m.length?this.medianeArray(m):e[e.length-1];return{q1:i,q2:f,q3:a}}ecartInterQuartile(){if(this.isQualitative)throw new Error("Écart interquartile non défini : la série est qualitative");const{q1:e,q3:t}=this.quartiles();return t-e}serieTriee(){if(this.isQualitative)throw new Error("Série triée (numérique) non disponible : la série est qualitative");return[...this.serie].map(Number).sort((e,t)=>e-t)}boiteAMoustache(){if(this.isQualitative)throw new Error("Boîte à moustache non applicable : la série est qualitative");const e=[...this.serie].map(Number).sort((b,D)=>b-D),t=e.length,n=Math.floor(t/2),s=(t%2===0,e.slice(0,n)),m=t%2===0?e.slice(n):e.slice(n+1),i=s.length?this.medianeArray(s):e[0],f=this.medianeArray(e),a=m.length?this.medianeArray(m):e[e.length-1],l=a-i,c=i-1.5*l,y=a+1.5*l,p=e.find(b=>b>=c)??e[0],v=[...e].reverse().find(b=>b<=y)??e[e.length-1],N=e.filter(b=>b<p||b>v);return{q1:i,q2:f,q3:a,iqr:l,borneInferieure:c,borneSuperieure:y,moustacheInferieure:p,moustacheSuperieure:v,valeursAberrantes:N,min:e[0],max:e[e.length-1],valeurs:e}}traceBoiteAMoustache({size:e=10,height:t=4,legendeOn:n=!0,valeursOn:s=!0,echelle:m=1}){if(this.isQualitative)throw new Error("Trace boîte à moustache non applicable : la série est qualitative");const i=this.boiteAMoustache(),f=i.max-i.min,a=f/e,l=h(-1,0),c=h(e+1,0),y=h(0,0),p=h(e,0),v=h(e*(i.q1-i.min)/f,0),N=h(e*(i.q2-i.min)/f,0),b=h(e*(i.q3-i.min)/f,0),D=h(y.x,m*.8),u=h(y.x,2.4*m),r=h(p.x,m*.8),x=h(p.x,2.4*m),$=O(D,u),g=O(r,x),q=h(v.x,m*.8),k=h(v.x,2.4*m),A=h(N.x,m*.8),F=h(N.x,2.4*m),L=h(b.x,m*.8),C=h(b.x,2.4*m),T=O(q,k),H=O(L,C),M=P(D,u,"blue"),I=P(r,x,"blue"),S=P(A,F,"blue"),j=$.x===T.x?X():P($,T,"blue"),_=H.x===g.x?X():P(H,g,"blue");M.epaisseur=2,I.epaisseur=2,S.epaisseur=2,j.epaisseur=2,_.epaisseur=2;const o=ne([q,k,C,L],"blue");o.epaisseur=2,o.couleurDeRemplissage=re("blue"),o.opaciteDeRemplissage=.15;const d=P(l,c);d.epaisseur=1,d.styleExtremites="->",d.couleur="black";const R=ae(v,N,b,y,p);R.taille=2,R.epaisseur=2,R.style=".";const E=[d,R,M,I,S,j,_,o];return s&&E.push(w(Q(i.min),y.x,y.y-.8,{letterSize:"scriptsize"}),w(Q(i.q1),v.x,v.y-.8,{letterSize:"scriptsize"}),w(Q(i.q2),N.x,N.y-.8,{letterSize:"scriptsize"}),w(Q(i.q3),b.x,b.y-.8,{letterSize:"scriptsize"}),w(Q(i.max),p.x,p.y-.8,{letterSize:"scriptsize"})),n&&E.push(w("\\text{Min}",y.x,y.y-1.6,{letterSize:"scriptsize"}),w("Q_1",v.x,v.y-1.6,{letterSize:"scriptsize"}),w("\\text{Méd}",N.x,N.y-1.6,{letterSize:"scriptsize"}),w("Q_3",b.x,b.y-1.6,{letterSize:"scriptsize"}),w("\\text{Max}",p.x,p.y-1.6,{letterSize:"scriptsize"})),G.isHtml?J(Object.assign({},W(E)),E):` \\begin{tikzpicture}[every node/.style={inner sep=0pt,font=\\scriptsize},%
      boxplot prepared/every whisker/.style={ultra thick}]
    \\begin{axis}[
        clip=false,
        y=1cm,
        ymin=-0.5cm,
        xmin=${i.min-a},
        xmax=${i.max+a},
        height=${t}cm,
        width=${e/2}cm,
        ytick=\\empty,
        axis y line=left,
        axis x line=middle,
        xtick = \\empty,
        y axis line style={draw=none},
        enlarge y limits={abs=5mm},
      ]
      \\addplot+[
        boxplot prepared ={
            every box/.style={ultra thick,fill=blue!15},
            every whisker/.style={ultra thick},
            every median/.style={ultra thick},
            lower whisker=${Q(i.moustacheInferieure,2)},
            lower quartile=${i.q1},
            median=${i.q2},
            upper quartile=${i.q3},
            upper whisker=${Q(i.moustacheSuperieure,2)},
          },
      ] coordinates {};
      \\foreach \\x/\\name [count=\\xi from 0] in {${i.min}/Min,${i.q1}/Q1,${i.q2}/Méd,${i.q3}/Q3,${i.max}/Max} {
          \\edef\\temp{\\noexpand\\fill (\\x,0) coordinate (a\\xi) circle (2pt);
            ${s?"\\noexpand\\node[below=2mm of a\\xi] {\\x};":""}
            ${n?"\\noexpand\\node[below=4mm of a\\xi]  {\\name};":""}
          }
          \\temp
        }
    \\end{axis}
  \\end{tikzpicture}
`}listeSerie({precision:e=2,separateur:t="; ",triee:n=!1,tableau:s=!1,motValeurs:m="Valeurs"}={}){const i=f=>String(f).replace(/([%&$#_{}\\^~])/g,"\\$1");if(s){const f=this.serieTableau,a=f.length,l=f.map(([p])=>this.isQualitative?`\\text{${i(String(p))}}`:Q(Number(p),e)).join(" & "),c=f.map(([,p])=>String(p)).join(" & ");return`$\\begin{array}{${"|l|"+"c|".repeat(a)}}
\\hline
\\text{${m}} & ${l} \\\\ \\hline
\\text{effectifs} & ${c} \\\\ \\hline
\\end{array}$`}else return this.isQualitative?(n?[...this.serie].map(String).sort():this.serie.slice()).map(a=>`$\\text{${i(String(a))}}$`).join(t):(n?this.serieTriee():this.serie).map(a=>`$${Q(Number(a),e)}$`).join(t)}diagramme({cumul:e=!1,croissance:t=!0,barres:n=!0,percentVsEffectifs:s=!1,effectifsOn:m=!1,valuesOn:i=!0}={}){let a=this.serieTableau.slice();this.isQualitative?t||a.reverse():a=a.slice().sort((u,r)=>t?u[0]-r[0]:r[0]-u[0]);const l=a.reduce((u,[,r])=>u+r,0),c=[];if(e){let u=0;for(const[,r]of a)u+=r,c.push(s?u/l*100:u)}else for(const[,u]of a)c.push(s?u/l*100:u);const y=a.map(([u])=>u),p=a.map(([u])=>this.isQualitative?String(u):Q(Number(u),2));let v="";this.isQualitative?v=p.map((u,r)=>`(${u},${Number(c[r].toFixed(3))})`).join(" "):v=y.map((u,r)=>`(${Number(u).toFixed(6)},${Number(c[r].toFixed(6))})`).join(" ");const N=s?"fréquences":"effectifs",b=s?"Fréquences en \\%":"Effectifs",D=`${n?e?`diagramme cumulé (${t?"croissant":"décroissant"})`:"Diagramme en barres":e?`Polygone des ${N} cumulé${N==="fréquences"?"es":"s"} (${t?"croissantes":"décroissantes"})`:`Polygone des ${N}`} `;if(G.isHtml){const r=this.serieTableau.length,x=this.serie.length,$=x<15?2:x<30?5:10,g=25,q=Math.max(...c),k=.5,A=8.7;let F,L;if(this.isQualitative)F=0,L=this.serieTableau.length+1;else{const o=this.serie.map(Number);F=Math.min(...o)-1,L=Math.max(...o)+1}const C=q<15?2:q<30?3:4;let T=[];s?T=Array.from({length:5},(o,d)=>[d*25,d*g*8/100]):e?T=Array.from({length:Math.ceil(x/$)+1},(o,d)=>[d*$,d*8*$/x]):T=Array.from({length:Math.ceil((q+1)/C)}).map((o,d)=>[d*C,d*8*C/q]);const M=[new K({xMin:0,xMax:(L-F)*2,yMin:0,yMax:A}).render()];for(const[o,d]of T)M.push(w(`${Q(o,0)}`,-.5,d+.1,{letterSize:"scriptsize"}));for(const o of T){const d=P(h(0,o[1]),h((r+1)*2,o[1]),"lightgray");d.opacite=k,M.push(d)}let I=0,S=0,j=0,_=0;for(let o=0;o<a.length;o++){const[d]=a[o],R=o<a.length-1?a[o+1][0]:a[o][0],E=this.isQualitative?NaN:Number(d),Z=this.isQualitative?NaN:Number(R);S=this.isQualitative?(o+1)*2:(E-F)*2+1,I=this.isQualitative?(o+2)*2:(Z-F)*2+1,j=e?s?c[o]*8/100:c[o]*8/x:s?c[o]*8/100:c[o]*8/q,o<a.length-1?_=e?s?c[o+1]*8/100:c[o+1]*8/x:s?c[o+1]*8/100:c[o+1]*8/q:_=j;const Y=P(h(S,0),h(S,A),"lightgray");if(Y.epaisseur=1,Y.opacite=k,M.push(Y),n){const z=new K({xMin:S-.2,xMax:S+.2,yMin:0,yMax:j}).addColor({color:"blue",colorBackground:"#9699FF",backgroudOpacity:1}).render();M.push(z)}else if(o<a.length-1){const z=P(h(S,j),h(I,_),"blue");z.epaisseur=2,z.opacite=.5,M.push(z)}if(m){const z=w(`${Q(c[o],0)}${s?"\\%":""}`,S,j+.5,{letterSize:"scriptsize"});M.push(z)}if(i){const z=this.isQualitative?String(d):Q(E,2);M.push(w(z,S,-.5,{letterSize:"scriptsize"}))}const V=w(`\\text{${b}}`,-1.5,A/2,{letterSize:"normalsize",orientation:90,opacity:.7});M.push(V);const ee=w(`\\text{${D}}`,r+1,A+.5,{letterSize:"normalsize",opacity:.7});M.push(ee)}return J(Object.assign({style:"display: inline-block"},W(M)),M)}else{const u=n?`\\addplot+[ybar, bar width=${(()=>{if(this.isQualitative)return"12pt";const x=y.map(g=>Number(g)).filter(g=>Number.isFinite(g)).slice().sort((g,q)=>g-q);if(x.length<2)return"12pt";let $=1/0;for(let g=0;g<x.length-1;g++)$=Math.min($,x[g+1]-x[g]);return`${($*.6).toFixed(6)}`})()}, draw=black, fill=blue!40] coordinates { ${v} };`:`\\addplot+[sharp plot, thick, mark=*, mark options={fill=blue}] coordinates { ${v} };`,r=[];if(r.push(`title={${D}}`),r.push(`ylabel={${b}}`),r.push("xlabel={Valeurs}"),r.push("ymin=0"),r.push("enlarge x limits=0.15"),r.push("grid=major"),r.push("width=12cm"),r.push("height=6cm"),m&&(s?r.push("nodes near coords={\\pgfmathprintnumber[fixed,precision=0]{\\pgfplotspointmeta}\\%}"):r.push("nodes near coords"),r.push("nodes near coords align={vertical}","every node near coord/.append style={font=\\scriptsize}")),this.isQualitative)i?r.push(`symbolic x coords={${p.join(",")}}`,"xtick=data"):r.push("symbolic x coords={"+p.join(",")+"}","xtick=\\empty");else{const x=y.map(q=>Number(q)).filter(q=>Number.isFinite(q)).slice().sort((q,k)=>q-k),$=x.length?x[0]:0,g=x.length?x[x.length-1]:1;if(r.push(`xmin=${Number(($-(g-$)*.05).toFixed(6))}`),r.push(`xmax=${Number((g+(g-$)*.05).toFixed(6))}`),i&&x.length){const q=x.map(A=>Number(A.toFixed(6))).join(",");r.push(`xtick={${q}}`);const k=p.join(",");r.push(`xticklabels={${k}}`)}else r.push("xtick=\\empty")}return`\\begin{tikzpicture}
  \\begin{axis}[
    ${r.join(`,
    `)}
  ]
    ${u}
  \\end{axis}
\\end{tikzpicture}`}}}export{ge as S};
//# sourceMappingURL=Stat-BLXKbv68.js.map
