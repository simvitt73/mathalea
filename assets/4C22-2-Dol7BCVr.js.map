{"version":3,"file":"4C22-2-Dol7BCVr.js","sources":["../../src/exercices/4e/4C22-2.ts"],"sourcesContent":["import { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport {\n  obtenirListeFractionsIrreductibles,\n  texFractionFromString,\n  texFractionSigne,\n} from '../../lib/outils/deprecatedFractions'\nimport { ecritureParentheseSiNegatif } from '../../lib/outils/ecritures'\nimport { pgcd } from '../../lib/outils/primalite'\nimport { fraction } from '../../modules/fractions'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { context } from '../../modules/context'\n\nexport const titre = 'Diviser des fractions'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n/**\n * Calcul du quotient de deux fractions. Paramétrages possibles :\n * * 1 : Nombres positifs exclusivement\n * * 2 : nombres relatifs\n * @author Jean-Claude Lhote\n * 4C22-2\n */\nexport const uuid = '55354'\n\nexport const refs = {\n  'fr-fr': ['4C22-2', 'BP2AutoH14'],\n  'fr-ch': ['10NO5-7'],\n}\nexport default class ExerciceDiviserFractions extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Niveau de difficulté',\n      2,\n      ' 1 : Fractions à numérateur et dénominateur positifs \\n 2 : Fractions à numérateur et dénominateur relatifs',\n    ]\n    this.sup = 1 // Avec ou sans relatifs\n\n    this.consigne = 'Calculer et donner le résultat sous forme irréductible.'\n    this.spacing = 2\n    this.spacingCorr = 2\n    this.nbQuestions = 5\n  }\n\n  nouvelleVersion() {\n    const listeFractions = obtenirListeFractionsIrreductibles()\n\n    const typesDeQuestionsDisponibles = [parseInt(this.sup)]\n    let nombreDeSigneMoins\n    const listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    )\n    for (\n      let i = 0,\n        ab,\n        cd,\n        p,\n        signe,\n        texte,\n        reponse,\n        texteCorr,\n        typesDeQuestions,\n        cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      let a: number = 0\n      let b: number = 0\n      let c: number = 0\n      let d: number = 0\n      typesDeQuestions = listeTypeDeQuestions[i]\n      do {\n        ab = choice(listeFractions)\n        cd = choice(listeFractions)\n        a = ab[0]\n        b = ab[1]\n        c = cd[0]\n        d = cd[1]\n      } while ((a * d) % (b * c) === 0)\n      p = pgcd(a * d, b * c)\n\n      switch (typesDeQuestions) {\n        case 1: // fraction / fraction tout positif\n          texte = `$${texFractionFromString(a, b)}\\\\div${texFractionFromString(c, d)}$`\n          if (p === 1) {\n            texteCorr = `$${texFractionFromString(a, b)}\\\\div${texFractionFromString(\n              c,\n              d,\n            )}=${texFractionFromString(a, b)}\\\\times${texFractionFromString(d, c)}=${texFractionFromString(\n              a + '\\\\times' + d,\n              b + '\\\\times' + c,\n            )}=${texFractionFromString(a * d, b * c)}$`\n          } else {\n            texteCorr = `$${texFractionFromString(a, b)}\\\\div${texFractionFromString(\n              c,\n              d,\n            )}=${texFractionFromString(a, b)}\\\\times${texFractionFromString(d, c)}=${texFractionFromString(\n              a + '\\\\times' + d,\n              b + '\\\\times' + c,\n            )}=${texFractionFromString(a * d, b * c)}=${texFractionFromString(\n              (a * d) / p + '\\\\times\\\\cancel{' + p + '}',\n              (b * c) / p + '\\\\times\\\\cancel{' + p + '}',\n            )}=${texFractionFromString((a * d) / p, (b * c) / p)}$`\n          }\n          break\n\n        case 2:\n        default:\n          a = a * randint(-1, 1, [0])\n          b = b * randint(-1, 1, [0])\n          c = c * randint(-1, 1, [0])\n          d = d * randint(-1, 1, [0])\n          nombreDeSigneMoins =\n            Number(a < 0) + Number(b < 0) + Number(c < 0) + Number(d < 0)\n          if (Math.pow(-1, nombreDeSigneMoins) === 1) {\n            signe = ''\n          } else {\n            signe = '-'\n          }\n          texte = `$${texFractionFromString(a, b)}\\\\div${texFractionFromString(c, d)}$`\n          texteCorr = `$${texFractionFromString(a, b)}\\\\div${texFractionFromString(c, d)}$`\n          a = Math.abs(a)\n          b = Math.abs(b)\n          c = Math.abs(c)\n          d = Math.abs(d)\n          p = pgcd(a * d, b * c)\n          texteCorr += `$=${signe}${texFractionFromString(a, b)}\\\\times${texFractionFromString(\n            d,\n            c,\n          )}$`\n          texteCorr += `$=${signe}${texFractionFromString(\n            a + '\\\\times' + ecritureParentheseSiNegatif(d),\n            b + '\\\\times' + ecritureParentheseSiNegatif(c),\n          )}$`\n          if (p === 1) {\n            texteCorr += `$=${signe}${texFractionSigne(a * d, b * c)}$`\n          } else {\n            texteCorr += `$=${signe}${texFractionFromString(a * d, b * c)}$`\n            if (a * d !== b * c) {\n              texteCorr += `$=${signe}${texFractionFromString(\n                (a * d) / p + '\\\\times\\\\cancel{' + p + '}',\n                (b * c) / p + '\\\\times\\\\cancel{' + p + '}',\n              )}$`\n              texteCorr += `$=${signe}${texFractionFromString(\n                (a * d) / p,\n                (b * c) / p,\n              )}$`\n            } else {\n              texteCorr += `$=${signe}1$`\n            }\n          }\n\n          break\n      }\n      // Uniformisation : Mise en place de la réponse attendue en interactif en orange et gras\n      const textCorrSplit = texteCorr.split('=')\n      let aRemplacer = textCorrSplit[textCorrSplit.length - 1]\n      aRemplacer = aRemplacer.replace('$', '')\n\n      texteCorr = ''\n      for (let ee = 0; ee < textCorrSplit.length - 1; ee++) {\n        texteCorr += textCorrSplit[ee] + '='\n      }\n      texteCorr += `$ $${miseEnEvidence(aRemplacer)}$`\n      // Fin de cette uniformisation\n\n      reponse = fraction((signe === '-' ? -1 : 1) * a * d, b * c).simplifie()\n      if (this.questionJamaisPosee(i, a, b, c, d, typesDeQuestions)) {\n        texte += ajouteChampTexteMathLive(\n          this,\n          i,\n          KeyboardType.clavierDeBaseAvecFraction,\n          { texteAvant: '$=$' },\n        )\n        handleAnswers(this, i, {\n          reponse: {\n            value: reponse.toLatex(),\n            options: { fractionIrreductible: true },\n          },\n        })\n\n        if (context.isAmc) {\n          texte =\n            'Calculer et donner le résultat sous forme irréductible\\\\\\\\\\n' +\n            texte\n          this.autoCorrection[i] = {\n            enonce: texte, // Si vide, l'énoncé est celui de l'exercice.\n            propositions: [\n              {\n                texte: '', // Si vide, le texte est la correction de l'exercice.\n              },\n            ],\n            reponse: {\n              // @ts-expect-error\n              valeur: [reponse], // obligatoire (la réponse numérique à comparer à celle de l'élève), NE PAS METTRE DE STRING à virgule ! 4.9 et non pas 4,9. Cette valeur doit être passée dans un tableau d'où la nécessité des crochets.\n              param: {\n                digits: 5,\n                digitsNum: 3,\n                digitsDen: 2,\n                signe: true,\n              },\n            },\n          }\n        }\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n\n      cpt++\n    }\n    listeQuestionsToContenu(this) // Espacement de 2 em entre chaque questions.\n  }\n}\n"],"names":["titre","amcReady","amcType","interactifReady","interactifType","uuid","refs","ExerciceDiviserFractions","Exercice","listeFractions","obtenirListeFractionsIrreductibles","typesDeQuestionsDisponibles","nombreDeSigneMoins","listeTypeDeQuestions","combinaisonListes","i","ab","cd","p","signe","texte","reponse","texteCorr","typesDeQuestions","cpt","a","b","c","d","choice","pgcd","texFractionFromString","randint","ecritureParentheseSiNegatif","texFractionSigne","textCorrSplit","aRemplacer","ee","miseEnEvidence","fraction","ajouteChampTexteMathLive","KeyboardType","handleAnswers","context","listeQuestionsToContenu"],"mappings":"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"}