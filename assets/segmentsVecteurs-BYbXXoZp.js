var D=Object.defineProperty;var z=(e,r,t)=>r in e?D(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var S=(e,r,t)=>z(e,typeof r!="symbol"?r+"":r,t);import{P as k}from"./index-BvuGzI-o.js";import{c as E,a as F,j as R}from"./utilitairesGeometriques-rO8Jz15i.js";import{a as j}from"./vendors/roughjs-CycZv-lV.js";import{O as J}from"./ObjetMathalea2D-CXcNXRpD.js";import{a as $,p as V,P as Q}from"./PointAbstrait-Cz1GEocE.js";class C{constructor(r,t,n){S(this,"roughSvg");S(this,"div");S(this,"svg");this.roughSvg=r,this.div=t,this.svg=n}line(r,t,n,i,{color:s="#000",epaisseur:o=2,roughness:h=1}={}){return this.roughSvg.line(r,t,n,i,{roughness:h,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:o,stroke:s}).outerHTML}arc(r,t,n,i,s,o,h,{color:u="#000",epaisseur:y=1,roughness:l=1,bowing:a=.5}={}){return this.roughSvg.arc(r,t,n,i,s,o,h,{roughness:l,bowing:a,disableMultiStroke:!0,strokeWidth:y,preserveVertices:!0,seed:10,stroke:u}).outerHTML}circle(r,t,n,{color:i="#000",epaisseur:s=1,roughness:o=1.5,bowing:h=2.5}={}){return this.roughSvg.circle(r,t,n*2,{roughness:o,bowing:h,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:s,stroke:i}).outerHTML}polygon(r=[],{color:t="#000",epaisseur:n=1,roughness:i=1.5,bowing:s=2.5}={}){return this.roughSvg.polygon(r,{roughness:i,bowing:s,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:n,stroke:t}).outerHTML}linearPath(r=[],{color:t="#000",epaisseur:n=1,roughness:i=1.5,bowing:s=2.5}={}){return this.roughSvg.linearPath(r,{roughness:i,bowing:s,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:n,stroke:t}).outerHTML}ellipse(r,t,n,i,s,o,h,{color:u="#000",epaisseur:y=1,roughness:l=1,bowing:a=.5}={}){return this.roughSvg.ellipse(r,t,n,i,{roughness:l,bowing:a,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:y,stroke:u}).outerHTML}rectangle(r,t,n,i,s,o,h,{color:u="#000",epaisseur:y=1,roughness:l=1,bowing:a=.5}={}){return this.roughSvg.rectangle(r,t,n,i,{roughness:l,bowing:a,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:y,stroke:u}).outerHTML}curve(r=[],{color:t="#000",epaisseur:n=1,roughness:i=1.5,bowing:s=2.5}={}){return this.roughSvg.curve(r,{roughness:i,bowing:s,disableMultiStroke:!0,preserveVertices:!0,seed:10,strokeWidth:n,stroke:t}).outerHTML}destroy(){this.div.removeChild(this.svg)}static create(){const r=document.querySelector("div#appMathalea");if(!r)return null;const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.width="1024",t.style.height="1024",t.setAttribute("viewBox","0 0 0 0"),r.appendChild(t);const n=j.svg(t);return new C(n,r,t)}}const P=(e,r)=>Math.floor(Math.random()*(r-e+1))+e,M=(e,r)=>Math.sqrt((r.x-e.x)**2+(r.y-e.y)**2);function Y(e,r,t="",n="above"){isNaN(M(e,r))&&window.notify("milieu : Quelque chose ne va pas avec les points",{A:e,B:r});const i=(e.x+r.x)/2,s=(e.y+r.y)/2;return $(i,s,t,n)}function b(e,r,t,n="",i="above"){if(isNaN(M(e,r)))return window.notify("pointSurSegment : Quelque chose ne va pas avec les points",{A:e,B:r}),$(e.x,e.y,e.nom,e.positionLabel);if((t===void 0||typeof t=="string")&&(t=M(e,r)*P(15,85)/100),M(e,r)===0)return $(e.x,e.y,e.nom,e.positionLabel);const s=t/M(e,r),o=e.x+s*(r.x-e.x),h=e.y+s*(r.y-e.y);return $(o,h,n,i)}function f(e,r,t,n="above"){typeof r!="number"&&(r=P(-180,180));const i=r*Math.PI/180,s=e.centre.x+e.rayon*Math.cos(i),o=e.centre.y+e.rayon*Math.sin(i);return $(s,o,t,n)}function tt(e,r,t="",n="above"){return e.b===0?$(-e.c/e.a,r,t,n):e.a===0?$(r,-e.c/e.b,t,n):$(r,(-e.c-e.a*r)/e.b,t,n)}function st(e,r,t="",n="above"){let i,s;return Math.abs(r.a*e.b-r.b*e.a)<1e-6?g(e,r,$(50,50)):(s=(r.c*e.a-e.c*r.a)/(r.a*e.b-r.b*e.a),Math.abs(e.a)<1e-6?i=(-r.c-r.b*s)/r.a:i=(-e.c-e.b*s)/e.a,$(i,s,t,n))}function et(e,r=1,t=0,n="",i="above"){let s="",o=0,h="above";typeof t=="string"?(o=P(0,360),s=t,n!=null&&(h=n)):(o=t??P(0,360),n!=null&&(s=n),i!=null&&(h=i));const u=o*Math.PI/180,y=Math.cos(u),l=Math.sin(u),a=1,c=0,x=e.x+r*(y*a-l*c),p=e.y+r*(l*a+y*c);return $(x,p,s,h)}function it(e,r,t="",n=1){const i=r.centre,s=r.rayon,o=e.a,h=e.b,u=e.c,y=i.x,l=i.y;let a,c,x,p,m,G;if(Math.abs(h)<1e-6){if(x=-u/o,m=x,a=4*(-y*y-u*u/(o*o)-2*y*u/o+s*s),a<0)return g(e,r,$(50,50));Math.abs(a)<1e-10?(p=l+Math.sqrt(a)/2,G=p):(p=l-Math.sqrt(a)/2,G=l+Math.sqrt(a)/2)}else if(Math.abs(o)<1e-7){if(p=-u/h,G=p,a=4*(-l*l-u*u/(h*h)-2*l*u/h+s*s),a<0)return g(e,r,$(50,50));Math.abs(a)<1e-10?(x=y+Math.sqrt(a)/2,m=x):(x=y-Math.sqrt(a)/2,m=y+Math.sqrt(a)/2)}else{if(a=(2*(o*u/(h*h)+l*o/h-y))**2-4*(1+(o/h)**2)*(y*y+l*l+(u/h)**2+2*l*u/h-s*s),a<0)return g(e,r,$(50,50));Math.abs(a)<1e-10?(c=Math.sqrt(a),x=(-2*(o*u/(h*h)+l*o/h-y)-c)/(2*(1+(o/h)**2)),m=x,p=(-o*x-u)/h,G=p):(c=Math.sqrt(a),x=(-2*(o*u/(h*h)+l*o/h-y)-c)/(2*(1+(o/h)**2)),m=(-2*(o*u/(h*h)+l*o/h-y)+c)/(2*(1+(o/h)**2)),p=(-o*x-u)/h,G=(-o*m-u)/h)}return n===1?G>p?$(m,G,t):$(x,p,t):G>p?$(x,p,t):$(m,G,t)}function rt(e,r,t="",n=1){const i=e.centre,s=r.centre,o=e.rayon,h=r.rayon,u=i.x,y=s.x,l=i.y,a=s.y,c=y-u,x=a-l,p=Math.sqrt(x*x+c*c);if(p>o+h)return g(e,r,$(50,50));if(p<Math.abs(o-h))return g(e,r,$(50,50));const m=(o*o-h*h+p*p)/(2*p),G=u+c*m/p,q=l+x*m/p,T=Math.sqrt(o*o-m*m),L=-x*(T/p),B=c*(T/p),H=G+L,I=G-L,v=q+B,w=q-B;return n===1?w>v?$(I,w,t):$(H,v,t):w>v?$(H,v,t):$(I,w,t)}function g(e,r,t){return window.notify(`${JSON.stringify(e)} et ${JSON.stringify(r)} ne se coupent pas. Impossible de trouver leur intersection.`,{objet1:e,objet2:r}),$(t.x,t.y)}function N(e,r,t){const n=t*Math.PI/180,i=Math.cos(n),s=Math.sin(n),o=e.x-r.x,h=e.y-r.y;return V(r.x+o*i-h*s,r.y+o*s+h*i)}function d(e,r,t,n){const i=t*Math.PI/180,s=Math.cos(i),o=Math.sin(i),h=r.x-e.x,u=r.y-e.y;return V(e.x+n*(h*s-u*o),e.y+n*(h*o+u*s))}class K extends J{constructor(t,n,i,s,o,h){super();S(this,"tailleExtremites");S(this,"styleExtremites");S(this,"angleAvecHorizontale");S(this,"x1");S(this,"y1");S(this,"x2");S(this,"y2");S(this,"extremite1");S(this,"extremite2");S(this,"longueur");this.bordures=[0,0,0,0],this.typeObjet="segment",this.tailleExtremites=4;const u=y=>y instanceof Q;u(t)&&u(n)?(this.x1=t.x,this.y1=t.y,this.x2=n.x,this.y2=n.y,this.color=E(typeof i=="string"?i:"black"),this.styleExtremites=typeof s=="string"?s:""):typeof t=="number"&&typeof n=="number"&&typeof i=="number"&&typeof s=="number"?Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(i)||Number.isNaN(s)?(window.notify('Segment : (attendus : x1, y1, x2, y2 et "couleur") les arguments ne sont pas des nombres valides',{a:t,b:n,colorOrX2:i,styleOrY2:s}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.color=E("black"),this.styleExtremites=""):(this.x1=t,this.y1=n,this.x2=i,this.y2=s,this.color=E(o||"black"),this.styleExtremites=h||""):(window.notify("Segment : utilisez (A, B, color?, style?) ou (x1, y1, x2, y2, color?, style?)",{a:t,b:n,colorOrX2:i,styleOrY2:s}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.color=E("black"),this.styleExtremites=""),this.x1=Number(this.x1.toFixed(2)),this.y1=Number(this.y1.toFixed(2)),this.x2=Number(this.x2.toFixed(2)),this.y2=Number(this.y2.toFixed(2)),this.epaisseur=1,this.opacite=1,this.pointilles=0,this.bordures=[Number(Math.min(this.x1,this.x2)),Number(Math.min(this.y1,this.y2)),Number(Math.max(this.x1,this.x2)),Number(Math.max(this.y1,this.y2))],this.extremite1=V(this.x1,this.y1),this.extremite2=V(this.x2,this.y2),this.longueur=Math.sqrt((this.x2-this.x1)**2+(this.y2-this.y1)**2),this.angleAvecHorizontale=this.longueur<1e-8?0:F(V(this.x1+1,this.y1),this.extremite1,this.extremite2,5),this.longueur<1e-8&&window.notify("Création d'un segment de longueur nulle, les opérations géométriques peuvent être erronées",{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2})}svg(t){switch(this.epaisseur!==1&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;case 5:this.style+=' stroke-dasharray="5 5" ';break}this.opacite!==1&&(this.style+=` stroke-opacity="${this.opacite}" `);let n=this.codeExtremitesSVG(t);const i=V(this.x1,this.y1),s=V(this.x2,this.y2);return n+=`
	<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${s.xSVG(t)}" y2="${s.ySVG(t)}" stroke="${this.color[0]}" ${this.style} />`,this.styleExtremites.length>0?n=`<g id="${this.id}">${n}</g>`:n=n.replace("/>",`id="${this.id}" />`),n}tikz(){let t="";const n=[];switch(this.color[1].length>1&&this.color[1]!=="black"&&n.push(`color =${this.color[1]}`),this.epaisseur!==1&&n.push(`line width = ${this.epaisseur}`),this.opacite!==1&&n.push(`opacity = ${this.opacite}`),this.pointilles){case 1:n.push(" dash dot ");break;case 2:n.push(" densely dash dot dot ");break;case 3:n.push(" dash dot dot ");break;case 4:n.push(" dotted ");break;case 5:n.push(" dashed ");break}let i="";if(this.styleExtremites.length>0){const s={"|":"Bar",">":"Stealth","<":"Stealth"},o=Math.max(2,Math.round(this.tailleExtremites));let h="",u="";this.styleExtremites.length===3?(h=s[this.styleExtremites[0]]||"",u=s[this.styleExtremites[2]]||""):this.styleExtremites.length===2?(this.styleExtremites[0]in s&&(h=s[this.styleExtremites[0]]),this.styleExtremites[1]in s&&(u=s[this.styleExtremites[1]])):this.styleExtremites.length===1&&this.styleExtremites[0]in s&&(u=s[this.styleExtremites[0]]);const y=h?`{${h}[width=${o}mm]}`:"",l=u?`{${u}[width=${o}mm]}`:"";y&&l?i=`${y}-${l}`:y?i=`${y}-`:l&&(i=`-${l}`),i&&n.push(i)}return n.length>0&&(t="["+n.join(",")+"]"),`\\draw${t} (${this.x1},${this.y1})--(${this.x2},${this.y2});`}svgml(t,n){const i=C.create();if(i!=null){const s=V(this.x1,this.y1),o=V(this.x2,this.y2);let h=this.codeExtremitesSVG(t);return h+=i.line(s.xSVG(t),s.ySVG(t),o.xSVG(t),o.ySVG(t),{color:this.color[0],epaisseur:this.epaisseur,roughness:n*2}),this.styleExtremites.length>0?h=`<g id="${this.id}">${h}</g>`:h=h.replace("/>",`id="${this.id}" />`),i.destroy(),h}else return""}tikzml(t){const n=V(this.x1,this.y1),i=V(this.x2,this.y2);let s="";const o=[];return this.color[1].length>1&&this.color[1]!=="black"&&o.push(`color =${this.color[1]}`),this.epaisseur!==1&&o.push(`line width = ${this.epaisseur}`),this.opacite!==1&&o.push(`opacity = ${this.opacite}`),this.styleExtremites.length>1&&(this.styleExtremites.includes("[")||this.styleExtremites.includes("]")?o.push("{"+this.styleExtremites+"}"):o.push(this.styleExtremites)),o.push(`decorate,decoration={random steps , amplitude = ${t}pt}`),s="["+o.join(",")+"]",`\\draw${s} (${n.x},${n.y})--(${i.x},${i.y});`}codeExtremitesSVG(t){let n="";const i=V(this.x1,this.y1),s=V(this.x2,this.y2);if(this.longueur<1e-8)return n;const o=this.tailleExtremites;if(this.styleExtremites.length>1){const h=this.styleExtremites.slice(-1);if(h==="|"){const y=b(s,i,o/k.pixelsParCm),l=N(y,s,90),a=N(y,s,-90);n+=`<line x1="${l.xSVG(t)}" y1="${l.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`}if(h===">"){const y=b(s,i,o/k.pixelsParCm),l=d(s,y,45,.7),a=d(s,y,-45,.7);n+=`<line x1="${s.xSVG(t)}" y1="${s.ySVG(t)}" x2="${l.xSVG(t)}" y2="${l.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`,n+=`
	<line x1="${s.xSVG(t)}" y1="${s.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`}if(h==="<"){const y=b(s,i,-o/k.pixelsParCm),l=d(s,y,45,.7),a=d(s,y,-45,.7);n+=`<line x1="${s.xSVG(t)}" y1="${s.ySVG(t)}" x2="${l.xSVG(t)}" y2="${l.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`,n+=`
	<line x1="${s.xSVG(t)}" y1="${s.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`}if(h==="["){const y=b(s,i,o/k.pixelsParCm),l=d(y,s,90,1),a=d(y,s,-90,1),c=d(s,l,-90,.3),x=d(s,a,90,.3);n+=`<polyline points="${x.xSVG(t)},${x.ySVG(t)} ${a.xSVG(t)},${a.ySVG(t)} ${l.xSVG(t)},${l.ySVG(t)} ${c.xSVG(t)},${c.ySVG(t)}" fill="none" stroke="${this.color[0]}" ${this.style} id="${this.id}" stroke-width="${this.epaisseur}" />`}if(h==="]"){const y=b(s,i,o/k.pixelsParCm),l=d(y,s,90,1),a=d(y,s,-90,1),c=d(s,l,90,.3),x=d(s,a,-90,.3);n+=`<polyline points="${x.xSVG(t)},${x.ySVG(t)} ${a.xSVG(t)},${a.ySVG(t)} ${l.xSVG(t)},${l.ySVG(t)} ${c.xSVG(t)},${c.ySVG(t)}" fill="none" stroke="${this.color[0]}" ${this.style} id="${this.id}" stroke-width="${this.epaisseur}" />`}const u=this.styleExtremites[0];if(u==="["){const y=b(i,s,o/k.pixelsParCm),l=d(y,i,90,1),a=d(y,i,-90,1),c=d(i,l,90,.3),x=d(i,a,-90,.3);n+=`<polyline points="${x.xSVG(t)},${x.ySVG(t)} ${a.xSVG(t)},${a.ySVG(t)} ${l.xSVG(t)},${l.ySVG(t)} ${c.xSVG(t)},${c.ySVG(t)}" fill="none" stroke="${this.color[0]}" ${this.style} id="${this.id}" stroke-width="${this.epaisseur}" />`}if(u==="]"){const y=b(i,s,o/k.pixelsParCm),l=d(y,i,90,1),a=d(y,i,-90,1),c=d(i,l,-90,.3),x=d(i,a,90,.3);n+=`<polyline points="${x.xSVG(t)},${x.ySVG(t)} ${a.xSVG(t)},${a.ySVG(t)} ${l.xSVG(t)},${l.ySVG(t)} ${c.xSVG(t)},${c.ySVG(t)}" fill="none" stroke="${this.color[0]}" ${this.style} id="${this.id}" stroke-width="${this.epaisseur}" />`}if(u==="<"){const y=b(i,s,o/k.pixelsParCm),l=d(i,y,45,.7),a=d(i,y,-45,.7);n+=`<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${l.xSVG(t)}" y2="${l.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`,n+=`
	<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`}if(u===">"){const y=b(i,s,-o/k.pixelsParCm),l=d(i,y,45,.7),a=d(i,y,-45,.7);n+=`<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${l.xSVG(t)}" y2="${l.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`,n+=`
	<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`}if(u==="|"){const y=b(i,s,o/k.pixelsParCm),l=N(y,i,90),a=N(y,i,-90);n+=`<line x1="${l.xSVG(t)}" y1="${l.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color[0]}" stroke-width="${this.epaisseur}" />`}}return n}estSecant(t){return R(this,t)}}function W(e,r,t,n,i,s){return new K(e,r,t,n,i,s)}function nt(...e){const r=typeof e[0]=="number"&&typeof e[1]=="number"?W(e[0],e[1],e[2],e[3],e[4],e[5]):W(e[0],e[1],e[2],e[3]);return r.styleExtremites="|-|",r}export{C as M,K as S,b as a,f as b,nt as c,tt as d,st as e,rt as f,it as g,Y as m,et as p,W as s};
//# sourceMappingURL=segmentsVecteurs-BYbXXoZp.js.map
