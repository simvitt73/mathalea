{"version":3,"file":"Cube3dPerspectiveCavaliere-uVMFdlGF.js","sources":["../../src/lib/3d/3dProjectionMathalea2d/Cube3dPerspectiveCavaliere.ts"],"sourcesContent":["import { context } from '../../../modules/context'\nimport { colorToLatexOrHTML } from '../../2d/colorToLatexOrHtml'\nimport { ObjetMathalea2D } from '../../2d/ObjetMathalea2D'\nimport { polygone, polygoneAvecNom } from '../../2d/polygones'\nimport { segment } from '../../2d/segmentsVecteurs'\nimport { vide2d } from '../../2d/Vide2d'\nimport {\n  point3d,\n  translation3d,\n  vecteur3d,\n} from './elementsEtTransformations3d'\n\n/**\n * Classe du cube : construit le cube d'arète c dont le sommet en bas à gauche a les coordonnées x,y,z\n * (la face avant est dans le plan xz, la face de droite est toujours visible, la face de haut ou du bas est visible selon context.anglePerspective)\n * @param {number} x Abscisse du sommet du cube en bas à gauche\n * @param {number} y Ordonnée du sommet du cube en bas à gauche\n * @param {number} x Altitude du sommet du cube en bas à gauche\n * @param {number} c Longueur de l'arête du cube\n * @param {string} [color = 'black'] Couleur des arêtes du cube : du type 'blue' ou du type '#f15929'\n * @param {string} [colorAV = 'lightgray'] Couleur de la face avant du cube : du type 'blue' ou du type '#f15929'\n * @param {string} [colorHautouBas = 'white'] Couleur de la face visible du dessus (ou du dessous) du cube : du type 'blue' ou du type '#f15929'\n * @param {string} [colorDr = 'darkgray'] Couleur de la face de droite (toujours visible) du cube : du type 'blue' ou du type '#f15929'\n * @param {boolean} [aretesCachee = true] Si true, les arêtes cachées sont visibles.\n * @param {boolean} [affichageNom = false] Si true, le nom des sommets est affiché\n * @param {string[]} [nom = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']] Nom du cube\n * @property {boolean} affichageNom Si true, le nom des sommets est affiché\n * @property {Point3d[]} sommets Tableau contenant les sommets du cube\n * @property {Array} c2d Contient les commandes à tracer en 2d de cette fonction\n * @author Jean-Claude Lhote (Amendée par Eric Elter)\n * @class\n */\n\nexport class Cube3d extends ObjetMathalea2D {\n  constructor(\n    x: number,\n    y: number,\n    z: number,\n    c: number,\n    color = 'black',\n    colorAV = 'lightgray',\n    colorHautouBas = 'white',\n    colorDr = 'darkgray',\n    aretesCachee = true,\n    affichageNom = false,\n    nom = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'],\n  ) {\n    super()\n    this.affichageNom = affichageNom\n    const A = point3d(x, y, z)\n    A.c2d.nom = nom[0]\n    const vx = vecteur3d(c, 0, 0)\n    const vy = vecteur3d(0, c, 0)\n    const vz = vecteur3d(0, 0, c)\n    const B = translation3d(A, vx)\n    B.c2d.nom = nom[1]\n    const C = translation3d(B, vz)\n    C.c2d.nom = nom[2]\n    const D = translation3d(A, vz)\n    D.c2d.nom = nom[3]\n    let pointsFace = [A.c2d, B.c2d, C.c2d, D.c2d]\n    const faceAV = this.affichageNom\n      ? polygoneAvecNom(...pointsFace)\n      : polygone(pointsFace, color)\n    if (this.affichageNom) faceAV[0].color = colorToLatexOrHTML(color)\n    const E = translation3d(A, vy)\n    E.c2d.nom = nom[4]\n    const F = translation3d(E, vx)\n    F.c2d.nom = nom[5]\n    const G = translation3d(F, vz)\n    G.c2d.nom = nom[6]\n    const H = translation3d(D, vy)\n    H.c2d.nom = nom[7]\n    pointsFace = [E.c2d, F.c2d, G.c2d, H.c2d]\n    const faceArr = this.affichageNom\n      ? polygoneAvecNom(...pointsFace)\n      : vide2d()\n\n    const faceDr = polygone([B.c2d, F.c2d, G.c2d, C.c2d], color)\n    let faceVisibleHautOuBas, areteCachee3, areteCachee2, areteCachee1\n    if (context.anglePerspective > 0) {\n      faceVisibleHautOuBas = polygone([D.c2d, C.c2d, G.c2d, H.c2d], color) // Cette face est en fonction de context.anglePerspective\n      areteCachee1 = segment(E.c2d, H.c2d, color)\n      areteCachee2 = segment(E.c2d, F.c2d, color)\n      areteCachee3 = segment(E.c2d, A.c2d, color)\n    } else {\n      faceVisibleHautOuBas = polygone([A.c2d, B.c2d, F.c2d, E.c2d], color)\n      areteCachee1 = segment(E.c2d, H.c2d, color)\n      areteCachee2 = segment(D.c2d, H.c2d, color)\n      areteCachee3 = segment(G.c2d, H.c2d, color)\n    }\n    areteCachee1.pointilles = 2\n    areteCachee2.pointilles = 2\n    areteCachee3.pointilles = 2\n\n    this.sommets = [A, B, C, D, E, F, G, H]\n    // Les 8 sommets sont indispensables pour pouvoir les utiliser ensuite.\n    if (aretesCachee) {\n      if (Array.isArray(faceAV)) {\n        faceAV[0].couleurDeRemplissage = colorToLatexOrHTML(colorAV)\n      } else {\n        faceAV.couleurDeRemplissage = colorToLatexOrHTML(colorAV)\n      }\n      faceVisibleHautOuBas.couleurDeRemplissage =\n        colorToLatexOrHTML(colorHautouBas)\n      faceDr.couleurDeRemplissage = colorToLatexOrHTML(colorDr)\n      this.c2d = [\n        faceAV.length === 2 ? faceAV[0] : faceAV,\n        faceAV.length === 2 ? faceAV[1] : vide2d(),\n        faceDr,\n        faceVisibleHautOuBas,\n      ]\n    } else {\n      this.c2d = [\n        faceAV.length === 2 ? faceAV[0] : faceAV,\n        faceAV.length === 2 ? faceAV[1] : vide2d(),\n        faceDr,\n        faceVisibleHautOuBas,\n        faceArr.length === 2 ? faceArr[1] : vide2d(),\n        areteCachee1,\n        areteCachee2,\n        areteCachee3,\n      ]\n    }\n  }\n}\n/**\n * Crée un cube d'arète c dont le sommet en bas à gauche a les coordonnées x,y,z\n * (la face avant est dans le plan xz, la face de droite est toujours visible, la face de haut ou du bas est visible selon context.anglePerspective)\n * @param {number} x Abscisse du sommet du cube en bas à gauche\n * @param {number} y Ordonnée du sommet du cube en bas à gauche\n * @param {number} x Altitude du sommet du cube en bas à gauche\n * @param {number} c Longueur de l'arête du cube\n * @param {string} [color = 'black'] Couleur des arêtes du cube : du type 'blue' ou du type '#f15929'\n * @param {string} [colorAV = 'lightgray'] Couleur de la face avant du cube : du type 'blue' ou du type '#f15929'\n * @param {string} [colorHautouBas = 'white'] Couleur de la face visible du dessus (ou du dessous) du cube : du type 'blue' ou du type '#f15929'\n * @param {string} [colorDr = 'darkgray'] Couleur de la face de droite (toujours visible) du cube : du type 'blue' ou du type '#f15929'\n * @param {boolean} [aretesCachee = true] Si true, les arêtes cachées sont visibles.\n * @param {boolean} [affichageNom = false] Si true, le nom des sommets est affiché\n * @param {string[]} [nom = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']] Nom du cube\n * @example cube(0,0,0,10)\n * // Construit un cube noir d'arête 10 dont le sommet en bas à gauche est l'origine du repère et dont les faces visibles sont colorées aux couleurs par défaut.\n * // Les arêtes cachées sont visibles et le cube ne porte pas de nom.\n * @example cube(0,0,0,10,'red','','','',false)\n * // Construit un cube rouge d'arête 10 dont le sommet en bas à gauche est l'origine du repère et dont aucune face n'est coloriée.\n * // Les arêtes cachées sont invisibles et le cube ne porte pas de nom.\n * @example cube(0,0,0,10,'#f15929','','','',trie,true)\n * // Construit un cube orange d'arête 10 dont le sommet en bas à gauche est l'origine du repère et dont aucune face n'est coloriée.\n * // Les arêtes cachées sont visibles et le cube s'appelle ABCDEFGH.\n * @author Jean-Claude Lhote (Amendée par Eric Elter)\n * @return {Cube3d}\n */\nexport function cube3d(\n  x: number,\n  y: number,\n  z: number,\n  c: number,\n  color = 'black',\n  colorAV = 'lightgray',\n  colorHautouBas = 'white',\n  colorDr = 'darkgray',\n  aretesCachee = true,\n  affichageNom = false,\n  nom = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'],\n) {\n  return new Cube3d(\n    x,\n    y,\n    z,\n    c,\n    color,\n    colorAV,\n    colorHautouBas,\n    colorDr,\n    aretesCachee,\n    affichageNom,\n    nom,\n  )\n}\n"],"names":["Cube3d","ObjetMathalea2D","y","z","c","color","colorAV","colorHautouBas","colorDr","aretesCachee","affichageNom","nom","A","point3d","vx","vecteur3d","vy","vz","B","translation3d","C","D","pointsFace","faceAV","polygoneAvecNom","polygone","colorToLatexOrHTML","E","F","G","H","faceArr","vide2d","faceDr","faceVisibleHautOuBas","areteCachee3","areteCachee2","areteCachee1","context","segment","cube3d","x"],"mappings":"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"}