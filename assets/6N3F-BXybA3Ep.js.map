{"version":3,"file":"6N3F-BXybA3Ep.js","sources":["../../src/exercices/6e/6N3F.ts"],"sourcesContent":["import Exercice from '../Exercice'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport { arrondi, rangeMinMax } from '../../lib/outils/nombres'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport {\n  choice,\n  combinaisonListes,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport { propositionsQcm } from '../../lib/interactif/qcm'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { texteEnCouleurEtGras } from '../../lib/outils/embellissements'\nimport { pgcd } from '../../lib/outils/primalite'\nimport { sp } from '../../lib/outils/outilString'\n\nexport const titre =\n  'Savoir que la fraction peut représenter un nombre entier, un nombre décimal non entier ou un nombre non décimal'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\nexport const interactifReady = true\nexport const interactifType = 'qcm'\n\n/** Savoir que la fraction peut représenter un nombre entier, un nombre décimal non entier ou un nombre non décimal\n * @author Eric Elter\n */\nexport const uuid = '28e58'\n\nexport const refs = {\n  'fr-fr': ['6N3F'],\n  'fr-2016': ['6N22-6'],\n  'fr-ch': ['9NO12-13'],\n}\n\n/**\n * Retourne tous les diviseurs d'un nombre donné, à l'exception de 1.\n * Inclut le nombre lui-même comme diviseur.\n *\n * @param {number} n - Le nombre pour lequel on cherche les diviseurs.\n * @returns {number[]} Un tableau contenant tous les diviseurs de n, sauf 1.\n * @author Eric Elter\n * @example\n * getDiviseursSansUn(12); // [2, 3, 4, 6, 12]\n * getDiviseursSansUn(7);  // [7]\n * getDiviseursSansUn(1);  // []\n */\n\nfunction getDiviseursSansUn(n: number): number[] {\n  if (n <= 1) return []\n\n  const diviseurs: number[] = []\n\n  for (let i = 2; i <= Math.floor(n / 2); i++) {\n    if (n % i === 0) {\n      diviseurs.push(i)\n    }\n  }\n\n  diviseurs.push(n) // On ajoute le nombre lui-même comme diviseur\n\n  return diviseurs\n}\n\n/**\n * Détermine si une fraction `num / den` donne un nombre décimal fini ou non.\n * Une fraction a une écriture décimale finie si, après simplification,\n * son dénominateur ne contient que des facteurs premiers 2 et/ou 5.\n *\n * @param {number} num - Le numérateur de la fraction.\n * @param {number} den - Le dénominateur de la fraction.\n * @returns {boolean} `true` si le résultat est un nombre décimal fini, `false` sinon.\n * @author Eric Elter\n * @example\n * estDecimal(1, 2); // true (0.5)\n * estDecimal(1, 3); // false (0.333...)\n * estDecimal(7, 8); // true (0.875)\n * estDecimal(1, 6); // false (0.1666...)\n */\nfunction estDecimal(num: number, den: number): boolean {\n  let b = arrondi(den / pgcd(num, den))\n\n  // On enlève tous les facteurs 2 et 5 du dénominateur\n  while (b % 2 === 0) b /= 2\n  while (b % 5 === 0) b /= 5\n\n  // Si le dénominateur est réduit à 1, c'est une fraction décimale finie\n  return b === 1\n}\n\nexport default class FractionRepresenteNb extends Exercice {\n  constructor() {\n    super()\n\n    this.consigne =\n      'Pour chaque cas, indiquer si la fraction représente un nombre entier, un nombre décimal non entier ou bien un nombre non décimal.'\n    this.nbQuestions = 5\n\n    this.sup = 1\n    this.sup2 = 1\n    this.spacing = 2\n    this.spacingCorr = 2\n    this.besoinFormulaireNumerique = [\n      'Choix du numérateur le plus petit possible',\n      500,\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Choix du numérateur le plus grand possible',\n      500,\n    ]\n    this.besoinFormulaire3Numerique = [\n      'Choix du dénominateur',\n      3,\n      [\n        '1 : Plus petit que 10',\n        '2 : Plus petit que 100',\n        '3 : Plus petit que 500',\n      ].join('\\n'),\n    ]\n\n    this.sup = 1\n    this.sup2 = 100\n    this.sup3 = 1\n  }\n\n  nouvelleVersion() {\n    this.consigne =\n      this.nbQuestions > 1\n        ? 'Pour chaque cas, indiquer si la fraction représente un nombre entier, un nombre décimal non entier ou bien un nombre non décimal.'\n        : 'Indiquer si la fraction représente un nombre entier, un nombre décimal non entier ou bien un nombre non décimal.'\n    let choixDenominateurNbDecimal = true\n    const listeTypeDeQuestions = []\n    for (let ee = 0; ee < Math.ceil(this.nbQuestions / 3); ee++) {\n      listeTypeDeQuestions.push(...shuffle([1, 2, 3]))\n    }\n    let indiceNonDecimal = 0\n    let numerateurMin = this.sup\n    let numerateurMax = this.sup2\n    if (numerateurMin > numerateurMax) {\n      const tampon = numerateurMax\n      numerateurMax = numerateurMin\n      numerateurMin = tampon\n    }\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      let texte = ''\n      let texteCorr = ''\n      let typeNombre = ''\n      let tabDenominateurNbDecimal = combinaisonListes(\n        [2, 4, 5, 8, 10, 20, 50, 100, 200, 500],\n        this.nbQuestions,\n      )\n      let tabDenominateurNbNonDecimal = combinaisonListes(\n        [3, 6, 7, 9, 11, 12, 13, 14, 15, 17, 18, 19, 30, 60, 150, 300],\n        this.nbQuestions,\n      )\n      if (this.sup3 === 1) {\n        tabDenominateurNbDecimal = combinaisonListes(\n          [2, 4, 5, 8],\n          this.nbQuestions,\n        )\n        tabDenominateurNbNonDecimal = combinaisonListes(\n          [3, 6, 7, 9],\n          this.nbQuestions,\n        )\n      } else if (this.sup3 === 2) {\n        tabDenominateurNbDecimal = combinaisonListes(\n          [2, 4, 5, 8, 10, 20, 50],\n          this.nbQuestions,\n        )\n        tabDenominateurNbNonDecimal = combinaisonListes(\n          [3, 6, 7, 9, 11, 12, 13, 14, 15, 17, 18, 19, 30, 60],\n          this.nbQuestions,\n        )\n      }\n      let numerateur = choice(rangeMinMax(numerateurMin, numerateurMax))\n      const denominateurNbNonDecimal =\n        tabDenominateurNbNonDecimal[indiceNonDecimal]\n      const denominateurNbDecimal =\n        tabDenominateurNbDecimal[i - indiceNonDecimal]\n      let denominateur = 1\n      let compteur = 0\n      switch (listeTypeDeQuestions[i]) {\n        case 1: // Un entier\n          if (choixDenominateurNbDecimal) {\n            denominateur = denominateurNbNonDecimal\n            while (\n              arrondi(numerateur / denominateur) % 1 !== 0 &&\n              compteur < 100\n            ) {\n              numerateur = choice(rangeMinMax(numerateurMin, numerateurMax))\n              compteur++\n            }\n          } else {\n            denominateur = denominateurNbDecimal\n            while (\n              arrondi(numerateur / denominateur) % 1 !== 0 &&\n              compteur < 100\n            ) {\n              numerateur = choice(rangeMinMax(numerateurMin, numerateurMax))\n              compteur++\n            }\n          }\n          if (compteur === 100) {\n            // Nombre entier non trouvé alors on en impose un.\n            denominateur = choice(getDiviseursSansUn(numerateur))\n          }\n          choixDenominateurNbDecimal = !choixDenominateurNbDecimal\n          typeNombre = 'entier'\n          break\n\n        case 2: // Un décimal non entier\n          denominateur = denominateurNbDecimal\n          while (\n            arrondi(numerateur / denominateur) % 1 === 0 &&\n            compteur < 100\n          ) {\n            numerateur = choice(rangeMinMax(numerateurMin, numerateurMax))\n            compteur++\n          }\n          if (compteur === 100) {\n            // Nombre décimal non entier non trouvé alors on en impose un.\n            denominateur = choice([2, 4, 5, 8, 10]) * numerateur\n          }\n          typeNombre = 'decimal'\n          break\n\n        case 3: {\n          // Un décimal non entier\n          denominateur = denominateurNbNonDecimal\n          let b = arrondi(denominateur / pgcd(numerateur, denominateur))\n          // On enlève tous les facteurs 2 et 5 du dénominateur\n          while (b % 2 === 0) b /= 2\n          while (b % 5 === 0) b /= 5\n\n          // Si le dénominateur est réduit à 1, c'est une fraction décimale finie\n          while (estDecimal(numerateur, denominateur) && compteur < 100) {\n            numerateur = choice(rangeMinMax(numerateurMin, numerateurMax))\n            compteur++\n          }\n          if (compteur === 100) {\n            // Nombre décimal non entier non trouvé alors on en impose un.\n            denominateur = numerateur + randint(-2, 2, [0])\n          }\n          typeNombre = 'non decimal'\n          break\n        }\n      }\n\n      const fractionUtile = new FractionEtendue(numerateur, denominateur)\n        .texFraction\n\n      texte += `$${fractionUtile}$`\n      if (typeNombre !== 'non decimal') {\n        texteCorr = `Par calcul mental ou en posant la division $${numerateur}\\\\div${denominateur}$, on obtient que $${fractionUtile}=${texNombre(numerateur / denominateur)}$ et est donc un `\n        texteCorr +=\n          typeNombre === 'entier'\n            ? `${texteEnCouleurEtGras('nombre entier')}.<br>`\n            : `${texteEnCouleurEtGras('nombre décimal non entier')}.<br>`\n        if (tabDenominateurNbDecimal.includes(denominateur)) {\n          texteCorr += `De manière générale, toute division d'un nombre entier par $${denominateur}$ aboutit à un nombre décimal, parfois entier.`\n        }\n      } else {\n        texteCorr = `Par calcul mental ou en posant la division $${numerateur}\\\\div${denominateur}$, on se rend compte que cette division ne se «${sp()}termine${sp()}» pas ($${fractionUtile}\\\\approx${texNombre(numerateur / denominateur, 3)}$) et $${fractionUtile}$ est donc un ${texteEnCouleurEtGras('nombre non décimal')}.`\n      }\n\n      this.autoCorrection[i] = {}\n      this.autoCorrection[i].propositions = [\n        {\n          texte: 'Nombre entier',\n          statut: typeNombre === 'entier',\n        },\n        {\n          texte: 'Nombre décimal non entier',\n          statut: typeNombre === 'decimal',\n        },\n        {\n          texte: 'Nombre non décimal',\n          statut: typeNombre === 'non decimal',\n        },\n      ]\n      this.autoCorrection[i].options = { ordered: true, radio: true } // On ne mélange pas les propositions\n      const props = propositionsQcm(this, i)\n\n      texte += '<br>' + props.texte\n\n      if (this.questionJamaisPosee(i, denominateur, numerateur)) {\n        // Si la question n'a jamais été posée, on en crée une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        if (\n          listeTypeDeQuestions[i] === 3 ||\n          (listeTypeDeQuestions[i] === 1 && choixDenominateurNbDecimal)\n        )\n          indiceNonDecimal++\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","amcReady","amcType","interactifReady","interactifType","uuid","refs","getDiviseursSansUn","n","diviseurs","i","estDecimal","num","den","b","arrondi","pgcd","FractionRepresenteNb","Exercice","choixDenominateurNbDecimal","listeTypeDeQuestions","ee","shuffle","indiceNonDecimal","numerateurMin","numerateurMax","tampon","cpt","texte","texteCorr","typeNombre","tabDenominateurNbDecimal","combinaisonListes","tabDenominateurNbNonDecimal","numerateur","choice","rangeMinMax","denominateurNbNonDecimal","denominateurNbDecimal","denominateur","compteur","randint","fractionUtile","FractionEtendue","texNombre","texteEnCouleurEtGras","sp","props","propositionsQcm","listeQuestionsToContenu"],"mappings":"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"}