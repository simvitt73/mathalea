{"version":3,"file":"4C21-1-CbkcfcoC.js","sources":["../../src/exercices/4e/4C21-1.ts"],"sourcesContent":["import { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport {\n  simplificationDeFractionAvecEtapes,\n  texFractionFromString,\n} from '../../lib/outils/deprecatedFractions'\nimport { ecritureParentheseSiNegatif } from '../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { pgcd, ppcm } from '../../lib/outils/primalite'\nimport { fraction } from '../../modules/fractions'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { context } from '../../modules/context'\n\nexport const titre = 'Additionner deux fractions'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\nexport const dateDeModifImportante = '31/08/2024'\n/**\n * Effectuer la somme de deux fractions\n *\n * * Niveau 1 : 4 fois sur 5 un dénominateur est un multiple de l'autre et une fois sur 5 il faut additionner une fraction et un entier\n * * Niveau 2 : 2 fois sur 5, il faut trouver le ppcm, 1 fois sur 5 le ppcm correspond à leur produit, 1 fois sur 5 un dénominateur est multiple de l'autre, 1 fois sur 5 il faut additionner une fraction et un entier\n * * Paramètre supplémentaire : utiliser des nommbres relatifs (par défaut tous les nombres sont positifs)\n * @author Rémi Angot\n */\nexport const uuid = '5e8fc'\n\nexport const refs = {\n  'fr-fr': ['4C21-1', 'BP2AutoH10'],\n  'fr-ch': ['9NO13-7'],\n}\nexport default class ExerciceAdditionnerDesFractions extends Exercice {\n  constructor() {\n    super()\n    this.sup = 2 // Niveau de difficulté\n    this.sup2 = false // Avec ou sans relatifs\n    this.sup3 = false // Fraction irréductible attendue\n\n    this.spacing = 2\n    this.spacingCorr = 2\n    this.nbQuestions = 5\n\n    this.besoinFormulaireNumerique = [\n      'Niveau de difficulté',\n      2,\n      \"1 : Un dénominateur multiple de l'autre\\n2 : Cas général\",\n    ]\n    this.besoinFormulaire2CaseACocher = ['Avec des nombres relatifs']\n    this.besoinFormulaire3CaseACocher = ['Fraction irréductible attendue']\n  }\n\n  nouvelleVersion() {\n    const listeCouplesDeDenominateurs = [\n      [6, 9],\n      [4, 6],\n      [8, 12],\n      [9, 12],\n      [10, 15],\n      [10, 25],\n      [6, 21],\n      [12, 30],\n      [6, 8],\n      [50, 75],\n    ]\n    this.consigne = `Calculer et donner le résultat sous la forme d'une fraction${this.sup3 ? ' simplifiée au maximum.' : '.'}`\n    let typesDeQuestionsDisponibles\n    if (this.sup === 1) {\n      typesDeQuestionsDisponibles = [\n        'b_multiple_de_d',\n        'd_multiple_de_b',\n        'b_multiple_de_d',\n        'd_multiple_de_b',\n        'entier',\n      ]\n    } else {\n      typesDeQuestionsDisponibles = [\n        'ppcm',\n        'ppcm',\n        'premiers_entre_eux',\n        choice(['b_multiple_de_d', 'd_multiple_de_b']),\n        'entier',\n      ]\n    }\n    const listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    ) // Tous les types de questions sont posées mais l'ordre diffère à chaque \"cycle\"\n    for (\n      let i = 0,\n        a,\n        b,\n        c,\n        d,\n        texte,\n        texteCorr,\n        reponse,\n        couplesDeDenominateurs,\n        typesDeQuestions;\n      i < this.nbQuestions;\n      i++\n    ) {\n      typesDeQuestions = listeTypeDeQuestions[i]\n      let k1 = 0\n      let k2 = 0\n      let k = 0\n      let num = 0\n      let den = 1\n      switch (typesDeQuestions) {\n        case 'ppcm':\n          couplesDeDenominateurs = choice(listeCouplesDeDenominateurs)\n          if (choice([true, false])) {\n            b = couplesDeDenominateurs[0]\n            d = couplesDeDenominateurs[1]\n          } else {\n            b = couplesDeDenominateurs[1]\n            d = couplesDeDenominateurs[0]\n          }\n          k1 = ppcm(b, d) / b\n          k2 = ppcm(b, d) / d\n          break\n\n        case 'premiers_entre_eux':\n          b = randint(2, 9)\n          d = randint(2, 9)\n          while (pgcd(b, d) !== 1) {\n            b = randint(2, 9)\n            d = randint(2, 9)\n          }\n          k1 = ppcm(b, d) / b\n          k2 = ppcm(b, d) / d\n          break\n\n        case 'd_multiple_de_b':\n          b = randint(2, 9)\n          k = randint(2, 11)\n          d = b * k\n          break\n\n        case 'b_multiple_de_d':\n        default:\n          d = randint(2, 9)\n          k = randint(2, 11)\n          b = d * k\n          break\n      }\n\n      a = randint(1, 9, [b])\n      c = randint(1, 9, [d])\n      if (this.sup2) {\n        // si les numérateurs sont relatifs\n        a = a * choice([-1, 1])\n        c = c * choice([-1, 1])\n      }\n      texte = `$${texFractionFromString(a, b)}+${texFractionFromString(c, d)}$`\n      texteCorr = `$${texFractionFromString(a, b)}+${texFractionFromString(c, d)}`\n\n      // a/b+c/d = num/den (résultat non simplifié)\n      if (\n        typesDeQuestions === 'ppcm' ||\n        typesDeQuestions === 'premiers_entre_eux'\n      ) {\n        texteCorr += `=${texFractionFromString(a + miseEnEvidence('\\\\times ' + k1), b + miseEnEvidence('\\\\times ' + k1))}+${texFractionFromString(c + miseEnEvidence('\\\\times ' + k2), d + miseEnEvidence('\\\\times ' + k2))}`\n        // texteCorr += `=${texFraction(a*k1,b*k1)}+${texFraction(c*k2,d*k2)}`;\n        num = a * k1 + c * k2\n        den = b * k1\n        texteCorr += `=${texFractionFromString(a * k1 + '+' + ecritureParentheseSiNegatif(c * k2), den)}`\n      }\n\n      if (typesDeQuestions === 'd_multiple_de_b') {\n        texteCorr += `=${texFractionFromString(a + miseEnEvidence('\\\\times ' + k), b + miseEnEvidence('\\\\times ' + k))}+${texFractionFromString(c, d)}`\n        // texteCorr += `=${texFraction(a*k1,b*k1)}+${texFraction(c*k2,d*k2)}`;\n        num = a * k + c\n        den = b * k\n        texteCorr += `=${texFractionFromString(a * k + '+' + ecritureParentheseSiNegatif(c), den)}`\n      }\n\n      if (typesDeQuestions === 'b_multiple_de_d') {\n        texteCorr += `=${texFractionFromString(a, b)}+${texFractionFromString(c + miseEnEvidence('\\\\times ' + k), d + miseEnEvidence('\\\\times ' + k))}`\n        // texteCorr += `=${texFraction(a*k1,b*k1)}+${texFraction(c*k2,d*k2)}`;\n        num = a + c * k\n        den = b\n        texteCorr += `=${texFractionFromString(a + '+' + ecritureParentheseSiNegatif(c * k), den)}`\n      }\n\n      if (typesDeQuestions === 'entier') {\n        a = randint(1, 9)\n        b = randint(2, 9, [a])\n        let n = randint(1, 9)\n        if (this.sup2) {\n          a = a * choice([-1, 1])\n          n = n * choice([-1, 1])\n        }\n        if (choice([true, false])) {\n          texte = `$${n}+${texFractionFromString(a, b)}$`\n          texteCorr = texte\n          texteCorr += `$=${texFractionFromString(n + '\\\\times ' + b, b)}+${texFractionFromString(a, b)}`\n          texteCorr += `=${texFractionFromString(n * b + '+' + ecritureParentheseSiNegatif(a), b)}`\n        } else {\n          texte = `$${texFractionFromString(a, b)}+${ecritureParentheseSiNegatif(n)}$`\n          texteCorr = texte\n          texteCorr += `$=${texFractionFromString(a, b)}+${texFractionFromString(n + '\\\\times ' + b, b)}`\n          texteCorr += `=${texFractionFromString(a + '+' + ecritureParentheseSiNegatif(n * b), b)}`\n        }\n        num = n * b + a\n        den = b\n      }\n      texteCorr += `=${texFractionFromString(num, den)}`\n      texteCorr += simplificationDeFractionAvecEtapes(num, den) + '$'\n      // Uniformisation : Mise en place de la réponse attendue en interactif en orange et gras\n      const textCorrSplit = texteCorr.split('=')\n      let aRemplacer = textCorrSplit[textCorrSplit.length - 1]\n      aRemplacer = aRemplacer.replace('$', '')\n\n      texteCorr = ''\n      for (let ee = 0; ee < textCorrSplit.length - 1; ee++) {\n        texteCorr += textCorrSplit[ee] + '='\n      }\n      texteCorr += `$ $${miseEnEvidence(aRemplacer)}$`\n      // Fin de cette uniformisation\n\n      reponse = fraction(num, den).simplifie()\n      texte += ajouteChampTexteMathLive(\n        this,\n        i,\n        KeyboardType.clavierDeBaseAvecFraction,\n        { texteAvant: '$=$' },\n      )\n      handleAnswers(this, i, {\n        reponse: {\n          value: reponse.toLatex(),\n          options: {\n            fractionEgale: !this.sup3,\n            fractionIrreductible: this.sup3,\n          },\n        },\n      })\n\n      if (context.isAmc) {\n        texte =\n          'Calculer et donner le résultat sous forme irréductible\\\\\\\\\\n' + texte\n        this.autoCorrection[i] = {\n          enonce: texte, // Si vide, l'énoncé est celui de l'exercice.\n          propositions: [\n            {\n              texte: '', // Si vide, le texte est la correction de l'exercice.\n            },\n          ],\n          reponse: {\n            // @ts-expect-error\n            valeur: [reponse], // obligatoire (la réponse numérique à comparer à celle de l'élève), NE PAS METTRE DE STRING à virgule ! 4.9 et non pas 4,9. Cette valeur doit être passée dans un tableau d'où la nécessité des crochets.\n            param: {\n              digits: 5,\n              digitsNum: 3,\n              digitsDen: 2,\n              signe: true,\n            },\n          },\n        }\n      }\n\n      this.listeQuestions.push(texte)\n      this.listeCorrections.push(texteCorr)\n    }\n    listeQuestionsToContenu(this) // Espacement de 2 em entre chaque questions.\n  }\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","dateDeModifImportante","uuid","refs","ExerciceAdditionnerDesFractions","Exercice","listeCouplesDeDenominateurs","typesDeQuestionsDisponibles","choice","listeTypeDeQuestions","combinaisonListes","i","a","b","c","d","texte","texteCorr","reponse","couplesDeDenominateurs","typesDeQuestions","k1","k2","k","num","den","ppcm","randint","pgcd","texFractionFromString","miseEnEvidence","ecritureParentheseSiNegatif","n","simplificationDeFractionAvecEtapes","textCorrSplit","aRemplacer","ee","fraction","ajouteChampTexteMathLive","KeyboardType","handleAnswers","context","listeQuestionsToContenu"],"mappings":"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"}