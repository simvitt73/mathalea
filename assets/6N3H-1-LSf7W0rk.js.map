{"version":3,"file":"6N3H-1-LSf7W0rk.js","sources":["../../src/exercices/6e/6N3H-1.ts"],"sourcesContent":["import { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { pgcd } from '../../lib/outils/primalite'\nimport { context } from '../../modules/context'\nimport { labyrinthe } from '../../modules/Labyrinthe'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { rangeMinMax } from '../../lib/outils/nombres'\nimport FractionEtendue from '../../modules/FractionEtendue'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\nexport const dateDePublication = '11/12/2020'\nexport const dateDeModifImportante = '29/10/2024'\n\nexport const titre = 'Parcourir un labyrinthe de fractions égales'\n\n/**\n * @author Jean-Claude Lhote (remaniée par EE pour la prise en compte du nb de lignes et de colonnes du labyrinthe)\n * Parcourir un labyrinthe de fractions en passant par des fractions égales.\n */\nexport const uuid = 'f8a4d'\n\nexport const refs = {\n  'fr-fr': ['6N3H-1', 'BP2AutoG5'],\n  'fr-2016': ['6N41-1', 'BP2AutoG5'],\n  'fr-ch': ['9NO12-2'],\n}\nexport default class ExerciceLabyrintheFractionsEgales extends Exercice {\n  niveau: string\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = ['Facteur maximum', 20]\n    this.besoinFormulaire2Numerique = [\n      'Niveau de rapidité',\n      6,\n      '1 : Escargot\\n2 : Tortue\\n3 : Lièvre\\n4 : Antilope\\n5 : Guépard\\n6 : Au hasard',\n    ]\n    this.besoinFormulaire3Numerique = [\n      'Nombre de lignes du labyrinthe (entre 2 et 8 ou bien 1 si vous laissez le hasard décider)',\n      8,\n    ]\n    this.besoinFormulaire4Numerique = [\n      'Nombre de colonnes du labyrinthe (entre 2 et 8 ou bien 1 si vous laissez le hasard décider)',\n      8,\n    ]\n    this.niveau = '6e'\n    this.nbQuestions = 1\n\n    this.sup2 = 3\n    this.sup = 10\n    this.sup3 = 1\n    this.sup4 = 1\n\n    if (this.niveau === 'CM') {\n      this.sup = 10\n      this.sup2 = 3\n    } else {\n      this.sup = 13\n      this.sup2 = 4\n    }\n  }\n\n  nouvelleVersion() {\n    const tailleChiffre = context.isAmc ? 1.1 : 0.7\n    this.sup = Math.max(2, this.sup)\n    for (\n      let i = 0, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n\n    ) {\n      const mesfractions = []\n      const nbL = this.sup3 === 1 ? randint(2, 8) : Math.max(2, this.sup3)\n      const nbC =\n        this.sup4 === 1 ? randint(3, 11 - nbL) : Math.max(3, this.sup4)\n      const laby = labyrinthe({ nbLignes: nbL, nbColonnes: nbC })\n      laby.niveau = contraindreValeur(1, 6, this.sup2, randint(1, 6)) // Le niveau (de 1 à 6=mélange) définit le nombre d'étapes\n      const monchemin = laby.choisitChemin(laby.niveau) // on choisit un chemin\n      laby.murs2d = laby.construitMurs(monchemin) // On construit le labyrinthe\n      laby.chemin2d = laby.traceChemin(monchemin) // On trace le chemin solution\n      const table = randint(3, 8)\n      let num = randint(1, 2 * table - 1)\n      while (pgcd(num, table) !== 1) {\n        num = randint(2, 2 * table - 1)\n      }\n\n      const maximum = this.sup\n      texte = `Trouver la sortie en ne passant que par les cases contenant des fractions égales à $${new FractionEtendue(num, table).simplifie().texFSD}$.`\n\n      // Zone de construction du tableau de nombres : S'ils sont sur monchemin et seulement s'ils doivent vérifier la consigne\n      let listeMultiples = rangeMinMax(2, maximum, [table])\n      listeMultiples = combinaisonListes(listeMultiples, nbC * nbL)\n\n      for (let i = 0; i < nbC * nbL; i++) {\n        mesfractions.push(\n          new FractionEtendue(\n            num * listeMultiples[i],\n            table * listeMultiples[i],\n          ),\n        )\n      }\n      for (let i = 0; i < nbC * nbL; i++) {\n        switch (randint(1, 3)) {\n          case 1:\n            mesfractions.push(\n              new FractionEtendue(table, num).multiplieEntier(\n                listeMultiples[i],\n              ),\n            )\n            break\n          case 2:\n          case 3:\n            mesfractions.push(\n              new FractionEtendue(\n                num * listeMultiples[i],\n                table * Math.abs(listeMultiples[i] - table),\n              ),\n            )\n            break\n        }\n      }\n\n      // Le tableau de nombre étant fait, on place les objets nombres.\n      laby.nombres2d = laby.placeNombres(\n        monchemin,\n        mesfractions.slice(0, nbC * nbL - 1),\n        mesfractions.slice(nbC * nbL),\n        tailleChiffre,\n      )\n      const params = {\n        xmin: -4,\n        ymin: 0,\n        xmax: 5 + 3 * nbC,\n        ymax: 2 + 3 * nbL,\n        pixelsParCm: 20,\n        scale: 0.7,\n      }\n      if (context.isAmc)\n        texte += ' Laisser dans le labyrinthe les traces du chemin parcouru.'\n      texte += '<br>' + mathalea2d(params, laby.murs2d, laby.nombres2d)\n      const nbDeNombresRencontres = laby.chemin2d.length - 1\n      const numeroDeSortie = nbL - monchemin[monchemin.length - 1][1]\n      texteCorr = `Voici le chemin en couleur ($${miseEnEvidence(nbDeNombresRencontres)}$ nombres rencontrés avant la sortie) et la sortie est le numéro $${miseEnEvidence(numeroDeSortie)}$.<br>`\n      texteCorr += mathalea2d(\n        params,\n        laby.murs2d,\n        laby.nombres2d,\n        laby.chemin2d,\n      )\n      if (this.interactif) {\n        texte += ajouteChampTexteMathLive(\n          this,\n          2 * i,\n          KeyboardType.clavierNumbers,\n          { texteAvant: 'Indiquer le numéro de la bonne sortie :' },\n        )\n        handleAnswers(this, 2 * i, {\n          reponse: { value: numeroDeSortie },\n        })\n        texte += ajouteChampTexteMathLive(\n          this,\n          2 * i + 1,\n          KeyboardType.clavierNumbers,\n          { texteAvant: '<br>Combien de nombres rencontrés avant la sortie ?' },\n        )\n        handleAnswers(this, 2 * i + 1, {\n          reponse: { value: nbDeNombresRencontres },\n        })\n      }\n      if (context.isAmc) {\n        this.autoCorrection[0] = {\n          enonce: 'ici la (ou les) question(s) est(sont) posée(s)',\n          enonceAvant: false, // EE : ce champ est facultatif et permet (si false) de supprimer l'énoncé ci-dessus avant la numérotation de chaque question.\n          enonceAvantUneFois: false, // EE : ce champ est facultatif et permet (si true) d'afficher l'énoncé ci-dessus une seule fois avant la numérotation de la première question de l'exercice. Ne fonctionne correctement que si l'option melange est à false.\n          propositions: [\n            {\n              type: 'AMCOpen', // on donne le type de la première question-réponse qcmMono, qcmMult, AMCNum, AMCOpen\n              propositions: [\n                {\n                  texte: texteCorr,\n                  statut: 3, // OBLIGATOIRE (ici c'est le nombre de lignes du cadre pour la réponse de l'élève sur AMC)\n                  enonce: texte,\n                  sanscadre: true, // EE : ce champ est facultatif et permet (si true) de cacher le cadre et les lignes acceptant la réponse de l'élève\n                },\n              ],\n            },\n          ],\n        }\n      }\n      if (this.questionJamaisPosee(i, texte)) {\n        // Si la question n'a jamais été posée, on en crée une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["interactifReady","interactifType","amcReady","amcType","dateDePublication","dateDeModifImportante","titre","uuid","refs","ExerciceLabyrintheFractionsEgales","Exercice","__publicField","tailleChiffre","context","texte","texteCorr","cpt","mesfractions","nbL","randint","nbC","laby","labyrinthe","contraindreValeur","monchemin","table","num","pgcd","maximum","FractionEtendue","listeMultiples","rangeMinMax","combinaisonListes","i","params","mathalea2d","nbDeNombresRencontres","numeroDeSortie","miseEnEvidence","ajouteChampTexteMathLive","KeyboardType","handleAnswers","listeQuestionsToContenu"],"mappings":"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"}