{"version":3,"file":"6G8A-A_A06cD2.js","sources":["../../src/exercices/6e/6G8A.js"],"sourcesContent":["import {\n  canvasEnonceCorrection,\n  empilementCubes,\n} from '../../lib/3d/3d_dynamique/empilementsCube'\nimport {\n  createCubesProjections,\n  projectionCubesIso2d,\n} from '../../lib/3d/3dProjectionMathalea2d/CubeIso'\nimport {\n  choice,\n  compteOccurences,\n  enleveDoublonNum,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport { numAlpha } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\nexport const titre = \"Dessiner différentes vues d'un empilement de cubes\"\nexport const dateDePublication = '06/10/2022'\nexport const dateDeModifImportante = '08/11/2023' // Retour du formulaire numérique en supprimant le tooltip\n\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\n\n/**\n * Dessiner différentes vues d'un empilement de cubes\n * @author Eric Elter (sur un début d'exercices d'Erwan Duplessy)\n * Source : http://cache.media.education.gouv.fr/file/Geometrie_et_espace/47/1/RA16_C4_MATH_geo_espace_flash_567471.pdf\n */\n\nexport const uuid = '136dd'\n\nexport const refs = {\n  'fr-fr': ['6G8A'],\n  'fr-2016': ['3G41'],\n  'fr-ch': [],\n}\nexport default class VuesEmpilementCubes extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireTexte = [\n      'Longueur, largeur et hauteur sous la forme abc',\n      'a étant la longueur du solide (a>1)\\nb étant la largeur du solide (b>1)\\nc étant sa hauteur du solide (c>1)\\n Choisir 0 ou 1 si on souhaite laisser le hasard faire.',\n    ]\n    this.besoinFormulaire2Texte = [\n      'Vues possibles dans les questions ',\n      'Nombres séparés par des tirets :\\n1 : Gauche\\n2 : Droite\\n3 : Dessus\\n4 : Dessous \\n5 : Face\\n6 : Dos\\n7 : 3 faces non parallèles',\n    ]\n    // 'De 1 à 6\\nSi le nombre de vues demandé est supérieur au nombre de vues possible, alors des vues autres que celles choisies sont proposées.'\n    this.besoinFormulaire3Numerique = ['Nombre de vues demandé', 6]\n\n    this.besoinFormulaire4CaseACocher = ['3D dynamique', false]\n    this.sup4 = false\n\n    this.sup = 1\n    this.sup2 = 7\n    this.sup3 = 3\n    this.nbQuestions = 2\n  }\n\n  nouvelleVersion() {\n    const dimensionsTab = gestionnaireFormulaireTexte({\n      max: 999,\n      defaut: 1,\n      nbQuestions: 1,\n      saisie: this.sup,\n      shuffle: false,\n    })\n    let dimensions = dimensionsTab[0]\n    if ((dimensions > 1 && dimensions < 100) || dimensions > 999) dimensions = 1\n\n    for (\n      let q = 0,\n        vuePossible,\n        alpha,\n        beta,\n        consigneAMC,\n        texteAMC,\n        texte,\n        texteCorr,\n        cpt = 0;\n      q < this.nbQuestions && cpt < 50;\n\n    ) {\n      let listeVuesPossibles = gestionnaireFormulaireTexte({\n        max: 7,\n        defaut: 7,\n        nbQuestions: this.nbQuestions,\n        saisie: this.sup2,\n        shuffle: false,\n      })\n\n      if (compteOccurences(listeVuesPossibles, 7) > 0) {\n        listeVuesPossibles = shuffle([\n          randint(1, 2),\n          randint(3, 4),\n          randint(5, 6),\n        ])\n      } else {\n        listeVuesPossibles = enleveDoublonNum(listeVuesPossibles)\n        listeVuesPossibles = shuffle(listeVuesPossibles)\n      }\n      for (let ee = 1; ee < 7; ee++) {\n        if (!listeVuesPossibles.includes(ee)) listeVuesPossibles.push(ee)\n      }\n      listeVuesPossibles = listeVuesPossibles.map((x) => x - 1)\n\n      texte = ''\n      texteCorr = ''\n\n      const vue = [\n        ['gauche', 90, 0],\n        ['droite', -90, 0],\n        ['dessus', 0, -90],\n        ['dessous', 0, 90],\n        ['face', 0, 0],\n        ['dos', 180, 0],\n      ]\n      const colorD = context.isAmc\n        ? choice(['white', 'gray', 'darkgray'])\n        : choice(['red', 'blue', 'green', 'gray'])\n      const colorT = context.isAmc\n        ? choice(['white', 'gray', 'darkgray'], [colorD])\n        : choice(['white', 'yellow'])\n      const colorG = context.isAmc\n        ? choice(['white', 'gray', 'darkgray'], [colorD, colorT])\n        : choice(['red', 'blue', 'green', 'gray'], [colorD])\n      const longueur =\n        Math.floor((dimensions % 100) / 10) < 2\n          ? randint(2, 6)\n          : Math.floor((dimensions % 100) / 10)\n      const largeur =\n        Math.floor(dimensions / 100) < 2\n          ? randint(2, 6)\n          : Math.floor(dimensions / 100)\n      const hauteur = dimensions % 10 < 2 ? randint(2, 6) : dimensions % 10\n      const L = empilementCubes(longueur, largeur, hauteur)\n      if (!this.sup4 || !context.isHtml) {\n        // 3d iso avec mathalea2d (2 vues)\n        texte +=\n          'Voici un solide composé par un empilement de cubes, présenté de deux façons différentes. <br>'\n        const { figure } = createCubesProjections(L, largeur, longueur, hauteur)\n\n        texte += figure + '<br>'\n      } else {\n        // 3d dynamique avec Canvas3DElement (1 vue qui tourne)\n        texte += 'Voici un solide composé par un empilement de cubes.<br>'\n        const { canvasEnonce } = canvasEnonceCorrection(\n          L,\n          `SceneEx${this.numeroExercice}Q${q}`,\n        )\n        texte += canvasEnonce + '<br>'\n      }\n\n      consigneAMC = texte\n      if (context.isAmc) {\n        this.autoCorrection[q] = {\n          enonce: consigneAMC + '<br>',\n          propositions: [],\n        }\n      }\n      for (let ee = 0; ee < this.sup3; ee++) {\n        vuePossible = listeVuesPossibles[ee]\n        texteAMC = this.sup3 > 1 ? numAlpha(ee) + ' ' : ''\n        texteAMC += `Dessiner la vue de ${vue[vuePossible][0]} de ce solide.`\n        texte += texteAMC + '<br>'\n        // correction :\n        texteCorr += this.sup3 > 1 ? numAlpha(ee) + ' ' : ''\n        texteCorr += `Voici la vue de ${vue[vuePossible][0]} de ce solide. <br>`\n        alpha = vue[vuePossible][1]\n        beta = vue[vuePossible][2]\n        const { objets, params } = projectionCubesIso2d(L, alpha, beta, false, {\n          colorD,\n          colorT,\n          colorG,\n        })\n        texteCorr += mathalea2d(params, objets) + '<br>'\n        if (context.isAmc) {\n          this.autoCorrection[q].propositions.push({\n            type: 'AMCOpen',\n            propositions: [\n              {\n                texte: ' ',\n                statut: 3, // (ici c'est le nombre de lignes du cadre pour la réponse de l'élève sur AMC)\n                enonce: texteAMC, // EE : ce champ est facultatif et fonctionnel qu'en mode hybride (en mode normal, il n'y a pas d'intérêt)\n                sanscadre: false, // EE : ce champ est facultatif et permet (si true) de cacher le cadre et les lignes acceptant la réponse de l'élève\n                pointilles: false,\n              },\n            ],\n          })\n        }\n      }\n      if (this.questionJamaisPosee(q, JSON.stringify(L))) {\n        // <- laisser le i et ajouter toutes les variables qui rendent les exercices différents (par exemple a, b, c et d)\n        this.listeQuestions[q] = texte\n        this.listeCorrections[q] = texteCorr\n\n        q++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this) // On envoie l'exercice à la fonction de mise en page\n  }\n}\n"],"names":["titre","dateDePublication","dateDeModifImportante","amcReady","amcType","uuid","refs","VuesEmpilementCubes","Exercice","dimensions","gestionnaireFormulaireTexte","q","vuePossible","alpha","beta","consigneAMC","texteAMC","texte","texteCorr","cpt","listeVuesPossibles","compteOccurences","shuffle","randint","enleveDoublonNum","ee","x","vue","colorD","context","choice","colorT","colorG","longueur","largeur","hauteur","L","empilementCubes","figure","createCubesProjections","canvasEnonce","canvasEnonceCorrection","numAlpha","objets","params","projectionCubesIso2d","mathalea2d","listeQuestionsToContenu"],"mappings":"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"}