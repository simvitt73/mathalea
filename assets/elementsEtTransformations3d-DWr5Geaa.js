var J=Object.defineProperty;var K=(s,t,i)=>t in s?J(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var h=(s,t,i)=>K(s,typeof t!="symbol"?t+"":t,i);import{P as M}from"./index-Dkwu26bg.js";import{c as Q}from"./utilitairesGeometriques-rO8Jz15i.js";import{v as F,d as U}from"./droites-1cMQNrTw.js";import{f as X}from"./fixeBordures-BSnKuTIe.js";import{O as L}from"./ObjetMathalea2D-CXcNXRpD.js";import{a as Y}from"./PointAbstrait-Cz1GEocE.js";import{p as Z}from"./polygones-BMzqJQvg.js";import{p as R}from"./Polyline-CMaVFuZW.js";import{r as _}from"./representantVecteur-EkhBTtJK.js";import{s as z}from"./segmentsVecteurs-DWWtoN_4.js";import{C as $,D as B,E as D,F as E,G as C}from"./vendors/mathjs-DKCMnljp.js";const b={matrix:C,multiply:E,norm:$,cross:D,dot:B};class x{constructor(t,i,e,o,l,n){h(this,"x");h(this,"y");h(this,"z");h(this,"isVisible");h(this,"label");h(this,"typeObjet");h(this,"c2d");const c=M.anglePerspective*Math.PI/180,r=M.coeffPerspective,a=b.matrix([[1,r*Math.cos(c),0],[0,r*Math.sin(c),1]]);this.x=t,this.y=i,this.z=e,this.isVisible=o,this.label=l,this.typeObjet="point3d";const f=b.matrix([this.x,this.y,this.z]),u=b.multiply(a,f).toArray().map(Number);this.c2d=Y(Number(u[0].toFixed(2)),Number(u[1].toFixed(2)),this.label,n)}}function V(s,t,i=0,e=!0,o="",l="above left"){return new x(s,t,i,e,o,l)}class k{constructor(...t){h(this,"x",0);h(this,"y",0);h(this,"z",0);h(this,"matrice");h(this,"norme");h(this,"c2d");h(this,"representant");const i=M.anglePerspective*Math.PI/180,e=M.coeffPerspective,o=C([[1,e*Math.cos(i),0],[0,e*Math.sin(i),1]]);if(t.length===2)this.x=t[1].x-t[0].x,this.y=t[1].y-t[0].y,this.z=t[1].z-t[0].z;else if(t.length===3)this.x=t[0],this.y=t[1],this.z=t[2];else if(t.length===1){const n=t[0].toArray().map(Number);this.x=n[0],this.y=n[1],this.z=n[2]}this.matrice=C([this.x,this.y,this.z]),this.norme=Math.sqrt(this.x**2+this.y**2+this.z**2);const l=E(o,this.matrice).toArray().map(Number);this.c2d=F(l[0],l[1]),this.representant=function(n){const c=y(n,this);return _(F(n.c2d,c.c2d),n.c2d)}}}function m(...s){return new k(...s)}class tt{constructor(t,i,e,o){h(this,"extremite1");h(this,"extremite2");h(this,"color");h(this,"isVisible");h(this,"c2d");this.extremite1=t,this.extremite2=i,this.color=Array.isArray(e)?e[0]:e,this.isVisible=o,!t.isVisible||!i.isVisible||!this.isVisible?this.isVisible=!1:this.isVisible=!0,this.c2d=z(t.c2d,i.c2d,this.color),this.isVisible?this.c2d.pointilles=0:this.c2d.pointilles=2}}function A(s,t,i="black",e=!0){return new tt(s,t,i,e)}class st{constructor(t,i){h(this,"directeur",m(0,0,1));h(this,"origine");h(this,"point");h(this,"c2d");i.constructor===k?this.directeur=i:i.constructor===x&&(this.directeur=m(t,i)),this.origine=t;const e=y(this.origine,this.directeur);this.point=e,this.c2d=U(this.origine.c2d,e.c2d),this.c2d.isVisible=!1}}function w(s,t){return new st(s,t)}function pt(s,t,i,e="direct",o=!1,l="black",n=M.anglePerspective){let c;const r=[],a=[];e==="direct"?c=1:c=-1;const f=w(s,t);r.push(p(y(s,i),f,n)),a.push(r[0].c2d);for(let d=1;d<19;d++)r.push(p(r[d-1],f,10*c)),a.push(r[d].c2d);const u=R(a,l);return o&&(u.pointilles=2,u.opacite=.9),u}function yt(s,t,i,e,o,l,n){const c=[],r=[],a=w(s,t);c.push(p(y(s,i),a,l)),r.push(c[0].c2d);const f=Math.floor((n-l)/10);for(let d=1;d<=f;d++)c.push(p(c[d-1],a,10)),r.push(c[d].c2d);const u=R(r,o);return e==="caché"&&(u.pointilles=2,u.opacite=.3),u}function bt(s,t,i,e=!0,o="black",l=!1){const n=[],c=[],r=[],a=w(s,t);n.push(p(y(s,i),a,M.anglePerspective)),r.push(n[0]),c.push(n[0].c2d);for(let u=1;u<36;u++)n.push(p(n[u-1],a,10)),r.push(n[u]),c.push(n[u].c2d);const f=Z(c,o);return f.isVisible=e,l&&(f.pointilles=2),[f,r,c]}class N{constructor(...t){h(this,"listePoints");h(this,"color","black");h(this,"listePoints2d");h(this,"aretes");h(this,"c2d");Array.isArray(t[0])?(this.listePoints=t[0],typeof t[1]=="string"&&t[1]!==""&&(this.color=t[1])):(this.listePoints=t.filter(l=>l instanceof x),this.color="black");const i=[];let e;const o=[];e=this.listePoints[0],this.listePoints2d=[e.c2d];for(let l=1;l<this.listePoints.length;l++)i.push(A(e,this.listePoints[l],this.color,e.isVisible&&this.listePoints[l].isVisible)),o.push(i[l-1].c2d),e=this.listePoints[l],this.listePoints2d.push(e.c2d);i.push(A(e,this.listePoints[0],this.color,e.isVisible&&this.listePoints[0].isVisible)),o.push(i[this.listePoints.length-1].c2d),this.aretes=i,this.c2d=o}}function I(...s){return new N(...s)}function W(s,t,i){let e,o;const l=b.norm(t.matrice),n=b.multiply(t.matrice,1/Number(l)).toArray().map(Number),c=n[0],r=n[1],a=n[2],f=Math.cos(i*Math.PI/180),u=Math.sin(i*Math.PI/180),d=1-f,P=b.matrix([[c*c*d+f,c*r*d-a*u,c*a*d+r*u],[c*r*d+a*u,r*r*d+f,r*a*d-c*u],[c*a*d-r*u,r*a*d+c*u,a*a*d+f]]);return s instanceof x?(e=b.matrix([s.x,s.y,s.z]),o=b.multiply(P,e).toArray().map(Number),V(o[0],o[1],o[2])):(e=s,o=b.multiply(P,e.matrice).toArray().map(Number),m(o[0],o[1],o[2]))}function p(s,t,i,e){const o=t.directeur,l=t.origine;if(s instanceof x){const n=m(l,V(0,0,0)),c=m(V(0,0,0),l),r=y(s,n),a=W(r,o,i);return y(a,c)}if(s instanceof k)return W(s,o,i);if(s instanceof N){const n=s.listePoints.map(c=>p(c,t,i));return I(n,e??s.color)}return s}class it extends L{constructor(t,i,e,o,l){super(),this.epaisseur=o,this.color=Q(l),this.c2d=[];let n,c,r;n=y(t.origine,i);for(let d=0;d<e;d+=5)c=p(n,t,5),r=z(n.c2d,c.c2d,l),r.epaisseur=this.epaisseur,this.c2d.push(r),n=c;c=p(n,t,5),r=z(n.c2d,c.c2d,l),r.epaisseur=this.epaisseur,this.c2d.push(r);const a=w(c,t.directeur),f=p(n,a,30),u=p(n,a,-30);r=z(c.c2d,f.c2d,l),r.epaisseur=this.epaisseur,this.c2d.push(r),r=z(c.c2d,u.c2d,l),r.epaisseur=this.epaisseur,this.c2d.push(r)}}function xt(s,t,i,e,o){return new it(s,t,i,e,o)}function y(s,t){if(s instanceof x){const i=s.x+t.x,e=s.y+t.y,o=s.z+t.z;return V(i,e,o)}else if(s instanceof N){const i=[];for(let e=0;e<s.listePoints.length;e++)i.push(y(s.listePoints[e],t));return I(i,s.color)}return window.notify("translation3d ne peut être appliqué qu'à un point3d ou un polygone3d",s),s}function O(s,t,i,e){let o;const l=[];if(s instanceof x)return o=m(t,s),o.x*=i,o.y*=i,o.z*=i,y(t,o);if(s instanceof k)return o=m(s.x,s.y,s.z),o.x*=i,o.y*=i,o.z*=i,o;if(s instanceof N){for(let n=0;n<s.listePoints.length;n++)l.push(O(s.listePoints[n],t,i));return I(l,s.color)}return window.notify("homothetie3d ne peut être appliqué qu'à un point3d, un vecteur3d ou un polygone3d",s),s}class Pt extends L{constructor(t,i,e,o="black",l=1){super();const n=m(i,t),c=m(i,e),r=n.norme,a=c.norme,f=O(t,i,l*.5/r),u=O(e,i,l*.5/a),d=m(i,f),P=m(i,u),G=i.x+d.x+P.x,H=i.y+d.y+P.y,S=i.z+d.z+P.z,T=V(G,H,S),v=A(f,T,o),q=A(T,u,o),g=X([v.c2d,q.c2d]);this.bordures=[g.xmin,g.ymin,g.xmax,g.ymax],this.svg=function(j){return v.c2d.svg(j)+q.c2d.svg(j)},this.tikz=function(){return v.c2d.tikz()+q.c2d.tikz()}}}export{Pt as C,x as P,I as a,A as b,w as c,pt as d,p as e,bt as f,yt as g,O as h,V as p,W as r,xt as s,y as t,m as v};
//# sourceMappingURL=elementsEtTransformations3d-DWr5Geaa.js.map
