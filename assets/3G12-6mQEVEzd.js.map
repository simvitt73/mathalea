{"version":3,"file":"3G12-6mQEVEzd.js","sources":["../../src/exercices/3e/3G12.ts"],"sourcesContent":["import { codageAngle } from '../../lib/2d/angles'\nimport { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport { pointAbstrait, type PointAbstrait } from '../../lib/2d/PointAbstrait'\nimport type { Polygone } from '../../lib/2d/polygones'\nimport { segment } from '../../lib/2d/segmentsVecteurs'\nimport { labelPoint, texteParPosition } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { rotation } from '../../lib/2d/transformations'\nimport { arcenciel, texcolors } from '../../lib/format/style'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice, shuffle } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { nombreAvecEspace } from '../../lib/outils/texNombre'\nimport { rotationAnimee } from '../../modules/2dAnimation'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  egal,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport { Pavage, pavage } from '../../modules/Pavage'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n\nexport const titre =\n  \"Trouver l'image d'une figure par une rotation dans un pavage\"\nexport const dateDePublication = '16/12/2020'\nexport const dateDeModifImportante = '01/04/2025'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\n\n/**\n * Trouver l'image par sune rotation d'une figure dans un pavage\n * @author Jean-Claude Lhote\n * Rajout par EE d'un quatrième paramètre, de l'interactif et de l'AMC\n */\nexport const uuid = '442e0'\n\nexport const refs = {\n  'fr-fr': ['3G12'],\n  'fr-ch': ['10ES2-11'],\n}\nexport default class PavageEtRotation2D extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Taille du pavage (la grande est automatique au-delà de 5 questions)',\n      2,\n      ' 1 : Taille modeste\\n 2 : Grande taille',\n    ]\n    this.besoinFormulaire2CaseACocher = ['Montrer les centres']\n    this.besoinFormulaire3Numerique = [\n      'Choix du pavage',\n      8,\n      \"1 : Triangles équilatéraux\\n2 : Carrés\\n3 : Hexagones réguliers\\n4 : Carrés et triangles équilatéraux\\n5 : Octogones et carrés\\n 6 : Losanges (pavage hexagonal d'écolier)\\n7 : Hexagones et triangles équilatéraux\\n8 : Un des sept pavages au hasard\",\n    ]\n    this.besoinFormulaire4CaseACocher = [\"Ignorer l'angle de 180$^\\\\circ$\"]\n    this.nbQuestions = 3\n\n    this.correctionDetailleeDisponible = true\n    this.correctionDetaillee = true\n    this.spacing = 2\n\n    this.sup = 1 // 1 pour des pavages modestes, 2 pour des plus grand.\n    this.sup2 = false // On cache les barycentres par défaut.\n    this.sup3 = 7\n    this.sup4 = true // On ignore les rotations centrales par défaut.\n    context.isHtml ? (this.spacingCorr = 2.5) : (this.spacingCorr = 1.5)\n  }\n\n  nouvelleVersion() {\n    const videcouples = function (tableau: number[][]) {\n      for (let k = 0; k < tableau.length; k++) {\n        if (tableau[k][0] === tableau[k][1]) {\n          tableau.splice(k, 1)\n        }\n        /* for (let j = k + 1; j < tableau.length; j++) {\n          if (tableau[k][1] === tableau[j][0]) {\n\n          }\n        } */\n      }\n      return tableau\n    }\n    const compare2polys = function (poly1: Polygone, poly2: Polygone) {\n      if (comparenbsommets(poly1, poly2)) {\n        return comparesommets(poly1, poly2)\n      } else {\n        return false\n      }\n    }\n    const comparenbsommets = function (poly1: Polygone, poly2: Polygone) {\n      return poly1.listePoints.length === poly2.listePoints.length\n    }\n\n    const compare2sommets = function (\n      sommet1: PointAbstrait,\n      sommet2: PointAbstrait,\n    ) {\n      return egal(sommet1.x, sommet2.x, 0.1) && egal(sommet1.y, sommet2.y, 0.1)\n    }\n    const comparesommets = function (poly1: Polygone, poly2: Polygone) {\n      let trouve = false\n      let trouves = 0\n      if (comparenbsommets(poly1, poly2)) {\n        for (const P of poly1.listePoints) {\n          for (const M of poly2.listePoints) {\n            if (compare2sommets(M, P)) {\n              trouve = true\n            }\n            if (trouve) {\n              break\n            }\n          }\n          if (trouve) {\n            trouves++\n            trouve = false\n          } else {\n            trouves -= 100\n          }\n          if (trouves < 0) {\n            break\n          }\n        }\n      }\n      return trouves === poly1.listePoints.length\n    }\n\n    const rotaccion = function (\n      pavage: Pavage,\n      A: PointAbstrait,\n      angle: number,\n      numero: number,\n    ) {\n      const poly = pavage.polygones[numero - 1]\n      let pol\n      const result = -1\n      const sympoly = rotation(poly, A, angle) as Polygone\n      for (let k = 0; k < pavage.polygones.length; k++) {\n        pol = pavage.polygones[k]\n        if (compare2polys(sympoly, pol)) {\n          return k + 1\n        }\n      }\n      return result\n    }\n\n    const objets: NestedObjetMathalea2dArray = []\n    const objetsCorrection: NestedObjetMathalea2dArray = []\n    let taillePavage = contraindreValeur(1, 2, this.sup, 2)\n    if (taillePavage < 1 || taillePavage > 2) {\n      taillePavage = 1\n    }\n    if (this.nbQuestions > 5) {\n      taillePavage = 2\n    }\n\n    let Nx\n    let Ny\n    let index1\n    let A: PointAbstrait = pointAbstrait(0, 0)\n    let image\n    let couples: number[][] = []\n    let tailles = []\n    let monpavage\n    let fenetre\n    let texte = ''\n    let texteCorr = ''\n    let typeDePavage = contraindreValeur(1, 7, this.sup, 1) as\n      | 1\n      | 2\n      | 3\n      | 4\n      | 5\n      | 6\n      | 7\n    let nombreTentatives\n    let nombrePavageTestes = 1\n    const propositionsAMC = []\n    let texteAMC\n    let sensdirect = 1\n    let M\n    let N\n    let trace\n    let label\n    let P1\n    let P2\n    let P3\n    let t\n    const alphas = [\n      [60, 120, 180],\n      [90, 180],\n      [60, 120, 180],\n      [60, 120, 90],\n      [45, 90, 135, 180],\n      [60, 120, 180],\n      [60, 120, 180],\n    ]\n    let alpha = 0\n    if (this.sup3 === 8) {\n      typeDePavage = randint(1, 7) as 1 | 2 | 3 | 4 | 5 | 6 | 7\n    } else {\n      typeDePavage = Math.max(Math.min(7, this.sup3), 1) as\n        | 1\n        | 2\n        | 3\n        | 4\n        | 5\n        | 6\n        | 7\n    }\n    while (couples.length < this.nbQuestions && nombrePavageTestes < 6) {\n      nombreTentatives = 0\n      monpavage = pavage() // On crée l'objet Pavage qui va s'appeler monpavage\n      tailles = [\n        [\n          [3, 2],\n          [3, 2],\n          [2, 2],\n          [2, 2],\n          [2, 2],\n          [2, 2],\n          [3, 2],\n        ],\n        [\n          [4, 3],\n          [4, 3],\n          [3, 3],\n          [3, 3],\n          [3, 3],\n          [3, 2],\n          [5, 3],\n        ],\n      ]\n\n      Nx = tailles[taillePavage - 1][typeDePavage - 1][0]\n      Ny = tailles[taillePavage - 1][typeDePavage - 1][1]\n      monpavage.construit(typeDePavage, Nx, Ny, 3) // On initialise toutes les propriétés de l'objet.\n      fenetre = monpavage.fenetre\n      do {\n        // On cherche d pour avoir suffisamment de couples\n        couples = [] // On vide la liste des couples pour une nouvelle recherche\n\n        index1 = randint(\n          Math.floor(monpavage.nb_polygones / 3),\n          Math.ceil((monpavage.nb_polygones * 2) / 3),\n        ) // On choisit 1 point dans un des polygones\n        if (choice([true, false])) {\n          A =\n            monpavage.polygones[index1].listePoints[\n              randint(0, monpavage.polygones[index1].listePoints.length - 1)\n            ] // On choisit un sommet\n        } else {\n          A = monpavage.barycentres[index1] // Ou on choisit un barycentre\n        }\n        while (\n          A.x - 5 < fenetre.xmin ||\n          A.x + 5 > fenetre.xmax ||\n          A.y - 5 < fenetre.ymin ||\n          A.y + 5 > fenetre.ymax\n        ) {\n          index1 = randint(\n            Math.floor(monpavage.nb_polygones / 3),\n            Math.ceil((monpavage.nb_polygones * 2) / 3),\n          ) // On choisit 1 point dans un des polygones\n          if (choice([true, false])) {\n            A =\n              monpavage.polygones[index1].listePoints[\n                randint(0, monpavage.polygones[index1].listePoints.length - 1)\n              ] // On choisit un sommet\n          } else {\n            A = monpavage.barycentres[index1] // Ou on choisit un barycentre\n          }\n        }\n        A.nom = 'A'\n        A.positionLabel = 'below'\n        trace = tracePoint(A, 'red') // la trace du centre de symétrie sera rouge et grosse\n        label = labelPoint(A, 'red')\n        trace.epaisseur = 3\n        trace.taille = 4\n\n        alpha = choice(alphas[typeDePavage - 1], this.sup4 ? 180 : 0)\n        sensdirect = choice([1, -1])\n        for (let i = 1; i <= monpavage.nb_polygones; i++) {\n          // on crée une liste des couples (antécédents, images)\n          image = rotaccion(monpavage, A, alpha * sensdirect, i)\n          if (image !== -1) {\n            // si l'image du polygone i existe, on ajoute le couple à la liste\n            couples.push([i, image])\n          }\n        }\n        couples = videcouples(couples) // supprime tous les couples en double (x,y)=(y,x)\n        nombreTentatives++\n      } while (couples.length < this.nbQuestions + 2 && nombreTentatives < 30)\n      if (couples.length < this.nbQuestions) {\n        if (this.sup3 === 7) {\n          typeDePavage = ((typeDePavage + 1) % 5) + 1\n        }\n        nombrePavageTestes++\n      }\n    }\n    if (couples.length < this.nbQuestions) {\n      console.error(\n        `Trop de questions (${this.nbQuestions} questions pour ${couples.length} couple(s) trouvé(s) seulement), augmentez la taille du pavage !`,\n      )\n      return\n    }\n    if (trace && label) {\n      objets.push(trace) // le centre est OK on pousse sa trace\n      objets.push(label) // et son label\n    }\n\n    couples = shuffle(couples) // on mélange les couples\n    const texteNoir = []\n    const texteGris = []\n    if (monpavage != null) {\n      for (let i = 0; i < monpavage.nb_polygones; i++) {\n        texteNoir.push(\n          texteParPosition(\n            nombreAvecEspace(i + 1),\n            monpavage.barycentres[i].x,\n            monpavage.barycentres[i].y + 0.5,\n            0,\n            'black',\n            1,\n            'milieu',\n            true,\n          ),\n        )\n        texteGris.push(\n          texteParPosition(\n            nombreAvecEspace(i + 1),\n            monpavage.barycentres[i].x,\n            monpavage.barycentres[i].y + 0.5,\n            0,\n            'gray',\n            1,\n            'milieu',\n            true,\n          ),\n        )\n      }\n      if (this.sup2) {\n        // Doit-on montrer les centres des figures ?\n        for (let i = 0; i < monpavage.nb_polygones; i++) {\n          objets.push(monpavage.tracesCentres[i])\n        }\n      }\n      for (let i = 0; i < monpavage.nb_polygones; i++) {\n        // il faut afficher tous les polygones du pavage\n        objets.push(monpavage.polygones[i])\n      }\n\n      texte = mathalea2d(fenetre, objets, texteNoir) // monpavage.fenetre est calibrée pour faire entrer le pavage dans une feuille A4\n      texte += `Soit la rotation de centre $A$ et d'angle ${alpha}$^\\\\circ$ dans le sens `\n      if (sensdirect === 1) {\n        texte += \"contraire des aiguilles d'une montre.<br>\"\n      } else {\n        texte += \"des aiguilles d'une montre.<br>\"\n      }\n      texteCorr += `Soit la rotation de centre $A$ et d'angle ${alpha}$^\\\\circ$ dans le sens `\n      if (sensdirect === 1) {\n        texteCorr += \"contraire des aiguilles d'une montre. <br>\"\n      } else {\n        texteCorr += \"des aiguilles d'une montre. <br>\"\n      }\n      const consigneAMC = texte\n      for (let i = 0; i < this.nbQuestions; i++) {\n        texteAMC =\n          `Quelle est l'image de la figure $${couples[i][0]}$ ?` +\n          ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers) +\n          '<br>'\n        texte += texteAMC\n        texteCorr += `L'image de la figure $${couples[i][0]}$ est la figure $${miseEnEvidence(couples[i][1])}$.<br>`\n\n        if (context.isAmc) {\n          propositionsAMC.push({\n            type: 'AMCNum',\n            propositions: [\n              {\n                texte: texteCorr,\n                reponse: {\n                  texte: texteAMC,\n                  valeur: couples[i][1],\n                  param: {\n                    signe: false,\n                    digits: 2,\n                    decimals: 0,\n                  },\n                },\n              },\n            ],\n          })\n        } else {\n          setReponse(this, i, couples[i][1])\n        }\n        if (this.correctionDetaillee) {\n          t = this.nbQuestions * 3\n          M = monpavage.barycentres[couples[i][0] - 1]\n          N = monpavage.barycentres[couples[i][1] - 1]\n          P1 = monpavage.polygones[couples[i][0] - 1]\n          P1.color = colorToLatexOrHTML(texcolors(i))\n          P1.couleurDeRemplissage = colorToLatexOrHTML(texcolors(i))\n          P1.opaciteDeRemplissage = 0.5\n          P1.epaisseur = 2\n          P2 = monpavage.polygones[couples[i][1] - 1]\n          P2.color = colorToLatexOrHTML(texcolors(i))\n          P2.couleurDeRemplissage = colorToLatexOrHTML(texcolors(i))\n          P2.opaciteDeRemplissage = 0.5\n          P2.epaisseur = 2\n          if (context.isHtml) {\n            P3 = rotationAnimee(\n              P1,\n              A,\n              alpha * sensdirect,\n              `begin=\"${i * 3}s;${i * 3 + t}s;${i * 3 + t * 2}s\" end=\"${i * 3 + 2}s;${i * 3 + t + 2}s;${i * 3 + t * 2 + 2}s\" dur=\"2s\" repeatCount=\"indefinite\" repeatDur=\"${9 * this.nbQuestions}s\" id=\"poly-${i}-anim\"`,\n            )\n            P3.color = colorToLatexOrHTML(texcolors(i))\n            P3.epaisseur = 2\n            objetsCorrection.push(P3)\n          }\n          objetsCorrection.push(\n            tracePoint(M, N),\n            segment(A, M, texcolors(i)),\n            segment(A, N, arcenciel(i)),\n            codageAngle(\n              M,\n              A,\n              N,\n              0.8,\n              '',\n              arcenciel(i),\n              1,\n              1,\n              'blue',\n              0.2,\n              true,\n            ),\n            P1,\n            P2,\n          )\n        }\n      }\n      if (this.correctionDetaillee) {\n        texteCorr += mathalea2d(fenetre, objets, objetsCorrection, texteGris)\n      }\n      if (context.isAmc) {\n        this.autoCorrection[0] = {\n          options: { multicols: true },\n          enonce: consigneAMC,\n          propositions: propositionsAMC,\n        }\n      }\n    }\n\n    this.listeQuestions.push(texte)\n    this.listeCorrections.push(texteCorr)\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","dateDePublication","dateDeModifImportante","interactifReady","interactifType","amcReady","amcType","uuid","refs","PavageEtRotation2D","Exercice","context","videcouples","tableau","k","compare2polys","poly1","poly2","comparenbsommets","comparesommets","compare2sommets","sommet1","sommet2","egal","trouve","trouves","P","M","rotaccion","pavage","A","angle","numero","poly","pol","result","sympoly","rotation","objets","objetsCorrection","taillePavage","contraindreValeur","Nx","Ny","index1","pointAbstrait","image","couples","tailles","monpavage","fenetre","texte","texteCorr","typeDePavage","nombreTentatives","nombrePavageTestes","propositionsAMC","texteAMC","sensdirect","N","trace","label","P1","P2","P3","t","alphas","alpha","randint","choice","tracePoint","labelPoint","shuffle","texteNoir","texteGris","i","texteParPosition","nombreAvecEspace","mathalea2d","consigneAMC","ajouteChampTexteMathLive","KeyboardType","miseEnEvidence","setReponse","colorToLatexOrHTML","texcolors","rotationAnimee","segment","arcenciel","codageAngle","listeQuestionsToContenu"],"mappings":"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"}