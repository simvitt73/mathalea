{"version":3,"file":"apigeom-CvUqzk7F.js","sources":["../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/addColorPalette.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/dashed.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/noDashed.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/addDashedChoice.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/actions/loadJson.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/defaultValues.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/calculus/Coords.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/lib/format.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/syncShake.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkAngle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkCircleRadius.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/lib/handleColors.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/lib/observerLifecycleDebug.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/Element2D.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkCoords.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkDistance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkParallel.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Segment.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPerpendicularBisector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPointBetween2Points.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/calculus/utils.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/grid/Grid.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/Point.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointIntersectionLL.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPointOnIntersectionLL.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Line.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Ray.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointOnLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPointOnLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPolygon.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkPolygonByLabels.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkRay.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkSameDistance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkSegment.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkVector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/shake.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/DynamicNumber.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/Angle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/AngleOriented.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/Distance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/DynamicCalcul.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/DynamicX.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/DynamicY.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/lib/mathjsInstance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/calculus/Graph.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/calculus/Graph2.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/calculus/GraphByParts.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/diagrams/CircleFractionDiagram.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/diagrams/LineFractionDiagram.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/diagrams/RectangleFractionDiagram.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/grid/GraduatedLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Arc.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/ArcBy3PointsAndRadius.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/dynamicNumbers/Const.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/ArcByCenterRadiusAndAngles.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/BisectorByPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Circle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/CircleCenterDyamicRadius.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/CircleCenterPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/LineByPointVector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/LineParallel.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/LinePerpendicular.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/PerpendicularBisector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/PerpendicularBisectorByPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Polygon.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/lines/Polyline.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/text/TextByPosition.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/mark/MarkBetweenPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/mark/MarkRightAngle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/Barycenter.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/Middle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PoinrOnGraph.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointByProjection.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointByProjectionOnAxisX.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointByProjectionOnAxisY.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointIntersectionCC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointIntersectionLC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointOnCircle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointOnLineAtDistance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointOnPolyline.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointsIntersectionCC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/points/PointsIntersectionLC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/text/TextByPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/text/TextDynamicByPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/text/TextDynamicByPosition.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/vector/Vector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/vector/VectorByPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/elements/vector/VectorPerpendicular.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/lib/storage.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/pointerActions/handleHover.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/pointerActions/handlePointerAction.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/bisectorByPoints.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/circle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/circleCompass.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/circlePoint.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/cursor.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/description.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/dilate.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/disc.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/discPoint.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/drag.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/dragAll.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/fill.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/grid.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/hide.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/informations.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/latex.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/latexSvg.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/line.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/lineParallel.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/linePerpendicular.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/markAngle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/markSegment.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/mesureAngle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/mesureSegment.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/middle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/moveLabel.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/namePoint.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/open.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/options.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/pause.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/perpendicularBisector.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/play.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/playSkipBack.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/playSkipForward.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/point.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/pointIntersection.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/pointOn.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/polygon.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/ray.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/redo.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/reflection.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/reflectionOverLine.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/remove.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/restart.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/rotate.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/save.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/segment.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/setOptions.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/shake.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/translation.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/undo.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/vector.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/zoomIn.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/zoomOut.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/setButtonStyle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/addButtons.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/addCustomButton.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/addThicknessChoice.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/addMarkPalette.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/setToolbar.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/Figure.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/lib/addTextElementsToSvg.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/handleDialog.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/userInterface/selectionRectangle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/uiMachine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/main.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/erase.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/minus.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/assets/svg/plus.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+2c003b3308e1b469253a6e62e1d1c3bb02de7eb3/node_modules/apigeom/src/check/checkElementExist.ts"],"sourcesContent":["import type Figure from '../Figure'\n\nexport default function addColorPalette(\n  colors: string[],\n  figure: Figure,\n): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.display = 'flex'\n  div.classList.add('apiGeom-color-palette')\n  for (const color of colors) {\n    const button = document.createElement('button')\n    button.style.backgroundColor = color\n    button.style.width = '30px'\n    button.style.height = '30px'\n    button.style.marginRight = '10px'\n    button.style.marginLeft = '4px'\n    button.style.marginTop = '10px'\n    button.style.cursor = 'pointer'\n    button.style.borderRadius = '5px'\n    button.style.backgroundColor = color\n    button.style.border = '1px solid black'\n    button.style.padding = '2px'\n    button.title = translateColor(color)\n    button.addEventListener('click', () => {\n      figure.options.color = color\n      showSelectedColor(figure)\n      if (figure.options.changeColorChangeActionToSetOptions) {\n        figure.buttons.get('SET_OPTIONS')?.click()\n      }\n    })\n    div.appendChild(button)\n  }\n  showSelectedColor(figure)\n  return div\n}\n\nfunction showSelectedColor(figure: Figure): void {\n  if (!figure.options) return\n  const buttons = document.querySelectorAll('.apiGeom-color-palette button')\n  for (const element of Array.from(buttons)) {\n    const button = element as HTMLButtonElement\n    if (button.style.backgroundColor === figure.options.color) {\n      button.style.boxShadow = '0px 0px 10px 0px rgba(0,0,0,0.75)'\n      button.style.transform = 'scale(1.2) translate(1px, 1px'\n    } else {\n      button.style.boxShadow = ''\n      button.style.transform = ''\n    }\n  }\n}\n\nexport { showSelectedColor }\n\ninterface ColorMap {\n  [key: string]: string\n  black: string\n  blue: string\n  gray: string\n  green: string\n  lightgray: string\n  purple: string\n  red: string\n  yellow: string\n}\n\nconst colorMap: ColorMap = {\n  black: 'Noir',\n  blue: 'Bleu',\n  gray: 'Gris',\n  green: 'Vert',\n  lightgray: 'Gris clair',\n  purple: 'Violet',\n  red: 'Rouge',\n  yellow: 'Jaune',\n}\n\nfunction translateColor(color: string): string {\n  if (colorMap[color] !== undefined) {\n    return colorMap[color]\n  }\n  return color.charAt(0).toUpperCase() + color.slice(1)\n}\n","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='183.46666'%20height='36'%20viewBox='0%200%20172%2033.750001'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='traitPointilles.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='2.9324129'%20inkscape:cx='91.73333'%20inkscape:cy='18.073853'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20units='px'%20height='40px'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:7.80938;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:15.6188,%2015.6188;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20237.13226,248.95148%20H%20383.91529'%20id='path2564'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='183.46666'%20height='36'%20viewBox='0%200%20172%2033.750001'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='traitContinu.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='7.6035613'%20inkscape:cx='35.378159'%20inkscape:cy='18.017873'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20units='px'%20height='40px'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:7.80938;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20235.17991,248.95148%20H%20381.96294'%20id='path2564'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e\"","import dashed from '../assets/svg/dashed.svg'\nimport noDashed from '../assets/svg/noDashed.svg'\nimport type Figure from '../Figure'\n\nexport default function addDashedChoice(figure: Figure): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.display = 'flex'\n  div.classList.add('apiGeom-dashed-choice')\n  const images: { noDashed?: HTMLImageElement; dashed?: HTMLImageElement } = {}\n  for (const choice of ['noDashed', 'dashed']) {\n    const img = document.createElement('img')\n    img.src = choice === 'noDashed' ? noDashed : dashed\n    img.title = choice === 'noDashed' ? 'Trait plein' : 'Pointillés'\n    img.style.width = '30px'\n    // img.style.height = '30px'\n    img.style.margin = '10px'\n    img.style.marginLeft = '4px'\n    img.style.marginTop = '30px'\n    img.style.cursor = 'pointer'\n    // img.style.borderRadius = '5px'\n    // img.style.border = '1px solid black'\n    img.style.padding = '2px'\n    img.addEventListener('click', () => {\n      figure.options.isDashed = choice === 'dashed'\n      showSelectedStyle(figure)\n    })\n    img.id = choice\n    images[choice as 'noDashed' | 'dashed'] = img\n    div.appendChild(img)\n  }\n  // Appliquer le style initial immédiatement avec les éléments qu'on vient de créer\n  // biome-ignore lint/style/noNonNullAssertion: images are assigned in the loop above\n  applySelectedStyle(images.noDashed!, images.dashed!, figure.options.isDashed)\n  return div\n}\n\nfunction applySelectedStyle(\n  noDashedImg: HTMLImageElement,\n  dashedImg: HTMLImageElement,\n  isDashed: boolean,\n): void {\n  if (isDashed) {\n    noDashedImg.style.boxShadow = ''\n    noDashedImg.style.transform = ''\n    dashedImg.style.boxShadow = '0px 0px 10px 0px rgba(0,0,0,0.75)'\n    dashedImg.style.transform = 'scale(1.2) translate(1px, 1px'\n  } else {\n    dashedImg.style.boxShadow = ''\n    dashedImg.style.transform = ''\n    noDashedImg.style.boxShadow = '0px 0px 10px 0px rgba(0,0,0,0.75)'\n    noDashedImg.style.transform = 'scale(1.2) translate(1px, 1px'\n  }\n}\n\nfunction showSelectedStyle(figure: Figure): void {\n  const dashed = document.querySelectorAll('.apiGeom-dashed-choice img#dashed')\n  const noDashed = document.querySelectorAll(\n    '.apiGeom-dashed-choice img#noDashed',\n  )\n  for (let i = 0; i < dashed.length; i++) {\n    applySelectedStyle(\n      noDashed[i] as HTMLImageElement,\n      dashed[i] as HTMLImageElement,\n      figure.options.isDashed,\n    )\n  }\n}\n\nexport { showSelectedStyle }\n","import type Distance from '../dynamicNumbers/Distance'\nimport type DynamicNumber from '../dynamicNumbers/DynamicNumber'\nimport type { FigureOptions, SaveJson } from '../elements/interfaces'\nimport type Circle from '../elements/lines/Circle'\nimport type Line from '../elements/lines/Line'\nimport type Segment from '../elements/lines/Segment'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { showSelectedColor } from '../userInterface/addColorPalette'\nimport { showSelectedStyle } from '../userInterface/addDashedChoice'\n\n/**\n * Analyse l'objet de la sauvegarde et si le type est pris en charge alors on créé l'élément\n * @param figure - Espace de travail\n * @param json - Objet\n * @param eraseHistory - Faut-il repartir d'un historique vide ? Oui pour un chargement, non pour l'utilisation de undo et redo\n * @returns - Tableau avec tous les éléments créés\n */\nexport function loadJson(\n  figure: Figure,\n  json: SaveJson,\n  eraseHistory = false,\n): void {\n  if (eraseHistory) {\n    figure.stackUndo = []\n    figure.stackRedo = []\n  }\n  // Supprimer proprement tous les éléments existants pour éviter les orphelins\n  for (const element of figure.elements.values()) {\n    element.remove()\n  }\n  figure.elements.clear()\n  if (figure.divFigure != null) figure.divFigure.innerHTML = ''\n  figure.clearHtml()\n  figure.divFigure?.appendChild(figure.svg)\n  if (json.options != null) {\n    const options = json.options as FigureOptions\n    for (const [key, value] of Object.entries(options)) {\n      if (key in figure.options) {\n        // @ts-expect-error Je ne sais pas typer cela\n        figure.options[key] = value\n      }\n    }\n  }\n  showSelectedColor(figure)\n  showSelectedStyle(figure)\n  figure.pointer = figure.create('Point', {\n    isChild: true,\n    isFree: false,\n    isVisible: false,\n    color: 'black',\n    shape: '',\n    x: 0,\n    y: 0,\n  })\n  figure.pointer.type = 'pointer'\n  for (const options of Object.values(json)) {\n    // Clone map figure.elements\n    // const elements = new Map()\n    // for (const [key, value] of figure.elements) {\n    //   elements.set(key, value)\n    // }\n    // console.info(elements)\n    // console.info(options.type)\n    if (options.type === 'Point') {\n      figure.create('Point', { x: options.x, y: options.y, ...options })\n    } else if (options.type === 'Arc') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const start = figure.elements.get(options.idStart) as Point\n      const dynamicAngle = figure.elements.get(\n        options.idDynamicAngle,\n      ) as DynamicNumber\n      figure.create('Arc', { center, dynamicAngle, start, ...options })\n    } else if (options.type === 'ArcByCenterRadiusAndAngles') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const radius = options.radius\n      const startAngle = options.startAngle\n      const endAngle = options.endAngle\n      figure.create('ArcByCenterRadiusAndAngles', {\n        center,\n        endAngle,\n        radius,\n        startAngle,\n        ...options,\n      })\n    } else if (options.type === 'BisectorByPoints') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      const pointOnSide1 = figure.elements.get(options.idPointOnSide1) as Point\n      const pointOnSide2 = figure.elements.get(options.idPointOnSide2) as Point\n      figure.create('BisectorByPoints', {\n        origin,\n        pointOnSide1,\n        pointOnSide2,\n        ...options,\n      })\n    } else if (options.type === 'Circle') {\n      const center = figure.elements.get(options.idCenter) as Point\n      figure.create('Circle', { center, radius: options.radius, ...options })\n    } else if (options.type === 'CircleCenterPoint') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('CircleCenterPoint', { center, point, ...options })\n    } else if (options.type === 'CircleDynamicRadius') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const radius = figure.elements.get(options.idRadius) as Distance\n      figure.create('CircleCenterDynamicRadius', { center, radius, ...options })\n    } else if (options.type === 'CircleFractionDiagram') {\n      const indicesSectorsInColor = new Set(options.arrayIndicesSectorsInColor)\n      figure.create('CircleFractionDiagram', {\n        indicesSectorsInColor,\n        ...options,\n      })\n    } else if (options.type === 'Distance') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Distance', { point1, point2, ...options })\n    } else if (options.type === 'DynamicX') {\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('DynamicX', { point, ...options })\n    } else if (options.type === 'DynamicY') {\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('DynamicY', { point, ...options })\n    } else if (options.type === 'PointOnLine') {\n      const line = figure.elements.get(options.idLine) as Line\n      figure.create('PointOnLine', { line, ...options })\n    } else if (options.type === 'PointOnCircle') {\n      const circle = figure.elements.get(options.idCircle) as Circle\n      figure.create('PointOnCircle', { circle, ...options })\n    } else if (options.type === 'GraphByParts') {\n      figure.create('GraphByParts', { ...options })\n    } else if (options.type === 'Graph') {\n      figure.create('Graph', { ...options })\n    } else if (options.type === 'GraduatedLine') {\n      figure.create('GraduatedLine', { ...options })\n    } else if (options.type === 'Grid') {\n      figure.create('Grid', { ...options })\n    } else if (options.type === 'Line') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Line', { point1, point2, ...options })\n    } else if (options.type === 'Middle') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Middle', { point1, point2, ...options })\n    } else if (options.type === 'LineByPointVector') {\n      const vector = figure.elements.get(options.idVector)\n      const point = figure.elements.get(options.idPoint)\n      figure.create('LineByPointVector', { point, vector, ...options })\n    } else if (options.type === 'LineFractionDiagram') {\n      const indicesRectanglesInColor = new Set(\n        options.arrayIndicesRectanglesInColor,\n      )\n      figure.create('LineFractionDiagram', {\n        indicesRectanglesInColor,\n        ...options,\n      })\n    } else if (options.type === 'RectangleFractionDiagram') {\n      const indicesRectanglesInColor = new Set(\n        options.arrayIndicesRectanglesInColor,\n      )\n      figure.create('RectangleFractionDiagram', {\n        indicesRectanglesInColor,\n        ...options,\n      })\n    } else if (options.type === 'LineParallel') {\n      const line = figure.elements.get(options.idLine)\n      const point = figure.elements.get(options.idPoint)\n      figure.create('LineParallel', { line, point, ...options })\n    } else if (options.type === 'LinePerpendicular') {\n      const line = figure.elements.get(options.idLine)\n      const point = figure.elements.get(options.idPoint)\n      figure.create('LinePerpendicular', { line, point, ...options })\n    } else if (options.type === 'MarkBetweenPoints') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('MarkBetweenPoints', {\n        text: options.text,\n        point1,\n        point2,\n        ...options,\n      })\n    } else if (options.type === 'MarkRightAngle') {\n      const point = figure.elements.get(options.idPoint) as Point\n      const directionPoint = figure.elements.get(\n        options.idDirectionPoint,\n      ) as Point\n      figure.create('MarkRightAngle', {\n        point,\n        directionPoint,\n        ...options,\n      })\n    } else if (options.type === 'PerpendicularBisector') {\n      const segment = figure.elements.get(options.idSegment)\n      figure.create('PerpendicularBisector', { segment, ...options })\n    } else if (options.type === 'PerpendicularBisectorByPoints') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('PerpendicularBisectorByPoints', {\n        point1,\n        point2,\n        ...options,\n      })\n    } else if (options.type === 'ElementByReflect') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const center = figure.elements.get(\n        options.idTransformationCenter,\n      ) as Point\n      origin.reflect(center, options)\n    } else if (options.type === 'ElementByReflectOverLine') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const line = figure.elements.get(options.idTransformationLine) as Line\n      origin.reflectOverLine(line, options)\n    } else if (options.type === 'ElementByDilate') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const center = figure.elements.get(\n        options.idTransformationCenter,\n      ) as Point\n      const factor = options.transformationFactor\n      origin.dilate(center, factor, options)\n    } else if (options.type === 'ElementByRotation') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const center = figure.elements.get(\n        options.idTransformationCenter,\n      ) as Point\n      const angle = options.transformationAngle\n      origin.rotate(center, angle, options)\n    } else if (options.type === 'ElementByTranslation') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const point1 = figure.elements.get(\n        options.idTransformationPoint1,\n      ) as Point\n      const point2 = figure.elements.get(\n        options.idTransformationPoint2,\n      ) as Point\n      origin.translate(point1, point2, options)\n    } else if (options.type === 'PointByProjection') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      const line = figure.elements.get(options.idLine) as Segment\n      figure.create('PointByProjection', { line, origin, ...options })\n    } else if (options.type === 'PointByProjectionOnAxisX') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      figure.create('PointByProjectionOnAxisX', { origin, ...options })\n    } else if (options.type === 'PointByProjectionOnAxisY') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      figure.create('PointByProjectionOnAxisY', { origin, ...options })\n    } else if (options.type === 'PointIntersectionLL') {\n      const line1 = figure.elements.get(options.idLine1) as Line\n      const line2 = figure.elements.get(options.idLine2) as Line\n      figure.create('PointIntersectionLL', { line1, line2, ...options })\n    } else if (options.type === 'PointIntersectionCC') {\n      const circle1 = figure.elements.get(options.idCircle1) as Circle\n      const circle2 = figure.elements.get(options.idCircle2) as Circle\n      figure.create('PointIntersectionCC', { circle1, circle2, ...options })\n    } else if (options.type === 'PointIntersectionLC') {\n      const line = figure.elements.get(options.idLine) as Line\n      const circle = figure.elements.get(options.idCircle) as Circle\n      figure.create('PointIntersectionLC', { circle, line, ...options })\n    } else if (options.type === 'PointOnGraph') {\n      const graph = figure.elements.get(options.idGraph)\n      figure.create('PointOnGraph', { graph, ...options })\n    } else if (options.type === 'PointOnPolyline') {\n      const polyline = figure.elements.get(options.idPolyline)\n      figure.create('PointOnPolyline', { polyline, ...options })\n    } else if (options.type === 'Segment') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Segment', { point1, point2, ...options })\n    } else if (options.type === 'Polyline') {\n      const points = []\n      for (const idPoint of options.idPoints) {\n        points.push(figure.elements.get(idPoint))\n      }\n      figure.create('Polyline', { points, ...options })\n    } else if (options.type === 'Polygon') {\n      const points = []\n      for (const idPoint of options.idPoints) {\n        points.push(figure.elements.get(idPoint))\n      }\n      figure.create('Polygon', { points, ...options })\n    } else if (options.type === 'Ray') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Ray', { point1, point2, ...options })\n    } else if (options.type === 'TextByPosition') {\n      figure.create('TextByPosition', {\n        text: options.text,\n        x: options.x,\n        y: options.y,\n        ...options,\n      })\n    } else if (options.type === 'TextByPoint') {\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('TextByPoint', { point, text: options.text, ...options })\n    } else if (options.type === 'TextDynamicByPosition') {\n      const dynamicNumber = figure.elements.get(\n        options.idDynamicNumber,\n      ) as DynamicNumber\n      figure.create('TextDynamicByPosition', { dynamicNumber, ...options })\n    } else if (options.type === 'Vector') {\n      const origin = figure.elements.get(options.idOrigin)\n      figure.create('Vector', { origin, ...options })\n    } else if (options.type === 'VectorByPoints') {\n      const origin = figure.elements.get(options.idOrigin)\n      const point1 = figure.elements.get(options.idPoint1)\n      const point2 = figure.elements.get(options.idPoint2)\n      figure.create('VectorByPoints', { origin, point1, point2, ...options })\n    } else if (options.type === 'VectorPerpendicular') {\n      const origin = figure.elements.get(options.idOrigin)\n      const line = figure.elements.get(options.idLine)\n      figure.create('VectorPerpendicular', { line, origin, ...options })\n    }\n  }\n  // Pour la navigation dans l'historique on ne sauvegarde que le premier chargement\n  // les autres chargements proviennent de goBack() ou de goForward()\n  if (figure.stackUndo.length === 0) figure.saveState()\n  if (eraseHistory) {\n    if ('history' in json && json.history !== null) {\n      const history = json.history as string[]\n      figure.stackUndo = [...history]\n      figure.handleUndoRedoButtons()\n      // Comportement irrégulier sans ce Undo que je ne m'explique pas\n      // figure.undo()\n    }\n  }\n}\n","import type { availableButtons } from '../userInterface/availableButtons'\n\n// Couleurs\nexport const colors = {\n  back: '#f5f1f3',\n  backcorrection: '#E0A588',\n  backdark: '#dadbdf',\n  backdarker: '#cecfd4',\n  backnav: '#F15929',\n  backnavlight: '#f56d45',\n  dark: '#F45E27',\n  darkest: '#E64A10',\n  darkmode: '#2e2e2b',\n  darkmodelight: '#363633',\n  DEFAULT: '#F15929',\n  light: '#f56d45',\n  lightest: '#f87f5c',\n  title: '#342A34',\n  titleexercise: '#F15929',\n  titlelight: '#f5f1f3',\n  titlemenu: '#F15929',\n}\n\n// Distance entre l'endroit où on clique et les élément\nexport const defaultDistanceClick = 15\n\n// Taille de l'historique pour la navigation avec le bouton précédent\nexport const defaultHistorySize = 100\n\n// Nombre de chiffres après la virgule dans les affichages\nexport const displayDigits = 2\n\n// Pente d'une droite verticale\nexport const defaultMaxSlope = 10 ** 4\n\n// Pente d'une droite horizontale\nexport const defaultMinSlope = 10 ** -4\n\n// Ecart entre le lieu du clic et la position de la fenêtre modale en unité de la figure\nexport const defaultDeltaXModal = 1\n\n// Espace horizontal laissé pour les boutons\nexport const defaultButtonsWidth = 300\n\n// Espace vertical laissé pour le footer\nexport const defaultFooterHeight = 30\n\n// Largeur minimale du svg\nexport const defaultMinWidth = 30\n\n// Hauteur minimale du svg\nexport const defaultMinHeight = 30\n\n// Style du divUserMessage\nexport const defaultDivUserMessageHeight = '50px'\nexport const defaultDivUserMessageFontSize = 'large'\n\n// Déplacement en unités lors du dragAll\nexport const defaultDragAllDelta = 0.1\n\nexport const defaultZoomInFactor = 1.1\nexport const defaultZoomOutFactor = 0.9\n\nexport const marks = ['', '|', '||', '|||', '✖︎', 'O', '◼︎', '▲', '★']\n\nexport const orangeMathalea = '#F15929'\nexport const orangeMathaleaLight = 'rgba(241, 89, 41, 0.5)'\n\nconst defaultOptions = {\n  animationStepInterval: 3000,\n  automaticUserMessage: true,\n  borderSize: 0.2,\n  color: 'currentColor',\n  colorPointPolygon: 'none',\n  changeColorChangeActionToSetOptions: false,\n  discFillOpacity: 0.2,\n  displayGrid: false,\n  distanceWithoutNewPoint: 0.2,\n  figureHasBorder: false,\n  fillColor: 'none',\n  fillColorAndBorderColorAreSame: false,\n  fillOpacity: 0.2,\n  gridWithTwoPointsOnSamePosition: true,\n  fontSize: '1em',\n  isHandDrawn: false,\n  isDashed: false,\n  labelAutomaticForPoints: undefined,\n  labelDxInPixels: 15,\n  labelDyInPixels: 15,\n  latexHeight: 12,\n  labelIsVisible: true,\n  latexWidth: 18,\n  limitNumberOfElement: {},\n  mark: '||',\n  moveTextGrid: 15,\n  pointDescriptionWithCoordinates: true,\n  pointSize: 5,\n  thickness: 1,\n  shape: 'x' as '' | '|' | 'o' | 'x',\n  shapeForPolygon: 'x' as '' | '|' | 'o' | 'x',\n  thicknessForPoint: 2,\n  tmpColor: 'gray',\n  tmpFillColor: orangeMathaleaLight,\n  tmpFillOpacity: 0.2,\n  tmpIsDashed: true,\n  tmpThickness: 1,\n  tmpShape: 'x' as '' | '|' | 'o' | 'x',\n}\n\nexport const defaultTools = [\n  'SAVE',\n  'OPEN',\n  'UNDO',\n  'REDO',\n  'DRAG',\n  'DOWNLOAD_LATEX_SVG',\n  'HIDE',\n  'REMOVE',\n  'POINT',\n  'POINT_ON',\n  'POINT_INTERSECTION',\n  'MIDDLE',\n  'SEGMENT',\n  'LINE',\n  'RAY',\n  'POLYGON',\n  'LINE_PARALLEL',\n  'LINE_PERPENDICULAR',\n  'PERPENDICULAR_BISECTOR',\n  'BISECTOR_BY_POINTS',\n  'CIRCLE_CENTER_POINT',\n  'CIRCLE_RADIUS',\n  'REFLECTION_OVER_LINE',\n  'REFLECTION',\n  'ROTATE',\n  'TRANSLATION',\n  'DILATE',\n  'VECTOR',\n  'GRID',\n  'SET_OPTIONS',\n  'FILL',\n  'NAME_POINT',\n  'MOVE_LABEL',\n  'MARK_BETWEEN_POINTS',\n  'MESURE_SEGMENT',\n  'MESURE_ANGLE',\n  'DESCRIPTION',\n  'SHAKE',\n  'ZOOM_IN',\n  'ZOOM_OUT',\n] as availableButtons[]\n\nexport default defaultOptions\n","import type Figure from '../../Figure'\nimport { defaultMaxSlope, defaultMinSlope } from '../defaultValues'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport type Segment from '../lines/Segment'\nimport type Point from '../points/Point'\n\n/**\n * Classe de méthodes statiques pour des calculs sur les coordonnées\n */\nexport class Coords {\n  x: number\n  y: number\n  constructor(x = 0, y = 0) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport function angleWithHorizontalInDegres(A: Coords, B: Coords): number {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined\n  )\n    return Number.NaN\n  try {\n    const angle = (Math.atan2(B.y - A.y, B.x - A.x) * 180) / Math.PI\n    return angle\n  } catch (_error) {\n    return Number.NaN\n  }\n}\n\nexport function intersectionCCCoord(\n  circle1: Circle,\n  circle2: Circle,\n  n: 1 | 2 = 1,\n): Coords {\n  try {\n    const O1 = circle1.center\n    const O2 = circle2.center\n    const r0 = circle1._radius\n    const r1 = circle2._radius\n    const x0 = O1.x\n    const x1 = O2.x\n    const y0 = O1.y\n    const y1 = O2.y\n    if (\n      x0 === undefined ||\n      x1 === undefined ||\n      y0 === undefined ||\n      y1 === undefined\n    )\n      return new Coords()\n    const dx = x1 - x0\n    const dy = y1 - y0\n    const d = Math.sqrt(dy * dy + dx * dx)\n    if (d > r0 + r1) {\n      return { x: Number.NaN, y: Number.NaN }\n    }\n    if (d < Math.abs(r0 - r1)) {\n      return { x: Number.NaN, y: Number.NaN }\n    }\n    const a = (r0 * r0 - r1 * r1 + d * d) / (2.0 * d)\n    const x2 = x0 + (dx * a) / d\n    const y2 = y0 + (dy * a) / d\n    const h = Math.sqrt(r0 * r0 - a * a)\n    const rx = -dy * (h / d)\n    const ry = dx * (h / d)\n    const xi = x2 + rx\n    const xiPrime = x2 - rx\n    const yi = y2 + ry\n    const yiPrime = y2 - ry\n    if (n === 1) {\n      if (yiPrime > yi) {\n        return new Coords(xiPrime, yiPrime)\n      }\n      return new Coords(xi, yi)\n    }\n    if (yiPrime > yi) {\n      return new Coords(xi, yi)\n    }\n    return new Coords(xiPrime, yiPrime)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function intersectionLLCoord(line1: Line, line2: Line): Coords {\n  try {\n    const [da, db, dc] = line1.equation\n    const [fa, fb, fc] = line2.equation\n    let x: number\n    let y: number\n    if (fa * db - fb * da === 0) {\n      return { x: Number.NaN, y: Number.NaN }\n    }\n    y = (fc * da - dc * fa) / (fa * db - fb * da)\n\n    if (da === 0) {\n      // si d est horizontale alors f ne l'est pas donc fa<>0\n      x = (-fc - fb * y) / fa\n    } else {\n      // d n'est pas horizontale donc ...\n      x = (-dc - db * y) / da\n    }\n    // On teste le cas du segment ou de la demi-droite\n    let isIntersectionExisting = true\n    if (\n      line1.type === 'Segment' &&\n      (x < Math.min(line1.point1.x, line1.point2.x) ||\n        x > Math.max(line1.point1.x, line1.point2.x) ||\n        y < Math.min(line1.point1.y, line1.point2.y) ||\n        y > Math.max(line1.point1.y, line1.point2.y))\n    ) {\n      isIntersectionExisting = false\n    }\n    if (\n      line2.type === 'Segment' &&\n      (x < Math.min(line2.point1.x, line2.point2.x) ||\n        x > Math.max(line2.point1.x, line2.point2.x) ||\n        y < Math.min(line2.point1.y, line2.point2.y) ||\n        y > Math.max(line2.point1.y, line2.point2.y))\n    ) {\n      isIntersectionExisting = false\n    }\n    if (line1.type === 'Ray') {\n      // Direction gauche droite\n      if (line1.point1.x < line1.point2.x && x < line1.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction droite gauche\n      if (line1.point1.x > line1.point2.x && x > line1.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction bas haut\n      if (line1.point1.y < line1.point2.y && y < line1.point1.y) {\n        isIntersectionExisting = false\n      }\n      // Direction haut bas\n      if (line1.point1.y > line1.point2.y && y > line1.point1.y) {\n        isIntersectionExisting = false\n      }\n    }\n    if (line2.type === 'Ray') {\n      // Direction gauche droite\n      if (line2.point1.x < line2.point2.x && x < line2.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction droite gauche\n      if (line2.point1.x > line2.point2.x && x > line2.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction bas haut\n      if (line2.point1.y < line2.point2.y && y < line2.point1.y) {\n        isIntersectionExisting = false\n      }\n      // Direction haut bas\n      if (line2.point1.y > line2.point2.y && y > line2.point1.y) {\n        isIntersectionExisting = false\n      }\n    }\n    if (!isIntersectionExisting) {\n      x = Number.NaN\n      y = Number.NaN\n    }\n    return new Coords(x, y)\n  } catch (error) {\n    console.error(error)\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function distance(A: Coords | Point, B: Coords | Point): number {\n  return Math.hypot(A.x - B.x, A.y - B.y)\n}\n\nexport function equationLine(\n  point1: Coords | Point,\n  point2: Coords | Point,\n): [number, number, number] {\n  try {\n    const a = point1.y - point2.y\n    const b = point2.x - point1.x\n    const c =\n      (point1.x - point2.x) * point1.y + (point2.y - point1.y) * point1.x\n    return [a, b, c]\n  } catch (error) {\n    console.error('Erreur dans Line.equation()', error)\n    return [Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport function intersectionSCCoord(L: Segment, C: Circle): Coords {\n  try {\n    const { x } = intersectionLCCoord(L, C, 1)\n    const [A, B] = [L.point1, L.point2]\n    if (x !== undefined && distance(A, B) > C.radius) {\n      if (x < Math.max(A.x, B.x) && x > Math.min(A.x, B.x)) {\n        return intersectionLCCoord(L, C, 1)\n      }\n      return intersectionLCCoord(L, C, 2)\n    }\n    return new Coords(Number.NaN, Number.NaN)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function intersectionLCCoord(D: Line, C: Circle, n: 1 | 2 = 1): Coords {\n  try {\n    const O = C.center\n    const r = C.radius\n    const [a, b, c] = D.equation\n    const xO = O.x\n    const yO = O.y\n    let Delta: number\n    let delta: number\n    let xi: number\n    let yi: number\n    let xiPrime: number\n    let yiPrime: number\n    if (b === 0) {\n      // la droite est verticale\n      xi = -c / a\n      xiPrime = xi\n      Delta = 4 * (-xO * xO - (c * c) / (a * a) - (2 * xO * c) / a + r * r)\n      if (Delta < 0) return new Coords(Number.NaN, Number.NaN)\n      if (Math.abs(Delta) < 10 ** -6) {\n        // un seul point d'intersection\n        yi = yO + Math.sqrt(Delta) / 2\n        yiPrime = yi\n      } else {\n        // deux points d'intersection\n        yi = yO - Math.sqrt(Delta) / 2\n        yiPrime = yO + Math.sqrt(Delta) / 2\n      }\n    } else if (a === 0) {\n      // la droite est horizontale\n      yi = -c / b\n      yiPrime = yi\n      Delta = 4 * (-yO * yO - (c * c) / (b * b) - (2 * yO * c) / b + r * r)\n      if (Delta < 0) return new Coords(Number.NaN, Number.NaN)\n      if (Math.abs(Delta) < 10 ** -6) {\n        // un seul point d'intersection\n        xi = xO + Math.sqrt(Delta) / 2\n        xiPrime = xi\n      } else {\n        // deux points d'intersection\n        xi = xO - Math.sqrt(Delta) / 2\n        xiPrime = xO + Math.sqrt(Delta) / 2\n      }\n    } else {\n      // cas général\n      Delta =\n        (2 * ((a * c) / (b * b) + (yO * a) / b - xO)) ** 2 -\n        4 *\n          (1 + (a / b) ** 2) *\n          (xO * xO + yO * yO + (c / b) ** 2 + (2 * yO * c) / b - r * r)\n      if (Delta < 0) return new Coords(Number.NaN, Number.NaN)\n      if (Math.abs(Delta) < 10 ** -6) {\n        // un seul point d'intersection\n        delta = Math.sqrt(Delta)\n        xi =\n          (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) - delta) /\n          (2 * (1 + (a / b) ** 2))\n        xiPrime = xi\n        yi = (-a * xi - c) / b\n        yiPrime = yi\n      } else {\n        // deux points d'intersection\n        delta = Math.sqrt(Delta)\n        xi =\n          (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) - delta) /\n          (2 * (1 + (a / b) ** 2))\n        xiPrime =\n          (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) + delta) /\n          (2 * (1 + (a / b) ** 2))\n        yi = (-a * xi - c) / b\n        yiPrime = (-a * xiPrime - c) / b\n      }\n    }\n    if (n === 1) {\n      if (yiPrime > yi) {\n        return new Coords(xiPrime, yiPrime)\n      }\n      return new Coords(xi, yi)\n    }\n    if (yiPrime > yi) {\n      return new Coords(xi, yi)\n    }\n    return new Coords(xiPrime, yiPrime)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param origin Point\n * @param line Droite\n * @returns { x, y } coordonnées du projeté orthogonale sur d\n * @author Jean-Claude Lhote\n */\nexport function orthogonalProjectionCoord(\n  origin: Coords | Point,\n  line: Line,\n): Coords {\n  try {\n    const [a, b, c] = line.equation\n    const k = 1 / (a * a + b * b)\n    let x: number | undefined\n    let y: number | undefined\n    if (a === 0) {\n      x = origin.x\n      y = -c / b\n    } else if (b === 0) {\n      y = origin.y\n      x = -c / a\n    } else {\n      if (origin.x === undefined || origin.y === undefined) return new Coords()\n      x = k * (b * b * origin.x - a * b * origin.y - a * c)\n      y = k * (-a * b * origin.x + a * a * origin.y + (a * a * c) / b) - c / b\n    }\n    return new Coords(x, y)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param A Antécédent (Point ou[x,y])\n * @param O Centre (Point ou[x,y])\n * @param angle Image\n * @returns [x, y] coordonnées de l'image\n */\nexport function rotationCoord(\n  A: Coords | Point,\n  O: Coords | Point,\n  angle: number,\n): Coords {\n  try {\n    if (\n      O.x === undefined ||\n      O.y === undefined ||\n      A.x === undefined ||\n      A.y === undefined\n    )\n      return new Coords()\n    const x =\n      O.x +\n      (A.x - O.x) * Math.cos((angle * Math.PI) / 180) -\n      (A.y - O.y) * Math.sin((angle * Math.PI) / 180)\n    const y =\n      O.y +\n      (A.x - O.x) * Math.sin((angle * Math.PI) / 180) +\n      (A.y - O.y) * Math.cos((angle * Math.PI) / 180)\n    return new Coords(x, y)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param A Antécédent\n * @param O Centre\n * @param k Coefficient\n * @returns [x, y] coordonnées de l'image\n */\nexport function homothetieCoord(\n  A: Coords | Point,\n  O: Coords | Point,\n  k: number,\n): Coords {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    O.x === undefined ||\n    O.y === undefined\n  )\n    return new Coords()\n  try {\n    const x = O.x + k * (A.x - O.x)\n    const y = O.y + k * (A.y - O.y)\n    return new Coords(x, y)\n  } catch {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param A Antécédent\n * @param O Centre\n * @param k Coefficient\n * @param angle Angle en degrés\n * @returns [x, y] coordonnées de l'image\n */\nexport function similitudeCoord(\n  A: Coords | Point,\n  O: Coords | Point,\n  k: number,\n  angle: number,\n): Coords {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    O.x === undefined ||\n    O.y === undefined\n  )\n    return new Coords()\n  try {\n    const angleRadian = (angle * Math.PI) / 180\n    const x =\n      O.x +\n      k *\n        (Math.cos(angleRadian) * (A.x - O.x) -\n          Math.sin(angleRadian) * (A.y - O.y))\n    const y =\n      O.y +\n      k *\n        (Math.cos(angleRadian) * (A.y - O.y) +\n          Math.sin(angleRadian) * (A.x - O.x))\n    return new Coords(x, y)\n  } catch {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function reflectOverLineCoord(origin: Point, line: Line): Coords {\n  let x: number\n  let y: number\n  const [a, b, c] = line.equation\n  const k = 1 / (a * a + b * b)\n  if (a === 0) {\n    x = origin.x\n    y = -(origin.y + (2 * c) / b)\n  } else if (b === 0) {\n    y = origin.y\n    x = -(origin.x + (2 * c) / a)\n  } else {\n    x = k * ((b * b - a * a) * origin.x - 2 * a * b * origin.y - 2 * a * c)\n    y =\n      k *\n        ((a * a - b * b) * origin.y -\n          2 * a * b * origin.x +\n          (a * a * c) / b -\n          b * c) -\n      c / b\n  }\n  return { x, y }\n}\n\nexport function translateCoords(\n  origin: Coords,\n  point1: Coords,\n  point2: Coords,\n): Coords {\n  const x = origin.x + point2.x - point1.x\n  const y = origin.y + point2.y - point1.y\n  return { x, y }\n}\n\nexport function angleOriented(\n  A: Coords | Point,\n  O: Coords | Point,\n  B: Coords | Point,\n): number {\n  const v = { x: B.x - O.x, y: B.y - O.y }\n  const u = { x: A.x - O.x, y: A.y - O.y }\n  const s = u.x * v.y - v.x * u.y >= 0 ? 1 : -1 // composante z du produit vectoriel OA^OB\n  return s * angle(A, O, B)\n}\n\nexport function angle(\n  A: Coords | Point,\n  O: Coords | Point,\n  B: Coords | Point,\n): number {\n  const OA = { norme: 0, x: A.x - O.x, y: A.y - O.y }\n  OA.norme = Math.sqrt(OA.x ** 2 + OA.y ** 2)\n  const OB = { norme: 0, x: B.x - O.x, y: B.y - O.y }\n  OB.norme = Math.sqrt(OB.x ** 2 + OB.y ** 2)\n  const scalaire = OA.x * OB.x + OA.y * OB.y\n  if (OA.norme * OB.norme < defaultMinSlope) {\n    return 0 // On évite de retouner un angle NaN, zéro, c'est toujours mieux que NaN.\n  }\n  return (Math.acos(scalaire / (OA.norme * OB.norme)) * 180) / Math.PI\n}\n\n/** Renvoie [x1, y1, x2, y2] les coordonnées des extrémités du tracé */\nexport function getCoordsOut(\n  A: Coords | Point,\n  B: Coords | Point,\n  figure: Figure,\n): [number, number, number, number] {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined ||\n    Number.isNaN(A.x) ||\n    Number.isNaN(A.y) ||\n    Number.isNaN(B.x) ||\n    Number.isNaN(B.y)\n  )\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  try {\n    let pente = defaultMaxSlope\n    if (B.x !== A.x) {\n      pente = (B.y - A.y) / (B.x - A.x)\n    }\n    if (Math.abs(pente) >= defaultMaxSlope)\n      return [A.x, figure.yMax, A.x, figure.yMin]\n    if (Math.abs(pente) < defaultMinSlope)\n      return [figure.xMin, A.y, figure.xMax, A.y]\n    let xOutLeft: number\n    let yOutLeft: number\n    let n = 0\n    while (true) {\n      xOutLeft = A.x + n\n      yOutLeft = A.y + n * pente\n      n++\n      if (\n        xOutLeft > figure.xMax + 1 ||\n        yOutLeft > figure.yMax + 1 ||\n        yOutLeft < figure.yMin - 1\n      )\n        break\n    }\n    let xOutRight: number\n    let yOutRight: number\n    n = 0\n    while (true) {\n      xOutRight = A.x + n\n      yOutRight = A.y + n * pente\n      n--\n      if (\n        xOutRight < figure.xMin - 1 ||\n        yOutRight > figure.yMax + 1 ||\n        yOutRight < figure.yMin - 1\n      )\n        break\n    }\n    return [xOutLeft, yOutLeft, xOutRight, yOutRight]\n  } catch (error) {\n    console.error('Erreur dans Coords.getCoordsOut', error)\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport function getMinDistanceMinWithElements(\n  coords: Coords,\n  figure: Figure,\n): number {\n  const elements = [...figure.elements.values()].filter(\n    (e) => 'distancePointer' in e,\n  )\n  let distance = Number.POSITIVE_INFINITY\n  for (const element of elements) {\n    const d = element.distancePointer(coords.x, coords.y)\n    if (d < distance) {\n      distance = d\n    }\n  }\n  return distance\n}\n\nexport function labelCoords(\n  point1: Coords | Point,\n  point2: Coords | Point,\n): Coords {\n  try {\n    const midX = (point1.x + point2.x) / 2\n    const midY = (point1.y + point2.y) / 2\n    const dx = point2.x - point1.x\n    const dy = point2.y - point1.y\n    const perpX = -dy\n    const perpY = dx\n    const length = Math.sqrt(perpX * perpX + perpY * perpY)\n    const normPerpX = perpX / length\n    const normPerpY = perpY / length\n    const offsetX = normPerpX * 0.5\n    const offsetY = normPerpY * 0.5\n    const x = midX + offsetX\n    const y = midY + offsetY\n    return new Coords(x, y)\n  } catch {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/** Donne les coordonnées de deux points de la parallèle à line passant par point */\nexport function parallelCoords({\n  line,\n  point,\n  figure,\n}: {\n  line: Line\n  point: Coords\n  figure: Figure\n}) {\n  try {\n    const x1 = point.x\n    const y1 = point.y\n    let x2: number\n    let y2: number\n    if (line.point2.x - line.point1.x === 0) {\n      x2 = x1\n      y2 = figure.yMax\n    } else {\n      x2 = x1 + 5\n      y2 =\n        y1 +\n        (5 * (line.point2.y - line.point1.y)) / (line.point2.x - line.point1.x)\n    }\n    return { x1, y1, x2, y2 }\n  } catch (error) {\n    console.error('Erreur dans Coords.parallelCoords', error)\n    return { x1: Number.NaN, y1: Number.NaN, x2: Number.NaN, y2: Number.NaN }\n  }\n}\n","export function round(value: number, precision = 4): number {\n  return Math.round(value * 10 ** precision) / 10 ** precision\n}\n\nexport function displayNumber(value: number, precision = 4): string {\n  if (round(value, precision).toLocaleString('fr-FR') === '-0') return '0'\n  return round(value, precision).toLocaleString('fr-FR').replace(',', '{,}')\n}\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport default function syncShake({\n  delta = 3,\n  figure,\n  repeat = 5,\n  time = 1,\n}: {\n  delta?: number\n  figure: Figure\n  repeat?: number\n  time?: number\n}): void {\n  const timePeranimation = time / repeat\n  // Retirer l'animation\n  figure.container.style.animation = 'none'\n  void figure.container.offsetWidth\n  // Remettre l'animation définie dans le css de index.html\n  figure.container.style.animation = `shake ${timePeranimation}s`\n  figure.container.style.animationIterationCount = repeat.toString()\n\n  const nearX = (x: number): number => {\n    const distanceFromBorder = 0.5\n    const newX = round(x + (Math.random() - 0.5) * delta, 1)\n    if (\n      newX > figure.xMin + distanceFromBorder &&\n      newX < figure.xMax - distanceFromBorder\n    ) {\n      return newX\n    }\n    return x\n  }\n\n  const nearY = (y: number): number => {\n    const distanceFromBorder = 2\n    const newY = round(y + (Math.random() - 0.5) * delta, 1)\n    if (\n      newY > figure.yMin + distanceFromBorder &&\n      newY < figure.yMax - distanceFromBorder\n    ) {\n      return newY\n    }\n    return y\n  }\n\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type === 'Point',\n  ) as Point[]\n  const freePoints = points.filter((p) => p.isFree)\n  for (let _ = 0; _ < repeat; _++) {\n    for (const point of freePoints) {\n      point.moveTo(nearX(point.x), nearY(point.y))\n    }\n  }\n  figure.container.style.animation = 'none'\n}\n","import { angle as calculAngle } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\nimport syncShake from './syncShake'\n\n/**\n * Teste la valeur de l'angle label1label2label3\n * @returns {{isValid: boolean, message: string}} Un objet contenant deux propriétés :\n * `isValid`, un booléen indiquant si l'angle est valide, et `message`, une chaîne de caractères contenant un message descriptif.\n */\nexport default function checkAngle({\n  angle,\n  figure,\n  label1,\n  label2,\n  label3,\n}: {\n  angle: number\n  figure: Figure\n  label1: string\n  label2: string\n  label3: string\n}): { isValid: boolean; message: string } {\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  const matchPoints3 = points.filter((p) => p.label === label3)\n  if (matchPoints1.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints1.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints3.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label3}$ dans la figure.`,\n    }\n  }\n  if (matchPoints3.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label3}$ dans la figure.`,\n    }\n  }\n  let isValid = true\n  const point1 = matchPoints1[0]\n  const point2 = matchPoints2[0]\n  const point3 = matchPoints3[0]\n  for (let i = 0; i < 3; i++) {\n    isValid =\n      isValid &&\n      round(calculAngle(point1, point2, point3), 2) === round(angle, 2)\n    syncShake({ figure })\n  }\n  if (isValid) {\n    return {\n      isValid,\n      message: `L'angle $\\\\widehat{${label1}${label2}${label3}}$ est bien toujours égal à ${angle}°.`,\n    }\n  }\n  return {\n    isValid,\n    message: `L'angle $\\\\widehat{${label1}${label2}${label3}}$ n'est pas toujours égal à ${angle}°.`,\n  }\n}\n","import type { Coords } from '../elements/calculus/Coords'\nimport type Circle from '../elements/lines/Circle'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\nexport default function checkCircle({\n  center,\n  figure,\n  labelCenter,\n  radius,\n}: {\n  center: Coords\n  figure: Figure\n  labelCenter?: string\n  radius: number\n}) {\n  const allCircles = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Circle'),\n  ) as Circle[]\n  let circlesWithGoodLabelCenter: Circle[] = []\n  if (labelCenter) {\n    circlesWithGoodLabelCenter = allCircles.filter(\n      (c) => c.center.label === labelCenter,\n    )\n  }\n  if (allCircles.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de cercle dans la figure.`,\n    }\n  }\n  const goodCircle = allCircles.find(\n    (c) =>\n      round(c.center.x) === round(center.x) &&\n      round(c.center.y) === round(center.y) &&\n      round(c.radius) === round(radius),\n  )\n  if (!goodCircle) {\n    return {\n      isValid: false,\n      message: `Le cercle de centre $(${round(center.x, 2)}\\\\;;\\\\;${round(center.y, 2)})$ et de rayon ${round(radius, 1)} n'existe pas dans la figure.`,\n    }\n  }\n  if (labelCenter) {\n    const goodCircleWithGoodLabelCenter = circlesWithGoodLabelCenter.find(\n      (c) =>\n        round(c.center.x) === round(center.x) &&\n        round(c.center.y) === round(center.y) &&\n        round(c.radius) === round(radius),\n    )\n    if (!goodCircleWithGoodLabelCenter) {\n      return {\n        isValid: false,\n        message: `Le cercle de centre $(${round(center.x, 2)}\\\\;;\\\\;${round(center.y, 2)})$ et de rayon ${round(radius, 2)} est bien tracé mais son centre n'est pas ${labelCenter}.`,\n        element: goodCircle,\n      }\n    }\n    return {\n      isValid: true,\n      message: '',\n      element: goodCircleWithGoodLabelCenter,\n    }\n  }\n\n  return {\n    isValid: true,\n    message: '',\n    element: goodCircle,\n  }\n}\n","/** Transforme #F15929 en {rgb,255:red,241; green,89; blue,41} : indispensable avec tikZ */\nfunction hexToTikzRgb(hex: string): string {\n  const hexWithoutHashtag = hex.replace(/^#/, '')\n  const bigint = Number.parseInt(hexWithoutHashtag, 16)\n  const r = (bigint >> 16) & 255\n  const g = (bigint >> 8) & 255\n  const b = bigint & 255\n  return `{rgb,255:red,${r}; green,${g}; blue,${b}}`\n}\n\n/** Transforme rgba(241, 89, 41, 0.5) en {rgb,255:red,241; green,89; blue,41} : indispensable avec tikZ */\nfunction rgbaToTikzRgb(rgba: string): string {\n  const rgbaValues = rgba.match(/\\d+(\\.\\d+)?/g)\n  if (rgbaValues && rgbaValues.length >= 3) {\n    const r = Number.parseInt(rgbaValues[0], 10)\n    const g = Number.parseInt(rgbaValues[1], 10)\n    const b = Number.parseInt(rgbaValues[2], 10)\n    return `{rgb,255:red,${r}; green,${g}; blue,${b}}`\n  }\n  throw new Error('Invalid RGBA color format')\n}\n\nexport function colorLatex(color: string) {\n  if (color.includes('#')) return hexToTikzRgb(color)\n  if (color.includes('rgba')) return rgbaToTikzRgb(color)\n  if (color === 'currentColor') return 'black'\n  return color\n}\n","type ObserverDebugGlobal = typeof globalThis & {\n  __APIGEOM_DEBUG_OBSERVERS__?: unknown\n  process?: {\n    env?: Record<string, string | undefined>\n  }\n}\n\nconst OBSERVER_FLAG = '__APIGEOM_DEBUG_OBSERVERS__'\nconst ENV_FLAG = 'APIGEOM_DEBUG_OBSERVERS'\n\nconst isTruthyFlag = (value: unknown): boolean => {\n  if (value === true) return true\n  if (typeof value === 'string') {\n    const normalized = value.trim().toLowerCase()\n    return normalized === '1' || normalized === 'true' || normalized === 'yes'\n  }\n  return false\n}\n\nconst isObserverLifecycleDebugEnabled = (): boolean => {\n  const globalScope = globalThis as ObserverDebugGlobal\n  if (isTruthyFlag(globalScope[OBSERVER_FLAG])) return true\n  const envValue = globalScope.process?.env?.[ENV_FLAG]\n  if (envValue !== undefined) return isTruthyFlag(envValue)\n  return false\n}\n\n/**\n * Writes a debug line describing the current lifecycle event for an observer graph mutation.\n *\n * Enable via:\n *  - `globalThis.__APIGEOM_DEBUG_OBSERVERS__ = true` inside a browser console, or\n *  - `APIGEOM_DEBUG_OBSERVERS=true pnpm test`, or any truthy value (1/true/yes).\n */\nexport function debugObserverLifecycle(\n  stage: string,\n  details?: Record<string, unknown>,\n): void {\n  if (!isObserverLifecycleDebugEnabled()) return\n  const payload = details ?? {}\n  // eslint-disable-next-line no-console\n  console.debug(`[ObserverLifecycle] ${stage}`, payload)\n}\n","import type DynamicNumber from '../dynamicNumbers/DynamicNumber'\nimport type Figure from '../Figure'\nimport { colorLatex } from '../lib/handleColors'\nimport { debugObserverLifecycle } from '../lib/observerLifecycleDebug'\nimport { orangeMathalea } from './defaultValues'\nimport type { OptionsElement2D, typeElement2D } from './interfaces'\nimport type Transformation from './Transformation'\n\nabstract class Element2D {\n  /** Couleur de l'élément au format HTML */\n  protected _color: string\n  /** Tracé en pointillés ? */\n  protected _isDashed: boolean\n  /** Est-ce que le pointeur est au dessus de l'élément ? */\n  protected _isHover = false\n  /** Est-ce que l'élément est sélectionné ? */\n  protected _isSelected = false\n  /** Visible ? */\n  protected _isVisible: boolean\n  /** Opacité */\n  protected _opacity = 1\n  /** Épaisseur du tracé de l'élément */\n  protected _thickness: number\n  /** Espace de travail dans lequel l'élément sera représenté */\n  figure: Figure\n  /** Groupe SVG dans lequel sera déssiné l'élément */\n  groupSvg: SVGElement\n  /** Identifiant de l'objet qui servira de clé dans le Map de tous les éléments */\n  readonly id: string\n  /** Les élément qui ont isChild à true sont ceux qui sont construits par d'autres et qui n'ont pas à être dans la sauvegarde */\n  readonly isChild: boolean\n  /** Est-ce qu'un élément est caché ? */\n  isHidden = false\n  /** Est-ce que l'élément peut être supprimé ? */\n  isDeletable = true\n  /** Pour l'interface graphique, détermine si un élément apparaitra ou pas dans la liste */\n  isSelectable: boolean\n  /** Liste des enfants à notifier à chaque fois que l'élément est déplacé */\n  observers: Array<DynamicNumber | Element2D>\n  /** Liste des parents à prévenir lors de la suppression de l'élément */\n  parents: Set<DynamicNumber | Element2D>\n  /** Indique la transformation subit par le point */\n  transformation?: Transformation\n  /** Type d'objet mathématique */\n  type!: typeElement2D\n  constructor(\n    figure: Figure,\n    {\n      color,\n      id,\n      isChild,\n      isDashed,\n      isDeletable = true,\n      isSelectable = true,\n      isVisible,\n      opacity,\n      thickness,\n    }: OptionsElement2D,\n  ) {\n    this.figure = figure\n    this.isChild = isChild ?? false\n    /** Certains éléments sont construits par d'autres (codages, points temporaires, labels...)\n     *  on les nomme elementTmpX, on met this.child à true et on ne les sauvegarde pas dans le Json\n     *  mais ils sont bien présents dans figure.elements\n     */\n    this.isSelectable = isSelectable\n    this.isDeletable = isDeletable\n    if (id == null || this.figure.elements.has(id)) {\n      if (id != null && this.figure.elements.has(id)) {\n        throw Error(`id ${id} déjà utilisé`)\n      }\n      if (this.isChild) {\n        let cpt = 0\n        while (this.figure.elements.has(`elementTmp${cpt.toString()}`)) {\n          cpt++\n        }\n        this.id = `elementTmp${cpt.toString()}`\n      } else {\n        let cpt = 0\n        while (this.figure.elements.has(`element${cpt.toString()}`)) {\n          cpt++\n        }\n        this.id = `element${cpt.toString()}`\n      }\n    } else {\n      this.id = id\n    }\n    this.figure.elements.set(this.id, this)\n    this._color = color ?? this.figure.options.color\n    this._thickness = thickness ?? this.figure.options.thickness\n    this._isDashed = isDashed ?? this.figure.options.isDashed\n    this._isVisible = isVisible ?? true\n    this._opacity = opacity ?? 1\n    this.groupSvg = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    this.observers = []\n    this.parents = new Set()\n  }\n\n  /** Change la couleur de manière temporaire sans changer les attributs de l'élément */\n  changeColor(element: Element2D, color: string): void {\n    const fixedColor = color === 'mathalea' ? orangeMathalea : color\n    if (element.groupSvg.children.length > 0) {\n      for (const line of Array.from(element.groupSvg.children)) {\n        line.setAttribute('stroke', fixedColor)\n      }\n    } else {\n      // Le segment ou le cercle ne sont pas des groupes, ce sont des éléments uniques sans children\n      element.groupSvg.setAttribute('stroke', fixedColor)\n    }\n  }\n\n  distancePointer(_: number, __: number): number {\n    return Number.POSITIVE_INFINITY\n  }\n\n  draw(): void {}\n\n  /** Cacher l'élément de façon temporaire et permettre à l'utilisateur d'apercevoir l'élément en cliquant sur l'icone Afficher/Cacher */\n  hide(): void {\n    this.isVisible = false\n    this.isHidden = true\n  }\n\n  jsonOptions(): object {\n    const defaultOptions = {\n      color: this.color,\n      id: this.id,\n      isChild: this.isChild,\n      isDashed: this.isDashed,\n      isVisible: this.isVisible,\n      isSelectable: this.isSelectable,\n      isDeletable: this.isDeletable,\n      opacity: this.opacity,\n      thickness: this.thickness,\n      type: this.type,\n    }\n    if (this.transformation?.type === 'dilate') {\n      return {\n        ...defaultOptions,\n        idTransformationCenter: this.transformation.center.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        transformationFactor: this.transformation.factor,\n        type: 'ElementByDilate',\n      }\n    }\n    if (this.transformation?.type === 'reflect') {\n      return {\n        ...defaultOptions,\n        idTransformationCenter: this.transformation.center.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        type: 'ElementByReflect',\n      }\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return {\n        ...defaultOptions,\n        idTransformationLine: this.transformation.line.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        type: 'ElementByReflectOverLine',\n      }\n    }\n    if (this.transformation?.type === 'rotation') {\n      return {\n        ...defaultOptions,\n        idTransformationCenter: this.transformation.center.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        transformationAngle: this.transformation.angle,\n        type: 'ElementByRotation',\n      }\n    }\n    if (this.transformation?.type === 'translation') {\n      return {\n        ...defaultOptions,\n        idTransformationPoint1: this.transformation.point1.id,\n        idTransformationPoint2: this.transformation.point2.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        type: 'ElementByTranslation',\n      }\n    }\n    return defaultOptions\n  }\n\n  /** Prévenir les enfants qu'ils doivent se mettre à jour */\n  notify(): void {\n    for (const element of this.observers) {\n      element.update()\n    }\n  }\n\n  remove(): void {\n    if (!this.isDeletable) return\n    debugObserverLifecycle('remove:start', {\n      id: this.id,\n      observers: this.observers.length,\n      parents: this.parents.size,\n      constructor: this.constructor.name,\n    })\n    this.disposeParents()\n    const observersSnapshot = [...this.observers]\n    this.observers = []\n    for (const observer of observersSnapshot) {\n      observer.remove()\n    }\n    if (this.figure?.elements) {\n      this.figure.elements.delete(this.id)\n    }\n\n    // Nettoyer le groupSvg en supprimant tous ses enfants d'abord\n    if (this.groupSvg) {\n      while (this.groupSvg.firstChild) {\n        this.groupSvg.removeChild(this.groupSvg.firstChild)\n      }\n      this.groupSvg.remove()\n    }\n\n    // Casser les références circulaires\n    this.parents.clear()\n\n    // Nettoyer les références pour aider le garbage collector\n    // @ts-expect-error - Permettre de nullifier pour le nettoyage\n    this.groupSvg = null\n    // @ts-expect-error - Permettre de nullifier pour le nettoyage\n    this.figure = null\n    // Vider le tableau d'observers\n    this.observers = []\n\n    debugObserverLifecycle('remove:end', { id: this.id })\n  }\n\n  /** Modifie la couleur et l'épaisseur de l'élément */\n  setVisibilityColorThicknessAndDashed(): void {\n    this.isVisible = this._isVisible\n    this.color = this._color\n    this.thickness = this._thickness\n    if (this.type.includes('Point')) return\n    this.isDashed = this._isDashed\n  }\n\n  /** Afficher l'élément */\n  show(): void {\n    if (!this.figure) return\n    this.isVisible = true\n  }\n\n  /** S'abonner aux modifications des éléments parents\n   * Par exemple le segment s'abonnera aux modifications de ses deux extrémités\n   */\n  subscribe(element: DynamicNumber | Element2D): void {\n    if (this.observers.includes(element)) return\n    this.observers.push(element)\n    element.registerParent(this)\n  }\n\n  disposeParents(): void {\n    if (this.parents.size === 0) return\n    debugObserverLifecycle('disposeParents:start', {\n      childId: this.id,\n      parents: [...this.parents].map((parent) => parent.id),\n    })\n    const parentsSnapshot = [...this.parents]\n    for (const parent of parentsSnapshot) {\n      parent.unsubscribe(this)\n    }\n    if (this.parents.size !== 0) {\n      this.parents.clear()\n    }\n    debugObserverLifecycle('disposeParents:end', { childId: this.id })\n  }\n\n  registerParent(parent: DynamicNumber | Element2D): void {\n    if (this.parents.has(parent)) return\n    this.parents.add(parent)\n    debugObserverLifecycle('registerParent', {\n      childId: this.id,\n      parentId: parent.id,\n    })\n  }\n\n  unregisterParent(parent: DynamicNumber | Element2D): void {\n    if (!this.parents.delete(parent)) return\n    debugObserverLifecycle('unregisterParent', {\n      childId: this.id,\n      parentId: parent.id,\n    })\n  }\n\n  temp(): Element2D {\n    this.figure.tmpElements.push(this)\n    this.color = this.figure.options.tmpColor\n    this.thickness = this.figure.options.tmpThickness\n    if ('isDashed' in this) this.isDashed = this.figure.options.tmpIsDashed\n    if ('fillColor' in this) this.fillColor = this.figure.options.tmpFillColor\n    if ('fillOpacity' in this)\n      this.fillOpacity = this.figure.options.tmpFillOpacity\n    return this\n  }\n\n  tempShow(): void {\n    this.isVisible = true\n    this.changeColor(this, this.figure.options.tmpColor)\n    changeThickness(this, 0.5)\n  }\n\n  /** Personnalise la sortie JSON de l'élément pour la sauvegarde */\n  toJSON(): object {\n    return {\n      ...this.jsonOptions,\n    }\n  }\n\n  /**\n   * Annuler l'abonnement\n   */\n  unsubscribe(element: DynamicNumber | Element2D): void {\n    const previousLength = this.observers.length\n    this.observers = this.observers.filter((observer) => observer !== element)\n    if (previousLength === this.observers.length) return\n    element.unregisterParent(this)\n  }\n\n  /** Créé ou met à jour le groupe SVG de l'élément */\n  update(): void {}\n\n  /** Change la couleur des tracés de l'élément */\n  set color(color: string) {\n    this._color = color\n    this.changeColor(this, color)\n  }\n\n  /** Couleur au format HTML */\n  get color(): string {\n    return this._color\n  }\n\n  get description(): string {\n    return this.id\n  }\n\n  set isDashed(isDashed) {\n    if (isDashed) {\n      this.groupSvg.setAttribute('stroke-dasharray', '4 3')\n    } else {\n      this.groupSvg.removeAttribute('stroke-dasharray')\n    }\n    this._isDashed = isDashed\n  }\n\n  /** Pointillés */\n  get isDashed(): boolean {\n    return this._isDashed\n  }\n\n  get isHover(): boolean {\n    return this._isHover\n  }\n\n  set isHover(isHover: boolean) {\n    if (this.figure.currentState === 'HIDE') {\n      if (isHover) {\n        this.changeColor(this, orangeMathalea)\n        changeThickness(this, this._thickness + 2)\n      } else if (!this._isSelected && !this.isHidden) {\n        this.changeColor(this, this._color)\n        changeThickness(this, this._thickness)\n      } else {\n        this.tempShow()\n      }\n    } else {\n      if (isHover) {\n        this.changeColor(this, orangeMathalea)\n        changeThickness(this, this._thickness + 2)\n      } else if (!this._isSelected && !this.isHidden) {\n        this.changeColor(this, this._color)\n        changeThickness(this, this._thickness)\n      }\n    }\n    this._isHover = isHover\n  }\n\n  get isSelected(): boolean {\n    return this._isSelected\n  }\n\n  set isSelected(isSelected: boolean) {\n    if (isSelected) {\n      this.changeColor(this, orangeMathalea)\n      changeThickness(this, this._thickness + 2)\n    } else if (!this._isHover) {\n      this.changeColor(this, this._color)\n      changeThickness(this, this._thickness)\n    }\n    this._isSelected = isSelected\n  }\n\n  /** Affiche ou masque l'élément sans permettre à l'utilisateur de modifier l'état avec l'interface graphique */\n  set isVisible(isVisible) {\n    if (isVisible) {\n      this.figure.svg.appendChild(this.groupSvg)\n    } else {\n      this.groupSvg.remove()\n    }\n    this._isVisible = isVisible\n  }\n\n  /** Est-il visible ? Le groupe SVG est-il dans le code SVG ? */\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  /** Génère le code LaTeX de l'élément */\n  get latex(): string {\n    return `% ${this.type} ${this.id}} n'a pas de sortie LaTeX`\n  }\n\n  get latexOptions(): string {\n    const options = []\n    if (this.color !== 'black' && this.color !== '') {\n      options.push(`color=${colorLatex(this.color)}`)\n    }\n    if (this.thickness !== 1) {\n      options.push(`line width=${this.thickness}`)\n    }\n    if (this.isDashed) {\n      options.push('dashed')\n    }\n    if (this.opacity !== 1) {\n      options.push(`opacity=${this.opacity}`)\n    }\n    if (options.length > 0) {\n      return `[${options.join(',')}]`\n    }\n    return ''\n  }\n\n  get opacity(): number {\n    return this._opacity\n  }\n\n  set opacity(opacity: number) {\n    this._opacity = opacity\n    this.groupSvg.setAttribute('opacity', `${opacity}`)\n  }\n\n  /** Change l'épaisseur des tracés */\n  set thickness(thickness: number) {\n    this._thickness = thickness\n    changeThickness(this, thickness)\n  }\n\n  /** Épaisseur des tracés */\n  get thickness(): number {\n    return this._thickness\n  }\n}\n\nfunction changeThickness(element: Element2D, thickness: number): void {\n  if (element.groupSvg.children.length > 0) {\n    for (const line of Array.from(element.groupSvg.children)) {\n      if (\n        line.getAttribute('stroke-readonly') === null ||\n        line.getAttribute('stroke-readonly') === '0'\n      ) {\n        line.setAttribute('stroke-width', `${thickness}`)\n      }\n    }\n  } else {\n    // Le segment par exemple n'est pas un groupe mais un élément unique sans children\n    element.groupSvg.setAttribute('stroke-width', `${thickness}`)\n  }\n}\nexport default Element2D\n","import Element2D from '../elements/Element2D'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { displayNumber, round } from '../lib/format'\n\nexport default function checkCoords({\n  checkOnlyAbscissa = false,\n  figure,\n  label,\n  x,\n  y = 0,\n  color,\n  precision = 0.1,\n}: {\n  checkOnlyAbscissa?: boolean\n  figure: Figure\n  label?: string\n  x: number\n  y?: number\n  color?: string\n  precision?: number\n}): { isValid: boolean; message: string; points: Point[] } {\n  let points: Point[] = []\n  if (color !== undefined) {\n    points = [...figure.elements.values()].filter(\n      (e) =>\n        e instanceof Element2D &&\n        e.type !== 'pointer' &&\n        e.type.includes('Point') &&\n        e.color === color,\n    ) as Point[]\n  } else {\n    points = [...figure.elements.values()].filter(\n      (e) =>\n        e.type !== 'pointer' &&\n        e.type.startsWith('Point') &&\n        e instanceof Element2D &&\n        e.isSelectable,\n    ) as Point[]\n  }\n  if (label !== undefined) {\n    const matchPoints = points.filter((p) => p.label === label)\n    if (matchPoints.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a pas de point $${label}$ dans la figure.`,\n        points: [],\n      }\n    }\n    if (matchPoints.length > 1) {\n      return {\n        isValid: false,\n        message: `Il y a ${matchPoints.length} points $${label}$ dans la figure.`,\n        points: matchPoints,\n      }\n    }\n    const point = matchPoints[0]\n    const isValid =\n      round(point.x, precision) === round(x, precision) &&\n      round(point.y, precision) === round(y, precision)\n    let message: string\n    if (checkOnlyAbscissa) {\n      message = isValid\n        ? ''\n        : `Le point $${label}$ a pour abscisse $${displayNumber(point.x)}$ et non $${displayNumber(x)}$.`\n    } else {\n      message = isValid\n        ? ''\n        : `Le point $${label}$ a pour coordonnées $(${displayNumber(point.x)}\\\\;;\\\\;${displayNumber(point.y)})$ et non $(${displayNumber(x)}\\\\;;\\\\;${displayNumber(y)})$.`\n    }\n    return { isValid, message, points: [point] }\n  }\n  let matchPoints = points.filter(\n    (p) => round(p.x) === round(x) && round(p.y) === round(y),\n  )\n  if (checkOnlyAbscissa) {\n    matchPoints = points.filter((p) => round(p.x) === round(x))\n  }\n  if (matchPoints.length === 0) {\n    if (checkOnlyAbscissa) {\n      return {\n        isValid: false,\n        message: `Il n'y a pas de point d'abscisse $${displayNumber(x)}$ dans la figure.`,\n        points: [],\n      }\n    }\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point en $(${displayNumber(x)}\\\\;;\\\\;${displayNumber(y)})$ dans la figure.`,\n      points: [],\n    }\n  }\n  if (matchPoints.length > 1) {\n    if (checkOnlyAbscissa) {\n      return {\n        isValid: true,\n        message: `Il y a ${matchPoints.length} points d'abscisse $${displayNumber(x)}$ dans la figure.`,\n        points: matchPoints,\n      }\n    }\n    return {\n      isValid: true,\n      message: `Il y a ${matchPoints.length} points de coordonnées $(${displayNumber(x)}\\\\;;\\\\;${displayNumber(y)})$ dans la figure.`,\n      points: matchPoints,\n    }\n  }\n  const point = matchPoints[0]\n  return { isValid: true, message: '', points: [point] }\n}\n","import { distance as calculDistance } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport syncShake from './syncShake'\n\nexport default function checkDistance({\n  distance,\n  figure,\n  label1,\n  label2,\n  shake = true,\n  time = 0,\n}: {\n  distance: number\n  figure: Figure\n  label1: string\n  label2: string\n  shake?: boolean\n  time?: number\n}): { isValid: boolean; message: string } {\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  if (matchPoints1.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints1.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPoints1.length} points $${label1}$ dans la figure.`,\n    }\n  }\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  if (matchPoints2.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPoints2.length} points $${label2}$ dans la figure.`,\n    }\n  }\n  const point1 = matchPoints1[0]\n  const point2 = matchPoints2[0]\n  let isValid = Math.abs(calculDistance(point1, point2) - distance) < 0.001\n  if (shake) {\n    syncShake({ figure, time })\n    isValid =\n      isValid && Math.abs(calculDistance(point1, point2) - distance) < 0.001\n    syncShake({ figure, time })\n    isValid =\n      isValid && Math.abs(calculDistance(point1, point2) - distance) < 0.001\n  }\n  let message = ''\n  if (isValid) {\n    message = `La distance entre les points $${label1}$ et $${label2}$ est bien toujours égale à ${distance}.`\n  } else {\n    message = `La distance entre les points $${label1}$ et $${label2}$ n'est pas toujours égale à ${distance}.`\n  }\n  return { isValid, message }\n}\n","import { type Coords, equationLine } from '../elements/calculus/Coords'\nimport type Line from '../elements/lines/Line'\nimport type Segment from '../elements/lines/Segment'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport function checkLineFromLabels({\n  figure,\n  nameLine,\n  color,\n}: {\n  figure: Figure\n  nameLine: string[] | string\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let lines: Line[]\n  let lines1: Line[] = []\n  let lines2: Line[] = []\n\n  lines = [...figure.elements.values()].filter(\n    (e) => e.type === 'Line',\n  ) as Line[]\n  if (lines.length === 0)\n    return { isValid: false, message: \"Il n'y a pas de droite dans la figure.\" }\n\n  const nomLigne1 = Array.isArray(nameLine) ? nameLine[0] : nameLine\n  if (lines.length !== 0) {\n    lines1 = lines.filter(\n      (e) =>\n        nameLine.includes(e.notation) ||\n        nameLine.includes(e.point1.label + e.point2.label) ||\n        nameLine.includes(e.point2.label + e.point1.label),\n    )\n    if (lines1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomLigne1} n'existe pas sur la figure.`,\n      }\n  }\n\n  if (color !== undefined) {\n    lines2 = lines1.filter((e) => e.color === color)\n    if (lines2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de droite de la couleur demandée dans la figure.\",\n      }\n  }\n  return { isValid: true, message: 'La droite a bien été tracée.' }\n}\n\nexport default function checkLine({\n  figure,\n  point1,\n  point2,\n  color,\n}: {\n  figure: Figure\n  point1: Coords\n  point2: Coords\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let lines: Segment[]\n  let lines2: Segment[]\n\n  lines = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Line'),\n  ) as Segment[]\n  if (lines.length === 0)\n    return { isValid: false, message: \"Il n'y a pas de droite dans la figure.\" }\n\n  if (color !== undefined) {\n    lines2 = lines.filter((e) => e.color === color)\n    if (lines2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de droite de la couleur demandée dans la figure.\",\n      }\n\n    const [aa, bb, cc] = equationLine(point1, point2)\n    for (const line of lines2) {\n      const [a2, b2, c2] = line.equation\n      if (areCoincident(aa, bb, cc, a2, b2, c2)) {\n        return { isValid: true, message: 'La droite a bien été tracée.' }\n      }\n    }\n  }\n\n  const [a, b, c] = equationLine(point1, point2)\n  for (const line of lines) {\n    const [a2, b2, c2] = line.equation\n    if (areCoincident(a, b, c, a2, b2, c2)) {\n      if (color === undefined)\n        return { isValid: true, message: 'La droite a bien été tracée.' }\n      return {\n        isValid: false,\n        message: \"La droite n'est pas tracée de la bonne couleur.\",\n      }\n    }\n  }\n\n  return {\n    isValid: false,\n    message: 'Aucune droite ne correspond à la réponse attendue.',\n  }\n}\n\nfunction areCoincident(\n  a1: number,\n  b1: number,\n  c1: number,\n  a2: number,\n  b2: number,\n  c2: number,\n  precision = 2,\n): boolean {\n  // Cas des droites verticales\n  if (b1 === 0 && b2 === 0) {\n    return c1 / a1 === c2 / a2\n  }\n  const slope1 = b1 !== 0 ? -a1 / b1 : Number.POSITIVE_INFINITY\n  const slope2 = b2 !== 0 ? -a2 / b2 : Number.POSITIVE_INFINITY\n\n  const intercept1 = b1 !== 0 ? -c1 / b1 : Number.NaN\n  const intercept2 = b2 !== 0 ? -c2 / b2 : Number.NaN\n\n  return (\n    round(slope1, precision) === round(slope2, precision) &&\n    round(intercept1, precision) === round(intercept2, precision)\n  )\n}\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\nimport syncShake from './syncShake'\n\n/** Les labels sont de la forme AB avec A et B les labels de deux points de la droite */\nexport default function checkParallel({\n  figure,\n  label1,\n  label2,\n  time = 0,\n}: {\n  figure: Figure\n  label1: string\n  label2: string\n  time?: number\n}): {\n  isValid: boolean\n  message: string\n} {\n  const [a, b] = label1.split('')\n  const [c, d] = label2.split('')\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPointsA = points.filter((p) => p.label === a)\n  if (matchPointsA.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${a}$ dans la figure.`,\n    }\n  }\n  if (matchPointsA.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsA.length} points $${a}$ dans la figure.`,\n    }\n  }\n  const matchPointsB = points.filter((p) => p.label === b)\n  if (matchPointsB.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${b}$ dans la figure.`,\n    }\n  }\n  if (matchPointsB.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsB.length} points $${b}$ dans la figure.`,\n    }\n  }\n  const matchPointsC = points.filter((p) => p.label === c)\n  if (matchPointsC.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${c}$ dans la figure.`,\n    }\n  }\n  if (matchPointsC.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsC.length} points $${c}$ dans la figure.`,\n    }\n  }\n  const matchPointsD = points.filter((p) => p.label === d)\n  if (matchPointsD.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${d}$ dans la figure.`,\n    }\n  }\n  if (matchPointsD.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsD.length} points $${d}$ dans la figure.`,\n    }\n  }\n  const pointA = matchPointsA[0]\n  const pointB = matchPointsB[0]\n  const pointC = matchPointsC[0]\n  const pointD = matchPointsD[0]\n  let isValid =\n    round((pointB.y - pointA.y) / (pointB.x - pointA.x), 2) ===\n    round((pointD.y - pointC.y) / (pointD.x - pointC.x), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round((pointB.y - pointA.y) / (pointB.x - pointA.x), 2) ===\n      round((pointD.y - pointC.y) / (pointD.x - pointC.x), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round((pointB.y - pointA.y) / (pointB.x - pointA.x), 2) ===\n      round((pointD.y - pointC.y) / (pointD.x - pointC.x), 2)\n  const message = isValid\n    ? `Les droites $(${a}${b})$ et $(${c}${d})$ sont bien toujours parallèles.`\n    : `Les droites $(${a}${b})$ et $(${c}${d})$ ne sont pas toujours parallèles.`\n  return { isValid, message }\n}\n","import type Figure from '../../Figure'\nimport { distance, similitudeCoord } from '../calculus/Coords'\n\nimport Element2D from '../Element2D'\nimport type { Binome, OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\n/**\n * Trace un segment qui a pour extrémités deux points donnés\n * Si un point a des coordonnées non définies alors le segment est effacé momentannément\n * C'est la classe parent de celles qui permettent de tracer une droite ou une demi-droite\n */\nclass Segment extends Element2D {\n  borderSize: number\n  /** Élément parent avec lequel il est lié pour le changement de style (comme les côtés d'un polygone) */\n  createdBy?: Element2D\n  /** Première extrémité du segment */\n  point1: Point\n  /** Deuxième extrémité du segment */\n  point2: Point\n  /** Détermine s'il faut afficher les deux extrémités, que celle de gauche ou que celle de droite */\n  shape?: '->' | '-|' | '' | '<-' | '<->' | '<-|' | '|-' | '|->' | '|-|'\n  svgArrow1!: SVGElement\n  svgArrow2!: SVGElement\n  svgBorder1!: SVGElement\n  svgBorder2!: SVGElement\n  svgLine!: SVGElement\n  constructor(\n    figure: Figure,\n    {\n      borderSize,\n      color = figure.options.color,\n      isDashed = figure.options.isDashed,\n      point1,\n      point2,\n      shape = '',\n      thickness = figure.options.thickness,\n      ...options\n    }: {\n      borderSize?: number\n      point1: Point\n      point2: Point\n      shape?: '->' | '-|' | '' | '<-' | '<->' | '<-|' | '|-' | '|->' | '|-|'\n    } & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Segment'\n    this.point1 = point1\n    this.point2 = point2\n    this.shape = shape\n    this.borderSize = borderSize ?? figure.options.borderSize\n    this.color = color\n    this.thickness = thickness\n    this.isDashed = isDashed\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n  }\n\n  dilate(center: Point, factor: number, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n      ...options,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const newSegment = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n    })\n    newSegment.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newSegment\n  }\n\n  distancePointer(x: number, y: number): number {\n    const pointerCoords = { x, y }\n    // Calculer la distance entre le point donné et les extrémités du segment\n    const distanceToP1 = distance(pointerCoords, this.point1)\n    const distanceToP2 = distance(pointerCoords, this.point2)\n\n    // Trouver la projection du point sur le segment\n    const segmentLength = distance(this.point1, this.point2)\n    const projection =\n      ((x - this.point1.x) * (this.point2.x - this.point1.x) +\n        (y - this.point1.y) * (this.point2.y - this.point1.y)) /\n      segmentLength ** 2\n    // La distance minimale est la distance à l'une des extrémités si la projection est en dehors du segment\n    if (projection < 0) {\n      return distanceToP1\n    }\n    if (projection > 1) {\n      return distanceToP2\n    }\n    // Calculer la distance verticale entre le point et le segment\n    const closestX =\n      this.point1.x + projection * (this.point2.x - this.point1.x)\n    const closestY =\n      this.point1.y + projection * (this.point2.y - this.point1.y)\n    const closest = { x: closestX, y: closestY }\n    return distance(pointerCoords, closest)\n  }\n\n  draw(): void {\n    this.svgLine = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.groupSvg.appendChild(this.svgLine)\n    if (this.shape !== '') {\n      this.svgBorder1 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      this.svgBorder2 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      this.svgArrow1 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'polyline',\n      )\n      this.svgArrow2 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'polyline',\n      )\n      this.groupSvg.appendChild(this.svgBorder1)\n      this.groupSvg.appendChild(this.svgBorder2)\n      this.groupSvg.appendChild(this.svgArrow1)\n      this.groupSvg.appendChild(this.svgArrow2)\n    }\n    this.setVisibilityColorThicknessAndDashed()\n    this.update()\n  }\n\n  drawArrow1(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize * 2,\n      45,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize * 2,\n      -45,\n    )\n    const x1Svg = this.figure.xToSx(x1)\n    const x2Svg = this.figure.xToSx(x2)\n    const y1Svg = this.figure.yToSy(y1)\n    const y2Svg = this.figure.yToSy(y2)\n    const axSvg = this.figure.xToSx(a.x)\n    const aySvg = this.figure.yToSy(a.y)\n    if (allAreNumbers(x1Svg, x2Svg, y1Svg, y2Svg, axSvg, aySvg)) {\n      this.svgArrow1.setAttribute(\n        'points',\n        `${x1Svg},${y1Svg} ${axSvg},${aySvg} ${x2Svg},${y2Svg}`,\n      )\n      this.groupSvg.appendChild(this.svgArrow1)\n    }\n  }\n\n  drawArrow2(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize * 2,\n      45,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize * 2,\n      -45,\n    )\n    const x1Svg = this.figure.xToSx(x1)\n    const x2Svg = this.figure.xToSx(x2)\n    const y1Svg = this.figure.yToSy(y1)\n    const y2Svg = this.figure.yToSy(y2)\n    const bxSvg = this.figure.xToSx(b.x)\n    const bySvg = this.figure.yToSy(b.y)\n    if (allAreNumbers(x1Svg, x2Svg, y1Svg, y2Svg, bxSvg, bySvg)) {\n      this.svgArrow2.setAttribute(\n        'points',\n        `${x1Svg},${y1Svg} ${bxSvg},${bySvg} ${x2Svg},${y2Svg}`,\n      )\n      this.groupSvg.appendChild(this.svgArrow2)\n    }\n  }\n\n  drawBorder1(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize,\n      90,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize,\n      -90,\n    )\n    const x1Svg = this.figure.xToSx(x1).toString()\n    const x2Svg = this.figure.xToSx(x2).toString()\n    const y1Svg = this.figure.yToSy(y1).toString()\n    const y2Svg = this.figure.yToSy(y2).toString()\n    this.svgBorder1.setAttribute('x1', x1Svg)\n    this.svgBorder1.setAttribute('y1', y1Svg)\n    this.svgBorder1.setAttribute('x2', x2Svg)\n    this.svgBorder1.setAttribute('y2', y2Svg)\n    this.groupSvg.appendChild(this.svgBorder1)\n  }\n\n  drawBorder2(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize,\n      90,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize,\n      -90,\n    )\n    const x1Svg = this.figure.xToSx(x1).toString()\n    const x2Svg = this.figure.xToSx(x2).toString()\n    const y1Svg = this.figure.yToSy(y1).toString()\n    const y2Svg = this.figure.yToSy(y2).toString()\n    this.svgBorder2.setAttribute('x1', x1Svg)\n    this.svgBorder2.setAttribute('y1', y1Svg)\n    this.svgBorder2.setAttribute('x2', x2Svg)\n    this.svgBorder2.setAttribute('y2', y2Svg)\n    this.groupSvg.appendChild(this.svgBorder2)\n  }\n\n  reflect(center: Point, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n      ...options,\n    })\n    result.transformation = { center, origin: this, type: 'reflect' }\n    return result\n  }\n\n  reflectOverLine(line: Segment, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n      ...options,\n    })\n    result.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return result\n  }\n\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n      ...options,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n    })\n    result.transformation = { angle, center, origin: this, type: 'rotation' }\n    return result\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      borderSize: this.borderSize,\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n      shape: this.shape,\n    }\n  }\n\n  translate(point1: Point, point2: Point, options: OptionsElement2D) {\n    const newPoint1 = this.point1.translate(point1, point2)\n    const newPoint2 = this.point2.translate(point1, point2)\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n      ...options,\n    })\n    result.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return result\n  }\n\n  update(): void {\n    this.notify()\n    if (\n      this.point1.x === undefined ||\n      this.point1.y === undefined ||\n      this.point2.x === undefined ||\n      this.point2.y === undefined ||\n      !Number.isFinite(this.point1.x) ||\n      !Number.isFinite(this.point1.y) ||\n      !Number.isFinite(this.point2.x) ||\n      !Number.isFinite(this.point2.y)\n    ) {\n      this.svgLine.removeAttribute('x1')\n      this.svgLine.removeAttribute('x2')\n      this.svgLine.removeAttribute('y1')\n      this.svgLine.removeAttribute('y2')\n    } else {\n      const x1Svg = this.figure.xToSx(this.point1.x)\n      const x2Svg = this.figure.xToSx(this.point2.x)\n      const y1Svg = this.figure.yToSy(this.point1.y)\n      const y2Svg = this.figure.yToSy(this.point2.y)\n      this.svgLine.setAttribute('x1', `${x1Svg}`)\n      this.svgLine.setAttribute('y1', `${y1Svg}`)\n      this.svgLine.setAttribute('x2', `${x2Svg}`)\n      this.svgLine.setAttribute('y2', `${y2Svg}`)\n    }\n    if (this.shape?.at(0) === '|') {\n      this.drawBorder1()\n      this.svgArrow1?.remove()\n    } else if (this.shape?.at(0) === '<') {\n      this.drawArrow1()\n      this.svgBorder1?.remove()\n    } else {\n      this.svgArrow1?.remove()\n      this.svgBorder1?.remove()\n    }\n    if (this.shape?.at(-1) === '|') {\n      this.drawBorder2()\n      this.svgArrow2.remove()\n    } else if (this.shape?.at(-1) === '>') {\n      this.drawArrow2()\n      this.svgBorder2?.remove()\n    } else {\n      this.svgArrow2?.remove()\n      this.svgBorder2?.remove()\n    }\n  }\n\n  get angleWithHorizontalInDegres(): number {\n    const [a, b] = this.equation\n    const angle = Math.atan2(-a, b)\n    return (angle * 180) / Math.PI\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color: string) {\n    super.color = color\n    for (const element of [this.svgArrow1, this.svgArrow2]) {\n      if (element === undefined) continue\n      element.setAttribute('stroke', color)\n      element.setAttribute('fill', color)\n    }\n  }\n\n  get description(): string {\n    return `Segment ${this.notation}`\n  }\n\n  /** Renvoie [a, b, c] tels que ax + by + c = 0 est l'équation de la droite passant par point1 et point2 */\n  get equation(): [number, number, number] {\n    if (\n      this.point1.x === undefined ||\n      this.point1.y === undefined ||\n      this.point2.x === undefined ||\n      this.point2.y === undefined\n    )\n      return [Number.NaN, Number.NaN, Number.NaN]\n    try {\n      const a = this.point1.y - this.point2.y\n      const b = this.point2.x - this.point1.x\n      const c =\n        (this.point1.x - this.point2.x) * this.point1.y +\n        (this.point2.y - this.point1.y) * this.point1.x\n      return [a, b, c]\n    } catch (error) {\n      console.error('Erreur dans Line.equation()', error)\n      // this.exist = false\n      return [Number.NaN, Number.NaN, Number.NaN]\n    }\n  }\n\n  get latex(): string {\n    let result = `%${this.description}`\n    // Nettoyer les crochets s'il y en a déjà dans latexOptions\n    const cleanLatexOptions = this.latexOptions\n      .replace(/^\\[|\\]$/g, '') // supprime les crochets de début et de fin\n      .trim()\n    // Fusionne avec la flèche si définie\n    let allOptions = [cleanLatexOptions, this.shape]\n      .filter(Boolean) // enlève les valeurs nulles ou vides\n      .join(', ') // jointure propre pour TikZ\n    if (allOptions.includes('->') || allOptions.includes('<-')) {\n      allOptions += ', >=stealth'\n    }\n    result += `\\n\\\\draw[${allOptions}] (${this.point1.x}, ${this.point1.y}) -- (${this.point2.x}, ${this.point2.y});`\n    return result\n  }\n\n  get notation(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `[${point1Name}${point2Name}]`\n  }\n\n  /**\n   * Vecteur normal à la droite\n   */\n  get unitPerpendicularVectorBinome(): Binome {\n    try {\n      const [a, b] = this.equation\n      return { x: a, y: b }\n    } catch (error) {\n      console.error('Erreur dans Line.directeur()', error)\n      return { x: Number.NaN, y: Number.NaN }\n    }\n  }\n\n  /**\n   * Vecteur directeur de la droite\n   */\n  get unitVectorBinome(): Binome {\n    try {\n      const [a, b] = this.equation\n      return { x: b, y: -a }\n    } catch (error) {\n      console.error('Erreur dans Line.normal()', error)\n      return { x: Number.NaN, y: Number.NaN }\n    }\n  }\n}\n\nexport default Segment\n\nfunction allAreNumbers(...numbers: number[]): boolean {\n  for (const number of numbers) {\n    if (!Number.isFinite(number)) return false\n  }\n  return true\n}\n","import { distance } from '../elements/calculus/Coords'\nimport Segment from '../elements/lines/Segment'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nexport default function checkPerpendicularBisector({\n  color,\n  label1,\n  label2,\n  figure,\n}: {\n  color?: string\n  figure: Figure\n  label1: string\n  label2: string\n}): { isValid: boolean; message: string } {\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  if (matchPoints1.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints1.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label2}$ dans la figure.`,\n    }\n  }\n  let lines = [...figure.elements.values()].filter((e) => e instanceof Segment)\n  if (color !== undefined) {\n    lines = lines.filter((e) => e instanceof Segment && e.color === color)\n    if (lines.length > 1)\n      return {\n        isValid: false,\n        message: `Il y a plusieurs droites de couleur ${color}.`,\n      }\n    if (lines.length === 0)\n      return {\n        isValid: false,\n        message: `Il n'y a aucune droite de couleur ${color}.`,\n      }\n  }\n  if (lines.length === 0) {\n    return { isValid: false, message: \"Aucune droite n'est tracée.\" }\n  }\n  let isValid = false\n  for (const line of lines) {\n    const distAM = distance(line.point1, matchPoints1[0])\n    const distBM = distance(line.point1, matchPoints2[0])\n    const distAN = distance(line.point2, matchPoints1[0])\n    const distBN = distance(line.point2, matchPoints2[0])\n    isValid =\n      Math.abs(distAM - distBM) < 0.001 && Math.abs(distAN - distBN) < 0.001\n    if (isValid) break\n  }\n  let message = isValid\n    ? `La médiatrice de $[${label1 + label2}]$ bien construite`\n    : `La médiatrice de [$${label1 + label2}]$ n'est pas construite`\n  message += color !== undefined && isValid ? ` en ${color}.` : '.'\n  return { isValid, message }\n}\n","import Element2D from '../elements/Element2D'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\n/**\n * Idem que checkCoords mais avec un feedback sans coordonnées. Test juste l'existance d'un point et éventuellement son label.\n * @param param0\n * @returns\n */\nexport default function checkPoint({\n  figure,\n  label,\n  x,\n  y,\n  color,\n}: {\n  figure: Figure\n  label?: string\n  x: number\n  y: number\n  color?: string\n}): { isValid: boolean; message: string; points: Point[] } {\n  let points: Point[] = []\n  if (color !== undefined) {\n    points = [...figure.elements.values()].filter(\n      (e) =>\n        e instanceof Element2D &&\n        e.type !== 'pointer' &&\n        e.type === 'Point' &&\n        e.color === color,\n    ) as Point[]\n  } else {\n    points = [...figure.elements.values()].filter(\n      (e) => e.type !== 'pointer' && e.type === 'Point',\n    ) as Point[]\n  }\n  if (label !== undefined) {\n    const matchPoints = points.filter((p) => p.label === label)\n    if (matchPoints.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a pas de point $${label}$ dans la figure.`,\n        points: [],\n      }\n    }\n    if (matchPoints.length > 1) {\n      return {\n        isValid: false,\n        message: `Il y a ${matchPoints.length} points $${label}$ dans la figure.`,\n        points: matchPoints,\n      }\n    }\n    const point = matchPoints[0]\n    const isValid = round(point.x) === round(x) && round(point.y) === round(y)\n    const message = isValid\n      ? ''\n      : `Le point $${label}$ n'est pas  non bien placé dans la figure.`\n    return { isValid, message, points: [point] }\n  }\n  const matchPoints = points.filter(\n    (p) => round(p.x) === round(x) && round(p.y) === round(y),\n  )\n  if (matchPoints.length === 0) {\n    return {\n      isValid: false,\n      message: `Un point attendu n'est pas à sa place dans la figure.`,\n      points: [],\n    }\n  }\n  if (matchPoints.length > 1) {\n    return {\n      isValid: true,\n      message: `Il y a ${matchPoints.length} points confondus à la place d'un point attendu dans la figure.`,\n      points: matchPoints,\n    }\n  }\n  const point = matchPoints[0]\n  return { isValid: true, message: '', points: [point] }\n}\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nexport function areNumbersOrdered(a: number, b: number, c: number): boolean {\n  // Vérifier si les nombres sont en ordre croissant\n  const isIncreasing = a <= b && b <= c\n  // Vérifier si les nombres sont en ordre décroissant\n  const isDecreasing = a >= b && b >= c\n\n  // Retourner true si l'un des deux ordres est respecté\n  return isIncreasing || isDecreasing\n}\n\n/**\n * Vérifie si un point est sur le segment point1-point2 sans que le segment ne soit tracé mais la droite ou la demi-droite doit l'être.\n * @param {Figure} figure // La figure\n * @param {string} labelPt // Nom du point\n * @param {string} labelPt1 // Nom du point1\n * @param {string} labelPt2 // Nom du point2\n * @example Voir exemples plus adaptés dans Figure.ts\n * @author Eric Elter\n * @returns {{ isValid: boolean, message: string }}\n */\nexport default function checkPointBetween2Points({\n  figure,\n  labelPt,\n  labelPt1, // Je passe par un label et pas par un pt car cela pourrait être un pointOnLine ou un PointIntersectionLL ou .....\n  labelPt2,\n}: {\n  figure: Figure\n  labelPt: string\n  labelPt1: string\n  labelPt2: string\n}): { isValid: boolean; message: string } {\n  const point = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt,\n  ) as Point[]\n  if (point.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur la figure.`,\n    }\n  if (point.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt} sur la figure.`,\n    }\n\n  const point1 = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt1,\n  ) as Point[]\n  if (point1.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt1} sur la figure.`,\n    }\n  if (point1.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt1} sur la figure.`,\n    }\n\n  const point2 = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt2,\n  ) as Point[]\n  if (point2.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt2} sur la figure.`,\n    }\n  if (point2.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt2} sur la figure.`,\n    }\n\n  if (\n    !figure.checkPointOnLine({ labelPt, nameLine: `${labelPt1}${labelPt2}` })\n      .isValid ||\n    !areNumbersOrdered(point1[0].x, point[0].x, point2[0].x) ||\n    !areNumbersOrdered(point1[0].y, point[0].y, point2[0].y)\n  )\n    return {\n      isValid: false,\n      message: `Le point ${labelPt} n'est pas sur le segment[${labelPt1}${labelPt2}].`,\n    }\n\n  return {\n    isValid: true,\n    message: `Le point ${labelPt} est sur le segment[${labelPt1}${labelPt2}].`,\n  }\n}\n","import type Point from '../points/Point'\n\nexport function distance(\n  point1: { x: number; y: number },\n  point2: { x: number; y: number },\n): number {\n  return Math.hypot(point1.x - point2.x, point1.y - point2.y)\n}\n\nexport function getLargeSweep(angle: number): [number, number] {\n  try {\n    let large: 0 | 1\n    let sweep: 0 | 1\n    if (angle > 180) {\n      large = 1\n      sweep = 0\n    } else if (angle < -180) {\n      large = 1\n      sweep = 1\n    } else {\n      large = 0\n      sweep = angle > 0 ? 0 : 1\n    }\n    return [large, sweep]\n  } catch {\n    return [Number.NaN, Number.NaN]\n  }\n}\n\nexport function normalizeAngle(angle: number): number {\n  return angle - 2 * Math.PI * Math.floor((angle + Math.PI) / (2 * Math.PI))\n}\n\nexport function polarToCartesian(\n  center: Point,\n  radius: number,\n  angleInDegrees: number,\n): { x: number; y: number } {\n  const angleInRadians = (angleInDegrees * Math.PI) / 180.0\n\n  return {\n    x: center.x + radius * Math.cos(angleInRadians),\n    y: center.y + radius * Math.sin(angleInRadians),\n  }\n}\n","import type Figure from '../../Figure'\nimport { orangeMathalea } from '../defaultValues'\n\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type TextByPosition from '../text/TextByPosition'\nimport type Vector from '../vector/Vector'\n\nclass Grid extends Element2D {\n  readonly axeX: boolean\n  readonly axeY: boolean\n  grid: boolean\n  labels: TextByPosition[]\n  vectors: Vector[]\n  readonly labelX: boolean\n  readonly labelY: boolean\n  readonly stepX: number\n  readonly stepY: number\n  readonly subGrid: boolean\n  readonly subGridDivisions: number\n  readonly xMax: number\n  readonly xMin: number\n  readonly yMax: number\n  readonly yMin: number\n  /** Présence du repère O, i, j*/\n  readonly repereOij: boolean\n  /** Épaisseur des traits de la grille principale */\n  readonly strokeWidthGrid: number\n  /** Épaisseur des thicks */\n  readonly thickThickness: number\n  /** Longueur des thicks */\n  readonly thickHeight: number\n  /** Groupe SVG des thicks */\n  protected thicks: SVGElement\n  constructor(\n    figure: Figure,\n    {\n      axeX = true,\n      axeY = true,\n      color = 'black',\n      grid = true,\n      labelX = true,\n      labelY = true,\n      stepX = 1,\n      stepY = 1,\n      subGrid = false,\n      subGridDivisions = 5,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      yMax = figure.yMax,\n      yMin = figure.yMin,\n      strokeWidthGrid = 0.5,\n      thickThickness = 2,\n      thickHeight = 4,\n      repereOij = false,\n      ...options\n    }: {\n      axeX?: boolean\n      axeY?: boolean\n      color?: string\n      grid?: boolean\n      labelX?: boolean\n      labelY?: boolean\n      stepX?: number\n      stepY?: number\n      subGrid?: boolean\n      subGridDivisions?: number\n      xMax?: number\n      xMin?: number\n      yMax?: number\n      yMin?: number\n      strokeWidthGrid?: number\n      thickThickness?: number\n      thickHeight?: number\n      repereOij?: boolean\n    } & OptionsElement2D = {},\n  ) {\n    super(figure, { ...options })\n    this.type = 'Grid'\n    this._color = color\n    this.axeX = axeX\n    this.axeY = axeY\n    this.grid = grid\n    this.subGrid = subGrid\n    this.labelX = labelX\n    this.labelY = labelY\n    this.stepX = stepX\n    this.stepY = stepY\n    this.subGridDivisions = subGridDivisions\n    this.xMin = xMin\n    this.xMax = xMax\n    this.yMin = yMin\n    this.yMax = yMax\n    this.labels = []\n    this.vectors = []\n    this.strokeWidthGrid = strokeWidthGrid\n    this.thickThickness = thickThickness\n    this.thickHeight = thickHeight\n    this.repereOij = repereOij\n    this.thicks = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n  }\n\n  draw(): void {\n    const sizeOfArrow = 20\n    if (this.axeX) {\n      // Définit la flèche\n      const defs = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'defs',\n      )\n      this.figure.svg.appendChild(defs)\n      const marker = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'marker',\n      )\n      marker.setAttribute('id', 'arrow')\n      marker.setAttribute('markerWidth', sizeOfArrow.toString())\n      marker.setAttribute('markerHeight', sizeOfArrow.toString())\n      marker.setAttribute('refX', '0')\n      marker.setAttribute('refY', '6')\n      marker.setAttribute('orient', 'auto')\n      marker.setAttribute('markerUnits', 'strokeWidth')\n      const path = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'path',\n      )\n      path.setAttribute('d', 'M0,0 L0,12 L18,6 z')\n      marker.appendChild(path)\n      defs.appendChild(marker)\n\n      const svgAxeX = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgAxeX.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n      svgAxeX.setAttribute('y1', this.figure.yToSy(0).toString())\n      svgAxeX.setAttribute(\n        'x2',\n        (this.figure.xToSx(this.xMax) - sizeOfArrow).toString(),\n      )\n      svgAxeX.setAttribute('y2', this.figure.yToSy(0).toString())\n      svgAxeX.setAttribute('stroke', 'black')\n      svgAxeX.setAttribute('stroke-width', '1')\n      // Ajoute la flèche comme une mark\n      svgAxeX.setAttribute('marker-end', 'url(#arrow)')\n\n      // Thicks\n      for (let x = 0; x < this.xMax; x += this.stepX) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', (-this.thickHeight).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.thickHeight.toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      for (let x = 0; x >= this.xMin; x -= this.stepX) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', (-this.thickHeight).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.thickHeight.toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      this.groupSvg.appendChild(svgAxeX)\n    }\n    if (this.axeY) {\n      // Définit la flèche\n      const defs = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'defs',\n      )\n      this.figure.svg.appendChild(defs)\n      const marker = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'marker',\n      )\n      marker.setAttribute('id', 'arrow')\n      marker.setAttribute('markerWidth', sizeOfArrow.toString()) // Augmenter la largeur\n      marker.setAttribute('markerHeight', sizeOfArrow.toString()) // Augmenter la hauteur\n      marker.setAttribute('refX', '0')\n      marker.setAttribute('refY', '6') // Ajuster la référence Y\n      marker.setAttribute('orient', 'auto')\n      marker.setAttribute('markerUnits', 'strokeWidth')\n      const path = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'path',\n      )\n      path.setAttribute('d', 'M0,0 L0,12 L18,6 z') // Augmenter les dimensions du chemin\n      marker.appendChild(path)\n      defs.appendChild(marker)\n\n      const svgAxeY = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgAxeY.setAttribute('x1', this.figure.xToSx(0).toString())\n      svgAxeY.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n      svgAxeY.setAttribute('x2', this.figure.xToSx(0).toString())\n      svgAxeY.setAttribute(\n        'y2',\n        (this.figure.yToSy(this.yMax) + sizeOfArrow).toString(),\n      )\n      svgAxeY.setAttribute('stroke', 'black')\n      svgAxeY.setAttribute('stroke-width', '1')\n      // Ajoute la flèche comme une mark\n      svgAxeY.setAttribute('marker-end', 'url(#arrow)')\n      // Thicks\n      for (let y = 0; y < this.yMax; y += this.stepY) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', (-this.thickHeight).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.thickHeight.toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      for (let y = 0; y >= this.yMin; y -= this.stepY) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', (-this.thickHeight).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.thickHeight.toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      this.groupSvg.appendChild(svgAxeY)\n    }\n    if (this.grid) {\n      const svgGrid = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'g',\n      )\n      svgGrid.setAttribute('stroke', 'gray')\n      svgGrid.setAttribute('stroke-opacity', '0.5')\n      this.groupSvg.appendChild(svgGrid)\n      //for (let x = 0; x <= this.xMax; x += this.stepX) {\n      for (\n        let x = this.xMin <= 0 ? 0 : this.xMin;\n        x <= this.xMax;\n        x += this.stepX\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(this.yMax).toString())\n        svgLine.setAttribute('stroke-width', this.strokeWidthGrid.toString())\n        svgGrid.appendChild(svgLine)\n      }\n      // for (let x = 0; x >= this.xMin; x -= this.stepX) {\n      for (\n        let x = this.xMax < 0 ? this.xMax : this.xMax < this.stepX ? 0 : -1;\n        x >= this.xMin;\n        x -= this.stepX\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(this.yMax).toString())\n        svgLine.setAttribute('stroke-width', '0.5')\n        svgGrid.appendChild(svgLine)\n      }\n      // for (let y = 0; y <= this.yMax; y += this.stepY) {\n      for (\n        let y = this.yMin <= 0 ? 0 : this.yMin;\n        y <= this.yMax;\n        y += this.stepY\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(this.xMax).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke-width', this.strokeWidthGrid.toString())\n        svgGrid.appendChild(svgLine)\n      }\n      // for (let y = 0; y >= this.yMin; y -= this.stepY) {\n      for (\n        let y = this.yMax < 0 ? this.yMax : this.yMax < this.stepY ? 0 : -1;\n        y >= this.yMin;\n        y -= this.stepY\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(this.xMax).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke-width', '0.5')\n        svgGrid.appendChild(svgLine)\n      }\n    }\n    if (this.subGrid) {\n      const svgSubGrid = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'g',\n      )\n      svgSubGrid.setAttribute('stroke', 'gray')\n      svgSubGrid.setAttribute('stroke-opacity', '0.2')\n      this.groupSvg.appendChild(svgSubGrid)\n      for (\n        let x = this.xMin;\n        x <= this.xMax;\n        x += this.stepX / this.subGridDivisions\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(this.yMax).toString())\n        svgLine.setAttribute('stroke-width', '0.25')\n        svgSubGrid.appendChild(svgLine)\n      }\n      for (\n        let y = this.yMin;\n        y <= this.yMax;\n        y += this.stepY / this.subGridDivisions\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(this.xMax).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke-width', '0.25')\n        svgSubGrid.appendChild(svgLine)\n      }\n    }\n    if (this.labelX) {\n      for (\n        let x = this.labelY ? this.stepX : 0;\n        x < this.xMax;\n        x += this.stepX\n      ) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'topCenter',\n            dyInPixels: -this.thickHeight - 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${x.toString()}$`,\n            x,\n            y: 0,\n          }),\n        )\n      }\n      for (let x = -this.stepX; x >= this.xMin; x -= this.stepX) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'topCenter',\n            dyInPixels: -this.thickHeight - 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${x.toString()}$`,\n            x,\n            y: 0,\n          }),\n        )\n      }\n    }\n    if (this.labelY) {\n      for (let y = this.stepY; y < this.yMax; y += this.stepY) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'middleRight',\n            dxInPixels: -this.thickHeight - 5,\n            dyInPixels: 0,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${y.toString()}$`,\n            x: 0,\n            y,\n          }),\n        )\n      }\n      for (let y = -this.stepY; y >= this.yMin; y -= this.stepY) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'middleRight',\n            dxInPixels: -this.thickHeight - 5,\n            dyInPixels: 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${y.toString()}$`,\n            x: 0,\n            y: y - 0.1,\n          }),\n        )\n      }\n      if (!this.labelX) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'middleRight',\n            dxInPixels: this.thickHeight + 10,\n            dyInPixels: 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: '$0$',\n            x: -1.2,\n            y: 0,\n          }),\n        )\n      }\n    }\n    this.groupSvg.appendChild(this.thicks)\n    this.setVisibilityColorThicknessAndDashed()\n    if (this.repereOij) {\n      const origin = this.figure.create('Point', {\n        x: 0,\n        y: 0,\n        isVisible: false,\n        isChild: true,\n      })\n      this.vectors = [\n        this.figure.create('Vector', {\n          origin,\n          x: 1,\n          y: 0,\n          color: orangeMathalea,\n          thickness: 3,\n          isChild: true,\n        }),\n        this.figure.create('Vector', {\n          origin,\n          x: 0,\n          y: 1,\n          color: orangeMathalea,\n          thickness: 3,\n          isChild: true,\n        }),\n      ]\n      this.labels.push(\n        this.figure.create('TextByPosition', {\n          text: '$O$',\n          x: -0.25,\n          y: -0.25,\n          anchor: 'topRight',\n          color: orangeMathalea,\n          fontSize: '8pt',\n          isChild: true,\n        }),\n        this.figure.create('TextByPosition', {\n          text: '$\\\\vec \\\\imath$',\n          x: 0.5,\n          y: -0.25,\n          anchor: 'topRight',\n          color: orangeMathalea,\n          fontSize: '8pt',\n          isChild: true,\n        }),\n        this.figure.create('TextByPosition', {\n          text: '$\\\\vec \\\\jmath$',\n          x: -0.5,\n          y: 0.25,\n          anchor: 'bottomRight',\n          color: orangeMathalea,\n          fontSize: '8pt',\n          isChild: true,\n        }),\n      )\n    }\n    this.update()\n  }\n\n  get latex(): string {\n    let result = `%${this.description}`\n    result += `\\n\\\\tkzInit[xmin=${this.xMin}, xmax=${this.xMax}, ymin=${this.yMin}, ymax=${this.yMax}]`\n    result += '\\n\\\\tkzGrid[thick]'\n    if (this.axeX && this.axeY) {\n      result += '\\n\\\\tkzAxeXY'\n    } else {\n      if (this.axeX) {\n        result += '\\n\\\\tkzAxeX'\n      }\n      if (this.axeY) {\n        result += '\\n\\\\tkzAxeY'\n      }\n    }\n    return result\n  }\n\n  get isVisible(): boolean {\n    return super.isVisible\n  }\n\n  set isVisible(value: boolean) {\n    super.isVisible = value\n    for (const label of this.labels) {\n      label.isVisible = value\n    }\n    for (const vector of this.vectors) {\n      vector.isVisible = value\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      xMin: this.xMin,\n      xMax: this.xMax,\n      yMin: this.yMin,\n      yMax: this.yMax,\n      axeX: this.axeX,\n      axeY: this.axeY,\n      grid: this.grid,\n      labelX: this.labelX,\n      labelY: this.labelY,\n      repereOij: this.repereOij,\n      stepX: this.stepX,\n      stepY: this.stepY,\n      subGrid: this.subGrid,\n      thickHeight: this.thickHeight,\n      thickThickness: this.thickThickness,\n    }\n  }\n}\n\nexport default Grid\n","import type Figure from '../../Figure'\nimport { round } from '../../lib/format'\nimport {\n  reflectOverLineCoord,\n  rotationCoord,\n  translateCoords,\n} from '../calculus/Coords'\nimport { distance, normalizeAngle } from '../calculus/utils'\nimport Element2D from '../Element2D'\nimport Grid from '../grid/Grid'\nimport type { OptionsElement2D, OptionsPointWithoutCoords } from '../interfaces'\nimport type Arc from '../lines/Arc'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport type Polygon from '../lines/Polygon'\nimport type Segment from '../lines/Segment'\nimport type TextByPoint from '../text/TextByPoint'\nimport type Vector from '../vector/Vector'\n\n/**\n * Trace un point et ajoute un éventuel label à partir de la propriété label\n */\nclass Point extends Element2D {\n  /** Couleur du label */\n  private _colorLabel: string\n  /** Nom que l'on affiche à côté du point */\n  private _label?: string\n  /** Croix, rond ou rien */\n  private _shape: '' | '|' | 'o' | 'x'\n  /** Taille du point, correspond à ce qui est ajouté dans les 4 directions pour faire la croix ou au rayon du rond */\n  private _sizeInPixels: number\n  protected _x: number\n  protected _y: number\n  /** Elément SVG pour rond */\n  private svgCircle!: SVGCircleElement\n  /** Affichage du nom du point */\n  elementTextLabel?: TextByPoint\n  /** Le point est-il librement déplaçable ? */\n  isFree: boolean\n  /** Décalage vertical pour le nom du point */\n  labelDxInPixels: number\n  /** Décalage horizontal pour le nom du point */\n  labelDyInPixels: number\n  /** Affichage ou non du label */\n  labelIsVisible: boolean\n  /** Elément SVG pour le premier trait de la croix */\n  protected svgLine1!: SVGLineElement\n  /** Elément SVG pour le deuxième trait de la croix */\n  protected svgLine2!: SVGLineElement\n  constructor(\n    figure: Figure,\n    {\n      color = figure.options.color,\n      colorLabel = figure.options.color,\n      id,\n      isChild,\n      isFree = true,\n      isSelectable,\n      isVisible = true,\n      label,\n      labelIsVisible = figure.options.labelIsVisible ?? true,\n      labelDxInPixels,\n      labelDyInPixels,\n      shape = figure.options.shape,\n      sizeInPixels,\n      thickness,\n      x = 0,\n      y = 0,\n    }: {\n      color?: string\n      colorLabel?: string\n      id?: string\n      isChild?: boolean\n      isFree?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      labelIsVisible?: boolean\n      shape?: '' | '|' | 'o' | 'x'\n      sizeInPixels?: number\n      thickness?: number\n      x?: number\n      y?: number\n    } & OptionsElement2D,\n  ) {\n    if (id === undefined) {\n      let cpt = 0\n      while (figure.elements.has(`point${cpt.toString()}`)) {\n        cpt++\n      }\n      id = `point${cpt.toString()}`\n    }\n    super(figure, { color, id, isChild, isSelectable, thickness })\n    this.type = 'Point'\n    this._shape = shape ?? 'x'\n    this._sizeInPixels = sizeInPixels ?? figure.options.pointSize\n    this._thickness = thickness ?? figure.options.thicknessForPoint\n    this.labelDxInPixels = labelDxInPixels ?? figure.options.labelDxInPixels\n    this.labelDyInPixels = labelDyInPixels ?? figure.options.labelDyInPixels\n    if (this.figure.snapGrid && this.isVisible) {\n      // Les points invisible comme ceux qui définissent la droite perpendiculaire n'ont pas besoin d'être sur la grille\n      this._x = Math.round(x / this.figure.dx) * this.figure.dx\n      this._y = Math.round(y / this.figure.dy) * this.figure.dy\n    } else {\n      this._x = x\n      this._y = y\n    }\n    this.label = label\n    this.labelIsVisible = labelIsVisible\n    this._colorLabel = colorLabel\n    this.isFree = isFree\n    this._isVisible = isVisible ?? true\n  }\n\n  private redraw(): void {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this.notify()\n    if (!Number.isFinite(this._x) || !Number.isFinite(this._y)) {\n      this.svgCircle?.remove()\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.elementTextLabel?.hide()\n      return\n    }\n    if (\n      this.elementTextLabel === undefined ||\n      this.elementTextLabel.x > this.figure.xMax ||\n      this.elementTextLabel.y > this.figure.yMax ||\n      this.elementTextLabel.x < this.figure.xMin ||\n      this.elementTextLabel.y < this.figure.yMin\n    ) {\n      this.elementTextLabel?.hide()\n    } else\n      this.isVisible && this.labelIsVisible && this.elementTextLabel?.show()\n    if (this._shape === 'x') {\n      const x1Svg = this.figure.xToSx(this._x) - this._sizeInPixels\n      const x2Svg = this.figure.xToSx(this._x) + this._sizeInPixels\n      const x3Svg = this.figure.xToSx(this._x) + this._sizeInPixels\n      const x4Svg = this.figure.xToSx(this._x) - this._sizeInPixels\n      const y1Svg = this.figure.yToSy(this._y) - this._sizeInPixels\n      const y2Svg = this.figure.yToSy(this._y) + this._sizeInPixels\n      const y3Svg = this.figure.yToSy(this._y) - this._sizeInPixels\n      const y4Svg = this.figure.yToSy(this._y) + this._sizeInPixels\n      this.svgLine1.setAttribute('x1', `${x1Svg}`)\n      this.svgLine1.setAttribute('y1', `${y1Svg}`)\n      this.svgLine1.setAttribute('x2', `${x2Svg}`)\n      this.svgLine1.setAttribute('y2', `${y2Svg}`)\n      this.svgLine2.setAttribute('x1', `${x3Svg}`)\n      this.svgLine2.setAttribute('y1', `${y3Svg}`)\n      this.svgLine2.setAttribute('x2', `${x4Svg}`)\n      this.svgLine2.setAttribute('y2', `${y4Svg}`)\n      this.svgCircle?.remove()\n      this.groupSvg.appendChild(this.svgLine1)\n      this.groupSvg.appendChild(this.svgLine2)\n    } else if (this._shape === 'o') {\n      const xSvg = this.figure.xToSx(this._x)\n      const ySvg = this.figure.yToSy(this._y)\n      const rSvg = this._sizeInPixels\n      this.svgCircle.setAttribute('cx', `${xSvg}`)\n      this.svgCircle.setAttribute('cy', `${ySvg}`)\n      this.svgCircle.setAttribute('r', `${rSvg}`)\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.groupSvg.appendChild(this.svgCircle)\n    } else if (this._shape === '') {\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.svgCircle?.remove()\n    }\n  }\n\n  createSegmentToAxeX(): Segment {\n    const M = this.figure.create('PointByProjectionOnAxisX', {\n      isVisible: false,\n      origin: this,\n    })\n    return this.figure.create('Segment', {\n      isDashed: true,\n      point1: this,\n      point2: M,\n    })\n  }\n\n  createSegmentToAxeY(): Segment {\n    const M = this.figure.create('PointByProjectionOnAxisY', {\n      isVisible: false,\n      origin: this,\n    })\n    return this.figure.create('Segment', {\n      isDashed: true,\n      point1: this,\n      point2: M,\n    })\n  }\n\n  dilate(\n    center: Point,\n    factor: number,\n    options?: OptionsPointWithoutCoords,\n  ): Point {\n    const dilated = this.figure.create('Point', options)\n    dilated.transformation = { center, factor, origin: this, type: 'dilate' }\n    this.subscribe(dilated)\n    center.subscribe(dilated)\n    dilated.isFree = false\n    dilated.update()\n    return dilated\n  }\n\n  /** Distance entre un point et le pointeur de la souris exprimée dans les unités du repère */\n  distancePointer(pointerX: number, pointerY: number): number {\n    if (this._x === undefined || this._y === undefined)\n      return Number.POSITIVE_INFINITY\n    return Math.hypot(\n      (this._x - pointerX) * this.figure.scale * this.figure.xScale,\n      (this._y - pointerY) * this.figure.scale * this.figure.yScale,\n    )\n  }\n\n  remove(): void {\n    // Nettoyer le label avant de supprimer le point pour éviter les orphelins\n    if (this.elementTextLabel) {\n      this.elementTextLabel.remove()\n      // @ts-expect-error - Permettre de nullifier pour le nettoyage\n      this.elementTextLabel = null\n    }\n    super.remove()\n  }\n\n  draw(): void {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    // Les deux traits qui forment la croix du point\n    this.svgLine1 = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.svgLine2 = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    // Le cercle, si le point est représenté par un rond\n    this.svgCircle = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'circle',\n    )\n    // Le groupe parent de la représentation du point\n    this.groupSvg = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    this.setVisibilityColorThicknessAndDashed()\n    if (this.isVisible) {\n      this.shape = this._shape\n      this.label = this._label\n    }\n    this.update()\n  }\n\n  isInArc(arc: Arc): boolean {\n    const [x, y] = [this.x, this.y]\n    const distanceToCenter = distance(this, arc.center)\n    const radius = distance(arc.center, arc.start)\n    if (distanceToCenter > radius) return false\n    const angle = normalizeAngle(Math.atan2(y - arc.center.y, x - arc.center.x))\n    const angleStart = normalizeAngle(\n      Math.atan2(arc.start.y - arc.center.y, arc.start.x - arc.center.x),\n    )\n    const angleEnd = normalizeAngle(\n      angleStart + (arc.dynamicAngle.value * Math.PI) / 180,\n    )\n    if (angleStart < angleEnd) {\n      return angleStart < angle && angle < angleEnd\n    }\n    return angleStart < angle || angle < angleEnd\n  }\n\n  isInCircle(circle: Circle): boolean {\n    return (\n      (this.x - circle.center.x) ** 2 + (this.y - circle.center.y) ** 2 <=\n      circle.radius ** 2\n    )\n  }\n\n  isInPolygon(polygon: Polygon): boolean {\n    const x = this.x\n    const y = this.y\n    let result = false\n    for (let i = 0; i < polygon.points.length; i++) {\n      const point1 = polygon.points.at(i % polygon.points.length) as Point\n      const point2 = polygon.points.at((i + 1) % polygon.points.length) as Point\n      if (\n        point1.y > y !== point2.y > y &&\n        x <\n          ((point2.x - point1.x) * (y - point1.y)) / (point2.y - point1.y) +\n            point1.x\n      ) {\n        result = !result\n      }\n    }\n    return result\n  }\n\n  isOnline(line: Line): boolean {\n    const [a, b, c] = line.equation\n    let result = Math.abs(a * this.x + b * this.y + c) < 10 ** -6\n    if (\n      line.type === 'Segment' &&\n      (this.x < Math.min(line.point1.x, line.point2.x) ||\n        this.x > Math.max(line.point1.x, line.point2.x) ||\n        this.y < Math.min(line.point1.y, line.point2.y) ||\n        this.y > Math.max(line.point1.y, line.point2.y))\n    ) {\n      result = false\n    }\n    if (line.type === 'Ray') {\n      // Direction gauche droite\n      if (line.point1.x < line.point2.x && this.x < line.point1.x) {\n        result = false\n      }\n      // Direction droite gauche\n      if (line.point1.x > line.point2.x && this.x > line.point1.x) {\n        result = false\n      }\n      // Direction bas haut\n      if (line.point1.y < line.point2.y && this.y < line.point1.y) {\n        result = false\n      }\n      // Direction haut bas\n      if (line.point1.y > line.point2.y && this.y > line.point1.y) {\n        result = false\n      }\n    }\n    return result\n  }\n\n  jsonOptions(): object {\n    return {\n      ...super.jsonOptions(),\n      colorLabel: this.colorLabel,\n      label: this.label,\n      labelDxInPixels: this.labelDxInPixels,\n      labelDyInPixels: this.labelDyInPixels,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n      x: round(this.x),\n      y: round(this.y),\n    }\n  }\n\n  /** Déplace le point */\n  moveTo(x: number, y: number): void {\n    this.x = x\n    this.y = y\n  }\n\n  reflect(center: Point, options?: OptionsPointWithoutCoords): Point {\n    const reflected = this.figure.create('Point', options)\n    reflected.transformation = { center, origin: this, type: 'reflect' }\n    this.subscribe(reflected)\n    center.subscribe(reflected)\n    reflected.isFree = false\n    reflected.update()\n    return reflected\n  }\n\n  reflectOverLine(line: Segment, options?: OptionsPointWithoutCoords): Point {\n    const reflected = this.figure.create('Point', options)\n    reflected.transformation = { line, origin: this, type: 'reflectOverLine' }\n    this.subscribe(reflected)\n    line.subscribe(reflected)\n    reflected.isFree = false\n    reflected.update()\n    return reflected\n  }\n\n  rotate(\n    center: Point,\n    angle: number,\n    options?: OptionsPointWithoutCoords,\n  ): Point {\n    const rotated = this.figure.create('Point', options)\n    rotated.transformation = { angle, center, origin: this, type: 'rotation' }\n    this.subscribe(rotated)\n    center.subscribe(rotated)\n    rotated.isFree = false\n    rotated.update()\n    return rotated\n  }\n\n  toJSON(): object {\n    return this.jsonOptions()\n  }\n\n  translate(\n    point1: Point,\n    point2: Point,\n    options?: OptionsPointWithoutCoords,\n  ): Point {\n    const translated = this.figure.create('Point', options)\n    translated.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    this.subscribe(translated)\n    point1.subscribe(translated)\n    point2.subscribe(translated)\n    translated.isFree = false\n    translated.update()\n    return translated\n  }\n\n  translateVector(vector: Vector, options?: OptionsPointWithoutCoords): Point {\n    const translated = this.figure.create('Point', options)\n    translated.transformation = {\n      origin: this,\n      vector,\n      type: 'translationVector',\n    }\n    this.subscribe(translated)\n    vector.subscribe(translated)\n    translated.isFree = false\n    translated.update()\n    return translated\n  }\n\n  update(): void {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    if (this.transformation?.type === 'reflect') {\n      this._x =\n        2 * this.transformation.center.x -\n        (this.transformation.origin as Point).x\n      this._y =\n        2 * this.transformation.center.y -\n        (this.transformation.origin as Point).y\n    } else if (this.transformation?.type === 'dilate') {\n      this._x =\n        this.transformation.center.x +\n        this.transformation.factor *\n          ((this.transformation.origin as Point).x -\n            this.transformation.center.x)\n      this._y =\n        this.transformation.center.y +\n        this.transformation.factor *\n          ((this.transformation.origin as Point).y -\n            this.transformation.center.y)\n    } else if (this.transformation?.type === 'rotation') {\n      const { x, y } = rotationCoord(\n        this.transformation.origin as Point,\n        this.transformation.center,\n        this.transformation.angle,\n      )\n      this._x = x\n      this._y = y\n    } else if (this.transformation?.type === 'reflectOverLine') {\n      const { x, y } = reflectOverLineCoord(\n        this.transformation.origin as Point,\n        this.transformation.line,\n      )\n      this._x = x\n      this._y = y\n    } else if (this.transformation?.type === 'translation') {\n      const { x, y } = translateCoords(\n        this.transformation.origin as Point,\n        this.transformation.point1,\n        this.transformation.point2,\n      )\n      this._x = x\n      this._y = y\n    } else if (this.transformation?.type === 'translationVector') {\n      const x = this.transformation.origin.x + this.transformation.vector.x\n      const y = this.transformation.origin.y + this.transformation.vector.y\n      this._x = x\n      this._y = y\n    }\n\n    this.redraw()\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this._color = color\n    if (this.svgCircle !== undefined) {\n      this.svgCircle.setAttribute('fill', color)\n      this.svgCircle.setAttribute('stroke', color)\n    }\n    if (this.svgLine1 !== undefined) {\n      this.svgLine1.setAttribute('stroke', color)\n    }\n    if (this.svgLine2 !== undefined) {\n      this.svgLine2.setAttribute('stroke', color)\n    }\n  }\n\n  get colorLabel(): string {\n    return this._colorLabel\n  }\n\n  set colorLabel(color: string) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this._colorLabel = color\n    if (this.elementTextLabel !== undefined) this.elementTextLabel.color = color\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la symétrie d'axe $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la translation qui transforme $${(this.transformation.point1 as Point).notation}$ en $${(this.transformation.point2 as Point).notation}$`\n    }\n    if (this.transformation?.type === 'translationVector') {\n      return `Point $${this.label}$ image\n      du point $${(this.transformation.origin as Point).notation}$\n      par la translation de vecteur $${this.transformation.vector.notation}$\n      `\n    }\n    if (this.figure.options.pointDescriptionWithCoordinates) {\n      return `Point $${this.label}$ libre de coordonnées $(${round(this.x, 2).toString().replace('.', ',')}\\\\;;\\\\;${round(this.y, 2).toString().replace('.', ',')})$`\n    }\n    return `Point $${this.label}$`\n  }\n\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  set isVisible(isVisible) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this._isVisible = isVisible\n    this.isVisible\n      ? this.elementTextLabel?.show()\n      : this.elementTextLabel?.hide()\n    if (!this.isVisible) this.labelIsVisible = false\n    super.isVisible = isVisible\n  }\n\n  get label(): string {\n    if (this._label === undefined) return ''\n    return this._label\n  }\n\n  set label(label: string | undefined) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this._label = label\n    if (!this.isVisible || !this.labelIsVisible) {\n      this.elementTextLabel?.hide()\n      return\n    }\n    if (label !== undefined && label.length > 0) {\n      if (this.elementTextLabel === undefined) {\n        this.elementTextLabel = this.figure.create('TextByPoint', {\n          color: this.colorLabel,\n          dxInPixels: this.labelDxInPixels * this.figure.scale,\n          dyInPixels: this.labelDyInPixels * this.figure.scale,\n          id: `${this.id}_label`,\n          isChild: true,\n          isSelectable: true,\n          point: this,\n          text: `$${label}$`,\n        })\n      } else {\n        this.elementTextLabel.text = `$${label}$`\n        this.elementTextLabel.color = this._colorLabel\n      }\n    }\n  }\n\n  get latex(): string {\n    if (this.shape === '') return ''\n    let result = `% Point ${this.label}`\n    // todo : Mgu la taille de la croix est fixe qqlesoit le scale, sinon elle peu être invisible si scale=0.5 => il faudrait une option\n    result += `\\n\\\\draw${this.latexOptions} plot[mark=${this.shape}, mark size=${0.15 / this.figure.scale}cm] coordinates{(${this.x},${this.y})};`\n    return result\n  }\n\n  get notation(): string {\n    if (this.label !== '') return this.label\n    return this.id\n  }\n\n  get shape(): '' | '|' | 'o' | 'x' {\n    return this._shape\n  }\n\n  set shape(shape) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this._shape = shape\n    if (this._shape === 'x') {\n      this.figure.svg.appendChild(this.groupSvg)\n      this.svgCircle?.remove()\n      this.groupSvg.appendChild(this.svgLine1)\n      this.groupSvg.appendChild(this.svgLine2)\n    } else if (this._shape === 'o') {\n      this.figure.svg.appendChild(this.groupSvg)\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.groupSvg.appendChild(this.svgCircle)\n    } else if (this._shape === '') {\n      this.groupSvg?.remove()\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.svgCircle?.remove()\n    }\n    this.update()\n  }\n\n  get sizeInPixels(): number {\n    return this._sizeInPixels\n  }\n\n  set sizeInPixels(size) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    this._sizeInPixels = size\n    this.update()\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    if (this.figure.snapGrid && this.isVisible) {\n      this._x = Math.round(x / this.figure.dx) * this.figure.dx\n      if (!this.figure.options.gridWithTwoPointsOnSamePosition) {\n        this.goToClosestFreePosition()\n      }\n    } else {\n      this._x = x\n    }\n    this.update()\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(y) {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    if (this.figure.snapGrid && this.isVisible) {\n      this._y = Math.round(y / this.figure.dy) * this.figure.dy\n      if (!this.figure.options.gridWithTwoPointsOnSamePosition) {\n        this.goToClosestFreePosition()\n      }\n    } else {\n      this._y = y\n    }\n    this.update()\n  }\n\n  /**\n   *\n   * MGu cette fonction est compliquée, et je trouve son comportement non intuitif...\n   * Je l'ai modifié pour empêcher que les points sortent de la grille..\n   * En revanche, si on tombe sur un point existant, c'est un peu au bonheur la chance...\n   * et ça, c'est risque de bug...\n   *\n   */\n  goToClosestFreePosition(): void {\n    if (!this.figure) return // Pendant la suppression, la figure peut être undefined\n    const MAX_DISTANCE = 10\n    const { points } = this.figure.checkCoords({ x: this._x, y: this._y })\n    const grid = [...this.figure.elements.values()].find((ele) => {\n      return ele instanceof Grid\n    })\n    const inFigure =\n      this._x >= this.figure.xMin &&\n      this._x <= this.figure.xMax &&\n      this._y >= this.figure.yMin &&\n      this._y <= this.figure.yMax\n    /*  point in grid only*/\n    const inGrid =\n      grid !== undefined &&\n      this._x <= grid.xMax &&\n      this._x >= grid.xMin &&\n      this._y <= grid.yMax &&\n      this._y >= grid.yMin\n    if (points.length === 1 && inFigure && (!grid || inGrid)) {\n      return\n    }\n    for (let distance = 1; distance <= MAX_DISTANCE; distance++) {\n      for (const dy of [0, distance, -distance]) {\n        for (const dx of [0, distance, -distance]) {\n          // [5 3 4]\n          // [2 x 1] Indice de recherche\n          // [8 6 7]\n          if (dx === 0 && dy === 0) {\n            continue // point de départ\n          }\n          const newX = this._x + dx * this.figure.dx // il faut utiliser les pas de la figure\n          const newY = this._y + dy * this.figure.dy // il faut utiliser les pas de la figure\n          const pointNotInFigure =\n            newX < this.figure.xMin ||\n            newX > this.figure.xMax ||\n            (newY < this.figure.yMin && newY > this.figure.yMax)\n          if (pointNotInFigure) {\n            // le point n'est pas dans la figure\n            continue\n          }\n          const pointNotInGrid =\n            grid !== undefined &&\n            (newX < grid.xMin ||\n              newX > grid.xMax ||\n              (newY < grid.yMin && newY > grid.yMax))\n          if (pointNotInGrid) {\n            // le point n'est pas dans la grille\n            continue\n          }\n          if (this.checkAndMove(dx * this.figure.dx, dy * this.figure.dy))\n            // trouver un point disponible...\n            return\n        }\n      }\n    }\n  }\n\n  private checkAndMove(dx: number, dy: number): boolean {\n    const newX = this._x + dx\n    const newY = this._y + dy\n    const { points } = this.figure.checkCoords({ x: newX, y: newY })\n    if (points.length === 0) {\n      this._x = newX\n      this._y = newY\n      return true\n    }\n    return false\n  }\n}\n\nexport default Point\n","import type Figure from '../../Figure'\nimport { intersectionLLCoord } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Line from '../lines/Line'\nimport type Segment from '../lines/Segment'\nimport Point from './Point'\n\n/**\n * Créé un point à l'intersection de deux droites (demi-droites ou segments)\n * Masque le point et ses descendances s'il n'y a pas d'intersection\n */\nexport class PointIntersectionLL extends Point {\n  /** Première droite */\n  line1: Segment\n  /** Deuxième droite */\n  line2: Segment\n  constructor(\n    figure: Figure,\n    {\n      line1,\n      line2,\n      ...options\n    }: {\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      line1: Line\n      line2: Line\n      shape?: '' | '|' | 'o' | 'x'\n      sizeInPixels?: number\n    } & OptionsElement2D,\n  ) {\n    const coords = intersectionLLCoord(line1, line2)\n    super(figure, { isFree: false, x: coords.x, y: coords.y, ...options })\n    this.type = 'PointIntersectionLL'\n    this.line1 = line1\n    this.line2 = line2\n    this.line1.subscribe(this)\n    this.line2.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      ...super.jsonOptions(),\n      idLine1: this.line1.id,\n      idLine2: this.line2.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    if (this.line1 === undefined || this.line2 === undefined) return\n    try {\n      const coords = intersectionLLCoord(this.line1, this.line2)\n      this._x = coords.x\n      this._y = coords.y\n      super.update()\n    } catch (error) {\n      console.error('Erreur dans PointIntersectionLL.update()', error)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    const line1Name = this.line1.notation\n    const line2Name = this.line2.notation\n    return `Point $${this.notation}$ à l'intersection de la droite $${line1Name}$ et de la droite $${line2Name}$`\n  }\n}\n\nexport default PointIntersectionLL\n","import type Line from '../elements/lines/Line'\nimport PointIntersectionLL from '../elements/points/PointIntersectionLL'\nimport type Figure from '../Figure'\n\n/**\n * Vérifie si un point appartient à une intersection de deux lignes (droites, demi-droites ou segments)\n * @param {Figure} figure // La figure\n * @param {string} labelPt // Nom du point\n * @param {string[]|string} nameLine1 // Nom de la ligne1 ou bien tableau contenant les noms de la ligne1\n * @param {string[]|string} nameLine2 // Nom de la ligne2 ou bien tableau contenant les noms de la ligne2\n * @example Voir exemples plus adaptés dans Figure.ts\n * @author Eric Elter\n * @returns {{ isValid: boolean, message: string }}\n */\nexport default function checkPointOnIntersectionLL({\n  figure,\n  labelPt,\n  nameLine1,\n  nameLine2,\n}: {\n  figure: Figure\n  labelPt: string\n  nameLine1: string[] | string\n  nameLine2: string[] | string\n}): { isValid: boolean; message: string } {\n  let points = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt,\n  )\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur la figure.`,\n    }\n  if (points.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt} sur la figure.`,\n    }\n\n  const lines = [...figure.elements.values()].filter(\n    (e) =>\n      e.type.includes('Line') ||\n      e.type.includes('Segment') ||\n      e.type.includes('Ray'),\n  ) as Line[]\n  let lines1: Line[]\n  let lines2: Line[]\n\n  const nomLigne1 = Array.isArray(nameLine1) ? nameLine1[0] : nameLine1\n  const nomLigne2 = Array.isArray(nameLine2) ? nameLine2[0] : nameLine2\n\n  if (lines.length !== 0) {\n    lines1 = lines.filter((e) => nameLine1.includes(e.notation))\n    if (lines1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomLigne1} n'existe pas sur la figure.`,\n      }\n    lines2 = lines.filter((e) => nameLine2.includes(e.notation))\n    if (lines2.length === 0)\n      return {\n        isValid: false,\n        message: `${nomLigne2} n'existe pas sur la figure.`,\n      }\n  }\n\n  points = [...figure.elements.values()].filter(\n    (e) =>\n      e instanceof PointIntersectionLL &&\n      e.type !== 'pointer' &&\n      e.type.includes('PointIntersectionLL') &&\n      'label' in e &&\n      e.label === labelPt &&\n      lines1.some((line) => e.line1 === line || e.line2 === line) &&\n      lines2.some((line) => e.line1 === line || e.line2 === line),\n  )\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Le point ${labelPt} n'est pas à l'intersection de ${nomLigne1} et de ${nomLigne2}.`,\n    }\n  return {\n    isValid: true,\n    message: `Le point ${labelPt} est à l'intersection de ${nomLigne1} et de ${nomLigne2}.`,\n  }\n}\n","import type Figure from '../../Figure'\nimport { distance, orthogonalProjectionCoord } from '../calculus/Coords'\nimport { defaultMaxSlope, defaultMinSlope } from '../defaultValues'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Segment from './Segment'\n\n/**\n * Trace une droite\n */\nclass Line extends Segment {\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: {\n      borderSize?: number\n      point1: Point\n      point2: Point\n      shape?: '-|' | '' | '|-' | '|-|'\n    } & OptionsElement2D,\n  ) {\n    super(figure, { point1, point2, ...options })\n    this.type = 'Line'\n  }\n\n  distancePointer(x: number, y: number): number {\n    const pointerCoords = { x, y }\n    const projectionCoords = orthogonalProjectionCoord(pointerCoords, this)\n    return distance(pointerCoords, projectionCoords)\n  }\n\n  update(): void {\n    const [x1Svg, y1Svg, x2Svg, y2Svg] = getCoordsOut(this.point1, this.point2)\n    if (\n      Number.isNaN(x1Svg) ||\n      Number.isNaN(x2Svg) ||\n      Number.isNaN(y1Svg) ||\n      Number.isNaN(y1Svg)\n    ) {\n      this.svgLine.removeAttribute('x1')\n      this.svgLine.removeAttribute('x2')\n      this.svgLine.removeAttribute('y1')\n      this.svgLine.removeAttribute('y2')\n    } else {\n      this.svgLine.setAttribute('x1', `${this.figure.xToSx(x1Svg)}`)\n      this.svgLine.setAttribute('y1', `${this.figure.yToSy(y1Svg)}`)\n      this.svgLine.setAttribute('x2', `${this.figure.xToSx(x2Svg)}`)\n      this.svgLine.setAttribute('y2', `${this.figure.yToSy(y2Svg)}`)\n    }\n    if (this.shape?.at(0) === '|') {\n      this.drawBorder1()\n    } else {\n      this.svgBorder1?.remove()\n    }\n    if (this.shape?.at(-1) === '|') {\n      this.drawBorder2()\n    } else {\n      this.svgBorder2?.remove()\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    if (this.point1.label !== '' || this.point2.label !== '') {\n      return `Droite ${this.notation}`\n    }\n    const lines = [...this.figure.elements.values()].filter(\n      (element) => element instanceof Line,\n    ) as Line[]\n    const index = lines.indexOf(this)\n    return `Droite n°${index + 1}`\n  }\n\n  get latex(): string {\n    const [x1, y1, x2, y2] = getCoordsOut(this.point1, this.point2)\n    let result = `%${this.description}`\n    result += `\\n\\\\draw${this.latexOptions} (${x1}, ${y1}) -- (${x2}, ${y2});`\n    return result\n  }\n\n  get notation(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `(${point1Name}${point2Name})`\n  }\n}\n\n/** Renvoie [x1, y1, x2, y2] les coordonnées des extrémités du tracé */\nexport function getCoordsOut(\n  A: Point,\n  B: Point,\n): [number, number, number, number] {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined ||\n    Number.isNaN(A.x) ||\n    Number.isNaN(A.y) ||\n    Number.isNaN(B.x) ||\n    Number.isNaN(B.y)\n  )\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n\n  try {\n    const figure = A.figure\n    let pente = defaultMaxSlope\n    if (B.x !== A.x) {\n      pente = (B.y - A.y) / (B.x - A.x)\n    }\n\n    if (Math.abs(pente) >= defaultMaxSlope)\n      return [A.x, figure.yMax, A.x, figure.yMin]\n    if (Math.abs(pente) < defaultMinSlope)\n      return [figure.xMin, A.y, figure.xMax, A.y]\n\n    let xOutLeft: number = figure.xMin\n    let yOutLeft: number = A.y + (figure.xMin - A.x) * pente\n\n    if (yOutLeft > figure.yMax) {\n      yOutLeft = figure.yMax\n      xOutLeft = A.x + (figure.yMax - A.y) / pente\n    } else if (yOutLeft < figure.yMin) {\n      yOutLeft = figure.yMin\n      xOutLeft = A.x + (figure.yMin - A.y) / pente\n    }\n\n    let xOutRight: number = figure.xMax\n    let yOutRight: number = A.y + (figure.xMax - A.x) * pente\n\n    if (yOutRight > figure.yMax) {\n      yOutRight = figure.yMax\n      xOutRight = A.x + (figure.yMax - A.y) / pente\n    } else if (yOutRight < figure.yMin) {\n      yOutRight = figure.yMin\n      xOutRight = A.x + (figure.yMin - A.y) / pente\n    }\n    return [xOutLeft, yOutLeft, xOutRight, yOutRight]\n  } catch (error) {\n    console.error('Erreur dans Line.getCoordsOut', error)\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport default Line\n","import type Figure from '../../Figure'\nimport { distance } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Segment from './Segment'\n\n/**\n * Trace une demi-droite d'origine point1 et qui passe par point 2\n */\nclass Ray extends Segment {\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: {\n      borderSize?: number\n      point1: Point\n      point2: Point\n      shape?: '-|' | '' | '|-' | '|-|'\n    } & OptionsElement2D,\n  ) {\n    super(figure, { point1, point2, ...options })\n    this.type = 'Ray'\n  }\n\n  distancePointer(x: number, y: number): number {\n    const pointerCoords = { x, y }\n    // Calculer la direction de la demi-droite\n    const rayDirection = {\n      x: this.point2.x - this.point1.x,\n      y: this.point2.y - this.point1.y,\n    }\n    const rayLength = Math.hypot(rayDirection.x, rayDirection.y)\n    // Si la longueur du rayon est nulle, la demi-droite se réduit à un point, donc on renvoie la distance entre ce point et le pointeur\n    if (rayLength === 0) {\n      return distance(pointerCoords, this.point1)\n    }\n    // Normaliser la direction du rayon (la rendre unitaire)\n    const normalizedRayDirection = {\n      x: rayDirection.x / rayLength,\n      y: rayDirection.y / rayLength,\n    }\n    // Trouver la projection du point sur la demi-droite\n    const projection =\n      (normalizedRayDirection.x * (x - this.point1.x) +\n        normalizedRayDirection.y * (y - this.point1.y)) /\n      rayLength\n    // La distance minimale est la distance au point d'origine si la projection est négative\n    if (projection < 0) {\n      return distance(pointerCoords, this.point1)\n    }\n    // Calculer les coordonnées du point le plus proche sur la demi-droite\n    const closestX = this.point1.x + rayDirection.x * projection\n    const closestY = this.point1.y + rayDirection.y * projection\n    const closest = { x: closestX, y: closestY }\n    return distance(pointerCoords, closest)\n  }\n\n  update(): void {\n    const [x1Svg, y1Svg, x2Svg, y2Svg] = getRayCoordsOut(\n      this.point1,\n      this.point2,\n    )\n    const [x1Screen, y1Screen, x2Screen, y2Screen] = [\n      this.figure.xToSx(x1Svg),\n      this.figure.yToSy(y1Svg),\n      this.figure.xToSx(x2Svg),\n      this.figure.yToSy(y2Svg),\n    ]\n    if (\n      !Number.isFinite(x1Screen) ||\n      !Number.isFinite(x2Screen) ||\n      !Number.isFinite(y1Screen) ||\n      !Number.isFinite(y2Screen)\n    ) {\n      this.svgLine.removeAttribute('x1')\n      this.svgLine.removeAttribute('x2')\n      this.svgLine.removeAttribute('y1')\n      this.svgLine.removeAttribute('y2')\n    } else {\n      this.svgLine.setAttribute('x1', `${x1Screen}`)\n      this.svgLine.setAttribute('y1', `${y1Screen}`)\n      this.svgLine.setAttribute('x2', `${x2Screen}`)\n      this.svgLine.setAttribute('y2', `${y2Screen}`)\n    }\n    if (this.shape?.at(0) === '|') {\n      this.drawBorder1()\n    } else {\n      this.svgBorder1?.remove()\n    }\n    if (this.shape?.at(-1) === '|') {\n      this.drawBorder2()\n    } else {\n      this.svgBorder2?.remove()\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    return `Demi-droite ${this.notation}`\n  }\n\n  get latex(): string {\n    const [x1, y1, x2, y2] = getRayCoordsOut(this.point1, this.point2)\n    let result = `%${this.description}`\n    result += `\\n\\\\draw${this.latexOptions} (${x1}, ${y1}) -- (${x2}, ${y2});`\n    return result\n  }\n\n  get notation(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `[${point1Name}${point2Name})`\n  }\n}\nfunction getRayCoordsOut(A: Point, B: Point): [number, number, number, number] {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined ||\n    Number.isNaN(A.x) ||\n    Number.isNaN(A.y) ||\n    Number.isNaN(B.x) ||\n    Number.isNaN(B.y)\n  )\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  try {\n    const parentFigure = A.figure\n    let pente = Number.POSITIVE_INFINITY\n    if (B.x !== A.x) {\n      pente = (B.y - A.y) / (B.x - A.x)\n    }\n    if (pente === Number.POSITIVE_INFINITY) {\n      if (A.y > B.y) {\n        return [A.x, A.y, A.x, parentFigure.yMin] // Si la droite est verticale on prend l'abscisse de A et le bon bord en ordonnée\n      }\n      return [A.x, A.y, A.x, parentFigure.yMax] // Ici on sort par en haut\n    }\n    if (Math.abs(pente) < 10 ** -4) {\n      if (A.x > B.x) {\n        return [A.x, A.y, parentFigure.xMin, A.y]\n      }\n      return [A.x, A.y, parentFigure.xMax, A.y]\n    }\n    let xOutLeft: number\n    let yOutLeft: number\n    let n = 0\n    if (B.x > A.x) {\n      while (true) {\n        xOutLeft = A.x + n\n        yOutLeft = A.y + n * pente\n        n++\n        if (\n          xOutLeft > parentFigure.xMax + 1 ||\n          yOutLeft > parentFigure.yMax + 1 ||\n          yOutLeft < parentFigure.yMin - 1\n        )\n          break\n      }\n      return [A.x, A.y, xOutLeft, yOutLeft]\n    }\n    while (true) {\n      xOutLeft = A.x - n\n      yOutLeft = A.y - n * pente\n      n++\n      if (\n        xOutLeft < parentFigure.xMin - 1 ||\n        yOutLeft > parentFigure.yMax + 1 ||\n        yOutLeft < parentFigure.yMin - 1\n      )\n        break\n    }\n    return [A.x, A.y, xOutLeft, yOutLeft]\n  } catch (error) {\n    console.error('Erreur dans Ray.getRayCoordsOut', error)\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport default Ray\n","import type Figure from '../../Figure'\n\nimport { similitudeCoord } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsPointBy } from '../interfaces'\nimport Line from '../lines/Line'\nimport Ray from '../lines/Ray'\nimport Segment from '../lines/Segment'\nimport Point from './Point'\n\nclass PointOnLine extends Point {\n  line: Line\n  center: Point\n  origin: Point\n  k: number\n  constructor(\n    figure: Figure,\n    {\n      k,\n      line,\n      shape = '|',\n      ...options\n    }: { k?: number; line: Line } & OptionsPointBy & OptionsElement2D,\n  ) {\n    if (k === undefined) k = Math.random()\n    if (shape === undefined) shape = '|'\n    super(figure, {\n      x: 99,\n      y: 99,\n      shape,\n      ...options,\n    })\n    this.center = line.point1\n    this.origin = line.point2\n    this.k = k\n    this.type = 'PointOnLine'\n    this.line = line\n    this.isFree = true\n    this.line.subscribe(this)\n  }\n\n  /** Déplace le point */\n  moveTo(x: number, y: number): void {\n    // Lieu du clic\n    const origin = { x, y }\n    // On calcule le nouveau coefficient de l'homothétie par rapport au projeté du lieu où on clic\n    try {\n      const [a, b, c] = this.line.equation\n      const k = 1 / (a * a + b * b)\n      let x: number | undefined\n      let y: number | undefined\n      if (a === 0) {\n        x = origin.x\n        y = -c / b\n      } else if (b === 0) {\n        y = origin.y\n        x = -c / a\n      } else {\n        if (origin.x === undefined || origin.y === undefined) {\n          x = Number.NaN\n          y = Number.NaN\n        } else {\n          x = k * (b * b * origin.x - a * b * origin.y - a * c)\n          y =\n            k * (-a * b * origin.x + a * a * origin.y + (a * a * c) / b) - c / b\n        }\n      }\n      if (this.line instanceof Segment) {\n        const line = this.line\n        if (this.line instanceof Line) {\n          let isPositive = 1\n          if (this.line.point1.x < this.line.point2.x && x < this.line.point1.x)\n            isPositive = -1\n          else if (\n            this.line.point1.x > this.line.point2.x &&\n            x > this.line.point1.x\n          )\n            isPositive = -1\n          else if (\n            this.line.point1.y < this.line.point2.y &&\n            y < this.line.point1.y\n          )\n            isPositive = -1\n          else if (\n            this.line.point1.y > this.line.point2.y &&\n            y > this.line.point1.y\n          )\n            isPositive = -1\n          this.k =\n            (isPositive *\n              Math.hypot(x - this.line.point1.x, y - this.line.point1.y)) /\n            Math.hypot(\n              this.line.point2.x - this.line.point1.x,\n              this.line.point2.y - this.line.point1.y,\n            )\n          //\n        } else if (line instanceof Ray) {\n          const ray = this.line as Ray\n          if (ray.point1.x < ray.point2.x && x < ray.point1.x) this.k = 0\n          else if (ray.point1.x > ray.point2.x && x > ray.point1.x) this.k = 0\n          else if (ray.point1.y < ray.point2.y && y < ray.point1.y) this.k = 0\n          else if (ray.point1.y > ray.point2.y && y > ray.point1.y) this.k = 0\n          else\n            this.k =\n              Math.hypot(x - ray.point1.x, y - ray.point1.y) /\n              Math.hypot(\n                ray.point2.x - ray.point1.x,\n                ray.point2.y - ray.point1.y,\n              )\n        } else if (line instanceof Segment) {\n          const segment = this.line as Segment\n          if (x < Math.min(segment.point1.x, segment.point2.x))\n            this.k = segment.point1.x < segment.point2.x ? 0 : 1\n          else if (x > Math.max(segment.point1.x, segment.point2.x))\n            this.k = segment.point1.x < segment.point2.x ? 1 : 0\n          else if (y < Math.min(segment.point1.y, segment.point2.y))\n            this.k = segment.point1.y < segment.point2.y ? 0 : 1\n          else if (y > Math.max(segment.point1.y, segment.point2.y))\n            this.k = segment.point1.y < segment.point2.y ? 1 : 0\n          else\n            this.k =\n              Math.hypot(x - segment.point1.x, y - segment.point1.y) /\n              Math.hypot(\n                segment.point2.x - segment.point1.x,\n                segment.point2.y - segment.point1.y,\n              )\n        }\n      }\n    } catch {\n      console.error('Erreur dans le moveTo PointOnLine')\n    }\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      k: this.k,\n      label: this.label,\n      shape: this.shape,\n    }\n  }\n\n  update(): void {\n    this._x =\n      this.center.x + this.k * ((this.origin as Point).x - this.center.x)\n    this._y =\n      this.center.y + this.k * ((this.origin as Point).y - this.center.y)\n    // La marque du segment doit être perpendiculaire à la droite donc on surcharge le update par défaut\n    if (this.shape === '|') {\n      const a = { x: this.line.point1.x, y: this.line.point1.y }\n      const o = { x: this._x, y: this._y }\n      const l = Math.hypot(\n        this.line.point1.x - this._x,\n        this.line.point1.y - this._y,\n      )\n      let { x: x1, y: y1 } = similitudeCoord(\n        a,\n        o,\n        (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n          Math.sqrt(2),\n        90,\n      )\n      let { x: x2, y: y2 } = similitudeCoord(\n        a,\n        o,\n        (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n          Math.sqrt(2),\n        -90,\n      )\n      // Le trait ne se trace pas si le point est confondu avec l'origine donc on \"change d'origine\" pour le calcul\n      if (\n        !Number.isFinite(x1) ||\n        !Number.isFinite(x2) ||\n        !Number.isFinite(y1) ||\n        !Number.isFinite(y2)\n      ) {\n        const { x: newX1, y: newY1 } = similitudeCoord(\n          o,\n          a,\n          (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n            Math.sqrt(2),\n          90,\n        )\n        const { x: newX2, y: newY2 } = similitudeCoord(\n          o,\n          a,\n          (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n            Math.sqrt(2),\n          -90,\n        )\n        x1 = newX1\n        x2 = newX2\n        y1 = newY1\n        y2 = newY2\n      }\n      if (\n        Number.isFinite(x1) &&\n        Number.isFinite(x2) &&\n        Number.isFinite(y1) &&\n        Number.isFinite(y2)\n      ) {\n        const x1Svg = this.figure.xToSx(x1).toString()\n        const x2Svg = this.figure.xToSx(x2).toString()\n        const y1Svg = this.figure.yToSy(y1).toString()\n        const y2Svg = this.figure.yToSy(y2).toString()\n        this.svgLine1.setAttribute('x1', x1Svg)\n        this.svgLine1.setAttribute('y1', y1Svg)\n        this.svgLine1.setAttribute('x2', x2Svg)\n        this.svgLine1.setAttribute('y2', y2Svg)\n        this.groupSvg.appendChild(this.svgLine1)\n      } else console.error('Erreur dans le update de PointOnLine')\n    }\n    super.update()\n  }\n\n  get description(): string {\n    return `Point sur $${this.line.notation}$`\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x: number) {\n    const [a, b, c] = this.line.equation\n    const y = (-a * x - c) / b\n    this.moveTo(x, y)\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(y: number) {\n    const [a, b, c] = this.line.equation\n    const x = (-b * y - c) / a\n    this.moveTo(x, y)\n  }\n}\n\nexport default PointOnLine\n","import type Line from '../elements/lines/Line'\nimport type Point from '../elements/points/Point'\nimport PointOnLine from '../elements/points/PointOnLine'\nimport type Figure from '../Figure'\n\n/**\n * Vérifie si un point appartient à une ligne (droite, demi-droite ou segment)\n * @param {Figure} figure // La figure\n * @param {string} labelPt // Nom du point\n * @param {string[]|string} nameLine // Nom de la ligne ou bien tableau contenant les noms de la ligne\n * @example Voir exemples plus adaptés dans Figure.ts\n * @author Eric Elter\n * @returns {{ isValid: boolean, message: string }}\n */\nexport default function checkPointOnLine({\n  figure,\n  labelPt,\n  nameLine,\n}: {\n  figure: Figure\n  labelPt: string\n  nameLine: string[] | string\n}): { isValid: boolean; message: string } {\n  let points = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt,\n  ) as Point[]\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur la figure.`,\n    }\n  if (points.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt} sur la figure.`,\n    }\n\n  let lines = [...figure.elements.values()].filter(\n    (e) =>\n      e.type.includes('Line') ||\n      e.type.includes('Segment') ||\n      e.type.includes('Ray'),\n  ) as Line[]\n  if (lines.length === 0)\n    lines = lines.filter((e) => nameLine.includes(e.notation))\n\n  const nomLigne = Array.isArray(nameLine) ? nameLine[0] : nameLine\n  if (lines.length === 0)\n    return {\n      isValid: false,\n      message: `${nomLigne} n'existe pas sur la figure.`,\n    }\n\n  points = [...figure.elements.values()].filter(\n    (e) =>\n      e instanceof PointOnLine &&\n      e.type !== 'pointer' &&\n      e.type.includes('PointOnLine') &&\n      lines.some((line) => e.line === line),\n  ) as PointOnLine[]\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point sur ${nomLigne}.`,\n    }\n\n  points = points.filter((e) => e.label === labelPt)\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur ${nomLigne}.`,\n    }\n\n  return { isValid: true, message: `Le point ${labelPt} sur ${nomLigne}.` }\n}\n","import type { Coords } from '../elements/calculus/Coords'\nimport type Polygon from '../elements/lines/Polygon'\nimport type Segment from '../elements/lines/Segment'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\nexport default function checkPolygon({\n  figure,\n  points,\n  color,\n  acceptSegments = true,\n}: {\n  figure: Figure\n  points: Coords[]\n  color?: string\n  acceptSegments?: boolean\n}): {\n  isValid: boolean\n  message: string\n} {\n  let polygons = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Polygon'),\n  ) as Polygon[]\n  if (color !== undefined) {\n    polygons = polygons.filter((e) => e.color === color)\n  }\n  if (polygons.length === 0) {\n    if (acceptSegments) {\n      let segments = [...figure.elements.values()].filter(\n        (e) => e.type === 'Segment',\n      ) as Segment[]\n      if (color !== undefined) {\n        segments = segments.filter((e) => e.color === color)\n      }\n      if (segments.length === 0) {\n        return {\n          isValid: false,\n          message:\n            color === undefined\n              ? \"Il n'y a ni polygone, ni segments dans la figure.\"\n              : `Il n'y a ni polygone, ni segments de couleur ${color} dans la figure.`,\n        }\n      }\n      const n = points.length\n      const eq = (a: Coords, b: Coords) =>\n        round(a.x) === round(b.x) && round(a.y) === round(b.y)\n      let allEdges = true\n      for (let i = 0; i < n; i++) {\n        const p1 = points[i]\n        const p2 = points[(i + 1) % n]\n        const found = segments.some(\n          (s) =>\n            (eq(s.point1, p1) && eq(s.point2, p2)) ||\n            (eq(s.point1, p2) && eq(s.point2, p1)),\n        )\n        if (!found) {\n          allEdges = false\n          break\n        }\n      }\n      return {\n        isValid: allEdges,\n        message: allEdges\n          ? 'Les segments du polygone ont bien été tracés.'\n          : color === undefined\n            ? \"Tous les côtés n'ont pas été tracés.\"\n            : \"Tous les côtés n'ont pas été tracés avec la couleur demandée.\",\n      }\n    }\n    return {\n      isValid: false,\n      message:\n        color === undefined\n          ? \"Il n'y a pas de polygones dans la figure.\"\n          : `Il n'y a pas de polygones de couleur ${color} dans la figure.`,\n    }\n  }\n  let samePolygone = false\n  for (const polygon of polygons) {\n    if (polygon.points.length !== points.length) {\n      continue\n    }\n    // Vérifie l'égalité cyclique (rotations) et l'inversion, avec arrondi et sans muter `points`\n    const n = points.length\n    const eq = (a: Coords, b: Coords) =>\n      round(a.x) === round(b.x) && round(a.y) === round(b.y)\n    const sameRotation = (src: Coords[], tgt: Coords[]) => {\n      for (let offset = 0; offset < n; offset++) {\n        let ok = true\n        for (let i = 0; i < n; i++) {\n          if (!eq(src[(i + offset) % n], tgt[i])) {\n            ok = false\n            break\n          }\n        }\n        if (ok) return true\n      }\n      return false\n    }\n    if (\n      sameRotation(points, polygon.points) ||\n      sameRotation([...points].reverse(), polygon.points)\n    ) {\n      samePolygone = true\n      break\n    }\n  }\n  return {\n    isValid: samePolygone,\n    message: samePolygone ? 'Le polygone a bien été tracé' : '',\n  }\n}\n","import type Polygon from '../elements/lines/Polygon'\nimport type Figure from '../Figure'\n\nexport default function checkPolygonByLabels({\n  figure,\n  labels,\n  color,\n}: {\n  figure: Figure\n  labels: string[]\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let polygons = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Polygon'),\n  ) as Polygon[]\n  if (color !== undefined) {\n    polygons = polygons.filter((e) => e.color === color)\n  }\n  if (polygons.length === 0)\n    return {\n      isValid: false,\n      message:\n        color === undefined\n          ? \"Il n'y a pas de polygones dans la figure.\"\n          : `Il n'y a pas de polygones de couleur ${color} dans la figure.`,\n    }\n  let samePolygone = false\n  for (const polygon of polygons) {\n    if (polygon.points.length !== labels.length) {\n      continue\n    }\n    // Index du premier point du polygone\n    const index = labels.indexOf(polygon.points[0].label)\n    if (index === -1) {\n      break\n    }\n    const newLabels = labels.slice(index).concat(labels.slice(0, index))\n    samePolygone = newLabels.every(\n      (label, i) => label === polygon.points[i].label,\n    )\n    if (samePolygone) {\n      break\n    }\n    const reveseLabels = labels.reverse()\n    const indexReverse = reveseLabels.indexOf(polygon.points[0].label)\n    const newLabelsReverse = reveseLabels\n      .slice(indexReverse)\n      .concat(reveseLabels.slice(0, indexReverse))\n    samePolygone = newLabelsReverse.every(\n      (label, i) => label === polygon.points[i].label,\n    )\n    if (samePolygone) {\n      break\n    }\n  }\n  return { isValid: samePolygone, message: '' }\n}\n","import { type Coords, equationLine } from '../elements/calculus/Coords'\nimport type Ray from '../elements/lines/Ray'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport function checkRayFromLabels({\n  figure,\n  nameRay,\n  color,\n}: {\n  figure: Figure\n  nameRay: string[] | string\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let rays: Ray[]\n  let ray1: Ray[] = []\n  let ray2: Ray[] = []\n\n  rays = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Ray'),\n  ) as Ray[]\n  if (rays.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de demi-droite dans la figure.\",\n    }\n\n  const nomRay1 = Array.isArray(nameRay) ? nameRay[0] : nameRay\n  if (rays.length !== 0) {\n    ray1 = rays.filter(\n      (e) =>\n        nameRay.includes(e.notation) ||\n        nameRay.includes(e.point1.label + e.point2.label) ||\n        nameRay.includes(e.point2.label + e.point1.label),\n    )\n    if (ray1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomRay1} n'existe pas sur la figure.`,\n      }\n  }\n\n  if (color !== undefined) {\n    ray2 = ray1.filter((e) => e.color === color)\n    if (ray2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas demi-droite de la couleur demandée dans la figure.\",\n      }\n  }\n  return { isValid: true, message: 'La demi-droite a bien été tracée.' }\n}\n\nexport default function checkRay({\n  figure,\n  point1,\n  point2,\n  color,\n}: {\n  figure: Figure\n  point1: Coords\n  point2: Coords\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let rays = [...figure.elements.values()].filter(\n    (e) => e.type === 'Ray',\n  ) as Ray[]\n  const [a, b, c] = equationLine(point1, point2)\n  if (rays.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de demi-droite dans la figure.\",\n    }\n  if (color !== undefined) {\n    rays = rays.filter((e) => e.color === color)\n    if (rays.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de demi-droite de la couleur demandée dans la figure.\",\n      }\n  }\n\n  for (const ray of rays) {\n    const [a2, b2, c2] = ray.equation\n    if (\n      areCoincident(a, b, c, a2, b2, c2) &&\n      round(ray.point1.x) === round(point1.x) &&\n      round(ray.point1.y) === round(point1.y)\n    ) {\n      const directionRay = {\n        x: round(ray.point2.x - ray.point1.x),\n        y: round(ray.point2.y - ray.point1.y),\n      }\n      const directionCheck = {\n        x: round(point2.x - point1.x),\n        y: round(point2.y - point1.y),\n      }\n      if (\n        directionRay.x * directionCheck.x >= 0 &&\n        directionRay.y * directionCheck.y >= 0\n      ) {\n        return { isValid: true, message: 'La demi-droite a bien été tracée.' }\n      }\n    }\n  }\n\n  if (color !== undefined) {\n    rays = [...figure.elements.values()].filter(\n      (e) => e.type === 'Ray',\n    ) as Ray[]\n    for (const ray of rays) {\n      const [a2, b2, c2] = ray.equation\n      if (\n        areCoincident(a, b, c, a2, b2, c2) &&\n        round(ray.point1.x) === round(point1.x) &&\n        round(ray.point1.y) === round(point1.y)\n      ) {\n        const directionRay = {\n          x: round(ray.point2.x - ray.point1.x),\n          y: round(ray.point2.y - ray.point1.y),\n        }\n        const directionCheck = {\n          x: round(point2.x) - round(point1.x),\n          y: round(point2.y) - round(point1.y),\n        }\n        if (\n          directionRay.x * directionCheck.x >= 0 &&\n          directionRay.y * directionCheck.y >= 0\n        ) {\n          return {\n            isValid: false,\n            message:\n              \"Il n'y a pas de demi-droite de la couleur demandée dans la figure.\",\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    isValid: false,\n    message: 'Aucune demi-droite ne correspond à la réponse attendue.',\n  }\n}\n\nfunction areCoincident(\n  a1: number,\n  b1: number,\n  c1: number,\n  a2: number,\n  b2: number,\n  c2: number,\n  precision = 2,\n): boolean {\n  // Cas des droites verticales\n  if (b1 === 0 && b2 === 0) {\n    return c1 / a1 === c2 / a2\n  }\n  const slope1 = b1 !== 0 ? -a1 / b1 : Number.POSITIVE_INFINITY\n  const slope2 = b2 !== 0 ? -a2 / b2 : Number.POSITIVE_INFINITY\n\n  const intercept1 = b1 !== 0 ? -c1 / b1 : Number.NaN\n  const intercept2 = b2 !== 0 ? -c2 / b2 : Number.NaN\n\n  return (\n    round(slope1, precision) === round(slope2, precision) &&\n    round(intercept1, precision) === round(intercept2, precision)\n  )\n}\n","import { distance } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\nimport syncShake from './syncShake'\n\nexport default function checkSameDistance({\n  figure,\n  label1,\n  label2,\n  time = 0,\n}: {\n  figure: Figure\n  label1: string\n  label2: string\n  time?: number\n}): {\n  isValid: boolean\n  message: string\n} {\n  const [a, b] = label1.split('')\n  const [c, d] = label2.split('')\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPointsA = points.filter((p) => p.label === a)\n  if (matchPointsA.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${a}$ dans la figure.`,\n    }\n  }\n  if (matchPointsA.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsA.length} points $${a}$ dans la figure.`,\n    }\n  }\n  const matchPointsB = points.filter((p) => p.label === b)\n  if (matchPointsB.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${b}$ dans la figure.`,\n    }\n  }\n  if (matchPointsB.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsB.length} points $${b}$ dans la figure.`,\n    }\n  }\n  const matchPointsC = points.filter((p) => p.label === c)\n  if (matchPointsC.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${c}$ dans la figure.`,\n    }\n  }\n  if (matchPointsC.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsC.length} points $${c}$ dans la figure.`,\n    }\n  }\n  const matchPointsD = points.filter((p) => p.label === d)\n  if (matchPointsD.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${d}$ dans la figure.`,\n    }\n  }\n  if (matchPointsD.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsD.length} points $${d}$ dans la figure.`,\n    }\n  }\n  const pointA = matchPointsA[0]\n  const pointB = matchPointsB[0]\n  const pointC = matchPointsC[0]\n  const pointD = matchPointsD[0]\n  let isValid =\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  const message = isValid\n    ? `Les longueurs $${a}${b}$ et $${c}${d}$ sont bien toujours égales.`\n    : `Les longueurs $${a}${b}$ et $${c}${d}$ ne sont pas toujours égales.`\n  return { isValid, message }\n}\n","import { type Coords, equationLine } from '../elements/calculus/Coords'\nimport type Segment from '../elements/lines/Segment'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport function checkSegmentFromLabels({\n  figure,\n  nameSegment,\n  color,\n}: {\n  figure: Figure\n  nameSegment: string[] | string\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let segments: Segment[]\n  let segment1: Segment[] = []\n  let segment2: Segment[] = []\n\n  segments = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Segment'),\n  ) as Segment[]\n  if (segments.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de segment dans la figure.\",\n    }\n\n  const nomSegment1 = Array.isArray(nameSegment) ? nameSegment[0] : nameSegment\n  if (segments.length !== 0) {\n    segment1 = segments.filter(\n      (e) =>\n        nameSegment.includes(e.notation) ||\n        nameSegment.includes(e.point1.label + e.point2.label) ||\n        nameSegment.includes(e.point2.label + e.point1.label),\n    )\n    if (segment1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomSegment1} n'existe pas sur la figure.`,\n      }\n  }\n\n  if (color !== undefined) {\n    segment2 = segment1.filter((e) => e.color === color)\n    if (segment2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de segment de la couleur demandée dans la figure.\",\n      }\n  }\n  return { isValid: true, message: 'Le segment a bien été tracé.' }\n}\n\n/**\n *\n * @param param0 Vérifie si un segment est tracé\n * Attention ! Si A, B, C, D sont alignés dans cet ordre et [AD] est tracé, alors [BC] sera compté comme tracé\n * @returns\n */\nexport default function checkSegment({\n  figure,\n  point1,\n  point2,\n  color,\n}: {\n  figure: Figure\n  point1: Coords\n  point2: Coords\n  color?: string\n}): { isValid: boolean; message: string } {\n  let segments = [...figure.elements.values()].filter(\n    (e) => e.type === 'Segment',\n  ) as Segment[]\n  if (segments.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de segment dans la figure.\",\n    }\n  if (color !== undefined) {\n    segments = segments.filter((e) => e.color === color)\n  }\n  if (segments.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de segment de la couleur demandée dans la figure.\",\n    }\n  const [a, b, c] = equationLine(point1, point2)\n  const segmentsCoincident = segments.filter((segment) => {\n    const [a2, b2, c2] = segment.equation\n    return areCoincident(a, b, c, a2, b2, c2)\n  })\n  if (segmentsCoincident.length === 0) {\n    return { isValid: false, message: 'Les segments ne sont pas confondus.' }\n  }\n  for (const segment of segmentsCoincident) {\n    if (\n      (round(segment.point1.x) === round(point1.x) &&\n        round(segment.point1.y) === round(point1.y) &&\n        round(segment.point2.x) === round(point2.x) &&\n        round(segment.point2.y) === round(point2.y)) ||\n      (round(segment.point2.x) === round(point1.x) &&\n        round(segment.point2.y) === round(point1.y) &&\n        round(segment.point1.x) === round(point2.x) &&\n        round(segment.point1.y) === round(point2.y))\n    ) {\n      return { isValid: true, message: 'Le segment a bien été tracé.' }\n    }\n    // Si [point1, point2] est inclus dans le segment\n    if (\n      segment.point1.x <= point1.x &&\n      point1.x <= segment.point2.x &&\n      segment.point1.y <= point1.y &&\n      point1.y <= segment.point2.y &&\n      segment.point1.x <= point2.x &&\n      point2.x <= segment.point2.x &&\n      segment.point1.y <= point2.y &&\n      point2.y <= segment.point2.y\n    ) {\n      return { isValid: true, message: 'Un segment plus grand existe.' }\n    }\n  }\n  if (color !== undefined) {\n    segments = [...figure.elements.values()].filter((e) =>\n      e.type.includes('Segment'),\n    ) as Segment[]\n    for (const segment of segmentsCoincident) {\n      if (\n        (round(segment.point1.x) === round(point1.x) &&\n          round(segment.point1.y) === round(point1.y) &&\n          round(segment.point2.x) === round(point2.x) &&\n          round(segment.point2.y) === round(point2.y)) ||\n        (round(segment.point2.x) === round(point1.x) &&\n          round(segment.point2.y) === round(point1.y) &&\n          round(segment.point1.x) === round(point2.x) &&\n          round(segment.point1.y) === round(point2.y))\n      ) {\n        return {\n          isValid: false,\n          message: \"Le segment n'est pas tracé de la bonne couleur.\",\n        }\n      }\n    }\n  }\n  return {\n    isValid: false,\n    message: 'Aucun segment ne correspond à la réponse attendue.',\n  }\n}\n\nfunction areCoincident(\n  a1: number,\n  b1: number,\n  c1: number,\n  a2: number,\n  b2: number,\n  c2: number,\n  precision = 2,\n): boolean {\n  // Cas des droites verticales\n  if (b1 === 0 && b2 === 0) {\n    return c1 / a1 === c2 / a2\n  }\n  const slope1 = b1 !== 0 ? -a1 / b1 : Number.POSITIVE_INFINITY\n  const slope2 = b2 !== 0 ? -a2 / b2 : Number.POSITIVE_INFINITY\n\n  const intercept1 = b1 !== 0 ? -c1 / b1 : Number.NaN\n  const intercept2 = b2 !== 0 ? -c2 / b2 : Number.NaN\n\n  return (\n    round(slope1, precision) === round(slope2, precision) &&\n    round(intercept1, precision) === round(intercept2, precision)\n  )\n}\n","import type VectorByPoints from '../elements/vector/VectorByPoints'\nimport type Figure from '../Figure'\n\nexport default function checkVector({\n  color,\n  figure,\n  labelOrigin,\n  labelPoint2,\n  x,\n  xOrigin,\n  y,\n  yOrigin,\n}: {\n  color?: string\n  figure: Figure\n  labelOrigin?: string\n  labelPoint2?: string\n  x: number\n  xOrigin?: number\n  y: number\n  yOrigin?: number\n}): { isValid: boolean; message: string; vectors: VectorByPoints[] } {\n  const vectors = [...figure.elements.values()].filter(\n    (e) => e.type === 'Vector' || e.type === 'VectorByPoints',\n  ) as VectorByPoints[]\n  let matchVectors = vectors.filter(\n    (vector) => vector.x === x && vector.y === y,\n  )\n  if (color !== undefined) {\n    matchVectors = matchVectors.filter((vector) => vector.color === color)\n  }\n  if (matchVectors.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$`,\n      vectors: [],\n    }\n  }\n  const verifOnlyLabelOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) => vector.point1.label === labelOrigin,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifOnlyLabelOriginAndPoint2 = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) =>\n        vector.point1.label === labelOrigin &&\n        vector.point2.label === labelPoint2,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$ et l'extrémité est nommée $${labelPoint2 as string}$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifOnlyOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) => vector.point1.x === xOrigin && vector.point1.y === yOrigin,\n    )\n    if (matchVectors.length === 0 && matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine a pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: [],\n      }\n    }\n    if (matchVectors.length > 0 && matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il y a bien un vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ mais son origine n'a pas pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: matchVectors,\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifOnlyLabelOriginAndOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) =>\n        vector.point1.label === labelOrigin &&\n        vector.point1.x === xOrigin &&\n        vector.point1.y === yOrigin,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$ et a pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifLabelOriginAndPoint2AndOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) =>\n        vector.point1.label === labelOrigin &&\n        vector.point2.label === labelPoint2 &&\n        vector.point1.x === xOrigin &&\n        vector.point1.y === yOrigin,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$, l'extrémité est nommée $${labelPoint2 as string}$ et a pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  if (matchVectors.length === 1) {\n    // On veut que l'origine ait un nom particulier\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 === undefined &&\n      xOrigin === undefined &&\n      yOrigin === undefined\n    ) {\n      return verifOnlyLabelOrigin()\n      // On veut que les 2 extrémités soient nommées\n    }\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 !== undefined &&\n      labelPoint2 !== '' &&\n      xOrigin === undefined &&\n      yOrigin === undefined\n    ) {\n      return verifOnlyLabelOriginAndPoint2()\n      // On veut que l'origine ait des coordonnées particulières\n    }\n    if (\n      labelOrigin === undefined &&\n      labelPoint2 === undefined &&\n      xOrigin !== undefined &&\n      yOrigin !== undefined\n    ) {\n      return verifOnlyOrigin()\n      // On veut que l'origine ait des coordonnées particulières et que l'origine soit nommée\n    }\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 === undefined &&\n      xOrigin !== undefined &&\n      yOrigin !== undefined\n    ) {\n      return verifOnlyLabelOriginAndOrigin()\n      // On veut que l'origine ait des coordonnées particulières et que les 2 extrémités soient nommées\n    }\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 !== undefined &&\n      labelPoint2 !== '' &&\n      xOrigin !== undefined &&\n      yOrigin !== undefined\n    ) {\n      return verifLabelOriginAndPoint2AndOrigin()\n    }\n    return {\n      isValid: true,\n      message: `Il y a bien un vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$`,\n      vectors: matchVectors,\n    }\n  }\n  return {\n    isValid: false,\n    message: `Il y a ${matchVectors.length} vecteurs de coordonnées $(${x}\\\\;;\\\\;${y})`,\n    vectors: matchVectors,\n  }\n}\n","import Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\nimport { areNumbersOrdered } from './checkPointBetween2Points'\n\nexport default async function shake({\n  delta = 3,\n  figure,\n  repeat = 5,\n  time = 1,\n}: {\n  delta?: number\n  figure: Figure\n  repeat?: number\n  time?: number\n}): Promise<void> {\n  // MGu c'est une méthode asynchrone  donc la figure a pu être détruite entre temps\n  if (figure.container === null) return\n  const timePeranimation = time / repeat\n  // Retirer l'animation\n  figure.container.style.animation = 'none'\n  void figure.container.offsetWidth\n  // Remettre l'animation définie dans le css de index.html\n  figure.container.style.animation = `shake ${timePeranimation}s`\n  figure.container.style.animationIterationCount = repeat.toString()\n\n  const nearX = (x: number): number => {\n    const distanceFromBorder = 0.5\n    const newX = round(x + (Math.random() - 0.5) * delta, 1)\n    if (\n      newX > figure.xMin + distanceFromBorder &&\n      newX < figure.xMax - distanceFromBorder\n    ) {\n      return newX\n    }\n    return x\n  }\n\n  const nearY = (y: number): number => {\n    const distanceFromBorder = 2\n    const newY = round(y + (Math.random() - 0.5) * delta, 1)\n    if (\n      newY > figure.yMin + distanceFromBorder &&\n      newY < figure.yMax - distanceFromBorder\n    ) {\n      return newY\n    }\n    return y\n  }\n\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e instanceof Point,\n  ) as Point[]\n  const pointsOnFigure = points.filter(\n    (p) =>\n      p.x < figure.xMax &&\n      p.x > figure.xMin &&\n      p.y < figure.yMax &&\n      p.y > figure.yMin,\n  )\n  const freePoints = points.filter((p) => p.isFree)\n\n  for (let _ = 0; _ < repeat; _++) {\n    // MGu c'est une méthode asynchrone  donc la figure a pu être détruite entre temps\n    if (figure.container === null) break\n    for (const point of freePoints) {\n      const { x, y } = point\n      point.moveTo(nearX(point.x), nearY(point.y))\n      if (!allPointsStayOnFigure(pointsOnFigure)) {\n        point.moveTo(x, y)\n      }\n    }\n    await delay((time / repeat / points.length) * 1000)\n  }\n  if (figure.container) figure.container.style.animation = 'none'\n}\n\nasync function delay(milliseconds: number): Promise<void> {\n  await new Promise((resolve) => {\n    setTimeout(resolve, milliseconds)\n  })\n}\n\nfunction allPointsStayOnFigure(points: Point[]): boolean {\n  const figure = points[0].figure\n  return points.every(\n    (point) =>\n      areNumbersOrdered(figure.xMin, point.x, figure.xMax) &&\n      areNumbersOrdered(figure.yMin, point.y, figure.yMax),\n  )\n}\n","import type Element2D from '../elements/Element2D'\nimport type { OptionsDynamicNumber } from '../elements/interfaces'\nimport type TextDynamicByPosition from '../elements/text/TextDynamicByPosition'\nimport type Figure from '../Figure'\nimport { debugObserverLifecycle } from '../lib/observerLifecycleDebug'\n\n/**\n * Pour les valeurs numériques variables qui seront les « parents » de constructions\n */\nabstract class DynamicNumber {\n  private readonly _label?: string\n  protected _value: number\n  figure: Figure\n  readonly id: string\n  isChild: boolean\n  observers: Array<DynamicNumber | Element2D>\n  parents: Set<DynamicNumber | Element2D>\n  textAfter: string\n  textBefore: string\n  type: string\n  constructor(\n    figure: Figure,\n    { isChild = false, textAfter = '', textBefore = '' }: OptionsDynamicNumber,\n  ) {\n    this.figure = figure\n    this.isChild = isChild\n    if (this.isChild) {\n      let cpt = 0\n      while (this.figure.elements.has(`elementTmp${cpt.toString()}`)) {\n        cpt++\n      }\n      this.id = `elementTmp${cpt.toString()}`\n    } else {\n      let cpt = 0\n      while (this.figure.elements.has(`element${cpt.toString()}`)) {\n        cpt++\n      }\n      this.id = `element${cpt.toString()}`\n    }\n    this.figure.elements.set(this.id, this)\n    this.observers = []\n    this.parents = new Set()\n    this._value = Number.NaN\n    this.type = ''\n    this.textBefore = textBefore\n    this.textAfter = textAfter\n  }\n\n  display({\n    color,\n    maximumFractionDigits,\n    minimumFractionDigits,\n    textAfter = '',\n    textBefore = '',\n    x,\n    y,\n  }: {\n    color?: string\n    maximumFractionDigits?: number\n    minimumFractionDigits?: number\n    textAfter?: string\n    textBefore?: string\n    x: number\n    y: number\n  }): TextDynamicByPosition {\n    return this.figure.create('TextDynamicByPosition', {\n      color,\n      dynamicNumber: this,\n      id: `${this.id}_display`,\n      maximumFractionDigits,\n      minimumFractionDigits,\n      textAfter,\n      textBefore,\n      x,\n      y,\n    })\n  }\n\n  draw(): void {}\n\n  /** Prévenir les enfants qu'ils doivent se mettre à jour */\n  notify(): void {\n    for (const element of this.observers) {\n      element.update()\n    }\n  }\n\n  remove(): void {\n    debugObserverLifecycle('remove:start', {\n      id: this.id,\n      observers: this.observers.length,\n      parents: this.parents.size,\n      constructor: this.constructor.name,\n    })\n    this.disposeParents()\n    const observersSnapshot = [...this.observers]\n    this.observers = []\n    this.figure.elements.delete(this.id)\n    for (const element of observersSnapshot) {\n      element.remove()\n    }\n    debugObserverLifecycle('remove:end', { id: this.id })\n  }\n\n  /** S'abonner aux modifications des éléments parents\n   * Par exemple le segment s'abonnera aux modifications de ses deux extrémités\n   */\n  subscribe(element: DynamicNumber | Element2D): void {\n    if (this.observers.includes(element)) return\n    this.observers.push(element)\n    element.registerParent(this)\n  }\n\n  /** Personnalise la sortie JSON de l'élément pour la sauvegarde */\n  toJSON(): object {\n    return {\n      id: this.id,\n      isChild: this.isChild,\n      type: this.type,\n    }\n  }\n\n  /**\n   * Annuler l'abonnement\n   */\n  unsubscribe(element: DynamicNumber | Element2D): void {\n    const previousLength = this.observers.length\n    this.observers = this.observers.filter((observer) => observer !== element)\n    if (previousLength === this.observers.length) return\n    element.unregisterParent(this)\n  }\n\n  update(): void {\n    this.notify()\n  }\n\n  get label(): string | undefined {\n    return this._label\n  }\n\n  get string(): string {\n    return this.textBefore + this.value.toString() + this.textAfter\n  }\n\n  set value(x: number) {\n    this._value = x\n    this.notify()\n  }\n\n  get value(): number {\n    return this._value\n  }\n\n  disposeParents(): void {\n    if (this.parents.size === 0) return\n    debugObserverLifecycle('disposeParents:start', {\n      childId: this.id,\n      parents: [...this.parents].map((parent) => parent.id),\n    })\n    const parentsSnapshot = [...this.parents]\n    for (const parent of parentsSnapshot) {\n      parent.unsubscribe(this)\n    }\n    if (this.parents.size !== 0) {\n      this.parents.clear()\n    }\n    debugObserverLifecycle('disposeParents:end', { childId: this.id })\n  }\n\n  registerParent(parent: DynamicNumber | Element2D): void {\n    if (this.parents.has(parent)) return\n    this.parents.add(parent)\n    debugObserverLifecycle('registerParent', {\n      childId: this.id,\n      parentId: parent.id,\n    })\n  }\n\n  unregisterParent(parent: DynamicNumber | Element2D): void {\n    if (!this.parents.delete(parent)) return\n    debugObserverLifecycle('unregisterParent', {\n      childId: this.id,\n      parentId: parent.id,\n    })\n  }\n}\n\nexport default DynamicNumber\n","import { angle } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\nimport DynamicNumber from './DynamicNumber'\n\nclass Angle extends DynamicNumber {\n  center: Point\n  end: Point\n  precision: number\n  start: Point\n  constructor(\n    figure: Figure,\n    {\n      center,\n      end,\n      precision = 6,\n      start,\n    }: { center: Point; end: Point; precision?: number; start: Point },\n  ) {\n    super(figure, { isChild: false })\n    this.start = start\n    this.center = center\n    this.end = end\n    this.precision = precision\n    this.start.subscribe(this)\n    this.center.subscribe(this)\n    this.end.subscribe(this)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      idCenter: this.center.id,\n      idEnd: this.end.id,\n      idStart: this.start.id,\n      isChild: this.isChild,\n      precision: this.precision,\n      type: this.type,\n    }\n  }\n\n  update(): void {\n    this._value = round(\n      angle(this.start, this.center, this.end),\n      this.precision,\n    )\n    this.notify()\n  }\n}\n\nexport default Angle\n","import { angleOriented } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\nimport DynamicNumber from './DynamicNumber'\n\nclass AngleOriented extends DynamicNumber {\n  center: Point\n  end: Point\n  precision: number\n  start: Point\n  constructor(\n    figure: Figure,\n    {\n      center,\n      end,\n      precision = 6,\n      start,\n    }: { center: Point; end: Point; precision?: number; start: Point },\n  ) {\n    super(figure, { isChild: false })\n    this.start = start\n    this.center = center\n    this.end = end\n    this.precision = precision\n    this.start.subscribe(this)\n    this.center.subscribe(this)\n    this.end.subscribe(this)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      idCenter: this.center.id,\n      idEnd: this.end.id,\n      idStart: this.start.id,\n      isChild: this.isChild,\n      precision: this.precision,\n      type: this.type,\n    }\n  }\n\n  update(): void {\n    this._value = round(\n      angleOriented(this.start, this.center, this.end),\n      this.precision,\n    )\n    this.notify()\n  }\n}\n\nexport default AngleOriented\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass Distance extends DynamicNumber {\n  /** id du premier point */\n  idPoint1: string\n  /** id du deuxième point */\n  idPoint2: string\n  /** Pointeur vers la première extrémité */\n  point1: Point\n  /** Pointeur vers la deuxième extrémité */\n  point2: Point\n  precision: number\n  constructor(\n    figure: Figure,\n    {\n      isChild = false,\n      precision = 6,\n      point1,\n      point2,\n    }: { isChild?: boolean; point1: Point; point2: Point; precision?: number },\n  ) {\n    super(figure, { isChild })\n    this.type = 'Distance'\n    this.point1 = point1\n    this.idPoint1 = point1.id\n    this.point2 = point2\n    this.idPoint2 = point2.id\n    this.precision = precision\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      idPoint1: this.idPoint1,\n      idPoint2: this.idPoint2,\n      isChild: this.isChild,\n      precision: this.precision,\n      type: this.type,\n    }\n  }\n\n  update(): void {\n    try {\n      this.value = round(\n        Math.hypot(\n          this.point1.x - this.point2.x,\n          this.point1.y - this.point2.y,\n        ),\n        this.precision,\n      )\n    } catch (_error) {\n      console.error('Erreur dans Distance.update()', _error)\n      // this.exist = false\n    }\n    this.notify()\n  }\n}\n\nexport default Distance\n","import type { OptionsDynamicNumber } from '../elements/interfaces'\nimport type Figure from '../Figure'\nimport DynamicNumber from './DynamicNumber'\n\nclass DynamicCalcul extends DynamicNumber {\n  calculus: (x: number[]) => number\n  dynamicNumbers: DynamicNumber[]\n  constructor(\n    figure: Figure,\n    {\n      calculus,\n      dynamicNumbers,\n      ...options\n    }: {\n      calculus: (x: number[]) => number\n      dynamicNumbers: DynamicNumber[]\n    } & OptionsDynamicNumber,\n  ) {\n    super(figure, { ...options })\n    this.calculus = calculus\n    this.dynamicNumbers = dynamicNumbers\n    for (const dynamicNumber of this.dynamicNumbers) {\n      dynamicNumber.subscribe(this)\n    }\n    this.update()\n  }\n\n  update(): void {\n    const values = []\n    for (const dynamicNumber of this.dynamicNumbers) {\n      values.push(dynamicNumber.value)\n    }\n    this._value = this.calculus(values)\n    this.notify()\n  }\n}\n\nexport default DynamicCalcul\n","import type Point from '../elements/points/Point'\nimport type TextDynamicByPosition from '../elements/text/TextDynamicByPosition'\nimport type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass DynamicX extends DynamicNumber {\n  dynamicText: TextDynamicByPosition\n  point: Point\n  constructor(figure: Figure, { point }: { point: Point }) {\n    super(figure, {})\n    this.point = point\n    this.point.subscribe(this)\n    this.dynamicText = this.figure.create('TextDynamicByPosition', {\n      color: 'blue',\n      dynamicNumber: this,\n      isChild: true,\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 0,\n      textAfter: '',\n      textBefore: '',\n      x: point.x,\n      y: -1,\n    })\n    this.type = 'DynamicX'\n    this.update()\n    this.dynamicText.div.style.fontWeight = 'bolder'\n  }\n\n  toJSON() {\n    return {\n      ...super.toJSON(),\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    this.value = this.point.x\n    this.dynamicText.x = this.point.x\n    if (this.point.y > 0) {\n      this.dynamicText.y = -1\n    } else {\n      this.dynamicText.y = 1\n    }\n    this.notify()\n  }\n}\n\nexport default DynamicX\n","import type Point from '../elements/points/Point'\nimport type TextDynamicByPosition from '../elements/text/TextDynamicByPosition'\nimport type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass DynamicY extends DynamicNumber {\n  dynamicText: TextDynamicByPosition\n  point: Point\n  constructor(figure: Figure, { point }: { point: Point }) {\n    super(figure, {})\n    this.point = point\n    this.point.subscribe(this)\n    this.dynamicText = this.figure.create('TextDynamicByPosition', {\n      color: 'blue',\n      dynamicNumber: this,\n      isChild: true,\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 0,\n      textAfter: '',\n      textBefore: '',\n      x: -1,\n      y: point.y,\n    })\n    this.type = 'DynamicY'\n    this.update()\n    this.dynamicText.div.style.fontWeight = 'bolder'\n  }\n\n  toJSON() {\n    return {\n      ...super.toJSON(),\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    this.value = this.point.y\n    this.dynamicText.y = this.point.y\n    if (this.point.x > 0) {\n      this.dynamicText.x = -1\n    } else {\n      this.dynamicText.x = 1\n    }\n    this.notify()\n  }\n}\n\nexport default DynamicY\n","// ESM\nimport {\n  addDependencies,\n  create,\n  divideDependencies,\n  evaluateDependencies,\n  multiplyDependencies,\n  // juste ce qu’il faut :\n  parseDependencies,\n  powDependencies,\n  subtractDependencies,\n  unaryMinusDependencies,\n} from 'mathjs'\n\n// Configuration optionnelle\nconst config = {}\n\n// Création d’une instance \"light\" de mathjs\nconst math = create(\n  {\n    parseDependencies,\n    evaluateDependencies,\n    addDependencies,\n    subtractDependencies,\n    multiplyDependencies,\n    divideDependencies,\n    powDependencies,\n    unaryMinusDependencies,\n  },\n  config,\n)\n\n// Export correct en ESM\nexport default math\n","import type Figure from '../../Figure'\nimport mathImport from '../../lib/mathjsInstance'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport { distance } from './Coords'\n\n// on met math dans une variable globale du module\nconst math = mathImport\n\n/**\n * Trace la courbe représentative d'une fonction à partir de son expression.\n * L'expression de la fonction est un string qui est analysé par mathjs\n */\nclass Graph extends Element2D {\n  expression: string\n  readonly f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n  constructor(\n    figure: Figure,\n    {\n      expression,\n      prohibitedValues = [],\n      step,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      ...options\n    }: {\n      expression: string\n      prohibitedValues?: number[]\n      step?: number\n      xMax?: number\n      xMin?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.type = 'Graph'\n    this.xMin = xMin\n    this.xMax = xMax\n    this.expression = expression\n    this.prohibitedValues = prohibitedValues\n    if (step === undefined) {\n      const unite = figure.pixelsPerUnit * figure.xScale * figure.scale\n      step = 2 / unite\n    }\n    this.step = step\n    const fNode = math.parse(expression)\n    this.f = (x: number): number => fNode.evaluate({ x })\n  }\n\n  draw(): void {\n    const points = getListOfPoints({\n      f: this.f,\n      prohibitedValues: this.prohibitedValues,\n      step: this.step,\n      xMax: this.xMax,\n      xMin: this.xMin,\n    })\n    const pointsCoords = points\n      .map(\n        (point) =>\n          `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()}`,\n      )\n      .join(' ')\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polyline',\n    )\n    this.groupSvg.setAttribute('fill', 'none')\n    this.groupSvg.setAttribute('points', pointsCoords)\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  /**\n   * Calcule la distance minimale entre un point et la courbe\n   */\n  distancePointer(x: number, y: number): number {\n    // On échantillonne plusieurs points de la courbe pour trouver le plus proche\n    let minDistance = Number.POSITIVE_INFINITY\n    for (let xi = this.xMin; xi <= this.xMax; xi += this.step) {\n      try {\n        const yi = this.f(xi)\n        if (!Number.isNaN(yi) && Number.isFinite(yi)) {\n          const d = distance({ x, y }, { x: xi, y: yi })\n          minDistance = Math.min(minDistance, d)\n        }\n      } catch {\n        // Si on tombe sur une erreur, on ignore le point\n      }\n    }\n    return minDistance\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      expression: this.expression,\n      isChild: this.isChild,\n    }\n  }\n\n  /**\n   * Description de la courbe pour l'interface utilisateur\n   */\n  get description(): string {\n    return `Courbe représentative de la fonction ${this.notation}`\n  }\n\n  /**\n   * Code LaTeX pour export\n   */\n  get latex(): string {\n    return `\\\\draw[domain=${this.xMin}:${this.xMax}, smooth, thick, ${this.color}, ${this.isDashed ? 'dashed, ' : ''} line width=${this.thickness}] \n        plot (\\\\x, {${math.parse(this.expression).toString({ implicit: 'show' }).replaceAll('x', '(\\\\x)')}});`\n  }\n\n  /**\n   * Notation mathématique de la fonction\n   */\n  get notation(): string {\n    return `f(x) = ${this.expression}`\n  }\n}\n\nfunction getListOfPoints({\n  f,\n  prohibitedValues,\n  step,\n  xMax,\n  xMin,\n}: {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n}): Array<{ x: number; y: number }> {\n  const points: Array<{ x: number; y: number }> = []\n  for (let x = xMin; x < xMax; x += step) {\n    if (!prohibitedValues.includes(x)) {\n      const point = { x, y: f(x) }\n      points.push(point)\n    }\n  }\n  return points\n}\nexport default Graph\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\n\n/**\n * Trace la courbe représentative d'une fonction.\n * La fonction numérique est défini en JS et ne peut donc pas être sauvegardée dans le JSON.\n */\n\nclass Graph2 extends Element2D {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n  constructor(\n    figure: Figure,\n    {\n      f,\n      prohibitedValues = [],\n      step,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      ...options\n    }: {\n      f: (x: number) => number\n      prohibitedValues?: number[]\n      step?: number\n      xMax?: number\n      xMin?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.type = 'Graph'\n    this.xMin = xMin\n    this.xMax = xMax\n    this.f = f\n    this.prohibitedValues = prohibitedValues\n    if (step === undefined) {\n      const unite = figure.pixelsPerUnit * figure.xScale * figure.scale\n      step = 2 / unite\n    }\n    this.step = step\n  }\n\n  draw(): void {\n    const points = getListOfPoints({\n      f: this.f,\n      prohibitedValues: this.prohibitedValues,\n      step: this.step,\n      xMax: this.xMax,\n      xMin: this.xMin,\n    })\n    const pointsCoords = points\n      .map(\n        (point) =>\n          `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()}`,\n      )\n      .join(' ')\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polyline',\n    )\n    this.groupSvg.setAttribute('fill', 'none')\n    this.groupSvg.setAttribute('points', pointsCoords)\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      isChild: this.isChild,\n      thickness: this.thickness,\n    }\n  }\n}\n\nfunction getListOfPoints({\n  f,\n  prohibitedValues,\n  step,\n  xMax,\n  xMin,\n}: {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n}): Array<{ x: number; y: number }> {\n  const points: Array<{ x: number; y: number }> = []\n  for (let x = xMin; x < xMax; x += step) {\n    if (!prohibitedValues.includes(x)) {\n      const point = { x, y: f(x) }\n      points.push(point)\n    }\n  }\n  return points\n}\nexport default Graph2\n","import type Figure from '../../Figure'\nimport mathImport from '../../lib/mathjsInstance'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport { distance } from './Coords'\n\n// on met math dans une variable globale du module\nconst math = mathImport\n\n/**\n * Trace la courbe représentative d'une fonction à partir de son expression.\n * L'expression de la fonction est un string qui est analysé par mathjs\n */\nclass GraphByParts extends Element2D {\n  parts: { expression: string; xMin: number; xMax: number }[]\n  fonctions: ((x: number) => number)[]\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n  constructor(\n    figure: Figure,\n    {\n      parts,\n      prohibitedValues = [],\n      step,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      ...options\n    }: {\n      parts: { expression: string; xMin: number; xMax: number }[]\n      prohibitedValues?: number[]\n      step?: number\n      xMax?: number\n      xMin?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.type = 'GraphByParts'\n    this.xMin = Math.min(...parts.map((el) => el.xMin))\n    this.xMax = Math.max(...parts.map((el) => el.xMax))\n    this.fonctions = []\n    this.parts = parts\n    for (let i = 0; i < parts.length; i++) {\n      const fNode = math.parse(parts[i].expression)\n      this.fonctions.push((x: number): number => fNode.evaluate({ x }))\n    }\n    this.prohibitedValues = prohibitedValues\n    if (step === undefined) {\n      const unite = figure.pixelsPerUnit * figure.xScale * figure.scale\n      step = 2 / unite\n    }\n    this.step = step\n    this.f = this.f.bind(this)\n  }\n\n  f(x: number) {\n    let i = 0\n    while (x > this.parts[i].xMax && i < this.parts.length) {\n      i++\n    }\n    if (i >= this.parts.length) {\n      return Number.NaN\n    }\n    const f = this.fonctions[i]\n    return f(x)\n  }\n\n  draw(): void {\n    const groups: SVGElement[] = []\n    for (const part of this.parts) {\n      const points = getListOfPoints({\n        f: this.f,\n        prohibitedValues: this.prohibitedValues,\n        step: this.step,\n        xMax: part.xMax,\n        xMin: part.xMin,\n      })\n      const pointsCoords = points\n        .map(\n          (point) =>\n            `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()}`,\n        )\n        .join(' ')\n      const groupSvg = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'polyline',\n      )\n      groupSvg.setAttribute('fill', 'none')\n      groupSvg.setAttribute('points', pointsCoords)\n      groups.push(groupSvg)\n    }\n    this.groupSvg = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    this.groupSvg.innerHTML = groups.map((group) => group.outerHTML).join('\\n')\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  /**\n   * Calcule la distance minimale entre un point et la courbe\n   */\n  distancePointer(x: number, y: number): number {\n    // On échantillonne plusieurs points de la courbe pour trouver le plus proche\n    let minDistance = Number.POSITIVE_INFINITY\n    for (let xi = this.xMin; xi <= this.xMax; xi += this.step) {\n      try {\n        const yi = this.f(xi)\n        if (!Number.isNaN(yi) && Number.isFinite(yi)) {\n          const d = distance({ x, y }, { x: xi, y: yi })\n          minDistance = Math.min(minDistance, d)\n        }\n      } catch {\n        // Si on tombe sur une erreur, on ignore le point\n      }\n    }\n    return minDistance\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      parts: this.parts,\n      xMax: this.xMax,\n      xMin: this.xMin,\n    }\n  }\n\n  /**\n   * Description de la courbe pour l'interface utilisateur\n   */\n  get description(): string {\n    return `Courbe représentative de la fonction ${this.notation}`\n  }\n\n  /**\n   * Code LaTeX pour export\n   */\n  get latex(): string {\n    let latex = ''\n    for (const part of this.parts) {\n      latex += `\\\\draw[domain=${part.xMin}:${part.xMax}, smooth, thick, ${this.color}, ${this.isDashed ? 'dashed, ' : ''} line width=${this.thickness}] \n        plot (\\\\x, {${math.parse(part.expression).toString({ implicit: 'show' }).replaceAll('x', '(\\\\x)')}});\\n`\n    }\n    return latex\n  }\n\n  /**\n   * Notation mathématique de la fonction\n   */\n  get notation(): string {\n    let notation = ''\n    for (const part of this.parts) {\n      notation += `f(x) = ${part.expression}\\\\text{ pour }${part.xMin} ≤ x ≤ ${part.xMax}~;~\\n`\n    }\n    return notation\n  }\n}\n\nfunction getListOfPoints({\n  f,\n  prohibitedValues,\n  step,\n  xMax,\n  xMin,\n}: {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n}): Array<{ x: number; y: number }> {\n  const points: Array<{ x: number; y: number }> = []\n  for (let x = xMin; x < xMax; x += step) {\n    if (!prohibitedValues.includes(x)) {\n      const point = { x, y: f(x) }\n      points.push(point)\n    }\n  }\n  return points\n}\nexport default GraphByParts\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type ArcByCenterRadiusAndAngles from '../lines/ArcByCenterRadiusAndAngles'\nimport type Point from '../points/Point'\n\n/**\n * Créé plusieurs disques fractionnés que l'on peut colorier\n * Soit on définit le numérateur à N et les N premières portions sont coloriées soit on définit les indices des portions à colorier dans indicesSectorsInColor s'il y a les deux c'est indicesSectorsInColor qui l'emporte\n */\nclass CircleFractionDiagram extends Element2D {\n  /** Centre du diagramme */\n  center: Point\n  /** Centre des cercles */\n  centers: Point[] = []\n  /** Nombre de portions */\n  denominator: number\n  /** Espace entre les cercles */\n  gap: number\n  /** Nombre de cercles */\n  numberOfCircle: number\n  /** Rayon des cercles */\n  radius: number\n  /** Arcs de cercles */\n  sectors: ArcByCenterRadiusAndAngles[] = []\n  /** Indices des portions coloriées */\n  _indicesSectorsInColor: Set<number> = new Set()\n  constructor(\n    figure: Figure,\n    {\n      denominator,\n      gap = 1,\n      indicesSectorsInColor = new Set(),\n      numberOfCircle = 1,\n      numerator = 0,\n      radius,\n      x = 0,\n      y = 0,\n      ...options\n    }: {\n      /** Nombre de portions */\n      denominator: number\n      /** Espace entre les cercles */\n      gap?: number\n      /** Indices des portions coloriées */\n      indicesSectorsInColor?: Set<number>\n      /** Nombre de cercles */\n      numberOfCircle?: number\n      /** Nombre de portions coloriées si indicesSectorsInColor n'est pas défini */\n      numerator?: number\n      /** Rayon des cercles */\n      radius: number\n      /** Abscisse du centre */\n      x?: number\n      /** Ordonnée du centre */\n      y?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.center = this.figure.create('Point', {\n      shape: '',\n      x,\n      y,\n      isChild: true,\n    })\n    this.radius = radius\n    this.denominator = denominator\n    this.gap = gap\n    this.numberOfCircle = numberOfCircle\n    if (numerator !== undefined && indicesSectorsInColor.size === 0) {\n      for (let i = 0; i < numerator; i++) {\n        this.indicesSectorsInColor.add(i)\n      }\n    } else {\n      this.indicesSectorsInColor = indicesSectorsInColor\n    }\n    this.type = 'CircleFractionDiagram'\n  }\n\n  draw(): void {\n    this.centers = [this.center]\n    this.sectors = []\n    const angle = 360 / this.denominator\n    for (let n = 0; n < this.numberOfCircle; n++) {\n      if (n > 0)\n        this.centers.push(\n          this.figure.create('Point', {\n            isChild: true,\n            isSelectable: false,\n            shape: '',\n            x: this.center.x + n * (2 * this.radius + this.gap),\n            y: this.center.y,\n          }),\n        )\n      for (let i = 0; i < this.denominator; i++) {\n        this.sectors.push(\n          this.figure.create('ArcByCenterRadiusAndAngles', {\n            center: this.centers[n],\n            endAngle: angle * (i + 1),\n            isChild: true,\n            radius: this.radius,\n            startAngle: angle * i,\n            color: this.color,\n            thickness: this.thickness,\n            isDashed: this.isDashed,\n          }),\n        )\n      }\n    }\n    this.indicesSectorsInColor = this._indicesSectorsInColor\n  }\n\n  redraw(): void {\n    for (const center of this.centers) {\n      center.remove()\n    }\n    for (const sector of this.sectors) {\n      sector.remove()\n    }\n    this.draw()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      denominator: this.denominator,\n      gap: this.gap,\n      arrayIndicesSectorsInColor: Array.from(this.indicesSectorsInColor),\n      numberOfCircle: this.numberOfCircle,\n      numerator: this.numerator,\n      radius: this.radius,\n      x: this.center.x,\n      y: this.center.y,\n    }\n  }\n\n  get indicesSectorsInColor(): Set<number> {\n    for (let i = 0; i < this.sectors.length; i++) {\n      if (this.sectors[i].fillColor !== 'none') {\n        this._indicesSectorsInColor.add(i)\n      } else {\n        this._indicesSectorsInColor.delete(i)\n      }\n    }\n    return this._indicesSectorsInColor\n  }\n\n  set indicesSectorsInColor(indicesSectorsInColor: Set<number>) {\n    this._indicesSectorsInColor = indicesSectorsInColor\n    this.sectors.forEach((sector, index) => {\n      if (this._indicesSectorsInColor.has(index)) {\n        sector.fillColor = this.color\n      } else {\n        sector.fillColor = 'none'\n      }\n    })\n  }\n\n  get numerator(): number {\n    return this.sectors.filter((sector) => sector.fillColor !== 'none').length\n  }\n\n  set numerator(numerator: number) {\n    this.sectors.forEach((sector, index) => {\n      if (index < numerator) {\n        sector.fillColor = this.color\n      } else {\n        sector.fillColor = 'none'\n      }\n    })\n  }\n}\n\nexport default CircleFractionDiagram\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type Polygon from '../lines/Polygon'\nimport type Point from '../points/Point'\n\nexport default class LineFractionDiagram extends Element2D {\n  denominator: number\n  height: number\n  _indicesRectanglesInColor: Set<number> = new Set()\n  min: number\n  max: number\n  origin: Point\n  origins: Point[] = []\n  rectangles: Polygon[] = []\n  thickHeightInPixels: number\n  thickThickness: number\n  verticalDistanceForClick: number\n  width: number\n  constructor(\n    figure: Figure,\n    {\n      denominator = 4,\n      height = 0.2,\n      indicesRectanglesInColor = new Set(),\n      min = 0,\n      max = 5,\n      numerator,\n      thickHeightInPixels = 10,\n      thickThickness = 4,\n      verticalDistanceForClick = 1,\n      width = 4,\n      x = 0,\n      y = 0,\n      ...options\n    }: {\n      denominator?: number\n      height?: number\n      indicesRectanglesInColor?: Set<number>\n      min?: number\n      max?: number\n      numerator?: number\n      thickHeightInPixels?: number\n      thickThickness?: number\n      verticalDistanceForClick?: number\n      width?: number\n      x?: number\n      y?: number\n    } = {},\n  ) {\n    super(figure, { ...options })\n    this.origin = this.figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x,\n      y: y - height / 2,\n    })\n    this.width = width\n    this.height = height\n    this.min = min\n    this.denominator = denominator\n    this.max = max\n    this.thickHeightInPixels = thickHeightInPixels\n    this.thickThickness = thickThickness\n    if (numerator !== undefined && indicesRectanglesInColor.size === 0) {\n      for (let i = 0; i < numerator; i++) {\n        this.indicesRectanglesInColor.add(i)\n      }\n    } else {\n      this.indicesRectanglesInColor = indicesRectanglesInColor\n    }\n    this.type = 'LineFractionDiagram'\n    this.verticalDistanceForClick = verticalDistanceForClick\n  }\n\n  draw(): void {\n    this.figure.svg.appendChild(this.groupSvg)\n    this.origins = [this.origin]\n    this.rectangles = []\n    const fractionWidth = this.width / this.denominator\n    for (let n = 0; n < this.max; n++) {\n      if (n > 0)\n        this.origins.push(\n          this.figure.create('Point', {\n            isChild: true,\n            isSelectable: false,\n            shape: '',\n            x: this.origin.x + n * this.width,\n            y: this.origin.y,\n          }),\n        )\n      for (let i = 0; i < this.denominator; i++) {\n        this.rectangles.push(\n          createRectangleByOriginWidthAndHeight({\n            height: this.height,\n            origin: this.origins[n],\n            width: fractionWidth,\n            xTranslate: i * fractionWidth,\n            color: this.color,\n            thickness: this.thickness,\n            isDashed: this.isDashed,\n          }),\n        )\n      }\n    }\n    const verticalDistanceForClick = this.verticalDistanceForClick\n    for (const rectangle of this.rectangles) {\n      rectangle.distancePointer = function (_: number, __: number): number {\n        if (\n          this.figure.currentState === 'FILL' &&\n          this.figure.pointer.x >= this.points[0].x &&\n          this.figure.pointer.x <= this.points[1].x &&\n          this.figure.pointer.y - this.points[0].y < verticalDistanceForClick &&\n          this.figure.pointer.y - this.points[0].y > -verticalDistanceForClick\n        )\n          return 0\n        return Number.POSITIVE_INFINITY\n      }\n    }\n    // Thicks\n    for (let i = 0; i <= this.max; i++) {\n      const x = this.origin.x + i * this.width\n      const svgLine = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n      svgLine.setAttribute(\n        'y1',\n        (\n          this.figure.yToSy(this.origin.y + this.height / 2) -\n          this.thickHeightInPixels * this.figure.yScale * this.figure.scale\n        ).toString(),\n      )\n      svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n      svgLine.setAttribute(\n        'y2',\n        (\n          this.figure.yToSy(this.origin.y + this.height / 2) +\n          this.thickHeightInPixels * this.figure.yScale * this.figure.scale\n        ).toString(),\n      )\n      svgLine.setAttribute('stroke', this._color)\n      svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n      svgLine.setAttribute('stroke-readonly', '1')\n      this.groupSvg.appendChild(svgLine)\n      this.figure.create('TextByPosition', {\n        isChild: true,\n        x,\n        y:\n          this.origin.y +\n          1 +\n          this.thickHeightInPixels /\n            (this.figure.yScale *\n              this.figure.scale *\n              this.figure.pixelsPerUnit),\n        text: (this.min + i).toString(),\n      })\n    }\n    this.indicesRectanglesInColor = this._indicesRectanglesInColor\n  }\n\n  redraw(): void {\n    for (const origin of this.origins) {\n      origin.remove()\n    }\n    for (const rectangle of this.rectangles) {\n      rectangle.remove()\n    }\n    this.draw()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      denominator: this.denominator,\n      height: this.height,\n      arrayIndicesRectanglesInColor: Array.from(this.indicesRectanglesInColor),\n      min: this.min,\n      max: this.max,\n      thickHeightInPixels: this.thickHeightInPixels,\n      thickThickness: this.thickThickness,\n      verticalDistanceForClick: this.verticalDistanceForClick,\n      width: this.width,\n      x: this.origin.x,\n      y: this.origin.y + this.height / 2,\n    }\n  }\n\n  get numerator(): number {\n    return this.rectangles.filter((rectangle) => rectangle.fillColor !== 'none')\n      .length\n  }\n\n  get indicesRectanglesInColor(): Set<number> {\n    for (let i = 0; i < this.rectangles.length; i++) {\n      if (this.rectangles[i].fillColor !== 'none') {\n        this._indicesRectanglesInColor.add(i)\n      } else {\n        this._indicesRectanglesInColor.delete(i)\n      }\n    }\n    return this._indicesRectanglesInColor\n  }\n\n  set indicesRectanglesInColor(indicesRectanglesInColor: Set<number>) {\n    this._indicesRectanglesInColor = indicesRectanglesInColor\n    this.rectangles.forEach((rectangle, index) => {\n      if (this._indicesRectanglesInColor.has(index)) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n\n  get indiceLastInColor(): number {\n    const indice = this.rectangles.findIndex(\n      (rectangle) => rectangle.fillColor === 'none',\n    )\n    return indice === -1 ? this.max * this.denominator : indice\n  }\n\n  set numerator(numerator: number) {\n    this.rectangles.forEach((rectangle, index) => {\n      if (index < numerator) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n}\n\nfunction createRectangleByOriginWidthAndHeight({\n  height,\n  origin,\n  width,\n  xTranslate,\n  color,\n  thickness,\n  isDashed,\n}: {\n  color?: string\n  thickness?: number\n  isDashed?: boolean\n  height: number\n  origin: Point\n  width: number\n  xTranslate: number\n}): Polygon {\n  const newPoints = []\n  const figure = origin.figure\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y + height,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y + height,\n    }),\n  )\n  return figure.create('Polygon', {\n    isChild: true,\n    points: newPoints,\n    color,\n    thickness,\n    isDashed,\n  })\n}\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type Polygon from '../lines/Polygon'\nimport type Point from '../points/Point'\n\nclass RectangleFractionDiagram extends Element2D {\n  denominator: number\n  gap: number\n  height: number\n  numberOfRectangles: number\n  _indicesRectanglesInColor: Set<number> = new Set()\n  origin: Point\n  origins: Point[] = []\n  rectangles: Polygon[] = []\n  width: number\n  constructor(\n    figure: Figure,\n    {\n      denominator = 4,\n      gap = 1,\n      height = 1,\n      numberOfRectangles = 5,\n      indicesRectanglesInColor = new Set(),\n      numerator = 0,\n      width = 4,\n      x = 0,\n      y = 0,\n      ...options\n    }: {\n      denominator?: number\n      gap?: number\n      height?: number\n      indicesRectanglesInColor?: Set<number>\n      numberOfRectangles?: number\n      numerator?: number\n      width?: number\n      x?: number\n      y?: number\n    } = {},\n  ) {\n    super(figure, { ...options })\n    this.origin = this.figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x,\n      y,\n    })\n    this.width = width\n    this.height = height\n    this.denominator = denominator\n    this.gap = gap\n    this.numberOfRectangles = numberOfRectangles\n    this.numerator = numerator\n    if (numerator !== undefined && indicesRectanglesInColor.size === 0) {\n      for (let i = 0; i < numerator; i++) {\n        this.indicesRectanglesInColor.add(i)\n      }\n    } else {\n      this.indicesRectanglesInColor = indicesRectanglesInColor\n    }\n    this.type = 'RectangleFractionDiagram'\n  }\n\n  draw(): void {\n    this.origins = [this.origin]\n    this.rectangles = []\n    const fractionWidth = this.width / this.denominator\n    for (let n = 0; n < this.numberOfRectangles; n++) {\n      if (n > 0)\n        this.origins.push(\n          this.figure.create('Point', {\n            isChild: true,\n            isSelectable: false,\n            shape: '',\n            x: this.origin.x + n * (this.width + this.gap),\n            y: this.origin.y,\n          }),\n        )\n      for (let i = 0; i < this.denominator; i++) {\n        this.rectangles.push(\n          createRectangleByOriginWidthAndHeight({\n            height: this.height,\n            origin: this.origins[n],\n            width: fractionWidth,\n            xTranslate: i * fractionWidth,\n          }),\n        )\n      }\n    }\n    for (const rectangle of this.rectangles) {\n      rectangle.distancePointer = function (_: number, __: number): number {\n        if (\n          this.figure.currentState === 'FILL' &&\n          this.figure.pointer.isInPolygon(this)\n        )\n          return 0\n        return Number.POSITIVE_INFINITY\n      }\n    }\n    this.indicesRectanglesInColor = this._indicesRectanglesInColor\n  }\n\n  redraw(): void {\n    // Ne pas supprimer this.origin (le premier élément), seulement les origins supplémentaires\n    for (let i = 1; i < this.origins.length; i++) {\n      this.origins[i].remove()\n    }\n    for (const rectangle of this.rectangles) {\n      rectangle.remove()\n    }\n    this.draw()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      denominator: this.denominator,\n      numerator: this.numerator,\n      arrayIndicesRectanglesInColor: Array.from(this.indicesRectanglesInColor),\n      height: this.height,\n      width: this.width,\n      gap: this.gap,\n      x: this.origin.x,\n      y: this.origin.y,\n    }\n  }\n\n  get indicesRectanglesInColor(): Set<number> {\n    for (let i = 0; i < this.rectangles.length; i++) {\n      if (this.rectangles[i].fillColor !== 'none') {\n        this._indicesRectanglesInColor.add(i)\n      } else {\n        this._indicesRectanglesInColor.delete(i)\n      }\n    }\n    return this._indicesRectanglesInColor\n  }\n\n  set indicesRectanglesInColor(indicesRectanglesInColor: Set<number>) {\n    this._indicesRectanglesInColor = indicesRectanglesInColor\n    this.rectangles.forEach((rectangle, index) => {\n      if (this._indicesRectanglesInColor.has(index)) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n\n  get numerator(): number {\n    return this.rectangles.filter((rectangle) => rectangle.fillColor !== 'none')\n      .length\n  }\n\n  set numerator(numerator: number) {\n    this.rectangles.forEach((rectangle, index) => {\n      if (index < numerator) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n}\n\nfunction createRectangleByOriginWidthAndHeight({\n  height,\n  origin,\n  width,\n  xTranslate,\n}: {\n  height: number\n  origin: Point\n  width: number\n  xTranslate: number\n}): Polygon {\n  const newPoints = []\n  const figure = origin.figure\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y + height,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y + height,\n    }),\n  )\n  return figure.create('Polygon', { isChild: true, points: newPoints })\n}\n\nexport default RectangleFractionDiagram\n","import type Figure from '../../Figure'\nimport { displayNumber, round } from '../../lib/format'\nimport Element2D from '../Element2D'\nimport type TextByPosition from '../text/TextByPosition'\n\nclass GraduatedLine extends Element2D {\n  private _labelSize = '0.8em'\n  private readonly addInPixels = 5\n  /** La droite dépasse du min de addLeft */\n  addLeft: number\n  /** La droite dépasse du max de addRight */\n  addRight: number\n  /** Distance entre 2 labels à partir de 0 ou du min */\n  labelInterval: number\n  labels: TextByPosition[] = []\n  max: number\n  min: number\n  points: Array<{ label: string; x: number }> = []\n  /** Distance entre deux graduations */\n  step: number\n  /** Distance entre deux graduations secondaires */\n  stepBis?: number\n  svgLine!: SVGLineElement\n  /** Épaisseur des graduations */\n  thick: number\n  /** Ordonnée des labels en pixels */\n  yLabel: number\n\n  constructor(\n    figure: Figure,\n    {\n      addLeft = 0,\n      addRight = 0,\n      color,\n      labelInterval,\n      max = 6,\n      min = -6,\n      step = 1,\n      stepBis,\n      thick = 0.2,\n      yLabel = -0.5,\n    }: {\n      addLeft?: number\n      addRight?: number\n      color?: string\n      labelInterval?: number\n      max?: number\n      min?: number\n      scale?: number\n      step?: number\n      stepBis?: number\n      thick?: number\n      yLabel?: number\n    } = {},\n  ) {\n    super(figure, {})\n    this.addLeft = addLeft\n    this.addRight = addRight\n    this._color = color ?? figure.options.color\n    this.labelInterval = labelInterval ?? step\n    this.min = min\n    this.max = max\n    this.step = step\n    this.stepBis = stepBis\n    this.thick = thick\n    this.yLabel = yLabel\n    this.type = 'GraduatedLine'\n  }\n\n  draw(): void {\n    this.svgLine = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.groupSvg.appendChild(this.svgLine)\n    this.groupSvg.setAttribute('color', this.color)\n    this.setVisibilityColorThicknessAndDashed()\n    this.drawLine()\n    this.drawThicks()\n    this.drawThicksBis()\n    this.drawLabels()\n  }\n\n  drawLabels(): void {\n    const start = round(\n      Math.ceil(this.min / this.labelInterval) * this.labelInterval,\n    )\n    const end = round(\n      Math.floor(this.max / this.labelInterval) * this.labelInterval,\n    )\n    for (let i = start; i <= end; ) {\n      const text = `$${displayNumber(i)}$`\n      this.labels.push(\n        this.figure.create('TextByPosition', {\n          anchor: 'topCenter',\n          dxInPixels: 0,\n          dyInPixels: 0,\n          isChild: true,\n          text,\n          x: i,\n          y: this.yLabel,\n        }),\n      )\n      i = round(i + this.labelInterval)\n    }\n  }\n\n  drawLine(): void {\n    const x1Svg = this.figure.xToSx(this.min - this.addLeft)\n    const x2Svg = this.figure.xToSx(this.max + this.addRight)\n    const y1Svg = this.figure.yToSy(0)\n    const y2Svg = this.figure.yToSy(0)\n    this.svgLine.setAttribute('x1', `${x1Svg - this.addInPixels}`)\n    this.svgLine.setAttribute('y1', `${y1Svg}`)\n    this.svgLine.setAttribute('x2', `${x2Svg + this.addInPixels}`)\n    this.svgLine.setAttribute('y2', `${y2Svg}`)\n    this.svgLine.setAttribute('stroke', 'currentColor')\n\n    // Définit la flèche\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs')\n    this.figure.svg.appendChild(defs)\n    const marker = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'marker',\n    )\n    marker.setAttribute('id', 'arrow')\n    marker.setAttribute('markerWidth', '10')\n    marker.setAttribute('markerHeight', '10')\n    marker.setAttribute('refX', '0')\n    marker.setAttribute('refY', '3')\n    marker.setAttribute('orient', 'auto')\n    marker.setAttribute('markerUnits', 'strokeWidth')\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    path.setAttribute('d', 'M0,0 L0,6 L9,3 z')\n    path.setAttribute('fill', this.color)\n    marker.appendChild(path)\n    defs.appendChild(marker)\n\n    // Ajoute la flèche comme une mark\n    this.svgLine.setAttribute('marker-end', 'url(#arrow)')\n  }\n\n  drawThicks(): void {\n    const start = round(Math.ceil(this.min / this.step) * this.step)\n    const end = round(Math.floor(this.max / this.step) * this.step)\n    for (let i = start; i <= end; ) {\n      const xSvg = this.figure.xToSx(i)\n      const y1Svg = this.figure.yToSy(-this.thick)\n      const y2Svg = this.figure.yToSy(this.thick)\n      const svgLine = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgLine.setAttribute('x1', `${xSvg}`)\n      svgLine.setAttribute('y1', `${y1Svg}`)\n      svgLine.setAttribute('x2', `${xSvg}`)\n      svgLine.setAttribute('y2', `${y2Svg}`)\n      svgLine.setAttribute('stroke', 'currentColor')\n      svgLine.setAttribute('stroke-width', '1')\n      this.groupSvg.appendChild(svgLine)\n      i = round(i + this.step)\n    }\n  }\n\n  drawThicksBis(): void {\n    if (this.stepBis === undefined) return\n    const start = round(Math.ceil(this.min / this.stepBis) * this.stepBis)\n    const end = round(Math.floor(this.max / this.stepBis) * this.stepBis)\n    let cpt = 0\n    // Mille graduations aux maximum\n    for (let i = start; i <= end && cpt < 1000; ) {\n      const xSvg = this.figure.xToSx(i)\n      const y1Svg = this.figure.yToSy(-this.thick / 2)\n      const y2Svg = this.figure.yToSy(this.thick / 2)\n      const svgLine = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgLine.setAttribute('x1', `${xSvg}`)\n      svgLine.setAttribute('y1', `${y1Svg}`)\n      svgLine.setAttribute('x2', `${xSvg}`)\n      svgLine.setAttribute('y2', `${y2Svg}`)\n      svgLine.setAttribute('stroke', 'currentColor')\n      svgLine.setAttribute('stroke-width', '1')\n      this.groupSvg.appendChild(svgLine)\n      i = round(i + this.stepBis)\n      cpt++\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...super.toJSON(),\n      type: this.type,\n      color: this.color,\n      addLeft: this.addLeft,\n      addRight: this.addRight,\n      labelInterval: this.labelInterval,\n      max: this.max,\n      min: this.min,\n      step: this.step,\n      stepBis: this.stepBis,\n      thick: this.thick,\n      yLabel: this.yLabel,\n    }\n  }\n\n  get labelSize(): string {\n    return this._labelSize\n  }\n\n  set labelSize(labelSize: string) {\n    this._labelSize = labelSize\n    for (const label of this.labels) {\n      label.fontSize = labelSize\n    }\n  }\n\n  get latex(): string {\n    let result = `\\n\\\\tkzInit[xmin=${this.min}, xmax=${this.max}, xstep=${this.step}]`\n    result += '\\n\\\\tkzDrawX[label={}, tickup=3pt, tickdn=3pt]'\n    if (this.stepBis !== undefined) {\n      result += `\\\\foreach \\\\i in {${this.min},${round(this.min + this.stepBis, 6)},...,${this.max}} {`\n      result += '\\n\\\\tkzHTick[mark=|,mark size=2pt]{\\\\i}\\n}'\n    }\n    return result\n  }\n}\n\nexport default GraduatedLine\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\nimport { rotationCoord } from '../calculus/Coords'\nimport { distance, getLargeSweep } from '../calculus/utils'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\nclass Arc extends Element2D {\n  _fillColor!: string\n  _fillOpacity!: number\n  /** Faut-il tracer les segments pour fermer l'arc de cercle ? */\n  addBorders: boolean\n  center: Point\n  /** Nombre d'arcs pour le codage (1, 2 ou 3) */\n  codingMarks: number\n  dynamicAngle: DynamicNumber\n  start: Point\n  svgArc: SVGPathElement\n  svgArcs: SVGPathElement[]\n  constructor(\n    figure: Figure,\n    {\n      addBorders = false,\n      center,\n      codingMarks = 1,\n      color,\n      dynamicAngle,\n      fillColor,\n      fillOpacity,\n      start,\n      ...options\n    }: {\n      addBorders?: boolean\n      center: Point\n      codingMarks?: number\n      dynamicAngle: DynamicNumber\n      start: Point\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.start = start\n    this.center = center\n    this.dynamicAngle = dynamicAngle\n    this.addBorders = addBorders\n    this.codingMarks = (codingMarks < 4 && codingMarks > 0) ? codingMarks : 1\n    this._color = color ?? 'black'\n    this._fillColor = fillColor ?? 'none'\n    this._fillOpacity = this.fillOpacity ?? this.figure.options.fillOpacity\n    this.svgArc = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    this.svgArcs = [this.svgArc]\n    this.groupSvg.appendChild(this.svgArc)\n    // Créer des arcs supplémentaires si nécessaire pour le codage\n    if (this.codingMarks > 1) {\n      for (let i = 1; i < this.codingMarks; i++) {\n        const arc = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'path',\n        )\n        this.svgArcs.push(arc)\n        this.groupSvg.appendChild(arc)\n      }\n    }\n    this.start.subscribe(this)\n    this.center.subscribe(this)\n    this.dynamicAngle.subscribe(this)\n  }\n\n  distancePointer(_: number, __: number): number {\n    if (this.figure.pointer.isInArc(this)) return 0\n    return Number.POSITIVE_INFINITY\n  }\n\n  draw(): void {\n    this.figure.svg.appendChild(this.groupSvg)\n    this.update()\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  /** Modifie la couleur et l'épaisseur de l'élément */\n  setVisibilityColorThicknessAndDashed(): void {\n    this.color = this._color\n    this.fillColor = this._fillColor\n    if (this._fillOpacity !== undefined) this.fillOpacity = this._fillOpacity\n    if (this._isDashed !== undefined) this.isDashed = this._isDashed\n    this.isDashed = this._isDashed\n    this.isVisible = this._isVisible\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCenter: this.center.id,\n      idDynamicAngle: this.dynamicAngle.id,\n      idStart: this.start.id,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    const baseRadius = distance(this.start, this.center)\n    const [large, sweep] = getLargeSweep(this.dynamicAngle.value)\n    if (\n      Number.isFinite(this.start.x) &&\n      Number.isFinite(this.start.y) &&\n      Number.isFinite(this.center.x) &&\n      Number.isFinite(this.center.y)\n    ) {\n      // Espacement entre les arcs pour le codage (en unités de coordonnées)\n      const spacing = this.codingMarks > 1 ? 0.15 : 0\n\n      // Dessiner chaque arc\n      for (let i = 0; i < this.codingMarks; i++) {\n        const offset =\n          this.codingMarks > 1 ? (i - (this.codingMarks - 1) / 2) * spacing : 0\n        const currentRadius = baseRadius + offset\n\n        // Calculer le vecteur du centre vers le point de départ\n        const dx = this.start.x - this.center.x\n        const dy = this.start.y - this.center.y\n        const startDistance = Math.sqrt(dx * dx + dy * dy)\n\n        // Normaliser et appliquer le nouveau rayon\n        const scaleFactor = currentRadius / startDistance\n        const arcStart = {\n          x: this.center.x + dx * scaleFactor,\n          y: this.center.y + dy * scaleFactor,\n        }\n\n        // Calculer le point de fin avec rotation\n        const arcEnd = rotationCoord(\n          arcStart,\n          this.center,\n          this.dynamicAngle.value,\n        )\n\n        const radius = this.figure.xToSx(currentRadius)\n        let path = `M${this.figure.xToSx(arcStart.x)} ${this.figure.yToSy(arcStart.y)} A ${radius} ${radius} 0 ${large} ${sweep} ${this.figure.xToSx(arcEnd.x)} ${this.figure.yToSy(arcEnd.y)}`\n        if (this.addBorders)\n          path += `L ${this.figure.xToSx(this.center.x)} ${this.figure.yToSy(this.center.y)} Z`\n        this.svgArcs[i].setAttribute('d', path)\n      }\n    }\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillColor(): string {\n    return this._fillColor\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillColor(color: string) {\n    this._fillColor = color\n    this.groupSvg.setAttribute('fill', this._fillColor)\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillOpacity(): number {\n    return this._fillOpacity\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillOpacity(opacity: number) {\n    this._fillOpacity = opacity\n    if (opacity !== undefined)\n      this.groupSvg.setAttribute('fill-opacity', opacity.toString())\n  }\n}\n\nexport default Arc\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Arc from './Arc'\n\nclass ArcBy3PointsAndRadius extends Arc {\n  radius: number\n  constructor(\n    figure: Figure,\n    {\n      addBorders = true,\n      center,\n      codingMarks = 1,\n      end,\n      radius,\n      start,\n      ...options\n    }: {\n      addBorders?: boolean\n      center: Point\n      codingMarks?: 1|2|3\n      end: Point\n      radius: number\n      start: Point\n    } & OptionsElement2D,\n  ) {\n    const tempLine = figure.create('Segment', {\n      isChild: true,\n      isSelectable: true,\n      isVisible: false,\n      point1: center,\n      point2: start,\n    })\n    const newStart = figure.create('PointOnLineAtDistance', {\n      distance: radius,\n      isChild: true,\n      isVisible: false,\n      line: tempLine,\n      shape: start.shape,\n    })\n    const dynamicAngle = figure.create('AngleOriented', {\n      center,\n      end,\n      start: newStart,\n    })\n    super(figure, {\n      addBorders,\n      center,\n      codingMarks,\n      dynamicAngle,\n      start: newStart,\n      ...options,\n    })\n    this.radius = radius\n  }\n}\n\nexport default ArcBy3PointsAndRadius\n","import type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass Const extends DynamicNumber {\n  constructor(\n    figure: Figure,\n    { isChild, value }: { isChild?: boolean; value: number },\n  ) {\n    super(figure, { isChild })\n    this.type = 'Const'\n    this.value = value\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      isChild: this.isChild,\n      type: this.type,\n      value: this.value,\n    }\n  }\n}\n\nexport default Const\n","import Const from '../../dynamicNumbers/Const'\nimport type Figure from '../../Figure'\nimport { polarToCartesian } from '../calculus/utils'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Arc from './Arc'\n\nclass ArcByCenterRadiusAndAngles extends Arc {\n  endAngle: number\n  radius: number\n  startAngle: number\n  constructor(\n    figure: Figure,\n    {\n      addBorders = true,\n      center,\n      color,\n      endAngle,\n      fillColor,\n      fillOpacity,\n      radius,\n      startAngle,\n      ...options\n    }: {\n      addBorders?: boolean\n      center: Point\n      endAngle: number\n      radius: number\n      startAngle: number\n    } & OptionsElement2D,\n  ) {\n    const dynamicAngle = new Const(figure, {\n      isChild: true,\n      value: endAngle - startAngle,\n    })\n    const { x, y } = polarToCartesian(center, radius, startAngle)\n    const start = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x,\n      y,\n    })\n    super(figure, {\n      addBorders,\n      center,\n      color,\n      dynamicAngle,\n      fillColor,\n      fillOpacity,\n      start,\n      ...options,\n    })\n    this.radius = radius\n    this.startAngle = startAngle\n    this.endAngle = endAngle\n    this.type = 'ArcByCenterRadiusAndAngles'\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      endAngle: this.endAngle,\n      fillColor: this.fillColor,\n      idCenter: this.center.id,\n      radius: this.radius,\n      startAngle: this.startAngle,\n    }\n  }\n\n  get latex(): string {\n    let result = `% Arc de cercle ${this.id}`\n    const start = polarToCartesian(this.center, this.radius, this.startAngle)\n    if (this.fillColor && this.fillColor !== 'none') {\n      result += `\\n\\\\fill${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.startAngle})}, {${this.center.y} + ${this.radius} * sin(${this.startAngle})}) arc(${this.startAngle}:${this.endAngle}:${this.radius}) -- \n    cycle;`\n    } else {\n      result += `\\n\\\\draw${this.latexOptions} (${start.x}, ${start.y}) arc (${this.startAngle}:${this.endAngle}:${this.radius});`\n    }\n    if (this.addBorders) {\n      result += `\\n\\\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.startAngle})}, {${this.center.y} + ${this.radius} * sin(${this.startAngle})});`\n      result += `\\n\\\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.endAngle})}, {${this.center.y} + ${this.radius} * sin(${this.endAngle})});`\n    }\n    return result\n  }\n}\n\nexport default ArcByCenterRadiusAndAngles\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\nimport Ray from './Ray'\n\nclass BisectorByPoints extends Ray {\n  pointOnBisector: Point\n  pointOnSide1: Point\n  pointOnSide2: Point\n  constructor(\n    figure: Figure,\n    {\n      origin,\n      pointOnSide1,\n      pointOnSide2,\n      ...options\n    }: {\n      origin: Point\n      pointOnSide1: Point\n      pointOnSide2: Point\n    } & OptionsElement2D,\n  ) {\n    let angle =\n      Math.atan2(pointOnSide2.y - origin.y, pointOnSide2.x - origin.x) -\n      Math.atan2(pointOnSide1.y - origin.y, pointOnSide1.x - origin.x)\n    if (angle > Math.PI) angle -= 2 * Math.PI\n    if (angle < -Math.PI) angle += 2 * Math.PI\n    const x =\n      origin.x +\n      Math.cos(angle / 2) * (pointOnSide1.x - origin.x) -\n      Math.sin(angle / 2) * (pointOnSide1.y - origin.y)\n    const y =\n      origin.y +\n      Math.sin(angle / 2) * (pointOnSide1.x - origin.x) +\n      Math.cos(angle / 2) * (pointOnSide1.y - origin.y)\n    const bisectorPoint = figure.create('Point', {\n      isChild: true,\n      isSelectable: false,\n      isVisible: false,\n      x,\n      y,\n    })\n    super(figure, { point1: origin, point2: bisectorPoint, ...options })\n    this.type = 'BisectorByPoints'\n    this.pointOnSide1 = pointOnSide1\n    this.pointOnSide2 = pointOnSide2\n    this.pointOnBisector = bisectorPoint\n    this.pointOnSide1.subscribe(this)\n    this.pointOnSide2.subscribe(this)\n    this.point2.unsubscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.point1.id,\n      idPointOnSide1: this.pointOnSide1.id,\n      idPointOnSide2: this.pointOnSide2.id,\n      isChild: this.isChild,\n    }\n  }\n\n  update(): void {\n    let angle =\n      Math.atan2(\n        this.pointOnSide2.y - this.point1.y,\n        this.pointOnSide2.x - this.point1.x,\n      ) -\n      Math.atan2(\n        this.pointOnSide1.y - this.point1.y,\n        this.pointOnSide1.x - this.point1.x,\n      )\n    if (angle > Math.PI) angle -= 2 * Math.PI\n    if (angle < -Math.PI) angle += 2 * Math.PI\n    const x =\n      this.point1.x +\n      Math.cos(angle / 2) * (this.pointOnSide1.x - this.point1.x) -\n      Math.sin(angle / 2) * (this.pointOnSide1.y - this.point1.y)\n    const y =\n      this.point1.y +\n      Math.sin(angle / 2) * (this.pointOnSide1.x - this.point1.x) +\n      Math.cos(angle / 2) * (this.pointOnSide1.y - this.point1.y)\n    this.point2.moveTo(x, y)\n    super.update()\n  }\n\n  get description(): string {\n    const originName =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const pointOnSide1Name =\n      this.pointOnSide1.label !== ''\n        ? this.pointOnSide1.label\n        : this.pointOnSide1.id\n    const pointOnSide2Name =\n      this.pointOnSide2.label !== ''\n        ? this.pointOnSide2.label\n        : this.pointOnSide2.id\n    return `Bissectrice de l'angle $\\\\widehat{${pointOnSide1Name}${originName}${pointOnSide2Name}}$`\n  }\n}\n\nexport default BisectorByPoints\n","import type Figure from '../../Figure'\nimport { colorLatex } from '../../lib/handleColors'\nimport Element2D from '../Element2D'\nimport type { OptionsCircle, OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Segment from './Segment'\n\n/**\n * Trace un cercle dont on connait le centre et le rayon\n */\nclass Circle extends Element2D {\n  /** Couleur de remplissage du cercle */\n  private _fillColor: 'none' | string\n  /** Opacité de remplissage entre 0 et 1 */\n  private _fillOpacity?: number\n  /** Rayon du cercle */\n  _radius: number\n  /** Pointeur vers la première extrémité */\n  center: Point\n  constructor(\n    figure: Figure,\n    {\n      center,\n      fillOpacity = figure.options.fillOpacity,\n      radius,\n      ...options\n    }: OptionsCircle & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Circle'\n    this._radius = radius\n    this.center = center\n    if (options?.fillColor !== undefined) this._fillColor = options.fillColor\n    else this._fillColor = this.figure.options.fillColor\n    this.fillOpacity = fillOpacity || this.figure.options.fillOpacity\n    if (options?.isDashed !== undefined) this._isDashed = options.isDashed\n  }\n\n  /** Créé un nouveau cercle image d'une homothétie */\n  dilate(center: Point, factor: number, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: Math.abs(factor) * this.radius,\n      ...options,\n    })\n    newCircle.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newCircle\n  }\n\n  distancePointer(x: number, y: number): number {\n    if (\n      (this.figure.currentState === 'FILL' ||\n        (this.figure.currentState === 'SET_OPTIONS' &&\n          this.fillColor !== 'none')) &&\n      this.figure.pointer.isInCircle(this)\n    )\n      return 0\n    const distanceToCenter =\n      Math.hypot(\n        (x - this.center.x) * this.figure.xScale,\n        (y - this.center.y) * this.figure.yScale,\n      ) * this.figure.scale\n    return Math.abs(distanceToCenter - this.radius * this.figure.scale)\n  }\n\n  draw(): void {\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'circle',\n    )\n    this.center.subscribe(this)\n    this.setVisibilityColorThicknessAndDashed()\n    this.update()\n  }\n\n  /** Créé un nouveau cercle image d'une symétrie centrale */\n  reflect(center: Point, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = { center, origin: this, type: 'reflect' }\n    return newCircle\n  }\n\n  /** Créé un nouveau cercle image d'une symétrie axiale */\n  reflectOverLine(line: Segment, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return newCircle\n  }\n\n  /** Créé un nouveau cercle image d'une rotation */\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = { angle, center, origin: this, type: 'rotation' }\n    return newCircle\n  }\n\n  /** Modifie la couleur et l'épaisseur de l'élément */\n  setVisibilityColorThicknessAndDashed(): void {\n    this.color = this._color\n    this.fillColor = this._fillColor\n    if (this._fillOpacity !== undefined) this.fillOpacity = this._fillOpacity\n    if (this._isDashed !== undefined) this.isDashed = this._isDashed\n    this.isDashed = this._isDashed\n    this.isVisible = this._isVisible\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      idCenter: this.center.id,\n      radius: this._radius,\n    }\n  }\n\n  translate(point1: Point, point2: Point, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.translate(point1, point2, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return newCircle\n  }\n\n  update(): void {\n    if (\n      this.center.x === undefined ||\n      this.center.y === undefined ||\n      Number.isNaN(this.center.x) ||\n      Number.isNaN(this.center.y)\n    ) {\n      this.groupSvg.removeAttribute('r')\n    } else {\n      const xSvg = this.figure.xToSx(this.center.x)\n      const ySvg = this.figure.yToSy(this.center.y)\n      const rSvg = this.figure.pixelsPerUnit * this._radius * this.figure.scale\n      this.groupSvg.setAttribute('cx', `${xSvg}`)\n      this.groupSvg.setAttribute('cy', `${ySvg}`)\n      this.groupSvg.setAttribute('r', `${rSvg}`)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie d'axe  $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la translation qui transforme $${(this.transformation.point1 as Point).notation}$ en $${(this.transformation.point2 as Point).notation}$`\n    }\n    const centerName =\n      this.center.label !== '' ? this.center.label : this.center.id\n    return `Cercle $${this.label}$ de centre $${centerName}$ et de rayon ${this.radius} cm`\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillColor(): string {\n    return this._fillColor\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillColor(color: string) {\n    this._fillColor = color\n    this.groupSvg.setAttribute('fill', this._fillColor)\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillOpacity(): number | undefined {\n    return this._fillOpacity\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillOpacity(opacity: number | undefined) {\n    this._fillOpacity = opacity\n    if (opacity !== undefined)\n      this.groupSvg.setAttribute('fill-opacity', opacity.toString())\n  }\n\n  get label(): string {\n    return this.id.replace('element', 'C_')\n  }\n\n  get latex(): string {\n    let result = `% Cercle ${this.id}`\n    result += `\\n\\\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) circle (${this.radius});`\n    return result\n  }\n\n  get latexOptions(): string {\n    const options = super.latexOptions\n      .replace('[', '')\n      .replace(']', '')\n      .split(',')\n      .filter((opt) => opt !== '')\n    if (this.fillColor !== 'none') {\n      options.push(`fill=${colorLatex(this.fillColor)}`)\n    }\n    if (this.fillOpacity !== 1 && this.fillOpacity !== undefined) {\n      options.push(`fill opacity=${this.fillOpacity}`)\n    }\n    if (options.length > 0) {\n      return `[${options.join(',')}]`\n    }\n    return ''\n  }\n  get notation(): string {\n    return this.id\n  }\n\n  get radius(): number {\n    return this._radius\n  }\n\n  set radius(radius: number) {\n    this._radius = radius\n    this.update()\n  }\n}\n\nexport default Circle\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\nimport type {\n  OptionsCircleCenterDynamicRadius,\n  OptionsElement2D,\n} from '../interfaces'\nimport type Point from '../points/Point'\nimport Circle from './Circle'\n\nclass CircleCenterDynamicRadius extends Circle {\n  /** Centre du cercle */\n  center: Point\n  /** Rayon du cercle */\n  readonly radiusDynamic: DynamicNumber\n  constructor(\n    figure: Figure,\n    {\n      center,\n      radius,\n      ...options\n    }: OptionsCircleCenterDynamicRadius & OptionsElement2D,\n  ) {\n    super(figure, { center, radius: radius.value, ...options })\n    this.type = 'CircleDynamicRadius'\n    this.center = center\n    this.radiusDynamic = radius\n    this.radiusDynamic.subscribe(this)\n    this.update()\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      idCenter: this.center.id,\n      idRadius: this.radiusDynamic.id,\n    }\n  }\n\n  update(): void {\n    if (\n      this.radiusDynamic?.value === undefined ||\n      this.center.x === undefined ||\n      this.center.y === undefined\n    )\n      return\n    const xSvg = this.figure.xToSx(this.center.x)\n    const ySvg = this.figure.yToSy(this.center.y)\n    const rSvg =\n      this.figure.pixelsPerUnit * this.radiusDynamic?.value * this.figure.scale\n    this._radius = this.radiusDynamic.value\n    this.groupSvg.setAttribute('cx', `${xSvg}`)\n    this.groupSvg.setAttribute('cy', `${ySvg}`)\n    if (Number.isFinite(rSvg)) this.groupSvg.setAttribute('r', `${rSvg}`)\n    this.notify()\n  }\n}\n\nexport default CircleCenterDynamicRadius\n","import Distance from '../../dynamicNumbers/Distance'\nimport type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Circle from './Circle'\nimport CircleCenterDynamicRadius from './CircleCenterDyamicRadius'\nimport type Segment from './Segment'\n\n/**\n * Trace un cercle défini par un centre et une distance dynamique\n * Cela servira au report de longueur ou pour tracer un cercle dont le rayon est géré par un curseur\n */\nclass CircleCenterPoint extends CircleCenterDynamicRadius {\n  point: Point\n  constructor(\n    figure: Figure,\n    {\n      center,\n      point,\n      ...options\n    }: { center: Point; point: Point } & OptionsElement2D,\n  ) {\n    const radius = new Distance(figure, {\n      isChild: true,\n      point1: center,\n      point2: point,\n    })\n    super(figure, { center, radius, ...options })\n    this.type = 'CircleCenterPoint'\n    this.point = point\n    this.point.subscribe(this)\n  }\n\n  dilate(\n    center: Point,\n    factor: number,\n    options?: OptionsElement2D,\n  ): CircleCenterPoint {\n    const newCenter = this.center.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newCircle\n  }\n\n  reflect(center: Point, options?: OptionsElement2D): CircleCenterPoint {\n    const newCenter = this.center.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { center, origin: this, type: 'reflect' }\n    return newCircle\n  }\n\n  reflectOverLine(\n    line: Segment,\n    options?: OptionsElement2D,\n  ): CircleCenterPoint {\n    const newCenter = this.center.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return newCircle\n  }\n\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { center, angle, origin: this, type: 'rotation' }\n    return newCircle\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      idCenter: this.center.id,\n      idPoint: this.point.id,\n    }\n  }\n\n  translate(\n    point1: Point,\n    point2: Point,\n    options?: OptionsElement2D,\n  ): CircleCenterPoint {\n    const newCenter = this.center.translate(point1, point2, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.translate(point1, point2, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return newCircle\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie d'axe $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`\n    }\n    const centerName =\n      this.center.label !== '' ? this.center.label : this.center.id\n    const pointName = this.point.label !== '' ? this.point.label : this.point.id\n    return `Cercle de centre $${centerName}$ et passant par le point $${pointName}$`\n  }\n}\n\nexport default CircleCenterPoint\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Vector from '../vector/Vector'\nimport Line from './Line'\n\nclass LineByPointVector extends Line {\n  point: Point\n  vector: Vector\n  constructor(\n    figure: Figure,\n    {\n      point,\n      vector,\n      ...options\n    }: { point: Point; vector: Vector } & OptionsElement2D,\n  ) {\n    const point2 = point.translateVector(vector)\n    point2.isVisible = false\n    point2.isSelectable = true\n    point2.isVisible = false\n    point2.shape = point.shape\n    super(figure, { point1: point, point2, shape: '', ...options })\n    this.type = 'LineByPointVector'\n    this.point = point\n    this.vector = vector\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint: this.point.id,\n      idVector: this.vector.id,\n    }\n  }\n}\n\nexport default LineByPointVector\n","import type Figure from '../../Figure'\nimport { parallelCoords } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsLineParallel } from '../interfaces'\nimport type Point from '../points/Point'\nimport Line from './Line'\n\nclass LineParallel extends Line {\n  /** Droite parallèle qui la définit */\n  line: Line\n  /** Point par lequel passe cette droite */\n  point: Point\n  constructor(\n    figure: Figure,\n    { line, point, ...options }: OptionsLineParallel & OptionsElement2D,\n  ) {\n    const { x1, y1, x2, y2 } = parallelCoords({ line, point, figure })\n    const point1 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      x: x1,\n      y: y1,\n    })\n    const point2 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      x: x2,\n      y: y2,\n    })\n    super(figure, { point1, point2, ...options })\n    this.type = 'LineParallel'\n    this.line = line\n    this.point = point\n    this.line.subscribe(this)\n    this.point.subscribe(this)\n    this.point1.unsubscribe(this)\n    this.point2.unsubscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    const { x1, y1, x2, y2 } = parallelCoords({\n      line: this.line,\n      point: this.point,\n      figure: this.figure,\n    })\n    this.point1.moveTo(x1, y1)\n    this.point2.moveTo(x2, y2)\n    super.update()\n  }\n\n  get description(): string {\n    const pointName = this.point.label !== '' ? this.point.label : this.point.id\n    if (\n      this.line.point1.label !== '' &&\n      this.line.point2.label !== '' &&\n      this.point.label !== ''\n    ) {\n      return `Droite parallèle à $${this.line.notation}$ et passant par le point $${pointName}$`\n    }\n    const parallelLines = [...this.figure.elements.values()].filter(\n      (element) => element instanceof LineParallel,\n    ) as LineParallel[]\n    const index = parallelLines.indexOf(this)\n    return `Droite parallèle n°${index + 1}`\n  }\n}\n\nexport default LineParallel\n","import type Figure from '../../Figure'\nimport {\n  type Coords,\n  orthogonalProjectionCoord,\n  rotationCoord,\n} from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsLinePerpendicular } from '../interfaces'\nimport type Point from '../points/Point'\nimport Line from './Line'\n\nclass LinePerpendicular extends Line {\n  /** Droite perpendiculaire qui la définit */\n  line: Line\n  /** Point par lequel passe cette droite */\n  point: Point\n  constructor(\n    figure: Figure,\n    { line, point, ...options }: OptionsLinePerpendicular & OptionsElement2D,\n  ) {\n    const x1 = point.x\n    const y1 = point.y\n    let result: Coords\n    if (x1 === line.point1.x && y1 === line.point1.y) {\n      result = rotationCoord(line.point2, line.point1, 90)\n    } else if (x1 === line.point2.x && y1 === line.point2.y) {\n      result = rotationCoord(line.point1, point, 90)\n    } else if (point.isOnline(line)) {\n      result = rotationCoord(line.point1, point, 90)\n    } else {\n      result = orthogonalProjectionCoord(point, line)\n    }\n    const x2 = result.x\n    const y2 = result.y\n    const point1 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      color: '',\n      x: x1,\n      y: y1,\n    })\n    const point2 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      color: '',\n      x: x2,\n      y: y2,\n    })\n    super(figure, { point1, point2, ...options })\n    this.type = 'LinePerpendicular'\n    this.line = line\n    this.point = point\n    this.line.subscribe(this)\n    this.point.subscribe(this)\n    this.point1.unsubscribe(this)\n    this.point2.unsubscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    const x1 = this.point.x\n    const y1 = this.point.y\n    let result: Coords\n    if (x1 === this.line.point1.x && y1 === this.line.point1.y) {\n      result = rotationCoord(this.line.point2, this.line.point1, 90)\n    } else if (x1 === this.line.point2.x && y1 === this.line.point2.y) {\n      result = rotationCoord(this.line.point1, this.point, 90)\n    } else if (this.point.isOnline(this.line)) {\n      result = rotationCoord(this.line.point1, this.point, 90)\n    } else {\n      result = orthogonalProjectionCoord(this.point, this.line)\n    }\n    const x2 = result.x\n    const y2 = result.y\n    this.point1.moveTo(x1, y1)\n    this.point2.moveTo(x2, y2)\n    super.update()\n  }\n\n  get description(): string {\n    const pointName = this.point.label !== '' ? this.point.label : this.point.id\n    if (\n      this.line.point1.label !== '' &&\n      this.line.point2.label !== '' &&\n      this.point.label !== ''\n    ) {\n      return `Droite perpendiculaire à $${this.line.notation}$ et passant par le point $${pointName}$`\n    }\n    const perpendicularLines = [...this.figure.elements.values()].filter(\n      (element) => element instanceof LinePerpendicular,\n    ) as LinePerpendicular[]\n    const index = perpendicularLines.indexOf(this)\n    return `Droite perpendiculaire n°${index + 1}`\n  }\n}\n\nexport default LinePerpendicular\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport LinePerpendicular from './LinePerpendicular'\nimport type Segment from './Segment'\n\nclass PerpendicularBisector extends LinePerpendicular {\n  notationSegment: string\n  constructor(\n    figure: Figure,\n    { segment, ...options }: { segment: Segment } & OptionsElement2D,\n  ) {\n    const middlePoint = figure.create('Middle', {\n      isChild: true,\n      isSelectable: true,\n      isVisible: false,\n      point1: segment.point1,\n      point2: segment.point2,\n      shape: '',\n    })\n    super(figure, { line: segment, point: middlePoint, ...options })\n    this.type = 'PerpendicularBisector'\n    this.notationSegment = segment.notation\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idSegment: this.line.id,\n    }\n  }\n\n  get description(): string {\n    return `Médiatrice du segment $${this.notationSegment}$`\n  }\n\n  get notation(): string {\n    return `\\\\text{médiatrice de }${this.notationSegment}`\n  }\n}\n\nexport default PerpendicularBisector\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport PerpendicularBisector from './PerpendicularBisector'\n\nclass PerpendicularBisectorByPoints extends PerpendicularBisector {\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: { point1: Point; point2: Point } & OptionsElement2D,\n  ) {\n    const segment = figure.create('Segment', {\n      isChild: true,\n      isSelectable: true,\n      isVisible: false,\n      point1,\n      point2,\n    })\n    super(figure, { segment, ...options })\n    this.type = 'PerpendicularBisectorByPoints'\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint1: this.line.point1.id,\n      idPoint2: this.line.point2.id,\n    }\n  }\n\n  get description(): string {\n    const point1Name =\n      this.line.point1.label !== ''\n        ? this.line.point1.label\n        : this.line.point1.id\n    const point2Name =\n      this.line.point2.label !== ''\n        ? this.line.point2.label\n        : this.line.point2.id\n    return `Médiatrice du segment $[${point1Name}${point2Name}]$`\n  }\n}\n\nexport default PerpendicularBisectorByPoints\n","import type Figure from '../../Figure'\nimport { colorLatex } from '../../lib/handleColors'\nimport type { Coords } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Segment from './Segment'\n\n/**\n * Trace une polygone\n */\n\nclass Polygon extends Element2D {\n  _fillColor = 'none'\n  _fillOpacity = 0.5\n  /** Est-ce qu'on créé un segment pour chaque côté ? */\n  isBuiltWithSegments: boolean\n  /** Liste des sommets */\n  points: Point[]\n  /** Liste des côtés */\n  readonly segments: Segment[]\n  /** Forme des sommets */\n  shape: '' | 'o' | 'x'\n  constructor(\n    figure: Figure,\n    {\n      fillColor = 'none',\n      fillOpacity = figure.options.fillOpacity,\n      isBuiltWithSegments = true,\n      points,\n      shape = '',\n      ...options\n    }: {\n      fillColor?: string\n      fillOpacity?: number\n      isBuiltWithSegments?: boolean\n      points: Point[] | Coords[]\n      shape?: '' | 'o' | 'x'\n    } & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Polygon'\n    if (isStricCoords(points[0])) {\n      this.points = []\n      for (const coord of points as Coords[]) {\n        this.points.push(\n          this.figure.create('Point', {\n            x: coord.x,\n            y: coord.y,\n            isVisible: false,\n            isChild: false,\n          }),\n        )\n      }\n    } else {\n      this.points = points as Point[]\n    }\n    this.shape = shape\n    this.segments = []\n    this.fillColor = fillColor\n    this.fillOpacity = fillOpacity\n    this.isBuiltWithSegments = isBuiltWithSegments\n    for (const point of this.points) {\n      point.subscribe(this)\n    }\n  }\n\n  /** Créer un segment caché pour chacun des côtés du polygone et ainsi permettre de placer des milieux, tracer des perpendiculaires... */\n  createSegments(): void {\n    for (let i = 0; i < this.points.length; i++) {\n      const point1 = this.points.at(i % this.points.length) as Point\n      const point2 = this.points.at((i + 1) % this.points.length) as Point\n      const segment = this.figure.create('Segment', {\n        color: '',\n        id: `${this.id}_segment${i.toString()}`,\n        isChild: true,\n        point1,\n        point2,\n      })\n      this.segments.push(segment)\n    }\n    for (const segment of this.segments) {\n      segment.createdBy = this\n    }\n  }\n\n  dilate(center: Point, factor: number, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.dilate(center, factor, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newPolygon\n  }\n\n  distancePointer(x: number, y: number): number {\n    if (\n      this.figure.currentState === 'FILL' &&\n      this.figure.pointer.isInPolygon(this)\n    )\n      return 0\n    let minDistance = Number.POSITIVE_INFINITY\n    for (const segment of this.segments) {\n      const distance = segment.distancePointer(x, y)\n      if (distance < minDistance) minDistance = distance\n    }\n    return minDistance\n  }\n\n  draw(): void {\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polygon',\n    )\n    this.groupSvg.setAttribute('fill', this.fillColor ?? 'none')\n    this.groupSvg.setAttribute('fill-opacity', this.fillOpacity.toString())\n    this.setVisibilityColorThicknessAndDashed()\n    if (this.isBuiltWithSegments) {\n      this.createSegments()\n    }\n    this.update()\n  }\n\n  reflect(center: Point, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(point.reflect(center, { isChild: true, isVisible: false }))\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = { center, origin: this, type: 'reflect' }\n    return newPolygon\n  }\n\n  reflectOverLine(line: Segment, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.reflectOverLine(line, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return newPolygon\n  }\n\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.rotate(center, angle, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = {\n      center,\n      origin: this,\n      angle,\n      type: 'rotation',\n    }\n    return newPolygon\n  }\n\n  remove(): void {\n    super.remove()\n    for (const segment of this.segments) {\n      segment.remove()\n    }\n  }\n\n  toJSON(): object {\n    const idPoints = []\n    for (const point of this.points) {\n      idPoints.push(point.id)\n    }\n    return {\n      ...this.jsonOptions(),\n      idPoints,\n    }\n  }\n\n  translate(point1: Point, point2: Point, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.translate(point1, point2, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return newPolygon\n  }\n\n  update(): void {\n    this.notify()\n    // Filtrer les points avec des coordonnées valides\n    const validPoints = this.points.filter(\n      (point) => Number.isFinite(point.x) && Number.isFinite(point.y),\n    )\n\n    if (validPoints.length < 2) {\n      // Pas assez de points valides pour dessiner un polygone\n      this.groupSvg.removeAttribute('points')\n    } else {\n      let pointsCoords = ''\n      for (const point of validPoints) {\n        pointsCoords += `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()} `\n      }\n      this.groupSvg.setAttribute('points', pointsCoords)\n    }\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la symétrie d'axe $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`\n    }\n    return `Polygone $${this.notation}$`\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillColor(): string {\n    return this._fillColor\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillColor(color: string) {\n    this._fillColor = color\n    this.groupSvg.setAttribute('fill', this._fillColor)\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillOpacity(): number {\n    return this._fillOpacity ?? this.figure.options.fillOpacity\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillOpacity(opacity: number) {\n    this._fillOpacity = opacity\n    if (opacity !== undefined)\n      this.groupSvg.setAttribute('fill-opacity', opacity.toString())\n  }\n\n  get latex(): string {\n    let result = `% Polygone ${this.points.reduce((acc, point) => acc + point.label, '')}`\n    result += `\\n \\\\draw [color=${colorLatex(this.color ? this.color : 'none')},fill=${colorLatex(this.fillColor ? this.fillColor : 'none')},fill opacity=${this.fillOpacity},line width=${this.thickness}] `\n    for (const point of this.points) {\n      result += `(${point.x.toFixed(2)},${point.y.toFixed(2)}) -- `\n    }\n    result += ' cycle;'\n    return result\n  }\n\n  get notation(): string {\n    return this.points.reduce((acc, point) => {\n      const pointName = point.label === '' ? point.id : point.label\n      return acc + pointName\n    }, '')\n  }\n}\n\nexport default Polygon\n\n/**\n * Vérifie si l'objet est uniquement de type Coords et n'a que les clés x et y\n * @param obj\n * @returns\n */\nexport function isStricCoords(obj: Coords): obj is { x: number; y: number } {\n  if (\n    typeof obj === 'object' &&\n    obj !== null &&\n    Object.keys(obj).length === 2\n  ) {\n    if (\n      'x' in obj &&\n      'y' in obj &&\n      typeof obj.x === 'number' &&\n      typeof obj.y === 'number'\n    ) {\n      return true\n    }\n  }\n  return false\n}\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D, OptionsPolyline } from '../interfaces'\nimport type Point from '../points/Point'\n\n/**\n * Trace une ligne brisée\n */\nclass Polyline extends Element2D {\n  /** Liste des sommets */\n  points: Point[]\n  /** Détermine s'il faut afficher les deux extrémités, que celle de gauche ou que celle de droite */\n  shape?: '' | '|-' | '|-' | '|-|'\n  constructor(\n    figure: Figure,\n    { points, ...options }: OptionsPolyline & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Polyline'\n    this.points = points\n    for (const point of points) {\n      point.subscribe(this)\n    }\n  }\n\n  draw(): void {\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polyline',\n    )\n    this.groupSvg.setAttribute('fill', 'none')\n    this.setVisibilityColorThicknessAndDashed()\n    this.update()\n  }\n\n  toJSON(): object {\n    const idPoints = []\n    for (const point of this.points) {\n      idPoints.push(point.id)\n    }\n    return {\n      ...this.jsonOptions(),\n      idPoints,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    if (!allCoordsAreNumber(this.points)) {\n      this.groupSvg.removeAttribute('points')\n    } else {\n      let pointsCoords = ''\n      for (const point of this.points) {\n        pointsCoords += `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()} `\n      }\n      this.groupSvg.setAttribute('points', pointsCoords)\n    }\n  }\n}\n\nexport default Polyline\n\nfunction allCoordsAreNumber(points: Point[]): boolean {\n  for (const point of points) {\n    if (!Number.isFinite(point.x) || !Number.isFinite(point.y)) return false\n  }\n  return true\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\nimport 'katex/dist/katex.min.css'\n\nimport type Figure from '../../Figure'\n\nimport { round } from '../../lib/format'\nimport { orangeMathalea } from '../defaultValues'\nimport Element2D from '../Element2D'\nimport type Grid from '../grid/Grid'\n\n/**\n * Créé un div contenant un texte qui est mis au dessus du svg\n * par défaut KaTeX s'occupe du rendu du div\n */\nclass TextByPosition extends Element2D {\n  /** Angle avec l'horizontal exprimé en degrés */\n  _angleWithHorizontalInDegres = 0\n  private _backgroundColor?: string\n  _color: string\n  private _fontSize: string\n  private _text!: string\n  private _x!: number\n  private _y!: number\n  /** Ancrage du texte */\n  anchor:\n    | 'bottomCenter'\n    | 'bottomLeft'\n    | 'bottomRight'\n    | 'middleCenter'\n    | 'middleLeft'\n    | 'middleRight'\n    | 'topCenter'\n    | 'topLeft'\n    | 'topRight'\n  /** Le texte est mis dans un div qui s'affichera par dessus le SVG */\n  div!: HTMLDivElement\n  dxInPixels: number\n  dyInPixels: number\n\n  constructor(\n    figure: Figure,\n    {\n      anchor = 'middleCenter',\n      backgroundColor,\n      color = 'black',\n      dxInPixels = 0,\n      dyInPixels = 0,\n      fontSize = figure.options.fontSize,\n      id,\n      isChild = false,\n      isDeletable = true,\n      isSelectable = true,\n      isVisible = true,\n      text,\n      x,\n      y,\n    }: {\n      anchor?:\n        | 'bottomCenter'\n        | 'bottomLeft'\n        | 'bottomRight'\n        | 'middleCenter'\n        | 'middleLeft'\n        | 'middleRight'\n        | 'topCenter'\n        | 'topLeft'\n        | 'topRight'\n      backgroundColor?: string\n      color?: string\n      dx?: number\n      dxInPixels?: number\n      dy?: number\n      dyInPixels?: number\n      fontSize?: string\n      id?: string\n      isChild?: boolean\n      isDeletable?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      text: string\n      x: number\n      y: number\n    },\n  ) {\n    super(figure, { id, isChild })\n    this.type = 'TextByPosition'\n    this._x = x\n    this._y = y\n    this.div = document.createElement('div')\n    this._fontSize = fontSize\n    this.dxInPixels = dxInPixels\n    this.dyInPixels = dyInPixels\n    this._text = text\n    this.backgroundColor = backgroundColor\n    this._color = color\n    this.anchor = anchor\n    this.isDeletable = isDeletable\n    this.isSelectable = isSelectable\n    this.isVisible = isVisible\n  }\n\n  /** Distance entre un point et le pointeur de la souris exprimée dans les unités du repère */\n  distancePointer(pointerX: number, pointerY: number): number {\n    if (!this.figure || !this.div) return Number.POSITIVE_INFINITY// Protection (orphelin)\n    if (this._x === undefined || this._y === undefined)\n      return Number.POSITIVE_INFINITY\n\n    // Convertir les coordonnées du pointeur en pixels du SVG\n    const pointerSx = this.figure.xToSx(pointerX - this.figure.xMin)\n    const pointerSy = this.figure.yToSy(pointerY - this.figure.yMax)\n\n    // Obtenir les dimensions du div\n    const divRect = this.div.getBoundingClientRect()\n    const svgRect = this.figure.svg?.getBoundingClientRect()\n\n    if (!svgRect) return Number.POSITIVE_INFINITY\n\n    // Calculer la position du div par rapport au SVG\n    const divLeft = divRect.left - svgRect.left\n    const divTop = divRect.top - svgRect.top\n    const divRight = divLeft + divRect.width\n    const divBottom = divTop + divRect.height\n\n    // Calculer la distance au rectangle du div\n    let dx = 0\n    let dy = 0\n\n    if (pointerSx < divLeft) {\n      dx = divLeft - pointerSx\n    } else if (pointerSx > divRight) {\n      dx = pointerSx - divRight\n    }\n\n    if (pointerSy < divTop) {\n      dy = divTop - pointerSy\n    } else if (pointerSy > divBottom) {\n      dy = pointerSy - divBottom\n    }\n\n    // Retourner la distance en unités du repère (ou 0 si le pointeur est dans le div)\n    // On divise par pixelsPerUnit car handleHover multiplie par pixelsPerUnit\n    return Math.hypot(dx, dy) / this.figure.pixelsPerUnit\n  }\n  draw(): void {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this.div.style.position = 'absolute'\n    // Les événements passent à travers le div pour être détectés par le SVG\n    this.div.style.pointerEvents = 'none'\n    this.figure.divFigure?.appendChild(this.div)\n    if (this.color !== 'black') this.div.style.color = this.color\n    if (this.backgroundColor !== undefined)\n      this.div.style.backgroundColor = this.backgroundColor\n    this.text = this._text\n    this.x = this._x\n    this.y = this._y\n    if (this._angleWithHorizontalInDegres !== 0) {\n      this.div.style.transform = this.div.style.transform.replace(\n        /rotate\\([0-9.]+deg\\)/,\n        '',\n      )\n      this.div.style.transformOrigin = 'center'\n      this.div.style.transform += ` rotate(${this._angleWithHorizontalInDegres}deg)`\n      this.div.style.transform += 'translateY(-50%)'\n      this.div.style.verticalAlign = 'middle'\n    }\n    this.div.style.alignItems = 'center'\n    if (this.figure.scale - this.figure.initial.scale !== 0) {\n      /* MGU essaie de augmnter le texte avec le zoom */\n      if (this._fontSize.includes('em')) {\n        // rien à faire, c'est en fonction de la taille du caractère m\n      } else if (this._fontSize.includes('pt')) {\n        this.fontSize = `${Number.parseFloat(this._fontSize) * (1 + (this.figure.scale - this.figure.initial.scale))}pt`\n      }\n    }\n  }\n\n  /** Déplace le texte aux coordonnées données */\n  moveTo(x: number, y: number): void {\n    this.x = x\n    this.y = y\n  }\n\n  remove(): void {\n    super.remove()\n    // Nettoyer les event listeners avant de supprimer le div\n    if (this.div) {\n      this.div.onclick = null\n      this.div.onchange = null\n      this.div.oninput = null\n      this.div.onmousedown = null\n      this.div.onmouseup = null\n      this.div.onmousemove = null\n      this.div.onmouseenter = null\n      this.div.onmouseleave = null\n      this.div.onpointerdown = null\n      this.div.onpointerup = null\n      this.div.onpointermove = null\n      this.div.onpointerleave = null\n      this.div.onkeydown = null\n      this.div.onkeyup = null\n      // Supprimer le div du DOM\n      this.div.remove()\n      // @ts-expect-error - Permettre de nullifier pour le nettoyage\n      this.div = null\n    }\n  }\n\n  update(): void {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    if (this.x !== undefined && this.y !== undefined) {\n      this.moveTo(this.x, this.y)\n    }\n    this.notify()\n    const divRect = this.div.getBoundingClientRect()\n    const svgRect = this.figure.svg?.getBoundingClientRect()\n    if (\n      svgRect &&\n      (divRect.right < svgRect.left ||\n        divRect.left > svgRect.right ||\n        divRect.bottom < svgRect.top ||\n        divRect.top > svgRect.bottom)\n    ) {\n      this.div.style.visibility = 'hidden'\n    } else {\n      this.div.style.visibility = 'visible'\n    }\n  }\n\n  set isHover(isHover: boolean) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._isHover = isHover\n    if (isHover && this.isSelectable) {\n      // Changer la couleur du texte en orange et le curseur en pointer\n      this.div.style.color = orangeMathalea\n      this.div.style.cursor = 'pointer'\n    } else {\n      // Restaurer la couleur d'origine\n      this.div.style.color = this._color\n      this.div.style.cursor = 'default'\n    }\n  }\n\n  get isHover(): boolean {\n    return this._isHover\n  }\n\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  set isVisible(isVisible: boolean) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._isVisible = isVisible\n    if (isVisible) {\n      this.figure?.divFigure?.appendChild(this.div)\n    } else {\n      this.div.remove()\n    }\n  }\n\n  get opacity(): number {\n    return this._opacity\n  }\n\n  set opacity(opacity: number) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._opacity = opacity\n    this.div.style.opacity = opacity.toString()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      backgroundColor: this.backgroundColor,\n      color: this.color,\n      name: this.id,\n      text: this.text,\n      x: round(this.x),\n      y: round(this.y),\n      anchor: this.anchor,\n    }\n  }\n\n  set angleWithHorizontalInDegres(angle: number) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._angleWithHorizontalInDegres = angle\n    this.div.style.transform = this.div.style.transform.replace(\n      /rotate\\([0-9.]+deg\\)/,\n      '',\n    )\n    this.div.style.transformOrigin = 'center'\n    this.div.style.transform += ` rotate(${angle}deg)`\n  }\n\n  get angleWithHorizontalInDegres(): number {\n    return this._angleWithHorizontalInDegres\n  }\n\n  get backgroundColor(): string | undefined {\n    return this._backgroundColor\n  }\n\n  set backgroundColor(color: string | undefined) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._backgroundColor = color\n    if (color !== undefined) {\n      this.div.style.backgroundColor = color\n    }\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color: string) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._color = color\n    this.div.style.color = color\n  }\n\n  get fontSize(): string {\n    return this._fontSize\n  }\n\n  set fontSize(fontSize: string) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._fontSize = fontSize\n    this.div.style.fontSize = fontSize\n  }\n\n  get latex(): string {\n    // On exclue les labels de la grille car ils sont gérés par l'environnement axis\n    const grid = [...this.figure.elements.values()].filter(\n      (e) => e.type === 'Grid',\n    )[0] as Grid\n    if (grid && grid.labels.indexOf(this) !== -1) return ''\n    return this.text !== '$$' && this.text !== ''\n      ? `\\\\node[${this.latexOptions}] at (${this.x},${this.y}) {${this.text}};`\n      : ''\n  }\n\n  get latexOptions(): string {\n    const superOptions = super.latexOptions\n    const options =\n      superOptions === ''\n        ? []\n        : superOptions.substring(1, superOptions.length - 1).split(',')\n    const alignment = []\n    if (this.dyInPixels > 0) alignment.push('above')\n    else if (this.dyInPixels < 0) alignment.push('below')\n    if (this.dxInPixels > 0) alignment.push('right')\n    else if (this.dxInPixels < 0) alignment.push('left')\n    const alignmentString = alignment.join(' ')\n    if (alignment.length > 0) options.push(alignmentString)\n    return options.join(',')\n  }\n\n  get text(): string {\n    return this._text\n  }\n\n  set text(text: string) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    this._text = text\n    this.div.innerHTML = text\n    renderMathInElement(this.div, {\n      delimiters: [\n        { display: true, left: '\\\\[', right: '\\\\]' },\n        { display: false, left: '$', right: '$' },\n      ],\n      errorColor: '#CC0000',\n      preProcess: (chaine: string) =>\n        chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n      strict: 'warn',\n      throwOnError: true,\n      trust: false,\n    })\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x: number) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    let styleTransform = ''\n    if (this.anchor.includes('Left')) {\n      this.div.style.left = `${this.figure.xToSx(x - this.figure.xMin).toString()}px`\n    } else if (this.anchor.includes('Right')) {\n      // this.div.style.right = this.figure.xToSx(-x + this.figure.xMax).toString() + 'px'\n      if (\n        this.figure.divFigure?.clientWidth !== undefined &&\n        this.figure.divFigure.clientWidth > this.figure.width\n      ) {\n        this.div.style.right = `${(this.figure.xToSx(-x + this.figure.xMax) + Math.max(0, this.figure.divFigure.clientWidth - this.figure.width)).toString()}px`\n      } else {\n        this.div.style.right = `${this.figure.xToSx(-x + this.figure.xMax).toString()}px`\n      }\n    } else if (this.anchor.includes('Center')) {\n      this.div.style.left = `${this.figure.xToSx(x - this.figure.xMin).toString()}px`\n      styleTransform += 'translateX(-50%)'\n    }\n    if (this.anchor.includes('middle')) {\n      styleTransform += 'translateY(-50%)'\n    }\n    if (this.dxInPixels !== 0 || this.dyInPixels !== 0) {\n      styleTransform += ` translate(${this.dxInPixels.toString()}px, ${-this.dyInPixels.toString()}px)`\n    }\n    this.div.style.fontSize = this._fontSize\n    this.div.style.transform = styleTransform\n    this._x = x\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(y: number) {\n    if (!this.figure || !this.div) return // Protection (orphelin)\n    if (this.anchor.includes('top')) {\n      this.div.style.top = `${this.figure.yToSy(y - this.figure.yMax).toString()}px`\n    } else if (this.anchor.includes('bottom')) {\n      this.div.style.bottom = `${this.figure.yToSy(-y + this.figure.yMin).toString()}px`\n    } else if (this.anchor.includes('middle')) {\n      this.div.style.top = `${this.figure.yToSy(y - this.figure.yMax).toString()}px`\n    }\n    this._y = y\n  }\n}\n\nexport default TextByPosition\n","import type Figure from '../../Figure'\nimport { angleWithHorizontalInDegres } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type Point from '../points/Point'\n\nimport TextByPosition from '../text/TextByPosition'\n\nclass MarkSegment extends TextByPosition {\n  point1: Point\n  point2: Point\n  constructor(\n    figure: Figure,\n    {\n      color = figure.options.color,\n      fontSize = figure.options.fontSize,\n      point1,\n      point2,\n      text = figure.options.mark,\n    }: {\n      color?: string\n      fontSize?: string\n      point1: Point\n      point2: Point\n      text?: string\n    },\n  ) {\n    const x = (point1.x + point2.x) / 2\n    const y = (point1.y + point2.y) / 2\n    super(figure, { color, fontSize, text, x, y })\n    this.type = 'MarkSegment'\n    this.fontSize = fontSize\n    this._color = color\n    this.point1 = point1\n    this.point2 = point2\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n    const angle = angleWithHorizontalInDegres(this.point1, this.point2)\n    this.angleWithHorizontalInDegres = -angle\n    this.type = 'MarkBetweenPoints'\n    this.erasePreviousMarks()\n  }\n\n  draw(): void {\n    super.draw()\n    this.update()\n  }\n\n  erasePreviousMarks(): void {\n    const marks = [...this.figure.elements.values()].filter(\n      (e) => e instanceof Element2D && e.type === 'MarkBetweenPoints',\n    ) as MarkSegment[]\n    for (const mark of marks) {\n      if (mark.id === this.id) {\n        continue\n      }\n      if (\n        mark.point1.id === this.point1.id &&\n        mark.point2.id === this.point2.id\n      ) {\n        mark.remove()\n      } else if (\n        mark.point1.id === this.point2.id &&\n        mark.point2.id === this.point1.id\n      ) {\n        mark.remove()\n      }\n    }\n  }\n\n  update(): void {\n    this.x = (this.point1.x + this.point2.x) / 2\n    this.y = (this.point1.y + this.point2.y) / 2\n    if (this.div !== undefined) {\n      if (this.text !== '||' && this.text !== '|||') {\n        this.div.style.fontFamily = 'Courier New'\n        // Police qui permet de centrer verticalement les symboles\n        // mais qui met trop d'espacement entre les | pour ||\n      }\n      this.div.style.fontWeight = 'bold'\n      this.div.style.fontSize = this.fontSize\n      this.div.style.transformOrigin = 'center center'\n      this.div.style.transformBox = 'fill-box'\n      this.div.style.transform = 'translate(-50%, -50%)'\n      this.div.classList.add('-tracking-2')\n      const angle = angleWithHorizontalInDegres(this.point1, this.point2)\n      this.div.style.transform += `rotate(${-angle}deg)`\n      const divRect = this.div.getBoundingClientRect()\n      const svgRect = this.figure.svg?.getBoundingClientRect()\n      if (\n        svgRect &&\n        (divRect.right < svgRect.left ||\n          divRect.left > svgRect.right ||\n          divRect.bottom < svgRect.top ||\n          divRect.top > svgRect.bottom)\n      ) {\n        this.div.style.visibility = 'hidden'\n      } else {\n        this.div.style.visibility = 'visible'\n      }\n    }\n    this.notify()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      color: this.color,\n      text: this.text,\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n    }\n  }\n}\n\nexport default MarkSegment\n","import type Figure from '../../Figure'\nimport { distance, homothetieCoord, rotationCoord } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\nexport default class MarkRightAngle extends Element2D {\n  /* Point qui indique la direction du 2e sommet du carré */\n  directionPoint: Point\n  /* Point qui indique le sommet du carré */\n  point: Point\n  /* Taille du carré en unités de la figure */\n  size: number\n  /* Quadrant / codage de l'angle droit (0, 1, 2 ou 3) */\n  quadrant: 0 | 1 | 2 | 3\n\n  svgPolygon: SVGPolygonElement\n  constructor(\n    figure: Figure,\n    {\n      point,\n      directionPoint,\n      size = 0.4,\n      quadrant = 0,\n      ...options\n    }: {\n      point: Point\n      directionPoint: Point\n      size?: number\n      quadrant?: 0 | 1 | 2 | 3\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.directionPoint = directionPoint\n    this.point = point\n    this.size = size\n    this.quadrant = quadrant\n    this.type = 'MarkRightAngle'\n    this.point.subscribe(this)\n    this.directionPoint.subscribe(this)\n    this.svgPolygon = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polygon',\n    )\n    this.groupSvg.appendChild(this.svgPolygon)\n    this.update()\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  draw(): void {\n    this.update()\n  }\n\n  private computeVertices(): {\n    sommet1: { x: number; y: number }\n    sommet2: { x: number; y: number }\n    sommet3: { x: number; y: number }\n    sommet4: { x: number; y: number }\n  } {\n    // sommet1 = point principal\n    const sommet1 = this.point\n\n    // sommet2 = sur la direction de directionPoint à distance \"size\"\n    const sommet2Base = homothetieCoord(\n      this.directionPoint,\n      this.point,\n      this.size / distance(this.point, this.directionPoint),\n    )\n\n    // On génère les 4 variantes par rotations de 90°\n    // quadrant 0 : configuration actuelle\n    // quadrant 1 : rotation globale de +90°\n    // quadrant 2 : rotation globale de 180°\n    // quadrant 3 : rotation globale de -90°\n    const angle = this.quadrant * 90\n\n    const sommet2 = rotationCoord(sommet2Base, this.point, angle)\n    const sommet3 = rotationCoord(this.point, sommet2, 90)\n    const sommet4 = rotationCoord(sommet2, this.point, -90)\n\n    return { sommet1, sommet2, sommet3, sommet4 }\n  }\n\n  update(): void {\n    const { sommet1, sommet2, sommet3, sommet4 } = this.computeVertices()\n\n    const x1 = this.figure.xToSx(sommet1.x)\n    const y1 = this.figure.yToSy(sommet1.y)\n    const x2 = this.figure.xToSx(sommet2.x)\n    const y2 = this.figure.yToSy(sommet2.y)\n    const x3 = this.figure.xToSx(sommet3.x)\n    const y3 = this.figure.yToSy(sommet3.y)\n    const x4 = this.figure.xToSx(sommet4.x)\n    const y4 = this.figure.yToSy(sommet4.y)\n\n    this.svgPolygon.setAttribute(\n      'points',\n      `${x1},${y1} ${x2},${y2} ${x3},${y3} ${x4},${y4}`,\n    )\n    this.svgPolygon.setAttribute('fill', 'none')\n    this.notify()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      color: this.color,\n      idPoint: this.point.id,\n      idDirectionPoint: this.directionPoint.id,\n      quadrant: this.quadrant,\n    }\n  }\n\n  get latex(): string {\n    const { sommet2, sommet3, sommet4 } = this.computeVertices()\n    let result = `% Angle droit en ${this.point.label}`\n    result += `\\n\\\\draw${this.latexOptions} (${this.point.x},${this.point.y}) -- (${sommet2.x},${sommet2.y}) -- (${sommet3.x},${sommet3.y}) -- (${sommet4.x},${sommet4.y}) -- cycle;`\n    return result\n  }\n}\n","import type Figure from '../../Figure'\n\nimport type { OptionsElement2D } from '../interfaces'\nimport Point from './Point'\n\nclass Barycenter extends Point {\n  points: Point[]\n  constructor(\n    figure: Figure,\n    { points, ...options }: { points: Point[] } & OptionsElement2D,\n  ) {\n    const x = points.reduce((acc, point) => acc + point.x, 0) / points.length\n    const y = points.reduce((acc, point) => acc + point.y, 0) / points.length\n    super(figure, { x, y, ...options })\n    this.type = 'Barycenter'\n    this.points = points\n    for (const point of this.points) {\n      point.subscribe(this)\n    }\n  }\n\n  update(): void {\n    const x =\n      this.points.reduce((acc, point) => acc + point.x, 0) / this.points.length\n    const y =\n      this.points.reduce((acc, point) => acc + point.y, 0) / this.points.length\n    this._x = x\n    this._y = y\n    super.update()\n  }\n}\n\nexport default Barycenter\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\n\nimport Point from './Point'\n\n/**\n * Trace le milieu défini par deux points\n */\nclass Middle extends Point {\n  /** Première extrémité */\n  point1: Point\n  /** Deuxième extrémité */\n  point2: Point\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: {\n      isChild?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      point1: Point\n      point2: Point\n      shape?: '' | 'o' | 'x'\n      size?: number\n    } & OptionsElement2D,\n  ) {\n    const [x, y] = coordsMiddle(point1, point2)\n    super(figure, { isFree: false, x, y, ...options })\n    this.type = 'Middle'\n    this.point1 = point1\n    this.point2 = point2\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n    }\n  }\n\n  update(): void {\n    if (\n      this.point1?.x === undefined ||\n      this.point2?.x === undefined ||\n      this.point1?.y === undefined ||\n      this.point2?.y === undefined ||\n      Number.isNaN(this.point1.x) ||\n      Number.isNaN(this.point1.y) ||\n      Number.isNaN(this.point2.x) ||\n      Number.isNaN(this.point2.y)\n    ) {\n      this._x = Number.NaN\n      this._y = Number.NaN\n    } else {\n      this._x = (this.point1.x + this.point2.x) / 2\n      this._y = (this.point1.y + this.point2.y) / 2\n    }\n    super.update()\n    this.notify()\n  }\n\n  get description(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `Milieu de $[${point1Name}${point2Name}]$`\n  }\n}\n\nfunction coordsMiddle(point1: Point, point2: Point): [number, number] {\n  if (\n    Number.isNaN(point1.x) ||\n    Number.isNaN(point1.y) ||\n    Number.isNaN(point2.x) ||\n    Number.isNaN(point2.y)\n  )\n    return [Number.NaN, Number.NaN]\n  return [(point1.x + point2.x) / 2, (point1.y + point2.y) / 2]\n}\n\nexport default Middle\n","import type Figure from '../../Figure'\nimport type Graph from '../calculus/Graph'\nimport type GraphByParts from '../calculus/GraphByParts'\nimport type { OptionsElement2D } from '../interfaces'\n\nimport Point from './Point'\n\nclass PointOnGraph extends Point {\n  graph: Graph | GraphByParts\n  constructor(\n    figure: Figure,\n    {\n      abscissa = false,\n      graph,\n      ordinate = false,\n      x = 1,\n      ...options\n    }: {\n      abscissa?: boolean\n      color?: string\n      graph: Graph | GraphByParts\n      id?: string\n      isChild?: boolean\n      isFree?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      ordinate?: boolean\n      shape?: '' | '|' | 'o' | 'x'\n      size?: number\n      thickness?: number\n      x?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { x, y: graph.f(x), ...options })\n    this.type = 'PointOnGraph'\n    this.graph = graph\n    this.graph.subscribe(this)\n  }\n\n  moveTo(x: number): void {\n    let newX = x\n    if (x > this.graph.xMax) newX = this.graph.xMax\n    if (x < this.graph.xMin) newX = this.graph.xMin\n    this.x = newX\n    // y est en lecture seule\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idGraph: this.graph.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n      x: this.x,\n    }\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x) {\n    if (\n      x > this.figure.xMax ||\n      x < this.figure.xMin ||\n      this.graph.f(x) > this.figure.yMax ||\n      this.graph.f(x) < this.figure.yMin\n    )\n      return\n    this._x = x\n    this._y = this.graph.f(x)\n    this.update()\n  }\n\n  get y(): number {\n    return this.graph.f(this.x)\n  }\n}\n\nexport default PointOnGraph\n","import type Figure from '../../Figure'\nimport { orthogonalProjectionCoord } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Segment from '../lines/Segment'\nimport Point from './Point'\n\nclass PointByProjection extends Point {\n  line: Segment\n  origin: Point\n  constructor(\n    figure: Figure,\n    {\n      line,\n      origin,\n      ...options\n    }: {\n      line: Segment\n      origin: Point\n      shape?: '' | '|' | 'o' | 'x'\n      sizeInPixels?: number\n    } & OptionsElement2D,\n  ) {\n    const { x, y } = orthogonalProjectionCoord(origin, line)\n    super(figure, { isFree: false, x, y, ...options })\n    this.type = 'PointByProjection'\n    this.origin = origin\n    this.line = line\n    this.origin.subscribe(this)\n    this.line.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idOrigin: this.origin.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    const { x, y } = orthogonalProjectionCoord(this.origin, this.line)\n    this._x = x\n    this._y = y\n    super.update()\n  }\n\n  get description(): string {\n    const lineName = this.line.notation\n    const originName =\n      this.origin.label !== '' ? this.origin.label : this.origin.id\n    return `Projection orthogonale de $${originName}$ sur $${lineName}$`\n  }\n}\n\nexport default PointByProjection\n","import type Figure from '../../Figure'\n\nimport type { OptionsElement2D } from '../interfaces'\nimport Point from './Point'\n\nclass PointByProjectionOnAxisX extends Point {\n  origin: Point\n  constructor(\n    figure: Figure,\n    { origin, ...options }: { origin: Point } & OptionsElement2D,\n  ) {\n    super(figure, { isFree: false, x: origin.x, y: 0, ...options })\n    this.type = 'PointByProjectionOnAxisX'\n    this.origin = origin\n    this.origin.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.origin.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    this._x = this.origin.x\n    this._y = 0\n    super.update()\n  }\n}\n\nexport default PointByProjectionOnAxisX\n","import type Figure from '../../Figure'\n\nimport type { OptionsElement2D } from '../interfaces'\nimport Point from './Point'\n\nclass PointByProjectionOnAxisY extends Point {\n  origin: Point\n  constructor(\n    figure: Figure,\n    { origin, ...options }: { origin: Point } & OptionsElement2D,\n  ) {\n    super(figure, { isFree: false, x: 0, y: origin.x, ...options })\n    this.type = 'PointByProjectionOnAxisY'\n    this.origin = origin\n    this.origin.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.origin.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    this._x = 0\n    this._y = this.origin.y\n    super.update()\n  }\n}\n\nexport default PointByProjectionOnAxisY\n","import type Figure from '../../Figure'\nimport { intersectionCCCoord } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsIntersectionCC } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport Point from './Point'\n\n/**\n * Créé les points à l'intersection de deux cercles\n */\nexport class PointIntersectionCC extends Point {\n  /** Premier cercle */\n  circle1: Circle\n  /** Deuxième cercle */\n  circle2: Circle\n  /** Numéro de l'intersection */\n  n: 1 | 2\n  constructor(\n    figure: Figure,\n    {\n      circle1,\n      circle2,\n      isChild,\n      n,\n      ...options\n    }: OptionsIntersectionCC & OptionsElement2D,\n  ) {\n    const coords = intersectionCCCoord(circle1, circle2, n)\n    super(figure, {\n      isChild,\n      isFree: false,\n      x: coords.x,\n      y: coords.y,\n      ...options,\n    })\n    this.type = 'PointIntersectionCC'\n    this.circle1 = circle1\n    this.circle2 = circle2\n    this.n = n ?? 1\n    this.circle1.subscribe(this)\n    this.circle2.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle1: this.circle1.id,\n      idCircle2: this.circle2.id,\n      label: this.label,\n      n: this.n,\n      shape: this.shape,\n    }\n  }\n\n  update(): void {\n    if (this.circle1 == null || this.circle2 == null) return\n    try {\n      const { x, y } = intersectionCCCoord(this.circle1, this.circle2, this.n)\n      this._x = x\n      this._y = y\n      super.update()\n    } catch (error) {\n      console.error('Erreur dans PointIntersectionLL.update()', error)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    if (this.label) {\n      return `Point ${this.label}, intersection du cercle $${this.circle1.label}$ et du cercle $${this.circle2.label}$`\n    }\n    return `Intersection du cercle $${this.circle1.label}$ et du cercle $${this.circle2.label}$`\n  }\n}\n\nexport default PointIntersectionCC\n","import type Figure from '../../Figure'\nimport { intersectionLCCoord } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsIntersectionLC } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport Point from './Point'\n\n/**\n * Créé les points à l'intersection de deux cercles\n */\nexport class PointIntersectionLC extends Point {\n  /** Deuxième cercle */\n  circle: Circle\n  /** Premier cercle */\n  line: Line\n  /** Numéro de l'intersection */\n  n: 1 | 2\n  constructor(\n    figure: Figure,\n    { circle, line, n, ...options }: OptionsIntersectionLC & OptionsElement2D,\n  ) {\n    const coords = intersectionLCCoord(line, circle, n)\n    super(figure, { isFree: false, x: coords.x, y: coords.y, ...options })\n    this.type = 'PointIntersectionLC'\n    this.line = line\n    this.circle = circle\n    this.n = n ?? 1\n    this.line.subscribe(this)\n    this.circle.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle: this.circle.id,\n      idLine: this.line.id,\n      label: this.label,\n      n: this.n,\n      shape: this.shape,\n    }\n  }\n\n  update(): void {\n    if (this.line === undefined || this.circle === undefined) return\n    try {\n      const { x, y } = intersectionLCCoord(this.line, this.circle, this.n)\n      this._x = x\n      this._y = y\n      if (!this.isOnline(this.line)) {\n        this._x = Number.NaN\n        this._y = Number.NaN\n      }\n      super.update()\n    } catch (error) {\n      console.error('Erreur dans PointIntersectionLL.update()', error)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    const lineName = this.line.notation\n    const circleName = this.circle.id\n    return `Intersection de la droite $${lineName}$ et du cercle $${circleName}$`\n  }\n}\n\nexport default PointIntersectionLC\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Circle from '../lines/Circle'\n\nimport Point from './Point'\n\nclass PointOnCircle extends Point {\n  angleWithHorizontal: number\n  circle: Circle\n  figure: Figure\n  constructor(\n    figure: Figure,\n    {\n      angleWithHorizontal,\n      circle,\n      label,\n      ...options\n    }: {\n      angleWithHorizontal?: number\n      circle: Circle\n      label?: string\n    } & OptionsElement2D,\n  ) {\n    if (angleWithHorizontal === undefined)\n      angleWithHorizontal = Math.random() * 2 * Math.PI\n    super(figure, {\n      label,\n      x: circle.center.x + circle.radius * Math.cos(angleWithHorizontal),\n      y: circle.center.y + circle.radius * Math.sin(angleWithHorizontal),\n      ...options,\n    })\n    this.figure = figure\n    this.circle = circle\n    this.angleWithHorizontal = angleWithHorizontal\n    this.isFree = true\n    this.type = 'PointOnCircle'\n    this.circle.subscribe(this)\n  }\n\n  moveTo(x: number, y: number): void {\n    const angleWithHorizontal = Math.atan2(\n      y - this.circle.center.y,\n      x - this.circle.center.x,\n    )\n    this.angleWithHorizontal = angleWithHorizontal\n    this.x =\n      this.circle.center.x + this.circle.radius * Math.cos(angleWithHorizontal)\n    this.y =\n      this.circle.center.y + this.circle.radius * Math.sin(angleWithHorizontal)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      angleWithHorizontal: this.angleWithHorizontal,\n      idCircle: this.circle.id,\n      label: this.label,\n    }\n  }\n\n  update(): void {\n    this._x =\n      this.circle.center.x +\n      this.circle.radius * Math.cos(this.angleWithHorizontal)\n    this._y =\n      this.circle.center.y +\n      this.circle.radius * Math.sin(this.angleWithHorizontal)\n    super.update()\n  }\n\n  get description(): string {\n    return `Point sur le cercle $${this.circle.label}$`\n  }\n}\n\nexport default PointOnCircle\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D, OptionsPointBy } from '../interfaces'\nimport type Line from '../lines/Line'\nimport Point from './Point'\n\nclass PointOnLineAtDistance extends Point {\n  distance: number\n  line: Line\n  constructor(\n    figure: Figure,\n    {\n      distance,\n      line,\n      ...options\n    }: { distance: number; line: Line } & OptionsPointBy & OptionsElement2D,\n  ) {\n    // Calculer la direction de la ligne\n    const dx = line.point2.x - line.point1.x\n    const dy = line.point2.y - line.point1.y\n    const length = Math.sqrt(dx * dx + dy * dy)\n    // Placer le point à 'distance' unités absolues de line.point1\n    const x = line.point1.x + (dx / length) * distance\n    const y = line.point1.y + (dy / length) * distance\n    super(figure, { x, y, ...options })\n    this.line = line\n    this.distance = distance\n    this.line.subscribe(this)\n  }\n\n  update(): void {\n    // Calculer la direction de la ligne\n    const dx = this.line.point2.x - this.line.point1.x\n    const dy = this.line.point2.y - this.line.point1.y\n    const length = Math.sqrt(dx * dx + dy * dy)\n    // Placer le point à 'distance' unités absolues de line.point1\n    this._x = this.line.point1.x + (dx / length) * this.distance\n    this._y = this.line.point1.y + (dy / length) * this.distance\n    super.update()\n  }\n}\n\nexport default PointOnLineAtDistance\n","import type Figure from '../../Figure'\nimport type Polyline from '../lines/Polyline'\nimport Point from './Point'\n\n/**\n *\n * @param polyline Fonction pour interpoler la valeur de y xorrespondant à x sur une polyline dont les points sont ordonnés comme ceux d'une fonction\n * Ne fonctionne que pour des polylines du type d'une fonction spline par exemple.\n * @param x\n */\nfunction interpolateCoords(polyline: Polyline, x: number) {\n  const lesX: number[] = polyline.points.map((el: Point) => el.x)\n  const lesY: number[] = polyline.points.map((el: Point) => el.y)\n  let i = 0\n  while (i < lesX.length - 1 && x > lesX[i + 1]) {\n    i++\n  }\n  if (i === lesX.length - 1) {\n    // On est arrivé au dernier segment de la courbe et x n'est pas dans cet intervalle, il n'est pas possible de détérminer y\n    return Number.NaN\n  }\n  const x0 = lesX[i]\n  const x1 = lesX[i + 1]\n  const y0 = lesY[i]\n  const y1 = lesY[i + 1]\n  return y0 + ((y1 - y0) * (x - x0)) / (x1 - x0)\n}\nclass PointOnPolyline extends Point {\n  dx?: number\n  polyline: Polyline\n  size?: number\n  abscissa: boolean\n  ordinate: boolean\n  lesX: number[]\n  constructor(\n    figure: Figure,\n    {\n      polyline,\n      x,\n      dx = 0.05,\n      shape = '|',\n      abscissa = false,\n      ordinate = false,\n      ...options\n    }: {\n      polyline: Polyline\n      x?: number\n      abscissa?: boolean\n      ordinate?: boolean\n      dx?: number\n      shape?: 'x' | 'o' | '' | '|'\n      size?: number\n      label?: string\n      labelDx?: number\n      labelDy?: number\n      color?: string\n      thickness?: number\n      isChild?: boolean\n      isFree?: boolean\n      isVisible?: boolean\n      id?: string\n    },\n  ) {\n    const lesX: number[] = polyline.points.map((el: Point) => el.x)\n    const x0 = x ?? lesX[Math.floor(lesX.length / 2)]\n    super(figure, { x: x0, y: interpolateCoords(polyline, x0), ...options })\n    this.lesX = [...lesX]\n    // Mauvais type pour this.type, il devrait être 'PointOnSpline' et non 'PointOnGraph' Et PointOnSpline devrait être défini dans apiGeom.\n    // PointOnSpline devraiy d'ailleurs s'appeler PointOnPolyline\n    this.type = 'PointOnPolyline'\n    this.polyline = polyline\n    this.dx = dx\n    // @fixme c'est juste pour qu'eslint cesse de râler mais ces propriétés ne servent pas !\n    this.abscissa = abscissa\n    this.ordinate = ordinate\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x) {\n    if (this.dx !== undefined) {\n      this._x = Math.round(x / this.dx) * this.dx\n    } else {\n      this._x = x\n    }\n\n    this._y = interpolateCoords(this.polyline, this._x)\n    this.update()\n  }\n\n  get y(): number {\n    return interpolateCoords(this.polyline, this._x)\n  }\n\n  moveTo(x: number): void {\n    if (x > this.lesX[0] && x < this.lesX[this.lesX.length - 1]) {\n      this.x = x\n    }\n    // y est en lecture seule\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      x: this.x,\n      dx: this.dx,\n      idPolyline: this.polyline.id,\n    }\n  }\n}\n\nexport default PointOnPolyline\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D, OptionsIntersectionCC } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport type Point from './Point'\n\nclass PointsIntersectionCC extends Element2D {\n  /** Premier cercle */\n  circle1: Circle\n  /** Deuxième cercle */\n  circle2: Circle\n  /** Point d'intersection avec la plus grande ordonnée */\n  point1!: Point\n  /** Point d'intersection avec la plus petite ordonnée */\n  point2!: Point\n  shape: '' | '|' | 'o' | 'x'\n  sizeInPixels?: number\n  constructor(\n    figure: Figure,\n    {\n      circle1,\n      circle2,\n      shape,\n      sizeInPixels,\n      ...options\n    }: OptionsIntersectionCC & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'PointsIntersectionCC'\n    this.circle1 = circle1\n    this.circle2 = circle2\n    this.shape = shape ?? 'x'\n    this.sizeInPixels = sizeInPixels\n  }\n\n  draw(): void {\n    this.point1 = this.figure.create('PointIntersectionCC', {\n      circle1: this.circle1,\n      circle2: this.circle2,\n      id: `${this.id}_1`,\n      n: 1,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    })\n    this.point2 = this.figure.create('PointIntersectionCC', {\n      circle1: this.circle1,\n      circle2: this.circle2,\n      id: `${this.id}_2`,\n      n: 2,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    })\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle1: this.circle1.id,\n      idCircle2: this.circle2.id,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n}\n\nexport default PointsIntersectionCC\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport type Point from './Point'\n\nclass PointsIntersectionLC extends Element2D {\n  /** Deuxième cercle */\n  circle: Circle\n  /** Droite ou segment ou demi-droite */\n  line: Line\n  /** Point d'intersection avec la plus grande ordonnée */\n  point1: Point\n  /** Point d'intersection avec la plus petite ordonnée */\n  point2: Point\n  shape: '' | 'o' | 'x'\n  sizeInPixels?: number\n  constructor(\n    figure: Figure,\n    {\n      circle,\n      line,\n      shape = 'x',\n      sizeInPixels,\n      ...options\n    }: {\n      circle: Circle\n      line: Line\n      shape?: '' | 'o' | 'x'\n      sizeInPixels?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'PointsIntersectionLC'\n    sizeInPixels = sizeInPixels ?? figure.options.pointSize\n    this.line = line\n    this.circle = circle\n    this.point1 = figure.create('PointIntersectionLC', {\n      circle,\n      line,\n      n: 1,\n      shape,\n      sizeInPixels,\n      ...options,\n    })\n    this.point2 = figure.create('PointIntersectionLC', {\n      circle,\n      line,\n      n: 2,\n      shape,\n      sizeInPixels,\n      ...options,\n    })\n    this.shape = shape\n    this.sizeInPixels = sizeInPixels\n  }\n\n  draw(): void {}\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle: this.circle.id,\n      idLine: this.line.id,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n}\n\nexport default PointsIntersectionLC\n","import type Figure from '../../Figure'\nimport type { OptionsRestrictedText } from '../interfaces'\nimport type Point from '../points/Point'\nimport TextByPosition from './TextByPosition'\n\n/**\n * Créé un texte qui suivra la position d'un point\n */\nexport class TextByPoint extends TextByPosition {\n  /** Décalage vertical par rapport au point */\n  dxInPixels: number\n  /** Décalage vertical par rapport au point */\n  dyInPixels: number\n  /** Point sur lequel apparaitra le texte */\n  point: Point\n  constructor(\n    figure: Figure,\n    {\n      color = 'black',\n      dxInPixels = 0,\n      dyInPixels = 0,\n      id,\n      isChild,\n      point,\n      text,\n      ...options\n    }: OptionsRestrictedText,\n  ) {\n    super(figure, {\n      color,\n      dxInPixels,\n      dyInPixels,\n      id,\n      isChild,\n      text,\n      x: point.x,\n      y: point.y,\n      ...options,\n    })\n    this.type = 'TextByPoint'\n    this.dxInPixels = dxInPixels\n    this.dyInPixels = dyInPixels\n    this.point = point\n    this.point.subscribe(this)\n  }\n\n  /** Déplace le texte aux coordonnées données */\n  moveTo(x: number, y: number): void {\n    const [oldX, oldY] = [this.x, this.y]\n    this.dxInPixels =\n      Math.round(\n        this.figure.xToSx(x - this.point.x) / this.figure.options.moveTextGrid,\n      ) * this.figure.options.moveTextGrid\n    this.dyInPixels =\n      Math.round(\n        this.figure.yToSy(this.point.y - y) / this.figure.options.moveTextGrid,\n      ) * this.figure.options.moveTextGrid\n    this.point.labelDxInPixels = this.dxInPixels\n    this.point.labelDyInPixels = this.dyInPixels\n    this.x = oldX\n    this.y = oldY\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      point: this.point.id,\n      text: this.text,\n    }\n  }\n\n  update(): void {\n    if (this.point?.x !== undefined && this.point?.y !== undefined)\n      super.moveTo(this.point.x, this.point.y)\n    this.notify()\n  }\n}\n\nexport default TextByPoint\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\n\nimport { displayDigits } from '../defaultValues'\nimport type { OptionsRestrictedText } from '../interfaces'\nimport type Point from '../points/Point'\nimport TextByPoint from './TextByPoint'\n\nclass TextDynamicByPoint extends TextByPoint {\n  private readonly dynamicNumber: DynamicNumber\n  maximumFractionDigits: number\n  minimumFractionDigits: number\n  textAfter: string\n  textBefore: string\n\n  constructor(\n    figure: Figure,\n    {\n      color = 'black',\n      dynamicNumber,\n      isChild = false,\n      maximumFractionDigits = displayDigits,\n      minimumFractionDigits = 0,\n      textAfter = '',\n      textBefore = '',\n      point,\n      ...options\n    }: OptionsRestrictedText & {\n      dynamicNumber: DynamicNumber\n      maximumFractionDigits?: number\n      minimumFractionDigits?: number\n      textAfter?: string\n      textBefore?: string\n      point: Point\n    },\n  ) {\n    const value =\n      textBefore +\n      Intl.NumberFormat('fr-FR', {\n        maximumFractionDigits,\n        minimumFractionDigits,\n      }).format(dynamicNumber.value) +\n      textAfter\n    super(figure, { color, isChild, point, ...options, text: value })\n    this.type = 'TextDynamicByPoint'\n    this.dynamicNumber = dynamicNumber\n    this.textBefore = textBefore\n    this.textAfter = textAfter\n    this.minimumFractionDigits = minimumFractionDigits\n    this.maximumFractionDigits = maximumFractionDigits\n    dynamicNumber.subscribe(this)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idDynamicNumber: this.dynamicNumber.id,\n      maximumFractionDigits: this.maximumFractionDigits,\n      minimumFractionDigits: this.minimumFractionDigits,\n      textAfter: this.textAfter,\n      textBefore: this.textBefore,\n      point: this.point.id,\n    }\n  }\n\n  update(): void {\n    this.text =\n      this.textBefore +\n      Intl.NumberFormat('fr-FR', {\n        maximumFractionDigits: this.maximumFractionDigits,\n        minimumFractionDigits: this.minimumFractionDigits,\n      }).format(this.dynamicNumber.value) +\n      this.textAfter\n    super.update()\n  }\n}\n\nexport default TextDynamicByPoint\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\n\nimport { round } from '../../lib/format'\nimport { displayDigits } from '../defaultValues'\nimport type { OptionsDynamicText } from '../interfaces'\nimport TextByPosition from './TextByPosition'\n\n/**\n * Créé un div contenant un texte qui est mis au dessus du svg\n * par défaut KaTeX s'occupe du rendu du div\n */\nclass TextDynamicByPosition extends TextByPosition {\n  private readonly dynamicNumber: DynamicNumber\n  maximumFractionDigits: number\n  minimumFractionDigits: number\n  textAfter: string\n  textBefore: string\n\n  constructor(\n    figure: Figure,\n    {\n      color = 'black',\n      dynamicNumber,\n      isChild = false,\n      maximumFractionDigits = displayDigits,\n      minimumFractionDigits = 0,\n      textAfter = '',\n      textBefore = '',\n      x,\n      y,\n    }: OptionsDynamicText,\n  ) {\n    const value =\n      textBefore +\n      Intl.NumberFormat('fr-FR', {\n        maximumFractionDigits,\n        minimumFractionDigits,\n      }).format(dynamicNumber.value) +\n      textAfter\n    super(figure, { color, isChild, text: value, x, y })\n    this.type = 'TextDynamicByPosition'\n    this.dynamicNumber = dynamicNumber\n    this.textBefore = textBefore\n    this.textAfter = textAfter\n    this.minimumFractionDigits = minimumFractionDigits\n    this.maximumFractionDigits = maximumFractionDigits\n    dynamicNumber.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idDynamicNumber: this.dynamicNumber.id,\n      maximumFractionDigits: this.maximumFractionDigits,\n      minimumFractionDigits: this.minimumFractionDigits,\n      textAfter: this.textAfter,\n      textBefore: this.textBefore,\n      x: round(this.x),\n      y: round(this.y),\n    }\n  }\n\n  update(): void {\n    this.text =\n      this.textBefore +\n      Intl.NumberFormat('fr-FR', {\n        maximumFractionDigits: this.maximumFractionDigits,\n        minimumFractionDigits: this.minimumFractionDigits,\n      }).format(this.dynamicNumber.value) +\n      this.textAfter\n  }\n}\n\nexport default TextDynamicByPosition\n","import type Figure from '../../Figure'\nimport { round } from '../../lib/format'\nimport { labelCoords } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type Segment from '../lines/Segment'\nimport type Point from '../points/Point'\nimport type TextByPosition from '../text/TextByPosition'\n\nclass Vector extends Element2D {\n  private _label?: string\n  private _labelColor: string\n  elementTextLabel?: TextByPosition\n  /** Extrémité de la représentation du vecteur */\n  end!: Point\n  labelDxInPixels?: number\n  labelDyInPixels?: number\n  /** Origine pour la représentation du vecteur */\n  readonly origin: Point\n  /** Représentation du vecteur */\n  representation?: Segment\n  x: number\n  y: number\n  constructor(\n    figure: Figure,\n    {\n      color,\n      id,\n      isChild,\n      isDashed,\n      isSelectable,\n      isVisible = true,\n      label,\n      labelColor,\n      labelDxInPixels,\n      labelDyInPixels,\n      origin,\n      opacity,\n      thickness,\n      x,\n      y,\n      ...options\n    }: {\n      color?: string\n      isVisible?: boolean\n      label?: string\n      labelColor?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      id?: string\n      isChild?: boolean\n      isDashed?: boolean\n      isSelectable?: boolean\n      origin: Point\n      opacity?: number\n      thickness?: number\n      x: number\n      y: number\n    },\n  ) {\n    super(figure, {\n      color,\n      id,\n      isChild,\n      isDashed,\n      isSelectable,\n      thickness,\n      isVisible,\n      ...options,\n    })\n    this.type = 'Vector'\n    this.x = x\n    this.y = y\n    this.origin = origin\n    this._labelColor = labelColor ?? this._color\n    this.label = label\n    this.labelDxInPixels = labelDxInPixels ?? 0\n    this.labelDyInPixels = labelDyInPixels ?? 0\n  }\n\n  draw(): void {\n    if (this.origin !== undefined) {\n      this.origin.subscribe(this)\n      this.end = this.figure.create('Point', {\n        isChild: true,\n        isFree: false,\n        isSelectable: true,\n        isVisible: this.isVisible,\n        shape: '',\n        x: this.origin.x + this.x,\n        y: this.origin.y + this.y,\n      })\n      this.representation = this.figure.create('Segment', {\n        color: this.color,\n        isChild: true,\n        isDashed: this.isDashed,\n        isSelectable: this.isSelectable,\n        isVisible: this.isVisible,\n        point1: this.origin,\n        point2: this.end,\n        shape: '->',\n        thickness: this.thickness,\n      })\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.origin?.id,\n      x: round(this.x),\n      y: round(this.y),\n      label: this.label,\n      labelColor: this.labelColor,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    if (this.origin !== undefined && this.end !== undefined) {\n      this.end.x = this.origin.x + this.x\n      this.end.y = this.origin.y + this.y\n    }\n    if (this.elementTextLabel !== undefined) {\n      const { x, y } = labelCoords(this.origin, this.end)\n      this.elementTextLabel.x = x\n      this.elementTextLabel.y = y\n    }\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color: string) {\n    this._color = color\n    if (this.representation !== undefined) {\n      this.representation.color = color\n    }\n  }\n\n  get isDashed(): boolean {\n    return this._isDashed\n  }\n\n  set isDashed(isDashed: boolean) {\n    this._isDashed = isDashed\n    if (this.representation !== undefined) {\n      this.representation.isDashed = isDashed\n    }\n  }\n\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  set isVisible(isVisible: boolean) {\n    this._isVisible = isVisible\n    if (this.representation !== undefined) {\n      this.representation.isVisible = isVisible\n    }\n    if (this.elementTextLabel !== undefined) {\n      this.elementTextLabel.isVisible = isVisible\n    }\n  }\n\n  get label(): string {\n    if (this._label === undefined) return ''\n    return this._label\n  }\n\n  set label(label: string | undefined) {\n    this._label = label\n    if (label !== undefined) {\n      if (this.elementTextLabel === undefined) {\n        const xEnd = this.origin.x + this.x\n        const yEnd = this.origin.y + this.y\n        const { x, y } = labelCoords(this.origin, { x: xEnd, y: yEnd })\n        this.elementTextLabel = this.figure.create('TextByPosition', {\n          color: this._labelColor ?? this._color,\n          dxInPixels: this.labelDxInPixels,\n          dyInPixels: this.labelDyInPixels,\n          id: `${this.id}_label`,\n          isChild: true,\n          isSelectable: true,\n          isVisible: this.isVisible,\n          x,\n          y,\n          text: `$${label}$`,\n        })\n      } else {\n        this.elementTextLabel.text = `$${label}$`\n        this.elementTextLabel.color = this._labelColor ?? 'currentColor'\n      }\n    }\n  }\n\n  get labelColor(): string {\n    return this._labelColor\n  }\n\n  set labelColor(color: string) {\n    this._labelColor = color\n    if (this.elementTextLabel !== undefined) {\n      this.elementTextLabel.color = color\n    }\n  }\n\n  get notation(): string {\n    if (this.label !== '') return this.label\n    return this.id\n  }\n\n  get opacity(): number {\n    return this._opacity\n  }\n\n  set opacity(opacity: number) {\n    this._opacity = opacity\n    if (this.representation !== undefined) {\n      this.representation.opacity = opacity\n    }\n    if (this.elementTextLabel !== undefined) {\n      this.elementTextLabel.opacity = opacity\n    }\n  }\n\n  get thickness(): number {\n    return this._thickness\n  }\n\n  set thickness(thickness: number) {\n    this._thickness = thickness\n    if (this.representation !== undefined) {\n      this.representation.thickness = thickness\n    }\n  }\n}\n\nexport default Vector\n","import type Figure from '../../Figure'\nimport { labelCoords } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport Segment from '../lines/Segment'\nimport type Point from '../points/Point'\nimport type TextByPosition from '../text/TextByPosition'\n\nclass VectorByPoints extends Segment {\n  _label?: string\n  elementTextLabel?: TextByPosition\n  _colorLabel?: string\n  labelDxInPixels?: number\n  labelDyInPixels?: number\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      label,\n      ...options\n    }: {\n      isChild?: boolean\n      isFree?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      point1: Point\n      point2: Point\n    } & OptionsElement2D,\n  ) {\n    super(figure, { point1, point2, ...options })\n    this.type = 'VectorByPoints'\n    this.shape = '->'\n    this.label = label\n    this.labelDxInPixels = options.labelDxInPixels ?? 0\n    this.labelDyInPixels = options.labelDyInPixels ?? 0\n  }\n\n  get label(): string {\n    if (this._label === undefined) return ''\n    return this._label\n  }\n\n  set label(label: string | undefined) {\n    this._label = label\n    if (label !== undefined) {\n      if (this.elementTextLabel === undefined) {\n        const { x, y } = labelCoords(this.point1, this.point2)\n        this.elementTextLabel = this.figure.create('TextByPosition', {\n          color: this._colorLabel ?? this.color,\n          dxInPixels: this.labelDxInPixels,\n          dyInPixels: this.labelDyInPixels,\n          id: `${this.id}_label`,\n          isChild: true,\n          isSelectable: true,\n          x,\n          y,\n          text: `$${label}$`,\n        })\n      } else {\n        this.elementTextLabel.text = `$${label}$`\n        this.elementTextLabel.color = this._colorLabel ?? 'currentColor'\n      }\n    }\n  }\n\n  get x() {\n    return this.point2.x - this.point1.x\n  }\n\n  get y() {\n    return this.point2.y - this.point1.y\n  }\n\n  update(): void {\n    super.update()\n    if (this.elementTextLabel !== undefined) {\n      const { x, y } = labelCoords(this.point1, this.point2)\n      this.elementTextLabel.x = x\n      this.elementTextLabel.y = y\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n      label: this.label,\n    }\n  }\n}\n\nexport default VectorByPoints\n","import type Figure from '../../Figure'\nimport type { OptionsVectorPerpendicular } from '../interfaces'\nimport type Line from '../lines/Line'\nimport type Point from '../points/Point'\nimport Vector from './Vector'\n\nclass VectorUnitPerpendicular extends Vector {\n  /** Droite perpendiculaire au vecteur */\n  line: Line\n  /** Origine de la représentation vecteur */\n  origin: Point\n  constructor(\n    figure: Figure,\n    { line, origin, ...options }: OptionsVectorPerpendicular,\n  ) {\n    const [x, y] = line.equation\n    super(figure, { origin, x, y, ...options })\n    this.type = 'VectorPerpendicular'\n    this.line = line\n    this.origin = origin\n    line.subscribe(this)\n    origin.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idOrigin: this.origin.id,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    const [x, y] = this.line.equation\n    this.x = x\n    this.y = y\n    if (this.end !== undefined) {\n      this.end.x = this.origin.x + this.x\n      this.end.y = this.origin.y + this.y\n    }\n  }\n}\n\nexport default VectorUnitPerpendicular\n","export function isLocalStorageAvailable() {\n  try {\n    window.localStorage.setItem('__test__', '__test__')\n    window.localStorage.removeItem('__test__')\n    return true\n  } catch {\n    return false\n  }\n}\n","import { defaultDistanceClick } from '../elements/defaultValues'\n\nimport Element2D from '../elements/Element2D'\nimport Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nexport default function handleHover(\n  figure: Figure,\n  pointerX: number,\n  pointerY: number,\n): void {\n  const elements = [...figure.elements.values()].filter(\n    (e) => e instanceof Element2D,\n  ) as Element2D[]\n  figure.hoverPoints.clear()\n  // Calculer les distances pour tous les éléments éligibles\n  const eligibleElements = elements\n    .filter(\n      (element) =>\n        element.type !== 'pointer' &&\n        element.isVisible &&\n        element.isSelectable &&\n        figure.filter(element) &&\n        element.distancePointer(pointerX, pointerY) * figure.pixelsPerUnit <\n          defaultDistanceClick,\n    )\n    .map((element) => ({\n      element,\n      distance:\n        element.distancePointer(pointerX, pointerY) * figure.pixelsPerUnit,\n    }))\n    .sort((a, b) => a.distance - b.distance)\n    .slice(0, 2) // Garder uniquement les 2 plus proches\n\n  // Réinitialiser isHover pour tous les éléments\n  for (const element of elements) {\n    element.isHover = false\n  }\n\n  // Activer isHover uniquement pour les 2 plus proches\n  for (const { element } of eligibleElements) {\n    element.isHover = true\n    if (element instanceof Point && element.isFree) {\n      figure.hoverPoints.add(element)\n    }\n  }\n\n  if (\n    figure.hoverPoints.size > 0 &&\n    // @ts-expect-error\n    typeof figure?.ui?.state?.value === 'object' &&\n    // @ts-expect-error\n    // biome-ignore lint/correctness/noUnsafeOptionalChaining: problème avec xstate\n    'POINT' in figure?.ui?.state?.value\n  ) {\n    figure.divFigure.style.cursor = 'move'\n  } else {\n    figure.divFigure.style.cursor = 'default'\n  }\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\nimport { distance } from '../elements/calculus/Coords'\nimport {\n  colors,\n  defaultDeltaXModal,\n  defaultDistanceClick,\n} from '../elements/defaultValues'\nimport Element2D from '../elements/Element2D'\nimport Circle from '../elements/lines/Circle'\nimport Segment from '../elements/lines/Segment'\nimport Point from '../elements/points/Point'\nimport TextByPosition from '../elements/text/TextByPosition'\nimport type Figure from '../Figure'\n\nexport default function handlePointerAction(\n  figure: Figure,\n  event: PointerEvent,\n): void {\n  const [pointerX, pointerY] = figure.getPointerCoord(event)\n  const [x, y] = [pointerX, pointerY]\n  if (x > figure.xMax || x < figure.xMin || y > figure.yMax || y < figure.yMin)\n    return\n  if (figure.currentState === 'POINT') {\n    const pointsOnFigure = [...figure.elements.values()].filter((e) =>\n      e.type.includes('Point'),\n    ) as Point[]\n    // Ne vérifier que les points visibles ou sélectionnables pour éviter de bloquer la création\n    // de nouveaux points sur des points cachés/non-sélectionnables\n    for (const point of pointsOnFigure) {\n      if (\n        (point.isVisible || point.isSelectable) &&\n        distance({ x, y }, { x: point.x, y: point.y }) <\n          figure.options.distanceWithoutNewPoint\n      ) {\n        return\n      }\n    }\n  }\n  const possibleElements = []\n  figure.modal?.remove()\n  const elements = [...figure.elements.values()].filter(\n    (e) => e instanceof Element2D,\n  ) as Element2D[]\n  const elementsFiltered = elements\n    .filter(figure.filter)\n    .filter((e) => e.type !== 'pointer' && e.isVisible && e.isSelectable)\n  for (const element of elementsFiltered) {\n    if (\n      element.distancePointer(pointerX, pointerY) * figure.pixelsPerUnit <\n        defaultDistanceClick &&\n      element.isSelectable\n    ) {\n      possibleElements.push(element)\n    }\n  }\n\n  // Récupérer les éléments avec isHover (limités aux 2 plus proches)\n  const hoveredElements = elementsFiltered.filter((e) => e.isHover)\n\n  if (possibleElements.length === 1) {\n    sendToMachine(figure, { element: possibleElements[0], x, y })\n  } else if (\n    figure.currentState === 'POINT_INTERSECTION' &&\n    hoveredElements.length === 2 &&\n    (hoveredElements[0] instanceof Segment ||\n      hoveredElements[0] instanceof Circle) &&\n    (hoveredElements[1] instanceof Segment ||\n      hoveredElements[1] instanceof Circle)\n  ) {\n    sendToMachine(figure, {\n      element: undefined,\n      possibleElements: hoveredElements,\n      x,\n      y,\n    })\n  } else if (possibleElements.length > 1) {\n    const points = possibleElements.filter((e) => e instanceof Point)\n    if (points.length === 1) {\n      sendToMachine(figure, { element: points[0], x, y })\n      return\n    }\n    const elementText = new TextByPosition(figure, {\n      isChild: true,\n      isSelectable: false,\n      text: '',\n      x: pointerX + defaultDeltaXModal,\n      y: Math.min(pointerY, figure.yMax - 2),\n    })\n    elementText.draw()\n    figure.modal = elementText.div\n    figure.modal.style.pointerEvents = 'auto'\n    figure.modal.style.padding = '10px'\n    figure.modal.style.overflowY = 'auto'\n    figure.modal.style.backgroundColor = colors.titlelight\n    figure.modal.style.color = colors.title\n    figure.modal.style.boxShadow =\n      '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)'\n    figure.modal.style.touchAction = 'none'\n    figure.modal.innerText = 'Quel élément souhaitez-vous sélectionner ?'\n    const divs = []\n    for (const element of possibleElements) {\n      const div = document.createElement('div')\n      div.innerText =\n        element.description !== ''\n          ? element.description\n          : `${element.type} ${element.id}`\n      div.addEventListener('click', () => {\n        elementText.remove()\n        sendToMachine(figure, { element, x, y })\n      })\n      div.addEventListener('mouseenter', () => {\n        div.style.backgroundColor = colors.lightest\n      })\n      div.addEventListener('mouseleave', () => {\n        div.style.backgroundColor = colors.titlelight\n      })\n      div.style.marginTop = '5px'\n      div.style.marginLeft = '10px'\n      div.style.userSelect = 'none'\n      div.style.cursor = 'default'\n      divs.push(div)\n      renderMathInElement(div, {\n        delimiters: [\n          { display: true, left: '\\\\[', right: '\\\\]' },\n          { display: false, left: '$', right: '$' },\n        ],\n        errorColor: '#CC0000',\n        preProcess: (chaine: string) =>\n          chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n        strict: 'warn',\n        throwOnError: true,\n        trust: false,\n      })\n    }\n    for (const div of divs) {\n      figure.modal.appendChild(div)\n    }\n    sendToMachine(figure, {\n      element: undefined,\n      possibleElements,\n      waitingWithModal: true,\n      x,\n      y,\n    })\n  } else {\n    sendToMachine(figure, { element: undefined, x, y })\n  }\n}\n\nfunction sendToMachine(\n  figure: Figure,\n  {\n    element,\n    possibleElements,\n    waitingWithModal,\n    x,\n    y,\n  }: {\n    element?: Element2D\n    possibleElements?: Element2D[]\n    waitingWithModal?: boolean\n    x: number\n    y: number\n  },\n): void {\n  if (figure.ui !== undefined) {\n    figure.ui.send({\n      type: 'clickLocation',\n      element,\n      possibleElements,\n      waitingWithModal: waitingWithModal ?? false,\n      x,\n      y,\n    })\n  }\n}\n","export default \"__VITE_ASSET__D8HsEGKV__\"","export default \"__VITE_ASSET__DbR9m$Gu__\"","export default \"__VITE_ASSET__SlOcvlal__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='172'%20height='172'%20viewBox='0%200%20172%20172'%20id='svg4328'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='CercOA.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs4330'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='10.627907'%20inkscape:cx='86.094092'%20inkscape:cy='86.282276'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20units='px'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata4333'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-33.585071,-34.933635)'%3e%3cellipse%20cy='121.43363'%20cx='117.08508'%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;fill:none;stroke:%230e232e;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='path3386'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\CercOA.png'%20inkscape:export-xdpi='24.994829'%20inkscape:export-ydpi='24.994829'%20rx='67.943108'%20ry='67.00219'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20130.56652,103.50458%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.644494,5.28773%2012.462224,13.30306%20-13.303059,12.46224%205.287729,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3cpath%20id='path916'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20198.31269,101.52865%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.64449,5.28773%2012.46222,13.30306%20-13.30306,12.46224%205.28773,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__CkxR9FCv__\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8%2016h8v2H8zm0-4h8v2H8zm6-10H6c-1.1%200-2%20.9-2%202v16c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6zm4%2018H6V4h7v5h5v11z'/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__TRrX_ORw__\"","export default \"__VITE_ASSET__DDfxJIYG__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='172'%20height='172'%20viewBox='0%200%20172%20172'%20id='svg4328'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='CercOA.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs4330'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='10.627907'%20inkscape:cx='86.094092'%20inkscape:cy='86.282276'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20units='px'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata4333'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-33.585071,-34.933635)'%3e%3cellipse%20cy='121.43363'%20cx='117.08508'%20style='fill-opacity:0.5;color:%23000000;display:inline;overflow:visible;visibility:visible;fill:%23216D9A;stroke:%230e232e;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='path3386'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\CercOA.png'%20inkscape:export-xdpi='24.994829'%20inkscape:export-ydpi='24.994829'%20rx='67.943108'%20ry='67.00219'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20130.56652,103.50458%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.644494,5.28773%2012.462224,13.30306%20-13.303059,12.46224%205.287729,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3cpath%20id='path916'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20198.31269,101.52865%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.64449,5.28773%2012.46222,13.30306%20-13.30306,12.46224%205.28773,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DeplacerCroix.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.1671513'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20id='rect1225-3'%20style='fill:%234d4d4d;stroke:%23333333;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20273.42827,258.65045%20-4.28859,16.54236%20-16.54238,-4.28858%20-1.81965,7.01893%2016.54237,4.28859%20-4.28859,16.54237%207.01893,1.81966%204.2886,-16.54237%2016.54415,4.28905%201.81964,-7.01894%20-16.54414,-4.28905%204.2886,-16.54237%20z'%20/%3e%3cpath%20id='rect1575'%20style='fill:%230000ff;stroke:%23000080;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none'%20d='m%20315.17268,274.25336%20-19.96665,22.76627%2015.01387,-0.10537%20v%2019.32699%20h%20-19.76077%20l%200.10773,-14.6843%20-23.27726,19.52834%2022.98522,20.47654%200.10289,-14.18562%20h%2019.84217%20v%2019.327%20l%20-15.01389,-0.10537%2019.96665,22.76629%2020.93614,-22.48065%20-14.504,-0.10067%20v%20-19.40659%20h%2019.84216%20l%200.10289,14.18562%2022.98523,-20.47655%20-23.27728,-19.52833%200.10773,14.6843%20h%20-19.7608%20V%20296.8347%20l%2014.50399,-0.10067%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='50'%20height='50'%20id='svg3076'%20version='1.1'%20inkscape:version='0.48.3.1%20r9886'%20sodipodi:docname='Translation24.svg'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\Translation24.png'%20inkscape:export-xdpi='43.200001'%20inkscape:export-ydpi='43.200001'%3e%3cdefs%20id='defs3078'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.6'%20inkscape:cx='11.559973'%20inkscape:cy='41.015213'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20inkscape:window-width='1301'%20inkscape:window-height='752'%20inkscape:window-x='1771'%20inkscape:window-y='114'%20inkscape:window-maximized='0'%20/%3e%3cmetadata%20id='metadata3081'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(0,-1002.3622)'%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2021.06238,1030.9464%20-9.997195,0%200,6.6937%20-9.4258535,-10.5188%209.1402445,-9.0845%200,6.2156%209.997072,0%20z'%20id='path3084-3'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2021.177764,1023.6809%200,-9.9972%20-6.6937,0%2010.5188,-9.4259%209.0845,9.1403%20-6.2156,0%200,9.997%20z'%20id='path3084-3-2'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2029.03845,1024.2542%209.9972,0%200,-6.6937%209.4259,10.5188%20-9.1403,9.0845%200,-6.2156%20-9.997,0%20z'%20id='path3084-3-21'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2028.286522,1031.0435%200,9.9972%206.6937,0%20-10.5188,9.4259%20-9.0845,-9.1403%206.2156,0%200,-9.997%20z'%20id='path3084-3-6'%20inkscape:connector-curvature='0'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M419.1,337.45a3.94,3.94,0,0,0-6.1,0c-10.5,12.4-45,46.55-45,77.66,0,27,21.5,48.89,48,48.89h0c26.5,0,48-22,48-48.89C464,384,429.7,349.85,419.1,337.45Z'%20style='fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:32px'/%3e%3cpath%20d='M387,287.9,155.61,58.36a36,36,0,0,0-51,0l-5.15,5.15a36,36,0,0,0,0,51l52.89,52.89,57-57L56.33,263.2a28,28,0,0,0,.3,40l131.2,126a28.05,28.05,0,0,0,38.9-.1c37.8-36.6,118.3-114.5,126.7-122.9,5.8-5.8,18.2-7.1,28.7-7.1h.3A6.53,6.53,0,0,0,387,287.9Z'%20style='fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:32px'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='48px'%20height='48px'%20id='svg2985'%20version='1.1'%20inkscape:version='0.48.3.1%20r9886'%20sodipodi:docname='RepQuadrille.svg'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\RepQuadrille.png'%20inkscape:export-xdpi='45'%20inkscape:export-ydpi='45'%3e%3cdefs%20id='defs2987'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='7'%20inkscape:cx='8.6892489'%20inkscape:cy='24'%20inkscape:current-layer='layer1'%20showgrid='true'%20inkscape:grid-bbox='true'%20inkscape:document-units='px'%20inkscape:window-width='1920'%20inkscape:window-height='1018'%20inkscape:window-x='1272'%20inkscape:window-y='-8'%20inkscape:window-maximized='1'%20/%3e%3cmetadata%20id='metadata2990'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20id='layer1'%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2019.714286,2.8571429%200,42.0000001'%20id='path3777'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2031.857143,44.428571%200,-41.5714281'%20id='path3779'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%203.0000002,27.928571%2042.0000008,0'%20id='path3777-1'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2044.571429,15.785714%20-41.5714288,0'%20id='path3779-7'%20inkscape:connector-curvature='0'%20/%3e%3cg%20id='g3769'%20transform='translate(-15.714286,-0.57142857)'%3e%3cpath%20inkscape:connector-curvature='0'%20id='path2993'%20d='m%2022.285714,45.142857%200,-41.9999999'%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20id='path3765'%20d='m%2018.571429,9.5714287%203.714285,-6.0000001%204,6.1428571'%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20sodipodi:nodetypes='ccc'%20/%3e%3c/g%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%202.1428571,39.857142%2043.4285719,0'%20id='path2995'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='M%2040.285715,36.285713%2045.285714,39.857142%2040,43.142857'%20id='path3767'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='ccc'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg7795'%20version='1.1'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20sodipodi:docname='Cacher.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='3.6342001'%20inkscape:cx='49.529469'%20inkscape:cy='89.153045'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3ccircle%20style='fill:%23333333;stroke:none;stroke-width:4.6875;stroke-linecap:round;stroke-linejoin:round'%20id='path1103'%20cx='309.63495'%20cy='310.36917'%20r='20.379314'%20/%3e%3cpath%20id='circle1221'%20style='fill:none;stroke:%23333333;stroke-width:4.68749;stroke-linecap:round;stroke-linejoin:round'%20d='m%20309.82851,284.44282%20a%2046.111419,35.599308%200%200%200%20-44.46899,26.22253%2046.111419,35.599308%200%200%200%2045.24353,29.11194%2046.111419,35.599308%200%200%200%2044.52576,-26.3562%2046.111419,35.599308%200%200%200%20-45.3003,-28.97827%20z'%20/%3e%3cpath%20style='fill:none;stroke:%23ffffff;stroke-width:4.6875;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20283.58039,349.32202%2056.23658,-75.97098'%20id='path1337'%20sodipodi:nodetypes='cc'%20/%3e%3cpath%20style='fill:none;stroke:%23333333;stroke-width:5.71875;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20277.90514,349.19304%2056.23658,-75.97098'%20id='path1728'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M8%206.9834C7.44772%206.9834%207%207.43111%207%207.9834C7%208.53568%207.44772%208.9834%208%208.9834H16C16.5523%208.9834%2017%208.53568%2017%207.9834C17%207.43111%2016.5523%206.9834%2016%206.9834H8Z'%20fill='currentColor'%20/%3e%3cpath%20d='M7%2012C7%2011.4477%207.44772%2011%208%2011H16C16.5523%2011%2017%2011.4477%2017%2012C17%2012.5523%2016.5523%2013%2016%2013H8C7.44772%2013%207%2012.5523%207%2012Z'%20fill='currentColor'%20/%3e%3cpath%20d='M8%2015.017C7.44772%2015.017%207%2015.4647%207%2016.017C7%2016.5693%207.44772%2017.017%208%2017.017H16C16.5523%2017.017%2017%2016.5693%2017%2016.017C17%2015.4647%2016.5523%2015.017%2016%2015.017H8Z'%20fill='currentColor'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%206.47715%206.47715%202%2012%202C17.5228%202%2022%206.47715%2022%2012ZM20%2012C20%2016.4183%2016.4183%2020%2012%2020C7.58172%2020%204%2016.4183%204%2012C4%207.58172%207.58172%204%2012%204C16.4183%204%2020%207.58172%2020%2012Z'%20fill='currentColor'%20/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__Mcv0p6c3__\"","export default \"__VITE_ASSET__G1b16E2G__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6059'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DteAB.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6061'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6064'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-239.71429,-146.3622)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20259.24625,169.42969%20132.93607,136.4716%200,0'%20id='path5210'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DteAB.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20313.58289,199.16932%20-17.05023,1.15379%20-1.1538,-17.05024%20-7.23443,0.48955%201.15379,17.05024%20-17.05024,1.15379%200.48956,7.23443%2017.05024,-1.15379%201.15391,17.05207%207.23443,-0.48956%20-1.15392,-17.05206%2017.05025,-1.15379%20z'%20/%3e%3cpath%20id='rect1225-6'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20374.77181,262.24024%20-17.08874,0.12894%20-0.12895,-17.08875%20-7.25076,0.0547%200.12894,17.08874%20-17.08875,0.12895%200.0547,7.25077%2017.08875,-0.12894%200.12896,17.09058%207.25077,-0.0547%20-0.12896,-17.09057%2017.08875,-0.12894%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg8379'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DtePar.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs8381'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata8384'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-188.28571,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20209.93899,362.6242%20322.36896,252.31555'%20id='path5128-6'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePar.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20229.38443,387.37294%20341.8144,277.06429'%20id='path5128-6-1'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePar.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20265.33198,286.22826%20-2.70865,16.87321%20-16.87321,-2.70864%20-1.14928,7.15931%2016.87321,2.70864%20-2.70864,16.87322%207.15931,1.14927%202.70865,-16.87321%2016.87502,2.70894%201.14927,-7.15932%20-16.87501,-2.70893%202.70864,-16.87321%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg10117'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DtePer.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs10119'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata10122'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-373.99999,-383.50506)'%3e%3crect%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;fill:none;stroke:%23000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='rect5356-5'%20width='22.627417'%20height='22.627417'%20x='651.37585'%20y='-49.423424'%20transform='matrix(0.67181757,0.74071665,-0.74071665,0.67181757,0,0)'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20396.71395,402.68345%20507.02258,515.11342'%20id='path5128-6-0'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20415.09871,538.8015%20527.52869,428.49286'%20id='path5128-6-1-6'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20420.04977,407.25998%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9584'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='MarqueAngNor.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9586'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9589'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-85.428573,-169.21935)'%3e%3cpath%20sodipodi:type='arc'%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0'%20id='path6264'%20sodipodi:cx='109.4986'%20sodipodi:cy='316.49066'%20sodipodi:rx='68'%20sodipodi:ry='68'%20d='M%20138.13417,254.81405%20A%2068,68%200%200%201%20174.048,295.10436'%20sodipodi:start='5.1470592'%20sodipodi:end='5.9632507'%20sodipodi:open='true'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueAngNor.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20sodipodi:arc-type='arc'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20246.4986,270.49066%20-138,48%2061,-134.00001'%20id='path6262'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueAngNor.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%2093.803141,303.52038%2010.528829,13.46052%20-13.460534,10.52884%204.467379,5.7113%2013.460535,-10.52882%2010.52883,13.46052%205.7113,-4.46738%20-10.52882,-13.46053%2013.46198,-10.52996%20-4.4674,-5.71131%20-13.46196,10.52996%20-10.528836,-13.46054%20z'%20/%3e%3cpath%20id='rect1225-3'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20228.00548,256.64656%20-4.24057,16.55473%20-16.55475,-4.24058%20-1.79927,7.02419%2016.55473,4.24058%20-4.24057,16.55474%207.02418,1.79928%204.24058,-16.55474%2016.55652,4.24103%201.79928,-7.02419%20-16.55651,-4.24102%204.24058,-16.55476%20z'%20/%3e%3cpath%20id='rect1225-4'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20154.71904,190.33971%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29385,7.24501%2017.07519,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg11955'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='MarqueSegment.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs11957'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata11960'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-202.57143,-183.50506)'%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20223.57144,228.50504%20128,89'%20id='path10603'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20289.57144,252.50504%20-17,34'%20id='path10630'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20302.07144,262.50504%20-17,34'%20id='path10630-7'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20222.84001,208.38909%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3cpath%20id='rect1225-7'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20347.88816,297.11776%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__A7PzNn3a__\"","export default \"__VITE_ASSET__nqn$F7dW__\"","export default \"__VITE_ASSET__CufPzIOP__\"","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDguNTQyMjIxbW0iCiAgIGhlaWdodD0iNDguNTQyMjIxbW0iCiAgIHZpZXdCb3g9IjAgMCAxNzIgMTcyIgogICBpZD0ic3ZnNzc5NSIKICAgdmVyc2lvbj0iMS4xIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjItYWxwaGExIChiNmExNWJiLCAyMDIyLTAyLTIzKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ibW92ZUxhYmVsLnN2ZyIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczc3OTciIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjMuNTE2NjMwNiIKICAgICBpbmtzY2FwZTpjeD0iMzkuNTI2NDcyIgogICAgIGlua3NjYXBlOmN5PSI5Ni4zOTkwOTMiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgZml0LW1hcmdpbi10b3A9IjAiCiAgICAgZml0LW1hcmdpbi1sZWZ0PSIwIgogICAgIGZpdC1tYXJnaW4tcmlnaHQ9IjAiCiAgICAgZml0LW1hcmdpbi1ib3R0b209IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxNDQwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjkwMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIwIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBpZD0iZ3JpZDY4NjgiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNzgwMCI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iQ2FscXVlIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjIuNTcxNDMsLTIzMi4wNzY0OCkiPgogICAgPHRleHQKICAgICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgICBzdHlsZT0iZm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2xpbmUtaGVpZ2h0OjAlO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojNGQ0ZDRkO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIgogICAgICAgeD0iMjU5LjM1NzUxIgogICAgICAgeT0iMzEzLjg1MDgiCiAgICAgICBpZD0idGV4dDM2NzMiCiAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9IkM6XFVzZXJzXFNlYlxEb3dubG9hZHNcbWF0aHNcTWF0aGdyYXBoMzJcSWNvbmVzXHBuZ1w0OFxOb21tZXIucG5nIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjI1LjExNjI4IgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9IjI1LjExNjI4Ij48dHNwYW4KICAgICAgICAgc29kaXBvZGk6cm9sZT0ibGluZSIKICAgICAgICAgaWQ9InRzcGFuMzY3NSIKICAgICAgICAgeD0iMjU5LjM1NzUxIgogICAgICAgICB5PSIzMTMuODUwOCIKICAgICAgICAgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjk3Ljg5MnB4O2xpbmUtaGVpZ2h0OjEuMjU7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidTYW5zIEJvbGQnO2ZpbGw6IzRkNGQ0ZDtmaWxsLW9wYWNpdHk6MSI+QTwvdHNwYW4+PC90ZXh0PgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MTIyNSIKICAgICAgIHN0eWxlPSJmaWxsOiM0ZDRkNGQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MDAwMDA7c3Ryb2tlLXdpZHRoOjAuOTM3NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDM3MS45NDQ3MiwzMzIuMTYxMSAtMTIuMDgzOTEsMTIuMDgzOTEgLTEyLjA4MzkyLC0xMi4wODM5MSAtNS4xMjcyMSw1LjEyNzIxIDEyLjA4MzkxLDEyLjA4MzkxIC0xMi4wODM5MSwxMi4wODM5MiA1LjEyNzIxLDUuMTI3MjEgMTIuMDgzOTIsLTEyLjA4MzkxIDEyLjA4NTIxLDEyLjA4NTIxIDUuMTI3MjEsLTUuMTI3MjIgLTEyLjA4NTIxLC0xMi4wODUyIDEyLjA4MzkyLC0xMi4wODM5MiB6IiAvPgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MTU3NSIKICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwZmY7c3Ryb2tlOiMwMDAwODA7c3Ryb2tlLXdpZHRoOjIuODEyNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUiCiAgICAgICBkPSJtIDI5My45MTY5NiwzMDMuMDcxNzMgLTE5Ljk2NjY1LDIyLjc2NjI3IDE1LjAxMzg3LC0wLjEwNTM3IHYgMTkuMzI2OTkgaCAtMTkuNzYwNzcgbCAwLjEwNzczLC0xNC42ODQzIC0yMy4yNzcyNiwxOS41MjgzNCAyMi45ODUyMiwyMC40NzY1NCAwLjEwMjg5LC0xNC4xODU2MiBoIDE5Ljg0MjE3IHYgMTkuMzI3IGwgLTE1LjAxMzg5LC0wLjEwNTM3IDE5Ljk2NjY1LDIyLjc2NjI5IDIwLjkzNjE0LC0yMi40ODA2NSAtMTQuNTA0LC0wLjEwMDY3IHYgLTE5LjQwNjU5IGggMTkuODQyMTYgbCAwLjEwMjg5LDE0LjE4NTYyIDIyLjk4NTIzLC0yMC40NzY1NSAtMjMuMjc3MjgsLTE5LjUyODMzIDAuMTA3NzMsMTQuNjg0MyBoIC0xOS43NjA4IHYgLTE5LjQwNjU2IGwgMTQuNTAzOTksLTAuMTAwNjcgeiIgLz4KICA8L2c+Cjwvc3ZnPgo=\"","export default \"__VITE_ASSET__DgE8bv$5__\"","export default \"data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='currentColor'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.956%206h.05a2.99%202.99%200%200%201%202.117.879%203.003%203.003%200%200%201%200%204.242%202.99%202.99%200%200%201-2.117.879h-1.995v-1h1.995a2.002%202.002%200%200%200%200-4h-.914l-.123-.857a2.49%202.49%200%200%200-2.126-2.122A2.478%202.478%200%200%200%206.23%205.5l-.333.762-.809-.189A2.49%202.49%200%200%200%204.523%206c-.662%200-1.297.263-1.764.732A2.503%202.503%200%200%200%204.523%2011h2.494v1H4.523a3.486%203.486%200%200%201-2.628-1.16%203.502%203.502%200%200%201-.4-4.137A3.497%203.497%200%200%201%203.853%205.06c.486-.09.987-.077%201.468.041a3.486%203.486%200%200%201%203.657-2.06A3.479%203.479%200%200%201%2011.956%206zm-1.663%203.853L8.979%208.54v5.436h-.994v-5.4L6.707%209.854%206%209.146%208.146%207h.708L11%209.146l-.707.707z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-circle-ellipsis-icon%20lucide-circle-ellipsis'%3e%3ccircle%20cx='12'%20cy='12'%20r='10'/%3e%3cpath%20d='M17%2012h.01'/%3e%3cpath%20d='M12%2012h.01'/%3e%3cpath%20d='M7%2012h.01'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204H5v16h5V4zm9%200h-5v16h5V4z'%20fill='currentColor'/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__WprUuh5n__\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M133,440a35.37,35.37,0,0,1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37,7.46-27.53,19.46-34.33a35.13,35.13,0,0,1,35.77.45L399.12,225.48a36,36,0,0,1,0,61L151.23,434.88A35.5,35.5,0,0,1,133,440Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M112,64a16,16,0,0,1,16,16V216.43L360.77,77.11a35.13,35.13,0,0,1,35.77-.44c12,6.8,19.46,20,19.46,34.33V401c0,14.37-7.46,27.53-19.46,34.33a35.14,35.14,0,0,1-35.77-.45L128,295.57V432a16,16,0,0,1-32,0V80A16,16,0,0,1,112,64Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M400,64a16,16,0,0,0-16,16V216.43L151.23,77.11a35.13,35.13,0,0,0-35.77-.44C103.46,83.47,96,96.63,96,111V401c0,14.37,7.46,27.53,19.46,34.33a35.14,35.14,0,0,0,35.77-.45L384,295.57V432a16,16,0,0,0,32,0V80A16,16,0,0,0,400,64Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9132'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLibre.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9134'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9137'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-396.85714,-289.21935)'%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20494.9404,357.8194%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6777'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Int.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6779'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6782'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-53.999999,-106.3622)'%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2093.999977,241.36218%20c%2032.000003,-89%20108.000003,-96%20108.000003,-96'%20id='path6486'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Int.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2078.999977,140.36218%20c%2086.000003,17%20126.000003,101%20126.000003,101'%20id='path6488'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Int.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20143.4937,149.03765%20-2.57947,16.89344%20-16.89344,-2.57946%20-1.09447,7.16789%2016.89344,2.57947%20-2.57946,16.89344%207.16789,1.09447%202.57948,-16.89344%2016.89525,2.57974%201.09446,-7.1679%20-16.89525,-2.57974%202.57947,-16.89344%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg10307'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLie.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs10309'%3e%3cmarker%20inkscape:stockid='TriangleOutM'%20orient='auto'%20refY='0'%20refX='0'%20id='TriangleOutM-49'%20style='overflow:visible'%3e%3cpath%20inkscape:connector-curvature='0'%20id='path4275-6'%20d='m%205.77,0%20-8.65,5%200,-10%208.65,5%20z'%20style='fill-rule:evenodd;stroke:%23000000;stroke-width:1pt;marker-start:none'%20transform='scale(0.4,0.4)'%20/%3e%3c/marker%3e%3c/defs%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata10312'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-76.857139,-83.505057)'%3e%3cpath%20style='fill:none;stroke:%230084c8;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2097.85712,214.50507%20138,-73'%20id='path4062'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\PointLie.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cg%20id='path4124'%3e%3cpath%20style='color:%23000000;fill:%23000000;-inkscape-stroke:none'%20d='m%20113.33398,103.50586%20v%206%20c%2020.12366,0%2029.8666,9.66997%2035.22852,19.55273%205.36192,9.88276%205.82031,19.82227%205.82031,19.82227%20l%205.99414,-0.25586%20c%200,0%20-0.44223,-11.18683%20-6.54101,-22.42773%20-6.09879,-11.2409%20-18.3783,-22.69141%20-40.50196,-22.69141%20z'%20id='path846'%20/%3e%3cg%20id='g836'%3e%3cg%20id='path838'%3e%3cpath%20style='color:%23000000;fill:%23000000;fill-rule:evenodd;stroke-width:2.4pt;-inkscape-stroke:none'%20d='m%20157.96842,162.58791%20-12.87175,-20.23105%2023.9783,-1.02036%20z'%20id='path842'%20/%3e%3cpath%20style='color:%23000000;fill:%23000000;fill-rule:evenodd;-inkscape-stroke:none'%20d='m%20171.77734,139.61914%20-29.51953,1.25781%2015.84571,24.9043%201.2832,-2.45313%20z%20m%20-5.40625,3.43359%20-8.53711,16.3418%20-9.89843,-15.55664%20z'%20id='path844'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20165.4772,160.34679%20-5.65672,16.12585%20-16.12586,-5.65672%20-2.40016,6.84221%2016.12586,5.65673%20-5.65672,16.12586%206.84221,2.40015%205.65673,-16.12586%2016.12759,5.65734%202.40015,-6.84222%20-16.12759,-5.65733%205.65673,-16.12587%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__B5XCLbhp__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg5485'%20version='1.1'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20sodipodi:docname='ray.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs5487'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='1.843718'%20inkscape:cx='126.91746'%20inkscape:cy='180.61331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20/%3e%3cmetadata%20id='metadata5490'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(23.142857,-109.21934)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%2010.531241,246.13103%20122.96121,135.82237'%20id='path5128'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DemiDt.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%207.0994717,225.37249%20-0.6925638,17.07519%20-17.0751979,-0.69256%20-0.293855,7.24501%2017.0751903,0.69257%20-0.692557,17.07519%207.2450127,0.29386%200.692571,-17.0752%2017.077028,0.69264%200.293848,-7.24502%20-17.07702,-0.69263%200.692564,-17.07521%20z'%20/%3e%3cpath%20id='path1390'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%2082.099475,150.37249%20-0.692563,17.07519%20-17.075199,-0.69256%20-0.293855,7.24501%2017.075191,0.69257%20-0.692557,17.07519%207.245013,0.29386%200.692571,-17.0752%2017.077024,0.69264%200.29385,-7.24502%20-17.077018,-0.69263%200.692564,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%20512%20512'%20version='1.1'%20id='svg11'%20sodipodi:docname='redo.svg'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs15'%20/%3e%3csodipodi:namedview%20id='namedview13'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='0.4609375'%20inkscape:cx='-156.20339'%20inkscape:cy='256'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20d='m%20289.42871,234.78304%20h%20168.45736%20c%205.5336,0%2010.06934,-4.12064%2010.06934,-9.2057%20V%2072.324346%20c%200,-5.08505%20-4.53574,-9.2057%20-10.06934,-9.2057%20h%20-40.36809%20c%20-5.53359,0%20-10.06933,4.12065%20-10.06933,9.2057%20V%20132.11756%20C%20368.98558,93.190596%20313.10527,68.817416%20250.96563,69.255776%20135.84856,70.044836%2043.773036,154.64961%2044.045186,259.50693%20c%200.18143,104.5943%2093.436244,189.37442%20208.462594,189.37442%2053.88459,0%20102.9613,-18.58675%20139.97293,-49.18475%204.2636,-3.50693%204.44503,-9.64406%200.36286,-13.32634%20l%20-28.57516,-26.03899%20c%20-3.71931,-3.41926%20-9.7972,-3.5946%20-13.78865,-0.43836%20-26.03514,21.12927%20-60.41605,33.84191%20-97.97198,33.84191%20-81.73402,0%20-147.95582,-60.23159%20-147.95582,-134.75393%200,-74.43467%2066.13108,-134.75393%20147.95582,-134.75393%2049.16742,0%2092.71052,21.83066%20119.5621,55.32188%20h%20-82.64117%20c%20-5.53361,0%20-10.06935,4.12065%20-10.06935,9.2057%20v%2036.73513%20c%200,5.08505%204.53574,9.2057%2010.06935,9.2057%20z'%20id='path9'%20style='stroke-width:0.891811'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6604'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='SymCentrale.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6606'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6609'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-242.57143,-206.3622)'%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20262.79014,214.45852%200,44.10483%2073.98869,0%20z'%20id='path3045-4-7'%20inkscape:connector-curvature='0'%20inkscape:transform-center-x='28.537028'%20inkscape:transform-center-y='-56.288402'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymCentrale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%230e232e;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20394.33944,369.23811%20-0.27728,-44.10402%20-73.98735,0.42829%20z'%20id='path3045-4-7-1'%20inkscape:connector-curvature='0'%20inkscape:transform-center-x='-28.885614'%20inkscape:transform-center-y='55.147417'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymCentrale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.937498;stroke-linecap:round;stroke-linejoin:round'%20d='m%20336.51961,280.10863%20-8.2544,8.61959%20-8.61959,-8.2544%20-3.50236,3.6573%208.6196,8.2544%20-8.25439,8.61959%203.65729,3.50234%208.25441,-8.61958%208.62052,8.25528%203.50235,-3.6573%20-8.62053,-8.25528%208.25441,-8.6196%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6028'%20version='1.1'%20inkscape:version='0.91%20r13725'%20sodipodi:docname='SymAxiale.svg'%3e%3cdefs%20id='defs6030'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1920'%20inkscape:window-height='1017'%20inkscape:window-x='1272'%20inkscape:window-y='-8'%20inkscape:window-maximized='1'%20/%3e%3cmetadata%20id='metadata6033'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-93.999999,-123.50506)'%3e%3crect%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;opacity:0.1;fill:none;stroke:%23000000;stroke-width:0.81904763;stroke-miterlimit:4;stroke-dasharray:none;marker:none;enable-background:accumulate'%20id='rect5045-5-5-7'%20width='171.18095'%20height='171.18095'%20x='94.409523'%20y='123.91458'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20130.46906,156.13811%2013.33444,38.77103%2062.4119,-21.4652%20z'%20id='path3045-8'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%230e232e;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20170.47238,272.4512%20-13.33444,-38.77103%2062.4119,-21.4652%20z'%20id='path3045-8-4'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:6;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:24,%2012,%206,%2012;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20117.84631,225.5151%20251.65365,179.49502'%20id='path3961'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='600'%20height='600'%20style='border-radius:300px'%20version='1.1'%20id='svg24'%20sodipodi:docname='corbeille.svg'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs28'%20/%3e%3csodipodi:namedview%20id='namedview26'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20showgrid='false'%20inkscape:zoom='1.455'%20inkscape:cx='299.65636'%20inkscape:cy='299.65636'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:current-layer='svg24'%20/%3e%3c!--%20Created%20with%20SVG-edit%20-%20http://svg-edit.googlecode.com/%20--%3e%3cline%20stroke-linecap='round'%20x1='180'%20y1='159.25'%20x2='420'%20y2='159.25'%20style='stroke:%23333333;stroke-width:30;fill:%23e2e3db'%20id='line7'%20/%3e%3crect%20x='250'%20y='129.25'%20rx='20'%20ry='20'%20width='100'%20height='30'%20style='stroke:%23333333;stroke-width:10;fill:%23e2e3db'%20id='rect9'%20/%3e%3cline%20stroke-linecap='round'%20x1='189'%20y1='198.75'%20x2='200'%20y2='466.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line11'%20/%3e%3cline%20id='bottom'%20stroke-linecap='round'%20x1='411'%20y1='198.75'%20x2='400'%20y2='466.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20/%3e%3cline%20stroke-linecap='square'%20x1='189'%20y1='198.75'%20x2='411'%20y2='198.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line14'%20/%3e%3cline%20stroke-linecap='round'%20x1='203'%20y1='470.75'%20x2='397'%20y2='470.75'%20style='stroke:%23333333;stroke-width:30;fill:%23e2e3db'%20id='line16'%20/%3e%3cline%20stroke-linecap='round'%20x1='260'%20y1='198.75'%20x2='265'%20y2='470.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line18'%20/%3e%3cline%20stroke-linecap='round'%20x1='340'%20y1='198.75'%20x2='335'%20y2='470.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line20'%20/%3e%3c/svg%3e%3c!----%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20version='1.1'%20id='mdi-restart'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4C14.1,4%2016.1,4.8%2017.6,6.3C20.7,9.4%2020.7,14.5%2017.6,17.6C15.8,19.5%2013.3,20.2%2010.9,19.9L11.4,17.9C13.1,18.1%2014.9,17.5%2016.2,16.2C18.5,13.9%2018.5,10.1%2016.2,7.7C15.1,6.6%2013.5,6%2012,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15%203.3,11%205.1,7.9L6.6,9.4C5.5,11.6%205.9,14.4%207.8,16.2C8.3,16.7%208.9,17.1%209.6,17.4L9,19.4C8,19%207.1,18.4%206.3,17.6Z'%20/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__7uo6GkGD__\"","export default \"data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='currentColor'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.957%206h.05a2.99%202.99%200%200%201%202.116.879%203.003%203.003%200%200%201%200%204.242%202.99%202.99%200%200%201-2.117.879v-1a2.002%202.002%200%200%200%200-4h-.914l-.123-.857a2.49%202.49%200%200%200-2.126-2.122A2.478%202.478%200%200%200%206.231%205.5l-.333.762-.809-.189A2.49%202.49%200%200%200%204.523%206c-.662%200-1.297.263-1.764.732A2.503%202.503%200%200%200%204.523%2011h.498v1h-.498a3.486%203.486%200%200%201-2.628-1.16%203.502%203.502%200%200%201%201.958-5.78%203.462%203.462%200%200%201%201.468.04%203.486%203.486%200%200%201%203.657-2.06A3.479%203.479%200%200%201%2011.957%206zm-5.25%205.121l1.314%201.314V7h.994v5.4l1.278-1.279.707.707-2.146%202.147h-.708L6%2011.829l.707-.708z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg11267'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Segment.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs11269'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata11272'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(17.428573,-43.505061)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%209.4170928,107.94873%20C%20133.86789,156.73909%20133.86789,156.73909%20133.86789,156.73909'%20id='path5172'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Segment.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='M%2019.68314,89.52305%207.59923,101.60696%20-4.48469,89.52305%20-9.6119,94.65026%202.47201,106.73417%20-9.6119,118.81809%20l%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20id='rect1225-1'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20146.33084,139.67403%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__Dy75rR$R__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon'%20viewBox='0%200%201024%201024'%3e%3cpath%20d='M324%20666a48%2048%200%201%200%2096%200%2048%2048%200%201%200-96%200zm616.7-309.6L667.6%2083.2C655.2%2070.9%20638.7%2064%20621.1%2064s-34.1%206.8-46.5%2019.2L83.3%20574.5a65.85%2065.85%200%200%200%200%2093.1l273.2%20273.2c12.3%2012.3%2028.9%2019.2%2046.5%2019.2s34.1-6.8%2046.5-19.2l491.3-491.3c25.6-25.7%2025.6-67.5-.1-93.1zM403%20880.1L143.9%20621l477.2-477.2%20259%20259.2L403%20880.1zM152.8%20373.7a7.9%207.9%200%200%200%2011.2%200L373.7%20164a7.9%207.9%200%200%200%200-11.2l-38.4-38.4a7.9%207.9%200%200%200-11.2%200L114.3%20323.9a7.9%207.9%200%200%200%200%2011.2l38.5%2038.6zm718.6%20276.6a7.9%207.9%200%200%200-11.2%200L650.3%20860.1a7.9%207.9%200%200%200%200%2011.2l38.4%2038.4a7.9%207.9%200%200%200%2011.2%200L909.7%20700a7.9%207.9%200%200%200%200-11.2l-38.3-38.5z'/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__z2SSgntD__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%20512%20512'%20version='1.1'%20id='svg11'%20sodipodi:docname='undo.svg'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs15'%20/%3e%3csodipodi:namedview%20id='namedview13'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='0.4609375'%20inkscape:cx='-156.20339'%20inkscape:cy='256'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20d='M%20222.57129,234.78304%20H%2054.113924%20c%20-5.5336,0%20-10.06934,-4.12064%20-10.06934,-9.2057%20V%2072.324346%20c%200,-5.08505%204.53574,-9.2057%2010.06934,-9.2057%20h%2040.36809%20c%205.533596,0%2010.069336,4.12065%2010.069336,9.2057%20v%2059.793214%20c%2038.46307,-38.926964%2094.34338,-63.300144%20156.48302,-62.861784%20115.11707,0.78906%20207.19259,85.393834%20206.92044,190.251154%20-0.18143,104.5943%20-93.43624,189.37442%20-208.46259,189.37442%20-53.88459,0%20-102.9613,-18.58675%20-139.97293,-49.18475%20-4.2636,-3.50693%20-4.44503,-9.64406%20-0.36286,-13.32634%20l%2028.57516,-26.03899%20c%203.71931,-3.41926%209.7972,-3.5946%2013.78865,-0.43836%2026.03514,21.12927%2060.41605,33.84191%2097.97198,33.84191%2081.73402,0%20147.95582,-60.23159%20147.95582,-134.75393%200,-74.43467%20-66.13108,-134.75393%20-147.95582,-134.75393%20-49.16742,0%20-92.71052,21.83066%20-119.5621,55.32188%20h%2082.64117%20c%205.53361,0%2010.06935,4.12065%2010.06935,9.2057%20v%2036.73513%20c%200,5.08505%20-4.53574,9.2057%20-10.06935,9.2057%20z'%20id='path9'%20style='stroke-width:0.891811'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg12430'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Vecteur.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs12432'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata12435'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-114,-203.50506)'%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20147.91469,269.51062%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20id='rect1225-6'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20277.66556,270.01925%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20style='fill:%230e232e;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-mid:none;marker-end:none'%20d='m%20137.2703,286.72174%20122.66222,0.61695'%20id='path3926'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='cc'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Vecteur.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20230.52355,266.89496%2031.16924,20.38028%20-30.82986,20.71317'%20id='path6358'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='ccc'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Vecteur.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5%2014.5C8.94772%2014.5%208.5%2014.0523%208.5%2013.5V11.5H6.5C5.94772%2011.5%205.5%2011.0523%205.5%2010.5V9.5C5.5%208.94772%205.94772%208.5%206.5%208.5H8.5V6.5C8.5%205.94772%208.94772%205.5%209.5%205.5H10.5C11.0523%205.5%2011.5%205.94772%2011.5%206.5V8.5H13.5C14.0523%208.5%2014.5%208.94772%2014.5%209.5V10.5C14.5%2011.0523%2014.0523%2011.5%2013.5%2011.5H11.5V13.5C11.5%2014.0523%2011.0523%2014.5%2010.5%2014.5H9.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.5%2010C0.5%204.75329%204.75329%200.5%2010%200.5C15.2467%200.5%2019.5%204.75329%2019.5%2010C19.5%2012.082%2018.8302%2014.0076%2017.6944%2015.5731L22.4142%2020.2929C22.8047%2020.6834%2022.8047%2021.3166%2022.4142%2021.7071L21.7071%2022.4142C21.3166%2022.8047%2020.6834%2022.8047%2020.2929%2022.4142L15.5731%2017.6944C14.0076%2018.8302%2012.082%2019.5%2010%2019.5C4.75329%2019.5%200.5%2015.2467%200.5%2010ZM10%203.5C6.41015%203.5%203.5%206.41015%203.5%2010C3.5%2013.5899%206.41015%2016.5%2010%2016.5C13.5899%2016.5%2016.5%2013.5899%2016.5%2010C16.5%206.41015%2013.5899%203.5%2010%203.5Z'%20fill='%23000000'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.5%208.5C5.94772%208.5%205.5%208.94771%205.5%209.5V10.5C5.5%2011.0523%205.94772%2011.5%206.5%2011.5H13.5C14.0523%2011.5%2014.5%2011.0523%2014.5%2010.5V9.5C14.5%208.94772%2014.0523%208.5%2013.5%208.5H6.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.5%2010C0.5%204.75329%204.75329%200.5%2010%200.5C15.2467%200.5%2019.5%204.75329%2019.5%2010C19.5%2012.082%2018.8302%2014.0076%2017.6944%2015.5731L22.4142%2020.2929C22.8047%2020.6834%2022.8047%2021.3166%2022.4142%2021.7071L21.7071%2022.4142C21.3166%2022.8047%2020.6834%2022.8047%2020.2929%2022.4142L15.5731%2017.6944C14.0076%2018.8302%2012.082%2019.5%2010%2019.5C4.75329%2019.5%200.5%2015.2467%200.5%2010ZM10%203.5C6.41015%203.5%203.5%206.41015%203.5%2010C3.5%2013.5899%206.41015%2016.5%2010%2016.5C13.5899%2016.5%2016.5%2013.5899%2016.5%2010C16.5%206.41015%2013.5899%203.5%2010%203.5Z'%20fill='%23000000'/%3e%3c/svg%3e\"","export default function setButtonStyle(element: HTMLElement): void {\n  element.style.width = '40px'\n  element.style.height = '40px'\n  element.style.margin = '4px'\n  element.style.cursor = 'pointer'\n  element.style.borderRadius = '5px'\n  element.style.border = '1px solid black'\n  element.style.backgroundColor = 'white'\n  element.style.boxShadow = '0px 0px 2px 0px rgba(0,0,0,0.75)'\n  element.style.padding = '2px'\n  element.onmouseover = () => {\n    element.style.boxShadow = '0px 0px 5px 0px rgba(0,0,0,0.75)'\n  }\n  element.onmouseout = () => {\n    element.style.boxShadow = '0px 0px 2px 0px rgba(0,0,0,0.75)'\n  }\n}\n","import bisectorByPoints from '../assets/svg/bisectorByPoints.svg'\nimport circle from '../assets/svg/circle.svg'\nimport circleCompass from '../assets/svg/circleCompass.svg'\nimport circlePoint from '../assets/svg/circlePoint.svg'\nimport cursor from '../assets/svg/cursor.svg'\nimport description from '../assets/svg/description.svg'\nimport dilate from '../assets/svg/dilate.svg'\nimport disc from '../assets/svg/disc.svg'\nimport discPoint from '../assets/svg/discPoint.svg'\nimport drag from '../assets/svg/drag.svg'\nimport dragAll from '../assets/svg/dragAll.svg'\nimport fill from '../assets/svg/fill.svg'\nimport grid from '../assets/svg/grid.svg'\nimport hide from '../assets/svg/hide.svg'\nimport informations from '../assets/svg/informations.svg'\nimport latex from '../assets/svg/latex.svg'\nimport latexSvg from '../assets/svg/latexSvg.svg'\nimport line from '../assets/svg/line.svg'\nimport lineParallel from '../assets/svg/lineParallel.svg'\nimport linePerpendicular from '../assets/svg/linePerpendicular.svg'\nimport markAngle from '../assets/svg/markAngle.svg'\nimport matkSegment from '../assets/svg/markSegment.svg'\nimport mesureAngle from '../assets/svg/mesureAngle.svg'\nimport mesureSegment from '../assets/svg/mesureSegment.svg'\nimport middle from '../assets/svg/middle.svg'\nimport moveLabel from '../assets/svg/moveLabel.svg'\nimport namePoint from '../assets/svg/namePoint.svg'\nimport open from '../assets/svg/open.svg'\nimport options from '../assets/svg/options.svg'\nimport pause from '../assets/svg/pause.svg'\nimport perpendicularBisector from '../assets/svg/perpendicularBisector.svg'\nimport play from '../assets/svg/play.svg'\nimport playSkipBack from '../assets/svg/playSkipBack.svg'\nimport playSkipForward from '../assets/svg/playSkipForward.svg'\nimport point from '../assets/svg/point.svg'\nimport pointIntersection from '../assets/svg/pointIntersection.svg'\nimport pointOn from '../assets/svg/pointOn.svg'\nimport polygon from '../assets/svg/polygon.svg'\nimport ray from '../assets/svg/ray.svg'\nimport redo from '../assets/svg/redo.svg'\nimport reflection from '../assets/svg/reflection.svg'\nimport reflectionOverLine from '../assets/svg/reflectionOverLine.svg'\nimport remove from '../assets/svg/remove.svg'\nimport restart from '../assets/svg/restart.svg'\nimport rotate from '../assets/svg/rotate.svg'\nimport save from '../assets/svg/save.svg'\nimport segment from '../assets/svg/segment.svg'\nimport setOptions from '../assets/svg/setOptions.svg'\nimport shake from '../assets/svg/shake.svg'\nimport translation from '../assets/svg/translation.svg'\nimport undo from '../assets/svg/undo.svg'\nimport vector from '../assets/svg/vector.svg'\nimport zoomIn from '../assets/svg/zoomIn.svg'\nimport zoomOut from '../assets/svg/zoomOut.svg'\nimport type Figure from '../Figure'\nimport type { eventName } from '../uiMachine'\nimport setButtonStyle from './setButtonStyle'\n\n// La clé devrait être de type availableButtons\nconst availableIcons = new Map<string, { tooltip: string; url: string }>([\n  ['BISECTOR_BY_POINTS', { tooltip: 'Bissectrice', url: bisectorByPoints }],\n  ['CIRCLE_CENTER_POINT', { tooltip: 'Cercle centre-point', url: circlePoint }],\n  [\n    'CIRCLE_COMPASS',\n    { tooltip: 'Cercle par report de longueur', url: circleCompass },\n  ],\n  ['CIRCLE_RADIUS', { tooltip: 'Cercle centre-rayon', url: circle }],\n  ['CURSOR', { tooltip: 'Curseur', url: cursor }],\n  [\n    'DESCRIPTION',\n    { tooltip: 'Afficher le programme de construction', url: description },\n  ],\n  ['DILATE', { tooltip: 'Homothétie', url: dilate }],\n  ['DISC_CENTER_POINT', { tooltip: 'Disque centre-point', url: discPoint }],\n  ['DISC_RADIUS', { tooltip: 'Disque centre-rayon', url: disc }],\n  [\n    'DOWNLOAD_LATEX_SVG',\n    { tooltip: 'Exporter la figure au format LaTeX ou SVG', url: latexSvg },\n  ],\n  ['DRAG_ALL', { tooltip: 'Déplacer la figure', url: dragAll }],\n  ['DRAG', { tooltip: 'Déplacer les points', url: drag }],\n  ['FILL', { tooltip: 'Remplir / Vider', url: fill }],\n  ['GRID', { tooltip: 'Afficher le repère', url: grid }],\n  ['HIDE', { tooltip: 'Masquer un élément', url: hide }],\n  [\n    'INFORMATIONS',\n    { tooltip: \"Obtenir les informations sur l'élément\", url: informations },\n  ],\n  ['LATEX', { tooltip: 'Export LaTeX', url: latex }],\n  ['LINE_PARALLEL', { tooltip: 'Droite parallèle', url: lineParallel }],\n  [\n    'LINE_PERPENDICULAR',\n    { tooltip: 'Droite perpendiculaire', url: linePerpendicular },\n  ],\n  ['LINE', { tooltip: 'Droite', url: line }],\n  ['MARK_ANGLE', { tooltip: 'Coder un angle', url: markAngle }],\n  ['MARK_BETWEEN_POINTS', { tooltip: 'Coder un segment', url: matkSegment }],\n  ['MESURE_ANGLE', { tooltip: 'Mesurer un angle', url: mesureAngle }],\n  ['MESURE_SEGMENT', { tooltip: 'Mesurer une distance', url: mesureSegment }],\n  ['MESURE_ANGLE', { tooltip: 'Mesurer un angle', url: mesureAngle }],\n  ['MIDDLE', { tooltip: 'Milieu', url: middle }],\n  ['MOVE_LABEL', { tooltip: \"Déplacer le nom d'un point\", url: moveLabel }],\n  ['NAME_POINT', { tooltip: 'Renommer un point', url: namePoint }],\n  ['OPEN', { tooltip: 'Charger un fichier', url: open }],\n  ['OPTIONS', { tooltip: 'Options', url: options }],\n  ['PAUSE', { tooltip: 'Pause', url: pause }],\n  [\n    'PERPENDICULAR_BISECTOR',\n    { tooltip: 'Médiatrice', url: perpendicularBisector },\n  ],\n  ['PLAY_SKIP_BACK', { tooltip: 'Étape précédente', url: playSkipBack }],\n  ['PLAY_SKIP_FORWARD', { tooltip: 'Étape suivante', url: playSkipForward }],\n  ['PLAY', { tooltip: 'Lecture', url: play }],\n  [\n    'POINT_INTERSECTION',\n    { tooltip: \"Point à l'intersection\", url: pointIntersection },\n  ],\n  ['POINT_ON', { tooltip: 'Point sur', url: pointOn }],\n  ['POINT', { tooltip: 'Point', url: point }],\n  ['POLYGON', { tooltip: 'Polygone', url: polygon }],\n  ['RAY', { tooltip: 'Demi-droite', url: ray }],\n  ['REDO', { tooltip: 'Rétablir', url: redo }],\n  [\n    'REFLECTION_OVER_LINE',\n    { tooltip: 'Symétrie axiale', url: reflectionOverLine },\n  ],\n  ['REFLECTION', { tooltip: 'Symétrie centrale', url: reflection }],\n  ['REMOVE', { tooltip: 'Supprimer', url: remove }],\n  ['RESTART', { tooltip: 'Recommencer', url: restart }],\n  ['ROTATE', { tooltip: 'Rotation', url: rotate }],\n  ['SAVE', { tooltip: 'Sauvegarder', url: save }],\n  ['SEGMENT', { tooltip: 'Segment', url: segment }],\n  ['SET_OPTIONS', { tooltip: 'Modifier le style', url: setOptions }],\n  ['SHAKE', { tooltip: 'Secouer la figure', url: shake }],\n  ['TRANSLATION', { tooltip: 'Translation', url: translation }],\n  ['UNDO', { tooltip: 'Annuler la dernière action', url: undo }],\n  ['VECTOR', { tooltip: 'Vecteur', url: vector }],\n  ['ZOOM_IN', { tooltip: 'Zoom avant', url: zoomIn }],\n  ['ZOOM_OUT', { tooltip: 'Zoom arrière', url: zoomOut }],\n])\n\nexport default function addButtons(\n  list: string,\n  figure: Figure,\n): HTMLImageElement[] {\n  const imgList = []\n  const buttons = list.split(' ')\n  for (const key of buttons) {\n    const button = key.toUpperCase()\n    if (!availableIcons.has(button)) {\n      console.error(`Le bouton ${button} n'existe pas`)\n      continue\n    }\n    const img = document.createElement('img')\n    const icon = availableIcons.get(button)\n    if (icon == null) {\n      console.error(`L'icône pour le bouton ${button} n'existe pas`)\n      continue\n    }\n    img.src = icon.url\n    img.title = icon.tooltip\n    setButtonStyle(img)\n    img.onclick = () => {\n      figure.ui?.send({ type: button as eventName })\n    }\n    figure.buttons.set(button as eventName, img)\n    imgList.push(img)\n  }\n  return imgList\n}\n","import { orangeMathaleaLight } from '../elements/defaultValues'\nimport type Figure from '../Figure'\nimport setButtonStyle from './setButtonStyle'\n\n/**\n *\n * action : fonction à exécuter lors du clic sur le bouton\n * figure : figure à laquelle le bouton est associé\n * tooltip : texte affiché au survol du bouton\n * url : url de l'image du bouton\n * text : texte du bouton si url est null\n * container : conteneur du bouton\n * record : si true, le bouton est enregistré dans la liste des boutons de la figure et s'allumera lorsqu'il est cliqué et s'eteindra lorsqu'un autre bouton de figure.buttons est cliqué\n * @returns\n */\nexport default function addCustomButton({\n  action,\n  figure,\n  tooltip = '',\n  url,\n  text,\n  container,\n  record = true,\n  userMessage = '',\n}: {\n  action: () => void\n  figure: Figure\n  tooltip?: string\n  url?: string\n  text?: string\n  container?: HTMLDivElement\n  record?: boolean\n  userMessage?: string\n}): HTMLElement {\n  if (url == null && text == null) {\n    throw new Error('addCustomButton doit spécifier une url ou un texte')\n  }\n  let element: HTMLImageElement | HTMLDivElement\n  if (url != null) {\n    element = document.createElement('img') as HTMLImageElement\n    const img = element as HTMLImageElement\n    img.src = url\n  } else {\n    element = document.createElement('div')\n    const div = element as HTMLDivElement\n    div.textContent = text as string\n    element.style.textAlign = 'center'\n    element.style.lineHeight = '40px'\n    element.style.fontSize = '20px'\n    element.style.letterSpacing = '1px'\n    element.style.fontFamily = 'Arial'\n  }\n  element.title = tooltip\n  setButtonStyle(element)\n  if (container == null) {\n    figure.divButtons.appendChild(element)\n  } else {\n    container.appendChild(element)\n  }\n  element.onclick = () => {\n    action()\n    figure.userMessage = userMessage\n  }\n  if (record) {\n    const id =\n      window.crypto.randomUUID !== undefined\n        ? window.crypto.randomUUID()\n        : getNumberId()\n    figure.buttons.set(id as string, element)\n    element.addEventListener('click', () => {\n      for (const button of figure.buttons.values()) {\n        button.style.backgroundColor = 'white'\n      }\n      element.style.backgroundColor = orangeMathaleaLight\n    })\n  }\n  return element\n}\n\n/* MGu : HACK pour les connexions HTTP \ncar window.crypto.randomUUID est undefined pour les connexions HTTP\n*/\nlet numberId = 0\nfunction getNumberId() {\n  numberId++\n  return numberId\n}\n","import type Figure from '../Figure'\n\nexport default function addThicknessChoice(figure: Figure): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.marginTop = '30px'\n  div.style.fontWeight = 'bold'\n  const title = document.createElement('div')\n  title.style.marginBottom = '10px'\n  title.textContent = `Épaisseur : ${figure.options.thickness}`\n  const range = document.createElement('input')\n  range.type = 'range'\n  range.value = `${figure.options.thickness}`\n  range.min = '1'\n  range.max = '4'\n  div.appendChild(title)\n  div.appendChild(range)\n  range.addEventListener('input', () => {\n    figure.options.thickness = Number(range.value)\n    title.textContent = `Épaisseur : ${figure.options.thickness}`\n  })\n  return div\n}\n","import { marks, orangeMathaleaLight } from '../elements/defaultValues'\nimport type Figure from '../Figure'\n\nexport default function addMarkPalette({\n  figure,\n  container,\n}: {\n  figure: Figure\n  container: HTMLDivElement\n}): void {\n  const buttonsMark: HTMLElement[] = []\n  for (const mark of marks) {\n    const button = figure.addCustomButton({\n      record: false,\n      text: mark,\n      action: () => {\n        figure.options.mark = mark\n      },\n      container: container,\n    })\n    if (mark === figure.options.mark) {\n      button.style.backgroundColor = orangeMathaleaLight\n    }\n    buttonsMark.push(button)\n    button.addEventListener('click', handleClick)\n  }\n  function handleClick(this: HTMLElement): void {\n    for (const button of buttonsMark) {\n      button.style.backgroundColor = 'white'\n    }\n    this.style.backgroundColor = orangeMathaleaLight\n  }\n}\n","import { defaultTools } from '../elements/defaultValues'\nimport type Figure from '../Figure'\nimport addMarkPalette from './addMarkPalette'\n\nimport type { availableButtons } from './availableButtons'\n\nexport default function setToolbar(\n  figure: Figure,\n  {\n    nbCols,\n    position = 'left',\n    showStyles,\n    tools = defaultTools,\n  }: {\n    nbCols?: number\n    position?: 'left' | 'top' | 'none'\n    showStyles?: boolean\n    tools?: availableButtons[]\n  },\n): void {\n  figure.divButtons.innerHTML = ''\n  figure.divButtons.style.zIndex = '100'\n  if (position === 'none') {\n    figure.divButtons.style.display = 'none'\n    return\n  }\n  if (position === 'left') {\n    if (showStyles === undefined) showStyles = true\n    if (nbCols === undefined) nbCols = 4\n    figure.divButtons.style.display = 'grid'\n    if (window.matchMedia('(min-width: 768px)').matches) {\n      figure.container.style.gridTemplateColumns = '230px 1fr'\n    } else {\n      figure.container.style.gridTemplateColumns = '50px 1fr'\n    }\n    figure.container.style.display = 'grid'\n    if (window.matchMedia('(min-width: 768px)').matches) {\n      figure.divButtons.style.gridTemplateColumns = `repeat(${nbCols}, auto)`\n    } else {\n      figure.divButtons.style.gridTemplateColumns = 'auto'\n    }\n    figure.divButtons.style.gridAutoRows = 'min-content'\n    figure.divButtons.style.justifyContent = 'start'\n  }\n  if (position === 'top') {\n    if (showStyles === undefined) showStyles = false\n    if (nbCols === undefined) nbCols = 8\n    figure.container.style.display = 'block'\n    figure.divButtons.style.display = 'grid'\n    figure.divButtons.style.gridTemplateColumns = `repeat(${nbCols}, auto)`\n    figure.divButtons.style.gridAutoRows = 'min-content'\n    if (tools.length < 6) {\n      figure.divButtons.style.justifyContent = 'start'\n    } else {\n      figure.divButtons.style.justifyContent = 'center'\n    }\n  }\n  if (showStyles === false) {\n    const index = tools.indexOf('SET_OPTIONS')\n    if (index > -1) {\n      tools.splice(index, 1)\n    }\n  }\n  const imgs = figure.addButtons(tools.join(' '))\n  figure.divButtons.append(...imgs)\n  for (const img of imgs) {\n    figure.divButtons.appendChild(img)\n  }\n  if (showStyles === true) {\n    const divStyles = document.createElement('div')\n    divStyles.style.gridColumn = '1 / -1'\n    figure.divButtons.appendChild(divStyles)\n    divStyles.appendChild(figure.addColorPalette(['black', 'blue', 'red']))\n    divStyles.appendChild(\n      figure.addColorPalette(['green', 'orange', 'lightgray']),\n    )\n    divStyles.appendChild(figure.addDashedChoice())\n    divStyles.appendChild(figure.addThicknessChoice())\n  }\n  if (tools.indexOf('MARK_BETWEEN_POINTS')) {\n    figure.divMarkPalette = document.createElement('div')\n    figure.divMarkPalette.style.display = 'flex'\n    figure.divToolbar2.appendChild(figure.divMarkPalette)\n    addMarkPalette({ figure, container: figure.divMarkPalette })\n    figure.divMarkPalette.style.display = 'none'\n  }\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\nimport 'katex/dist/katex.min.css'\n\nimport type { ActorRef } from 'xstate'\nimport { loadJson } from './actions/loadJson'\nimport checkAngle from './check/checkAngle'\nimport checkCircleRadius from './check/checkCircleRadius'\nimport checkCoords from './check/checkCoords'\nimport checkDistance from './check/checkDistance'\nimport checkLine from './check/checkLine'\nimport checkParallel from './check/checkParallel'\nimport checkPerpendicularBisector from './check/checkPerpendicularBisector'\nimport checkPoint from './check/checkPoint'\nimport checkPointBetween2Points from './check/checkPointBetween2Points'\nimport checkPointOnIntersectionLL from './check/checkPointOnIntersectionLL'\nimport checkPointOnLine from './check/checkPointOnLine'\nimport checkPolygon from './check/checkPolygon'\nimport checkPolygonByLabels from './check/checkPolygonByLabels'\nimport checkRay from './check/checkRay'\nimport checkSameDistance from './check/checkSameDistance'\nimport checkSegment from './check/checkSegment'\nimport checkVector from './check/checkVector'\nimport shake from './check/shake'\nimport Angle from './dynamicNumbers/Angle'\nimport AngleOriented from './dynamicNumbers/AngleOriented'\nimport Distance from './dynamicNumbers/Distance'\nimport DynamicCalcul from './dynamicNumbers/DynamicCalcul'\nimport type DynamicNumber from './dynamicNumbers/DynamicNumber'\nimport DynamicX from './dynamicNumbers/DynamicX'\nimport DynamicY from './dynamicNumbers/DynamicY'\nimport type { Coords } from './elements/calculus/Coords'\nimport Graph from './elements/calculus/Graph'\nimport Graph2 from './elements/calculus/Graph2'\nimport GraphByParts from './elements/calculus/GraphByParts'\nimport defaultOptions, {\n  defaultButtonsWidth,\n  defaultDivUserMessageFontSize,\n  defaultDivUserMessageHeight,\n  defaultDragAllDelta,\n  defaultFooterHeight,\n  defaultHistorySize,\n  defaultMinHeight,\n  defaultMinWidth,\n} from './elements/defaultValues'\nimport CircleFractionDiagram from './elements/diagrams/CircleFractionDiagram'\nimport LineFractionDiagram from './elements/diagrams/LineFractionDiagram'\nimport RectangleFractionDiagram from './elements/diagrams/RectangleFractionDiagram'\nimport Element2D from './elements/Element2D'\nimport GraduatedLine from './elements/grid/GraduatedLine'\nimport Grid from './elements/grid/Grid'\nimport type { FigureOptions, SaveJson } from './elements/interfaces'\nimport Arc from './elements/lines/Arc'\nimport ArcBy3PointsAndRadius from './elements/lines/ArcBy3PointsAndRadius'\nimport ArcByCenterRadiusAndAngles from './elements/lines/ArcByCenterRadiusAndAngles'\nimport BisectorByPoints from './elements/lines/BisectorByPoints'\nimport Circle from './elements/lines/Circle'\nimport CircleCenterDynamicRadius from './elements/lines/CircleCenterDyamicRadius'\nimport CircleCenterPoint from './elements/lines/CircleCenterPoint'\nimport Line from './elements/lines/Line'\nimport LineByPointVector from './elements/lines/LineByPointVector'\nimport LineParallel from './elements/lines/LineParallel'\nimport LinePerpendicular from './elements/lines/LinePerpendicular'\nimport PerpendicularBisector from './elements/lines/PerpendicularBisector'\nimport PerpendicularBisectorByPoints from './elements/lines/PerpendicularBisectorByPoints'\nimport Polygon from './elements/lines/Polygon'\nimport Polyline from './elements/lines/Polyline'\nimport Ray from './elements/lines/Ray'\nimport Segment from './elements/lines/Segment'\nimport MarkBetweenPoints from './elements/mark/MarkBetweenPoints'\nimport MarkRightAngle from './elements/mark/MarkRightAngle'\nimport Barycenter from './elements/points/Barycenter'\nimport Middle from './elements/points/Middle'\nimport PointOnGraph from './elements/points/PoinrOnGraph'\nimport Point from './elements/points/Point'\nimport PointByProjection from './elements/points/PointByProjection'\nimport PointByProjectionOnAxisX from './elements/points/PointByProjectionOnAxisX'\nimport PointByProjectionOnAxisY from './elements/points/PointByProjectionOnAxisY'\nimport PointIntersectionCC from './elements/points/PointIntersectionCC'\nimport PointIntersectionLC from './elements/points/PointIntersectionLC'\nimport PointIntersectionLL from './elements/points/PointIntersectionLL'\nimport PointOnCircle from './elements/points/PointOnCircle'\nimport PointOnLine from './elements/points/PointOnLine'\nimport PointOnLineAtDistance from './elements/points/PointOnLineAtDistance'\nimport PointOnPolyline from './elements/points/PointOnPolyline'\nimport PointsIntersectionCC from './elements/points/PointsIntersectionCC'\nimport PointsIntersectionLC from './elements/points/PointsIntersectionLC'\nimport TextByPoint from './elements/text/TextByPoint'\nimport TextByPosition from './elements/text/TextByPosition'\nimport TextDynamicByPoint from './elements/text/TextDynamicByPoint'\nimport TextDynamicByPosition from './elements/text/TextDynamicByPosition'\nimport Vector from './elements/vector/Vector'\nimport VectorByPoints from './elements/vector/VectorByPoints'\nimport VectorPerpendicular from './elements/vector/VectorPerpendicular'\nimport { isLocalStorageAvailable } from './lib/storage'\nimport handleHover from './pointerActions/handleHover'\nimport handlePointerAction from './pointerActions/handlePointerAction'\nimport type { UiEvent } from './uiMachine'\nimport addButtons from './userInterface/addButtons'\nimport addColorPalette from './userInterface/addColorPalette'\nimport addCustomButton from './userInterface/addCustomButton'\nimport addDashedChoice from './userInterface/addDashedChoice'\nimport addThicknessChoice from './userInterface/addThicknessChoice'\nimport type { availableButtons } from './userInterface/availableButtons'\nimport setToolbar from './userInterface/setToolbar'\n\n/**\n * Créé un espace de travail dans lequel on peut\n * générer des figures de géométrie statique ou dynamique\n */\nclass Figure {\n  /** Tableau de callBacks à exécuter quand la figure est sauvegardée */\n  private _actionsOnChange: Array<() => void> = []\n  /** Stockage des event listeners pour pouvoir les supprimer lors du destroy */\n  private _eventListeners: {\n    svg?: {\n      pointerdown?: (event: PointerEvent) => void\n      pointerup?: () => void\n      pointerleave?: () => void\n      pointermove?: (event: PointerEvent) => void\n    }\n    window?: {\n      resize?: () => void\n      orientationchange?: () => void\n      fullscreenchange?: () => void\n      keydown?: (e: KeyboardEvent) => void\n    }\n  } = {}\n  /** Handle pour requestAnimationFrame en cours */\n  private _animationFrameHandle: number | null = null\n  /** Booléen pour savoir si la figure a été détruite */\n  private _isDestroyed = false\n  /** Boutons qui interagissent avec la figure */\n  buttons: Map<string, HTMLDivElement> = new Map<string, HTMLDivElement>()\n  /** Element parent divUserMessage, du svg et des différents div pours les texte */\n  container!: HTMLElement\n  /** Etat de la machine pour l'interface graphique */\n  currentState = ''\n  /** div dans lequel sont placés tous les boutons de l'interface graphique  */\n  divButtons: HTMLDivElement\n  /** div dans lequel s'affichera le svg et les div des textes en surimpression du svg */\n  divFigure: HTMLDivElement\n  /** parent de divFigure et de divUserMessage */\n  divFigureAndUserMessage: HTMLDivElement\n  /** div dans lequel sera écrit la dernière sauvegarde automatique au format JSON */\n  divSave: HTMLDivElement | null\n  /** div dans lequel on affiche l'aide pour l'action en cours */\n  divUserMessage: HTMLDivElement\n  /** div supplémentaire pour les options */\n  divToolbar2: HTMLDivElement\n  /** div avec le choix des marques */\n  divMarkPalette?: HTMLDivElement\n  /** Si l'option snapGrid est active, cela détermine la distance horizontale entre deux lieux de dépot du point */\n  dx: number\n  /** Si l'option snapGrid est active, cela détermine la distance verticale entre deux lieux de dépot du point */\n  dy: number\n  /** La clé est par défaut element0, element1, element2... ou le nom de l'élément et la valeur est l'élément géométrique (segment, point, polygone...) */\n  elements: Map<string, DynamicNumber | Element2D>\n  /** Filtre utilisé sur les éléments pour savoir ceux qui réagissent au clic */\n  filter: (e: Element2D) => boolean\n  /** Quadrillage de la figure */\n  grid?: Grid\n  /** Hauteur en pixels du SVG */\n  height: number\n  /** Points à proximité du pointeur utilisés pour proposer un déplacement au lieu d'une création de point */\n  hoverPoints: Set<Element2D>\n  /** Identifiant de la figure pour la gestion de l'interactivité dans MathALÉA */\n  id = ''\n  /** Point actuellement en train d'être déplacé par la souris */\n  inDrag: Point | TextByPosition | undefined\n  /** Dimensions initiales utilisées pour le zoom */\n  initial: {\n    height: number\n    scale: number\n    width: number\n    xMin: number\n    yMin: number\n  }\n  /** Figure dynamique ou statique */\n  isDynamic: boolean\n  /** Eventuel div dans lequel on attend une réponse de l'utilisateur */\n  modal?: HTMLDivElement\n\n  /** Options courante pour tous les tracés */\n  options: FigureOptions\n\n  /** Nombre de pixels poun une unité (soit 1 cm en sortie papier) par défaut à 30 */\n  pixelsPerUnit: number\n  /** Point virtuel qui suit le pointer */\n  pointer: Point\n  /** Abscisse du pointeur dans le repère de la figure */\n  pointerX: null | number\n  /** Ordonnée du pointeur dans le repère de la figure */\n  pointerY: null | number\n  /** div (ou p ou svg…) dans lequel sera inséré le SVG et les div avec le texte mathématiques */\n  /** Échelle globale */\n  _scale: number\n  /** Tableau d'éléments sélectionnés (utilisé dans l'interface graphique pour faire une construction à plusieurs entrées) */\n  selectedElements: Element2D[]\n  /** Si l'option snapGrid est active, le point sera aimanté */\n  snapGrid: boolean\n  /** Un tableau des différentes sauvegardes automatiques utilisé pour les redo */\n  stackRedo: string[]\n  /** Un tableau des différentes sauvegardes automatiques utilisé pour les undo */\n  stackUndo: string[]\n  /** SVG de la figure géométrique */\n  svg: SVGElement\n  /** Élément temporaire (utilisé dans l'interface graphique pour donner un aperçu de le construction en cours) */\n  tmpElements: Element2D[]\n\n  // ... (imports existants)\n\n  /** Machine qui gère l'état de l'interface utilisateur */\n  // biome-ignore lint/suspicious/noExplicitAny: Snapshot type is not strictly needed here\n  ui!: ActorRef<any, UiEvent>\n  /** Largeur en pixels du SVG */\n  width: number\n  /** Abscisse du coin en bas à droite */\n  xMax: number\n  /** Abscisse du coin en bas à gauche */\n  xMin: number\n  /** Échelle horizontale */\n  xScale: number\n  /** Ordonnée du point en haut à droite */\n  yMax: number\n  /** Ordonnée du coin en bas à gauche */\n  yMin: number\n  /** Échelle verticale */\n  yScale: number\n  /** Niveau de zoom */\n  zoomLevel = 1\n\n  /**\n   * @param __namedParameters width - Largeur en pixels du SVG\n   * @param __namedParameters height - Hauteur en pixels du SVG\n   * @param pixelsPerUnit - Nombres de pixels pour une unité de la figure, par défaut 30 pixels (l'unité sera le cm en sortie LaTeX)\n   * @param xMin - Abscisse du coin en bas à gauche\n   * @param yMin - Ordonnée du coin en bas à gauche\n   * @param isDynamic - Figure dynamique ou statique\n   * @param dx - Si l'option snapGrid est activée, cela correspond à la distance horizontale du quadrillage sur lequel les points peuvent être déposés\n   * @param dy - Si l'option snapGrid est activée, cela correspond à la distance verticale du quadrillage sur lequel les points peuvent être déposés\n   */\n  constructor({\n    border = false,\n    dx = 1,\n    dy = 1,\n    height = document.documentElement.clientHeight - defaultFooterHeight,\n    isDynamic = true,\n    isHandDrawn = false,\n    pixelsPerUnit = 30,\n    scale = 1,\n    snapGrid = false,\n    width = document.documentElement.clientWidth - defaultButtonsWidth,\n    xMin = -10,\n    xScale = 1,\n    yMin = -6,\n    yScale = 1,\n  }: {\n    border?: boolean\n    dx?: number\n    dy?: number\n    height?: number\n    isDynamic?: boolean\n    isHandDrawn?: boolean\n    pixelsPerUnit?: number\n    scale?: number\n    snapGrid?: boolean\n    width?: number\n    xMin?: number\n    xScale?: number\n    yMin?: number\n    yScale?: number\n  } = {}) {\n    this.elements = new Map()\n    this.stackUndo = []\n    this.stackRedo = []\n    this.width = width\n    this.height = height\n    this.pixelsPerUnit = pixelsPerUnit\n    this.xMin = xMin\n    this.xMax = xMin + width / pixelsPerUnit / scale / xScale\n    this.yMin = yMin\n    this.yMax = yMin + height / pixelsPerUnit / scale / yScale\n    this.dx = dx\n    this.dy = dy\n    this.hoverPoints = new Set()\n    this.xScale = xScale\n    this.yScale = yScale\n    this._scale = scale\n    this.isDynamic = isDynamic\n    this.pointerX = null\n    this.pointerY = null\n    this.selectedElements = []\n    this.tmpElements = []\n    defaultOptions.figureHasBorder = border\n    defaultOptions.isHandDrawn = isHandDrawn\n    this.options = { ...defaultOptions }\n    this.snapGrid = snapGrid\n\n    this.container = document.createElement('div')\n    this.container.id = 'containerApigeom'\n    this.divFigureAndUserMessage = document.createElement('div')\n    this.divFigureAndUserMessage.id = 'divFigureAndUserMessage'\n    this.divFigure = document.createElement('div')\n    this.divFigure.id = 'divFigure'\n    this.svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n    this.divSave = null\n    this.divButtons = document.createElement('div')\n    this.divButtons.id = 'divButtons'\n    this.divUserMessage = document.createElement('div')\n    this.divUserMessage.id = 'divUserMessage'\n    this.divUserMessage.style.fontSize = defaultDivUserMessageFontSize\n    this.divUserMessage.style.height = defaultDivUserMessageHeight\n    this.divUserMessage.style.width = '90%'\n    this.divUserMessage.style.textAlign = 'right'\n    this.divUserMessage.style.right = '0'\n    this.divUserMessage.style.color = 'blue'\n    this.divUserMessage.style.margin = '3px'\n    this.divUserMessage.style.padding = '0.5em'\n    this.divUserMessage.style.fontSize = '1.5em'\n    this.divToolbar2 = document.createElement('div')\n    this.divToolbar2.id = 'divToolbar2'\n    this.divToolbar2.style.display = 'flex'\n\n    this.container.appendChild(this.divButtons)\n    this.container.appendChild(this.divFigureAndUserMessage)\n    this.divFigureAndUserMessage.appendChild(this.divToolbar2)\n    this.divFigureAndUserMessage.appendChild(this.divUserMessage)\n    this.divFigureAndUserMessage.appendChild(this.divFigure)\n    this.divFigure.appendChild(this.svg)\n    if (border) this.svg.style.border = 'solid'\n    if (border) this.svg.style.border = 'solid'\n    // Pour éviter le scroll quand on manipule la figure sur un écran tactile\n    this.svg.style.touchAction = 'none'\n    this.clearHtml()\n    if (this.isDynamic) this.listenPointer()\n    this.pointer = new Point(this, {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      isSelectable: false,\n      color: 'black',\n      shape: '',\n      x: 0,\n      y: 0,\n    })\n    this.pointer.type = 'pointer'\n    this.filter = (e) => e instanceof Point && e.isFree\n    this.saveState()\n    this.initial = {\n      height: this.height,\n      width: this.width,\n      scale: this._scale,\n      xMin: this.xMin,\n      yMin: this.yMin,\n    }\n    // this.handleDragAll()\n    // Les boutons n'existe pas encore\n    setTimeout(() => {\n      this.handleUndoRedoButtons()\n    }, 100)\n  }\n\n  /**\n   * Nettoie complètement la figure : supprime tous les listeners,\n   * tous les observers, libère la mémoire et détruit tous les éléments.\n   *\n   * Cette méthode doit être appelée lorsque vous n'avez plus besoin de la figure\n   * (par exemple lors d'un changement de page dans une SPA) pour éviter les fuites mémoire.\n   *\n   * @remarks\n   * La méthode effectue les opérations suivantes :\n   * - Supprime tous les event listeners (pointerdown, pointermove, pointerup, pointerleave)\n   * - Supprime les event listeners window (resize, orientationchange, fullscreenchange, keydown)\n   * - Arrête la state machine XState (ui)\n   * - Supprime tous les éléments de la figure (déclenchant la suppression en cascade des observers/parents)\n   * - Nettoie le DOM (SVG, divs, container)\n   * - Annule les requestAnimationFrame en cours\n   * - Vide toutes les collections (elements, buttons, stackUndo, stackRedo, etc.)\n   * - Libère toutes les références pour permettre au garbage collector de récupérer la mémoire\n   *\n   * @example\n   * ```typescript\n   * const figure = new Figure({ width: 800, height: 600 })\n   * figure.setContainer(document.querySelector('#app'))\n   *\n   * // ... utilisation de la figure ...\n   *\n   * // Nettoyage lorsque la figure n'est plus nécessaire\n   * figure.destroy()\n   * // L'instance ne peut plus être utilisée après destroy()\n   * ```\n   *\n   * @throws {Warning} Si la méthode est appelée plusieurs fois sur la même instance\n   */\n  destroy(): void {\n    if (this._isDestroyed) {\n      console.warn('Figure already destroyed')\n      return\n    }\n\n    this._isDestroyed = true\n\n    // Annuler les requestAnimationFrame en cours\n    if (this._animationFrameHandle !== null) {\n      window.cancelAnimationFrame(this._animationFrameHandle)\n      this._animationFrameHandle = null\n    }\n\n    // Supprimer les event listeners du SVG\n    if (this._eventListeners.svg) {\n      if (this._eventListeners.svg.pointerdown) {\n        this.svg.removeEventListener(\n          'pointerdown',\n          this._eventListeners.svg.pointerdown,\n        )\n      }\n      if (this._eventListeners.svg.pointerup) {\n        this.svg.removeEventListener(\n          'pointerup',\n          this._eventListeners.svg.pointerup,\n        )\n      }\n      if (this._eventListeners.svg.pointerleave) {\n        this.svg.removeEventListener(\n          'pointerleave',\n          this._eventListeners.svg.pointerleave,\n        )\n      }\n      if (this._eventListeners.svg.pointermove) {\n        this.svg.removeEventListener(\n          'pointermove',\n          this._eventListeners.svg.pointermove,\n        )\n      }\n    }\n\n    // Supprimer les event listeners de window\n    if (this._eventListeners.window) {\n      if (this._eventListeners.window.resize) {\n        window.removeEventListener('resize', this._eventListeners.window.resize)\n      }\n      if (this._eventListeners.window.orientationchange) {\n        window.removeEventListener(\n          'orientationchange',\n          this._eventListeners.window.orientationchange,\n        )\n      }\n      if (this._eventListeners.window.fullscreenchange) {\n        window.removeEventListener(\n          'fullscreenchange',\n          this._eventListeners.window.fullscreenchange,\n        )\n      }\n      if (this._eventListeners.window.keydown) {\n        window.removeEventListener(\n          'keydown',\n          this._eventListeners.window.keydown,\n        )\n      }\n    }\n\n    // Arrêter la state machine XState si elle existe\n    if (this.ui) {\n      try {\n        this.ui.stop()\n      } catch (e) {\n        console.warn('Error stopping UI state machine:', e)\n      }\n    }\n\n    // Supprimer tous les éléments (cela déclenche la suppression en cascade des observers/parents)\n    const elementsToRemove = Array.from(this.elements.values())\n    for (const element of elementsToRemove) {\n      try {\n        if ('remove' in element && typeof element.remove === 'function') {\n          element.remove()\n        }\n      } catch (e) {\n        console.warn(`Error removing element ${element.id}:`, e)\n      }\n    }\n\n    // Vider les collections\n    this.elements.clear()\n    this.hoverPoints.clear()\n    this.selectedElements = []\n    this.tmpElements = []\n    this.stackUndo = []\n    this.stackRedo = []\n    this._actionsOnChange = []\n\n    // Nettoyer les event listeners des boutons\n    for (const button of this.buttons.values()) {\n      button.onclick = null\n    }\n    this.buttons.clear()\n\n    // Casser les références circulaires\n    if (this.grid) {\n      // @ts-expect-error - Casser la référence circulaire\n      this.grid.figure = null\n      this.grid = undefined\n    }\n\n    if (this.pointer) {\n      // @ts-expect-error - Casser la référence circulaire\n      this.pointer.figure = null\n    }\n\n    // Nettoyer toutes les références pour aider le garbage collector\n    this._eventListeners = {}\n    this.modal = undefined\n    this.inDrag = undefined\n    this.pointerX = null\n    this.pointerY = null\n\n    // @ts-expect-error - Permettre de nullifier pour le nettoyage\n    this.ui = null\n\n    // Nettoyer les options pour casser les références\n    // @ts-expect-error - Permettre de nullifier pour le nettoyage\n    this.options = null\n\n    console.log('Figure destroyed successfully')\n  }\n\n  addButtons(buttons: string): HTMLImageElement[] {\n    return addButtons(buttons, this)\n  }\n\n  addColorPalette(colors: string[]): HTMLDivElement {\n    return addColorPalette(colors, this)\n  }\n\n  addCustomButton({\n    action,\n    container,\n    record,\n    text,\n    tooltip = '',\n    url,\n    userMessage,\n  }: {\n    action: () => void\n    tooltip?: string\n    url?: string\n    text?: string\n    container?: HTMLDivElement\n    record?: boolean\n    userMessage?: string\n  }): HTMLElement {\n    return addCustomButton({\n      action,\n      figure: this,\n      tooltip,\n      url,\n      text,\n      container,\n      record,\n      userMessage,\n    })\n  }\n\n  addDashedChoice(): HTMLDivElement {\n    return addDashedChoice(this)\n  }\n\n  addThicknessChoice(): HTMLDivElement {\n    return addThicknessChoice(this)\n  }\n\n  addHandDrawnFilter(): void {\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs')\n    const filter = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'filter',\n    )\n    filter.id = 'handDrawn'\n    const feTurbulence = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'feTurbulence',\n    )\n    feTurbulence.setAttribute('type', 'fractalNoise')\n    feTurbulence.setAttribute('baseFrequency', '0.05')\n    feTurbulence.setAttribute('numOctaves', '2')\n    feTurbulence.setAttribute('result', 'noise')\n    const feDisplacementMap = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'feDisplacementMap',\n    )\n    feDisplacementMap.setAttribute('in', 'SourceGraphic')\n    feDisplacementMap.setAttribute('in2', 'noise')\n    feDisplacementMap.setAttribute('scale', '5')\n    filter.appendChild(feTurbulence)\n    filter.appendChild(feDisplacementMap)\n    defs.appendChild(filter)\n    this.svg.appendChild(defs)\n  }\n\n  /** Ajuste la taille pour être la plus grande possible en tenant compte d'une barre d'outils sur le côté et un footer en dessous */\n  adjustSize(): void {\n    if (this.width < defaultMinWidth) this.width = defaultMinWidth\n    if (this.height < defaultMinHeight) this.height = defaultMinHeight\n    this.xMax =\n      this.xMin + this.width / this.pixelsPerUnit / this.scale / this.xScale\n    this.yMax =\n      this.yMin + this.height / this.pixelsPerUnit / this.scale / this.yScale\n    if (this.divFigure !== null && this.svg !== null) {\n      this.divFigure.style.width = `${this.width.toString()}px`\n      this.divFigure.style.height = `${this.height.toString()}px`\n      this.svg.setAttribute('width', this.width.toString())\n      this.svg.setAttribute('height', this.height.toString())\n      this.svg.setAttribute(\n        'viewBox',\n        `${this.xToSx(this.xMin)} ${this.yToSy(this.yMax)} ${this.width} ${this.height}`,\n      )\n    }\n    for (const e of this.elements.values()) {\n      if (e instanceof Element2D) e.update()\n    }\n  }\n  getMaxSize(): void {\n    this.width = document.documentElement.clientWidth - defaultButtonsWidth\n    this.height = document.documentElement.clientHeight - defaultFooterHeight\n  }\n\n  /** Met à jour la taille de l'espace de travail en cas de changements sur la fenêtre du navigateur */\n  autoAdjustSize(): void {\n    this.getMaxSize()\n\n    const resizeHandler = (): void => {\n      this.getMaxSize()\n      this.adjustSize()\n    }\n    const orientationHandler = (): void => {\n      this.getMaxSize()\n      this.adjustSize()\n    }\n    const fullscreenHandler = (): void => {\n      this.getMaxSize()\n      this.adjustSize()\n    }\n\n    this._eventListeners.window = this._eventListeners.window || {}\n    this._eventListeners.window.resize = resizeHandler\n    this._eventListeners.window.orientationchange = orientationHandler\n    this._eventListeners.window.fullscreenchange = fullscreenHandler\n\n    window.addEventListener('resize', resizeHandler)\n    window.addEventListener('orientationchange', orientationHandler)\n    window.addEventListener('fullscreenchange', fullscreenHandler)\n  }\n\n  /**\n   * Test l'existance d'un point et éventuellement son label\n   * le feedback ne parle pas des coordonnées\n   */\n  checkPoint({\n    label,\n    x,\n    y,\n    color,\n  }: {\n    label?: string\n    x: number\n    y: number\n    color?: string\n  }): { isValid: boolean; message: string; points: Point[] } {\n    return checkPoint({ figure: this, label, x, y, color })\n  }\n\n  /**\n   * Vérifie si un point appartient à une ligne (droite, demi-droite ou segment)\n   * @param {string} labelPt // Nom du point\n   * @param {string[]|string} nameLine // Nom de la ligne ou bien tableau contenant les noms de la ligne\n   * @example figure.checkPointOnLine({labelPt:'A',nameline:'CD'}) -> Vérifie que le point A appartienne à tout segment, demi-droite ou droite dont le nom contient CD.\n   * @example figure.checkPointOnLine({labelPt:'A',nameline:['(CD)','(DC)'}) -> Vérifie que le point A appartienne à la droite nommée (CD) ou (DC).\n   * @author Eric Elter\n   * @returns {{ isValid: boolean, message: string }}\n   */\n  checkPointOnLine({\n    labelPt,\n    nameLine,\n  }: {\n    labelPt: string\n    nameLine: string[] | string\n  }): { isValid: boolean; message: string } {\n    return checkPointOnLine({ figure: this, labelPt, nameLine })\n  }\n\n  /**\n   * Vérifie si un point appartient à une intersection de deux lignes (droites, demi-droites ou segments)\n   * @param {string} labelPt // Nom du point\n   * @param {string[]|string} nameLine1 // Nom de la ligne1 ou bien tableau contenant les noms de la ligne1\n   * @param {string[]|string} nameLine2 // Nom de la ligne2 ou bien tableau contenant les noms de la ligne2\n   * @example figure.checkPointOnIntersectionLL({labelPt:'A',nameline1:'CD',nameline2:'EF'}) -> Vérifie que le point A est le point d'intersection de tout segment, demi-droite ou droite dont le nom contient CD et de tout segment, demi-droite ou droite dont le nom contient EF\n   * @example figure.checkPointOnIntersectionLL({labelPt:'A',nameline1:['(CD)','(DC)'},nameline1:['[EF)'}) -> Vérifie que le point A est le point d'intersection de la droite nommée (CD) ou (DC) et de la demi-droite [EF).\n   * @author Eric Elter\n   * @returns {{ isValid: boolean, message: string }}\n   */\n  checkPointOnIntersectionLL({\n    labelPt,\n    nameLine1,\n    nameLine2,\n  }: {\n    figure: Figure\n    labelPt: string\n    nameLine1: string[] | string\n    nameLine2: string[] | string\n  }): { isValid: boolean; message: string } {\n    return checkPointOnIntersectionLL({\n      figure: this,\n      labelPt,\n      nameLine1,\n      nameLine2,\n    })\n  }\n\n  /**\n   * Vérifie si un point est sur le segment point1-point2 sans que le segment ne soit tracé mais la droite ou la demi-droite doit l'être.\n   * @param {string} labelPt // Nom du point\n   * @param {string} labelPt1 // Nom du point1\n   * @param {string} labelPt2 // Nom du point2\n   * @example figure.checkPointBetween2Points({ labelPt: 'A', labelPt1: 'E', labelPt2: 'F'}) -> Vérifie que le point A est sur le segment [EF] sans que le segment ne soit tracé mais la droite ou la demi-droite doit l'être.\n   * @author Eric Elter\n   * @returns {{ isValid: boolean, message: string }}\n   */\n  checkPointBetween2Points({\n    labelPt,\n    labelPt1, // Je passe par un label et pas par un pt car cela pourrait être un pointOnLine ou un PointIntersectionLL ou .....\n    labelPt2,\n  }: {\n    labelPt: string\n    labelPt1: string\n    labelPt2: string\n  }): { isValid: boolean; message: string } {\n    return checkPointBetween2Points({\n      figure: this,\n      labelPt,\n      labelPt1,\n      labelPt2,\n    })\n  }\n\n  checkAngle({\n    angle,\n    label1,\n    label2,\n    label3,\n  }: {\n    angle: number\n    label1: string\n    label2: string\n    label3: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkAngle({ angle, figure: this, label1, label2, label3 })\n  }\n\n  checkPerpendicularBisector({\n    color,\n    label1,\n    label2,\n  }: {\n    color?: string\n    label1: string\n    label2: string\n  }) {\n    return checkPerpendicularBisector({ figure: this, label1, label2, color })\n  }\n\n  checkCircleRadius({\n    center,\n    labelCenter,\n    radius,\n  }: {\n    center: Coords\n    labelCenter?: string\n    radius: number\n  }): {\n    isValid: boolean\n    message: string\n    element?: Circle\n  } {\n    return checkCircleRadius({ center, figure: this, labelCenter, radius })\n  }\n\n  checkCoords({\n    checkOnlyAbscissa,\n    label,\n    x,\n    y,\n    color,\n    precision = 0.1,\n  }: {\n    checkOnlyAbscissa?: boolean\n    label?: string\n    x: number\n    y?: number\n    color?: string\n    precision?: number\n  }): {\n    isValid: boolean\n    message: string\n    points: Point[]\n  } {\n    return checkCoords({\n      checkOnlyAbscissa,\n      figure: this,\n      label,\n      x,\n      y,\n      color,\n      precision,\n    })\n  }\n\n  checkDistance({\n    distance,\n    label1,\n    label2,\n  }: {\n    distance: number\n    label1: string\n    label2: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkDistance({ distance, figure: this, label1, label2 })\n  }\n\n  checkLine({\n    point1,\n    point2,\n    color,\n  }: {\n    point1: Coords\n    point2: Coords\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkLine({ figure: this, point1, point2, color })\n  }\n\n  checkSegment({\n    point1,\n    point2,\n    color,\n  }: {\n    point1: Coords\n    point2: Coords\n    color?: string\n  }): { isValid: boolean; message: string } {\n    return checkSegment({ figure: this, point1, point2, color })\n  }\n\n  checkParallel({ label1, label2 }: { label1: string; label2: string }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkParallel({ figure: this, label1, label2 })\n  }\n\n  checkPolygon({\n    acceptSegments,\n    points,\n    color,\n  }: {\n    acceptSegments?: boolean\n    points: Coords[]\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkPolygon({ figure: this, acceptSegments, points, color })\n  }\n\n  checkPolygonByLabels({\n    labels,\n    color,\n  }: {\n    labels: string[]\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkPolygonByLabels({ figure: this, labels, color })\n  }\n\n  checkSameDistance({ label1, label2 }: { label1: string; label2: string }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkSameDistance({ figure: this, label1, label2 })\n  }\n\n  checkRay({\n    point1,\n    point2,\n    color,\n  }: {\n    point1: Coords\n    point2: Coords\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkRay({ figure: this, point1, point2, color })\n  }\n\n  checkVector({\n    color,\n    labelOrigin,\n    labelPoint2,\n    x,\n    xOrigin,\n    y,\n    yOrigin,\n  }: {\n    color?: string\n    labelOrigin?: string\n    labelPoint2?: string\n    x: number\n    xOrigin?: number\n    y: number\n    yOrigin?: number\n  }): { isValid: boolean; message: string; vectors: VectorByPoints[] } {\n    return checkVector({\n      color,\n      figure: this,\n      labelOrigin,\n      labelPoint2,\n      x,\n      xOrigin,\n      y,\n      yOrigin,\n    })\n  }\n\n  clearHtml(): void {\n    this.svg.innerHTML = ''\n    const style = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'style',\n    )\n    this.svg.appendChild(style)\n    style.type = 'text/css'\n    style.innerHTML = '.onlyOver:hover { opacity: 1; }'\n    this.options = { ...defaultOptions }\n    this.addHandDrawnFilter()\n    if (this.options.isHandDrawn) this.svg.style.filter = 'url(#handDrawn)'\n  }\n\n  copy(): Figure {\n    const save = this.getJsonWithHistory()\n    const figure = new Figure()\n    figure.loadJson(JSON.parse(save))\n    if (this.elements.size !== figure.elements.size) {\n      throw new Error('Erreur lors de la copie de la figure')\n    }\n    return figure\n  }\n\n  create<T extends keyof typeof classes>(\n    typeStr: T,\n    // Les constructeurs sont de type [figure, options], donc on récupère le type des deuxièmes arguments des constructeurs\n    options?: ConstructorParameters<(typeof classes)[T]>[1],\n  ): InstanceType<(typeof classes)[T]> {\n    // @ts-expect-error Typage très complexe\n    const element = new classes[typeStr](this, { ...options })\n    if ('draw' in element) element.draw()\n    // @ts-expect-error Typage très complexe\n    return element\n  }\n\n  getContainer(): HTMLElement | null {\n    return this.container\n  }\n\n  getJsonWithHistory(): string {\n    const save = {\n      apiGeomVersion: APP_VERSION,\n      options: this.options,\n      ...Object.fromEntries(this.elements),\n      history: this.stackUndo,\n    }\n    return JSON.stringify(save, filter, 2)\n  }\n\n  /**\n   * Renvoie le premier point trouvé dans la figure avec le label donné ou null s'il n'existe pas\n   */\n  getPointByLabel(label: string): Point | null {\n    const points = [...this.elements.values()].filter(\n      (e) => e instanceof Point && e.label === label,\n    )\n    if (points.length > 0) {\n      return points[0] as Point\n    }\n    return null\n  }\n\n  /** Récupère les coordonnées du pointeur dans le repère de la figure */\n  getPointerCoord(event: PointerEvent): [number, number] {\n    event.preventDefault()\n    const rect = this.svg.getBoundingClientRect()\n    const pointerX =\n      (event.clientX - rect.x) / this.pixelsPerUnit / this.xScale / this.scale +\n      this.xMin\n    const pointerY =\n      -(event.clientY - rect.y) /\n        this.pixelsPerUnit /\n        this.yScale /\n        this.scale +\n      this.yMax\n    return [pointerX, pointerY]\n  }\n\n  /** Renvoie un string avec le code HTML et SVG de la figure */\n  getStaticHtml({ center = false }: { center?: boolean } = {}): string {\n    const currentIsDynamic = this.isDynamic\n    this.isDynamic = false\n    let result = ''\n    if (this.container.childElementCount < 5) {\n      const newContainer = document.createElement('div')\n      this.setContainer(newContainer)\n    } else {\n      this.isDynamic = currentIsDynamic\n    }\n    this.divFigure.style.display = 'block'\n    if (center) {\n      this.divFigure.style.margin = '0 auto'\n    }\n    result = this.divFigure.outerHTML\n    return result\n  }\n\n  /** Déplace le repère de la figure à l'aide des flèches */\n  handleDragAll(): void {\n    const keydownHandler = (e: KeyboardEvent): void => {\n      const direction = { x: 0, y: 0 }\n      const step = defaultDragAllDelta\n      if (e.key === 'ArrowLeft') {\n        direction.x = step\n      }\n      if (e.key === 'ArrowRight') {\n        direction.x = -step\n      }\n      if (e.key === 'ArrowUp') {\n        direction.y = -step\n      }\n      if (e.key === 'ArrowDown') {\n        direction.y = +step\n      }\n      // Shift + flèche => 10x plus rapide\n      if (e.shiftKey) {\n        direction.x *= 10\n        direction.y *= 10\n      }\n      if (!isModalOpen() && (direction.x !== 0 || direction.y !== 0)) {\n        e.preventDefault()\n        this.xMin += direction.x\n        this.yMin += direction.y\n        this.zoom(this.zoomLevel)\n      }\n    }\n\n    this._eventListeners.window = this._eventListeners.window || {}\n    this._eventListeners.window.keydown = keydownHandler\n    window.addEventListener('keydown', keydownHandler)\n  }\n\n  handleUndoRedoButtons(): void {\n    const btnRedo = this.buttons.get('REDO')\n    const btnUndo = this.buttons.get('UNDO')\n    if (btnRedo !== undefined) {\n      btnRedo.style.opacity = this.stackRedo.length === 0 ? '0.5' : '1'\n    }\n    if (btnUndo !== undefined) {\n      btnUndo.style.opacity = this.stackUndo.length < 2 ? '0.5' : '1'\n    }\n  }\n\n  /** Génère le code LaTeX de la figure (EE : Avec ou sans préambule */\n  latex({\n    xMax = this.xMin + this.options.latexWidth,\n    xMin = this.xMin,\n    yMax = this.yMax,\n    yMin = this.yMax - this.options.latexHeight,\n    includePreambule = true,\n  }: {\n    xMax?: number\n    xMin?: number\n    yMax?: number\n    yMin?: number\n    includePreambule?: boolean\n  } = {}): string {\n    let latex = ''\n    if (includePreambule) {\n      latex += '\\\\documentclass[french,a4paper]{article}'\n      latex += '\\n\\\\usepackage[francais]{babel}'\n      latex += '\\n\\\\usepackage[utf8]{inputenc}'\n      latex += '\\n\\\\usepackage{tkz-base}'\n      latex += '\\n\\\\usepackage{pgfplots}'\n      latex += '\\n\\\\begin{document}'\n    }\n    latex += this.tikz({ xMax, xMin, yMax, yMin })\n    if (includePreambule) latex += '\\n\\\\end{document}'\n    // ToFix Il peut y avoir un problème si un nombre est en écriture scientifique\n    latex = latex.replace(/\\d+\\.\\d+/g, (number: string) =>\n      (Math.round(1000000 * Number.parseFloat(number)) / 1000000).toString(),\n    )\n    return latex\n  }\n\n  /** Démarre les listenners sur la figure lorsqu'elle est dynamique */\n  listenPointer(): void {\n    let pointerMoveFrameHandle: number | null = null\n    let lastPointerPosition: [number, number] | null = null\n    const processPointerMove = (): void => {\n      pointerMoveFrameHandle = null\n      if (!this.isDynamic || lastPointerPosition === null) return\n      const [pointerX, pointerY] = lastPointerPosition\n      this.pointer.moveTo(pointerX, pointerY)\n      handleHover(this, pointerX, pointerY)\n      if (this.inDrag !== undefined) this.inDrag.moveTo(pointerX, pointerY)\n    }\n\n    // On créé des listenners pour envoyer les information à la machine à états this.ui\n    const pointerdownHandler = (event: PointerEvent): void => {\n      if (!this.isDynamic) return\n      // Traiter immédiatement le pointermove en attente avant le pointerdown\n      if (pointerMoveFrameHandle !== null) {\n        window.cancelAnimationFrame(pointerMoveFrameHandle)\n        processPointerMove()\n      }\n      // MGU nécessaire de le faire car sur tablette, le pointermove ne fonctionne pas\n      const [pointerX, pointerY] = this.getPointerCoord(event)\n      this.pointer.moveTo(pointerX, pointerY)\n      handlePointerAction(this, event)\n    }\n\n    const stopDrag = (): void => {\n      if (!this.isDynamic) return\n      /** MGu pour sortir de l'object sélectionné */\n      this.pointer.moveTo(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY)\n      handleHover(this, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY)\n      if (this.inDrag !== undefined) {\n        this.inDrag = undefined\n        if (this.divFigure !== null) this.divFigure.style.cursor = 'auto'\n        this.saveState()\n      }\n    }\n\n    const pointermoveHandler = (event: PointerEvent): void => {\n      if (!this.isDynamic) return\n      lastPointerPosition = this.getPointerCoord(event)\n      if (pointerMoveFrameHandle === null) {\n        pointerMoveFrameHandle =\n          window.requestAnimationFrame(processPointerMove)\n        this._animationFrameHandle = pointerMoveFrameHandle\n      }\n    }\n\n    this._eventListeners.svg = {\n      pointerdown: pointerdownHandler,\n      pointerup: stopDrag,\n      pointerleave: stopDrag,\n      pointermove: pointermoveHandler,\n    }\n\n    this.svg.addEventListener('pointerdown', pointerdownHandler)\n    this.svg.addEventListener('pointerup', stopDrag)\n    this.svg.addEventListener('pointerleave', stopDrag)\n    this.svg.addEventListener('pointermove', pointermoveHandler)\n  }\n\n  /** Exécuter tous les callbacks enregistrés avec onChange */\n  private _hasChanged(): void {\n    for (const action of this._actionsOnChange) {\n      action()\n    }\n  }\n\n  /** Efface la figure actuelle et charge une nouvelle figure à partir du code généré par this.json  */\n  loadJson(json: SaveJson, eraseHistory?: boolean): void {\n    loadJson(this, json, eraseHistory)\n  }\n\n  /** Ajoute une fonction à la liste de celles qui seront exécutées lorsque l'état de la figure est modifiée */\n  onChange(action: () => void): void {\n    this._actionsOnChange.push(action)\n  }\n\n  /** Reharge la figure stockée redoStack   */\n  redo(): void {\n    const lastRedo = this.stackRedo.at(-1)\n    if (lastRedo !== undefined) {\n      this.stackUndo.push(lastRedo)\n      this.stackRedo.pop()\n      this.loadJson(JSON.parse(lastRedo))\n      this.handleUndoRedoButtons()\n    }\n    this._hasChanged()\n  }\n\n  restart(level = 1): void {\n    if (this.stackUndo.length === 0) return\n    const stop = Number.isInteger(level) && level > 1 ? level : 1\n    while (this.stackUndo.length > stop) {\n      const lastUndo = this.stackUndo.at(-2)\n      if (lastUndo !== undefined) {\n        this.stackRedo.push(this.stackUndo.at(-1) as string)\n        this.stackUndo.pop()\n        if (this.stackUndo.length + 1 === stop) {\n          // chargement une seule fois au moins...\n          this.loadJson(JSON.parse(lastUndo))\n          this.handleUndoRedoButtons()\n        }\n      }\n    }\n    this._hasChanged()\n  }\n\n  /**  - Sauvegarde la figure\n   *   - Met à jour l'historique et l'inscrit dans le div this.divSave\n   *   - Réinitialise les éléments temporaires */\n  saveState(): void {\n    const save = this.json\n    if (isLocalStorageAvailable())\n      // Sauvegarde dans le localStorage\n      localStorage.setItem('apiGeom', save)\n    if (this.divSave !== null) {\n      this.divSave.textContent = save\n    }\n    this.stackUndo.push(save)\n    this.stackRedo = []\n    if (this.stackUndo.length > defaultHistorySize)\n      this.stackUndo = this.stackUndo.slice(-defaultHistorySize)\n    this.handleUndoRedoButtons()\n    for (const e of this.tmpElements) {\n      e.remove()\n    }\n    this.tmpElements = []\n    this.selectedElements = []\n    this._hasChanged()\n  }\n\n  setContainer(parentContainer: HTMLElement): void {\n    if (!(parentContainer instanceof HTMLElement))\n      throw Error('grandParentContainer doit être un HTMLElement')\n    parentContainer.appendChild(this.container)\n    this.divFigure.style.position = 'relative'\n    // this.container.style.overflow = 'hidden'\n    this.divFigure.style.display = 'inline-block'\n    this.divFigure.style.margin = '0'\n    this.divFigure.style.padding = '0'\n    this.divFigure.style.boxSizing = 'border-box'\n    this.divFigure.style.border = 'none'\n    // Si this.divButtons est vide\n    if (this.divButtons.childElementCount === 0 && this.isDynamic) {\n      this.setToolbar()\n    }\n    this.adjustSize()\n  }\n\n  setToolbar({\n    nbCols,\n    position = 'left',\n    showStyles,\n    tools,\n  }: {\n    nbCols?: number\n    position?: 'left' | 'top' | 'none'\n    showStyles?: boolean\n    tools?: availableButtons[]\n  } = {}): void {\n    setToolbar(this, { nbCols, position, showStyles, tools })\n  }\n\n  async shake({\n    delta = 3,\n    repeat = 5,\n    time = 1,\n  }: {\n    delta?: number\n    repeat?: number\n    time?: number\n  } = {}): Promise<void> {\n    await shake({ delta, figure: this, repeat, time })\n  }\n\n  /** Abscisse du SVG converti dans nos coordonnées */\n  sxTox(x: number): number {\n    return x / this.pixelsPerUnit / this.xScale / this.scale\n  }\n\n  /** Abscisse du SVG converti dans nos coordonnées */\n  syToy(y: number): number {\n    return -y / this.pixelsPerUnit / this.yScale / this.scale\n  }\n\n  tempCreate(\n    typeStr: string,\n    options?: ConstructorParameters<(typeof classes)[keyof typeof classes]>[1],\n  ): Element2D {\n    // @ts-expect-error Typage très complexe\n    const element = this.create(typeStr, {\n      isChild: true,\n      isSelectable: false,\n      ...options,\n    }) as Element2D\n    element.color = this.options.tmpColor\n    element.thickness = this.options.tmpThickness\n    if ('isDashed' in element && !(element instanceof Point))\n      element.isDashed = this.options.tmpIsDashed\n    if ('fillColor' in element) element.fillColor = this.options.tmpFillColor\n    if ('fillOpacity' in element)\n      element.fillOpacity = this.options.tmpFillOpacity\n    this.tmpElements.push(element)\n    return element\n  }\n\n  /** Génère le code TikZ de la figure */\n  tikz({\n    xMax = Math.min(this.xMax, this.xMin + this.options.latexWidth),\n    xMin = this.xMin,\n    yMax = this.yMax,\n    yMin = Math.max(this.yMin, this.yMax - this.options.latexHeight),\n    anchor = 'north',\n  }: {\n    xMax?: number\n    xMin?: number\n    yMax?: number\n    yMin?: number\n    anchor?: 'north' | 'south' | 'east' | 'west' | 'center' | 'mid' | 'base'\n  } = {}): string {\n    const stringScale = this.scale !== 1 ? `, scale=${this.scale}` : ''\n    const xScale = this.xScale !== 1 ? `, xScale=${this.xScale}` : ''\n    const yScale = this.yScale !== 1 ? `, yScale=${this.yScale}` : ''\n    let tikz = `\\n\\\\begin{tikzpicture}[baseline={(current bounding box.${anchor})}${stringScale}${xScale}${yScale}]`\n    tikz += `\\n\\\\clip(${xMin}, ${yMin}) rectangle (${xMax}, ${yMax});`\n    if (this.options.figureHasBorder) {\n      tikz += '\\n\\n% Bordure de la figure'\n      tikz += `\\n\\\\draw[ultra thick] (${xMin}, ${yMin}) rectangle (${xMax}, ${yMax});`\n    }\n    for (const element of this.elements.values()) {\n      if (\n        element instanceof Element2D &&\n        element.latex !== undefined &&\n        element.latex !== '' &&\n        element.isVisible &&\n        element.color !== '' &&\n        element.color !== 'none'\n      ) {\n        tikz += `\\n${element.latex}`\n      }\n    }\n    tikz += '\\n\\\\end{tikzpicture}'\n    // ToFix Il peut y avoir un problème si un nombre est en écriture scientifique\n    tikz = tikz.replace(/\\d+\\.\\d+/g, (number: string) =>\n      (Math.round(1000000 * Number.parseFloat(number)) / 1000000).toString(),\n    )\n    return tikz\n  }\n\n  /** Charge la figure stockée dans stackUndo */\n  undo(): void {\n    const lastUndo = this.stackUndo.at(-2)\n    if (lastUndo !== undefined) {\n      this.stackRedo.push(this.stackUndo.at(-1) as string)\n      this.stackUndo.pop()\n      this.loadJson(JSON.parse(lastUndo))\n      this.handleUndoRedoButtons()\n    }\n    this._hasChanged()\n  }\n\n  async wait(milliseconds = 1500): Promise<void> {\n    await new Promise((resolve) => {\n      setTimeout(resolve, milliseconds)\n    })\n  }\n\n  /** Abscisse dans nos coordonnées converti en abscisse du SVG */\n  xToSx(x: number): number {\n    return x * this.pixelsPerUnit * this.xScale * this.scale\n  }\n\n  /** Abscisse dans nos coordonnées converti en abscisse du SVG */\n  yToSy(y: number): number {\n    return -y * this.pixelsPerUnit * this.yScale * this.scale\n  }\n\n  zoom(\n    factor: number,\n    {\n      changeWidth = true,\n      changeHeight = true,\n      changeLeft = true,\n      changeBottom = true,\n    } = {},\n  ): void {\n    if (factor <= 0) return\n    if (changeWidth) this.width = this.initial.width * factor\n    if (changeHeight) this.height = this.initial.height * factor\n    this.scale = this.initial.scale * factor\n    if (changeLeft) this.xMin = this.initial.xMin / factor\n    if (changeBottom) this.yMin = this.initial.yMin / factor\n    this.adjustSize()\n    const json = this.getJsonWithHistory()\n    const options = this.options\n    this.loadJson(JSON.parse(json), false)\n    this.options = options\n  }\n\n  get htmlDescription(): HTMLUListElement {\n    const ul = document.createElement('ul')\n    ul.style.lineHeight = '2'\n    for (const element of this.elements.values()) {\n      if ('description' in element && !element.isChild) {\n        const li = document.createElement('li')\n        li.textContent = element.description\n        ul.appendChild(li)\n      }\n    }\n    return ul\n  }\n\n  /** Génère le code JSON de la figure qui permettra de la recharger */\n  get json(): string {\n    // Le JSON est personnalisé avec la méthode toJSON() des éléments\n    const save = {\n      apiGeomVersion: APP_VERSION,\n      options: this.options,\n      ...Object.fromEntries(this.elements),\n    }\n    return JSON.stringify(save, filter, 2)\n  }\n\n  get scale(): number {\n    return this._scale\n  }\n\n  set scale(scale: number) {\n    this._scale = scale\n    this.adjustSize()\n  }\n\n  get userMessage(): string {\n    return this.divUserMessage.textContent ?? ''\n  }\n\n  set userMessage(message: string) {\n    this.divUserMessage.textContent = message\n    renderMathInElement(this.divUserMessage, {\n      delimiters: [\n        { display: true, left: '\\\\[', right: '\\\\]' },\n        { display: false, left: '$', right: '$' },\n      ],\n      errorColor: '#CC0000',\n      preProcess: (chaine: string) =>\n        chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n      strict: 'warn',\n      throwOnError: true,\n      trust: false,\n    })\n  }\n}\n\nconst classes = {\n  Angle,\n  AngleOriented,\n  Arc,\n  ArcBy3PointsAndRadius,\n  ArcByCenterRadiusAndAngles,\n  Barycenter,\n  BisectorByPoints,\n  Circle,\n  CircleCenterDynamicRadius,\n  CircleCenterPoint,\n  CircleFractionDiagram,\n  Distance,\n  DynamicCalcul,\n  DynamicX,\n  DynamicY,\n  GraduatedLine,\n  Graph,\n  Graph2,\n  GraphByParts,\n  Grid,\n  Line,\n  LineByPointVector,\n  LineFractionDiagram,\n  RectangleFractionDiagram,\n  LineParallel,\n  LinePerpendicular,\n  MarkBetweenPoints,\n  MarkRightAngle,\n  Middle,\n  PerpendicularBisector,\n  PerpendicularBisectorByPoints,\n  Point,\n  PointByProjection,\n  PointByProjectionOnAxisX,\n  PointByProjectionOnAxisY,\n  PointIntersectionCC,\n  PointIntersectionLC,\n  PointIntersectionLL,\n  PointOnCircle,\n  PointOnGraph,\n  PointOnLine,\n  PointOnPolyline,\n  PointOnLineAtDistance,\n  PointsIntersectionCC,\n  PointsIntersectionLC,\n  Polygon,\n  Polyline,\n  Ray,\n  Segment,\n  TextByPoint,\n  TextByPosition,\n  TextDynamicByPoint,\n  TextDynamicByPosition,\n  Vector,\n  VectorByPoints,\n  VectorPerpendicular,\n}\n\nexport default Figure\n\nfunction filter(key: string, value: Element2D): Element2D | undefined {\n  if (value?.isChild) {\n    return undefined\n  }\n  if (key === 'isChild') {\n    return undefined\n  }\n  return value\n}\n\nfunction isModalOpen(): boolean {\n  const dialogs = Array.from(document.querySelectorAll('dialog'))\n  return dialogs.some((modal) => {\n    if (modal.open) {\n      return true\n    }\n    return false\n  })\n}\n","import type TextByPosition from '../elements/text/TextByPosition'\nimport type Figure from '../Figure'\n\nexport function addTextElementsToSvg(\n  svg: SVGElement,\n  figure: Figure,\n  bounds: {\n    xMin: number\n    yMax: number\n    width: number\n    height: number\n  },\n): void {\n  const textElements = [...figure.elements.values()].filter(\n    (e) =>\n      e.type === 'TextByPosition' ||\n      e.type === 'TextByPoint' ||\n      e.type === 'TextDynamicByPosition' ||\n      e.type === 'TextDynamicByPoint',\n  ) as TextByPosition[]\n\n  for (const textEl of textElements) {\n    if (!textEl.isVisible) continue\n\n    const textX = textEl.x\n    const textY = textEl.y\n\n    if (textX === undefined || textY === undefined) continue\n    const textSvgX = figure.xToSx(textX) + textEl.dxInPixels\n    const textSvgY = figure.yToSy(textY) - textEl.dyInPixels\n\n    if (\n      textSvgX < bounds.xMin ||\n      textSvgX > bounds.xMin + bounds.width ||\n      textSvgY < bounds.yMax ||\n      textSvgY > bounds.yMax + bounds.height\n    ) {\n      continue\n    }\n\n    const svgText = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'text',\n    )\n    svgText.setAttribute('x', textSvgX.toString())\n    svgText.setAttribute('y', textSvgY.toString())\n    svgText.setAttribute('fill', textEl.color || 'black')\n    svgText.setAttribute('font-size', textEl.fontSize || '12pt')\n\n    const anchor = textEl.anchor || 'middleCenter'\n    if (anchor.includes('Left')) {\n      svgText.setAttribute('text-anchor', 'start')\n    } else if (anchor.includes('Right')) {\n      svgText.setAttribute('text-anchor', 'end')\n    } else {\n      svgText.setAttribute('text-anchor', 'middle')\n    }\n\n    if (anchor.includes('top')) {\n      svgText.setAttribute('dominant-baseline', 'hanging')\n    } else if (anchor.includes('bottom')) {\n      svgText.setAttribute('dominant-baseline', 'auto')\n    } else {\n      svgText.setAttribute('dominant-baseline', 'middle')\n    }\n\n    if (\n      textEl._angleWithHorizontalInDegres &&\n      textEl._angleWithHorizontalInDegres !== 0\n    ) {\n      svgText.setAttribute(\n        'transform',\n        `rotate(${textEl._angleWithHorizontalInDegres} ${textSvgX} ${textSvgY})`,\n      )\n    }\n\n    let textContent = textEl.text\n    if (textContent.startsWith('$') && textContent.endsWith('$')) {\n      textContent = textContent.slice(1, -1)\n    }\n    svgText.textContent = textContent\n\n    svg.appendChild(svgText)\n  }\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\n\nimport type Figure from '../Figure'\nimport { isLocalStorageAvailable } from '../lib/storage'\n\nexport function createDialoxBoxRadius(figure: Figure): HTMLDialogElement {\n  const existingDialog = document.querySelector('dialog#apigeom-dialog-radius')\n  if (existingDialog != null) {\n    existingDialog.remove()\n  }\n  const dialog = document.createElement('dialog')\n  dialog.id = 'apigeom-dialog-radius'\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = 'Rayon : '\n  const input = document.createElement('input')\n  input.type = 'text'\n  input.name = 'radius'\n  input.style.marginLeft = '10px'\n  input.setAttribute('autocomplete', 'off')\n  input.setAttribute('spellcheck', 'false')\n  input.setAttribute('autocorrect', 'off')\n  input.setAttribute('autocapitalize', 'none')\n  input.setAttribute('data-form-type', 'other')\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    if (figure.ui != null) {\n      if (input.value.match(/[a-zA-Z]/)) {\n        figure.ui.send({ type: 'RADIUS', radius: input.value })\n      } else {\n        figure.ui.send({\n          type: 'RADIUS',\n          radius: String(Number(input.value.replace(',', '.'))),\n        })\n      }\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    } else if (e.key === '.') {\n      e.preventDefault()\n      input.value += ','\n    }\n  })\n  return dialog\n}\n\nexport function createDialoxBoxK(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = \"Coefficient de l'homothétie : \"\n  const input = document.createElement('input')\n  input.type = 'number'\n  input.name = 'coefficient'\n  input.min = '-10'\n  input.max = '10'\n  input.value = '2'\n  input.style.marginLeft = '10px'\n  input.setAttribute('autocomplete', 'off')\n  input.setAttribute('data-form-type', 'other')\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    if (figure.ui != null) {\n      figure.ui.send({\n        type: 'DILATE_COEF',\n        coefficient: Number(input.value),\n      })\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createDialoxBoxName(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  // Si le label est \"Nom du point\" alors Safari propose de l'autocomplétion même si on a mis autocomplete=\"off\"\n  // Hack : on met un nom contenant search pour bloquer l'autocompletion\n  label.innerHTML = 'Nom du point'\n  const input = document.createElement('input')\n  input.type = 'text'\n  input.name = 'search'\n  input.style.marginLeft = '10px'\n  input.setAttribute('autocomplete', 'off')\n  input.setAttribute('spellcheck', 'false')\n  input.setAttribute('autocorrect', 'off')\n  input.setAttribute('autocapitalize', 'none')\n\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    if (figure.ui != null) {\n      figure.ui.send({ type: 'TEXT_FROM_DIALOG', text: input.value })\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createDialoxBoxAngle(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = 'Angle (en degrés) : '\n  const input = document.createElement('input')\n  input.type = 'number'\n  input.name = 'angle'\n  input.style.marginLeft = '10px'\n  input.value = '90'\n  input.setAttribute('autocomplete', 'off')\n  input.setAttribute('data-form-type', 'other')\n  const choice = document.createElement('select')\n  choice.style.marginLeft = '10px'\n  choice.innerHTML =\n    '<option value=\"-1\">Sens horaire</option><option value=\"1\">Sens anti-horaire</option>'\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(choice)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    const angle = Number(input.value) * Number.parseInt(choice.value, 10)\n    if (figure.ui != null) {\n      figure.ui.send({ type: 'ANGLE', angle })\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createDialogBoxLoadAuto(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = 'Souhaitez-vous charger la dernière construction ?'\n  const buttonCancel = document.createElement('button')\n  buttonCancel.innerHTML = 'Non'\n  const button = document.createElement('button')\n  button.innerHTML = 'Oui'\n  button.style.marginLeft = '10px'\n  button.style.marginRight = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(button)\n  dialog.appendChild(buttonCancel)\n  document.body.appendChild(dialog)\n  button.addEventListener('click', () => {\n    if (isLocalStorageAvailable()) {\n      const figureInLocalStorage = localStorage.getItem('apiGeom')\n      if (figureInLocalStorage !== null) {\n        figure.loadJson(JSON.parse(figureInLocalStorage))\n      }\n    }\n    dialog.close()\n  })\n  buttonCancel.addEventListener('click', () => {\n    dialog.close()\n  })\n  dialog.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createModalDescription(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.id = 'dialog'\n  dialog.style.position = 'absolute'\n  dialog.style.top = '0'\n  dialog.style.left = '0'\n  dialog.style.width = '50%'\n  dialog.style.height = '90%'\n  dialog.style.border = 'none'\n  dialog.style.background = 'white'\n  dialog.style.zIndex = '100'\n  dialog.appendChild(figure.htmlDescription)\n  renderMathInElement(dialog, {\n    delimiters: [\n      { display: true, left: '\\\\[', right: '\\\\]' },\n      { display: false, left: '$', right: '$' },\n    ],\n    errorColor: '#CC0000',\n    preProcess: (chaine: string) =>\n      chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n    strict: 'warn',\n    throwOnError: true,\n    trust: false,\n  })\n  dialog.addEventListener('click', () => {\n    dialog.close()\n  })\n  document.body.appendChild(dialog)\n  dialog.showModal()\n  return dialog\n}\n\nexport function createDialogBoxOptions(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  dialog.style.display = 'flex'\n  dialog.style.flexDirection = 'column'\n  dialog.style.gap = '10px'\n\n  // Titre\n  const title = document.createElement('h2')\n  title.innerText = 'Options de la figure'\n  title.style.margin = '0 0 10px 0'\n  dialog.appendChild(title)\n\n  // Taille des points\n  const divPointSize = document.createElement('div')\n  const labelPointSize = document.createElement('label')\n  labelPointSize.innerText = 'Taille des points : '\n  const inputPointSize = document.createElement('input')\n  inputPointSize.type = 'number'\n  inputPointSize.min = '1'\n  inputPointSize.max = '10'\n  inputPointSize.value = String(figure.options.pointSize)\n  divPointSize.appendChild(labelPointSize)\n  divPointSize.appendChild(inputPointSize)\n  dialog.appendChild(divPointSize)\n\n  // Forme des points\n  const divShape = document.createElement('div')\n  const labelShape = document.createElement('label')\n  labelShape.innerText = 'Forme des points : '\n  const selectShape = document.createElement('select')\n  const shapes = [\n    { value: '', text: 'Rien' },\n    { value: 'o', text: 'Rond' },\n    { value: 'x', text: 'Croix' },\n    { value: '|', text: 'Trait' },\n  ]\n  for (const shape of shapes) {\n    const option = document.createElement('option')\n    option.value = shape.value\n    option.text = shape.text\n    if (figure.options.shape === shape.value) {\n      option.selected = true\n    }\n    selectShape.appendChild(option)\n  }\n  divShape.appendChild(labelShape)\n  divShape.appendChild(selectShape)\n  dialog.appendChild(divShape)\n\n  // Aspect main levée\n  const divHandDrawn = document.createElement('div')\n  const labelHandDrawn = document.createElement('label')\n  labelHandDrawn.innerText = 'Aspect main levée : '\n  const inputHandDrawn = document.createElement('input')\n  inputHandDrawn.type = 'checkbox'\n  inputHandDrawn.checked = figure.options.isHandDrawn\n  divHandDrawn.appendChild(labelHandDrawn)\n  divHandDrawn.appendChild(inputHandDrawn)\n  dialog.appendChild(divHandDrawn)\n\n  // Bordure\n  const divBorder = document.createElement('div')\n  const labelBorder = document.createElement('label')\n  labelBorder.innerText = 'Cadre : '\n  const inputBorder = document.createElement('input')\n  inputBorder.type = 'checkbox'\n  inputBorder.checked = figure.options.figureHasBorder\n  divBorder.appendChild(labelBorder)\n  divBorder.appendChild(inputBorder)\n  dialog.appendChild(divBorder)\n\n  // Boutons\n  const divButtons = document.createElement('div')\n  divButtons.style.display = 'flex'\n  divButtons.style.justifyContent = 'flex-end'\n  divButtons.style.marginTop = '10px'\n\n  const buttonCancel = document.createElement('button')\n  buttonCancel.innerText = 'Annuler'\n  buttonCancel.style.marginRight = '10px'\n\n  const buttonValidate = document.createElement('button')\n  buttonValidate.innerText = 'Valider'\n\n  divButtons.appendChild(buttonCancel)\n  divButtons.appendChild(buttonValidate)\n  dialog.appendChild(divButtons)\n\n  document.body.appendChild(dialog)\n\n  buttonCancel.addEventListener('click', () => {\n    dialog.close()\n    dialog.remove()\n  })\n\n  buttonValidate.addEventListener('click', () => {\n    figure.options.pointSize = Number(inputPointSize.value)\n    figure.options.shape = selectShape.value as '' | '|' | 'o' | 'x'\n    figure.options.isHandDrawn = inputHandDrawn.checked\n    figure.options.figureHasBorder = inputBorder.checked\n\n    // Mise à jour de l'affichage\n    if (figure.options.isHandDrawn) {\n      figure.svg.style.filter = 'url(#handDrawn)'\n    } else {\n      figure.svg.style.filter = ''\n    }\n\n    if (figure.options.figureHasBorder) {\n      figure.svg.style.border = 'solid'\n    } else {\n      figure.svg.style.border = 'none'\n    }\n\n    dialog.close()\n    dialog.remove()\n  })\n\n  dialog.showModal()\n  return dialog\n}\n","import type Figure from '../Figure'\n\nexport default function selectionRectangle(figure: Figure): {\n  div: HTMLDivElement\n  cleanup: () => void\n} {\n  const div = document.createElement('div')\n  div.style.position = 'absolute'\n  div.style.top = '0'\n  div.style.left = '0'\n  div.style.border = '1px solid black'\n  div.style.backgroundColor = 'rgba(0, 0, 0, 0.1)'\n  div.style.pointerEvents = 'none'\n  div.style.zIndex = '1000'\n  const buttonSvg = document.createElement('button')\n  buttonSvg.style.position = 'absolute'\n  buttonSvg.style.border = '1px solid black'\n  buttonSvg.style.pointerEvents = 'auto'\n  buttonSvg.style.zIndex = '1001'\n  buttonSvg.innerHTML = 'SVG'\n  const buttonLatex = document.createElement('button')\n  buttonLatex.style.position = 'absolute'\n  buttonLatex.style.border = '1px solid black'\n  buttonLatex.style.pointerEvents = 'auto'\n  buttonLatex.style.zIndex = '1001'\n  buttonLatex.innerHTML = 'LaTeX'\n  buttonLatex.style.top = '50px'\n  buttonLatex.style.right = '10%'\n  buttonLatex.style.cursor = 'pointer'\n  buttonSvg.style.cursor = 'pointer'\n  buttonLatex.style.backgroundColor = 'white'\n  buttonSvg.style.backgroundColor = 'white'\n  buttonLatex.style.boxShadow = '0px 0px 5px 0px rgba(0,0,0,0.75)'\n  buttonSvg.style.boxShadow = '0px 0px 5px 0px rgba(0,0,0,0.75)'\n  // Dimensions display element\n  const dimensionsDisplay = document.createElement('div')\n  dimensionsDisplay.style.position = 'absolute'\n  dimensionsDisplay.style.top = '0'\n  dimensionsDisplay.style.right = '0'\n  dimensionsDisplay.style.backgroundColor = 'white'\n  dimensionsDisplay.style.padding = '2px 6px'\n  dimensionsDisplay.style.border = '1px solid black'\n  dimensionsDisplay.style.fontSize = '12px'\n  dimensionsDisplay.style.fontFamily = 'monospace'\n  dimensionsDisplay.style.pointerEvents = 'none'\n  dimensionsDisplay.style.zIndex = '1001'\n  dimensionsDisplay.style.whiteSpace = 'nowrap'\n  const container = figure.divFigure\n  const rectangleContainer = container.getBoundingClientRect()\n  const containerLeft = rectangleContainer.left\n  const containerTop = rectangleContainer.top\n  container.appendChild(div)\n  div.appendChild(buttonSvg)\n  div.appendChild(buttonLatex)\n  div.appendChild(dimensionsDisplay)\n  buttonSvg.style.top = '100px'\n  buttonSvg.style.right = '10%'\n  buttonSvg.style.cursor = 'pointer'\n  div.style.width = `${figure.divFigure.clientWidth - 100}px`\n  div.style.height = `${figure.divFigure.clientHeight - 200}px`\n\n  // Function to update dimensions display\n  const updateDimensions = (): void => {\n    const rect = div.getBoundingClientRect()\n    const widthInPixels = rect.width\n    const heightInPixels = rect.height\n\n    // Convert pixels to figure units\n    const widthInUnits = Math.abs(figure.sxTox(widthInPixels) - figure.sxTox(0))\n    const heightInUnits = Math.abs(\n      figure.syToy(0) - figure.syToy(heightInPixels),\n    )\n\n    // Round to nearest tenth\n    const widthRounded = Math.round(widthInUnits * 10) / 10\n    const heightRounded = Math.round(heightInUnits * 10) / 10\n\n    dimensionsDisplay.textContent = `${widthRounded} × ${heightRounded}`\n  }\n\n  // Initial update\n  updateDimensions()\n  let isNearCorner = false\n  let isNearLeftCorner = false\n  let isNearRightCorner = false\n  let isNearTopCorner = false\n  let isNearBottomCorner = false\n  let isNearTopLeftCorner = false\n  let isNearTopRightCorner = false\n  let isNearBottomLeftCorner = false\n  let isNearBottomRightCorner = false\n  const mousemoveHandler = (event: MouseEvent): void => {\n    const rect = div.getBoundingClientRect()\n    const x = event.clientX\n    const y = event.clientY\n    container.style.cursor = 'default'\n    if (Math.abs(x - rect.left) < 10) {\n      isNearLeftCorner = true\n      container.style.cursor = 'ew-resize'\n    } else if (Math.abs(x - rect.right) < 10) {\n      isNearRightCorner = true\n      container.style.cursor = 'ew-resize'\n    } else {\n      isNearLeftCorner = false\n      isNearRightCorner = false\n    }\n    if (Math.abs(y - rect.top) < 10) {\n      isNearTopCorner = true\n      container.style.cursor = 'n-resize'\n    } else if (Math.abs(y - rect.bottom) < 10) {\n      isNearBottomCorner = true\n      container.style.cursor = 's-resize'\n    } else {\n      isNearTopCorner = false\n      isNearBottomCorner = false\n    }\n    if (isNearLeftCorner && isNearTopCorner) {\n      isNearTopLeftCorner = true\n      container.style.cursor = 'nw-resize'\n    } else if (isNearRightCorner && isNearTopCorner) {\n      isNearTopRightCorner = true\n      container.style.cursor = 'ne-resize'\n    } else if (isNearLeftCorner && isNearBottomCorner) {\n      isNearBottomLeftCorner = true\n      container.style.cursor = 'sw-resize'\n    } else if (isNearRightCorner && isNearBottomCorner) {\n      isNearBottomRightCorner = true\n      container.style.cursor = 'se-resize'\n    } else {\n      isNearTopLeftCorner = false\n      isNearTopRightCorner = false\n      isNearBottomLeftCorner = false\n      isNearBottomRightCorner = false\n    }\n    isNearCorner =\n      isNearLeftCorner ||\n      isNearRightCorner ||\n      isNearTopCorner ||\n      isNearBottomCorner ||\n      isNearTopLeftCorner ||\n      isNearTopRightCorner ||\n      isNearBottomLeftCorner ||\n      isNearBottomRightCorner\n  }\n  window.addEventListener('mousemove', mousemoveHandler)\n\n  const pointerdownHandler = (): void => {\n    if (isNearCorner) {\n      const rect = div.getBoundingClientRect()\n      const width = rect.width\n      const height = rect.height\n      const left = rect.left\n      const top = rect.top\n      const resize = (event: MouseEvent): void => {\n        const dx = event.clientX - left\n        const dy = event.clientY - top\n\n        // Helper function to snap a pixel value to 0.1 unit increments\n        const snapToTenth = (\n          deltaPixels: number,\n          isHorizontal: boolean,\n        ): number => {\n          // Convert pixel delta to figure units\n          const deltaInUnits = isHorizontal\n            ? Math.abs(figure.sxTox(deltaPixels) - figure.sxTox(0))\n            : Math.abs(figure.syToy(0) - figure.syToy(deltaPixels))\n\n          // Round to nearest tenth\n          const snappedUnits = Math.round(deltaInUnits * 10) / 10\n\n          // Convert back to pixels\n          const snappedPixels = isHorizontal\n            ? Math.abs(figure.xToSx(snappedUnits) - figure.xToSx(0))\n            : Math.abs(figure.yToSy(0) - figure.yToSy(snappedUnits))\n\n          return snappedPixels\n        }\n\n        // Calculate snapped dimensions\n        let newWidth = width\n        let newHeight = height\n        let newLeft = left - containerLeft\n        let newTop = top - containerTop\n\n        if (isNearLeftCorner) {\n          const snappedDx =\n            dx > 0 ? snapToTenth(dx, true) : -snapToTenth(-dx, true)\n          newLeft = left + snappedDx - containerLeft\n          newWidth = width - snappedDx\n        } else if (isNearRightCorner) {\n          newWidth = snapToTenth(dx, true)\n        }\n\n        if (isNearTopCorner) {\n          const snappedDy =\n            dy > 0 ? snapToTenth(dy, false) : -snapToTenth(-dy, false)\n          newTop = top + snappedDy - containerTop\n          newHeight = height - snappedDy\n        } else if (isNearBottomCorner) {\n          newHeight = snapToTenth(dy, false)\n        }\n\n        // Apply the snapped values\n        if (isNearLeftCorner || isNearTopLeftCorner || isNearBottomLeftCorner) {\n          div.style.left = `${newLeft}px`\n        }\n        if (isNearTopCorner || isNearTopLeftCorner || isNearTopRightCorner) {\n          div.style.top = `${newTop}px`\n        }\n        if (\n          isNearLeftCorner ||\n          isNearRightCorner ||\n          isNearTopLeftCorner ||\n          isNearTopRightCorner ||\n          isNearBottomLeftCorner ||\n          isNearBottomRightCorner\n        ) {\n          div.style.width = `${newWidth}px`\n        }\n        if (\n          isNearTopCorner ||\n          isNearBottomCorner ||\n          isNearTopLeftCorner ||\n          isNearTopRightCorner ||\n          isNearBottomLeftCorner ||\n          isNearBottomRightCorner\n        ) {\n          div.style.height = `${newHeight}px`\n        }\n\n        // Update dimensions display in real-time\n        updateDimensions()\n      }\n      const stopResize = (): void => {\n        window.removeEventListener('pointermove', resize)\n        window.removeEventListener('pointerup', stopResize)\n      }\n      window.addEventListener('pointermove', resize)\n      window.addEventListener('pointerup', stopResize)\n    }\n  }\n  window.addEventListener('pointerdown', pointerdownHandler)\n\n  const buttonSvgClickHandler = (): void => {\n    const rect = div.getBoundingClientRect()\n    const xMin = rect.left - containerLeft\n    const yMax = rect.top - containerTop\n    const width = rect.width\n    const height = rect.height\n    figure.ui?.send({\n      type: 'SELECTION_AREA_TO_SVG',\n      height,\n      width,\n      xMin,\n      yMax,\n    })\n  }\n  buttonSvg.addEventListener('click', buttonSvgClickHandler)\n\n  const buttonLatexClickHandler = (): void => {\n    const rect = div.getBoundingClientRect()\n    const xMin = rect.left - containerLeft\n    const yMax = rect.top - containerTop\n    const width = rect.width\n    const height = rect.height\n    figure.ui?.send({\n      type: 'SELECTION_AREA_TO_LATEX',\n      height,\n      width,\n      xMin,\n      yMax,\n    })\n  }\n  buttonLatex.addEventListener('click', buttonLatexClickHandler)\n\n  // Fonction de cleanup pour supprimer tous les event listeners\n  const cleanup = (): void => {\n    window.removeEventListener('mousemove', mousemoveHandler)\n    window.removeEventListener('pointerdown', pointerdownHandler)\n    buttonSvg.removeEventListener('click', buttonSvgClickHandler)\n    buttonLatex.removeEventListener('click', buttonLatexClickHandler)\n    // Nettoyer les event listeners inline\n    buttonSvg.onclick = null\n    buttonLatex.onclick = null\n    // Supprimer les éléments du DOM\n    div.remove()\n  }\n\n  return { div, cleanup }\n}\n","/* eslint-disable @typescript-eslint/no-misused-promises */\nimport { type AnyEventObject, createMachine } from 'xstate'\nimport { distance } from './elements/calculus/Coords'\nimport Graph from './elements/calculus/Graph'\nimport {\n  defaultZoomInFactor,\n  defaultZoomOutFactor,\n  orangeMathaleaLight,\n} from './elements/defaultValues'\nimport Element2D from './elements/Element2D'\nimport type Grid from './elements/grid/Grid'\nimport Arc from './elements/lines/Arc'\nimport Circle from './elements/lines/Circle'\nimport Polygon from './elements/lines/Polygon'\nimport Segment from './elements/lines/Segment'\nimport Point from './elements/points/Point'\nimport TextByPoint from './elements/text/TextByPoint'\nimport TextDynamicByPoint from './elements/text/TextDynamicByPoint'\nimport type Figure from './Figure'\nimport { addTextElementsToSvg } from './lib/addTextElementsToSvg'\nimport {\n  createDialogBoxOptions,\n  createDialoxBoxAngle,\n  createDialoxBoxK,\n  createDialoxBoxName,\n  createDialoxBoxRadius,\n  createModalDescription,\n} from './userInterface/handleDialog'\nimport selectionRectangle from './userInterface/selectionRectangle'\n\ninterface MyContext {\n  figure: Figure\n}\n\nexport type eventName =\n  | 'ANGLE'\n  | 'BISSECTOR_BY_POINTS'\n  | 'CIRCLE_CENTER_POINT'\n  | 'CIRCLE_RADIUS'\n  | 'clickLocation'\n  | 'COLOR'\n  | 'DESCRIPTION'\n  | 'DILATE_COEF'\n  | 'DILATE'\n  | 'DISC_CENTER_POINT'\n  | 'DISC_RADIUS'\n  | 'DOWNLOAD_LATEX_SVG'\n  | 'DRAG'\n  | 'FILL'\n  | 'GRID'\n  | 'HIDE'\n  | 'INFORMATIONS'\n  | 'INIT'\n  | 'LATEX'\n  | 'LINE_PARALLEL'\n  | 'LINE_PERPENDICULAR'\n  | 'LINE'\n  | 'MARK_BETWEEN_POINTS'\n  | 'MIDDLE'\n  | 'MOVE_LABEL'\n  | 'NAME_POINT'\n  | 'OPEN'\n  | 'OPTIONS'\n  | 'PAUSE'\n  | 'PERPENDICULAR_BISECTOR'\n  | 'PLAY_SKIP_BACK'\n  | 'PLAY_SKIP_FORWARD'\n  | 'PLAY'\n  | 'POINT_INTERSECTION'\n  | 'POINT_ON'\n  | 'POINT'\n  | 'POLYGON'\n  | 'RADIUS'\n  | 'RAY'\n  | 'REDO'\n  | 'REFLECTION_OVER_LINE'\n  | 'REFLECTION'\n  | 'REMOVE'\n  | 'RESTART'\n  | 'ROTATE'\n  | 'SAVE'\n  | 'SEGMENT'\n  | 'SELECTION_AREA_TO_LATEX'\n  | 'SELECTION_AREA_TO_SVG'\n  | 'SET_OPTIONS'\n  | 'SHAKE'\n  | 'TEXT_FROM_DIALOG'\n  | 'TRANSLATION'\n  | 'UNDO'\n  | 'VECTOR'\n  | 'ZOOM_IN'\n  | 'ZOOM_OUT'\n\nexport type eventOptions =\n  | { angle: number }\n  | { coefficient: number }\n  | {\n      element?: Element2D\n      possibleElements?: Element2D[]\n      waitingWithModal: boolean\n      x: number\n      y: number\n    }\n  | { height: number; width: number; xMin: number; yMax: number }\n  | { radius: string }\n  | { text: string }\n  | { text: string }\n\nexport type UiEvent =\n  | { type: 'ANGLE'; angle: number }\n  | { type: 'DILATE_COEF'; coefficient: number }\n  | { type: 'RADIUS'; radius: string }\n  | { type: 'TEXT_FROM_DIALOG'; text: string }\n  | { type: 'COLOR'; text: string }\n  | {\n      type: 'clickLocation'\n      element?: Element2D\n      possibleElements?: Element2D[]\n      x: number\n      y: number\n      waitingWithModal?: boolean\n    }\n  | {\n      type: 'SELECTION_AREA_TO_LATEX'\n      xMin: number\n      width: number\n      yMax: number\n      height: number\n    }\n  | {\n      type: 'SELECTION_AREA_TO_SVG'\n      xMin: number\n      width: number\n      yMax: number\n      height: number\n    }\n  | { type: eventName }\n\ninterface MyEvent extends AnyEventObject {\n  element?: Element2D\n  text?: string\n  waitingWithModal?: boolean\n  x?: number\n  y?: number\n}\n\ninterface Context {\n  figure: Figure\n  intervalId?: ReturnType<typeof setInterval>\n  temp: {\n    elements: Element2D[]\n    htmlElement: (HTMLElement | undefined)[]\n    values: number[]\n    cleanupFunctions?: Array<() => void>\n  }\n}\n\n// @ts-expect-error - XState v5 changed type signature, consider migrating to setup() API\nconst ui = createMachine<Context>(\n  {\n    /* eslint-disable-next-line @typescript-eslint/consistent-type-assertions */\n    context: ({ input }: { input: Context }) => ({\n      figure: input.figure,\n      temp: input.temp,\n    }),\n    entry: ['highlightButton', 'eraseTempElements', 'eraseUserMessage'],\n    id: 'apiGeomUI',\n    initial: 'INIT',\n    on: {\n      BISECTOR_BY_POINTS: {\n        target: '.BISECTOR_BY_POINTS',\n        actions: 'highlightButton',\n      },\n      CIRCLE_CENTER_POINT: {\n        target: '.CIRCLE_CENTER_POINT',\n        actions: 'highlightButton',\n      },\n      CIRCLE_RADIUS: { target: '.CIRCLE_RADIUS', actions: 'highlightButton' },\n      COLOR: { target: '.COLOR', actions: 'highlightButton' },\n      DESCRIPTION: { target: '.DESCRIPTION', actions: 'highlightButton' },\n      DILATE: { target: '.DILATE', actions: 'highlightButton' },\n      DISC_CENTER_POINT: {\n        target: '.DISC_CENTER_POINT',\n        actions: 'highlightButton',\n      },\n      DISC_RADIUS: { target: '.DISC_RADIUS', actions: 'highlightButton' },\n      DOWNLOAD_LATEX_SVG: {\n        target: '.DOWNLOAD_LATEX_SVG',\n        actions: 'highlightButton',\n      },\n      DRAG: { target: '#apiGeomUI.DRAG', actions: 'highlightButton' },\n      FILL: { target: '.FILL', actions: 'highlightButton' },\n      GRID: { target: '.GRID', actions: 'highlightButton' },\n      HIDE: { target: '#apiGeomUI.HIDE', actions: 'highlightButton' },\n      INFORMATIONS: {\n        target: '#apiGeomUI.INFORMATIONS',\n        actions: 'highlightButton',\n      },\n      LATEX: { target: '.LATEX', actions: 'highlightButton' },\n      LINE: { target: '.LINE', actions: 'highlightButton' },\n      LINE_PARALLEL: { target: '.LINE_PARALLEL', actions: 'highlightButton' },\n      LINE_PERPENDICULAR: {\n        target: '.LINE_PERPENDICULAR',\n        actions: 'highlightButton',\n      },\n      MARK_BETWEEN_POINTS: {\n        target: '.MARK_BETWEEN_POINTS',\n        actions: 'highlightButton',\n      },\n      MESURE_ANGLE: { target: '.MESURE_ANGLE', actions: 'highlightButton' },\n      MESURE_SEGMENT: { target: '.MESURE_SEGMENT', actions: 'highlightButton' },\n      MIDDLE: { target: '.MIDDLE', actions: 'highlightButton' },\n      MOVE_LABEL: { target: '.MOVE_LABEL', actions: 'highlightButton' },\n      NAME_POINT: { target: '.NAME_POINT', actions: 'highlightButton' },\n      OPEN: { target: '.OPEN', actions: 'highlightButton' },\n      OPTIONS: { target: '.OPTIONS', actions: 'highlightButton' },\n      PAUSE: { target: '.PAUSE', actions: 'highlightButton' },\n      PERPENDICULAR_BISECTOR: {\n        target: '.PERPENDICULAR_BISECTOR',\n        actions: 'highlightButton',\n      },\n      PLAY: { target: '.PLAY', actions: 'highlightButton' },\n      PLAY_SKIP_BACK: { target: '.PLAY_SKIP_BACK', actions: 'highlightButton' },\n      PLAY_SKIP_FORWARD: {\n        target: '.PLAY_SKIP_FORWARD',\n        actions: 'highlightButton',\n      },\n      POINT: { target: '.POINT', actions: 'highlightButton' },\n      POINT_INTERSECTION: {\n        target: '.POINT_INTERSECTION',\n        actions: 'highlightButton',\n      },\n      POINT_ON: { target: '#apiGeomUI.POINT_ON', actions: 'highlightButton' },\n      POLYGON: { target: '.POLYGON', actions: 'highlightButton' },\n      RAY: { target: '.RAY', actions: 'highlightButton' },\n      REDO: { target: '.REDO', actions: 'highlightButton' },\n      REFLECTION: { target: '.REFLECTION', actions: 'highlightButton' },\n      REFLECTION_OVER_LINE: {\n        target: '.REFLECTION_OVER_LINE',\n        actions: 'highlightButton',\n      },\n      REMOVE: { target: '.REMOVE', actions: 'highlightButton' },\n      RESTART: { target: '.RESTART', actions: 'highlightButton' },\n      ROTATE: { target: '.ROTATE', actions: 'highlightButton' },\n      SAVE: { target: '.SAVE', actions: 'highlightButton' },\n      SEGMENT: { target: '.SEGMENT', actions: 'highlightButton' },\n      SET_OPTIONS: { target: '.SET_OPTIONS', actions: 'highlightButton' },\n      SHAKE: { target: '.SHAKE', actions: 'highlightButton' },\n      TRANSLATION: { target: '.TRANSLATION', actions: 'highlightButton' },\n      UNDO: { target: '.UNDO', actions: 'highlightButton' },\n      VECTOR: { target: '.VECTOR', actions: 'highlightButton' },\n      ZOOM_IN: { target: '.ZOOM_IN', actions: 'highlightButton' },\n      ZOOM_OUT: { target: '.ZOOM_OUT', actions: 'highlightButton' },\n    },\n    states: {\n      BISECTOR_BY_POINTS: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur un premier point (autre que le sommet de l'angle).\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[0] = event.element as Point\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage(\"Cliquer sur le sommet de l'angle.\", context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element as Point\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForThirdElement',\n              },\n            },\n          },\n          waitingForThirdElement: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur un troisième point.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[2] = event.element as Point\n                  const [pointOnSide1, origin, pointOnSide2] = context.figure\n                    .selectedElements as Point[]\n                  context.figure.create('BisectorByPoints', {\n                    origin,\n                    pointOnSide1,\n                    pointOnSide2,\n                  })\n                  context.figure.saveState()\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      CIRCLE_CENTER_POINT: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le centre du cercle.', context.figure)\n              context.figure.filter = (e) => e instanceof Point\n              context.figure.currentState = 'POINT_INTERSECTION'\n            },\n            exit: ({ context }) => {\n              if (context.figure) {\n                context.figure.currentState = ''\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('CircleCenterPoint', {\n                      center: context.figure.selectedElements[0] as Point,\n                      point: context.figure.pointer,\n                    })\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForPoint',\n              },\n            },\n          },\n          waitingForPoint: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur un point du cercle.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [center, point] = context.figure.selectedElements as [\n                      Point,\n                      Point,\n                    ]\n                    context.figure.create('CircleCenterPoint', {\n                      center,\n                      point,\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      CIRCLE_RADIUS: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le centre du cercle.', context.figure)\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxRadius(context.figure)\n                    dialog.showModal()\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForRadius',\n              },\n            },\n          },\n          waitingForRadius: {\n            on: {\n              RADIUS: {\n                actions: ({ context, event }) => {\n                  const radius = event.radius\n                  const center = context.figure.selectedElements[0] as Point\n                  const points = testRadiusIsSegment(\n                    event.radius,\n                    context.figure,\n                  )\n                  if (points !== undefined) {\n                    const dynamicRadius = context.figure.create('Distance', {\n                      point1: points[0],\n                      point2: points[1],\n                    })\n                    context.figure.create('CircleCenterDynamicRadius', {\n                      center,\n                      radius: dynamicRadius,\n                    })\n                    context.figure.saveState()\n                  } else if (radius > 0) {\n                    context.figure.create('Circle', { center, radius })\n                    context.figure.saveState()\n                  }\n                },\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      COLOR: {\n        entry: ({ context, event }) => {\n          context.figure.options.color = event.text\n        },\n      },\n      DESCRIPTION: {\n        entry: ({ context }) => {\n          createModalDescription(context.figure)\n        },\n      },\n      DILATE: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) => e instanceof Point\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.selectedElements = []\n            for (const e of context.figure.tmpElements) {\n              e.remove()\n            }\n          }\n        },\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur le centre de l'homothétie.\",\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxK(context.figure)\n                    dialog.showModal()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForCoefficient',\n              },\n            },\n          },\n          waitingForCoefficient: {\n            on: {\n              DILATE_COEF: {\n                actions: ({ context, event }) => {\n                  context.temp.values[0] = event.coefficient\n                },\n                target: 'waitingForElement',\n              },\n            },\n          },\n          waitingForElement: {\n            entry: ({ context }) => {\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n              const center = context.figure.selectedElements[0] as Point\n              const k = context.temp.values[0]\n              context.figure.tmpElements.push(\n                context.figure.pointer.dilate(center, k, {\n                  color: context.figure.options.tmpColor,\n                  isChild: true,\n                }),\n              )\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const center = context.figure.selectedElements[0] as Point\n                  const origin = event.element\n                  const k = context.temp.values[0]\n                  origin.dilate(center, k)\n                  context.figure.saveState()\n                  context.figure.selectedElements[0] = center\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForElement',\n              },\n            },\n          },\n        },\n      },\n      DISC_CENTER_POINT: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le centre du disque.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n              context.figure.currentState = 'POINT_INTERSECTION'\n            },\n            exit: ({ context }) => {\n              if (context.figure) {\n                context.figure.currentState = ''\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('CircleCenterPoint', {\n                      center: context.figure.selectedElements[0] as Point,\n                      point: context.figure.pointer,\n                    })\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForPoint',\n              },\n            },\n          },\n          waitingForPoint: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur un point du disque.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [center, point] = context.figure.selectedElements as [\n                      Point,\n                      Point,\n                    ]\n                    context.figure.create('CircleCenterPoint', {\n                      center,\n                      point,\n                      fillColor: context.figure.options.color,\n                      fillOpacity: context.figure.options.discFillOpacity,\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      DISC_RADIUS: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le centre du disque.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxRadius(context.figure)\n                    dialog.showModal()\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForRadius',\n              },\n            },\n          },\n          waitingForRadius: {\n            on: {\n              RADIUS: {\n                actions: ({ context, event }) => {\n                  const radius = event.radius\n                  const center = context.figure.selectedElements[0] as Point\n                  const points = testRadiusIsSegment(\n                    event.radius,\n                    context.figure,\n                  )\n                  if (points !== undefined) {\n                    const dynamicRadius = context.figure.create('Distance', {\n                      point1: points[0],\n                      point2: points[1],\n                    })\n                    context.figure.create('CircleCenterDynamicRadius', {\n                      center,\n                      radius: dynamicRadius,\n                      fillColor: context.figure.options.color,\n                      fillOpacity: context.figure.options.discFillOpacity,\n                    })\n                    context.figure.saveState()\n                  } else if (radius > 0) {\n                    context.figure.create('Circle', {\n                      center,\n                      radius,\n                      fillColor: context.figure.options.color,\n                      fillOpacity: context.figure.options.discFillOpacity,\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      DOWNLOAD_LATEX_SVG: {\n        entry: ({ context }) => {\n          const result = selectionRectangle(context.figure)\n          context.temp.htmlElement[0] = result.div\n          context.temp.cleanupFunctions = context.temp.cleanupFunctions || []\n          context.temp.cleanupFunctions.push(result.cleanup)\n        },\n        exit: ({ context }) => {\n          if (context.temp.htmlElement[0]) {\n            context.temp.htmlElement[0].remove()\n          }\n          if (context.temp.cleanupFunctions) {\n            for (const cleanup of context.temp.cleanupFunctions) {\n              cleanup()\n            }\n            context.temp.cleanupFunctions = []\n          }\n        },\n        on: {\n          SELECTION_AREA_TO_LATEX: {\n            actions: ({ context, event }) => {\n              const xMin =\n                context.figure.xMin + context.figure.sxTox(event.xMin)\n              const xMax = xMin + context.figure.sxTox(event.width)\n              const yMax =\n                context.figure.yMax + context.figure.syToy(event.yMax)\n              const yMin = yMax + context.figure.syToy(event.height)\n              if (context.temp.htmlElement[0]) {\n                context.temp.htmlElement[0].remove()\n                context.temp.htmlElement[0] = undefined\n              }\n              const latex = context.figure.latex({ xMax, xMin, yMax, yMin })\n              const blob = new Blob([latex], { type: 'text/plain' })\n              const url = window.URL.createObjectURL(blob)\n              const a = document.createElement('a')\n              a.style.display = 'none'\n              a.href = url\n              a.download = 'figure.tex'\n              document.body.appendChild(a)\n              a.click()\n              window.URL.revokeObjectURL(url)\n              document.body.removeChild(a)\n              context.figure.buttons.get('DRAG')?.click()\n            },\n            target: '#apiGeomUI.DRAG',\n          },\n          SELECTION_AREA_TO_SVG: {\n            actions: ({ context, event }) => {\n              const xMin = context.figure.xToSx(\n                context.figure.xMin + context.figure.sxTox(event.xMin),\n              )\n              const yMax = context.figure.yToSy(\n                context.figure.yMax + context.figure.syToy(event.yMax),\n              )\n              if (context.temp.htmlElement[0]) {\n                context.temp.htmlElement[0].remove()\n                context.temp.htmlElement[0] = undefined\n              }\n              const widthInUnits = Math.abs(\n                context.figure.sxTox(event.width) - context.figure.sxTox(0),\n              )\n              const heightInUnits = Math.abs(\n                context.figure.syToy(0) - context.figure.syToy(event.height),\n              )\n              const svg = context.figure.svg.cloneNode(true) as SVGElement\n              svg.setAttribute('width', `${widthInUnits.toFixed(2)}cm`)\n              svg.setAttribute('height', `${heightInUnits.toFixed(2)}cm`)\n              svg.setAttribute(\n                'viewBox',\n                `${xMin} ${yMax} ${event.width as number} ${event.height as number}`,\n              )\n              addTextElementsToSvg(svg, context.figure, {\n                xMin,\n                yMax,\n                width: event.width,\n                height: event.height,\n              })\n\n              const blob = new Blob([svg.outerHTML], { type: 'image/svg+xml' })\n              const url = window.URL.createObjectURL(blob)\n              const a = document.createElement('a')\n              a.style.display = 'none'\n              a.href = url\n              a.download = 'figure.svg'\n              document.body.appendChild(a)\n              a.click()\n              window.URL.revokeObjectURL(url)\n              document.body.removeChild(a)\n              context.figure.buttons.get('DRAG')?.click()\n            },\n            target: '#apiGeomUI.DRAG',\n          },\n        },\n      },\n      DRAG: {\n        entry: ({ context }) => {\n          if (context.figure.elements.size > 1) {\n            userMessage(\n              'Cliquer sur un point pour le déplacer.',\n              context.figure,\n            )\n          } else {\n            userMessage('', context.figure)\n          }\n          context.figure.filter = (e) => e instanceof Point && e.isFree\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.divFigure.style.cursor = 'default'\n            context.figure.inDrag = undefined\n          }\n        },\n        on: {\n          clickLocation: {\n            actions: ({ context, event }) => {\n              context.figure.inDrag = event.element\n              context.figure.divFigure.style.cursor = 'move'\n            },\n            guard: ({ event }) => event.element !== undefined,\n            target: '#apiGeomUI.DRAG',\n          },\n        },\n      },\n      FILL: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) =>\n            e instanceof Polygon || e instanceof Circle || e instanceof Arc\n          context.figure.currentState = 'FILL'\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.currentState = ''\n            for (const e of context.figure.tmpElements) {\n              e.isSelected = false\n            }\n          }\n        },\n        on: {\n          clickLocation: {\n            actions: ({ context, event }) => {\n              const element = event.element\n              if (element !== undefined) {\n                if (element.fillColor === context.figure.options.color) {\n                  element.fillColor = 'none'\n                } else {\n                  element.fillColor = context.figure.options.color\n                }\n                context.figure.saveState()\n              }\n            },\n          },\n        },\n      },\n      GRID: {\n        entry: ({ context }) => {\n          if (context.figure.grid === undefined) {\n            context.figure.grid = context.figure.create('Grid', {\n              color: 'black',\n            }) as Grid\n          } else {\n            if (context.figure.grid.isVisible) {\n              context.figure.grid.isVisible = false\n              context.figure.snapGrid = false\n            } else {\n              context.figure.grid.isVisible = true\n              context.figure.snapGrid = true\n            }\n          }\n          context.figure.saveState()\n        },\n      },\n      HIDE: {\n        entry: ({ context }) => {\n          context.figure.currentState = 'HIDE'\n          userMessage(\n            \"Cliquer sur l'élément à masquer ou à démasquer.\",\n            context.figure,\n          )\n          context.figure.filter = (e) => e.isVisible\n          for (const e of context.figure.elements) {\n            if (e instanceof Element2D && e.isHidden) {\n              e.tempShow()\n            }\n          }\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.currentState = ''\n            for (const e of context.figure.elements) {\n              if (e instanceof Element2D && e.isHidden) {\n                e.hide()\n              }\n            }\n          }\n        },\n        on: {\n          clickLocation: {\n            actions: ({ context, event }) => {\n              if (event.element.isHidden === true) {\n                event.element.show()\n                event.element.isHidden = false\n              } else {\n                event.element.tempShow()\n                event.element.isHidden = true\n              }\n              context.figure.saveState()\n            },\n            guard: ({ event }) => event.element !== undefined,\n            target: '#apiGeomUI.HIDE',\n          },\n        },\n      },\n      INFORMATIONS: {\n        entry: ({ context }) => {\n          userMessage(\"Cliquer sur l'élément\", context.figure)\n          context.figure.filter = (e) => e.isVisible\n        },\n        on: {\n          clickLocation: {\n            actions: ({ event }) => {\n              console.info(event.element)\n            },\n            guard: ({ event }) => event.element !== undefined,\n            target: '#apiGeomUI.INFORMATIONS',\n          },\n        },\n      },\n      INIT: {\n        entry: ({ context }) => {\n          context.figure.userMessage = ''\n        },\n      },\n      LATEX: {\n        entry: ({ context }) => {\n          const latex = context.figure.latex\n          const blob = new Blob([latex()], { type: 'text/plain' })\n          const url = window.URL.createObjectURL(blob)\n          const a = document.createElement('a')\n          a.style.display = 'none'\n          a.href = url\n          a.download = 'figure.tex'\n          document.body.appendChild(a)\n          a.click()\n          window.URL.revokeObjectURL(url)\n          document.body.removeChild(a)\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      LINE: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) => e instanceof Point\n        },\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur un premier point de la droite.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Line', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                    })\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur un deuxième point de la droite.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('Line', { point1, point2 })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      LINE_PARALLEL: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur un point ou une droite.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Segment || e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              if (context.figure.selectedElements[0] instanceof Point) {\n                userMessage('Cliquer sur une droite.', context.figure)\n                context.figure.filter = (e) => e instanceof Segment\n              } else {\n                userMessage('Cliquer sur un point.', context.figure)\n                context.figure.filter = (e) => e instanceof Point\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element\n                  let point: Point\n                  let line: Segment\n                  if (context.figure.selectedElements[0] instanceof Point) {\n                    ;[point, line] = context.figure.selectedElements as [\n                      Point,\n                      Segment,\n                    ]\n                  } else {\n                    ;[line, point] = context.figure.selectedElements as [\n                      Segment,\n                      Point,\n                    ]\n                  }\n                  context.figure.create('LineParallel', { line, point })\n                  context.figure.saveState()\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      LINE_PERPENDICULAR: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur un point ou une droite.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Segment || e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              if (context.figure.selectedElements[0] instanceof Point) {\n                userMessage('Cliquer sur une droite.', context.figure)\n                context.figure.filter = (e) => e instanceof Segment\n              } else {\n                userMessage('Cliquer sur un point.', context.figure)\n                context.figure.filter = (e) => e instanceof Point\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element\n                  let point: Point\n                  let line: Segment\n                  if (context.figure.selectedElements[0] instanceof Point) {\n                    ;[point, line] = context.figure.selectedElements as [\n                      Point,\n                      Segment,\n                    ]\n                  } else {\n                    ;[line, point] = context.figure.selectedElements as [\n                      Segment,\n                      Point,\n                    ]\n                  }\n                  context.figure.create('LinePerpendicular', { line, point })\n                  context.figure.saveState()\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      MARK_BETWEEN_POINTS: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment ou sur un segment.',\n                context.figure,\n              )\n              if (context.figure?.divMarkPalette !== undefined) {\n                context.figure.divMarkPalette.style.display = 'flex'\n              }\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: ({ context, event }) => {\n                    context.figure.selectedElements[0] = event.element\n                  },\n                  guard: ({ event }) =>\n                    event.element !== undefined &&\n                    event.element instanceof Point,\n                  target: 'waitingForSecondElement',\n                },\n                {\n                  actions: ({ context, event }) => {\n                    const segment = event.element as Segment\n                    const point1 = segment.point1\n                    const point2 = segment.point2\n                    context.figure.create('MarkBetweenPoints', {\n                      point1,\n                      point2,\n                    })\n                    context.figure.saveState()\n                  },\n                  guard: ({ event }) =>\n                    event.element !== undefined &&\n                    event.element instanceof Segment,\n                  target: 'waitingForFirstElement',\n                },\n              ],\n            },\n            exit: ({ context }) => {\n              if (context.figure?.divMarkPalette !== undefined) {\n                context.figure.divMarkPalette.style.display = 'none'\n              }\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              if (context.figure?.divMarkPalette !== undefined) {\n                context.figure.divMarkPalette.style.display = 'flex'\n              }\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [point1, point2] = context.figure.selectedElements as [\n                    Point,\n                    Point,\n                  ]\n                  context.figure.create('MarkBetweenPoints', {\n                    point1,\n                    point2,\n                  })\n                  context.figure.saveState()\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      MESURE_SEGMENT: {\n        initial: 'waitingForFirstPoint',\n        states: {\n          waitingForFirstPoint: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le premier point.', context.figure)\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondPoint',\n              },\n            },\n          },\n          waitingForSecondPoint: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le deuxième point.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    const distance = context.figure.create('Distance', {\n                      point1,\n                      point2,\n                      precision: 1,\n                    })\n                    const middle = context.figure.create('Middle', {\n                      point1,\n                      point2,\n                      isVisible: false,\n                    })\n                    context.figure.create('TextDynamicByPoint', {\n                      dynamicNumber: distance,\n                      point: middle,\n                      text: '',\n                      textBefore: '',\n                      textAfter: ' cm',\n                      isVisible: true,\n                      isSelectable: true,\n                      anchor: 'bottomCenter',\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstPoint',\n              },\n            },\n          },\n        },\n      },\n      MESURE_ANGLE: {\n        initial: 'waitingForFirstPoint',\n        states: {\n          waitingForFirstPoint: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur le premier point (pas le sommet de l'angle).\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondPoint',\n              },\n            },\n          },\n          waitingForSecondPoint: {\n            entry: ({ context }) => {\n              userMessage(\"Cliquer sur le sommet de l'angle.\", context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForThirdPoint',\n              },\n            },\n          },\n          waitingForThirdPoint: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le troisième point.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[2] = newPoint\n                    const [point1, point2, point3] = context.figure\n                      .selectedElements as [Point, Point, Point]\n                    const angle = context.figure.create('Angle', {\n                      start: point1,\n                      center: point2,\n                      end: point3,\n                      precision: 0,\n                    })\n                    const bisector = context.figure.create('BisectorByPoints', {\n                      pointOnSide1: point1,\n                      origin: point2,\n                      pointOnSide2: point3,\n                      isVisible: false,\n                    })\n                    const pointForText = context.figure.create(\n                      'PointOnLineAtDistance',\n                      {\n                        line: bisector,\n                        distance: 1,\n                        isVisible: false,\n                        isChild: true,\n                      },\n                    )\n                    context.figure.create('TextDynamicByPoint', {\n                      dynamicNumber: angle,\n                      point: pointForText,\n                      text: '',\n                      textBefore: '',\n                      textAfter: '°',\n                      isVisible: true,\n                      isSelectable: true,\n                      anchor: 'middleCenter',\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstPoint',\n              },\n            },\n          },\n        },\n      },\n      MIDDLE: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment ou sur un segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: ({ context, event }) => {\n                    context.figure.selectedElements[0] = event.element\n                  },\n                  guard: ({ event }) =>\n                    event.element !== undefined &&\n                    event.element instanceof Point,\n                  target: 'waitingForSecondElement',\n                },\n                {\n                  actions: ({ context, event }) => {\n                    const segment = event.element as Segment\n                    const point1 = segment.point1\n                    const point2 = segment.point2\n                    context.figure.create('Middle', { point1, point2 })\n                  },\n                  guard: ({ event }) =>\n                    event.element !== undefined &&\n                    event.element instanceof Segment,\n                  target: 'waitingForFirstElement',\n                },\n              ],\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [point1, point2] = context.figure.selectedElements as [\n                    Point,\n                    Point,\n                  ]\n                  context.figure.create('Middle', { point1, point2 })\n                  context.figure.saveState()\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      MOVE_LABEL: {\n        entry: ({ context }) => {\n          userMessage(\n            'Cliquer sur un point, sur un nom de point ou sur un texte.',\n            context.figure,\n          )\n          context.figure.filter = (e) =>\n            (e instanceof Point && e.elementTextLabel !== undefined) ||\n            e instanceof TextByPoint ||\n            e instanceof TextDynamicByPoint\n        },\n        initial: 'waitingForPoint',\n        states: {\n          waitingForPoint: {\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const element = event.element\n                  if (element instanceof Point) {\n                    context.figure.inDrag = element.elementTextLabel\n                  } else if (element instanceof TextDynamicByPoint) {\n                    context.figure.inDrag = element\n                  } else if (element instanceof TextByPoint) {\n                    context.figure.inDrag = element.point.elementTextLabel\n                  }\n                },\n                target: 'waitingForPoint',\n              },\n            },\n          },\n        },\n      },\n      NAME_POINT: {\n        initial: 'waitingForPoint',\n        states: {\n          waitingForName: {\n            entry: ({ context }) => {\n              const dialog = createDialoxBoxName(context.figure)\n              dialog.showModal()\n            },\n            on: {\n              TEXT_FROM_DIALOG: {\n                actions: ({ context, event }) => {\n                  const point = context.temp.elements[0] as Point\n                  point.label = event.text\n                  context.figure.saveState()\n                },\n                target: 'waitingForPoint',\n              },\n            },\n          },\n          waitingForPoint: {\n            entry: ({ context }) => {\n              context.figure.filter = (e) => e instanceof Point\n              userMessage('Cliquer sur un point à renommer.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                    false,\n                  )\n                  if (newPoint !== undefined) {\n                    context.temp.elements[0] = newPoint\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForName',\n              },\n            },\n          },\n        },\n      },\n      OPEN: {\n        entry: ({ context }) => {\n          const input = document.createElement('input')\n          input.type = 'file'\n          input.accept = '.json'\n          input.onchange = (e: Event) => {\n            const file = (e.target as HTMLInputElement).files?.[0]\n            if (file === undefined) {\n              return\n            }\n            const reader = new FileReader()\n            reader.readAsText(file, 'UTF-8')\n            reader.onload = (readerEvent: ProgressEvent<FileReader>) => {\n              const content =\n                (readerEvent?.target?.result as null | string) ?? ''\n              if (typeof content === 'string' && content !== '') {\n                context.figure.loadJson(JSON.parse(content), true)\n              }\n            }\n          }\n          input.click()\n          // context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      OPTIONS: {\n        entry: ({ context }) => {\n          createDialogBoxOptions(context.figure)\n        },\n      },\n      PAUSE: {\n        entry: ({ context }) => {\n          userMessage('', context.figure)\n          if (context.intervalId !== undefined) {\n            clearInterval(context.intervalId)\n          }\n        },\n      },\n      PERPENDICULAR_BISECTOR: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[0] = event.element\n                  context.figure.tempCreate('PerpendicularBisectorByPoints', {\n                    point1: context.figure.selectedElements[0] as Point,\n                    point2: context.figure.pointer,\n                  })\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [point1, point2] = context.figure.selectedElements as [\n                    Point,\n                    Point,\n                  ]\n                  context.figure.create('PerpendicularBisectorByPoints', {\n                    point1,\n                    point2,\n                  })\n                  context.figure.saveState()\n                },\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      PLAY: {\n        entry: ({ context }) => {\n          userMessage('', context.figure)\n          clearInterval(context.intervalId)\n          context.figure.redo()\n          context.intervalId = setInterval(() => {\n            if (context.figure.stackRedo.length === 0) {\n              context.figure.buttons.get('PAUSE')?.click()\n              clearInterval(context.intervalId)\n              return\n            }\n            context.figure.redo()\n          }, context.figure.options.animationStepInterval)\n        },\n      },\n      PLAY_SKIP_BACK: {\n        entry: ({ context }) => {\n          userMessage('', context.figure)\n          context.figure.undo()\n        },\n      },\n      PLAY_SKIP_FORWARD: {\n        entry: ({ context }) => {\n          userMessage('', context.figure)\n          context.figure.redo()\n        },\n      },\n      POINT: {\n        entry: ({ context }) => {\n          userMessage('Cliquer pour créer un point.', context.figure)\n          context.figure.filter = (e) => e instanceof Point\n          context.figure.currentState = 'POINT'\n        },\n        initial: 'waitingForLocation',\n        states: {\n          waitingForLocation: {\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  if (context.figure.hoverPoints.size > 0) {\n                    const point = [...context.figure.hoverPoints][0] as Point\n                    context.figure.inDrag = point\n                    context.figure.divFigure.style.cursor = 'move'\n                  } else {\n                    const { x, y } = event\n                    const limitNumberOfPoint =\n                      context.figure.options.limitNumberOfElement?.Point ??\n                      Number.POSITIVE_INFINITY\n                    const noLimit =\n                      limitNumberOfPoint === undefined ||\n                      !Number.isFinite(limitNumberOfPoint)\n                    const limitReached =\n                      [...context.figure.elements.values()].filter(\n                        (e) => e instanceof Point,\n                      ).length > limitNumberOfPoint\n                    const samePosition =\n                      !context.figure.options.gridWithTwoPointsOnSamePosition &&\n                      [...context.figure.elements.values()].filter(\n                        (e) =>\n                          e instanceof Point &&\n                          e.isSelectable &&\n                          e.isVisible &&\n                          e.x ===\n                            Math.round(x / context.figure.dx) *\n                              context.figure.dx &&\n                          e.y ===\n                            Math.round(y / context.figure.dy) *\n                              context.figure.dy,\n                      ).length > 0\n                    if (!samePosition && (noLimit || !limitReached)) {\n                      const label = getAutomaticLabelOrUndefined(context.figure)\n                      context.figure.create('Point', { x, y, label })\n                    }\n                  }\n                  context.figure.saveState()\n                },\n                target: 'waitingForLocation',\n              },\n            },\n          },\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.currentState = ''\n          }\n        },\n      },\n      POINT_INTERSECTION: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) =>\n            e instanceof Segment || e instanceof Circle\n          context.figure.currentState = 'POINT_INTERSECTION'\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.selectedElements = []\n            for (const e of context.figure.tmpElements) {\n              e.remove()\n            }\n            context.figure.currentState = ''\n          }\n        },\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur une droite, une demi-droite, un segment ou un cercle.',\n                context.figure,\n              )\n            },\n            exit: ({ context }) => {\n              if (context.figure.selectedElements[0]?.isSelected)\n                context.figure.selectedElements[0].isSelected = false\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: ({ context, event }) => {\n                    context.figure.selectedElements[0] = event.element\n                    event.element.isSelected = true\n                  },\n                  guard: ({ event }) => event.element !== undefined,\n                  target: 'waitingForSecondElement',\n                },\n                {\n                  actions: ({ context, event }) => {\n                    context.figure.selectedElements[0] =\n                      event.possibleElements[0]\n                    context.figure.selectedElements[1] =\n                      event.possibleElements[1]\n                    const [element1, element2] = context.figure.selectedElements\n                    const label = getAutomaticLabelOrUndefined(context.figure)\n                    if (element1 instanceof Segment) {\n                      if (element2 instanceof Segment) {\n                        context.figure.create('PointIntersectionLL', {\n                          line1: element1,\n                          line2: element2,\n                          label,\n                        })\n                      }\n                      if (element2 instanceof Circle) {\n                        context.figure.create('PointsIntersectionLC', {\n                          circle: element2,\n                          line: element1,\n                        })\n                      }\n                      context.figure.saveState()\n                    } else if (element1 instanceof Circle) {\n                      if (element2 instanceof Segment) {\n                        context.figure.create('PointsIntersectionLC', {\n                          circle: element1,\n                          line: element2,\n                        })\n                      }\n                      if (element2 instanceof Circle) {\n                        context.figure.create('PointsIntersectionCC', {\n                          circle1: element1,\n                          circle2: element2,\n                        })\n                      }\n                      context.figure.saveState()\n                    }\n                  },\n                  guard: ({ event }) =>\n                    event.possibleElements &&\n                    event.possibleElements.length === 2,\n                  target: 'waitingForFirstElement',\n                },\n              ],\n            },\n          },\n          waitingForSecondElement: {\n            exit: ({ context }) => {\n              if (context.figure) {\n                for (const e of context.figure.selectedElements) {\n                  e.isSelected = false\n                }\n                for (const e of context.figure.tmpElements) {\n                  e.isSelected = false\n                }\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [element1, element2] = context.figure.selectedElements\n                  if (element1 instanceof Segment) {\n                    if (element2 instanceof Segment) {\n                      context.figure.create('PointIntersectionLL', {\n                        line1: element1,\n                        line2: element2,\n                      })\n                    }\n                    if (element2 instanceof Circle) {\n                      context.figure.create('PointsIntersectionLC', {\n                        circle: element2,\n                        line: element1,\n                      })\n                    }\n                    context.figure.saveState()\n                  } else if (element1 instanceof Circle) {\n                    if (element2 instanceof Segment) {\n                      context.figure.create('PointsIntersectionLC', {\n                        circle: element1,\n                        line: element2,\n                      })\n                    }\n                    if (element2 instanceof Circle) {\n                      context.figure.create('PointsIntersectionCC', {\n                        circle1: element1,\n                        circle2: element2,\n                      })\n                    }\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      POINT_ON: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) =>\n            e instanceof Segment || e instanceof Circle || e instanceof Graph\n          userMessage(\n            'Cliquer sur un segment, un cercle ou une courbe.',\n            context.figure,\n          )\n        },\n        on: {\n          clickLocation: {\n            actions: ({ context, event }) => {\n              context.figure.selectedElements[0] = event.element\n              if (event.element instanceof Segment) {\n                const [point1, point2] = [\n                  event.element.point1,\n                  event.element.point2,\n                ]\n                const k =\n                  ((event.x - point1.x) * (point2.x - point1.x) +\n                    (event.y - point1.y) * (point2.y - point1.y)) /\n                  distance(point1, point2) ** 2\n                const label = getAutomaticLabelOrUndefined(context.figure)\n                context.figure.create('PointOnLine', {\n                  k,\n                  line: event.element,\n                  label,\n                })\n                context.figure.saveState()\n              } else if (event.element instanceof Circle) {\n                const angleWithHorizontal = Math.atan2(\n                  event.y - event.element.center.y,\n                  event.x - event.element.center.x,\n                )\n                context.figure.create('PointOnCircle', {\n                  angleWithHorizontal,\n                  circle: event.element,\n                })\n                context.figure.saveState()\n              } else if (event.element instanceof Graph) {\n                const x = event.x\n                context.figure.create('PointOnGraph', {\n                  x,\n                  graph: event.element,\n                })\n                context.figure.saveState()\n              }\n            },\n            target: '#apiGeomUI.POINT_ON',\n          },\n        },\n      },\n      POLYGON: {\n        id: 'polygon',\n        initial: 'init',\n        on: {\n          STOPPOLYGON: '#polygon.STOPPOLYGON',\n        },\n        states: {\n          init: {\n            always: 'waitingElement',\n            entry: ({ context }) => {\n              userMessage('Cliquer sur un sommet du polygone.', context.figure)\n              context.figure.filter = (e) => e instanceof Point\n            },\n          },\n          STOPPOLYGON: {\n            always: {\n              target: '#polygon.waitingElement',\n            },\n            entry: ({ context }) => {\n              const polygon = context.figure.create('Polygon', {\n                points: context.figure.selectedElements as Point[],\n                fillColor: context.figure.options.fillColor,\n              })\n              for (const point of polygon.points) {\n                point.color = context.figure.options.colorPointPolygon\n              }\n              userMessage(\n                'Cliquer sur un sommet pour créer un autre polygone.',\n                context.figure,\n              )\n              context.figure.saveState()\n            },\n          },\n          waitingElement: {\n            exit: ({ context }) => {\n              if (context.figure?.tmpElements) {\n                for (const e of context.figure.tmpElements) {\n                  e.remove()\n                }\n              }\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: ({ context, event }) => {\n                    if (context.figure.selectedElements.length > 0) {\n                      userMessage(\n                        'Cliquer sur un nouveau sommet ou sur le premier sommet pour terminer.',\n                        context.figure,\n                      )\n                    } else {\n                      userMessage(\n                        'Cliquer sur un sommet du polygone.',\n                        context.figure,\n                      )\n                    }\n                    const newPoint = getExistingPointOrCreatedPoint(\n                      context,\n                      event,\n                    )\n                    if (newPoint !== undefined) {\n                      newPoint.shape = context.figure.options.tmpShape\n                      newPoint.color = context.figure.options.tmpColor\n                      context.figure.selectedElements.push(newPoint)\n                      const points = [\n                        ...context.figure.selectedElements,\n                        context.figure.pointer,\n                      ] as Point[]\n                      // Supprimer l'ancien polygone temporaire s'il existe\n                      if (context.figure?.tmpElements) {\n                        for (const e of context.figure.tmpElements) {\n                          if (e instanceof Polygon) {\n                            e.remove()\n                          }\n                        }\n                        context.figure.tmpElements =\n                          context.figure.tmpElements.filter(\n                            (e) => !(e instanceof Polygon),\n                          )\n                      }\n                      // Créer un nouveau polygone temporaire avec les points mis à jour\n                      if (points.length >= 2) {\n                        context.figure.tempCreate('Polygon', {\n                          isBuiltWithSegments: false,\n                          isChild: true,\n                          color: context.figure.options.tmpColor,\n                          fillColor: context.figure.options.tmpFillColor,\n                          points,\n                        })\n                      }\n                    }\n                  },\n                  guard: ({ context, event }) => {\n                    if (context.figure.selectedElements.length < 2) {\n                      return getExistingPointOrCreatetPoindWasASuccess(event)\n                    }\n                    const last = event.element as Point\n                    const first = context.figure.selectedElements[0] as Point\n                    const isClickOnFirstPoint = last?.id === first?.id\n                    return (\n                      getExistingPointOrCreatetPoindWasASuccess(event) &&\n                      !isClickOnFirstPoint\n                    )\n                  },\n                },\n                {\n                  guard: ({ context, event }) => {\n                    if (context.figure.selectedElements.length > 1) {\n                      const last = event.element as Point\n                      const first = context.figure.selectedElements[0] as Point\n                      return last?.id === first?.id\n                    }\n                    return false\n                  },\n                  target: '#polygon.STOPPOLYGON',\n                },\n              ],\n            },\n          },\n        },\n      },\n      RAY: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur l'origine de la demi-droite.\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Ray', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                    })\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage('Cliquer un point de la demi-droite.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('Ray', { point1, point2 })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      REDO: {\n        entry: ({ context }) => {\n          context.figure.redo()\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      REFLECTION: {\n        entry: ({ context }) => {\n          userMessage('Cliquer sur le centre de la symétrie.', context.figure)\n          context.figure.filter = (e) => e instanceof Point\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.selectedElements = []\n            for (const e of context.figure.tmpElements) {\n              e.remove()\n            }\n          }\n        },\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForElement',\n              },\n            },\n          },\n          waitingForElement: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n              const center = context.figure.selectedElements[0] as Point\n              if (center !== undefined) {\n                context.figure.selectedElements[0] = center\n                context.figure.tmpElements.push(\n                  context.figure.pointer.reflect(center, {\n                    color: context.figure.options.tmpColor,\n                    isChild: true,\n                    isSelectable: false,\n                  }),\n                )\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const origin = event.element as\n                    | Circle\n                    | Point\n                    | Polygon\n                    | Segment\n                  const center = context.figure.selectedElements[0] as Point\n                  if (origin !== undefined) {\n                    origin.reflect(center)\n                    context.figure.saveState()\n                    // Le saveState initialise selectedElements à []\n                    context.figure.selectedElements[0] = center\n                  }\n                },\n                target: 'waitingForElement',\n              },\n            },\n          },\n        },\n      },\n      REFLECTION_OVER_LINE: {\n        entry: ({ context }) => {\n          userMessage(\"Cliquer sur l'axe de la symétrie.\", context.figure)\n          context.figure.filter = (e) => e instanceof Segment\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.selectedElements = []\n            for (const e of context.figure.tmpElements) {\n              e.remove()\n            }\n          }\n        },\n        initial: 'waitingForAxis',\n        states: {\n          waitingForAxis: {\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n          waitingForOrigin: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n              const line = context.figure.selectedElements[0] as Segment\n              if (line !== undefined) {\n                context.figure.selectedElements[0] = line\n                context.figure.tmpElements.push(\n                  context.figure.pointer.reflectOverLine(line, {\n                    color: context.figure.options.tmpColor,\n                    isChild: true,\n                    isSelectable: false,\n                  }),\n                )\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const origin = event.element as\n                    | Circle\n                    | Point\n                    | Polygon\n                    | Segment\n                  const line = context.figure.selectedElements[0] as Segment\n                  if (origin !== undefined) {\n                    origin.reflectOverLine(line)\n                    context.figure.saveState()\n                    // Le saveState initialise selectedElements à []\n                    context.figure.selectedElements[0] = line\n                  }\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n        },\n      },\n      REMOVE: {\n        entry: ({ context }) => {\n          userMessage(\"Cliquer sur l'élément à supprimer.\", context.figure)\n          context.figure.filter = (e) => e.isVisible && e.isDeletable\n        },\n        on: {\n          clickLocation: {\n            actions: ({ context, event }) => {\n              event.element.remove()\n              context.figure.saveState()\n            },\n            guard: ({ event }) => event.element !== undefined,\n            target: '#apiGeomUI.REMOVE',\n          },\n        },\n      },\n      RESTART: {\n        entry: ({ context }) => {\n          userMessage('', context.figure)\n          context.figure.restart()\n        },\n      },\n      ROTATE: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) =>\n            e instanceof Point || e instanceof Segment\n        },\n        exit: ({ context }) => {\n          if (context.figure) {\n            context.figure.selectedElements = []\n            for (const e of context.figure.tmpElements) {\n              e.remove()\n            }\n          }\n        },\n        initial: 'waitingForCenter',\n        states: {\n          waitingForAngle: {\n            on: {\n              ANGLE: {\n                actions: ({ context, event }) => {\n                  const angle = event.angle\n                  context.temp.values[0] = angle\n                },\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n          waitingForCenter: {\n            entry: ({ context }) => {\n              userMessage('Cliquer sur le centre de rotation.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxAngle(context.figure)\n                    dialog.showModal()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForAngle',\n              },\n            },\n          },\n          waitingForOrigin: {\n            entry: ({ context }) => {\n              const center = context.figure.selectedElements[0] as Point\n              const angle = context.temp.values[0]\n              context.figure.tmpElements.push(\n                context.figure.pointer.rotate(center, angle, {\n                  color: context.figure.options.tmpColor,\n                  isChild: true,\n                  isSelectable: false,\n                }),\n              )\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const center = context.figure.selectedElements[0] as Point\n                  const origin = event.element as\n                    | Circle\n                    | Point\n                    | Polygon\n                    | Segment\n                  const angle = context.temp.values[0]\n                  origin.rotate(center, angle)\n                  context.figure.saveState()\n                  context.figure.selectedElements[0] = center\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n        },\n      },\n      SAVE: {\n        entry: ({ context }) => {\n          const jsonContent = context.figure.getJsonWithHistory()\n          const blob = new Blob([jsonContent], { type: 'text/plain' })\n          const url = window.URL.createObjectURL(blob)\n\n          const a = document.createElement('a')\n          a.style.display = 'none'\n          a.href = url\n          a.download = 'figure.json'\n          document.body.appendChild(a)\n          a.click()\n          window.URL.revokeObjectURL(url)\n          document.body.removeChild(a)\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      SEGMENT: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Segment', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                    })\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('Segment', { point1, point2 })\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      SET_OPTIONS: {\n        entry: ({ context }) => {\n          context.figure.filter = (e) => e instanceof Element2D\n          context.figure.currentState = 'SET_OPTIONS'\n        },\n        on: {\n          clickLocation: {\n            actions: ({ context, event }) => {\n              const element = event.element\n              if (element !== undefined) {\n                element.color = context.figure.options.color\n                element.thickness = context.figure.options.thickness\n                if ('isDashed' in element)\n                  element.isDashed = context.figure.options.isDashed\n                if (context.figure.options.fillColorAndBorderColorAreSame) {\n                  if ('fillColor' in element && element.fillColor !== 'none')\n                    element.fillColor = context.figure.options.color\n                  // if ('fillOpacity' in element) element.fillOpacity = context.figure.options.fillOpacity\n                }\n              }\n            },\n          },\n        },\n      },\n      SHAKE: {\n        always: '#apiGeomUI.DRAG',\n        entry: async ({ context }) => {\n          await context.figure.shake()\n          context.figure.saveState()\n        },\n      },\n      TRANSLATION: {\n        exit: ({ context }) => {\n          if (context.figure) {\n            for (const e of context.figure.tmpElements) {\n              e.isSelectable = false\n            }\n          }\n        },\n        initial: 'waitingForFistPoint',\n        states: {\n          waitingForFistPoint: {\n            entry: ({ context }) => {\n              context.figure.filter = (e) => e instanceof Point\n              userMessage(\n                'Cliquer sur le premier point qui définit de la translation.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const point1 = event.element as Point\n                  context.temp.elements[0] = point1\n                  point1.isSelected = true\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForSecondPoint',\n              },\n            },\n          },\n          waitingForOrigin: {\n            entry: ({ context }) => {\n              userMessage(\"Cliquer sur l'objet à transformer.\", context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const [point1, point2] = context.temp.elements as [\n                    Point,\n                    Point,\n                  ]\n                  const origin = event.element\n                  origin.translate(point1, point2)\n                  context.figure.saveState()\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n          waitingForSecondPoint: {\n            entry: ({ context }) => {\n              userMessage(\n                'Cliquer sur le deuxième point qui définit de la translation.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const point2 = event.element as Point\n                  context.temp.elements[1] = point2\n                  point2.isSelected = true\n                },\n                guard: ({ event }) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n        },\n      },\n      UNDO: {\n        entry: ({ context }) => {\n          context.figure.undo()\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      VECTOR: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur l'origine de la représentation du vecteur.\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Segment', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                      shape: '->',\n                    })\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: ({ context }) => {\n              userMessage(\n                \"Cliquer sur l'extrémité de la représentation du vecteur.\",\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: ({ context, event }) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('VectorByPoints', {\n                      point1,\n                      point2,\n                    })\n                    point1.color = ''\n                    point2.color = ''\n                    context.figure.saveState()\n                  }\n                },\n                guard: ({ event }) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      ZOOM_IN: {\n        initial: 'zoom_in',\n        states: {\n          zoom_in: {\n            entry: ({ context }) => {\n              context.figure.zoomLevel *= defaultZoomInFactor\n              context.figure.zoom(context.figure.zoomLevel)\n            },\n          },\n        },\n      },\n      ZOOM_OUT: {\n        initial: 'zoom_out',\n        states: {\n          zoom_out: {\n            entry: ({ context }) => {\n              context.figure.zoomLevel *= defaultZoomOutFactor\n              context.figure.zoom(context.figure.zoomLevel)\n            },\n          },\n        },\n      },\n    },\n  },\n  {\n    actions: {\n      eraseTempElements: ({ context }) => {\n        for (const e of context.figure.tmpElements) {\n          e.remove()\n        }\n      },\n      highlightButton: ({ context, event }) => {\n        const button = context.figure.buttons.get(event.type)\n        if (button !== undefined) {\n          button.style.backgroundColor = orangeMathaleaLight\n        }\n        context.figure.buttons.forEach((value, key) => {\n          if (key !== event.type) {\n            value.style.backgroundColor = 'white'\n          }\n        })\n      },\n      eraseUserMessage: ({ context }) => {\n        userMessage('', context.figure)\n      },\n    },\n  },\n)\n\nfunction getExistingPointOrCreatedPoint(\n  context: MyContext,\n  event: MyEvent,\n  labelAutomatic?: boolean,\n): Point | undefined {\n  if (event.element instanceof Point) {\n    return event.element\n  }\n  const [x, y] = [event.x as number, event.y as number]\n  if (\n    event.possibleElements !== undefined &&\n    event.possibleElements.length === 2\n  ) {\n    if (\n      event.possibleElements[0] instanceof Segment &&\n      event.possibleElements[1] instanceof Segment\n    ) {\n      return context.figure.create('PointIntersectionLL', {\n        line1: event.possibleElements[0],\n        line2: event.possibleElements[1],\n      })\n    }\n  }\n  if (event.element instanceof Segment) {\n    const [point1, point2] = [event.element.point1, event.element.point2]\n    const k =\n      ((x - point1.x) * (point2.x - point1.x) +\n        (y - point1.y) * (point2.y - point1.y)) /\n      distance(point1, point2) ** 2\n    return context.figure.create('PointOnLine', { k, line: event.element })\n  }\n  if (event.waitingWithModal === true) return undefined\n  const label = getAutomaticLabelOrUndefined(context.figure)\n  if (labelAutomatic) {\n    return context.figure.create('Point', { x, y, label })\n  }\n  return context.figure.create('Point', { x, y })\n}\n\nfunction getExistingPointOrCreatetPoindWasASuccess(event: MyEvent): boolean {\n  return event.waitingWithModal === false\n}\n\nfunction userMessage(text: string, figure: Figure): void {\n  if (!figure.options.automaticUserMessage) return\n  const div = figure.divUserMessage\n  if (div != null) div.innerHTML = figure.isDynamic ? text : ''\n}\n\nfunction testRadiusIsSegment(\n  radius: string,\n  figure: Figure,\n): [Point, Point] | undefined {\n  if (radius === undefined || typeof radius !== 'string') return\n  const [label1, label2] = radius.split('')\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type?.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  if (matchPoints1.length !== 1 || matchPoints2.length !== 1) return\n  return [matchPoints1[0], matchPoints2[0]]\n}\n\nfunction getAutomaticLabelOrUndefined(figure: Figure): string | undefined {\n  let label: string | undefined\n  if (figure.options.labelAutomaticBeginsWith !== undefined) {\n    let indiceCurrentLetter =\n      figure.options.labelAutomaticBeginsWith.charCodeAt(0)\n    const indiceLetterZ = 90\n    label = figure.options.labelAutomaticBeginsWith\n    const isPrime = label.endsWith(\"'\")\n    if (isPrime) {\n      label = label.slice(0, -1)\n    }\n    while (\n      [...figure.elements.values()].some((e) => {\n        if (!('label' in e)) return false\n        return e.label === label + (isPrime ? \"'\" : '')\n      })\n    ) {\n      indiceCurrentLetter++\n      if (indiceCurrentLetter > indiceLetterZ) {\n        indiceCurrentLetter = 65\n      }\n      label = String.fromCharCode(indiceCurrentLetter)\n    }\n    label += isPrime ? \"'\" : ''\n  }\n  return label\n}\n\nexport default ui\n","import { createActor } from 'xstate'\n\nimport Figure from './Figure'\nimport ui from './uiMachine'\n\nclass SuperFigure extends Figure {\n  constructor({\n    border = false,\n    dx = 1,\n    dy = 1,\n    height = 400,\n    isDynamic = true,\n    pixelsPerUnit = 30,\n    scale = 1,\n    snapGrid = false,\n    width = 400,\n    xMin = -10,\n    xScale = 1,\n    yMin = -6,\n    yScale = 1,\n  }: {\n    border?: boolean\n    dx?: number\n    dy?: number\n    height?: number\n    isDynamic?: boolean\n    pixelsPerUnit?: number\n    scale?: number\n    snapGrid?: boolean\n    width?: number\n    xMin?: number\n    xScale?: number\n    yMin?: number\n    yScale?: number\n  } = {}) {\n    super({\n      border,\n      dx,\n      dy,\n      height,\n      isDynamic,\n      pixelsPerUnit,\n      scale,\n      snapGrid,\n      width,\n      xMin,\n      xScale,\n      yMin,\n      yScale,\n    })\n    this.ui = createActor(ui, {\n      input: {\n        figure: this,\n        temp: { elements: [], htmlElement: [], values: [] },\n      },\n    }).start()\n  }\n}\n\nexport default SuperFigure\n","export default \"data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m223.57%2081.81-41.38-41.38a22%2022%200%200%200-31.12%200L32.43%20159.07a22%2022%200%200%200%200%2031.11l30.07%2030.06a6%206%200%200%200%204.24%201.76H216a6%206%200%200%200%200-12h-89.51l97.08-97.08a22%2022%200%200%200%200-31.11ZM109.51%20210H69.22l-28.3-28.3a10%2010%200%200%201%200-14.15L96%20112.48%20151.52%20168Zm105.57-105.56L160%20159.51%20104.48%20104l55.08-55.07a10%2010%200%200%201%2014.14%200l41.38%2041.37a10%2010%200%200%201%200%2014.14Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M174%20128a6%206%200%200%201-6%206H88a6%206%200%200%201%200-12h80a6%206%200%200%201%206%206Zm56%200A102%20102%200%201%201%20128%2026a102.12%20102.12%200%200%201%20102%20102Zm-12%200a90%2090%200%201%200-90%2090%2090.1%2090.1%200%200%200%2090-90Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M128%2026a102%20102%200%201%200%20102%20102A102.12%20102.12%200%200%200%20128%2026Zm0%20192a90%2090%200%201%201%2090-90%2090.1%2090.1%200%200%201-90%2090Zm46-90a6%206%200%200%201-6%206h-34v34a6%206%200%200%201-12%200v-34H88a6%206%200%200%201%200-12h34V88a6%206%200%200%201%2012%200v34h34a6%206%200%200%201%206%206Z'/%3e%3c/svg%3e\"","import type Element2D from '../elements/Element2D'\nimport type Circle from '../elements/lines/Circle'\nimport type Line from '../elements/lines/Line'\nimport type Ray from '../elements/lines/Ray'\nimport type Segment from '../elements/lines/Segment'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\ninterface PointElement {\n  label: string\n  type: 'Point'\n}\ninterface LineElement {\n  point1: string\n  point2: string\n  type: 'Line' | 'Ray' | 'Segment'\n}\ninterface CircleElement {\n  center: string\n  radius: number\n  type: 'Circle'\n}\ninterface CircleCenterPointElement {\n  center: string\n  radius: number\n  type: 'CircleCenterPoint'\n}\n\ntype Element =\n  | CircleCenterPointElement\n  | CircleElement\n  | LineElement\n  | PointElement\ntype CheckElementExistResult =\n  | { isValid: boolean; result: Circle[]; type: 'Circle' }\n  | { isValid: boolean; result: Circle[]; type: 'CircleCenterPoint' }\n  | { isValid: boolean; result: Line[]; type: 'Line' }\n  | { isValid: boolean; result: Point[]; type: 'Point' }\n  | { isValid: boolean; result: Ray[]; type: 'Ray' }\n  | { isValid: boolean; result: Segment[]; type: 'Segment' }\n  | { isValid: false; result: []; type: '' }\n\nexport default function checkElementExist(\n  element: Element,\n  figure: Figure,\n): CheckElementExistResult {\n  const elements = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer',\n  ) as Element2D[]\n  let filteredElements = elements.filter((e) => e.type === element.type) as\n    | Circle[]\n    | Line[]\n    | Point[]\n    | Ray[]\n    | Segment[]\n  switch (element.type) {\n    case 'Point':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Point',\n      ) as Point[]\n      filteredElements = filteredElements.filter(\n        (e) => e.label === element.label,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Line':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Line',\n      ) as Line[]\n      filteredElements = filteredElements.filter(\n        (e) =>\n          (e.point1.label === element.point1 &&\n            e.point2.label === element.point2) ||\n          (e.point1.label === element.point2 &&\n            e.point2.label === element.point1),\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Segment':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Segment',\n      ) as Line[]\n      filteredElements = filteredElements.filter(\n        (e) =>\n          (e.point1.label === element.point1 &&\n            e.point2.label === element.point2) ||\n          (e.point1.label === element.point2 &&\n            e.point2.label === element.point1),\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Ray':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Ray',\n      ) as Line[]\n      filteredElements = filteredElements.filter(\n        (e) =>\n          e.point1.label === element.point1 &&\n          e.point2.label === element.point2,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Circle':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Circle',\n      ) as Circle[]\n      filteredElements = filteredElements.filter(\n        (e) => e.center.label === element.center && e.radius === element.radius,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'CircleCenterPoint':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'CircleCenterPoint',\n      ) as Circle[]\n      filteredElements = filteredElements.filter(\n        (e) => e.center.label === element.center && e.radius === element.radius,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    default:\n      filteredElements = []\n  }\n  return { isValid: false, result: [], type: '' }\n}\n"],"names":["addColorPalette","colors","figure","div","color","button","translateColor","showSelectedColor","_a","buttons","element","colorMap","dashed","noDashed","addDashedChoice","images","choice","img","showSelectedStyle","applySelectedStyle","noDashedImg","dashedImg","isDashed","i","loadJson","json","eraseHistory","options","key","value","center","start","dynamicAngle","radius","startAngle","endAngle","origin","pointOnSide1","pointOnSide2","point","indicesSectorsInColor","point1","point2","line","circle","vector","indicesRectanglesInColor","directionPoint","segment","factor","angle","line1","line2","circle1","circle2","graph","polyline","points","idPoint","dynamicNumber","history","defaultDistanceClick","defaultHistorySize","displayDigits","defaultMaxSlope","defaultMinSlope","defaultDeltaXModal","defaultButtonsWidth","defaultFooterHeight","defaultMinWidth","defaultMinHeight","defaultDivUserMessageHeight","defaultDivUserMessageFontSize","defaultDragAllDelta","defaultZoomInFactor","defaultZoomOutFactor","marks","orangeMathalea","orangeMathaleaLight","defaultOptions","defaultTools","Coords","x","y","angleWithHorizontalInDegres","A","B","intersectionCCCoord","n","O1","O2","r0","r1","x0","x1","y0","y1","dx","dy","d","a","x2","y2","h","rx","ry","xi","xiPrime","yi","yiPrime","intersectionLLCoord","da","db","dc","fa","fb","fc","isIntersectionExisting","error","distance","equationLine","b","c","intersectionLCCoord","D","C","O","r","xO","yO","Delta","delta","orthogonalProjectionCoord","k","rotationCoord","homothetieCoord","similitudeCoord","angleRadian","reflectOverLineCoord","translateCoords","angleOriented","v","u","OA","OB","scalaire","labelCoords","midX","midY","perpX","perpY","length","normPerpX","normPerpY","offsetX","offsetY","parallelCoords","round","precision","displayNumber","syncShake","repeat","time","timePeranimation","nearX","newX","nearY","newY","freePoints","e","p","_","checkAngle","label1","label2","label3","matchPoints1","matchPoints2","matchPoints3","isValid","point3","calculAngle","checkCircle","labelCenter","allCircles","circlesWithGoodLabelCenter","goodCircle","goodCircleWithGoodLabelCenter","hexToTikzRgb","hex","hexWithoutHashtag","bigint","g","rgbaToTikzRgb","rgba","rgbaValues","colorLatex","OBSERVER_FLAG","ENV_FLAG","isTruthyFlag","normalized","isObserverLifecycleDebugEnabled","globalScope","envValue","_b","debugObserverLifecycle","stage","details","payload","Element2D","id","isChild","isDeletable","isSelectable","isVisible","opacity","thickness","cpt","fixedColor","__","_c","_d","_e","observersSnapshot","observer","parent","parentsSnapshot","changeThickness","previousLength","isHover","isSelected","checkCoords","checkOnlyAbscissa","label","matchPoints","message","checkDistance","shake","calculDistance","checkLineFromLabels","nameLine","lines","lines1","lines2","nomLigne1","checkLine","aa","bb","cc","a2","b2","c2","areCoincident","a1","b1","c1","slope1","slope2","intercept1","intercept2","checkParallel","matchPointsA","matchPointsB","matchPointsC","matchPointsD","pointA","pointB","pointC","pointD","Segment","borderSize","shape","newPoint1","newPoint2","type","newSegment","pointerCoords","distanceToP1","distanceToP2","segmentLength","projection","closestX","closestY","l","x1Svg","x2Svg","y1Svg","y2Svg","axSvg","aySvg","allAreNumbers","bxSvg","bySvg","result","_f","_g","_h","_i","_j","_k","allOptions","point1Name","point2Name","numbers","number","checkPerpendicularBisector","distAM","distBM","distAN","distBN","checkPoint","areNumbersOrdered","isIncreasing","isDecreasing","checkPointBetween2Points","labelPt","labelPt1","labelPt2","getLargeSweep","large","sweep","normalizeAngle","polarToCartesian","angleInDegrees","angleInRadians","Grid","axeX","axeY","grid","labelX","labelY","stepX","stepY","subGrid","subGridDivisions","xMax","xMin","yMax","yMin","strokeWidthGrid","thickThickness","thickHeight","repereOij","defs","marker","path","svgAxeX","svgLine","svgAxeY","svgGrid","svgSubGrid","Point","colorLabel","isFree","labelIsVisible","labelDxInPixels","labelDyInPixels","sizeInPixels","x3Svg","x4Svg","y3Svg","y4Svg","xSvg","ySvg","rSvg","_l","M","dilated","pointerX","pointerY","arc","distanceToCenter","angleStart","angleEnd","polygon","reflected","rotated","translated","size","MAX_DISTANCE","ele","inFigure","inGrid","PointIntersectionLL","coords","line1Name","line2Name","checkPointOnIntersectionLL","nameLine1","nameLine2","nomLigne2","Line","projectionCoords","getCoordsOut","pente","xOutLeft","yOutLeft","xOutRight","yOutRight","Ray","rayDirection","rayLength","normalizedRayDirection","getRayCoordsOut","x1Screen","y1Screen","x2Screen","y2Screen","parentFigure","PointOnLine","isPositive","ray","o","newX1","newY1","newX2","newY2","checkPointOnLine","nomLigne","checkPolygon","acceptSegments","polygons","segments","eq","allEdges","p1","p2","s","samePolygone","sameRotation","src","tgt","offset","ok","checkPolygonByLabels","labels","index","reveseLabels","indexReverse","checkRayFromLabels","nameRay","rays","ray1","ray2","nomRay1","checkRay","directionRay","directionCheck","checkSameDistance","checkSegmentFromLabels","nameSegment","segment1","segment2","nomSegment1","checkSegment","segmentsCoincident","checkVector","labelOrigin","labelPoint2","xOrigin","yOrigin","matchVectors","verifOnlyLabelOrigin","matchVectors2","verifOnlyLabelOriginAndPoint2","verifOnlyOrigin","verifOnlyLabelOriginAndOrigin","verifLabelOriginAndPoint2AndOrigin","pointsOnFigure","allPointsStayOnFigure","delay","milliseconds","resolve","DynamicNumber","textAfter","textBefore","maximumFractionDigits","minimumFractionDigits","Angle","end","AngleOriented","Distance","_error","DynamicCalcul","calculus","dynamicNumbers","values","DynamicX","DynamicY","config","math","create","parseDependencies","evaluateDependencies","addDependencies","subtractDependencies","multiplyDependencies","divideDependencies","powDependencies","unaryMinusDependencies","mathImport","Graph","expression","prohibitedValues","step","fNode","pointsCoords","getListOfPoints","minDistance","f","Graph2","GraphByParts","parts","el","groups","part","groupSvg","group","latex","notation","CircleFractionDiagram","denominator","gap","numberOfCircle","numerator","sector","LineFractionDiagram","height","min","max","thickHeightInPixels","verticalDistanceForClick","width","fractionWidth","createRectangleByOriginWidthAndHeight","rectangle","indice","xTranslate","newPoints","RectangleFractionDiagram","numberOfRectangles","GraduatedLine","addLeft","addRight","labelInterval","stepBis","thick","yLabel","text","labelSize","Arc","addBorders","codingMarks","fillColor","fillOpacity","baseRadius","spacing","currentRadius","startDistance","scaleFactor","arcStart","arcEnd","ArcBy3PointsAndRadius","tempLine","newStart","Const","ArcByCenterRadiusAndAngles","BisectorByPoints","bisectorPoint","originName","pointOnSide1Name","pointOnSide2Name","Circle","newCenter","newCircle","centerName","opt","CircleCenterDynamicRadius","CircleCenterPoint","newPoint","pointName","LineByPointVector","LineParallel","LinePerpendicular","PerpendicularBisector","middlePoint","PerpendicularBisectorByPoints","Polygon","isBuiltWithSegments","isStricCoords","coord","newPolygon","idPoints","validPoints","acc","obj","Polyline","allCoordsAreNumber","TextByPosition","anchor","backgroundColor","dxInPixels","dyInPixels","fontSize","pointerSx","pointerSy","divRect","svgRect","divLeft","divTop","divRight","divBottom","superOptions","alignment","alignmentString","renderMathInElement","chaine","styleTransform","MarkSegment","mark","MarkRightAngle","quadrant","sommet1","sommet2Base","sommet2","sommet3","sommet4","x3","y3","x4","y4","Barycenter","Middle","coordsMiddle","PointOnGraph","abscissa","ordinate","PointByProjection","lineName","PointByProjectionOnAxisX","PointByProjectionOnAxisY","PointIntersectionCC","PointIntersectionLC","circleName","PointOnCircle","angleWithHorizontal","PointOnLineAtDistance","interpolateCoords","lesX","lesY","PointOnPolyline","PointsIntersectionCC","PointsIntersectionLC","TextByPoint","oldX","oldY","TextDynamicByPoint","TextDynamicByPosition","Vector","labelColor","xEnd","yEnd","VectorByPoints","VectorUnitPerpendicular","isLocalStorageAvailable","handleHover","elements","eligibleElements","handlePointerAction","event","possibleElements","elementsFiltered","hoveredElements","sendToMachine","elementText","divs","waitingWithModal","bisectorByPoints","circleCompass","circlePoint","cursor","description","dilate","disc","discPoint","drag","dragAll","fill","hide","informations","latexSvg","lineParallel","linePerpendicular","markAngle","matkSegment","mesureAngle","mesureSegment","middle","moveLabel","namePoint","open","pause","perpendicularBisector","play","playSkipBack","playSkipForward","pointIntersection","pointOn","redo","reflection","reflectionOverLine","remove$1","remove","rotate","save","setOptions","translation","undo","zoomIn","zoomOut","setButtonStyle","availableIcons","restart","addButtons","list","imgList","icon","addCustomButton","action","tooltip","url","container","record","userMessage","getNumberId","numberId","addThicknessChoice","title","range","addMarkPalette","buttonsMark","handleClick","setToolbar","nbCols","position","showStyles","tools","imgs","divStyles","Figure","border","isDynamic","isHandDrawn","pixelsPerUnit","scale","snapGrid","xScale","yScale","elementsToRemove","filter","feTurbulence","feDisplacementMap","resizeHandler","orientationHandler","fullscreenHandler","checkCircleRadius","style","typeStr","classes","rect","currentIsDynamic","newContainer","keydownHandler","direction","isModalOpen","btnRedo","btnUndo","includePreambule","pointerMoveFrameHandle","lastPointerPosition","processPointerMove","pointerdownHandler","stopDrag","pointermoveHandler","lastRedo","level","stop","lastUndo","parentContainer","stringScale","tikz","changeWidth","changeHeight","changeLeft","changeBottom","ul","li","MarkBetweenPoints","VectorPerpendicular","modal","addTextElementsToSvg","svg","bounds","textElements","textEl","textX","textY","textSvgX","textSvgY","svgText","textContent","createDialoxBoxRadius","existingDialog","dialog","input","createDialoxBoxK","createDialoxBoxName","createDialoxBoxAngle","createModalDescription","createDialogBoxOptions","divPointSize","labelPointSize","inputPointSize","divShape","labelShape","selectShape","shapes","option","divHandDrawn","labelHandDrawn","inputHandDrawn","divBorder","labelBorder","inputBorder","divButtons","buttonCancel","buttonValidate","selectionRectangle","buttonSvg","buttonLatex","dimensionsDisplay","rectangleContainer","containerLeft","containerTop","updateDimensions","widthInPixels","heightInPixels","widthInUnits","heightInUnits","widthRounded","heightRounded","isNearCorner","isNearLeftCorner","isNearRightCorner","isNearTopCorner","isNearBottomCorner","isNearTopLeftCorner","isNearTopRightCorner","isNearBottomLeftCorner","isNearBottomRightCorner","mousemoveHandler","left","top","resize","snapToTenth","deltaPixels","isHorizontal","deltaInUnits","snappedUnits","newWidth","newHeight","newLeft","newTop","snappedDx","snappedDy","stopResize","buttonSvgClickHandler","buttonLatexClickHandler","ui","createMachine","context","getExistingPointOrCreatedPoint","getExistingPointOrCreatetPoindWasASuccess","testRadiusIsSegment","dynamicRadius","cleanup","blob","bisector","pointForText","file","reader","readerEvent","content","limitNumberOfPoint","noLimit","limitReached","getAutomaticLabelOrUndefined","element1","element2","last","first","isClickOnFirstPoint","jsonContent","labelAutomatic","indiceCurrentLetter","indiceLetterZ","isPrime","SuperFigure","createActor","erase","minus","plus","checkElementExist","filteredElements"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162]}