import{A as Ct,g as Te,s as ge,a as kt,c as jt,G as vt,J as qt,b as Nt,d as Ft,e as Lt,i as Rt,f as $t}from"./vitest_expect-C1eZKgQp.js";import{g as Dt}from"./vitest_runner-C3RuGyCn.js";import{e as Bt,m as Ht}from"./vitest_utils-CmkFzQWi.js";import{s as ze,a as Wt,S as Gt}from"./vitest_snapshot-BjQ2bF-C.js";import{e as be,b as Qe,a as J,A as Jt,u as le}from"./chai-BbA4eoZ1.js";const Vt="__vitest_worker__";function Tt(){const a=globalThis[Vt];if(!a)throw new Error(`Vitest failed to access its internal state.

One of the following is possible:
- "vitest" is imported directly without running "vitest" command
- "vitest" is imported inside "globalSetup" (to fix this, use "setupFiles" instead, because "globalSetup" runs in a different context)
- "vitest" is imported inside Vite / Vitest config file
- Otherwise, it might be a Vitest bug. Please report it to https://github.com/vitest-dev/vitest/issues
`);return a}var We=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};const Kt=["matchSnapshot","toMatchSnapshot","toMatchInlineSnapshot","toThrowErrorMatchingSnapshot","toThrowErrorMatchingInlineSnapshot","throws","Throw","throw","toThrow","toThrowError"];function Ut(a,i){throw a.cause==null&&(a.cause=new Error("Matcher did not succeed in time.")),gt(a,i)}function zt(a){return function(p,w={}){var C;const c=((C=Tt().config.expect)==null?void 0:C.poll)??{},{interval:r=c.interval??50,timeout:l=c.timeout??1e3,message:b}=w,I=a(null,b).withContext({poll:!0});p=p.bind(I);const x=J.flag(I,"vitest-test");if(!x)throw new Error("expect.poll() must be called inside a test");const h=new Proxy(I,{get(V,k,re){const W=Reflect.get(V,k,re);if(typeof W!="function")return W instanceof Jt?h:W;if(k==="assert")return W;if(typeof k=="string"&&Kt.includes(k))throw new SyntaxError(`expect.poll() is not supported in combination with .${k}(). Use vi.waitFor() if your assertion condition is unstable.`);return function(...j){const R=new Error("STACK_TRACE_ERROR"),K=async()=>{const{setTimeout:O,clearTimeout:L}=Bt();let S="fn",U=!1;const _=O(()=>{U=!0},l);J.flag(I,"_name",k);try{for(;;){const P=U;P&&J.flag(I,"_isLastPollAttempt",!0);try{S="fn";const ne=await p();return J.flag(I,"object",ne),S="assertion",await W.call(I,...j)}catch(ne){(P||S==="assertion"&&J.flag(I,"_poll.assert_once"))&&Ut(ne,R),await Ht(r,O)}}}finally{L(_)}};let Q=!1;x.onFinished??(x.onFinished=[]),x.onFinished.push(()=>{if(!Q){const O=J.flag(I,"negate")?"not.":"",L=`expect.${J.flag(I,"_poll.element")?"element(locator)":"poll(assertion)"}.${O}${String(k)}()`;throw gt(new Error(`${L} was not awaited. This assertion is asynchronous and must be awaited; otherwise, it is not executed to avoid unhandled rejections:

await ${L}
`),R)}});let X;return{then(O,L){return Q=!0,(X||(X=K())).then(O,L)},catch(O){return(X||(X=K())).catch(O)},finally(O){return(X||(X=K())).finally(O)},[Symbol.toStringTag]:"Promise"}}}});return h}}function gt(a,i){return i.stack!==void 0&&(a.stack=i.stack.replace(i.message,a.message)),a}function Qt(a,i,p){const w=a.flag(i,"negate")?"not.":"",c=`${a.flag(i,"_name")}(expected)`,r=a.flag(i,"promise");return`expect(actual)${r?`.${r}`:""}.${w}${c}`}function Xt(a,i,p,w){const c=a;if(c&&i instanceof Promise){i=i.finally(()=>{if(!c.promises)return;const l=c.promises.indexOf(i);l!==-1&&c.promises.splice(l,1)}),c.promises||(c.promises=[]),c.promises.push(i);let r=!1;return c.onFinished??(c.onFinished=[]),c.onFinished.push(()=>{var l;if(!r){const b=(((l=globalThis.__vitest_worker__)==null?void 0:l.onFilterStackTrace)||(I=>I||""))(w.stack);console.warn([`Promise returned by \`${p}\` was not awaited. `,"Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. ",`Please remember to await the assertion.
`,b].join(""))}}),{then(l,b){return r=!0,i.then(l,b)},catch(l){return i.catch(l)},finally(l){return i.finally(l)},[Symbol.toStringTag]:"Promise"}}return i}let Ie;function ae(){return Ie||(Ie=new Gt({isEqual:(a,i)=>Lt(a,i,[Rt,$t])})),Ie}function Xe(a,i){if(typeof a!="function"){if(!i)throw new Error(`expected must be a function, received ${typeof a}`);return a}try{a()}catch(p){return p}throw new Error("snapshot function didn't throw")}function se(a){return{filepath:a.file.filepath,name:Dt(a).slice(1).join(" > "),testId:a.id}}const Yt=(a,i)=>{function p(w,c){const r=i.flag(c,"vitest-test");if(!r)throw new Error(`'${w}' cannot be used without test context`);return r}for(const w of["matchSnapshot","toMatchSnapshot"])i.addMethod(a.Assertion.prototype,w,function(c,r){if(i.flag(this,"_name",w),i.flag(this,"negate"))throw new Error(`${w} cannot be used with "not"`);const l=i.flag(this,"object"),b=p(w,this);typeof c=="string"&&typeof r>"u"&&(r=c,c=void 0);const I=i.flag(this,"message");ae().assert({received:l,message:r,isInline:!1,properties:c,errorMessage:I,...se(b)})});i.addMethod(a.Assertion.prototype,"toMatchFileSnapshot",function(w,c){if(i.flag(this,"_name","toMatchFileSnapshot"),i.flag(this,"negate"))throw new Error('toMatchFileSnapshot cannot be used with "not"');const r=new Error("resolves"),l=i.flag(this,"object"),b=p("toMatchFileSnapshot",this),I=i.flag(this,"message");return Xt(b,ae().assertRaw({received:l,message:c,isInline:!1,rawSnapshot:{file:w},errorMessage:I,...se(b)}),Qt(i,this),r)}),i.addMethod(a.Assertion.prototype,"toMatchInlineSnapshot",function(c,r,l){var C;if(i.flag(this,"_name","toMatchInlineSnapshot"),i.flag(this,"negate"))throw new Error('toMatchInlineSnapshot cannot be used with "not"');const b=p("toMatchInlineSnapshot",this);if(b.each||(C=b.suite)!=null&&C.each)throw new Error("InlineSnapshot cannot be used inside of test.each or describe.each");const I=i.flag(this,"object"),x=i.flag(this,"error");typeof c=="string"&&(l=r,r=c,c=void 0),r&&(r=ze(r));const h=i.flag(this,"message");ae().assert({received:I,message:l,isInline:!0,properties:c,inlineSnapshot:r,error:x,errorMessage:h,...se(b)})}),i.addMethod(a.Assertion.prototype,"toThrowErrorMatchingSnapshot",function(w){if(i.flag(this,"_name","toThrowErrorMatchingSnapshot"),i.flag(this,"negate"))throw new Error('toThrowErrorMatchingSnapshot cannot be used with "not"');const c=i.flag(this,"object"),r=p("toThrowErrorMatchingSnapshot",this),l=i.flag(this,"promise"),b=i.flag(this,"message");ae().assert({received:Xe(c,l),message:w,errorMessage:b,...se(r)})}),i.addMethod(a.Assertion.prototype,"toThrowErrorMatchingInlineSnapshot",function(c,r){var C;if(i.flag(this,"negate"))throw new Error('toThrowErrorMatchingInlineSnapshot cannot be used with "not"');const l=p("toThrowErrorMatchingInlineSnapshot",this);if(l.each||(C=l.suite)!=null&&C.each)throw new Error("InlineSnapshot cannot be used inside of test.each or describe.each");const b=i.flag(this,"object"),I=i.flag(this,"error"),x=i.flag(this,"promise"),h=i.flag(this,"message");c&&(c=ze(c)),ae().assert({received:Xe(b,x),message:r,inlineSnapshot:c,isInline:!0,error:I,errorMessage:h,...se(l)})}),i.addMethod(a.expect,"addSnapshotSerializer",Wt)};le(qt);le(Nt);le(Yt);le(Ft);function _t(a){const i=((r,l)=>{const{assertionCalls:b}=Te(i);return ge({assertionCalls:b+1},i),be(r,l)});Object.assign(i,be),Object.assign(i,globalThis[Ct]),i.getState=()=>Te(i),i.setState=r=>ge(r,i);const p=Te(globalThis[vt])||{};ge({...p,assertionCalls:0,isExpectingAssertions:!1,isExpectingAssertionsError:null,expectedAssertionsNumber:null,expectedAssertionsNumberErrorGen:null,get testPath(){return Tt().filepath},currentTestName:p.currentTestName},i),i.assert=Qe,i.extend=r=>be.extend(i,r),i.addEqualityTesters=r=>kt(r),i.soft=(...r)=>i(...r).withContext({soft:!0}),i.poll=zt(i),i.unreachable=r=>{Qe.fail(`expected${r?` "${r}" `:" "}not to be reached`)};function w(r){const l=()=>new Error(`expected number of assertions to be ${r}, but got ${i.getState().assertionCalls}`);Error.captureStackTrace&&Error.captureStackTrace(l(),w),i.setState({expectedAssertionsNumber:r,expectedAssertionsNumberErrorGen:l})}function c(){const r=new Error("expected any number of assertion, but got none");Error.captureStackTrace&&Error.captureStackTrace(r,c),i.setState({isExpectingAssertions:!0,isExpectingAssertionsError:r})}return J.addMethod(i,"assertions",w),J.addMethod(i,"hasAssertions",c),i.extend(jt),i}const Zt=_t();Object.defineProperty(globalThis,vt,{value:Zt,writable:!0,configurable:!0});var ee={},Ee,Ye;function er(){if(Ye)return Ee;Ye=1;var a;return typeof We<"u"?a=We:typeof window<"u"?a=window:a=self,Ee=a,Ee}var Se,_e;function tr(){if(_e)return Se;_e=1;let a;try{({}).__proto__,a=!1}catch{a=!0}return Se=a,Se}var Me,Ze;function te(){if(Ze)return Me;Ze=1;var a=Function.call,i=tr(),p=["size","caller","callee","arguments"];return i&&p.push("__proto__"),Me=function(c){return Object.getOwnPropertyNames(c).reduce(function(r,l){return p.includes(l)||typeof c[l]!="function"||(r[l]=a.bind(c[l])),r},Object.create(null))},Me}var Pe,et;function fe(){if(et)return Pe;et=1;var a=te();return Pe=a(Array.prototype),Pe}var Ae,tt;function rr(){if(tt)return Ae;tt=1;var a=fe().every;function i(c,r){return c[r.id]===void 0&&(c[r.id]=0),c[r.id]<r.callCount}function p(c,r,l,b){var I=!0;return l!==b.length-1&&(I=r.calledBefore(b[l+1])),i(c,r)&&I?(c[r.id]+=1,!0):!1}function w(c){var r={},l=arguments.length>1?arguments:c;return a(l,p.bind(null,r))}return Ae=w,Ae}var Oe,rt;function nr(){if(rt)return Oe;rt=1;function a(i){return i.constructor&&i.constructor.name||null}return Oe=a,Oe}var xe={},nt;function ir(){return nt||(nt=1,(function(a){a.wrap=function(i,p){var w=function(){return a.printWarning(p),i.apply(this,arguments)};return i.prototype&&(w.prototype=i.prototype),w},a.defaultMsg=function(i,p){return`${i}.${p} is deprecated and will be removed from the public API in a future version of ${i}.`},a.printWarning=function(i){typeof process=="object"&&process.emitWarning?process.emitWarning(i):console.info?console.info(i):console.log(i)}})(xe)),xe}var Ce,it;function or(){return it||(it=1,Ce=function(i,p){var w=!0;try{i.forEach(function(){if(!p.apply(this,arguments))throw new Error})}catch{w=!1}return w}),Ce}var ke,ot;function ar(){return ot||(ot=1,ke=function(i){if(!i)return"";try{return i.displayName||i.name||(String(i).match(/function ([^\s(]+)/)||[])[1]}catch{return""}}),ke}var je,at;function sr(){if(at)return je;at=1;var a=fe().sort,i=fe().slice;function p(c,r){var l=c.getCall(0),b=r.getCall(0),I=l&&l.callId||-1,x=b&&b.callId||-1;return I<x?-1:1}function w(c){return a(i(c),p)}return je=w,je}var qe,st;function cr(){if(st)return qe;st=1;var a=te();return qe=a(Function.prototype),qe}var Ne,ct;function ur(){if(ct)return Ne;ct=1;var a=te();return Ne=a(Map.prototype),Ne}var Fe,ut;function fr(){if(ut)return Fe;ut=1;var a=te();return Fe=a(Object.prototype),Fe}var Le,ft;function lr(){if(ft)return Le;ft=1;var a=te();return Le=a(Set.prototype),Le}var Re,lt;function dr(){if(lt)return Re;lt=1;var a=te();return Re=a(String.prototype),Re}var $e,dt;function mr(){return dt||(dt=1,$e={array:fe(),function:cr(),map:ur(),object:fr(),set:lr(),string:dr()}),$e}var ue={exports:{}},pr=ue.exports,mt;function hr(){return mt||(mt=1,(function(a,i){(function(p,w){a.exports=w()})(pr,(function(){var p=typeof Promise=="function",w=typeof self=="object"?self:We,c=typeof Symbol<"u",r=typeof Map<"u",l=typeof Set<"u",b=typeof WeakMap<"u",I=typeof WeakSet<"u",x=typeof DataView<"u",h=c&&typeof Symbol.iterator<"u",C=c&&typeof Symbol.toStringTag<"u",V=l&&typeof Set.prototype.entries=="function",k=r&&typeof Map.prototype.entries=="function",re=V&&Object.getPrototypeOf(new Set().entries()),W=k&&Object.getPrototypeOf(new Map().entries()),j=h&&typeof Array.prototype[Symbol.iterator]=="function",R=j&&Object.getPrototypeOf([][Symbol.iterator]()),K=h&&typeof String.prototype[Symbol.iterator]=="function",Q=K&&Object.getPrototypeOf(""[Symbol.iterator]()),X=8,O=-1;function L(S){var U=typeof S;if(U!=="object")return U;if(S===null)return"null";if(S===w)return"global";if(Array.isArray(S)&&(C===!1||!(Symbol.toStringTag in S)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&S===window.location)return"Location";if(typeof window.document=="object"&&S===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&S===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&S===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&S instanceof window.HTMLElement){if(S.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(S.tagName==="TD")return"HTMLTableDataCellElement";if(S.tagName==="TH")return"HTMLTableHeaderCellElement"}}var _=C&&S[Symbol.toStringTag];if(typeof _=="string")return _;var P=Object.getPrototypeOf(S);return P===RegExp.prototype?"RegExp":P===Date.prototype?"Date":p&&P===Promise.prototype?"Promise":l&&P===Set.prototype?"Set":r&&P===Map.prototype?"Map":I&&P===WeakSet.prototype?"WeakSet":b&&P===WeakMap.prototype?"WeakMap":x&&P===DataView.prototype?"DataView":r&&P===W?"Map Iterator":l&&P===re?"Set Iterator":j&&P===R?"Array Iterator":K&&P===Q?"String Iterator":P===null?"Object":Object.prototype.toString.call(S).slice(X,O)}return L}))})(ue)),ue.exports}var De,pt;function yr(){if(pt)return De;pt=1;var a=hr();return De=function(p){return a(p).toLowerCase()},De}var Be,ht;function wr(){if(ht)return Be;ht=1;function a(i){return i&&i.toString?i.toString():String(i)}return Be=a,Be}var He,yt;function vr(){return yt||(yt=1,He={global:er(),calledInOrder:rr(),className:nr(),deprecated:ir(),every:or(),functionName:ar(),orderByFirstCall:sr(),prototypes:mr(),typeOf:yr(),valueToString:wr()}),He}var wt;function Tr(){if(wt)return ee;wt=1;const a=vr().global;let i,p;if(typeof __vitest_required__<"u"){try{i=__vitest_required__.timers}catch{}try{p=__vitest_required__.timersPromises}catch{}}function w(r){const l=Math.pow(2,31)-1,b=1e12,I=function(){},x=function(){return[]},h={};let C,V=!1;r.setTimeout&&(h.setTimeout=!0,C=r.setTimeout(I,0),V=typeof C=="object"),h.clearTimeout=!!r.clearTimeout,h.setInterval=!!r.setInterval,h.clearInterval=!!r.clearInterval,h.hrtime=r.process&&typeof r.process.hrtime=="function",h.hrtimeBigint=h.hrtime&&typeof r.process.hrtime.bigint=="function",h.nextTick=r.process&&typeof r.process.nextTick=="function";const k=r.process&&r.__vitest_required__&&r.__vitest_required__.util.promisify;h.performance=r.performance&&typeof r.performance.now=="function";const re=r.Performance&&(typeof r.Performance).match(/^(function|object)$/),W=r.performance&&r.performance.constructor&&r.performance.constructor.prototype;h.queueMicrotask=r.hasOwnProperty("queueMicrotask"),h.requestAnimationFrame=r.requestAnimationFrame&&typeof r.requestAnimationFrame=="function",h.cancelAnimationFrame=r.cancelAnimationFrame&&typeof r.cancelAnimationFrame=="function",h.requestIdleCallback=r.requestIdleCallback&&typeof r.requestIdleCallback=="function",h.cancelIdleCallbackPresent=r.cancelIdleCallback&&typeof r.cancelIdleCallback=="function",h.setImmediate=r.setImmediate&&typeof r.setImmediate=="function",h.clearImmediate=r.clearImmediate&&typeof r.clearImmediate=="function",h.Intl=r.Intl&&typeof r.Intl=="object",r.clearTimeout&&r.clearTimeout(C);const j=r.Date,R=h.Intl?Object.defineProperties(Object.create(null),Object.getOwnPropertyDescriptors(r.Intl)):void 0;let K=b;if(j===void 0)throw new Error("The global scope doesn't have a `Date` object (see https://github.com/sinonjs/sinon/issues/1852#issuecomment-419622780)");h.Date=!0;class Q{constructor(n,o,u,e){this.name=n,this.entryType=o,this.startTime=u,this.duration=e}toJSON(){return JSON.stringify({...this})}}function X(t){return Number.isFinite?Number.isFinite(t):isFinite(t)}let O=!1;function L(t,n){t.loopLimit&&n===t.loopLimit-1&&(O=!0)}function S(){O=!1}function U(t){if(!t)return 0;const n=t.split(":"),o=n.length;let u=o,e=0,m;if(o>3||!/^(\d\d:){0,2}\d\d?$/.test(t))throw new Error("tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits");for(;u--;){if(m=parseInt(n[u],10),m>=60)throw new Error(`Invalid time ${t}`);e+=m*Math.pow(60,o-u-1)}return e*1e3}function _(t){const o=t*1e6%1e6,u=o<0?o+1e6:o;return Math.floor(u)}function P(t){if(!t)return 0;if(typeof t.getTime=="function")return t.getTime();if(typeof t=="number")return t;throw new TypeError("now should be milliseconds since UNIX epoch")}function ne(t,n,o){return o&&o.callAt>=t&&o.callAt<=n}function de(t,n){const o=new Error(`Aborting after running ${t.loopLimit} timers, assuming an infinite loop!`);if(!n.error)return o;const u=/target\.*[<|(|[].*?[>|\]|)]\s*/;let e=new RegExp(String(Object.keys(t).join("|")));V&&(e=new RegExp(`\\s+at (Object\\.)?(?:${Object.keys(t).join("|")})\\s+`));let m=-1;n.error.stack.split(`
`).some(function(v,T){return v.match(u)?(m=T,!0):v.match(e)?(m=T,!1):m>=0});const g=`${o}
${n.type||"Microtask"} - ${n.func.name||"anonymous"}
${n.error.stack.split(`
`).slice(m+1).join(`
`)}`;try{Object.defineProperty(o,"stack",{value:g})}catch{}return o}function bt(){class t extends j{constructor(u,e,m,g,v,T,d){arguments.length===0?super(t.clock.now):super(...arguments),Object.defineProperty(this,"constructor",{value:j,enumerable:!1})}static[Symbol.hasInstance](u){return u instanceof j}}return t.isFake=!0,j.now&&(t.now=function(){return t.clock.now}),j.toSource&&(t.toSource=function(){return j.toSource()}),t.toString=function(){return j.toString()},new Proxy(t,{apply(){if(this instanceof t)throw new TypeError("A Proxy should only capture `new` calls with the `construct` handler. This is not supposed to be possible, so check the logic.");return new j(t.clock.now).toString()}})}function It(){const t={};return Object.getOwnPropertyNames(R).forEach(n=>t[n]=R[n]),t.DateTimeFormat=function(...n){const o=new R.DateTimeFormat(...n),u={};return["formatRange","formatRangeToParts","resolvedOptions"].forEach(e=>{u[e]=o[e].bind(o)}),["format","formatToParts"].forEach(e=>{u[e]=function(m){return o[e](m||t.clock.now)}}),u},t.DateTimeFormat.prototype=Object.create(R.DateTimeFormat.prototype),t.DateTimeFormat.supportedLocalesOf=R.DateTimeFormat.supportedLocalesOf,t}function Et(t,n){t.jobs||(t.jobs=[]),t.jobs.push(n)}function B(t){if(t.jobs){for(let n=0;n<t.jobs.length;n++){const o=t.jobs[n];if(o.func.apply(null,o.args),L(t,n),t.loopLimit&&n>t.loopLimit)throw de(t,o)}S(),t.jobs=[]}}function Y(t,n){if(n.func===void 0)throw new Error("Callback must be provided to timer calls");if(V&&typeof n.func!="function")throw new TypeError(`[ERR_INVALID_CALLBACK]: Callback must be a function. Received ${n.func} of type ${typeof n.func}`);if(O&&(n.error=new Error),n.type=n.immediate?"Immediate":"Timeout",n.hasOwnProperty("delay")&&(typeof n.delay!="number"&&(n.delay=parseInt(n.delay,10)),X(n.delay)||(n.delay=0),n.delay=n.delay>l?1:n.delay,n.delay=Math.max(0,n.delay)),n.hasOwnProperty("interval")&&(n.type="Interval",n.interval=n.interval>l?1:n.interval),n.hasOwnProperty("animation")&&(n.type="AnimationFrame",n.animation=!0),n.hasOwnProperty("idleCallback")&&(n.type="IdleCallback",n.idleCallback=!0),t.timers||(t.timers={}),n.id=K++,n.createdAt=t.now,n.callAt=t.now+(parseInt(n.delay)||(t.duringTick?1:0)),t.timers[n.id]=n,V){const o={refed:!0,ref:function(){return this.refed=!0,o},unref:function(){return this.refed=!1,o},hasRef:function(){return this.refed},refresh:function(){return n.callAt=t.now+(parseInt(n.delay)||(t.duringTick?1:0)),t.timers[n.id]=n,o},[Symbol.toPrimitive]:function(){return n.id}};return o}return n.id}function me(t,n){if(t.callAt<n.callAt)return-1;if(t.callAt>n.callAt)return 1;if(t.immediate&&!n.immediate)return-1;if(!t.immediate&&n.immediate)return 1;if(t.createdAt<n.createdAt)return-1;if(t.createdAt>n.createdAt)return 1;if(t.id<n.id)return-1;if(t.id>n.id)return 1}function pe(t,n,o){const u=t.timers;let e=null,m,g;for(m in u)u.hasOwnProperty(m)&&(g=ne(n,o,u[m]),g&&(!e||me(e,u[m])===1)&&(e=u[m]));return e}function ce(t){const n=t.timers;let o=null,u;for(u in n)n.hasOwnProperty(u)&&(!o||me(o,n[u])===1)&&(o=n[u]);return o}function Ge(t){const n=t.timers;let o=null,u;for(u in n)n.hasOwnProperty(u)&&(!o||me(o,n[u])===-1)&&(o=n[u]);return o}function he(t,n){if(typeof n.interval=="number"?t.timers[n.id].callAt+=n.interval:delete t.timers[n.id],typeof n.func=="function")n.func.apply(null,n.args);else{const o=eval;(function(){o(n.func)})()}}function Je(t){return t==="IdleCallback"||t==="AnimationFrame"?`cancel${t}`:`clear${t}`}function St(t){return t==="IdleCallback"||t==="AnimationFrame"?`request${t}`:`set${t}`}function Mt(){let t=0;return function(n){!t++&&console.warn(n)}}const Pt=Mt();function ie(t,n,o){if(!n)return;t.timers||(t.timers={});const u=Number(n);if(Number.isNaN(u)||u<b){const e=Je(o);if(t.shouldClearNativeTimers===!0){const m=t[`_${e}`];return typeof m=="function"?m(n):void 0}Pt(`FakeTimers: ${e} was invoked to clear a native timer instead of one created by this library.
To automatically clean-up native timers, use \`shouldClearNativeTimers\`.`)}if(t.timers.hasOwnProperty(u)){const e=t.timers[u];if(e.type===o||e.type==="Timeout"&&o==="Interval"||e.type==="Interval"&&o==="Timeout")delete t.timers[u];else{const m=Je(o),g=St(e.type);throw new Error(`Cannot clear timer: timer created with ${g}() but cleared with ${m}()`)}}}function At(t,n){let o,u,e;const m="_hrtime",g="_nextTick";for(u=0,e=t.methods.length;u<e;u++){if(o=t.methods[u],o==="hrtime"&&r.process)r.process.hrtime=t[m];else if(o==="nextTick"&&r.process)r.process.nextTick=t[g];else if(o==="performance"){const v=Object.getOwnPropertyDescriptor(t,`_${o}`);v&&v.get&&!v.set?Object.defineProperty(r,o,v):v.configurable&&(r[o]=t[`_${o}`])}else if(r[o]&&r[o].hadOwnProperty)r[o]=t[`_${o}`];else try{delete r[o]}catch{}if(t.timersModuleMethods!==void 0)for(let v=0;v<t.timersModuleMethods.length;v++){const T=t.timersModuleMethods[v];i[T.methodName]=T.original}if(t.timersPromisesModuleMethods!==void 0)for(let v=0;v<t.timersPromisesModuleMethods.length;v++){const T=t.timersPromisesModuleMethods[v];p[T.methodName]=T.original}}n.shouldAdvanceTime===!0&&r.clearInterval(t.attachedInterval),t.methods=[];for(const[v,T]of t.abortListenerMap.entries())T.removeEventListener("abort",v),t.abortListenerMap.delete(v);return t.timers?Object.keys(t.timers).map(function(T){return t.timers[T]}):[]}function ye(t,n,o){if(o[n].hadOwnProperty=Object.prototype.hasOwnProperty.call(t,n),o[`_${n}`]=t[n],n==="Date")t[n]=o[n];else if(n==="Intl")t[n]=o[n];else if(n==="performance"){const u=Object.getOwnPropertyDescriptor(t,n);if(u&&u.get&&!u.set){Object.defineProperty(o,`_${n}`,u);const e=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(t,n,e)}else t[n]=o[n]}else t[n]=function(){return o[n].apply(o,arguments)},Object.defineProperties(t[n],Object.getOwnPropertyDescriptors(o[n]));t[n].clock=o}function Ot(t,n){t.tick(n)}const N={setTimeout:r.setTimeout,clearTimeout:r.clearTimeout,setInterval:r.setInterval,clearInterval:r.clearInterval,Date:r.Date};h.setImmediate&&(N.setImmediate=r.setImmediate),h.clearImmediate&&(N.clearImmediate=r.clearImmediate),h.hrtime&&(N.hrtime=r.process.hrtime),h.nextTick&&(N.nextTick=r.process.nextTick),h.performance&&(N.performance=r.performance),h.requestAnimationFrame&&(N.requestAnimationFrame=r.requestAnimationFrame),h.queueMicrotask&&(N.queueMicrotask=r.queueMicrotask),h.cancelAnimationFrame&&(N.cancelAnimationFrame=r.cancelAnimationFrame),h.requestIdleCallback&&(N.requestIdleCallback=r.requestIdleCallback),h.cancelIdleCallback&&(N.cancelIdleCallback=r.cancelIdleCallback),h.Intl&&(N.Intl=R);const Z=r.setImmediate||r.setTimeout;function Ve(t,n){t=Math.floor(P(t)),n=n||1e3;let o=0;const u=[0,0],e={now:t,Date:bt(),loopLimit:n};e.Date.clock=e;function m(){return 16-(e.now-t)%16}function g(d){const s=e.now-u[0]-t,f=Math.floor(s/1e3),y=(s-f*1e3)*1e6+o-u[1];if(Array.isArray(d)){if(d[1]>1e9)throw new TypeError("Number of nanoseconds can't exceed a billion");const E=d[0];let M=y-d[1],G=f-E;return M<0&&(M+=1e9,G-=1),[G,M]}return[f,y]}function v(){const d=g();return d[0]*1e3+d[1]/1e6}h.hrtimeBigint&&(g.bigint=function(){const d=g();return BigInt(d[0])*BigInt(1e9)+BigInt(d[1])}),h.Intl&&(e.Intl=It(),e.Intl.clock=e),e.requestIdleCallback=function(s,f){let y=0;e.countTimers()>0&&(y=50);const E=Y(e,{func:s,args:Array.prototype.slice.call(arguments,2),delay:typeof f>"u"?y:Math.min(f,y),idleCallback:!0});return Number(E)},e.cancelIdleCallback=function(s){return ie(e,s,"IdleCallback")},e.setTimeout=function(s,f){return Y(e,{func:s,args:Array.prototype.slice.call(arguments,2),delay:f})},typeof r.Promise<"u"&&k&&(e.setTimeout[k.custom]=function(s,f){return new r.Promise(function(E){Y(e,{func:E,args:[f],delay:s})})}),e.clearTimeout=function(s){return ie(e,s,"Timeout")},e.nextTick=function(s){return Et(e,{func:s,args:Array.prototype.slice.call(arguments,1),error:O?new Error:null})},e.queueMicrotask=function(s){return e.nextTick(s)},e.setInterval=function(s,f){return f=parseInt(f,10),Y(e,{func:s,args:Array.prototype.slice.call(arguments,2),delay:f,interval:f})},e.clearInterval=function(s){return ie(e,s,"Interval")},h.setImmediate&&(e.setImmediate=function(s){return Y(e,{func:s,args:Array.prototype.slice.call(arguments,1),immediate:!0})},typeof r.Promise<"u"&&k&&(e.setImmediate[k.custom]=function(s){return new r.Promise(function(y){Y(e,{func:y,args:[s],immediate:!0})})}),e.clearImmediate=function(s){return ie(e,s,"Immediate")}),e.countTimers=function(){return Object.keys(e.timers||{}).length+(e.jobs||[]).length},e.requestAnimationFrame=function(s){const f=Y(e,{func:s,delay:m(),get args(){return[v()]},animation:!0});return Number(f)},e.cancelAnimationFrame=function(s){return ie(e,s,"AnimationFrame")},e.runMicrotasks=function(){B(e)};function T(d,s,f,y){const E=typeof d=="number"?d:U(d),M=Math.floor(E),G=_(E);let $=o+G,A=e.now+M;if(E<0)throw new TypeError("Negative ticks are not supported");$>=1e6&&(A+=1,$-=1e6),o=$;let q=e.now,H=e.now,D,z,F,Ke,we,ve;e.duringTick=!0,F=e.now,B(e),F!==e.now&&(q+=e.now-F,A+=e.now-F);function Ue(){for(D=pe(e,q,A);D&&q<=A;){if(e.timers[D.id]){q=D.callAt,e.now=D.callAt,F=e.now;try{B(e),he(e,D)}catch(oe){z=z||oe}if(s){Z(Ke);return}we()}ve()}if(F=e.now,B(e),F!==e.now&&(q+=e.now-F,A+=e.now-F),e.duringTick=!1,D=pe(e,q,A),D)try{e.tick(A-e.now)}catch(oe){z=z||oe}else e.now=A,o=$;if(z)throw z;if(s)f(e.now);else return e.now}return Ke=s&&function(){try{we(),ve(),Ue()}catch(oe){y(oe)}},we=function(){F!==e.now&&(q+=e.now-F,A+=e.now-F,H+=e.now-F)},ve=function(){D=pe(e,H,A),H=q},Ue()}return e.tick=function(s){return T(s,!1)},typeof r.Promise<"u"&&(e.tickAsync=function(s){return new r.Promise(function(f,y){Z(function(){try{T(s,!0,f,y)}catch(E){y(E)}})})}),e.next=function(){B(e);const s=ce(e);if(!s)return e.now;e.duringTick=!0;try{return e.now=s.callAt,he(e,s),B(e),e.now}finally{e.duringTick=!1}},typeof r.Promise<"u"&&(e.nextAsync=function(){return new r.Promise(function(s,f){Z(function(){try{const y=ce(e);if(!y){s(e.now);return}let E;e.duringTick=!0,e.now=y.callAt;try{he(e,y)}catch(M){E=M}e.duringTick=!1,Z(function(){E?f(E):s(e.now)})}catch(y){f(y)}})})}),e.runAll=function(){let s,f;for(B(e),f=0;f<e.loopLimit;f++){if(!e.timers||(s=Object.keys(e.timers).length,s===0))return S(),e.now;e.next(),L(e,f)}const y=ce(e);throw de(e,y)},e.runToFrame=function(){return e.tick(m())},typeof r.Promise<"u"&&(e.runAllAsync=function(){return new r.Promise(function(s,f){let y=0;function E(){Z(function(){try{B(e);let M;if(y<e.loopLimit){if(!e.timers){S(),s(e.now);return}if(M=Object.keys(e.timers).length,M===0){S(),s(e.now);return}e.next(),y++,E(),L(e,y);return}const G=ce(e);f(de(e,G))}catch(M){f(M)}})}E()})}),e.runToLast=function(){const s=Ge(e);return s?e.tick(s.callAt-e.now):(B(e),e.now)},typeof r.Promise<"u"&&(e.runToLastAsync=function(){return new r.Promise(function(s,f){Z(function(){try{const y=Ge(e);y||(B(e),s(e.now)),s(e.tickAsync(y.callAt-e.now))}catch(y){f(y)}})})}),e.reset=function(){o=0,e.timers={},e.jobs=[],e.now=t},e.setSystemTime=function(s){const f=P(s),y=f-e.now;let E,M;u[0]=u[0]+y,u[1]=u[1]+o,e.now=f,o=0;for(E in e.timers)e.timers.hasOwnProperty(E)&&(M=e.timers[E],M.createdAt+=y,M.callAt+=y)},e.jump=function(s){const f=typeof s=="number"?s:U(s),y=Math.floor(f);for(const E of Object.values(e.timers))e.now+y>E.callAt&&(E.callAt=e.now+y);e.tick(y)},h.performance&&(e.performance=Object.create(null),e.performance.now=v),h.hrtime&&(e.hrtime=g),e}function xt(t){if(arguments.length>1||t instanceof Date||Array.isArray(t)||typeof t=="number")throw new TypeError(`FakeTimers.install called with ${String(t)} install requires an object parameter`);if(r.Date.isFake===!0)throw new TypeError("Can't install fake timers twice on the same global object.");if(t=typeof t<"u"?t:{},t.shouldAdvanceTime=t.shouldAdvanceTime||!1,t.advanceTimeDelta=t.advanceTimeDelta||20,t.shouldClearNativeTimers=t.shouldClearNativeTimers||!1,t.target)throw new TypeError("config.target is no longer supported. Use `withGlobal(target)` instead.");function n(m){if(!t.ignoreMissingTimers)throw new ReferenceError(`non-existent timers and/or objects cannot be faked: '${m}'`)}let o,u;const e=Ve(t.now,t.loopLimit);if(e.shouldClearNativeTimers=t.shouldClearNativeTimers,e.uninstall=function(){return At(e,t)},e.abortListenerMap=new Map,e.methods=t.toFake||[],e.methods.length===0&&(e.methods=Object.keys(N)),t.shouldAdvanceTime===!0){const m=Ot.bind(null,e,t.advanceTimeDelta),g=r.setInterval(m,t.advanceTimeDelta);e.attachedInterval=g}if(e.methods.includes("performance")){const m=(()=>{if(W)return r.performance.constructor.prototype;if(re)return r.Performance.prototype})();if(m)Object.getOwnPropertyNames(m).forEach(function(g){g!=="now"&&(e.performance[g]=g.indexOf("getEntries")===0?x:I)}),e.performance.mark=g=>new Q(g,"mark",0,0),e.performance.measure=g=>new Q(g,"measure",0,100),e.performance.timeOrigin=P(t.now);else if((t.toFake||[]).includes("performance"))return n("performance")}for(r===a&&i&&(e.timersModuleMethods=[]),r===a&&p&&(e.timersPromisesModuleMethods=[]),o=0,u=e.methods.length;o<u;o++){const m=e.methods[o];if(!h[m]){n(m);continue}if(m==="hrtime"?r.process&&typeof r.process.hrtime=="function"&&ye(r.process,m,e):m==="nextTick"?r.process&&typeof r.process.nextTick=="function"&&ye(r.process,m,e):ye(r,m,e),e.timersModuleMethods!==void 0&&i[m]){const g=i[m];e.timersModuleMethods.push({methodName:m,original:g}),i[m]=r[m]}e.timersPromisesModuleMethods!==void 0&&(m==="setTimeout"?(e.timersPromisesModuleMethods.push({methodName:"setTimeout",original:p.setTimeout}),p.setTimeout=(g,v,T={})=>new Promise((d,s)=>{const f=()=>{T.signal.removeEventListener("abort",f),e.abortListenerMap.delete(f),e.clearTimeout(y),s(T.signal.reason)},y=e.setTimeout(()=>{T.signal&&(T.signal.removeEventListener("abort",f),e.abortListenerMap.delete(f)),d(v)},g);T.signal&&(T.signal.aborted?f():(T.signal.addEventListener("abort",f),e.abortListenerMap.set(f,T.signal)))})):m==="setImmediate"?(e.timersPromisesModuleMethods.push({methodName:"setImmediate",original:p.setImmediate}),p.setImmediate=(g,v={})=>new Promise((T,d)=>{const s=()=>{v.signal.removeEventListener("abort",s),e.abortListenerMap.delete(s),e.clearImmediate(f),d(v.signal.reason)},f=e.setImmediate(()=>{v.signal&&(v.signal.removeEventListener("abort",s),e.abortListenerMap.delete(s)),T(g)});v.signal&&(v.signal.aborted?s():(v.signal.addEventListener("abort",s),e.abortListenerMap.set(s,v.signal)))})):m==="setInterval"&&(e.timersPromisesModuleMethods.push({methodName:"setInterval",original:p.setInterval}),p.setInterval=(g,v,T={})=>({[Symbol.asyncIterator]:()=>{const d=()=>{let A,q;const H=new Promise((D,z)=>{A=D,q=z});return H.resolve=A,H.reject=q,H};let s=!1,f=!1,y,E=0;const M=[],G=e.setInterval(()=>{M.length>0?M.shift().resolve():E++},g),$=()=>{T.signal.removeEventListener("abort",$),e.abortListenerMap.delete($),e.clearInterval(G),s=!0;for(const A of M)A.resolve()};return T.signal&&(T.signal.aborted?s=!0:(T.signal.addEventListener("abort",$),e.abortListenerMap.set($,T.signal))),{next:async()=>{var q,H;if((q=T.signal)!=null&&q.aborted&&!f)throw f=!0,T.signal.reason;if(s)return{done:!0,value:void 0};if(E>0)return E--,{done:!1,value:v};const A=d();if(M.push(A),await A,y&&M.length===0&&y.resolve(),(H=T.signal)!=null&&H.aborted&&!f)throw f=!0,T.signal.reason;return s?{done:!0,value:void 0}:{done:!1,value:v}},return:async()=>s?{done:!0,value:void 0}:(M.length>0&&(y=d(),await y),e.clearInterval(G),s=!0,T.signal&&(T.signal.removeEventListener("abort",$),e.abortListenerMap.delete($)),{done:!0,value:void 0})}}})))}return e}return{timers:N,createClock:Ve,install:xt,withGlobal:w}}const c=w(a);return ee.timers=c.timers,ee.createClock=c.createClock,ee.install=c.install,ee.withGlobal=w,ee}Tr();export{Zt as g};
//# sourceMappingURL=vitest-COvc21l1.js.map
