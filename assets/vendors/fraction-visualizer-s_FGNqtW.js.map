{"version":3,"file":"fraction-visualizer-s_FGNqtW.js","sources":["../../../node_modules/.pnpm/fraction-visualizer@git+https+++forge.apps.education.fr+coopmaths+apps+fraction-visuali_6e735723deda104b635061199bc15079/node_modules/fraction-visualizer/src/lib/FractionVisualizerElement.ts","../../../node_modules/.pnpm/fraction-visualizer@git+https+++forge.apps.education.fr+coopmaths+apps+fraction-visuali_6e735723deda104b635061199bc15079/node_modules/fraction-visualizer/src/main.ts"],"sourcesContent":["type FractionShape = 'square' | 'disk' | 'rectangle' | 'bar' | 'segment'\ntype BorderMode = 'none' | 'filled' | 'all' | 'cursor'\n\nexport default class FractionVisualizer extends HTMLElement {\n  // Éléments internes\n  private _svgContainer: HTMLDivElement\n  private _filledSlider: HTMLInputElement\n  private _borderSlider: HTMLInputElement\n  private _style: HTMLStyleElement\n  private _wrapper: HTMLDivElement\n\n  // État interne avec valeurs par défaut\n  private _shape: FractionShape = 'disk'\n  private _filled: number = 1\n  private _total: number = 4\n  private _color: string = '#5faedd'\n  private _showFilledSlider: boolean = false\n  private _borderMode: BorderMode = 'all' // REQ 3: Nouveau mode de bordure\n  private _showPartNumbers: boolean = false\n\n  // REQ 5: Nouveaux attributs pour les abscisses\n  private _showLabels: boolean = false\n  private _labelStart: number = 0\n  private _labelValues: string = ''\n  private _sliderMax: number = this.total\n\n  // Ajouter une propriété pour le nombre de bordures visibles\n  private _borderCount: number = 0\n\n  // Attributs à observer pour la réactivité\n  static get observedAttributes() {\n    return [\n      'shape',\n      'filled',\n      'total',\n      'show-filled-slider',\n      'border-mode',\n      'show-part-numbers',\n      'show-labels',\n      'label-start',\n      'label-unit-parts',\n      'label-values',\n      'slider-max-input',\n      'border-count',\n    ]\n  }\n\n  constructor() {\n    super()\n    // REQ 1: Ne pas utiliser de Shadow DOM\n    // this.attachShadow({ mode: 'open' }); // Supprimé\n\n    this._style = document.createElement('style')\n    this._wrapper = document.createElement('div')\n    this._wrapper.setAttribute('class', 'wrapper')\n\n    this._svgContainer = document.createElement('div')\n    this._svgContainer.setAttribute('class', 'svg-container')\n\n    this._filledSlider = document.createElement('input')\n    this._filledSlider.type = 'range'\n    this._filledSlider.className = 'filled-slider' // REQ 6: Classe pour le style\n\n    // Slider pour borderCount (visible seulement en mode cursor)\n    this._borderSlider = document.createElement('input')\n    this._borderSlider.type = 'range'\n    this._borderSlider.className = 'border-slider'\n    this._borderSlider.min = '0'\n    this._borderSlider.value = '0'\n    this._borderSlider.step = '1'\n    this._borderSlider.style.marginTop = '0.5em'\n\n    this._wrapper.append(this._svgContainer, this._filledSlider, this._borderSlider)\n    // REQ 1: Ajout au Light DOM\n    this.append(this._style, this._wrapper)\n  }\n\n  // Connexion au DOM : configuration initiale\n  connectedCallback() {\n    this._setupStyles()\n    this._setupSliderListener()\n    this._setupBorderSliderListener()\n    this._syncPropsFromAttributes()\n    this._render()\n  }\n\n  private _syncPropsFromAttributes() {\n    this.shape = (this.getAttribute('shape') as FractionShape) || this._shape\n    this.filled = parseInt(this.getAttribute('filled') || this._filled.toString(), 10)\n    this.total = parseInt(this.getAttribute('total') || this._total.toString(), 10)\n    this.showFilledSlider = this.hasAttribute('show-filled-slider')\n    this.sliderMax = parseInt(this.getAttribute('slider-max-input') || this._sliderMax.toString(), 10)\n\n    // REQ 3: Sync border-mode\n    this.borderMode = (this.getAttribute('border-mode') as BorderMode) || this._borderMode\n\n    this.borderCount = parseInt(this.getAttribute('border-count') || this._borderCount.toString(), 10)\n    this.showPartNumbers = this.hasAttribute('show-part-numbers')\n\n    // REQ 5: Sync labels\n    this.showLabels = this.hasAttribute('show-labels')\n    this.labelStart = parseFloat(this.getAttribute('label-start') || this._labelStart.toString())\n    this.labelValues = this.getAttribute('label-values') || this._labelValues\n  }\n\n  // Callback de changement d'attribut\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return\n\n    switch (name) {\n      case 'shape':\n        this.shape = newValue as FractionShape\n        break\n      case 'filled':\n        this.filled = parseInt(newValue, 10)\n        break\n      case 'total':\n        this.total = parseInt(newValue, 10)\n        break\n      case 'show-filled-slider':\n        this.showFilledSlider = newValue !== null\n        break\n      // REQ 3: Gérer border-mode\n      case 'border-mode':\n        this.borderMode = newValue as BorderMode\n        break\n      case 'border-count':\n        this.borderCount = parseInt(newValue, 10)\n        break\n      case 'show-part-numbers':\n        this.showPartNumbers = newValue !== null\n        break\n      // REQ 5: Gérer les attributs des abscisses\n      case 'show-labels':\n        this.showLabels = newValue !== null\n        break\n      case 'label-start':\n        this.labelStart = parseFloat(newValue)\n        break\n      case 'label-values':\n        this.labelValues = newValue\n        break\n      case 'slider-max-input':\n        this.sliderMax = parseInt(newValue, 10)\n        break\n    }\n  }\n\n  // --- Getters et Setters (API JavaScript et réactivité) ---\n\n  get shape(): FractionShape {\n    return this._shape\n  }\n  set shape(value: FractionShape) {\n    if (this._shape === value) return\n    this._shape = value\n    this.setAttribute('shape', value)\n    this._render()\n  }\n\n  get filled(): number {\n    return this._filled\n  }\n  set filled(value: number) {\n    const val = Math.max(0, value)\n    if (this._filled === val) return\n    this._filled = val\n    this.setAttribute('filled', val.toString())\n    this._render()\n  }\n\n  get total(): number {\n    return this._total\n  }\n  set total(value: number) {\n    const val = Math.max(1, value)\n    if (this._total === val) return\n    this._total = val\n    this.setAttribute('total', val.toString())\n    this._render()\n  }\n\n  get showFilledSlider(): boolean {\n    return this._showFilledSlider\n  }\n  set showFilledSlider(value: boolean) {\n    if (this._showFilledSlider === value) return\n    this._showFilledSlider = value\n    value ? this.setAttribute('show-filled-slider', '') : this.removeAttribute('show-filled-slider')\n    this._render()\n  }\n  get sliderMax(): number {\n    return this._sliderMax\n  }\n  set sliderMax(value: number) {\n    if (this._sliderMax === value) return\n    this._sliderMax = value\n    this.setAttribute('slider-max-input', value.toString())\n    this._render()\n  }\n\n  // REQ 3: Getters/Setters pour borderMode\n  get borderMode(): BorderMode {\n    return this._borderMode\n  }\n  set borderMode(value: BorderMode) {\n    if (this._borderMode === value) return\n    this._borderMode = value\n    this.setAttribute('border-mode', value)\n    this._render()\n  }\n  get borderCount(): number {\n    return this._borderCount\n  }\n  set borderCount(value: number) {\n    const val = Math.max(0, value)\n    if (this._borderCount === val) return\n    this._borderCount = val\n    this.setAttribute('border-count', val.toString())\n    this._render()\n  }\n  get showPartNumbers(): boolean {\n    return this._showPartNumbers\n  }\n  set showPartNumbers(value: boolean) {\n    if (this._showPartNumbers === value) return\n    this._showPartNumbers = value\n    value ? this.setAttribute('show-part-numbers', '') : this.removeAttribute('show-part-numbers')\n    this._render()\n  }\n  // REQ 5: Getters/Setters pour les abscisses\n  get showLabels(): boolean {\n    return this._showLabels\n  }\n  set showLabels(value: boolean) {\n    if (this._showLabels === value) return\n    this._showLabels = value\n    value ? this.setAttribute('show-labels', '') : this.removeAttribute('show-labels')\n    this._render()\n  }\n\n  get labelStart(): number {\n    return this._labelStart\n  }\n  set labelStart(value: number) {\n    if (this._labelStart === value) return\n    this._labelStart = value\n    this.setAttribute('label-start', value.toString())\n    this._render()\n  }\n\n  get labelValues(): string {\n    return this._labelValues\n  }\n  set labelValues(value: string) {\n    if (this._labelValues === value) return\n    this._labelValues = value\n    this.setAttribute('label-values', value)\n    this._render()\n  }\n\n  // --- Configuration interne ---\n\n  private _setupStyles() {\n    this._style.textContent = `\n  fraction-visualizer {\n    display: inline-block;\n    width: auto;\n    height: auto;\n    min-height: 7.5em;\n    border: none;\n    padding: 0.625em;\n    font-family: sans-serif;\n  }\n  fraction-visualizer .wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: start;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    gap: 0.625em;\n  }\n  fraction-visualizer .svg-container {\n    flex-grow: 1;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 1em;\n    align-items: start;\n    justify-content: center;\n  }\n\n  fraction-visualizer input[type=\"range\"], fraction-visualizer input[type=\"range\"]:focus {\n    flex-shrink: 0;\n    width: 10em;\n    -webkit-appearance: none;\n    appearance: none;\n    background: transparent;\n    cursor: pointer;\n    accent-color: #f15929;\n    outline: none;\n  }\n  fraction-visualizer input[type=\"range\"].hidden {\n    display: none;\n  }\n\n  /* Webkit (Chrome, Safari, Edge) */\n  fraction-visualizer input[type=\"range\"]::-webkit-slider-thumb, fraction-visualizer input[type=\"range\"]:focus::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    height: 1em;\n    width: 1em;\n    border-radius: 50%;\n    background: #f15929;\n    margin-top: -0.375em; /* Centrer sur la piste */\n  }\n  fraction-visualizer input[type=\"range\"]::-webkit-slider-runnable-track, fraction-visualizer input[type=\"range\"]:focus::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 0.25em;\n    background: #ccc;\n    border-radius: 0.125em;\n  }\n\n  /* Firefox */\n  fraction-visualizer input[type=\"range\"]::-moz-range-thumb, input[type=\"range\"]:focus::-moz-range-thumb {\n    height: 1em;\n    width: 1em;\n    border-radius: 50%;\n    background: #f15929;\n    border: none;\n  }\n  fraction-visualizer input[type=\"range\"]::-moz-range-track, input[type=\"range\"]:focus::-moz-range-track {\n    width: 100%;\n    height: 0.25em;\n    background: #ccc;\n    border-radius: 0.125em;\n  }\n  fraction-visualizer input[type=\"range\"]::-moz-range-progress, input[type=\"range\"]:focus::-moz-range-progress {\n    background-color: #f47a54;\n    height: 0.25em;\n    border-radius: 0.125em;\n  }\n`\n  }\n\n  private _setupSliderListener() {\n    this._filledSlider.addEventListener('input', () => {\n      const newValue = parseInt(this._filledSlider.value, 10)\n      this.filled = newValue\n      this.dispatchEvent(\n        new CustomEvent('fractionChange', {\n          detail: newValue,\n          bubbles: true,\n          composed: true,\n        }),\n      )\n    })\n  }\n\n  // --- Slider pour borderCount ---\n  private _setupBorderSliderListener() {\n    this._borderSlider.addEventListener('input', () => {\n      const newValue = parseInt(this._borderSlider.value, 10)\n      this.borderCount = newValue\n      this.dispatchEvent(\n        new CustomEvent('borderCountChange', {\n          detail: newValue,\n          bubbles: true,\n          composed: true,\n        }),\n      )\n    })\n  }\n\n  // REQ 5: Fonctions utilitaires pour les fractions\n  private _gcd(a: number, b: number): number {\n    return b === 0 ? a : this._gcd(b, a % b)\n  }\n\n  private _simplifyFraction(numerator: number, denominator: number): { num: number; den: number } {\n    if (denominator === 0) return { num: numerator, den: 0 }\n    // Gérer les décimaux dans le numérateur (ex: 1.5 * 4 = 6)\n    // Nous arrondissons ici car le calcul (labelStart * denominator) peut introduire des imprécisions flottantes\n    const numInt = Math.round(numerator)\n    const denInt = Math.round(denominator)\n\n    const common = this._gcd(Math.abs(numInt), Math.abs(denInt))\n    return {\n      num: numInt / common,\n      den: denInt / common,\n    }\n  }\n\n  // --- Rendu ---\n\n  private _render() {\n    // REQ 1: Vérifier 'this' au lieu de shadowRoot\n    if (!this._svgContainer) return\n\n    this._updateFilledSlider()\n    this._updateBorderSlider()\n    this._svgContainer.innerHTML = ''\n\n    // Pour le borderCount, il faut afficher assez d'unités pour montrer toutes les bordures demandées\n    // => On calcule le nombre d'unités à afficher comme pour le slider principal\n    const total = Math.max(1, this._total)\n    const filled = Math.max(0, this._filled)\n    // On prend le max entre filled et borderCount pour déterminer le nombre d'unités à afficher\n    const displayMax = Math.max(filled, this._borderCount)\n\n    if (this._shape === 'bar' || this._shape === 'segment') {\n      const unitsToShow = Math.ceil(Math.max(filled, this._borderCount) / total)\n      const displayTotal = unitsToShow * total\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n      svg.setAttribute('height', '4em')\n      // Calculer la largeur de la viewBox\n      let viewBoxWidth = 0\n      let widthPerPart = 0\n\n      if (this._shape === 'bar') {\n        widthPerPart = 200 / total // 200 est la largeur d'une \"unité\"\n        viewBoxWidth = widthPerPart * displayTotal\n        svg.setAttribute('viewBox', `0 0 ${viewBoxWidth} 50`)\n      } else {\n        // segment\n        widthPerPart = 180 / total // 180 est la largeur de l'axe pour une \"unité\"\n        viewBoxWidth = widthPerPart * displayTotal + 20 // + 20 pour padding\n        // REQ 5: Ajuster la hauteur si les labels sont affichés\n        const viewBoxHeight = this._showLabels ? 70 : 50\n        svg.setAttribute('viewBox', `0 0 ${viewBoxWidth} ${viewBoxHeight}`)\n      }\n\n      svg.setAttribute('preserveAspectRatio', 'xMidYMid meet')\n\n      if (this._shape === 'bar') {\n        this._renderBar(svg, filled, displayTotal, widthPerPart, total)\n      } else {\n        this._renderSegment(svg, filled, displayTotal, widthPerPart)\n      }\n      this._svgContainer.appendChild(svg)\n    } else {\n      // Utiliser displayMax pour déterminer le nombre de shapes à afficher\n      const totalShapes = Math.max(1, Math.ceil(displayMax / total))\n\n      for (let i = 0; i < totalShapes; i++) {\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n        svg.setAttribute('height', '8em')\n\n        // Calcul du nombre de parts coloriées pour cette shape\n        let filledCount = 0\n        const filledStart = i * total\n        if (this._filled > filledStart) {\n          filledCount = Math.min(this._filled - filledStart, total)\n        }\n\n        // Calcul du nombre de bordures pour cette shape\n        let borderCountForThisShape = 0\n        const borderStart = i * total\n        if (this._borderCount > borderStart) {\n          borderCountForThisShape = Math.min(this._borderCount - borderStart, total)\n        }\n\n        // Ajuster la viewBox en fonction de la forme\n        if (this._shape === 'rectangle') {\n          svg.setAttribute('viewBox', '0 0 150 100')\n        } else {\n          svg.setAttribute('viewBox', '0 0 100 100')\n        }\n        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet')\n\n        // Appeler la bonne fonction de dessin\n        switch (this._shape) {\n          case 'disk':\n            this._renderDisk(svg, filledCount, borderCountForThisShape)\n            break\n          case 'rectangle':\n            this._renderSquare(svg, filledCount, true, borderCountForThisShape)\n            break\n          default: // 'square'\n            this._renderSquare(svg, filledCount, false, borderCountForThisShape)\n            break\n        }\n        this._svgContainer.appendChild(svg)\n      }\n    }\n    // ...existing code...\n  }\n  private _updateFilledSlider() {\n    this._filledSlider.classList.toggle('hidden', !this._showFilledSlider)\n    this._filledSlider.min = '0'\n    const maxSlider = this._sliderMax > 0 ? this._sliderMax : Math.max(this._total, this._filled)\n    this._filledSlider.max = maxSlider.toString()\n    this._filledSlider.value = this._filled.toString()\n    this._filledSlider.step = '1'\n  }\n\n  // --- Affichage du slider ---\n  private _updateBorderSlider() {\n    const show = this._borderMode === 'cursor'\n    this._borderSlider.classList.toggle('hidden', !show)\n    // Le max doit être au moins égal à la valeur courante pour permettre d'aller au-delà du total\n    const maxSlider = Math.max(this._sliderMax > 0 ? this._sliderMax : this._total, this._borderCount)\n    this._borderSlider.max = maxSlider.toString()\n    this._borderSlider.value = this._borderCount.toString()\n  }\n\n  // --- Fonctions de dessin SVG ---\n  previousFilled = false\n  /** Crée une \"part\" SVG (path) */\n  private _createSvgPart(d: string, isFilled: boolean, partIndex?: number, borderCount?: number): SVGPathElement {\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    path.setAttribute('d', d)\n    path.setAttribute('fill', isFilled ? this._color : 'none')\n\n    path.setAttribute('stroke', this.getStrokeColor(isFilled, partIndex, borderCount))\n    path.setAttribute('stroke-width', '1')\n    path.setAttribute('vector-effect', 'non-scaling-stroke')\n    this.previousFilled = isFilled\n    return path\n  }\n\n  getStrokeColor(isFilled: boolean, partIndex?: number, borderCount?: number): string {\n    let strokeColor = this._color\n    if (this._borderMode === 'none') {\n      if (!isFilled) {\n        strokeColor = '#fff'\n      }\n    } else if (this._borderMode === 'all') {\n      strokeColor = '#000'\n    } else if (this._borderMode === 'filled') {\n      if (isFilled) {\n        strokeColor = '#000'\n      } else {\n        strokeColor = '#fff'\n      }\n    } else if (this._borderMode === 'cursor' && typeof partIndex === 'number') {\n      const count = typeof borderCount === 'number' ? borderCount : this._borderCount\n      if (partIndex < count) {\n        strokeColor = '#000'\n      } else if (!isFilled && !this.previousFilled) {\n        strokeColor = '#fff'\n      }\n    }\n    return strokeColor\n  }\n\n  /** Crée le contour global SVG (path) */\n  private _createSvgOutline(d: string): SVGPathElement {\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    path.setAttribute('d', d)\n    path.setAttribute('fill', 'none')\n    path.setAttribute('stroke', '#000')\n    path.setAttribute('stroke-width', this._shape === 'disk' ? '1' : this._shape === 'bar' ? '6' : '2')\n    path.setAttribute('vector-effect', 'non-scaling-stroke')\n    return path\n  }\n\n  /** REQ 4 & 5: Dessine un segment étendu avec abscisses */\n  private _renderSegment(svg: SVGSVGElement, filledCount: number, total: number, w_interval: number) {\n    const x_start = 10\n    const x_end = x_start + total * w_interval\n    const y_center = 25 // ViewBox hauteur 50 ou 70\n    const y_grad_h = 4 // Demi-hauteur graduation normale\n    const y_end_h = 12 // Demi-hauteur graduation extrémité\n\n    // 1. Dessine la ligne de base (vide)\n    const base_line = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n    base_line.setAttribute('x1', x_start.toString())\n    base_line.setAttribute('y1', y_center.toString())\n    base_line.setAttribute('x2', x_end.toString())\n    base_line.setAttribute('y2', y_center.toString())\n    base_line.setAttribute('stroke', '#000')\n    base_line.setAttribute('stroke-width', '1')\n    svg.appendChild(base_line)\n\n    // 2. Dessine la partie remplie par-dessus\n    if (filledCount > 0) {\n      const x2_filled = x_start + filledCount * w_interval\n\n      const filled_line = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n      filled_line.setAttribute('x1', x_start.toString())\n      filled_line.setAttribute('y1', y_center.toString())\n      filled_line.setAttribute('x2', x2_filled.toString())\n      filled_line.setAttribute('y2', y_center.toString())\n      filled_line.setAttribute('stroke', this._color)\n      filled_line.setAttribute('stroke-width', '3')\n      svg.appendChild(filled_line)\n    }\n\n    // 3. Dessine les graduations (ticks)\n    // REQ 5: Préparer les labels\n    const customLabels = this._labelValues.trim().split(/\\s+/).filter(Boolean)\n\n    for (let i = 0; i <= total; i++) {\n      const x = x_start + i * w_interval\n\n      // REQ 3: La visibilité des graduations dépend de 'border-mode'\n      let isVisible = false\n      if (this._borderMode === 'all') {\n        isVisible = true\n      } else if (this._borderMode === 'filled') {\n        isVisible = i <= filledCount\n      } else if (this._borderMode === 'cursor') {\n        isVisible = i <= this._borderCount\n      } else if (this._borderMode === 'none') {\n        isVisible = i === 0 || i === total // Seulement début et fin\n      }\n\n      // Les graduations de début (0) et de fin (total) sont spéciales\n      const isEnd = i === 0 || i === total\n      const isUnit = i % this._total === 0\n      if (isEnd || isUnit) isVisible = true\n\n      if (isVisible) {\n        // Graduation grande si unité entière, sinon petite\n        const isUnit = i % this._total === 0\n        const y_height = isUnit ? y_end_h : y_grad_h\n        const y1 = y_center - y_height\n        const y2 = y_center + y_height\n\n        const grad_line = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n        grad_line.setAttribute('x1', x.toString())\n        grad_line.setAttribute('y1', y1.toString())\n        grad_line.setAttribute('x2', x.toString())\n        grad_line.setAttribute('y2', y2.toString())\n        grad_line.setAttribute('stroke', '#000')\n        grad_line.setAttribute('stroke-width', '1.5')\n        grad_line.setAttribute('vector-effect', 'non-scaling-stroke')\n        svg.appendChild(grad_line)\n\n        // REQ 5: Ajouter l'abscisse\n        if (this._showLabels) {\n          let labelText = ''\n          if (customLabels.length > 0) {\n            if (i < customLabels.length) {\n              labelText = customLabels[i]\n            }\n          } else {\n            // Auto-calculer l'abscisse\n            const numerator = this._labelStart * this._total + i\n            const { num, den } = this._simplifyFraction(numerator, this._total)\n\n            if (den === 1 || num === 0) {\n              labelText = `${num}`\n            } else {\n              labelText = `${num}/${den}`\n            }\n          }\n\n          if (labelText) {\n            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text')\n            text.setAttribute('x', x.toString())\n            text.setAttribute('y', (y_center + y_end_h + 12).toString()) // Sous la graduation\n            text.setAttribute('text-anchor', 'middle')\n            text.setAttribute('font-size', '10')\n            text.setAttribute('fill', '#333')\n            text.textContent = labelText\n            svg.appendChild(text)\n          }\n        }\n        if (\n          i > 0 &&\n          (this.borderMode === 'all' ||\n            (this.borderMode === 'filled' && i <= filledCount) ||\n            (this.borderMode === 'cursor' && i <= this._borderCount))\n        ) {\n          this._addPartNumber(svg, x - w_interval / 2, y_center + 18, i - 1, total)\n        }\n      }\n    }\n  }\n\n  /** REQ 4: Dessine une barre rectangulaire étendue */\n  private _renderBar(svg: SVGSVGElement, filledCount: number, displayTotal: number, w: number, total: number) {\n    const h = 50\n    this.previousFilled = false\n    for (let i = displayTotal - 1; i >= 0; i--) {\n      const x = i * w\n      const isFilled = i < filledCount\n      const d = `M ${x} 0 L ${x + w} 0 L ${x + w} ${h} L ${x} ${h} Z`\n      svg.appendChild(this._createSvgPart(d, isFilled, i))\n      this._addPartNumber(svg, x + w / 2, h / 2, i, displayTotal)\n    }\n    const totalWidth = w * displayTotal\n    svg.appendChild(this._createSvgOutline(`M 0 0 L ${totalWidth} 0 L ${totalWidth} 50 L 0 50 Z`))\n    // === Bordure épaisse tous les \"total\" parts ===\n    for (let i = displayTotal; i > 0; i--) {\n      const x = i * w\n      const isThick = i % total === 0\n      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n      line.setAttribute('x1', x.toString())\n      line.setAttribute('x2', x.toString())\n      if (isThick) {\n        line.setAttribute('stroke', '#000')\n        line.setAttribute('stroke-width', '3')\n        line.setAttribute('y1', '0')\n        line.setAttribute('y2', h.toString())\n      } else {\n        if (\n          i === filledCount &&\n          i !== displayTotal &&\n          this._borderMode !== 'all' &&\n          this._borderMode !== 'filled' &&\n          !(this._borderMode === 'cursor' && i <= this._borderCount)\n        ) {\n          continue // Ne pas pointiller la bordure après la partie remplie\n        }\n        line.setAttribute('y1', '3')\n        line.setAttribute('y2', (h - 3).toString())\n        let strokeColor = '#fff'\n        let strokeWidth = '1'\n        let strokeDasharray = '3,3' // pointillé par défaut\n        if (i < filledCount) {\n          strokeColor = this._color\n        }\n        if (this._borderMode === 'filled' && i <= filledCount) {\n          strokeColor = this._color\n        } else if (this._borderMode === 'cursor') {\n          if (i <= filledCount) {\n            strokeColor = this._color\n          } else {\n            strokeColor = '#fff'\n          }\n        }\n        if (i === displayTotal) {\n          strokeColor = i === filledCount ? this._color : '#fff'\n          strokeWidth = '6'\n          strokeDasharray = '3,3' // pas de pointillé pour la bordure finale\n          line.setAttribute('y1', '-3')\n          line.setAttribute('y2', (h + 3).toString())\n        }\n        line.setAttribute('stroke', strokeColor)\n        line.setAttribute('stroke-width', strokeWidth)\n        line.setAttribute('stroke-dasharray', strokeDasharray)\n      }\n      svg.appendChild(line)\n    }\n  }\n\n  /** Dessine un carré ou rectangle */\n  private _renderSquare(svg: SVGSVGElement, filledCount: number, isRectangle: boolean, borderCount: number = 0) {\n    const w = isRectangle ? 150 : 100\n    const h = 100\n    const c_x = w / 2\n    const c_y = h / 2\n\n    const paths: string[] = []\n    const outline_d = `M 0 0 L ${w} 0 L ${w} ${h} L 0 ${h} Z`\n    // L'ordre CCW est important pour le remplissage\n    switch (this._total) {\n      case 1:\n        paths.push(`M 0 0 L ${w} 0 L ${w} ${h} L 0 ${h} Z`)\n        break\n      case 2: // [0] Haut, [1] Bas\n        paths.push(`M 0 0 L ${w} 0 L ${w} ${c_y} L 0 ${c_y} Z`)\n        paths.push(`M 0 ${c_y} L ${w} ${c_y} L ${w} ${h} L 0 ${h} Z`)\n        break\n      case 4: // CCW: [0] TR, [1] TL, [2] BL, [3] BR\n        paths.push(`M ${c_x} 0 L ${w} 0 L ${w} ${c_y} L ${c_x} ${c_y} Z`) // [0] TR\n        paths.push(`M ${c_x} 0 L ${c_x} ${c_y} L 0 ${c_y} L 0 0 Z`) // [1] TL\n        paths.push(`M 0 ${c_y} L ${c_x} ${c_y} L ${c_x} ${h} L 0 ${h} Z`) // [2] BL\n        paths.push(`M ${c_x} ${c_y} L ${w} ${c_y} L ${w} ${h} L ${c_x} ${h} Z`) // [3] BR\n        break\n      case 8: // CCW depuis 3h\n        paths.push(`M ${c_x} ${c_y} L ${w} 0 L ${w} ${c_y} Z`)\n        paths.push(`M ${c_x} ${c_y} L ${c_x} 0 L ${w} 0 Z`)\n        paths.push(`M ${c_x} ${c_y} L 0 0 L ${c_x} 0 Z`)\n        paths.push(`M ${c_x} ${c_y} L 0 ${c_y} L 0 0 Z`)\n        paths.push(`M ${c_x} ${c_y} L 0 ${h} L 0 ${c_y} Z`)\n        paths.push(`M ${c_x} ${c_y} L ${c_x} ${h} L 0 ${h} Z`)\n        paths.push(`M ${c_x} ${c_y} L ${w} ${h} L ${c_x} ${h} Z`)\n        paths.push(`M ${c_x} ${c_y} L ${w} ${c_y} L ${w} ${h} Z`)\n        break\n      default: {\n        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text')\n        text.setAttribute('x', `${c_x}`)\n        text.setAttribute('y', `${c_y}`)\n        text.setAttribute('text-anchor', 'middle')\n        text.setAttribute('dominant-baseline', 'central')\n        text.setAttribute('font-size', '10')\n        text.textContent = `Total=${this._total} non supporté (1,2,4,8 requis)`\n        svg.appendChild(text)\n      }\n    }\n\n    this.previousFilled = false\n    for (let i = paths.length - 1; i >= 0; i--) {\n      const d = paths[i]\n      const isFilled = i < filledCount\n      svg.appendChild(this._createSvgPart(d, isFilled, i, borderCount))\n      // Calcul du centre pour chaque part selon le cas\n      let x = 0,\n        y = 0\n      if (this._total === 1) {\n        x = w / 2\n        y = h / 2\n      } else if (this._total === 2) {\n        x = w / 2\n        y = i === 0 ? h / 4 : (3 * h) / 4\n      } else if (this._total === 4) {\n        // CCW: [0] TR, [1] TL, [2] BL, [3] BR\n        const coords = [\n          { x: (3 * w) / 4, y: h / 4 }, // [0] TR\n          { x: w / 4, y: h / 4 }, // [1] TL\n          { x: w / 4, y: (3 * h) / 4 }, // [2] BL\n          { x: (3 * w) / 4, y: (3 * h) / 4 }, // [3] BR\n        ]\n        x = coords[i].x\n        y = coords[i].y\n      } else if (this._total === 8) {\n        // Pour 8 parts, place au centre de chaque triangle (à ajuster selon la géométrie réelle)\n        const c_x = w / 2,\n          c_y = h / 2\n        const angle = ((i * 45 + 22.5) * Math.PI) / 180\n        x = c_x + c_x * 0.6 * Math.cos(angle)\n        y = c_y - c_y * 0.6 * Math.sin(angle)\n      }\n      this._addPartNumber(svg, x, y, i, this._total)\n    }\n\n    svg.appendChild(this._createSvgOutline(outline_d))\n  }\n\n  /** Convertit coordonnées polaires en cartésiennes (0° à 3h, CCW) */\n  private _polarToCartesian(cx: number, cy: number, r: number, angleInDegrees: number) {\n    const angleInRadians = (angleInDegrees * Math.PI) / 180.0\n    return {\n      x: cx + r * Math.cos(angleInRadians),\n      y: cy - r * Math.sin(angleInRadians), // Y inversé pour SVG\n    }\n  }\n\n  /** Dessine un disque */\n  private _renderDisk(svg: SVGSVGElement, filledCount: number, borderCount: number = 0) {\n    const total = Math.max(1, this._total)\n    const clampedFilled = Math.min(filledCount, total)\n    const r = 48\n    const cx = 50\n    const cy = 50\n\n    if (total === 1) {\n      const d = 'M 50 2 A 48 48 0 1 1 49.99 2 Z'\n      svg.appendChild(this._createSvgPart(d, clampedFilled >= 1))\n    } else {\n      const angleStep = 360 / total\n      const largeArcFlag = angleStep > 180 ? '1' : '0'\n      this.previousFilled = false\n      for (let i = total - 1; i >= 0; i--) {\n        const startAngle = i * angleStep\n        const endAngle = (i + 1) * angleStep\n        const start = this._polarToCartesian(cx, cy, r, startAngle)\n        const end = this._polarToCartesian(cx, cy, r, endAngle)\n\n        // Sweep-flag 0 pour CCW\n        const d = `M ${cx} ${cy} L ${start.x} ${start.y} A ${r} ${r} 0 ${largeArcFlag} 0 ${end.x} ${end.y} Z`\n\n        const isFilled = i < clampedFilled\n        // Passer borderCount à _createSvgPart\n        svg.appendChild(this._createSvgPart(d, isFilled, i, borderCount))\n        // Ajout du numéro de part\n        const midAngle = (i + 0.5) * angleStep\n        const mid = this._polarToCartesian(cx, cy, r * 0.65, midAngle)\n        this._addPartNumber(svg, mid.x, mid.y, i, total)\n      }\n    }\n\n    const outline_d = 'M 50 2 A 48 48 0 1 1 49.99 2 Z'\n    svg.appendChild(this._createSvgOutline(outline_d))\n  }\n\n  /**\n   * Ajoute un numéro de part centré sur la part correspondante.\n   * @param svg SVGSVGElement parent\n   * @param x position x du texte\n   * @param y position y du texte\n   * @param partIndex numéro de la part (commence à 0)\n   * @param total nombre total de parts (pour ajuster la taille si besoin)\n   */\n  private _addPartNumber(svg: SVGSVGElement, x: number, y: number, partIndex: number, total: number) {\n    if (!this._showPartNumbers) return\n    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text')\n    text.setAttribute('x', x.toString())\n    text.setAttribute('y', y.toString())\n    text.setAttribute('text-anchor', 'middle')\n    text.setAttribute('dominant-baseline', 'central')\n    text.setAttribute('font-size', total > 8 ? '10' : '14')\n    text.setAttribute('fill', '#333')\n    text.textContent = (partIndex + 1).toString()\n    svg.appendChild(text)\n  }\n}\n","import FractionVisualizerElement from './lib/FractionVisualizerElement'\n\ncustomElements.define('fraction-visualizer', FractionVisualizerElement)\nexport default FractionVisualizerElement\n"],"names":["FractionVisualizer","name","oldValue","newValue","value","val","a","b","numerator","denominator","numInt","denInt","common","total","filled","displayMax","displayTotal","svg","viewBoxWidth","widthPerPart","viewBoxHeight","totalShapes","filledCount","filledStart","borderCountForThisShape","borderStart","maxSlider","show","d","isFilled","partIndex","borderCount","path","strokeColor","count","w_interval","x_end","y_center","y_grad_h","y_end_h","base_line","x2_filled","filled_line","customLabels","i","x","isVisible","isEnd","isUnit","y_height","y1","y2","grad_line","labelText","num","den","text","w","totalWidth","isThick","line","strokeWidth","strokeDasharray","isRectangle","h","c_x","c_y","paths","outline_d","y","coords","angle","cx","cy","r","angleInDegrees","angleInRadians","clampedFilled","angleStep","largeArcFlag","startAngle","endAngle","start","end","midAngle","mid","FractionVisualizerElement"],"mappings":"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","x_google_ignoreList":[0,1]}