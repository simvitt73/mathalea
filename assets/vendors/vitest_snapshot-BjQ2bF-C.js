const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendors/magic-string-gzk5IGc9.js","assets/vendors/jridgewell_sourcemap-codec-4CHRs_FM.js"])))=>i.map(i=>d[i]);
var st=Object.defineProperty;var rt=(e,t,n)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var d=(e,t,n)=>rt(e,typeof t!="symbol"?t+"":t,n);import{_ as at}from"./three-q_6hD11P.js";import{f as it,p as ot}from"./vitest_pretty-format-Blb6hO2B.js";import{r as Z}from"./pathe-CM51XWwG.js";var lt=44,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ct=new Uint8Array(64),J=new Uint8Array(128);for(let e=0;e<K.length;e++){const t=K.charCodeAt(e);ct[e]=t,J[t]=e}function E(e,t){let n=0,r=0,s=0;do{const i=e.next();s=J[i],n|=(s&31)<<r,r+=5}while(s&32);const a=n&1;return n>>>=1,a&&(n=-2147483648|-n),t+n}function U(e,t){return e.pos>=t?!1:e.peek()!==lt}var ut=class{constructor(e){this.pos=0,this.buffer=e}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(e){const{buffer:t,pos:n}=this,r=t.indexOf(e,n);return r===-1?t.length:r}};function ht(e){const{length:t}=e,n=new ut(e),r=[];let s=0,a=0,i=0,l=0,o=0;do{const c=n.indexOf(";"),h=[];let f=!0,u=0;for(s=0;n.pos<c;){let p;s=E(n,s),s<u&&(f=!1),u=s,U(n,c)?(a=E(n,a),i=E(n,i),l=E(n,l),U(n,c)?(o=E(n,o),p=[s,a,i,l,o]):p=[s,a,i,l]):p=[s],h.push(p),n.pos++}f||dt(h),r.push(h),n.pos=c+1}while(n.pos<=t);return r}function dt(e){e.sort(ft)}function ft(e,t){return e[0]-t[0]}var N=0,pt=1,mt=2,_t=3,St=4,M=!1;function gt(e,t,n,r){for(;n<=r;){const s=n+(r-n>>1),a=e[s][N]-t;if(a===0)return M=!0,s;a<0?n=s+1:r=s-1}return M=!1,n-1}function vt(e,t,n){for(let r=n+1;r<e.length&&e[r][N]===t;n=r++);return n}function wt(e,t,n){for(let r=n-1;r>=0&&e[r][N]===t;n=r--);return n}function Et(e,t,n,r){const{lastKey:s,lastNeedle:a,lastIndex:i}=n;let l=0,o=e.length-1;if(r===s){if(t===a)return M=i!==-1&&e[i][N]===t,i;t>=a?l=i===-1?0:i:o=i}return n.lastKey=r,n.lastNeedle=t,n.lastIndex=gt(e,t,l,o)}var bt="`line` must be greater than 0 (lines start at line 1)",yt="`column` must be greater than or equal to 0 (columns start at column 0)",L=-1,xt=1;function Ot(e){var t;return(t=e)._decoded||(t._decoded=ht(e._encoded))}function It(e,t){let{line:n,column:r,bias:s}=t;if(n--,n<0)throw new Error(bt);if(r<0)throw new Error(yt);const a=Ot(e);if(n>=a.length)return I(null,null,null,null);const i=a[n],l=$t(i,e._decodedMemo,n,r,s||xt);if(l===-1)return I(null,null,null,null);const o=i[l];if(o.length===1)return I(null,null,null,null);const{names:c,resolvedSources:h}=e;return I(h[o[pt]],o[mt]+1,o[_t],o.length===5?c[o[St]]:null)}function I(e,t,n,r){return{source:e,line:t,column:n,name:r}}function $t(e,t,n,r,s){let a=Et(e,r,t,n);return M?a=(s===L?vt:wt)(e,r,a):s===L&&a++,a===-1||a===e.length?-1:a}function Q(e){return e!=null}function Mt(e){return e===null||typeof e!="function"&&typeof e!="object"}function $(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}function Nt(e){let t=-1,n=null,r=0,s=0,a=null;for(;t<=e.length;){a=e[t],t++;const i=e[t];if((i==='"'||i==="'"||i==="`")&&a!=="\\"&&(n===i?n=null:n||(n=i)),n||(i==="("&&r++,i===")"&&s++),r&&s&&r===s)return t}return null}const Y=/^\s*at .*(?:\S:\d+|\(native\))/m,Ct=/^(?:eval@)?(?:\[native code\])?$/,At=["node:internal",/\/packages\/\w+\/dist\//,/\/@vitest\/\w+\/dist\//,"/vitest/dist/","/vitest/src/","/node_modules/chai/","/node_modules/tinyspy/","/vite/dist/node/module-runner","/rolldown-vite/dist/node/module-runner","/deps/chunk-","/deps/@vitest","/deps/loupe","/deps/chai","/browser-playwright/dist/locators.js","/browser-webdriverio/dist/locators.js","/browser-preview/dist/locators.js",/node:\w+/,/__vitest_test__/,/__vitest_browser__/,/\/deps\/vitest_/];function tt(e){if(!e.includes(":"))return[e];const n=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/^\(|\)$/g,""));if(!n)return[e];let r=n[1];if(r.startsWith("async ")&&(r=r.slice(6)),r.startsWith("http:")||r.startsWith("https:")){const s=new URL(r);s.searchParams.delete("import"),s.searchParams.delete("browserv"),r=s.pathname+s.hash+s.search}if(r.startsWith("/@fs/")){const s=/^\/@fs\/[a-zA-Z]:\//.test(r);r=r.slice(s?5:4)}return[r,n[2]||void 0,n[3]||void 0]}function kt(e){let t=e.trim();if(Ct.test(t)||(t.includes(" > eval")&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!t.includes("@")))return null;let n=-1,r="",s;for(let o=0;o<t.length;o++)if(t[o]==="@"){const c=t.slice(o+1);if(c.includes(":")&&c.length>=3){n=o,r=c,s=o>0?t.slice(0,o):void 0;break}}if(n===-1||!r.includes(":")||r.length<3)return null;const[a,i,l]=tt(r);return!a||!i||!l?null:{file:a,method:s||"",line:Number.parseInt(i),column:Number.parseInt(l)}}function Ft(e){let t=e.trim();if(!Y.test(t))return null;t.includes("(eval ")&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"");const r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;const[s,a,i]=tt(r?r[1]:n);let l=r&&n||"",o=s&&["eval","<anonymous>"].includes(s)?void 0:s;return!o||!a||!i?null:(l.startsWith("async ")&&(l=l.slice(6)),o.startsWith("file://")&&(o=o.slice(7)),o=o.startsWith("node:")||o.startsWith("internal:")?o:Z(o),l&&(l=l.replace(/__vite_ssr_import_\d+__\./g,"").replace(/(Object\.)?__vite_ssr_export_default__\s?/g,"")),{method:l,file:o,line:Number.parseInt(a),column:Number.parseInt(i)})}function A(e,t={}){const{ignoreStackEntries:n=At}=t;return(Y.test(e)?Rt(e):Tt(e)).map(s=>{var a;t.getUrlId&&(s.file=t.getUrlId(s.file));const i=(a=t.getSourceMap)===null||a===void 0?void 0:a.call(t,s.file);if(!i||typeof i!="object"||!i.version)return B(n,s.file)?null:s;const l=new Dt(i,s.file),o=Kt(l,s);if(!o)return s;const{line:c,column:h,source:f,name:u}=o;let p=f||s.file;return p.match(/\/\w:\//)&&(p=p.slice(1)),B(n,p)?null:c!=null&&h!=null?{line:c,column:h,file:p,method:u||s.method}:s}).filter(s=>s!=null)}function B(e,t){return e.some(n=>t.match(n))}function Tt(e){return e.split(`
`).map(t=>kt(t)).filter(Q)}function Rt(e){return e.split(`
`).map(t=>Ft(t)).filter(Q)}function jt(e,t={}){if(!e||Mt(e))return[];if("stacks"in e&&e.stacks)return e.stacks;const n=e.stack||"";let r=typeof n=="string"?A(n,t):[];if(!r.length){const s=e;s.fileName!=null&&s.lineNumber!=null&&s.columnNumber!=null&&(r=A(`${s.fileName}:${s.lineNumber}:${s.columnNumber}`,t)),s.sourceURL!=null&&s.line!=null&&s._column!=null&&(r=A(`${s.sourceURL}:${s.line}:${s.column}`,t))}return t.frameFilter&&(r=r.filter(s=>t.frameFilter(e,s)!==!1)),e.stacks=r,r}class Dt{constructor(t,n){d(this,"_encoded");d(this,"_decoded");d(this,"_decodedMemo");d(this,"url");d(this,"version");d(this,"names",[]);d(this,"resolvedSources");this.map=t;const{mappings:r,names:s,sources:a}=t;this.version=t.version,this.names=s||[],this._encoded=r||"",this._decodedMemo=Pt(),this.url=n,this.resolvedSources=(a||[]).map(i=>Z(i||"",n))}}function Pt(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function Kt(e,t){const n=It(e,t);return n.column==null?null:n}const R=/\r?\n/;function Ut(e,t,n){const r=e.split(R),s=/\r\n/.test(e)?2:1;let a=0;if(t>r.length)return e.length;for(let i=0;i<t-1;i++)a+=r[i].length+s;return a+n}function Lt(e,t){if(t>e.length)throw new Error(`offset is longer than source length! offset ${t} > length ${e.length}`);const n=e.split(R),r=/\r\n/.test(e)?2:1;let s=0,a=0;for(;a<n.length;a++){const i=n[a].length+r;if(s+i>=t)break;s+=i}return a+1}async function Bt(e,t){const n=(await at(async()=>{const{default:s}=await import("./magic-string-gzk5IGc9.js");return{default:s}},__vite__mapDeps([0,1]))).default,r=new Set(t.map(s=>s.file));await Promise.all(Array.from(r).map(async s=>{const a=t.filter(c=>c.file===s),i=await e.readSnapshotFile(s),l=new n(i);for(const c of a){const h=Ut(i,c.line,c.column);Xt(i,l,h,c.snapshot)}const o=l.toString();o!==i&&await e.saveSnapshotFile(s,o)}))}const Wt=/(?:toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot)\s*\(\s*(?:\/\*[\s\S]*\*\/\s*|\/\/.*(?:[\n\r\u2028\u2029]\s*|[\t\v\f \xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF]))*\{/;function zt(e,t,n,r){let s=e.slice(n);const a=Wt.exec(s);if(!a)return!1;s=s.slice(a.index);let i=Nt(s);if(i===null)return!1;i+=n+a.index;const l=n+a.index+a[0].length,o=qt(e,l),c=`, ${et(r,e,n)}`;return o===i?t.appendLeft(i,c):t.overwrite(o,i,c),!0}function qt(e,t){let n=1,r=0;for(;n!==r&&t<e.length;){const s=e[t++];s==="{"?n++:s==="}"&&r++}return t}function et(e,t,n){const r=Lt(t,n),a=t.split(R)[r-1].match(/^\s*/)[0]||"",i=a.includes("	")?`${a}	`:`${a}  `,l=e.trim().replace(/\\/g,"\\\\").split(/\n/g),o=l.length<=1,c="`";return o?`${c}${l.join(`
`).replace(/`/g,"\\`").replace(/\$\{/g,"\\${")}${c}`:`${c}
${l.map(h=>h?i+h:"").join(`
`).replace(/`/g,"\\`").replace(/\$\{/g,"\\${")}
${a}${c}`}const W="toMatchInlineSnapshot",z="toThrowErrorMatchingInlineSnapshot";function Gt(e,t){const n=t-W.length;if(e.slice(n,t)===W)return{code:e.slice(n),index:n};const r=t-z.length;return e.slice(t-r,t)===z?{code:e.slice(t-r),index:t-r}:{code:e.slice(t),index:t}}const Vt=/(?:toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot)\s*\(\s*(?:\/\*[\s\S]*\*\/\s*|\/\/.*(?:[\n\r\u2028\u2029]\s*|[\t\v\f \xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF]))*[\w$]*(['"`)])/;function Xt(e,t,n,r){const{code:s,index:a}=Gt(e,n),i=Vt.exec(s),l=/toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot/.exec(s);if(!i||i.index!==(l==null?void 0:l.index))return zt(e,t,a,r);const o=i[1],c=a+i.index+i[0].length,h=et(r,e,a);if(o===")")return t.appendRight(c-1,h),!0;const u=new RegExp(`(?:^|[^\\\\])${o}`).exec(e.slice(c));if(!u)return!1;const p=c+u.index+u[0].length;return t.overwrite(c-1,p,h),!0}const Ht=/^([^\S\n]*)\S/m;function xe(e){var t;const n=e.match(Ht);if(!n||!n[1])return e;const r=n[1],s=e.split(/\n/g);if(s.length<=2||s[0].trim()!==""||((t=s.at(-1))===null||t===void 0?void 0:t.trim())!=="")return e;for(let a=1;a<s.length-1;a++)if(s[a]!==""){if(s[a].indexOf(r)!==0)return e;s[a]=s[a].substring(r.length)}return s[s.length-1]="",e=s.join(`
`),e}async function Zt(e,t){await Promise.all(t.map(async n=>{n.readonly||await e.saveSnapshotFile(n.file,n.snapshot)}))}function Jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k={exports:{}},q;function Qt(){if(q)return k.exports;q=1;var e=function(t,n){var r,s,a=1,i=0,l=0,o=String.alphabet;function c(h,f,u){if(u){for(r=f;u=c(h,r),u<76&&u>65;)++r;return+h.slice(f-1,r)}return u=o&&o.indexOf(h.charAt(f)),u>-1?u+76:(u=h.charCodeAt(f)||0,u<45||u>127?u:u<46?65:u<48?u-1:u<58?u+18:u<65?u-11:u<91?u+11:u<97?u-37:u<123?u+5:u-63)}if((t+="")!=(n+="")){for(;a;)if(s=c(t,i++),a=c(n,l++),s<76&&a<76&&s>66&&a>66&&(s=c(t,i,i),a=c(n,l,i=r),l=r),s!=a)return s<a?-1:1}return 0};try{k.exports=e}catch{String.naturalCompare=e}return k.exports}var Yt=Qt(),te=Jt(Yt);const ee=(e,t,n,r,s,a)=>{const i=e.getMockName(),l=i==="vi.fn()"?"":` ${i}`;let o="";if(e.mock.calls.length!==0){const c=n+t.indent;o=` {${t.spacingOuter}${c}"calls": ${a(e.mock.calls,t,c,r,s)}${t.min?", ":","}${t.spacingOuter}${c}"results": ${a(e.mock.results,t,c,r,s)}${t.min?"":","}${t.spacingOuter}${n}}`}return`[MockFunction${l}]${o}`},ne=e=>e&&!!e._isMockFunction,se={serialize:ee,test:ne},{DOMCollection:re,DOMElement:ae,Immutable:ie,ReactElement:oe,ReactTestComponent:le,AsymmetricMatcher:ce}=ot;let F=[le,oe,ae,re,ie,ce,se];function Oe(e){F=[e].concat(F)}function ue(){return F}function he(e,t){return`${e} ${t}`}function de(e){if(!/ \d+$/.test(e))throw new Error("Snapshot keys must end with a number.");return e.replace(/ \d+$/,"")}function fe(e,t){const n=t.updateSnapshot,r=Object.create(null);let s="",a=!1;if(e!=null)try{s=e,new Function("exports",s)(r)}catch{}return(n==="all"||n==="new")&&s&&(a=!0),{data:r,dirty:a}}function pe(e){return e.includes(`
`)?`
${e}
`:e}function G(e){return e.length>2&&e[0]===`
`&&e.endsWith(`
`)?e.slice(1,-1):e}const me=!0,_e=!1;function Se(e,t=2,n={}){return j(it(e,{escapeRegex:me,indent:t,plugins:ue(),printFunctionName:_e,...n}))}function ge(e){return e.replace(/`|\\|\$\{/g,"\\$&")}function V(e){return`\`${ge(e)}\``}function j(e){return e.replace(/\r\n|\r/g,`
`)}async function ve(e,t,n){const r=Object.keys(t).sort(te).map(l=>`exports[${V(l)}] = ${V(j(t[l]))};`),s=`${e.getHeader()}

${r.join(`

`)}
`,a=await e.readSnapshotFile(n);a!=null&&a===s||await e.saveSnapshotFile(n,s)}function T(e=[],t=[]){const n=Array.from(e);return t.forEach((r,s)=>{const a=n[s];Array.isArray(e[s])?n[s]=T(e[s],r):$(a)?n[s]=D(e[s],r):n[s]=r}),n}function D(e,t){if($(e)&&$(t)){const n={...e};return Object.keys(t).forEach(r=>{$(t[r])&&!t[r].$$typeof?r in e?n[r]=D(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Array.isArray(t[r])?n[r]=T(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}else if(Array.isArray(e)&&Array.isArray(t))return T(e,t);return e}class nt extends Map{constructor(t,n){super(n),this.defaultFn=t}get(t){return this.has(t)||this.set(t,this.defaultFn(t)),super.get(t)}}class b extends nt{constructor(){super(()=>0);d(this,"_total")}valueOf(){return this._total=this.total()}increment(n){typeof this._total<"u"&&this._total++,this.set(n,this.get(n)+1)}total(){if(typeof this._total<"u")return this._total;let n=0;for(const r of this.values())n+=r;return n}}function X(e,t){return e.file===t.file&&e.column===t.column&&e.line===t.line}class P{constructor(t,n,r,s){d(this,"_counters",new b);d(this,"_dirty");d(this,"_updateSnapshot");d(this,"_snapshotData");d(this,"_initialData");d(this,"_inlineSnapshots");d(this,"_inlineSnapshotStacks");d(this,"_testIdToKeys",new nt(()=>[]));d(this,"_rawSnapshots");d(this,"_uncheckedKeys");d(this,"_snapshotFormat");d(this,"_environment");d(this,"_fileExists");d(this,"expand");d(this,"_added",new b);d(this,"_matched",new b);d(this,"_unmatched",new b);d(this,"_updated",new b);this.testFilePath=t,this.snapshotPath=n;const{data:a,dirty:i}=fe(r,s);this._fileExists=r!=null,this._initialData={...a},this._snapshotData={...a},this._dirty=i,this._inlineSnapshots=[],this._inlineSnapshotStacks=[],this._rawSnapshots=[],this._uncheckedKeys=new Set(Object.keys(this._snapshotData)),this.expand=s.expand||!1,this._updateSnapshot=s.updateSnapshot,this._snapshotFormat={printBasicPrototype:!1,escapeString:!1,...s.snapshotFormat},this._environment=s.snapshotEnvironment}get added(){return this._added}set added(t){this._added._total=t}get matched(){return this._matched}set matched(t){this._matched._total=t}get unmatched(){return this._unmatched}set unmatched(t){this._unmatched._total=t}get updated(){return this._updated}set updated(t){this._updated._total=t}static async create(t,n){const r=await n.snapshotEnvironment.resolvePath(t),s=await n.snapshotEnvironment.readSnapshotFile(r);return new P(t,r,s,n)}get environment(){return this._environment}markSnapshotsAsCheckedForTest(t){this._uncheckedKeys.forEach(n=>{/ \d+$| > /.test(n.slice(t.length))&&this._uncheckedKeys.delete(n)})}clearTest(t){this._inlineSnapshots=this._inlineSnapshots.filter(n=>n.testId!==t),this._inlineSnapshotStacks=this._inlineSnapshotStacks.filter(n=>n.testId!==t);for(const n of this._testIdToKeys.get(t)){const r=de(n),s=this._counters.get(r);s>0&&((n in this._snapshotData||n in this._initialData)&&(this._snapshotData[n]=this._initialData[n]),this._counters.set(r,s-1))}this._testIdToKeys.delete(t),this.added.delete(t),this.updated.delete(t),this.matched.delete(t),this.unmatched.delete(t)}_inferInlineSnapshotStack(t){const n=t.findIndex(s=>s.method.match(/__VITEST_(RESOLVES|REJECTS)__/));if(n!==-1)return t[n+3];const r=t.findIndex(s=>s.method.includes("__INLINE_SNAPSHOT__"));return r!==-1?t[r+2]:null}_addSnapshot(t,n,r){this._dirty=!0,r.stack?this._inlineSnapshots.push({snapshot:n,testId:r.testId,...r.stack}):r.rawSnapshot?this._rawSnapshots.push({...r.rawSnapshot,snapshot:n}):this._snapshotData[t]=n}async save(){const t=Object.keys(this._snapshotData).length,n=this._inlineSnapshots.length,r=this._rawSnapshots.length,s=!t&&!n&&!r,a={deleted:!1,saved:!1};return(this._dirty||this._uncheckedKeys.size)&&!s?(t&&(await ve(this._environment,this._snapshotData,this.snapshotPath),this._fileExists=!0),n&&await Bt(this._environment,this._inlineSnapshots),r&&await Zt(this._environment,this._rawSnapshots),a.saved=!0):!t&&this._fileExists&&(this._updateSnapshot==="all"&&(await this._environment.removeSnapshotFile(this.snapshotPath),this._fileExists=!1),a.deleted=!0),a}getUncheckedCount(){return this._uncheckedKeys.size||0}getUncheckedKeys(){return Array.from(this._uncheckedKeys)}removeUncheckedKeys(){this._updateSnapshot==="all"&&this._uncheckedKeys.size&&(this._dirty=!0,this._uncheckedKeys.forEach(t=>delete this._snapshotData[t]),this._uncheckedKeys.clear())}match({testId:t,testName:n,received:r,key:s,inlineSnapshot:a,isInline:i,error:l,rawSnapshot:o}){this._counters.increment(n);const c=this._counters.get(n);s||(s=he(n,c)),this._testIdToKeys.get(t).push(s),i&&this._snapshotData[s]!==void 0||this._uncheckedKeys.delete(s);let h=o&&typeof r=="string"?r:Se(r,void 0,this._snapshotFormat);o||(h=pe(h)),o&&o.content&&o.content.match(/\r\n/)&&!h.match(/\r\n/)&&(o.content=j(o.content));const f=i?a:o?o.content:this._snapshotData[s],u=o?f:f==null?void 0:f.trim(),p=u===(o?h:h.trim()),S=f!==void 0,y=i||this._fileExists||o&&o.content!=null;p&&!i&&!o&&(this._snapshotData[s]=h);let m;if(i){var _,g;const x=jt(l||new Error("snapshot"),{ignoreStackEntries:[]}),w=this._inferInlineSnapshotStack(x);if(!w)throw new Error(`@vitest/snapshot: Couldn't infer stack frame for inline snapshot.
${JSON.stringify(x)}`);m=((_=(g=this.environment).processStackTrace)===null||_===void 0?void 0:_.call(g,w))||w,m.column--;const v=this._inlineSnapshotStacks.filter(O=>X(O,m));if(v.length>0){this._inlineSnapshots=this._inlineSnapshots.filter(C=>!X(C,m));const O=v.find(C=>C.snapshot!==h);if(O)throw Object.assign(new Error("toMatchInlineSnapshot with different snapshots cannot be called at the same location"),{actual:h,expected:O.snapshot})}this._inlineSnapshotStacks.push({...m,testId:t,snapshot:h})}return S&&this._updateSnapshot==="all"||(!S||!y)&&(this._updateSnapshot==="new"||this._updateSnapshot==="all")?(this._updateSnapshot==="all"?p?this.matched.increment(t):(S?this.updated.increment(t):this.added.increment(t),this._addSnapshot(s,h,{stack:m,testId:t,rawSnapshot:o})):(this._addSnapshot(s,h,{stack:m,testId:t,rawSnapshot:o}),this.added.increment(t)),{actual:"",count:c,expected:"",key:s,pass:!0}):p?(this.matched.increment(t),{actual:"",count:c,expected:"",key:s,pass:!0}):(this.unmatched.increment(t),{actual:o?h:G(h),count:c,expected:u!==void 0?o?u:G(u):void 0,key:s,pass:!1})}async pack(){const t={filepath:this.testFilePath,added:0,fileDeleted:!1,matched:0,unchecked:0,uncheckedKeys:[],unmatched:0,updated:0},n=this.getUncheckedCount(),r=this.getUncheckedKeys();n&&this.removeUncheckedKeys();const s=await this.save();return t.fileDeleted=s.deleted,t.added=this.added.total(),t.matched=this.matched.total(),t.unmatched=this.unmatched.total(),t.updated=this.updated.total(),t.unchecked=s.deleted?0:n,t.uncheckedKeys=Array.from(r),t}}function H(e,t,n,r){const s=new Error(e);return Object.defineProperty(s,"actual",{value:n,enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(s,"expected",{value:r,enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(s,"diffOptions",{value:{expand:t}}),s}class Ie{constructor(t={}){d(this,"snapshotStateMap",new Map);this.options=t}async setup(t,n){this.snapshotStateMap.has(t)||this.snapshotStateMap.set(t,await P.create(t,n))}async finish(t){const r=await this.getSnapshotState(t).pack();return this.snapshotStateMap.delete(t),r}skipTest(t,n){this.getSnapshotState(t).markSnapshotsAsCheckedForTest(n)}clearTest(t,n){this.getSnapshotState(t).clearTest(n)}getSnapshotState(t){const n=this.snapshotStateMap.get(t);if(!n)throw new Error(`The snapshot state for '${t}' is not found. Did you call 'SnapshotClient.setup()'?`);return n}assert(t){const{filepath:n,name:r,testId:s=r,message:a,isInline:i=!1,properties:l,inlineSnapshot:o,error:c,errorMessage:h,rawSnapshot:f}=t;let{received:u}=t;if(!n)throw new Error("Snapshot cannot be used outside of test");const p=this.getSnapshotState(n);if(typeof l=="object"){if(typeof u!="object"||!u)throw new Error("Received value must be an object when the matcher has properties");try{var S,y;if(((S=(y=this.options).isEqual)===null||S===void 0?void 0:S.call(y,u,l))??!1)u=D(u,l);else throw H("Snapshot properties mismatched",p.expand,u,l)}catch(v){throw v.message=h||"Snapshot mismatched",v}}const m=[r,...a?[a]:[]].join(" > "),{actual:_,expected:g,key:x,pass:w}=p.match({testId:s,testName:m,received:u,isInline:i,error:c,inlineSnapshot:o,rawSnapshot:f});if(!w)throw H(`Snapshot \`${x||"unknown"}\` mismatched`,p.expand,f?_:_==null?void 0:_.trim(),f?g:g==null?void 0:g.trim())}async assertRaw(t){if(!t.rawSnapshot)throw new Error("Raw snapshot is required");const{filepath:n,rawSnapshot:r}=t;if(r.content==null){if(!n)throw new Error("Snapshot cannot be used outside of test");const s=this.getSnapshotState(n);t.filepath||(t.filepath=n),r.file=await s.environment.resolveRawPath(n,r.file),r.content=await s.environment.readSnapshotFile(r.file)??void 0}return this.assert(t)}clear(){this.snapshotStateMap.clear()}}export{Ie as S,Oe as a,xe as s};
//# sourceMappingURL=vitest_snapshot-BjQ2bF-C.js.map
