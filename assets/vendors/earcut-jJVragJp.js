function S(e,n,t=2){const x=e.length;let r=O(e,0,x,t,!0);const u=[];if(!r||r.next===r.prev)return u;let i,l,c;if(e.length>80*t){i=e[0],l=e[1];let s=i,Z=l;for(let h=t;h<x;h+=t){const p=e[h],F=e[h+1];p<i&&(i=p),F<l&&(l=F),p>s&&(s=p),F>Z&&(Z=F)}c=Math.max(s-i,Z-l),c=c!==0?32767/c:0}return I(r,u,t,i,l,c,0),u}function O(e,n,t,x,r){let u;if(r===m(e,n,t,x)>0)for(let i=n;i<t;i+=x)u=D(i/x|0,e[i],e[i+1],u);else for(let i=t-x;i>=n;i-=x)u=D(i/x|0,e[i],e[i+1],u);return u&&P(u,u.next)&&(z(u),u=u.next),u}function k(e,n){if(!e)return e;n||(n=e);let t=e,x;do if(x=!1,!t.steiner&&(P(t,t.next)||v(t.prev,t,t.next)===0)){if(z(t),t=n=t.prev,t===t.next)break;x=!0}else t=t.next;while(x||t!==n);return n}function I(e,n,t,x,r,u,i){if(!e)return;!i&&u&&K(e,x,r,u);let l=e;for(;e.prev!==e.next;){const c=e.prev,s=e.next;if(u?B(e,x,r,u):V(e)){n.push(c.i,e.i,s.i),z(e),e=s.next,l=s.next;continue}if(e=s,e===l){i?i===1?(e=G(k(e),n),I(e,n,t,x,r,u,2)):i===2&&J(e,n,t,x,r,u):I(k(e),n,t,x,r,u,1);break}}}function V(e){const n=e.prev,t=e,x=e.next;if(v(n,t,x)>=0)return!1;const r=n.x,u=t.x,i=x.x,l=n.y,c=t.y,s=x.y,Z=Math.min(r,u,i),h=Math.min(l,c,s),p=Math.max(r,u,i),F=Math.max(l,c,s);let y=x.next;for(;y!==n;){if(y.x>=Z&&y.x<=p&&y.y>=h&&y.y<=F&&g(r,l,u,c,i,s,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function B(e,n,t,x){const r=e.prev,u=e,i=e.next;if(v(r,u,i)>=0)return!1;const l=r.x,c=u.x,s=i.x,Z=r.y,h=u.y,p=i.y,F=Math.min(l,c,s),y=Math.min(Z,h,p),w=Math.max(l,c,s),M=Math.max(Z,h,p),A=T(F,y,n,t,x),C=T(w,M,n,t,x);let o=e.prevZ,f=e.nextZ;for(;o&&o.z>=A&&f&&f.z<=C;){if(o.x>=F&&o.x<=w&&o.y>=y&&o.y<=M&&o!==r&&o!==i&&g(l,Z,c,h,s,p,o.x,o.y)&&v(o.prev,o,o.next)>=0||(o=o.prevZ,f.x>=F&&f.x<=w&&f.y>=y&&f.y<=M&&f!==r&&f!==i&&g(l,Z,c,h,s,p,f.x,f.y)&&v(f.prev,f,f.next)>=0))return!1;f=f.nextZ}for(;o&&o.z>=A;){if(o.x>=F&&o.x<=w&&o.y>=y&&o.y<=M&&o!==r&&o!==i&&g(l,Z,c,h,s,p,o.x,o.y)&&v(o.prev,o,o.next)>=0)return!1;o=o.prevZ}for(;f&&f.z<=C;){if(f.x>=F&&f.x<=w&&f.y>=y&&f.y<=M&&f!==r&&f!==i&&g(l,Z,c,h,s,p,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function G(e,n){let t=e;do{const x=t.prev,r=t.next.next;!P(x,r)&&H(x,t,t.next,r)&&N(x,r)&&N(r,x)&&(n.push(x.i,t.i,r.i),z(t),z(t.next),t=e=r),t=t.next}while(t!==e);return k(t)}function J(e,n,t,x,r,u){let i=e;do{let l=i.next.next;for(;l!==i.prev;){if(i.i!==l.i&&U(i,l)){let c=$(i,l);i=k(i,i.next),c=k(c,c.next),I(i,n,t,x,r,u,0),I(c,n,t,x,r,u,0);return}l=l.next}i=i.next}while(i!==e)}function K(e,n,t,x){let r=e;do r.z===0&&(r.z=T(r.x,r.y,n,t,x)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,Q(r)}function Q(e){let n,t=1;do{let x=e,r;e=null;let u=null;for(n=0;x;){n++;let i=x,l=0;for(let s=0;s<t&&(l++,i=i.nextZ,!!i);s++);let c=t;for(;l>0||c>0&&i;)l!==0&&(c===0||!i||x.z<=i.z)?(r=x,x=x.nextZ,l--):(r=i,i=i.nextZ,c--),u?u.nextZ=r:e=r,r.prevZ=u,u=r;x=i}u.nextZ=null,t*=2}while(n>1);return e}function T(e,n,t,x,r){return e=(e-t)*r|0,n=(n-x)*r|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e|n<<1}function R(e,n,t,x,r,u,i,l){return(r-i)*(n-l)>=(e-i)*(u-l)&&(e-i)*(x-l)>=(t-i)*(n-l)&&(t-i)*(u-l)>=(r-i)*(x-l)}function g(e,n,t,x,r,u,i,l){return!(e===i&&n===l)&&R(e,n,t,x,r,u,i,l)}function U(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!W(e,n)&&(N(e,n)&&N(n,e)&&_(e,n)&&(v(e.prev,e,n.prev)||v(e,n.prev,n))||P(e,n)&&v(e.prev,e,e.next)>0&&v(n.prev,n,n.next)>0)}function v(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function P(e,n){return e.x===n.x&&e.y===n.y}function H(e,n,t,x){const r=E(v(e,n,t)),u=E(v(e,n,x)),i=E(v(t,x,e)),l=E(v(t,x,n));return!!(r!==u&&i!==l||r===0&&L(e,t,n)||u===0&&L(e,x,n)||i===0&&L(t,e,x)||l===0&&L(t,n,x))}function L(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function E(e){return e>0?1:e<0?-1:0}function W(e,n){let t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&H(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function N(e,n){return v(e.prev,e,e.next)<0?v(e,n,e.next)>=0&&v(e,e.prev,n)>=0:v(e,n,e.prev)<0||v(e,e.next,n)<0}function _(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,u=(e.y+n.y)/2;do t.y>u!=t.next.y>u&&t.next.y!==t.y&&r<(t.next.x-t.x)*(u-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next;while(t!==e);return x}function $(e,n){const t=j(e.i,e.x,e.y),x=j(n.i,n.x,n.y),r=e.next,u=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,u.next=x,x.prev=u,x}function D(e,n,t,x){const r=j(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function j(e,n,t){return{i:e,x:n,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function m(e,n,t,x){let r=0;for(let u=n,i=t-x;u<t;u+=x)r+=(e[i]-e[u])*(e[u+1]+e[i+1]),i=u;return r}export{S as e};
//# sourceMappingURL=earcut-jJVragJp.js.map
