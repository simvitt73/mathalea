import{r as $n}from"./mathjs-DKCMnljp.js";var ne,Yt;function w(){return Yt||(Yt=1,ne={NO_CHANGE:"NO_CHANGE",EQUALITY:"EQUALITY",SIMPLIFY_ARITHMETIC:"SIMPLIFY_ARITHMETIC",DIVISION_BY_NEGATIVE_ONE:"DIVISION_BY_NEGATIVE_ONE",DIVISION_BY_ONE:"DIVISION_BY_ONE",MULTIPLY_BY_ZERO:"MULTIPLY_BY_ZERO",REARRANGE_COEFF:"REARRANGE_COEFF",REDUCE_EXPONENT_BY_ZERO:"REDUCE_EXPONENT_BY_ZERO",REDUCE_ZERO_NUMERATOR:"REDUCE_ZERO_NUMERATOR",REMOVE_ADDING_ZERO:"REMOVE_ADDING_ZERO",REMOVE_EXPONENT_BY_ONE:"REMOVE_EXPONENT_BY_ONE",REMOVE_EXPONENT_BASE_ONE:"REMOVE_EXPONENT_BASE_ONE",REMOVE_MULTIPLYING_BY_NEGATIVE_ONE:"REMOVE_MULTIPLYING_BY_NEGATIVE_ONE",REMOVE_MULTIPLYING_BY_ONE:"REMOVE_MULTIPLYING_BY_ONE",RESOLVE_DOUBLE_MINUS:"RESOLVE_DOUBLE_MINUS",COLLECT_AND_COMBINE_LIKE_TERMS:"COLLECT_AND_COMBINE_LIKE_TERMS",COLLECT_LIKE_TERMS:"COLLECT_LIKE_TERMS",COLLECT_CONSTANT_EXPONENTS:"COLLECT_CONSTANT_EXPONENTS",ADD_COEFFICIENT_OF_ONE:"ADD_COEFFICIENT_OF_ONE",ADD_POLYNOMIAL_TERMS:"ADD_POLYNOMIAL_TERMS",GROUP_COEFFICIENTS:"GROUP_COEFFICIENTS",UNARY_MINUS_TO_NEGATIVE_ONE:"UNARY_MINUS_TO_NEGATIVE_ONE",CROSS_PRODUCT_EQUALITY:"CROSS_PRODUCT_EQUALITY",ADD_EXPONENT_OF_ONE:"ADD_EXPONENT_OF_ONE",COLLECT_POLYNOMIAL_EXPONENTS:"COLLECT_POLYNOMIAL_EXPONENTS",MULTIPLY_COEFFICIENTS:"MULTIPLY_COEFFICIENTS",MULTIPLY_POLYNOMIAL_TERMS:"MULTIPLY_POLYNOMIAL_TERMS",BREAK_UP_FRACTION:"BREAK_UP_FRACTION",CANCEL_MINUSES:"CANCEL_MINUSES",CANCEL_TERMS:"CANCEL_TERMS",SIMPLIFY_FRACTION:"SIMPLIFY_FRACTION",SIMPLIFY_SIGNS:"SIMPLIFY_SIGNS",SIMPLIFY_SIGNS_BEFORE:"SIMPLIFY_SIGNS_BEFORE",FIND_GCD:"FIND_GCD",CANCEL_GCD:"CANCEL_GCD",CONVERT_MIXED_NUMBER_TO_IMPROPER_FRACTION:"CONVERT_MIXED_NUMBER_TO_IMPROPER_FRACTION",IMPROPER_FRACTION_NUMERATOR:"IMPROPER_FRACTION_NUMERATOR",ADD_FRACTIONS:"ADD_FRACTIONS",ADD_NUMERATORS:"ADD_NUMERATORS",COMBINE_NUMERATORS:"COMBINE_NUMERATORS",COMMON_DENOMINATOR:"COMMON_DENOMINATOR",CONVERT_INTEGER_TO_FRACTION:"CONVERT_INTEGER_TO_FRACTION",DIVIDE_FRACTION_FOR_ADDITION:"DIVIDE_FRACTION_FOR_ADDITION",MULTIPLY_DENOMINATORS:"MULTIPLY_DENOMINATORS",MULTIPLY_NUMERATORS:"MULTIPLY_NUMERATORS",MULTIPLY_FRACTIONS:"MULTIPLY_FRACTIONS",SIMPLIFY_DIVISION:"SIMPLIFY_DIVISION",MULTIPLY_BY_INVERSE:"MULTIPLY_BY_INVERSE",DISTRIBUTE:"DISTRIBUTE",DISTRIBUTE_NEGATIVE_ONE:"DISTRIBUTE_NEGATIVE_ONE",SIMPLIFY_TERMS:"SIMPLIFY_TERMS",EXPAND_EXPONENT:"EXPAND_EXPONENT",ABSOLUTE_VALUE:"ABSOLUTE_VALUE",CANCEL_EXPONENT:"CANCEL_EXPONENT",CANCEL_EXPONENT_AND_ROOT:"CANCEL_EXPONENT_AND_ROOT",CANCEL_ROOT:"CANCEL_ROOT",COMBINE_UNDER_ROOT:"COMBINE_UNDER_ROOT",CONVERT_MULTIPLICATION_TO_EXPONENT:"CONVERT_MULTIPLICATION_TO_EXPONENT",DISTRIBUTE_NTH_ROOT:"DISTRIBUTE_NTH_ROOT",EVALUATE_DISTRIBUTED_NTH_ROOT:"EVALUATE_DISTRIBUTED_NTH_ROOT",FACTOR_INTO_PRIMES:"FACTOR_INTO_PRIMES",GROUP_TERMS_BY_ROOT:"GROUP_TERMS_BY_ROOT",NTH_ROOT_VALUE:"NTH_ROOT_VALUE",ADD_NTH_ROOTS:"ADD_NTH_ROOTS",MULTIPLY_NTH_ROOTS:"MULTIPLY_NTH_ROOTS",ADD_TO_BOTH_SIDES:"ADD_TO_BOTH_SIDES",DIVIDE_FROM_BOTH_SIDES:"DIVIDE_FROM_BOTH_SIDES",MULTIPLY_BOTH_SIDES_BY_INVERSE_FRACTION:"MULTIPLY_BOTH_SIDES_BY_INVERSE_FRACTION",MULTIPLY_BOTH_SIDES_BY_NEGATIVE_ONE:"MULTIPLY_BOTH_SIDES_BY_NEGATIVE_ONE",MULTIPLY_TO_BOTH_SIDES:"MULTIPLY_TO_BOTH_SIDES",SIMPLIFY_LEFT_SIDE:"SIMPLIFY_LEFT_SIDE",SIMPLIFY_RIGHT_SIDE:"SIMPLIFY_RIGHT_SIDE",SUBTRACT_FROM_BOTH_SIDES:"SUBTRACT_FROM_BOTH_SIDES",SWAP_SIDES:"SWAP_SIDES",FIND_ROOTS:"FIND_ROOTS",STATEMENT_IS_TRUE:"STATEMENT_IS_TRUE",STATEMENT_IS_FALSE:"STATEMENT_IS_FALSE",FACTOR_SYMBOL:"FACTOR_SYMBOL",FACTOR_DIFFERENCE_OF_SQUARES:"FACTOR_DIFFERENCE_OF_SQUARES",FACTOR_PERFECT_SQUARE:"FACTOR_PERFECT_SQUARE",FACTOR_SUM_PRODUCT_RULE:"FACTOR_SUM_PRODUCT_RULE",BREAK_UP_TERM:"BREAK_UP_TERM"}),ne}var se,Vt;function B(){if(Vt)return se;Vt=1;const{create:c,NodeDependencies:r,lcmDependencies:s,nthRootDependencies:n,gcdDependencies:t,fractionDependencies:e,parseDependencies:u,evaluateDependencies:o,simplifyDependencies:i,formatDependencies:p}=$n();return se=c({fractionDependencies:e,lcmDependencies:s,gcdDependencies:t,nthRootDependencies:n,NodeDependencies:r,formatDependencies:p,parseDependencies:u,evaluateDependencies:o,simplifyDependencies:i},{}),se}var oe,kt;function G(){if(kt)return oe;kt=1;const c={};return c.isOperator=function(r,s=null){return r.type==="OperatorNode"&&r.fn!=="unaryMinus"&&"*+-/^".includes(r.op)&&(s?r.op===s:!0)},c.isParenthesis=function(r){return r.type==="ParenthesisNode"},c.isUnaryMinus=function(r){return r.type==="OperatorNode"&&r.fn==="unaryMinus"},c.isFunction=function(r,s=null){return!(r.type!=="FunctionNode"||s&&r.fn.name!==s)},c.isSymbol=function(r,s=!1){return r.type==="SymbolNode"?!0:s&&c.isUnaryMinus(r)?c.isSymbol(r.args[0],!1):!1},c.isConstant=function(r,s=!1){return r.type==="ConstantNode"?!0:s&&c.isUnaryMinus(r)?!!c.isConstant(r.args[0],!1):!1},c.isConstantFraction=function(r,s=!1){return c.isOperator(r,"/")?r.args.every(n=>c.isConstant(n,s)):!1},c.isConstantOrConstantFraction=function(r,s=!1){return!!(c.isConstant(r,s)||c.isConstantFraction(r,s))},c.isIntegerFraction=function(r,s=!1){if(!c.isConstantFraction(r,s))return!1;let n=r.args[0],t=r.args[1];return s&&(c.isUnaryMinus(n)&&(n=n.args[0]),c.isUnaryMinus(t)&&(t=t.args[0])),Number.isInteger(parseFloat(n.value))&&Number.isInteger(parseFloat(t.value))},oe=c,oe}var ae,Ht;function Z(){if(Ht)return ae;Ht=1;const c=B(),r=G(),s={operator(n,t,e=!1){switch(n){case"+":return new c.OperatorNode("+","add",t);case"-":return new c.OperatorNode("-","subtract",t);case"/":return new c.OperatorNode("/","divide",t);case"*":return new c.OperatorNode("*","multiply",t,e);case"^":return new c.OperatorNode("^","pow",t);default:throw Error("Unsupported operation: "+n)}},unaryMinus(n){return new c.OperatorNode("-","unaryMinus",[n])},constant(n){return new c.ConstantNode(n)},symbol(n){return new c.SymbolNode(n)},parenthesis(n){return new c.ParenthesisNode(n)},list(n){return new c.ArrayNode(n)},term(n,t,e,u=!1){let o=n;return t&&(o=this.operator("^",[o,t])),e&&(u||parseFloat(e.value)!==1)&&(r.isConstant(e)&&parseFloat(e.value)===-1&&!u?o=this.unaryMinus(o):o=this.operator("*",[e,o],!0)),o},polynomialTerm(n,t,e,u=!1){return this.term(n,t,e,u)},nthRoot(n,t){const e=s.symbol("nthRoot");return new c.FunctionNode(e,[n,t])}};return ae=s,ae}var ie,Xt;function Y(){if(Xt)return ie;Xt=1;function c(r){if(r.evaluate!=null)return r.evaluate();if(r.eval!=null)return r.eval();throw Error(`Problem, no method for evaluate this : ${r}`)}return ie=c,ie}var ue,Zt;function wt(){if(Zt)return ue;Zt=1;const c=Z(),r=G(),s=Y();class n{constructor(u,o,i=!1){const p=n.parseNode(u,o,i);this.base=p.base,this.exponent=p.exponent,this.coeff=p.coeff}getBaseNode(){return this.base}getCoeffNode(u=!1){return!this.coeff&&u?c.constant(1):this.coeff}getCoeffValue(){return this.coeff?s(this.coeff):1}getExponentNode(u=!1){return!this.exponent&&u?c.constant(1):this.exponent}hasFractionCoeff(){return this.coeff&&r.isOperator(this.coeff)}hasCoeff(){return!!this.coeff}}n.isTerm=function(e,u,o=!1){try{return new n(e,u,o),!0}catch{return!1}},n.parseNode=function(e,u,o){let i,p,a;if(r.isOperator(e))if(e.op==="^"){const l=e.args[0];if(!u(l))throw Error("Expected base term, got "+l);i=l,p=e.args[1]}else if(e.op==="*"){if(o&&!e.implicit)throw Error("Expected implicit multiplication");if(e.args.length!==2)throw Error("Expected two arguments to *");const l=r.isParenthesis(e.args[0])?e.args[0].content:e.args[0];if(!r.isConstantOrConstantFraction(l))throw Error("Expected coefficient to be constant or fraction of constants term, got "+l);a=l;const g=new n(e.args[1],u,o);if(g.hasCoeff())throw Error("Cannot have two coefficients "+l+" and "+g.getCoeffNode());i=g.getBaseNode(),p=g.getExponentNode()}else if(e.op==="/"){const l=e.args[1];if(!r.isConstant(l))throw Error("denominator must be constant node, instead of "+l);const g=new n(e.args[0],u,o);if(g.hasFractionCoeff())throw Error("Terms with coefficients cannot have nested fractions");p=g.getExponentNode(),i=g.getBaseNode();const h=g.getCoeffNode(!0);a=c.operator("/",[h,l])}else throw Error("Unsupported operatation for term with coefficent: "+e.op);else if(r.isUnaryMinus(e)){var f=e.args[0];r.isParenthesis(f)&&(f=f.content);const l=new n(f,u,o);p=l.getExponentNode(),i=l.getBaseNode(),l.hasCoeff()?a=t(l.getCoeffNode()):a=c.constant(-1)}else if(u(e))i=e;else{if(r.isParenthesis(e))return n.parseNode(e.content,u,o);throw Error("Unsupported node type: "+e.type)}return{base:i,exponent:p,coeff:a}};function t(e){if(r.isConstant(e))e=c.constant(0-parseFloat(e.value));else{const u=0-parseFloat(e.args[0].value);e.args[0]=c.constant(u)}return e}return ue=n,ue}var ce,$t;function Tn(){if($t)return ce;$t=1;const c=G(),r=wt();class s extends r{constructor(t,e=!1){super(t,s.baseNodeFunc,e)}getSymbolNode(){return this.base}getSymbolName(){return this.base.name}}return s.baseNodeFunc=function(n){return c.isSymbol(n)},s.isPolynomialTerm=function(n,t=!1){return r.isTerm(n,s.baseNodeFunc,t)},ce=s,ce}var le,jt;function U(){if(jt)return le;jt=1;const c=Z(),r=G(),s=Tn(),n={};return n.isNegative=function(t){if(r.isUnaryMinus(t))return!n.isNegative(t.args[0]);if(r.isConstant(t))return parseFloat(t.value)<0;if(r.isConstantFraction(t)){const e=parseFloat(t.args[0].value),u=parseFloat(t.args[1].value);if(e<0||u<0)return!(e<0&&u<0)}else if(s.isPolynomialTerm(t)){const e=new s(t);return n.isNegative(e.getCoeffNode(!0))}return!1},n.negate=function(t,e=!1){if(r.isConstantFraction(t))return t.args[0]=n.negate(t.args[0],e),t;if(s.isPolynomialTerm(t))return n.negatePolynomialTerm(t,e);if(!e){if(r.isUnaryMinus(t))return t.args[0];if(r.isConstant(t))return c.constant(0-parseFloat(t.value))}return c.unaryMinus(t)},n.negatePolynomialTerm=function(t,e=!1){if(!s.isPolynomialTerm(t))throw Error("node is not a polynomial term");const u=new s(t);let o;if(!u.hasCoeff())o=c.constant(-1);else{const i=u.getCoeffNode();if(i.value==="-1")o=null;else if(u.hasFractionCoeff()){let p=i.args[0];p=n.negate(p,e);const a=i.args[1];o=c.operator("/",[p,a])}else o=n.negate(i,e),o.value==="1"&&(o=null)}return c.polynomialTerm(u.getSymbolNode(),u.getExponentNode(),o)},le=n,le}var pe,Qt;function jn(){if(Qt)return pe;Qt=1;const c=U(),r=Z(),s=G(),n={};return n.isType=function(t,e,u=!0,o=!0){return e(t)?!0:u&&s.isUnaryMinus(t)?n.isType(t.args[0],e,u,o):o&&s.isParenthesis(t)?n.isType(t.content,e,u,o):!1},n.getType=function(t,e,u=!0,o=!0,i=void 0){if(u===!0&&i===void 0)throw Error("Error in `getType`: moveUnaryMinus is undefined");if(e(t))return t;if(u&&s.isUnaryMinus(t))return i(n.getType(t.args[0],e,u,o,i));if(o&&s.isParenthesis(t))return n.getType(t.content,e,u,o,i);throw Error("`getType` called on a node that does not belong to specified type")},n.isFraction=function(t,e=!0,u=!0){return n.isType(t,o=>s.isOperator(o,"/"),e,u)},n.getFraction=function(t,e=!0,u=!0){const o=function(i){if(!s.isOperator(i,"/"))throw Error("Expected a fraction");const p=i.args[0],a=i.args[1],f=c.negate(p);return r.operator("/",[f,a])};return n.getType(t,i=>s.isOperator(i,"/"),u,e,o)},pe=n,pe}var fe,Wt;function Qn(){if(Wt)return fe;Wt=1;const c=U(),r=G();function s(o){if(!r.isOperator(o,"/")||o.args.length!==2)return!1;const i=o.args[0],p=o.args[1];if(!(r.isOperator(i,"*")&&i.implicit))return!1;const a=r.isUnaryMinus(i.args[0])?c.negate(i.args[0].args[0]):i.args[0],f=r.isParenthesis(i.args[1])?i.args[1].content:i.args[1];if(!(r.isConstant(a)&&r.isConstant(f)))return!1;const l=r.isParenthesis(p)?p.content:p;return!!r.isConstant(l)}function n(o){if(!s(o))throw Error("Expected a mixed number");return r.isUnaryMinus(o.args[0].args[0])}function t(o){if(!s(o))throw Error("Expected a mixed number");const i=r.isUnaryMinus(o.args[0].args[0])?o.args[0].args[0].args[0]:o.args[0].args[0];return parseInt(i.value)}function e(o){if(!s(o))throw Error("Expected a mixed number");const i=r.isParenthesis(o.args[0].args[1])?o.args[0].args[1].content:o.args[0].args[1];return parseInt(i.value)}function u(o){if(!s(o))throw Error("Expected a mixed number");const i=r.isParenthesis(o.args[1])?o.args[1].content:o.args[1];return parseInt(i.value)}return fe={isMixedNumber:s,isNegativeMixedNumber:n,getWholeNumberValue:t,getNumeratorValue:e,getDenominatorValue:u},fe}var ge,Kt;function Wn(){if(Kt)return ge;Kt=1;const c=G(),r=wt();class s extends r{constructor(t,e=!1){super(t,s.baseNodeFunc,e)}}return s.baseNodeFunc=function(n){return c.isFunction(n,"nthRoot")},s.isNthRootTerm=function(n,t=!1){return r.isTerm(n,s.baseNodeFunc,t)},ge=s,ge}var he,zt;function Nn(){if(zt)return he;zt=1;const c=w(),r=G();class s{constructor(t,e,u,o=[]){if(!u)throw Error("node is not defined");if(t===void 0||typeof t!="string")throw Error("changetype isn't valid");this.changeType=t,this.oldNode=e,this.newNode=u,this.substeps=o}hasChanged(){return this.changeType!==c.NO_CHANGE}}return s.resetChangeGroups=function(n){return n=n.cloneDeep(),n.filter(t=>t.changeGroup).forEach(t=>{delete t.changeGroup}),n},s.noChange=function(n){return new s(c.NO_CHANGE,null,n)},s.nodeChanged=function(n,t,e,u=!0,o=[]){return u&&(t.changeGroup=1,e.changeGroup=1),new s(n,t,e,o)},s.childChanged=function(n,t,e=null){const u=n.cloneDeep(),o=n.cloneDeep();let i=t.substeps;if(!t.oldNode)throw Error("Expected old node for changeType: "+t.changeType);function p(a,f){return a.map(l=>{l=f(l),l.substeps=p(l.substeps,f)}),a}if(r.isParenthesis(n))u.content=t.oldNode,o.content=t.newNode,i=p(i,a=>{const f=n.cloneDeep(),l=n.cloneDeep();return f.content=a.oldNode,l.content=a.newNode,a.oldNode=f,a.newNode=l,a});else if(r.isOperator(n)||r.isFunction(n)&&e!==null)u.args[e]=t.oldNode,o.args[e]=t.newNode,i=p(i,a=>{const f=n.cloneDeep(),l=n.cloneDeep();return f.args[e]=a.oldNode,l.args[e]=a.newNode,a.oldNode=f,a.newNode=l,a});else if(r.isUnaryMinus(n))u.args[0]=t.oldNode,o.args[0]=t.newNode,i=p(i,a=>{const f=n.cloneDeep(),l=n.cloneDeep();return f.args[0]=a.oldNode,l.args[0]=a.newNode,a.oldNode=f,a.newNode=l,a});else throw Error("Unexpected node type: "+n.type);return new s(t.changeType,u,o,i)},he=s,he}var Ce,Jt;function P(){if(Jt)return Ce;Jt=1;const c=Z(),r=jn(),s=Qn(),n=Wn(),t=Tn(),e=Nn(),u=wt(),o=G();return Ce={Creator:c,CustomType:r,MixedNumber:s,NthRootTerm:n,PolynomialTerm:t,Status:e,Term:u,Type:o},Ce}var Te,er;function mn(){if(er)return Te;er=1;const c=P();function r(t,e){if(!c.Type.isOperator(t,"+"))return!1;const u=t.args;if(!u.every(l=>c.Term.isTerm(l,e.baseNodeFunc))||u.length===1)return!1;const o=u.map(l=>new e(l)),i=o[0],p=i.getBaseNode(),a=i.getExponentNode(!0);return o.slice(1).every(l=>{const g=p.equals(l.getBaseNode()),m=l.getExponentNode(!0).equals(a);return g&&m})}function s(t){return r(t,c.NthRootTerm)}function n(t){return r(t,c.PolynomialTerm)}return Te={canAddLikeTermNodes:r,canAddLikeTermNthRootNodes:s,canAddLikeTermPolynomialNodes:n},Te}var Ne,tr;function Lt(){if(tr)return Ne;tr=1;const c=P();function r(s){if(c.Type.isOperator(s)||c.Type.isFunction(s))return s.args.every(n=>r(n));if(c.Type.isParenthesis(s))return r(s.content);if(c.Type.isConstant(s,!0))return!0;if(c.Type.isSymbol(s))return!1;if(c.Type.isUnaryMinus(s))return r(s.args[0]);throw Error("Unsupported node type: "+s.type)}return Ne=r,Ne}var me,rr;function Kn(){if(rr)return me;rr=1;const c=P(),r=Lt();function s(n){const t=n.leftNode,e=n.rightNode,u=c.Type.isConstant(e)&&parseFloat(e.value)===0,o=c.Type.isOperator(t,"*")||c.Type.isOperator(t,"^");if(!(u&&o))return!1;if(c.Type.isOperator(t,"*"))return t.args.filter(p=>!r(p)).length>=1;if(c.Type.isOperator(t,"^"))return!r(t)}return me=s,me}var ye,nr;function yn(){if(nr)return ye;nr=1;const c=Z(),r=G();function s(e){return e.args?e.args[0]:e}function n(e){return r.isConstant(e)?c.constant(1):e.args[1]}function t(e){return r.isOperator(e,"^")&&r.isConstant(e.args[0])||r.isConstant(e)}return ye={getBaseNode:s,getExponentNode:n,isConstantOrConstantPower:t},ye}var Se,sr;function zn(){if(sr)return Se;sr=1;const c=yn(),r=P();function s(n){if(!r.Type.isOperator(n)||n.op!=="*")return!1;const t=n.args;if(!t.every(i=>c.isConstantOrConstantPower(i))||t.every(i=>!r.Type.isOperator(i,"^")))return!1;const e=t.map(i=>c.getBaseNode(i)),u=e[0];return e.slice(1).every(i=>u.value===i.value)}return Se=s,Se}var Ee,or;function Sn(){if(or)return Ee;or=1;const c=P();function r(s){if(!c.Type.isOperator(s)||s.op!=="*")return!1;const n=s.args;if(!n.every(o=>c.PolynomialTerm.isPolynomialTerm(o))||n.length===1)return!1;const t=s.args.map(o=>new c.PolynomialTerm(o));if(!t.every(o=>!o.hasCoeff()))return!1;const e=t[0];return t.slice(1).every(o=>e.getSymbolName()===o.getSymbolName())}return Ee=r,Ee}var Oe,ar;function En(){if(ar)return Oe;ar=1;const c={};return c.getPrimeFactors=function(r){let s=[];if(r<0)return s=[-1],s=s.concat(c.getPrimeFactors(-1*r)),s;const n=Math.sqrt(r);let t=2;if(r%2)for(t=3;r%t&&t<=n;)t=t+2;return t>n?s.push(r):(s.push(t),s=s.concat(c.getPrimeFactors(r/t))),s},c.getFactorPairs=function(r){const s=[],n=Math.floor(Math.sqrt(Math.abs(r)));for(var t=-n;t<=n;t++)if(t!==0&&r%t===0){const e=r/t;s.push([t,e])}return s},Oe=c,Oe}var de,ir;function $(){if(ir)return de;ir=1;const c=Y(),r=U(),s=P();function n(a){if(s.MixedNumber.isMixedNumber(a))return a;if(s.Type.isConstant(a,!0)){const f=s.Creator.constant(c(a));return a.changeGroup&&(f.changeGroup=a.changeGroup),f}else if(s.Type.isOperator(a)){if("+-/*".includes(a.op)){let f;return a.op==="/"?f="*":a.op==="-"?f="+":f=a.op,t(a,f)}else a.args.forEach((f,l)=>{a.args[l]=n(f)});return a}else{if(s.Type.isParenthesis(a))return a.content=n(a.content),a;if(s.Type.isUnaryMinus(a)){const f=n(a.args[0]),l=r.negate(f,!0);return a.changeGroup&&(l.changeGroup=a.changeGroup),l}else if(s.Type.isFunction(a)&&a.fn.args){const f=n(a.fn),l=n(a.args[0]);return s.Creator.operator("*",[f,s.Creator.parenthesis(l)])}else return s.Type.isFunction(a,"abs")?(a.args[0]=n(a.args[0]),a):(s.Type.isFunction(a,"nthRoot")&&(a.args[0]=n(a.args[0]),a.args[1]&&(a.args[1]=n(a.args[1]))),a)}}function t(a,f){const l=e(a,f);return l.length===1?a=l[0]:(a.op==="/"&&(l.length>2||p(a))?a=s.Creator.operator("*",l):a.op==="-"?a=s.Creator.operator("+",l):a.args=l,a.op==="*"&&(a.implicit=!1)),a}function e(a,f){if(!s.Type.isOperator(a))return[n(a)];switch(a.op){case"*":case"/":if(f!=="*")return[n(a)];break;case"+":case"-":if(f!=="+")return[n(a)];break;default:return[n(a)]}if(s.PolynomialTerm.isPolynomialTerm(a,!0))return a.args.forEach((l,g)=>{a.args[g]=n(a.args[g])}),[a];if(f==="*"&&u(a))return o(a);if(f==="*"&&a.op==="/")return i(a);if(a.op==="-"){const l=a.args[1],g=r.negate(l,!0),h=[e(a.args[0],f),e(g,f)];return[].concat.apply([],h)}else{const l=[];return a.args.forEach(g=>{l.push(e(g,f))}),[].concat.apply([],l)}}function u(a){if(a.op!=="*"||a.args.length!==2)return!1;const f=a.args[1];return s.PolynomialTerm.isPolynomialTerm(f)?!new s.PolynomialTerm(f).hasCoeff():!1}function o(a){const f=e(a.args[0],"*"),l=f.pop(),g=n(a.args[1]);return s.Type.isConstantOrConstantFraction(l)?f.push(s.Creator.operator("*",[l,g],!1)):(f.push(l),f.push(g)),f}function i(a){let f=e(a.args[0],"*");if(f.length===1)a.args[0]=f.pop(),a.args[1]=n(a.args[1]),f=[a];else{const l=f.pop(),g=n(a.args[1]),h=s.Creator.operator("/",[l,g]);f.push(h)}return f}function p(a){return s.Type.isOperator(a)?a.op==="*"?!0:a.op!=="/"?!1:a.args.some(p):!1}return de=n,de}var _e,ur;function Jn(){if(ur)return _e;ur=1;function c(r){const s=r.cloneDeep(),n=[],t=[];r.traverse(e=>n.push(e)),s.traverse(e=>t.push(e));for(let e=0;e<n.length;e++){const u=n[e],o=t[e];Object.prototype.hasOwnProperty.call(u,"changeGroup")&&(o.changeGroup=u.changeGroup)}return s}return _e=c,_e}var Re,cr;function On(){if(cr)return Re;cr=1,B();const c=Jn();function r(s){const n=c(s);return n.transform(function(t,e,u){return t.type==="OperatorNode"&&t.op==="*"&&((t.args[1].type==="ParenthesisNode"||t.args[1].type==="SymbolNode"||t.args[1].type==="OperatorNode"&&t.args[1].op==="^"&&t.args[1].args[0].type==="SymbolNode")&&(t.implicit=!0),t.args[1].isOperatorNode&&t.args[1].op==="^"&&t.args[1].args[0].isSymbolNode&&(t.args[1].implicit=!0)),t}),n}return Re=r,Re}var Ie,lr;function es(){if(lr)return Ie;lr=1;const{Creator:c,PolynomialTerm:r}=P(),s=G();function n(e){return!!(r.isPolynomialTerm(e)&&new r(e).getCoeffValue()<0)}function t(e){const u=e.cloneDeep();return u.transform(function(o,i,p){if(o.type==="OperatorNode"&&o.op==="*"){if(s.isUnaryMinus(o.args[1])||s.isConstant(o.args[1])&&o.args[1].value<0||n(o.args[1])||s.isOperator(o.args[1])&&(o.args[1].op==="+"||o.args[1].op==="-")){const a=c.parenthesis(o.args[1]);o.args[1]=a}}else if(o.type==="OperatorNode"&&o.op==="^"&&(s.isUnaryMinus(o.args[0])||s.isConstantOrConstantFraction(o.args[0])&&o.args[0].value<0||s.isOperator(o.args[0]))){const a=c.parenthesis(o.args[0]);o.args[0]=a}return o}),u}return Ie=t,Ie}var ve,pr;function H(){if(pr)return ve;pr=1;const c=$(),r=P(),s=B(),n=On(),t=es();function e(i,p=!1,a=!1,f=!0,l=!1){f?i=c(i.cloneDeep()):i=i.cloneDeep(),a&&i.transform(function(h,m,C){return h.isOperatorNode&&h.op==="*"&&(h.implicit=!1),h}),l&&(i=t(i));let g=u(i);return p||(g=g.replace(/\s*?\+\s*?\-\s*?/g," - ")),a?s.parse(g).toString({notation:"fixed"}):n(s.parse(g)).toString({notation:"fixed"})}function u(i,p){if(r.PolynomialTerm.isPolynomialTerm(i)){const a=new r.PolynomialTerm(i);if(a.hasFractionCoeff()&&i.op!=="/"){const f=a.getCoeffNode(),l=u(f),g=r.Creator.polynomialTerm(a.getSymbolNode(),a.exponent,null),h=u(g);return`${l} ${h}`}}if(r.Type.isIntegerFraction(i))return`${i.args[0]}/${i.args[1]}`;if(r.Type.isOperator(i)){if(i.op==="/"&&r.Type.isOperator(i.args[1]))return`${u(i.args[0])} / (${u(i.args[1])})`;let a="";switch(i.op){case"+":case"-":a=` ${i.op} `;break;case"*":if(i.implicit){a=" ";break}a=` ${i.op} `;break;case"/":r.Type.isConstantFraction(i,!0)?a=`${i.op}`:a=` ${i.op} `;break;case"^":a=`${i.op}`;break}let f=i.args.map(l=>u(l,i)).join(a);return p&&r.Type.isOperator(p)&&i.op&&p.op&&"*/^".indexOf(p.op)>=0&&"+-".indexOf(i.op)>=0&&(f=`(${f})`),f}else return r.Type.isParenthesis(i)?`(${u(i.content)})`:r.Type.isUnaryMinus(i)?r.Type.isOperator(i.args[0])&&"*/^".indexOf(i.args[0].op)===-1&&!r.PolynomialTerm.isPolynomialTerm(i)?`-(${u(i.args[0])})`:`-${u(i.args[0])}`:i.toString()}function o(i,p=!1,a=!1,f=!0,l=!1,g){f?i=c(i.cloneDeep()):i=i.cloneDeep(),l&&(i=t(i)),a?i.transform(function(m,C,S){return m.isOperatorNode&&m.op==="*"&&(m.implicit=!1),m}):i=n(i),g&&Array.isArray(g)&&g.forEach(m=>{i=m(i)});let h=i.toTex({implicit:"hide",parenthesis:"keep"});return p||(h=h.replace(/\s*?\+\s*?\-\s*?/g," - ").replaceAll("\\frac","\\dfrac").replaceAll("\\cdot","\\times ")),h=h.replace(/~/g," ").replace(/ {2,}/g," "),h}return ve={ascii:e,latex:o},ve}var Pe,fr;function K(){if(fr)return Pe;fr=1;const c=B(),r=w(),s=En(),n=U(),t=P(),e=H();function u(y){if(!t.Type.isFunction(y,"nthRoot"))return t.Status.noChange(y);const O=T(y);if(t.Type.isOperator(O)){if(O.op==="^")return o(y);if(O.op==="*")return i(y)}else if(t.Type.isConstant(O))return C(y);return t.Status.noChange(y)}function o(y){let O=y.cloneDeep();const R=T(y),d=S(y),_=R.args[0],I=t.Type.isParenthesis(R.args[1])?R.args[1].content:R.args[1];if(d.equals(I))return O=_,t.Status.nodeChanged(r.CANCEL_EXPONENT_AND_ROOT,y,O);if(t.Type.isConstant(d)&&t.Type.isConstant(I)){const v=parseFloat(d.value),F=parseFloat(I.value);if(v%F===0){const L=v/F,M=t.Creator.constant(L);return O=t.Creator.nthRoot(_,M),t.Status.nodeChanged(r.CANCEL_EXPONENT,y,O)}else if(F%v===0){const L=F/v,M=t.Creator.constant(L);return O=t.Creator.operator("^",[_,M]),t.Status.nodeChanged(r.CANCEL_ROOT,y,O)}}return t.Status.noChange(y)}function i(y){let O=y.cloneDeep();const R=S(y),d=[];let _;return t.Type.isConstant(R)&&!n.isNegative(R)&&(_=p(O),_.hasChanged()&&(d.push(_),O=t.Status.resetChangeGroups(_.newNode)),_=f(O),_.hasChanged()&&(d.push(_),O=t.Status.resetChangeGroups(_.newNode)),_=l(O),_.hasChanged()&&(d.push(_),O=t.Status.resetChangeGroups(_.newNode),O.args[0].op==="^"))?(_=o(O),d.push(_),t.Status.nodeChanged(r.NTH_ROOT_VALUE,y,_.newNode,!0,d)):(_=g(O),d.push(_),O=t.Status.resetChangeGroups(_.newNode),_=h(O),_.hasChanged()?(d.push(_),O=t.Status.resetChangeGroups(_.newNode),_=m(O),_.hasChanged()&&(d.push(_),O=t.Status.resetChangeGroups(_.newNode)),t.Status.nodeChanged(r.NTH_ROOT_VALUE,y,O,!0,d)):t.Status.noChange(y))}function p(y){const O=y.cloneDeep(),R=T(y);let d=[],_=!1;return R.args.forEach(I=>{if(t.PolynomialTerm.isPolynomialTerm(I)){const v=new t.PolynomialTerm(I),F=v.getCoeffNode(),L=t.Creator.polynomialTerm(v.getSymbolNode(),v.getExponentNode(),null);if(F){const M=a(F);M.length>1&&(_=!0),d=d.concat(M)}d.push(L)}else{const v=a(I);v.length>1&&(_=!0),d=d.concat(v)}}),_?(O.args[0]=t.Creator.operator("*",d),t.Status.nodeChanged(r.FACTOR_INTO_PRIMES,y,O)):t.Status.noChange(y)}function a(y){if(t.Type.isConstant(y)&&!n.isNegative(y)){const O=parseFloat(y.value);return s.getPrimeFactors(O).map(t.Creator.constant)}return[y]}function f(y){let O=y.cloneDeep();const R=T(y),d=S(y),_=parseFloat(d.value);R.args.sort(N);const I=R.args.map(A=>e.ascii(A));if([...new Set(I)].length===I.length)return t.Status.noChange(y);const v={};R.args.forEach(A=>{const b=e.ascii(A);v[b]?v[b]++:v[b]=1});const M=Object.keys(v).map(A=>{let b=v[A];const X=c.parse(A),V=_,k=[];for(;b-V>0;)b-=V,k.push(t.Creator.parenthesis(t.Creator.operator("*",Array(V).fill(X))));const ee=b===1?X:t.Creator.parenthesis(t.Creator.operator("*",Array(b).fill(X)));return k.push(ee),k}).reduce((A,b)=>A.concat(b),[]),D=t.Creator.operator("*",M);return O=t.Creator.nthRoot(D,d),t.Status.nodeChanged(r.GROUP_TERMS_BY_ROOT,y,O)}function l(y){const O=y.cloneDeep(),R=T(y);if(t.Type.isParenthesis(R)){const d=R.content;if(E(d)){const _=d.args[0],I=t.Creator.constant(d.args.length);return O.args[0]=t.Creator.operator("^",[_,I]),t.Status.nodeChanged(r.CONVERT_MULTIPLICATION_TO_EXPONENT,y,O)}}else if(t.Type.isOperator(R,"*")){const d=[];return R.args.forEach(_=>{if(t.Type.isParenthesis(_)){const I=_.content;if(E(I)){const v=I.args[0],F=t.Creator.constant(I.args.length);d.push(t.Creator.operator("^",[v,F]));return}}d.push(_)}),O.args[0]=t.Creator.operator("*",d),t.Status.nodeChanged(r.CONVERT_MULTIPLICATION_TO_EXPONENT,y,O)}return t.Status.noChange(y)}function g(y){let O=y.cloneDeep();const R=T(y),d=S(y),_=[];for(let I=0;I<R.args.length;I++){const v=R.args[I];_.push(t.Creator.nthRoot(v,d))}return O=t.Creator.operator("*",_),t.Status.nodeChanged(r.DISTRIBUTE_NTH_ROOT,y,O)}function h(y){const O=y.cloneDeep(),R=[];for(let d=0;d<O.args.length;d++){const _=O.args[d],I=u(_);I.hasChanged()&&(O.args[d]=I.newNode,R.push(t.Status.childChanged(O,I,d)))}return R.length===0?t.Status.noChange(y):R.length===1?R[0]:t.Status.nodeChanged(r.EVALUATE_DISTRIBUTED_NTH_ROOT,y,O,!0,R)}function m(y){let O=y.cloneDeep(),R;const d=[],_=[];for(let I=0;I<O.args.length;I++){const v=O.args[I];t.Type.isFunction(v,"nthRoot")?(_.push(v.args[0]),R=S(v)):d.push(v)}if(d.length>0){if(_.length>0){const I=_.length===1?_[0]:t.Creator.operator("*",_);d.push(t.Creator.nthRoot(I,R))}if(O=t.Creator.operator("*",d),!O.equals(y))return t.Status.nodeChanged(r.COMBINE_UNDER_ROOT,y,O)}return t.Status.noChange(y)}function C(y){let O=y.cloneDeep();const R=T(y),d=S(y);if(n.isNegative(R))return t.Status.noChange(y);if(!t.Type.isConstant(d)||n.isNegative(d))return t.Status.noChange(y);const _=parseFloat(R.value),I=parseFloat(d.value),v=c.nthRoot(_,I),F=c.round(v);if(c.pow(F,I)===_)return O=t.Creator.constant(F),t.Status.nodeChanged(r.NTH_ROOT_VALUE,y,O);{const L=s.getPrimeFactors(_);if(L.length>1){let M=[];const D=L.map(t.Creator.constant);O.args[0]=t.Creator.operator("*",D),M.push(t.Status.nodeChanged(r.FACTOR_INTO_PRIMES,y,O));const A=i(O);if(A.hasChanged())return M=M.concat(A.substeps),O=A.newNode,t.Status.nodeChanged(r.NTH_ROOT_VALUE,y,O,!0,M)}}return t.Status.noChange(y)}function S(y){if(!t.Type.isFunction(y,"nthRoot"))throw Error("Expected nthRoot");return y.args.length===2?y.args[1]:t.Creator.constant(2)}function T(y){if(!t.Type.isFunction(y,"nthRoot"))throw Error("Expected nthRoot");return y.args[0]}function N(y,O){return t.Type.isConstant(y)&&t.Type.isConstant(O)?parseFloat(y.value)-parseFloat(O.value):t.Type.isConstant(y)?-1:t.Type.isConstant(O)?1:0}function E(y){if(!t.Type.isOperator(y)||y.op!=="*")return!1;const O=y.args.map(e.ascii);return[...new Set(O)].length===1}return Pe={getRadicandNode:T,getRootNode:S,nthRoot:u},Pe}var Fe,gr;function ts(){if(gr)return Fe;gr=1;const c=P(),r=K();function s(n){if(!c.Type.isOperator(n,"*")||!n.args.every(u=>c.Type.isFunction(u,"nthRoot")))return!1;const t=n.args[0],e=r.getRootNode(t);return n.args.every(u=>r.getRootNode(u).equals(e))}return Fe=s,Fe}var Me,hr;function dn(){if(hr)return Me;hr=1;const c=P();function r(s){if(s.op!=="*"||s.implicit||s.args.length!==2||!c.PolynomialTerm.isPolynomialTerm(s.args[0]))return!1;const n=new c.PolynomialTerm(s.args[0]);return c.Type.isParenthesis(s.args[1])&&c.Type.isConstantOrConstantFraction(s.args[1].content,!0)||c.Type.isConstantOrConstantFraction(s.args[1],!0)?!n.hasCoeff():!1}return Me=r,Me}var we,Cr;function rs(){if(Cr)return we;Cr=1;const c=mn(),r=Sn(),s=dn();function n(t){return c.canAddLikeTermPolynomialNodes(t)||r(t)||s(t)}return we=n,we}var Le,Tr;function ns(){if(Tr)return Le;Tr=1;const c=P(),r=Lt();function s(n){return c.Type.isParenthesis(n)?s(n.content):c.Type.isUnaryMinus(n)?s(n.args[0]):c.Type.isOperator(n)?n.args.some(s):c.Type.isSymbol(n)||c.Type.isConstant(n)?!1:c.Type.isFunction(n,"abs")?n.args.length!==1||n.args.some(s)?!0:!r(n.args[0]):c.Type.isFunction(n,"nthRoot")?n.args.some(s)||n.args.length<1:!0}return Le=s,Le}var Ae,Nr;function At(){if(Nr)return Ae;Nr=1;const c=P(),r={};r.getSymbolsInEquation=function(e){const u=r.getSymbolsInExpression(e.leftNode),o=r.getSymbolsInExpression(e.rightNode);return new Set([...u,...o])},r.getSymbolsInExpression=function(e){const o=e.filter(p=>p.isSymbolNode).map(p=>p.name);return new Set(o)},r.getLastSymbolTerm=function(e,u){if(s(e,u))return e;if(c.Type.isOperator(e,"+")||c.Type.isOperator(e,"*"))for(let o=e.args.length-1;o>=0;o--){const i=e.args[o];if(c.Type.isOperator(i,"+"))return r.getLastSymbolTerm(i,u);if(s(i,u))return i}else if(c.Type.isParenthesis(e))return r.getLastSymbolTerm(e.content,u);return null},r.getLastNonSymbolTerm=function(e,u){if(n(e,u))return new c.PolynomialTerm(e).getCoeffNode();if(t(e,u))return null;if(c.Type.isOperator(e))for(let o=e.args.length-1;o>=0;o--){const i=e.args[o];if(c.Type.isOperator(i,"+"))return r.getLastNonSymbolTerm(i,u);if(!s(i,u))return i}return null},r.getLastDenominatorWithSymbolTerm=function(e,u){if(t(e,u))return e.args[1];if(c.Type.isOperator(e,"+"))for(let o=e.args.length-1;o>=0;o--){const i=e.args[o];if(c.Type.isOperator(i,"+"))return r.getLastDenominatorWithSymbolTerm(i,u);if(t(i,u))return i.args[1]}return null};function s(e,u){return n(e,u)||t(e,u)}function n(e,u){return!!(c.PolynomialTerm.isPolynomialTerm(e)&&new c.PolynomialTerm(e).getSymbolName()===u)}function t(e,u){return c.Type.isOperator(e)&&e.op==="/"?r.getSymbolsInExpression(e.args[1]).has(u):!1}return Ae=r,Ae}var De,mr;function ss(){if(mr)return De;mr=1;const c=P(),r=At();function s(t){if(!c.Type.isOperator(t,"+")||t.args.length>3||r.getSymbolsInExpression(t).size!==1)return!1;const u=t.args.filter(n(2)),o=t.args.filter(n(1)),i=t.args.filter(c.Type.isConstant);return!(u.length!==1||o.length>1||i.length>1||u.length+o.length+i.length!==t.args.length)}function n(t){return function(e){if(c.PolynomialTerm.isPolynomialTerm(e)){const o=new c.PolynomialTerm(e).getExponentNode(!0);return o&&parseFloat(o.value)===t}return!1}}return De=s,De}var Ue,yr;function j(){if(yr)return Ue;yr=1;const c=B(),r=H(),s=On();class n{constructor(e,u,o){this.leftNode=s(e),this.rightNode=s(u),this.comparator=o}ascii(e=!1,u=!1){const o=r.ascii(this.leftNode,e,u),i=r.ascii(this.rightNode,e,u),p=this.comparator;return`${o} ${p} ${i}`}latex(e=!1){const u=r.latex(this.leftNode,e),o=r.latex(this.rightNode,e),i=this.comparator;return`${u} ${i==null?void 0:i.replaceAll(">=","\\geqslant").replaceAll("<=","\\leqslant")} ${o}`}clone(){const e=this.leftNode.cloneDeep(),u=this.rightNode.cloneDeep();return new n(e,u,this.comparator)}}return n.createEquationFromString=function(t,e){const u=t.split(e);if(u.length!==2)throw Error("Expected two sides of an equation using comparator: "+e);const o=c.parse(u[0]),i=c.parse(u[1]);return new n(o,i,e)},Ue=n,Ue}var be,Sr;function os(){if(Sr)return be;Sr=1,j();const c=P();function r(s){if(s.comparator!=="=")return!1;const n=s.leftNode,t=s.rightNode;return c.Type.isOperator(n,"/")&&c.Type.isOperator(t,"/")?!!(c.Type.isConstantOrConstantFraction(n.args[0])&&c.PolynomialTerm.isPolynomialTerm(n.args[1])&&c.Type.isConstantOrConstantFraction(t.args[0])&&c.Type.isConstantOrConstantFraction(t.args[1])||c.Type.isConstantOrConstantFraction(n.args[0])&&c.Type.isConstantOrConstantFraction(n.args[1])&&c.Type.isConstantOrConstantFraction(t.args[0])&&c.PolynomialTerm.isPolynomialTerm(t.args[1])):!1}return be=r,be}var Be,Er;function x(){if(Er)return Be;Er=1;const c=mn(),r=Kn(),s=zn(),n=Sn(),t=ts(),e=dn(),u=rs(),o=ns(),i=ss(),p=Lt(),a=os();return Be={canFindRoots:r,canAddLikeTerms:c,canMultiplyLikeTermConstantNodes:s,canMultiplyLikeTermPolynomialNodes:n,canMultiplyLikeTermsNthRoots:t,canRearrangeCoefficient:e,canSimplifyPolynomialTerms:u,hasUnsupportedNodes:o,isQuadratic:i,resolvesToConstant:p,canCrossMultiplication:a},Be}var Ge,Or;function as(){if(Or)return Ge;Or=1;const c=B(),r=En(),s=w(),n=Y(),t=U(),e=P(),u=[i,p,a,f];function o(l){let g,h=0,m=0,C=0;for(const T of l.args)if(e.Type.isConstant(T))C=n(T);else if(e.PolynomialTerm.isPolynomialTerm(T)){const N=new e.PolynomialTerm(T),E=N.getExponentNode(!0);if(E.value==="2"||E.value===2)g=N.getSymbolNode(),h=N.getCoeffValue();else if(E.value==="1"||E.value===1)m=N.getCoeffValue();else return e.Status.noChange(l)}else return e.Status.noChange(l);if(!g||!h)return e.Status.noChange(l);let S=!1;h<0&&(S=!0,h=-h,m=-m,C=-C);for(let T=0;T<u.length;T++){const N=u[T](l,g,h,m,C,S);if(N.hasChanged())return N}return e.Status.noChange(l)}function i(l,g,h,m,C,S){if(!m||C)return e.Status.noChange(l);const T=c.gcd(h,m),N=e.Creator.constant(T),E=e.Creator.constant(h/T),y=e.Creator.constant(m/T),O=e.Creator.polynomialTerm(g,null,N),R=e.Creator.polynomialTerm(g,null,E),d=e.Creator.parenthesis(e.Creator.operator("+",[R,y]));let _=e.Creator.operator("*",[O,d],!0);return S&&(_=t.negate(_)),e.Status.nodeChanged(s.FACTOR_SYMBOL,l,_)}function p(l,g,h,m,C,S){if(m||!C)return e.Status.noChange(l);const T=c.gcd(h,C);h=h/T,C=C/T;const N=Math.sqrt(Math.abs(h)),E=Math.sqrt(Math.abs(C));if(Number.isInteger(N)&&Number.isInteger(E)&&C<0){const y=e.Creator.constant(N),O=e.Creator.constant(E),R=e.Creator.polynomialTerm(g,null,y),d=e.Creator.parenthesis(e.Creator.operator("+",[R,O])),_=e.Creator.parenthesis(e.Creator.operator("-",[R,O]));let I=e.Creator.operator("*",[d,_],!0);if(T!==1){const v=e.Creator.constant(T);I=e.Creator.operator("*",[v,I],!0)}return S&&(I=t.negate(I)),e.Status.nodeChanged(s.FACTOR_DIFFERENCE_OF_SQUARES,l,I)}return e.Status.noChange(l)}function a(l,g,h,m,C,S){if(!m||!C)return e.Status.noChange(l);const T=c.gcd(h,m,C);h=h/T,C=C/T;const N=Math.sqrt(Math.abs(h));let E=Math.sqrt(Math.abs(C));m<0&&(E=E*-1);const y=2*N*E;if(Number.isInteger(N)&&Number.isInteger(E)&&m/T===y){const O=e.Creator.constant(N),R=e.Creator.constant(E),d=e.Creator.polynomialTerm(g,null,O),_=e.Creator.parenthesis(e.Creator.operator("+",[d,R])),I=e.Creator.constant(2);let v=e.Creator.operator("^",[_,I]);if(T!==1){const F=e.Creator.constant(T);v=e.Creator.operator("*",[F,v],!0)}return S&&(v=t.negate(v)),e.Status.nodeChanged(s.FACTOR_PERFECT_SQUARE,l,v)}return e.Status.noChange(l)}function f(l,g,h,m,C,S){let T;if(m&&C){const N=c.gcd(h,m,C),E=e.Creator.constant(N);h=h/N,m=m/N,C=C/N;const y=h*C,O=r.getFactorPairs(y,!0);for(const R of O)if(R[0]+R[1]===m){const d=[];let _;const I=e.Creator.constant(h),v=e.Creator.constant(m),F=e.Creator.constant(C),L=e.Creator.polynomialTerm(g,e.Creator.constant(2),I),M=e.Creator.polynomialTerm(g,null,v);S&&(T=e.Creator.operator("+",[L,M,F],!0),T=t.negate(T),_=e.Status.nodeChanged(s.REARRANGE_COEFF,l,T),d.push(_),T=e.Status.resetChangeGroups(_.newNode));const D=R[0],A=R[1],b=e.Creator.constant(D),X=e.Creator.constant(A),V=e.Creator.polynomialTerm(g,null,b),k=e.Creator.polynomialTerm(g,null,X);T=e.Creator.operator("+",[L,V,k,F],!0),S&&(T=t.negate(T)),_=e.Status.nodeChanged(s.BREAK_UP_TERM,l,T),d.push(_),T=e.Status.resetChangeGroups(_.newNode);const ee=e.Creator.parenthesis(e.Creator.operator("+",[L,V])),bt=e.Creator.parenthesis(e.Creator.operator("+",[k,F]));T=e.Creator.operator("+",[ee,bt],!0),S&&(T=t.negate(T)),_=e.Status.nodeChanged(s.COLLECT_LIKE_TERMS,l,T),d.push(_),T=e.Status.resetChangeGroups(_.newNode);const te=e.Creator.constant(c.gcd(h,D)),kn=e.Creator.constant(h/te),Hn=e.Creator.constant(D/te),Bt=e.Creator.polynomialTerm(g,null,te),Xn=e.Creator.polynomialTerm(g,null,kn),W=e.Creator.parenthesis(e.Creator.operator("+",[Xn,Hn])),Gt=e.Creator.operator("*",[Bt,W],!0);T=e.Creator.operator("+",[Gt,bt],!0),S&&(T=t.negate(T)),_=e.Status.nodeChanged(s.FACTOR_SYMBOL,l,T),d.push(_),T=e.Status.resetChangeGroups(_.newNode);let re=c.gcd(C,A);A<0&&(re=re*-1);const xt=e.Creator.constant(re),qt=e.Creator.parenthesis(e.Creator.operator("+",[Bt,xt])),Zn=e.Creator.operator("*",[xt,W],!0);return T=e.Creator.operator("+",[Gt,Zn],!0),S&&(T=t.negate(T)),_=e.Status.nodeChanged(s.FACTOR_SYMBOL,l,T),d.push(_),T=e.Status.resetChangeGroups(_.newNode),N===1?T=e.Creator.operator("*",[W,qt],!0):T=e.Creator.operator("*",[E,W,qt],!0),S&&(T=t.negate(T)),_=e.Status.nodeChanged(s.FACTOR_SUM_PRODUCT_RULE,l,T),d.push(_),T=e.Status.resetChangeGroups(_.newNode),e.Status.nodeChanged(s.FACTOR_SUM_PRODUCT_RULE,l,T,!0,d)}}return e.Status.noChange(l)}return Ge=o,Ge}var xe,dr;function is(){if(dr)return xe;dr=1;const c={};return c.appendToArrayInObject=function(r,s,n){return r[s]?r[s].push(n):r[s]=[n],r},xe=c,xe}var qe,_r;function _n(){if(_r)return qe;_r=1;const c=H(),r=w(),s=P(),n=K(),t=is(),e="constant",u="constantFraction",o="nthRoot",i="other",p={};p.canCollectLikeTerms=function(C){if(!(s.Type.isOperator(C,"+")||s.Type.isOperator(C,"*")))return!1;let S;if(C.op==="+")S=f(C);else if(C.op==="*")S=l(C);else throw Error("Operation not supported: "+C.op);const T=Object.keys(S),N=T.filter(E=>E!==i);return T.length>1&&N.some(E=>S[E].length>1)},p.collectLikeTerms=function(C){if(!p.canCollectLikeTerms(C))return s.Status.noChange(C);const S=C.op;let T=[];if(S==="+")T=f(C);else if(S==="*")T=l(C);else throw Error("Operation not supported: "+S);const N=Object.keys(T).filter(R=>R!==e&&R!==u&&R!==i).sort(m);T[e]&&(S==="+"&&N.push(e),S==="*"&&N.unshift(e)),T[u]&&N.push(u);let E=[],y=1;N.forEach(R=>{const d=T[R];if(d.length===1){const _=d[0].cloneDeep();_.changeGroup=y,E.push(_)}else{const _=s.Creator.parenthesis(s.Creator.operator(S,d)).cloneDeep();_.changeGroup=y,E.push(_)}d.forEach(_=>{_.changeGroup=y}),y++}),T[i]&&(E=E.concat(T[i]));const O=C.cloneDeep();return O.args=E,s.Status.nodeChanged(r.COLLECT_LIKE_TERMS,C,O,!1)};function a(C,S,T){const N=new S(C);let E=c.ascii(N.getBaseNode());if(T==="+"){const y=c.ascii(N.getExponentNode(!0));E+="^"+y}return E}function f(C){let S={};for(let T=0;T<C.args.length;T++){const N=C.args[T];if(s.PolynomialTerm.isPolynomialTerm(N)){const E=a(N,s.PolynomialTerm,"+");S=t.appendToArrayInObject(S,E,N)}else if(s.NthRootTerm.isNthRootTerm(N)){const E=a(N,s.NthRootTerm,"+");S=t.appendToArrayInObject(S,E,N)}else if(s.Type.isIntegerFraction(N))S=t.appendToArrayInObject(S,u,N);else if(s.Type.isConstant(N))S=t.appendToArrayInObject(S,e,N);else if(s.Type.isOperator(C)||s.Type.isFunction(C)||s.Type.isParenthesis(C)||s.Type.isUnaryMinus(C))S=t.appendToArrayInObject(S,i,N);else throw Error("Unsupported node type: "+N.type)}if(S[e]&&S[e].length===1&&S[u]&&S[u].length===1){const T=S[u][0];S=t.appendToArrayInObject(S,e,T),delete S[u]}return S}function l(C){let S={};for(let T=0;T<C.args.length;T++){let N=C.args[T];if(s.Type.isUnaryMinus(N)&&(S=t.appendToArrayInObject(S,e,s.Creator.constant(-1)),N=N.args[0]),s.PolynomialTerm.isPolynomialTerm(N))S=h(S,N);else if(s.Type.isFunction(N,"nthRoot"))S=g(S,N);else if(s.Type.isIntegerFraction(N))S=t.appendToArrayInObject(S,e,N);else if(s.Type.isConstant(N))S=t.appendToArrayInObject(S,e,N);else if(s.Type.isOperator(C)||s.Type.isFunction(C)||s.Type.isParenthesis(C)||s.Type.isUnaryMinus(C))S=t.appendToArrayInObject(S,i,N);else throw Error("Unsupported node type: "+N.type)}return S}function g(C,S){const N=n.getRootNode(S).value;return C=t.appendToArrayInObject(C,o+N,S),C}function h(C,S){const T=new s.PolynomialTerm(S);let N;if(!T.hasCoeff())N=a(S,s.PolynomialTerm,"*"),C=t.appendToArrayInObject(C,N,S);else{const E=T.getCoeffNode();let y=T.getSymbolNode();T.getExponentNode()&&(y=s.Creator.operator("^",[y,T.getExponentNode()])),C=t.appendToArrayInObject(C,e,E),N=a(y,s.PolynomialTerm,"*"),C=t.appendToArrayInObject(C,N,y)}return C}function m(C,S){if(C===S)return 0;if(C.indexOf("^")===-1)return C<S?-1:1;{const T=C.split("^")[0],N=C.split("^")[1],E=S.split("^")[0],y=S.split("^")[1];return T!==E?T<E?-1:1:N>y?-1:1}}return qe=p,qe}var Ye,Rr;function z(){if(Rr)return Ye;Rr=1;const c=x(),r=_n(),s=P();function n(p,a=!1){if(a)for(;s.Type.isParenthesis(p);)p=p.content;return t(p)}function t(p){if(s.Type.isOperator(p))return e(p);if(s.Type.isFunction(p))return u(p);if(s.Type.isParenthesis(p))return o(p);if(s.Type.isConstant(p,!0)||s.Type.isSymbol(p))return p;if(s.Type.isUnaryMinus(p)){const a=p.args[0];return p.args[0]=t(a),p}else throw Error("Unsupported node type: "+p.type)}function e(p){if(p.op==="^"&&s.Type.isParenthesis(p.args[0])){const a=p.args[0];if(s.Type.isOperator(a.content))return a.content=t(a.content),p.args[1]=t(p.args[1]),p}if(p.args.forEach((a,f)=>{p.args[f]=t(a)}),"+-".includes(p.op)&&p.args.length===2){const[a,f]=p.args;if(s.Type.isParenthesis(f)&&s.Type.isOperator(f.content)&&"*/".includes(f.content.op))return p.args[1]=f.content,p}return p.op==="+"?p.args.forEach((a,f)=>{s.Type.isParenthesis(a)&&!i(a.content)&&(p.args[f]=a.content)}):p.op==="-"&&s.Type.isParenthesis(p.args[0])&&!i(p.args[0].content)&&(p.args[0]=p.args[0].content),p}function u(p){return p.args.forEach((a,f)=>{s.Type.isParenthesis(a)&&(a=a.content),p.args[f]=t(a)}),p}function o(p){if(s.PolynomialTerm.isPolynomialTerm(p.content))p.content.args&&p.content.args.forEach((a,f)=>{p.content.args[f]=t(a)}),p=p.content;else if(s.Type.isConstant(p.content,!0)||s.Type.isIntegerFraction(p.content)||s.Type.isSymbol(p.content))p=p.content;else if(s.Type.isFunction(p.content))p=p.content,p=t(p);else if(s.Type.isOperator(p.content))p.content=t(p.content),p.content.op==="^"&&(p=p.content);else if(s.Type.isParenthesis(p.content))p=t(p.content);else if(s.Type.isUnaryMinus(p.content))p.content=t(p.content);else throw Error("Unsupported node type: "+p.content.type);return p}function i(p){return r.canCollectLikeTerms(p)||c.resolvesToConstant(p)||c.canSimplifyPolynomialTerms(p)}return Ye=n,Ye}var Ve,Ir;function Rn(){if(Ir)return Ve;Ir=1;const c=x(),r=as(),s=$(),n=z();function t(e,u=!1){if(u&&console.log(`

Factoring: `+print.ascii(e,!1,!0)),c.hasUnsupportedNodes(e))return[];let o;const i=[];return e=s(e),e=n(e,!0),c.isQuadratic(e)&&(o=r(e),o.hasChanged()&&i.push(o)),i}return Ve=t,Ve}var ke,vr;function us(){if(vr)return ke;vr=1;const c=B(),r=Rn();function s(n,t=!1){let e;try{e=c.parse(n)}catch{return[]}return e?r(e,t):[]}return ke=s,ke}var He,Pr;function q(){if(Pr)return He;Pr=1;const c=P(),r={};r.preOrder=function(n){return function(t){return s(n,t,!0)}},r.postOrder=function(n){return function(t){return s(n,t,!1)}};function s(n,t,e){let u;if(e&&(u=n(t),u.hasChanged()))return u;if(c.Type.isConstant(t)||c.Type.isSymbol(t))return c.Status.noChange(t);if(c.Type.isUnaryMinus(t)){if(u=s(n,t.args[0],e),u.hasChanged())return c.Status.childChanged(t,u)}else if(c.Type.isOperator(t)||c.Type.isFunction(t))for(let o=0;o<t.args.length;o++){const i=t.args[o],p=s(n,i,e);if(p.hasChanged())return c.Status.childChanged(t,p,o)}else if(c.Type.isParenthesis(t)){if(u=s(n,t.content,e),u.hasChanged())return c.Status.childChanged(t,u)}else throw Error("Unsupported node type: "+t);return e?c.Status.noChange(t):n(t)}return He=r,He}var Xe,Fr;function Q(){if(Fr)return Xe;Fr=1;const c=w(),r=Y(),s=P(),t=q().postOrder(e);function e(o){if(!s.Type.isOperator(o)||!o.args.every(i=>s.Type.isConstant(i,!0)))return s.Status.noChange(o);if(o.args.forEach((i,p)=>{o.args[p]=s.Creator.constant(r(i))}),s.Type.isIntegerFraction(o)){const i=parseInt(o.args[0]),p=parseInt(o.args[1]);if(i%p===0){const a=s.Creator.constant(i/p);return s.Status.nodeChanged(c.SIMPLIFY_ARITHMETIC,o,a)}else return s.Status.noChange(o)}else{const i=u(o),p=s.Creator.constant(i);return s.Status.nodeChanged(c.SIMPLIFY_ARITHMETIC,o,p)}}function u(o){let i=r(o);return Math.abs(i)<1?i=parseFloat(i.toPrecision(4)):i=parseFloat(i.toFixed(4)),i}return Xe=t,Xe}var Ze,Mr;function In(){if(Mr)return Ze;Mr=1;const c=w(),r=P();function s(u){if(!r.MixedNumber.isMixedNumber(u))return r.Status.noChange(u);const o=[];let i=u.cloneDeep();const p=r.MixedNumber.getWholeNumberValue(u),a=r.MixedNumber.getNumeratorValue(u),f=r.MixedNumber.getDenominatorValue(u),l=r.MixedNumber.isNegativeMixedNumber(u);let g=n(i,p,a,f,l);return o.push(g),i=r.Status.resetChangeGroups(g.newNode),g=t(i,p,a,f,l),o.push(g),i=r.Status.resetChangeGroups(g.newNode),g=e(i,p,a,f,l),o.push(g),i=r.Status.resetChangeGroups(g.newNode),r.Status.nodeChanged(c.CONVERT_MIXED_NUMBER_TO_IMPROPER_FRACTION,u,i,!0,o)}function n(u,o,i,p,a){const f=r.Creator.parenthesis(r.Creator.operator("*",[r.Creator.constant(o),r.Creator.constant(p)])),l=r.Creator.operator("+",[f,r.Creator.constant(i)]);u.args[0].args[0].changeGroup=1,l.changeGroup=1;const g=r.Creator.constant(p);let h=r.Creator.operator("/",[l,g]);return a&&(h=r.Creator.unaryMinus(h)),r.Status.nodeChanged(c.IMPROPER_FRACTION_NUMERATOR,u,h,!1)}function t(u,o,i,p,a){const f=r.Creator.operator("+",[r.Creator.constant(o*p),r.Creator.constant(i)]);u.args[0].changeGroup=1,f.changeGroup=1;const l=r.Creator.constant(p);let g=r.Creator.operator("/",[f,l]);return a&&(g=r.Creator.unaryMinus(g)),r.Status.nodeChanged(c.SIMPLIFY_ARITHMETIC,u,g,!1)}function e(u,o,i,p,a){const f=r.Creator.constant(o*p+i);u.args[0].changeGroup=1,f.changeGroup=1;const l=r.Creator.constant(p);let g=r.Creator.operator("/",[f,l]);return a&&(g=r.Creator.unaryMinus(g)),r.Status.nodeChanged(c.SIMPLIFY_ARITHMETIC,u,g,!1)}return Ze=s,Ze}var $e,wr;function Dt(){if(wr)return $e;wr=1;const c=x(),r=w(),s=P();function n(t){if(!c.canRearrangeCoefficient(t))return s.Status.noChange(t);let e=t.cloneDeep();const u=new s.PolynomialTerm(e.args[0]),o=s.Type.isParenthesis(e.args[1])?e.args[1].content:e.args[1],i=u.getExponentNode();return e=s.Creator.polynomialTerm(u.getSymbolNode(),i,o),s.Status.nodeChanged(r.REARRANGE_COEFF,t,e)}return $e=n,$e}var je,Lr;function vn(){if(Lr)return je;Lr=1;const c=w(),r=P();function s(n){if(n.op!=="^")return r.Status.noChange(n);const t=n.args[1];if(r.Type.isConstant(t)&&t.value===0){const e=r.Creator.constant(1);return r.Status.nodeChanged(c.REDUCE_EXPONENT_BY_ZERO,n,e)}else return r.Status.noChange(n)}return je=s,je}var Qe,Ar;function Pn(){if(Ar)return Qe;Ar=1;const c=w(),r=P();function s(n){if(n.op!=="*")return r.Status.noChange(n);if(n.args.findIndex(e=>r.Type.isConstant(e)&&e.value===0?!0:r.PolynomialTerm.isPolynomialTerm(e)?new r.PolynomialTerm(e).getCoeffValue()===0:!1)>=0){const e=r.Creator.constant(0);return r.Status.nodeChanged(c.MULTIPLY_BY_ZERO,n,e)}else return r.Status.noChange(n)}return Qe=s,Qe}var We,Dr;function Fn(){if(Dr)return We;Dr=1;const c=w(),r=P();function s(n){if(n.op!=="/")return r.Status.noChange(n);if(n.args[0].value===0){const t=r.Creator.constant(0);return r.Status.nodeChanged(c.REDUCE_ZERO_NUMERATOR,n,t)}else return r.Status.noChange(n)}return We=s,We}var Ke,Ur;function Mn(){if(Ur)return Ke;Ur=1;const c=w(),r=P();function s(n){if(n.op!=="+")return r.Status.noChange(n);const t=n.args.findIndex(u=>r.Type.isConstant(u)&&u.value===0);let e=n.cloneDeep();return t>=0?(e.args.splice(t,1),e.args.length===1&&(e=e.args[0]),r.Status.nodeChanged(c.REMOVE_ADDING_ZERO,n,e)):r.Status.noChange(n)}return Ke=s,Ke}var ze,br;function wn(){if(br)return ze;br=1;const c=w(),r=U(),s=P();function n(t){if(t.op!=="/")return s.Status.noChange(t);const e=t.args[1];if(!s.Type.isConstant(e))return s.Status.noChange(t);let u=t.args[0].cloneDeep();if(parseFloat(e.value)===-1){s.Type.isOperator(u)&&(u=s.Creator.parenthesis(u));const o=r.isNegative(u)?c.RESOLVE_DOUBLE_MINUS:c.DIVISION_BY_NEGATIVE_ONE;return u=r.negate(u),s.Status.nodeChanged(o,t,u)}else return parseFloat(e.value)===1?s.Status.nodeChanged(c.DIVISION_BY_ONE,t,u):s.Status.noChange(t)}return ze=n,ze}var Je,Br;function Ln(){if(Br)return Je;Br=1;const c=x(),r=w(),s=P();function n(t){if(t.op==="^"&&c.resolvesToConstant(t.args[1])&&s.Type.isConstant(t.args[0])&&t.args[0].value===1){const e=t.args[0].cloneDeep();return s.Status.nodeChanged(r.REMOVE_EXPONENT_BASE_ONE,t,e)}return s.Status.noChange(t)}return Je=n,Je}var et,Gr;function An(){if(Gr)return et;Gr=1;const c=w(),r=P();function s(n){if(n.op==="^"&&r.Type.isConstant(n.args[1])&&n.args[1].value===1){const t=n.args[0].cloneDeep();return r.Status.nodeChanged(c.REMOVE_EXPONENT_BY_ONE,n,t)}return r.Status.noChange(n)}return et=s,et}var tt,xr;function Dn(){if(xr)return tt;xr=1;const c=w(),r=U(),s=P();function n(t){if(t.op!=="*")return s.Status.noChange(t);const e=t.args.findIndex(f=>s.Type.isConstant(f)&&f.value===-1),u=t.args.findIndex(f=>s.Type.isUnaryMinus(f)&&s.Type.isConstant(f.args[0])&&f.args[0].value===1);if(e<0&&u<0)return s.Status.noChange(t);const o=e>=0?e:u;let i;o+1===t.args.length?i=o-1:i=o+1;let p=t.args[i];if(s.Type.isConstant(p))return s.Status.noChange(t);let a=t.cloneDeep();return p=r.negate(p.cloneDeep()),a.args[i]=p,a.args.splice(o,1),a.args.length===1&&(a=a.args[0]),s.Status.nodeChanged(c.REMOVE_MULTIPLYING_BY_NEGATIVE_ONE,t,a)}return tt=n,tt}var rt,qr;function Un(){if(qr)return rt;qr=1;const c=w(),r=P();function s(n){if(n.op!=="*")return r.Status.noChange(n);const t=n.args.findIndex(e=>r.Type.isConstant(e)&&e.value===1);if(t>=0){let e=n.cloneDeep();return e.args.splice(t,1),e.args.length===1&&(e=e.args[0]),r.Status.nodeChanged(c.REMOVE_MULTIPLYING_BY_ONE,n,e)}return r.Status.noChange(n)}return rt=s,rt}var nt,Yr;function bn(){if(Yr)return nt;Yr=1;const c=w(),r=P();function s(n){if(r.Type.isOperator(n)&&n.op==="*"&&r.Type.isUnaryMinus(n.args[0])&&r.Type.isConstant(n.args[0].args[0])){const e=n.cloneDeep();return e.args[0]=r.Creator.constant(n.args[0].args[0].value*-1),r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,e)}if(!r.Type.isUnaryMinus(n))return r.Status.noChange(n);const t=n.args[0];if(r.Type.isUnaryMinus(t)){const e=t.args[0].cloneDeep();return r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,e)}else if(r.Type.isConstant(t)){const e=t.cloneDeep();return e.value=-1*e.value,r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,e)}else if(r.Type.isParenthesis(t)){const u=t.content;if(r.Type.isUnaryMinus(u)&&r.Type.isParenthesis(u.args[0])){const o=r.Creator.parenthesis(u.args[0].content);return r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,o)}else if(r.Type.isUnaryMinus(u)){const o=r.Creator.parenthesis(u.args[0]);return r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,o)}else if(r.Type.isConstant(u)){const o=r.Creator.constant(u.value*-1);return r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,o)}else if(r.Type.isSymbol(u)){const o=r.Creator.symbol(u.name);return r.Status.nodeChanged(c.RESOLVE_DOUBLE_MINUS,n,o)}}return r.Status.noChange(n)}return nt=s,nt}var st,Vr;function cs(){if(Vr)return st;Vr=1;const c=P(),r=q(),s=In(),n=Dt(),t=vn(),e=Pn(),u=Fn(),o=Mn(),i=wn(),p=Ln(),a=An(),f=Dn(),l=Un(),g=bn(),h=[s,e,u,t,a,p,g,o,l,f,i,n],m=r.preOrder(C);function C(S){for(let T=0;T<h.length;T++){const N=h[T](S);if(N.hasChanged())return N;S=N.newNode}return c.Status.noChange(S)}return st=m,st}var ot,kr;function ls(){if(kr)return ot;kr=1;const c=w(),r=P(),n=q().postOrder(t);function t(e){if(!r.Type.isOperator(e)||e.op!=="/")return r.Status.noChange(e);let u=e.args[0];if(r.Type.isParenthesis(u)&&(u=u.content),!r.Type.isOperator(u)||u.op!=="+")return r.Status.noChange(e);const o=[],i=e.args[1];u.args.forEach(a=>{const f=r.Creator.operator("/",[a,i]);f.changeGroup=1,o.push(f)});let p=r.Creator.operator("+",o);return p=r.Creator.parenthesis(p),e.changeGroup=1,r.Status.nodeChanged(c.BREAK_UP_FRACTION,e,p,!1)}return ot=n,ot}var at,Hr;function J(){if(Hr)return at;Hr=1;const c=B(),r=w(),s=Y(),n=P();function t(o){if(!n.Type.isOperator(o)||o.op!=="/"||!n.Type.isIntegerFraction(o,!0))return n.Status.noChange(o);const i=[];let p=o.cloneDeep();const a=parseInt(s(o.args[0])),f=parseInt(s(o.args[1]));let l=c.gcd(a,f);if(f<0&&(l*=-1),l===1)return n.Status.noChange(o);let g=e(p,l,a,f);return i.push(g),p=n.Status.resetChangeGroups(g.newNode),g=u(p,l,a,f),i.push(g),p=n.Status.resetChangeGroups(g.newNode),n.Status.nodeChanged(r.SIMPLIFY_FRACTION,o,p,!0,i)}function e(o,i,p,a){let f=o.cloneDeep();const l=n.Creator.constant(i);l.changeGroup=1;const g=n.Creator.parenthesis(n.Creator.operator("*",[n.Creator.constant(p/i),l])),h=n.Creator.parenthesis(n.Creator.operator("*",[n.Creator.constant(a/i),l]));return f=n.Creator.operator("/",[g,h]),n.Status.nodeChanged(r.FIND_GCD,o,f,!1)}function u(o,i,p,a){let f;const l=n.Creator.constant(p/i),g=n.Creator.constant(a/i);return parseFloat(g.value)===1?f=l:f=n.Creator.operator("/",[l,g]),n.Status.nodeChanged(r.CANCEL_GCD,o,f,!1)}return at=t,at}var it,Xr;function Ut(){if(Xr)return it;Xr=1;const c=J(),r=B(),s=w(),n=Y(),t=P();function e(l){let g=l.cloneDeep();if(!t.Type.isOperator(l)||l.op!=="+"||!l.args.every(S=>t.Type.isIntegerFraction(S,!0)))return t.Status.noChange(l);const h=l.args.map(S=>parseFloat(n(S.args[1]))),m=[];let C;return h.every(S=>S===h[0])||(C=p(g),m.push(C),g=t.Status.resetChangeGroups(C.newNode),C=a(g),m.push(C),g=t.Status.resetChangeGroups(C.newNode),C=f(g),m.push(C),g=t.Status.resetChangeGroups(C.newNode)),C=u(g),m.push(C),g=t.Status.resetChangeGroups(C.newNode),C=o(g),m.push(C),g=t.Status.resetChangeGroups(C.newNode),C=i(g),C.hasChanged()&&(m.push(C),g=t.Status.resetChangeGroups(C.newNode)),C=c(g),C.hasChanged()&&(m.push(C),g=t.Status.resetChangeGroups(C.newNode)),t.Status.nodeChanged(s.ADD_FRACTIONS,l,g,!0,m)}function u(l){let g=l.cloneDeep();const h=g.args[0].args[1],m=[];g.args.forEach(S=>{m.push(S.args[0])});const C=t.Creator.parenthesis(t.Creator.operator("+",m));return g=t.Creator.operator("/",[C,h]),t.Status.nodeChanged(s.COMBINE_NUMERATORS,l,g)}function o(l){const g=l.cloneDeep();return g.args[0]=t.Creator.constant(n(g.args[0])),t.Status.nodeChanged(s.ADD_NUMERATORS,l,g)}function i(l){let g=l.cloneDeep();return g.args[0].value==="0"?(g=t.Creator.constant(0),t.Status.nodeChanged(s.REDUCE_ZERO_NUMERATOR,l,g)):t.Status.noChange(l)}function p(l){const g=l.cloneDeep(),h=g.args.map(C=>parseFloat(C.args[1].value)),m=r.lcm(...h);return g.args.forEach((C,S)=>{const T=m/h[S];if(T!==1){const N=t.Creator.constant(T),E=t.Creator.parenthesis(t.Creator.operator("*",[C.args[0],N])),y=t.Creator.parenthesis(t.Creator.operator("*",[C.args[1],N]));g.args[S]=t.Creator.operator("/",[E,y])}}),t.Status.nodeChanged(s.COMMON_DENOMINATOR,l,g)}function a(l){const g=l.cloneDeep();return g.args.map(h=>{h.args[1]=t.Creator.constant(n(h.args[1]))}),t.Status.nodeChanged(s.MULTIPLY_DENOMINATORS,l,g)}function f(l){const g=l.cloneDeep();return g.args.map(h=>{h.args[0]=t.Creator.constant(n(h.args[0]))}),t.Status.nodeChanged(s.MULTIPLY_NUMERATORS,l,g)}return it=e,it}var ut,Zr;function Bn(){if(Zr)return ut;Zr=1;const c=Ut(),r=w(),s=Y(),n=P();function t(e){if(!n.Type.isOperator(e)||e.op!=="+"||e.args.length!==2)return n.Status.noChange(e);const u=e.args[0],o=e.args[1];let i,p;if(n.Type.isConstant(u))if(n.Type.isIntegerFraction(o))i=u,p=o;else return n.Status.noChange(e);else if(n.Type.isConstant(o))if(n.Type.isIntegerFraction(u))i=o,p=u;else return n.Status.noChange(e);else return n.Status.noChange(e);let a=e.cloneDeep(),f=[],l,g,h;if(Number.isInteger(parseFloat(i.value))){const C=p.args[1],S=parseInt(C),T=parseInt(i.value),N=n.Creator.constant(T*S);l=n.Creator.operator("/",[N,C]),g=p,h=r.CONVERT_INTEGER_TO_FRACTION}else{let C=s(p);C<1?C=parseFloat(C.toPrecision(4)):C=parseFloat(C.toFixed(4)),g=n.Creator.constant(C),l=i,h=r.DIVIDE_FRACTION_FOR_ADDITION}if(n.Type.isConstant(u)?(a.args[0]=l,a.args[1]=g):(a.args[0]=g,a.args[1]=l),f.push(n.Status.nodeChanged(h,e,a)),a=n.Status.resetChangeGroups(a),h===r.CONVERT_INTEGER_TO_FRACTION){const C=c(a);f=f.concat(C.substeps)}else{const C=n.Creator.constant(s(a));f.push(n.Status.nodeChanged(r.SIMPLIFY_ARITHMETIC,a,C))}const m=f[f.length-1];return a=n.Status.resetChangeGroups(m.newNode),n.Status.nodeChanged(r.SIMPLIFY_ARITHMETIC,e,a,!0,f)}return ut=t,ut}var ct,$r;function ps(){if($r)return ct;$r=1;const c=Bn(),r=Ut(),s=Q(),n=w(),t=P();function e(o){if(t.Type.isParenthesis(o)&&(o=o.content),!t.Type.isOperator(o)||o.op!=="+"||o.args.some(h=>!t.Type.isConstantOrConstantFraction(h)))return t.Status.noChange(o);const i=[s,r,c];for(let h=0;h<i.length;h++){const m=i[h](o);if(m.hasChanged()&&t.Type.isConstantOrConstantFraction(m.newNode))return m}let p=o.cloneDeep();const a=[];let f;f=u(p),a.push(f),p=t.Status.resetChangeGroups(f.newNode);const l=p.args[0],g=p.args[1];if(t.Type.isParenthesis(l)){const h=l.content,m=s(h);f=t.Status.childChanged(p,m,0),a.push(f),p=t.Status.resetChangeGroups(f.newNode)}if(t.Type.isParenthesis(g)){const h=g.content,m=r(h);f=t.Status.childChanged(p,m,1),a.push(f),p=t.Status.resetChangeGroups(f.newNode)}return f=e(p),a.push(f),p=t.Status.resetChangeGroups(f.newNode),t.Status.nodeChanged(n.SIMPLIFY_ARITHMETIC,o,p,!0,a)}function u(o){let i=o.args.filter(t.Type.isIntegerFraction),p=o.args.filter(t.Type.isConstant);if(i.length===0||p.length===0)throw Error("expected both integer fractions and constants, got "+o);if(i.length+p.length!==o.args.length)throw Error("can only evaluate integer fractions and constants");p=p.map(f=>(f.changeGroup=1,f.cloneDeep())),p.length>1?p=t.Creator.parenthesis(t.Creator.operator("+",p)):p=p[0],i=i.map(f=>(f.changeGroup=2,f.cloneDeep())),i.length>1?i=t.Creator.parenthesis(t.Creator.operator("+",i)):i=i[0];const a=t.Creator.operator("+",[p,i]);return t.Status.nodeChanged(n.COLLECT_LIKE_TERMS,o,a)}return ct=e,ct}var lt,jr;function fs(){if(jr)return lt;jr=1;const c=x(),r=ps(),s=w(),n=P();function t(l,g=!1){if(!n.Type.isOperator(l))return n.Status.noChange(l);let h;return!g&&(h=r(l),h.hasChanged())||(h=e(l),h.hasChanged())||(h=u(l),h.hasChanged())?h:n.Status.noChange(l)}function e(l){return c.canAddLikeTerms.canAddLikeTermPolynomialNodes(l)?o(l,n.PolynomialTerm,s.ADD_POLYNOMIAL_TERMS):n.Status.noChange(l)}function u(l){return c.canAddLikeTerms.canAddLikeTermNthRootNodes(l)?o(l,n.NthRootTerm,s.ADD_NTH_ROOTS):n.Status.noChange(l)}function o(l,g,h){const m=[];let C=l.cloneDeep(),S=i(C,g);return S.hasChanged()&&(m.push(S),C=n.Status.resetChangeGroups(S.newNode)),S=p(C,g),S.hasChanged()&&(m.push(S),C=n.Status.resetChangeGroups(S.newNode)),S=a(C,g),m.push(S),C=n.Status.resetChangeGroups(S.newNode),S=f(C),m.push(S),C=n.Status.resetChangeGroups(S.newNode),n.Status.nodeChanged(h,l,C,!0,m)}function i(l,g){const h=l.cloneDeep();let m=!1,C=1;return h.args.forEach((S,T)=>{const N=new g(S);N.getCoeffValue()===1&&(h.args[T]=n.Creator.term(N.getBaseNode(),N.getExponentNode(),n.Creator.constant(1),!0),h.args[T].changeGroup=C,l.args[T].changeGroup=C,m=!0,C++)}),m?n.Status.nodeChanged(s.ADD_COEFFICIENT_OF_ONE,l,h,!1):n.Status.noChange(l)}function p(l,g){const h=l.cloneDeep();let m=!1,C=1;return h.args.forEach((S,T)=>{const N=new g(S);N.getCoeffValue()===-1&&(h.args[T]=n.Creator.term(N.getBaseNode(),N.getExponentNode(),N.getCoeffNode(),!0),l.args[T].changeGroup=C,h.args[T].changeGroup=C,m=!0,C++)}),m?n.Status.nodeChanged(s.UNARY_MINUS_TO_NEGATIVE_ONE,l,h,!1):n.Status.noChange(l)}function a(l,g){let h=l.cloneDeep();const m=h.args.map(y=>new g(y)),C=m.map(y=>y.getCoeffNode(!0)),S=n.Creator.parenthesis(n.Creator.operator("+",C));S.changeGroup=1;const T=m[0],N=T.getExponentNode(),E=T.getBaseNode();return h=n.Creator.term(E,N,S),n.Status.nodeChanged(s.GROUP_COEFFICIENTS,l,h,!1)}function f(l){const g=l.cloneDeep().args[0],h=r(g);return n.Status.childChanged(l,h,0)}return lt=t,lt}var pt,Qr;function Gn(){if(Qr)return pt;Qr=1;const c=w(),r=P(),n=q().postOrder(t);function t(u){if(!r.Type.isOperator(u)||u.op!=="*")return r.Status.noChange(u);const o=u.args.some(m=>r.CustomType.isFraction(m)),i=u.args.some(r.PolynomialTerm.isPolynomialTerm),p=u.args.some(e);if(!o||i&&!p)return r.Status.noChange(u);const a=[],f=[];u.args.forEach(m=>{if(r.CustomType.isFraction(m)){const C=r.CustomType.getFraction(m);a.push(C.args[0]),f.push(C.args[1])}else a.push(m)});const l=r.Creator.parenthesis(r.Creator.operator("*",a)),g=f.length===1?f[0]:r.Creator.parenthesis(r.Creator.operator("*",f)),h=r.Creator.operator("/",[l,g]);return r.Status.nodeChanged(c.MULTIPLY_FRACTIONS,u,h)}function e(u){if(!r.CustomType.isFraction(u))return!1;const i=r.CustomType.getFraction(u).args[1];return r.PolynomialTerm.isPolynomialTerm(i)}return pt=n,pt}var ft,Wr;function gs(){if(Wr)return ft;Wr=1;const c=Q(),r=x(),s=yn(),n=Gn(),t=w(),e=P(),u=K();function o(g,h=!1){if(!e.Type.isOperator(g))return e.Status.noChange(g);let m;return!h&&!r.canMultiplyLikeTermConstantNodes(g)&&(m=c(g),m.hasChanged()||(m=n(g),m.hasChanged()))||(m=p(g),m.hasChanged())?(m.changeType=t.MULTIPLY_COEFFICIENTS,m):(m=i(g),m.hasChanged()?m:e.Status.noChange(g))}function i(g){if(!r.canMultiplyLikeTermsNthRoots(g))return e.Status.noChange(g);let h=g.cloneDeep();const m=g.args.map(N=>u.getRadicandNode(N)),C=e.Creator.operator("*",m),S=g.args[0],T=u.getRootNode(S);return h=e.Creator.nthRoot(C,T),e.Status.nodeChanged(t.MULTIPLY_NTH_ROOTS,g,h,!1)}function p(g){if(!r.canMultiplyLikeTermPolynomialNodes(g)&&!r.canMultiplyLikeTermConstantNodes(g))return e.Status.noChange(g);const h=[];let m=g.cloneDeep(),C=a(m);C.hasChanged()&&(h.push(C),m=e.Status.resetChangeGroups(C.newNode)),r.canMultiplyLikeTermConstantNodes(g)?C=f(m):C=l(m),h.push(C),m=e.Status.resetChangeGroups(C.newNode);const S=m.args[1].content,T=c(S);return T.hasChanged()&&(C=e.Status.childChanged(m,T,1),h.push(C),m=e.Status.resetChangeGroups(C.newNode)),h.length===1?h[0]:e.Status.nodeChanged(t.MULTIPLY_POLYNOMIAL_TERMS,g,m,!0,h)}function a(g){const h=g.cloneDeep();let m=!1,C=1;return r.canMultiplyLikeTermConstantNodes(g)?h.args.forEach((S,T)=>{if(e.Type.isConstant(S)){const N=s.getBaseNode(S),E=e.Creator.constant(1);h.args[T]=e.Creator.operator("^",[N,E]),h.args[T].changeGroup=C,g.args[T].changeGroup=C,m=!0,C++}}):h.args.forEach((S,T)=>{const N=new e.PolynomialTerm(S);N.getExponentNode()||(h.args[T]=e.Creator.polynomialTerm(N.getSymbolNode(),e.Creator.constant(1),N.getCoeffNode()),h.args[T].changeGroup=C,g.args[T].changeGroup=C,m=!0,C++)}),m?e.Status.nodeChanged(t.ADD_EXPONENT_OF_ONE,g,h,!1):e.Status.noChange(g)}function f(g){const h=s.getBaseNode(g.args[0]),m=g.args.map(s.getExponentNode),C=e.Creator.parenthesis(e.Creator.operator("+",m)),S=e.Creator.operator("^",[h,C]);return e.Status.nodeChanged(t.COLLECT_CONSTANT_EXPONENTS,g,S)}function l(g){const h=g.args.map(N=>new e.PolynomialTerm(N)),m=h[0].getSymbolNode(),C=h.map(N=>N.getExponentNode(!0)),S=e.Creator.parenthesis(e.Creator.operator("+",C)),T=e.Creator.polynomialTerm(m,S,null);return e.Status.nodeChanged(t.COLLECT_POLYNOMIAL_EXPONENTS,g,T)}return ft=o,ft}var gt,Kr;function xn(){if(Kr)return gt;Kr=1;const c=fs(),r=x(),s=gs(),n=w(),t=_n(),e=P(),u=q(),o={"+":c,"*":s},i=u.postOrder(p);function p(l){if(l.op==="+"){const g=a(l);return g.hasChanged()?g:c(l,!0)}else if(l.op==="*"){if(r.canMultiplyLikeTermConstantNodes(l))return s(l,!0);const g=a(l);return g.hasChanged()?(g.newNode.implicit=!0,g):s(l,!0)}else return e.Status.noChange(l)}function a(l){let g=[];const h=t.collectLikeTerms(l.cloneDeep());if(!h.hasChanged())return h;g.push(h);let m=e.Status.resetChangeGroups(h.newNode);const C=f(m);if(C.length>0){g=g.concat(C);const S=C[C.length-1];m=e.Status.resetChangeGroups(S.newNode)}return e.Status.nodeChanged(n.COLLECT_AND_COMBINE_LIKE_TERMS,l,m,!0,g)}function f(l){const g=[];let h=l.cloneDeep();for(let m=0;m<l.args.length;m++){let C=l.args[m];if(!e.Type.isParenthesis(C))continue;C=C.content;const S=o[h.op](C);if(S.hasChanged()){const T=e.Status.childChanged(h,S,m);g.push(T),h=e.Status.resetChangeGroups(T.newNode)}}return g}return gt=i,gt}var ht,zr;function hs(){if(zr)return ht;zr=1;const c=Q(),r=xn(),s=Dt(),n=w(),t=U(),e=P(),o=q().postOrder(i);function i(T){return e.Type.isUnaryMinus(T)?a(T):e.Type.isOperator(T,"*")?f(T):e.Type.isOperator(T,"^")?p(T):e.Status.noChange(T)}function p(T){if(!e.Type.isOperator(T,"^"))return e.Status.noChange(T);const N=e.Type.isParenthesis(T.args[0])?T.args[0].content:T.args[0],E=e.Type.isParenthesis(T.args[1])?T.args[1].content:T.args[1],y=parseFloat(E.value);if(!(Number.isInteger(y)&&y>1)||!e.Type.isFunction(N,"nthRoot")&&!(e.Type.isOperator(N,"+")||e.Type.isOperator(N,"*")||e.Type.isOperator(N,"/")))return e.Status.noChange(T);const O=e.Type.isFunction(N,"nthRoot")?N:T.args[0];let R;const d=[];let _;if(e.Type.isFunction(N,"nthRoot"))return R=e.Creator.operator("*",Array(parseFloat(E.value)).fill(O)),e.Status.nodeChanged(n.EXPAND_EXPONENT,T,R,!1);if(e.Type.isOperator(N,"+")){acarre=e.Creator.operator("^",[N.args[0],E]),bcarre=e.Creator.operator("^",[N.args[1],E]),doubleproduit=e.Creator.operator("*",[e.Creator.constant(2),e.Creator.operator("*",N.args)]),R=e.Creator.operator("+",[acarre,doubleproduit,bcarre]),_=e.Status.nodeChanged(n.EXPAND_EXPONENT,T,R,!1),d.push(_),newNode=e.Status.resetChangeGroups(_.newNode);const I=C(newNode);return I.hasChanged()&&(_=e.Status.childChanged(newNode,I),d.push(_),newNode=e.Status.resetChangeGroups(_.newNode)),d.length===1?d[0]:e.Status.nodeChanged(n.DISTRIBUTE,T,newNode,!1,d)}else if(e.Type.isOperator(N,"*")){for(let I=0;I<N.args.length;I++)N.args[I]=e.Creator.operator("^",[N.args[I],E]);return e.Status.nodeChanged(n.EXPAND_EXPONENT,T,N,!1)}else if(e.Type.isOperator(N,"/")){for(let I=0;I<2;I++)N.args[I]=e.Creator.operator("^",[N.args[I],E]);return e.Status.nodeChanged(n.EXPAND_EXPONENT,T,N,!1)}}function a(T){if(!e.Type.isUnaryMinus(T))return e.Status.noChange(T);const N=T.args[0];if(!e.Type.isParenthesis(N))return e.Status.noChange(T);const E=N.content;if(!e.Type.isOperator(E))return e.Status.noChange(T);const y=E.cloneDeep();if(T.changeGroup=1,E.op==="*"||E.op==="/"){y.args[0]=t.negate(y.args[0]),y.args[0].changeGroup=1;const O=e.Creator.parenthesis(y);return e.Status.nodeChanged(n.DISTRIBUTE_NEGATIVE_ONE,T,O,!1)}else if(E.op==="+"){const O=y.args.map(d=>{const _=t.negate(d);return _.changeGroup=1,_});y.args=O;const R=e.Creator.parenthesis(y);return e.Status.nodeChanged(n.DISTRIBUTE_NEGATIVE_ONE,T,R,!1)}else return e.Status.noChange(T)}function f(T){if(!e.Type.isOperator(T)||T.op!=="*")return e.Status.noChange(T);for(let N=0;N+1<T.args.length;N++){if(!S(T.args[N])&&!S(T.args[N+1]))continue;let E=T.cloneDeep();const y=[];let O;const R=l(E.args[N],E.args[N+1]);if(T.args[N].changeGroup=1,T.args[N+1].changeGroup=1,R.changeGroup=1,E.args.length>2?(E.args.splice(N,2,R),E.args[N].changeGroup=1):(E=R,E.changeGroup=1),O=e.Status.nodeChanged(n.DISTRIBUTE,T,E,!1),y.push(O),E=e.Status.resetChangeGroups(O.newNode),e.Type.isOperator(E,"*")){const d=m(E.args[N]);d.hasChanged()&&(O=e.Status.childChanged(E,d,N),y.push(O),E=e.Status.resetChangeGroups(O.newNode))}else if(e.Type.isParenthesis(E))O=m(E),O.hasChanged()&&(y.push(O),E=e.Status.resetChangeGroups(O.newNode));else throw Error("Unsupported node type for distribution: "+T);return y.length===1?y[0]:e.Status.nodeChanged(n.DISTRIBUTE,T,E,!1,y)}return e.Status.noChange(T)}function l(T,N){let E,y;S(T)?E=T.content.args:E=[T],S(N)?y=N.content.args:y=[N];const O=[];if([E,y].filter(g).length===1){const R=g(E),d=R?E:y,_=R?N:T;d.forEach(I=>{let v;if(h(I)){let F=e.Creator.operator("*",[I.args[0],_]);F=e.Creator.parenthesis(F),v=e.Creator.operator("/",[F,I.args[1]])}else v=e.Creator.operator("*",[I,_]);v.changeGroup=1,O.push(v)})}else E.length>1&&y.length>1?E.forEach(R=>{const d=e.Creator.operator("*",[R,N]);d.changeGroup=1,O.push(d)}):E.forEach(R=>{y.forEach(d=>{const _=e.Creator.operator("*",[R,d]);_.changeGroup=1,O.push(_)})});return e.Creator.parenthesis(e.Creator.operator("+",O))}function g(T){return T.filter(h).length>0}function h(T){return e.Type.isOperator(T,"/")}function m(T){if(!e.Type.isParenthesis(T))throw Error("expected "+T+" to be a parenthesis node");const N=C(T.content);return N.hasChanged()?e.Status.childChanged(T,N):e.Status.noChange(T)}function C(T){const N=[],E=[c,s,r,f,p];let y=T.cloneDeep();for(let O=0;O<y.args.length;O++)for(let R=0;R<E.length;R++){const d=E[R](y.args[O]);if(d.hasChanged()){const _=e.Status.childChanged(y,d,O);N.push(_),y=e.Status.resetChangeGroups(_.newNode)}}return N.length===0?e.Status.noChange(T):e.Status.nodeChanged(n.SIMPLIFY_TERMS,T,y,!1,N)}function S(T){if(!e.Type.isParenthesis(T))return!1;const N=T.content;return e.Type.isOperator(N,"+")}return ht=o,ht}var Ct,Jr;function Cs(){if(Jr)return Ct;Jr=1;const c=w(),r=P(),n=q().preOrder(t);function t(i){if(!r.Type.isOperator(i)||i.op!=="/")return r.Status.noChange(i);let p=e(i);return p.hasChanged()||(p=u(i),p.hasChanged())?p:r.Status.noChange(i)}function e(i){let p=i.args[1];if(r.Type.isParenthesis(p)&&(p=p.content),!r.Type.isOperator(p)||p.op!=="/")return r.Status.noChange(i);const a=p.args[1],f=p.args[0],l=r.Creator.operator("/",[a,f]),g=r.Creator.operator("*",[i.args[0],l]);return r.Status.nodeChanged(c.MULTIPLY_BY_INVERSE,i,g)}function u(i){const p=o(i);if(p.length>2){const a=p.shift(),f=r.Creator.parenthesis(r.Creator.operator("*",p)),l=r.Creator.operator("/",[a,f]);return r.Status.nodeChanged(c.SIMPLIFY_DIVISION,i,l)}return r.Status.noChange(i)}function o(i){let p=i;const a=[];for(;p.op==="/";)a.unshift(p.args[1]),p=p.args[0];return a.unshift(p),a}return Ct=n,Ct}var Tt,en;function Ts(){if(en)return Tt;en=1;const c=J(),r=H(),s=w(),n=U(),t=P();class e{constructor(f,l,g=!1){this.numerator=f,this.denominator=l,this.hasChanged=g}}function u(a){if(!t.Type.isOperator(a)||a.op!=="/")return t.Status.noChange(a);let f=a.cloneDeep();const l=f.args[0],g=f.args[1];if(!i(l)&&!i(g)){const h=o(l,g);return h.hasChanged?(f.args[0]=h.numerator||t.Creator.constant(1),h.denominator?f.args[1]=h.denominator:f=f.args[0],t.Status.nodeChanged(s.CANCEL_TERMS,a,f)):t.Status.noChange(a)}else if(i(l)&&!i(g)){const h=t.Type.isParenthesis(l)?l.content.args:l.args;for(let m=0;m<h.length;m++){const C=o(h[m],g);if(C.hasChanged)return C.numerator?h[m]=C.numerator:(h.splice(m,1),h.length===1&&(f.args[0]=h[0])),C.denominator?f.args[1]=C.denominator:f=f.args[0],t.Status.nodeChanged(s.CANCEL_TERMS,a,f)}return t.Status.noChange(a)}else if(i(g)&&!i(l)){const h=t.Type.isParenthesis(g)?g.content.args:g.args;for(let m=0;m<h.length;m++){const C=o(l,h[m]);if(C.hasChanged)return f.args[0]=C.numerator||t.Creator.constant(1),C.denominator?h[m]=C.denominator:(h.splice(m,1),h.length===1&&(f.args[1]=h[0])),t.Status.nodeChanged(s.CANCEL_TERMS,a,f)}return t.Status.noChange(a)}else{const h=t.Type.isParenthesis(l)?l.content.args:l.args,m=t.Type.isParenthesis(g)?g.content.args:g.args;for(let C=0;C<h.length;C++)for(let S=0;S<m.length;S++){const T=o(h[C],m[S]);if(T.hasChanged)return T.numerator?h[C]=T.numerator:(h.splice(C,1),h.length===1&&(f.args[0]=h[0])),T.denominator?m[S]=T.denominator:(m.splice(S,1),m.length===1&&(f.args[1]=m[0])),t.Status.nodeChanged(s.CANCEL_TERMS,a,f)}return t.Status.noChange(a)}}function o(a,f){if(t.Type.isUnaryMinus(a)){const l=o(a.args[0],f);return l.numerator?n.isNegative(l.numerator)?a=n.negate(l.numerator):a.args[0]=l.numerator:a=t.Creator.constant(-1),f=o.denominator,new e(a,f,l.hasChanged)}if(t.Type.isUnaryMinus(f)){const l=o(a,f.args[0]);return a=l.numerator,l.denominator?f.args[0]=l.denominator:(f=l.denominator,a?a=n.negate(a):a=t.Creator.constant(-1)),new e(a,f,l.hasChanged)}if(t.Type.isParenthesis(a)){const l=o(a.content,f);return l.numerator?a.content=l.numerator:a=l.numerator,f=l.denominator,new e(a,f,l.hasChanged)}if(t.Type.isParenthesis(f)){const l=o(a,f.content);return l.denominator?f.content=l.denominator:f=l.denominator,a=l.numerator,new e(a,f,l.hasChanged)}if(r.ascii(a)===r.ascii(f))return new e(null,null,!0);if(t.Type.isOperator(a,"^")&&t.Type.isOperator(f,"^")&&r.ascii(a.args[0])===r.ascii(f.args[0])){const l=a.args[1];let g=f.args[1];g=t.Creator.parenthesis(g);const h=t.Creator.parenthesis(t.Creator.operator("-",[l,g]));return a.args[1]=h,new e(a,null,!0)}if(t.PolynomialTerm.isPolynomialTerm(a)&&t.PolynomialTerm.isPolynomialTerm(f)){const l=new t.PolynomialTerm(a),g=new t.PolynomialTerm(f);if(l.getSymbolName()!==g.getSymbolName())return t.Type.isOperator(a,"*")&&t.Type.isOperator(f,"*")?p(a,f):new e(a,f);const h=l.getExponentNode(!0);let m=g.getExponentNode(!0);if(r.ascii(h)===r.ascii(m))a=l.getCoeffNode();else{m=t.Creator.parenthesis(m);const C=t.Creator.parenthesis(t.Creator.operator("-",[h,m]));a=t.Creator.polynomialTerm(l.getSymbolNode(),C,l.getCoeffNode())}return f=g.getCoeffNode(),new e(a,f,!0)}if(t.Type.isConstant(a)&&t.Type.isOperator(f,"*")&&t.PolynomialTerm.isPolynomialTerm(f)){const l=new t.PolynomialTerm(f),g=l.getCoeffNode(),h=l.getSymbolNode(),m=l.getExponentNode(),C=t.Creator.operator("/",[a,g]);let S=g.cloneDeep();const T=c(C);return T.hasChanged()?(t.Type.isConstant(T.newNode)?(a=T.newNode,S=null):[a,S]=T.newNode.args,f=t.Creator.polynomialTerm(h,m,S),new e(a,f,!0)):new e(a,f,!1)}if(t.Type.isConstant(a)&&t.Type.isConstant(f)){const l=t.Creator.operator("/",[a,f]),g=c(l);return g.hasChanged()?t.Type.isConstant(g.newNode)?new e(g.newNode,null,!0):(t.Type.isConstant(g.newNode)?(a=g.newNode,f=null):[a,f]=g.newNode.args,new e(a,f,!0)):new e(a,f,!1)}return new e(a,f)}function i(a){return t.Type.isParenthesis(a)?i(a.content):t.Type.isOperator(a,"*")&&!t.PolynomialTerm.isPolynomialTerm(a)}function p(a,f){const l=new t.PolynomialTerm(f),g=new t.PolynomialTerm(a),h=l.getCoeffNode(),m=l.getSymbolNode(),C=l.getExponentNode(),S=g.getCoeffNode(),T=g.getSymbolNode(),N=g.getExponentNode(),E=t.Creator.operator("/",[S,h]),y=c(E);if(!y.hasChanged())return new e(a,f,!1);let O=null,R=null;t.Type.isConstant(y.newNode)?(R=t.Creator.polynomialTerm(T,N,y.newNode),O=null):(R=t.Creator.polynomialTerm(T,N,y.newNode.args[0]),O=y.newNode.args[1]);const d=t.Creator.polynomialTerm(m,C,O);return new e(R,d,!0)}return Tt=u,Tt}var Nt,tn;function qn(){if(tn)return Nt;tn=1;const c=w(),r=U(),s=P();function n(t){if(!s.Type.isOperator(t)||t.op!=="/")return s.Status.noChange(t);const e=t.cloneDeep();let u=t.args[0],o=t.args[1];if(r.isNegative(o)){o=r.negate(o);const i=r.isNegative(u)?c.CANCEL_MINUSES:c.SIMPLIFY_SIGNS;u=r.negate(u);const p=s.Creator.operator("/",[u,o]);return s.Status.nodeChanged(i,e,p)}else return s.Status.noChange(t)}return Nt=n,Nt}var mt,rn;function Ns(){if(rn)return mt;rn=1;const c=Q(),r=J(),s=P();function n(t){if(!s.PolynomialTerm.isPolynomialTerm(t))return s.Status.noChange(t);const e=new s.PolynomialTerm(t.cloneDeep());if(!e.hasFractionCoeff())return s.Status.noChange(t);const u=[r,c];for(let o=0;o<u.length;o++){const i=e.getCoeffNode(),p=u[o](i);if(p.hasChanged()){let a=s.Status.resetChangeGroups(p.newNode);a.value==="1"&&(a=null);const f=e.getExponentNode(),l=s.Creator.polynomialTerm(e.getSymbolNode(),f,a);return s.Status.nodeChanged(p.changeType,t,l)}}return s.Status.noChange(t)}return mt=n,mt}var yt,nn;function ms(){if(nn)return yt;nn=1;const c=Bn(),r=Ut(),s=Ts(),n=J(),t=qn(),e=Ns(),u=P(),o=q(),i=[r,c,t,n,e,s],p=o.preOrder(a);function a(f){for(let l=0;l<i.length;l++){const g=i[l](f);if(g.hasChanged())return g;f=g.newNode}return u.Status.noChange(f)}return yt=p,yt}var St,sn;function ys(){if(sn)return St;sn=1;const c=B(),r=w(),s=Y(),n=P();function t(e){if(!n.Type.isFunction(e,"abs")||e.args.length>1)return n.Status.noChange(e);let u=e.cloneDeep();const o=u.args[0];if(n.Type.isConstant(o,!0))return u=n.Creator.constant(c.abs(s(o))),n.Status.nodeChanged(r.ABSOLUTE_VALUE,e,u);if(n.Type.isConstantFraction(o,!0)){const i=n.Creator.constant(c.abs(s(o.args[0]))),p=n.Creator.constant(c.abs(s(o.args[1])));return u=n.Creator.operator("/",[i,p]),n.Status.nodeChanged(r.ABSOLUTE_VALUE,e,u)}else return n.Status.noChange(e)}return St=t,St}var Et,on;function Ss(){if(on)return Et;on=1;const c=ys(),r=P(),s=K(),n=q(),t=[s.nthRoot,c],e=n.postOrder(u);function u(o){if(!r.Type.isFunction(o))return r.Status.noChange(o);for(let i=0;i<t.length;i++){const p=t[i](o);if(p.hasChanged())return p}return r.Status.noChange(o)}return Et=e,Et}var Ot,an;function Yn(){if(an)return Ot;an=1;const c=x(),r=P(),s=Nn(),n=Q(),t=cs(),e=ls(),u=xn(),o=hs(),i=Cs(),p=ms(),a=Ss(),f=Gn(),l=$(),g=H(),h=z();function m(N,E=!1){if(E&&console.log(`

Simplifying: `+g.ascii(N,!1,!0)),c.hasUnsupportedNodes(N))return[];let y;const O=[],R=g.ascii(N),d=20;let _=0;for(y=C(N);y.hasChanged();)if(E&&T(y),O.push(S(y)),N=s.resetChangeGroups(y.newNode),y=C(N),_++===d)return console.error("Math error: Potential infinite loop for expression: "+R+", returning no steps"),[];return O}function C(N){let E;N=l(N),N=h(N,!0);const y=[t,i,p,u,n,e,f,o,a];for(let O=0;O<y.length;O++){if(E=y[O](N),N=h(E.newNode,!0),E.hasChanged())return N=l(N),E.newNode=N.cloneDeep(),E;N=l(N)}return r.Status.noChange(N)}function S(N){return N.substeps.length>0&&N.substeps.map(S),N.oldNode=h(N.oldNode,!0),N.newNode=h(N.newNode,!0),N}function T(N){console.log(N.changeType),console.log(g.ascii(N.newNode)+`
`),N.substeps.length>0&&(console.log(`
substeps: `),N.substeps.forEach(E=>E))}return Ot=m,Ot}var dt,un;function Es(){if(un)return dt;un=1;const c=B(),r=Yn();function s(n,t=!1){let e;try{e=c.parse(n)}catch{return[]}return e?r(e,t):[]}return dt=s,dt}var _t,cn;function Vn(){if(cn)return _t;cn=1;const c=w(),r=j(),s=P();class n{constructor(e,u,o,i=[]){if(!o)throw Error("new equation isn't defined");if(e===void 0||typeof e!="string")throw Error("changetype isn't valid");this.changeType=e,this.oldEquation=u,this.newEquation=o,this.substeps=i}hasChanged(){return this.changeType!==c.NO_CHANGE}}return n.noChange=function(t){return new n(c.NO_CHANGE,null,t)},n.addLeftStep=function(t,e){const u=[];e.substeps.forEach(p=>{u.push(n.addLeftStep(t,p))});let o=null;e.oldNode&&(o=t.clone(),o.leftNode=e.oldNode);const i=t.clone();return i.leftNode=e.newNode,new n(e.changeType,o,i,u)},n.addRightStep=function(t,e){const u=[];e.substeps.forEach(p=>{u.push(n.addRightStep(t,p))});let o=null;e.oldNode&&(o=t.clone(),o.rightNode=e.oldNode);const i=t.clone();return i.rightNode=e.newNode,new n(e.changeType,o,i,u)},n.resetChangeGroups=function(t){const e=s.Status.resetChangeGroups(t.leftNode),u=s.Status.resetChangeGroups(t.rightNode);return new r(e,u,t.comparator)},_t=n,_t}var Rt,ln;function Os(){if(ln)return Rt;ln=1;const c=w(),{canCrossMultiplication:r}=x(),s=j(),n=Vn(),t=U(),e=P(),u=At(),o={">":"<",">=":"<=","<":">","<=":">=","=":"="},i={};i.ensureSymbolInLeftNode=function(f,l){const g=u.getLastSymbolTerm(f.leftNode,l),h=u.getLastSymbolTerm(f.rightNode,l);if(!g)if(h){const m=o[f.comparator],C=f,S=new s(f.rightNode,f.leftNode,m);return new n(c.SWAP_SIDES,C,S)}else throw Error("No term with symbol: "+l);return n.noChange(f)},i.crossMultiply=function(f,l){if(!r(f))return n.noChange(f);const h=f.leftNode.cloneDeep(),m=f.rightNode.cloneDeep(),C=f;if(e.Type.isConstantOrConstantFraction(h.args[0])&&e.PolynomialTerm.isPolynomialTerm(h.args[1])&&e.Type.isConstantOrConstantFraction(m.args[0])&&e.Type.isConstantOrConstantFraction(m.args[1])){const S=e.Creator.operator("*",[m.args[0],h.args[1]]);h.args[1].changeGroup=1;const T=e.Creator.operator("*",[m.args[1],h.args[0]]),N=new s(S,T,f.comparator);return new n(c.CROSS_PRODUCT_EQUALITY,C,N)}else if(e.Type.isConstantOrConstantFraction(h.args[0])&&e.Type.isConstantOrConstantFraction(h.args[1])&&e.Type.isConstantOrConstantFraction(m.args[0])&&e.PolynomialTerm.isPolynomialTerm(m.args[1])){const S=e.Creator.operator("*",[h.args[1],m.args[0]]);m.args[0].changeGroup=1;const T=e.Creator.operator("*",[h.args[0],m.args[1]]),N=new s(S,T,f.comparator);return new n(c.CROSS_PRODUCT_EQUALITY,C,N)}else throw Error("No CROSS_PRODUCT_EQUALITY: "+C.ascii())},i.removeSymbolFromDenominator=function(f,l){if(f.comparator!=="=")return n.noChange(f);const g=f.leftNode,h=u.getLastDenominatorWithSymbolTerm(g,l);return h?p(f,"*",h,c.MULTIPLY_TO_BOTH_SIDES):n.noChange(f)},i.removeSymbolFromRightSide=function(f,l){const g=f.rightNode;let h=u.getLastSymbolTerm(g,l),m,C,S;if(!h)return n.noChange(f);if(h=h.cloneDeep(),e.PolynomialTerm.isPolynomialTerm(g))t.isNegative(h)?(m="+",S=c.ADD_TO_BOTH_SIDES,C=t.negate(h)):(m="-",S=c.SUBTRACT_FROM_BOTH_SIDES,C=h);else if(e.Type.isOperator(g))if(g.op==="+")t.isNegative(h)?(m="+",S=c.ADD_TO_BOTH_SIDES,C=t.negate(h)):(m="-",S=c.SUBTRACT_FROM_BOTH_SIDES,C=h);else throw Error("Unsupported operation: "+h.op);else if(e.Type.isUnaryMinus(g))m="+",S=c.ADD_TO_BOTH_SIDES,C=h.args[0];else throw Error("Unsupported node type: "+g.type);return p(f,m,C,S)},i.isolateSymbolOnLeftSide=function(f,l){let g=f.leftNode;e.Type.isParenthesis(g)&&(g=g.content);let h=u.getLastNonSymbolTerm(g,l),m,C,S;if(!h)return n.noChange(f);if(h=h.cloneDeep(),e.Type.isOperator(g))if(g.op==="+")t.isNegative(h)?(m="+",S=c.ADD_TO_BOTH_SIDES,C=t.negate(h)):(m="-",S=c.SUBTRACT_FROM_BOTH_SIDES,C=h);else if(g.op==="*")e.Type.isConstantFraction(h)?(m="*",S=c.MULTIPLY_BOTH_SIDES_BY_INVERSE_FRACTION,C=e.Creator.operator("/",[h.args[1],h.args[0]])):(m="/",S=c.DIVIDE_FROM_BOTH_SIDES,C=h);else if(g.op==="/")["1","-1"].indexOf(h.args[0].value)!==-1?(m="*",S=c.MULTIPLY_TO_BOTH_SIDES,C=h.args[1]):(m="*",S=c.MULTIPLY_BOTH_SIDES_BY_INVERSE_FRACTION,C=e.Creator.operator("/",[h.args[1],h.args[0]]));else{if(g.op==="^")return n.noChange(f);throw Error("Unsupported operation: "+g.op)}else if(e.Type.isUnaryMinus(g))m="*",S=c.MULTIPLY_BOTH_SIDES_BY_NEGATIVE_ONE,C=e.Creator.constant(-1);else throw Error("Unsupported node type: "+g.type);return p(f,m,C,S)};function p(f,l,g,h){const m=f.clone(),C=g.cloneDeep(),S=g.cloneDeep(),T=a(f.leftNode,l,C),N=a(f.rightNode,l,S);let E=f.comparator;t.isNegative(g)&&(l==="*"||l==="/")&&(E=o[E]);const y=new s(T,N,E);return new n(h,m,y)}function a(f,l,g){let h=e.Type.isOperator(f)?e.Creator.parenthesis(f):f;return e.Type.isOperator(f)&&f.op==="*"&&l==="/"&&(h=f),g.changeGroup=1,g=e.Type.isOperator(g)?e.Creator.parenthesis(g):g,e.Creator.operator(l,[h,g])}return Rt=i,Rt}var It,pn;function ds(){if(pn)return It;pn=1;const c=w(),r=x(),s=j(),n=Os(),t=Vn(),e=Y(),u=Rn(),o=$(),i=P(),p=z(),a=Yn(),f=At(),l={"=":function(E,y){return E===y},">":function(E,y){return E>y},">=":function(E,y){return E>=y},"<":function(E,y){return E<y},"<=":function(E,y){return E<=y}};function g(E,y,O,R=!1){let d=new s(E,y,O);if(R&&console.log(`

Solving: `+d.ascii(!1,!0)),r.hasUnsupportedNodes(d.leftNode)||r.hasUnsupportedNodes(d.rightNode))return[];const _=f.getSymbolsInEquation(d);if(_.size===0)return C(d,R);const I=_.values().next().value;let v,F=[];const L=d.ascii(),M=20;let D=0;if(d.leftNode=p(d.leftNode),d.rightNode=p(d.rightNode),r.canFindRoots(d))return F.push(h(d)),F;do{if(F=T(F,d,R),F.length>0){const A=F[F.length-1];d=s.createEquationFromString(A.newEquation.ascii(!1,!0),d.comparator)}if(d.leftNode=o(d.leftNode),d.rightNode=o(d.rightNode),f.getSymbolsInEquation(d).size===0)return C(d,R,F);if(r.canFindRoots(d))return F.push(h(d)),F;try{v=S(d,I)}catch(A){if(A.message.startsWith("No term with symbol: "))return console.error("Math error: "+A.message+", returning no steps"),[];throw A}if(v.hasChanged()){if(v.newEquation.ascii().length>300)throw Error("Math error: Potential infinite loop for equation "+L+". It reached over 300 characters  long, so returning no steps");R&&N(v),F.push(v)}if(d=t.resetChangeGroups(v.newEquation),D++===M)return console.error("Math error: Potential infinite loop for equation: "+L+", returning no steps"),[]}while(v.hasChanged());return F}function h(E){const[y,O]=m(E);let R;if(y.length>1){const _=[];y.forEach(I=>I.items?_.push(...I.items):_.push(I)),R=i.Creator.list(_)}else y.length===1?R=y[0]:R=i.Creator.list([]);const d=new s(O,R,"=");return new t(c.FIND_ROOTS,E,d)}function m(E){const y=E.leftNode,O=[];let R,d,_;i.Type.isOperator(y,"^")&&!r.resolvesToConstant(y)?_=[y]:_=E.leftNode.args.filter(v=>!r.resolvesToConstant(v));for(var I in _){let v=_[I],F=1;i.Type.isOperator(v,"^")&&(F=parseFloat(v.args[1].value),v=v.args[0]);const L=i.Type.isParenthesis(v)?v.content:v;if(d=g(L,E.rightNode,"="),d.length===0&&i.Type.isSymbol(L))R=L,O.push(...Array(F).fill(E.rightNode));else if(d.length!==0){const M=d.slice(-1)[0];i.Type.isSymbol(M.newEquation.leftNode)&&(R=M.newEquation.leftNode,O.push(...Array(F).fill(M.newEquation.rightNode)))}}return[O,R]}function C(E,y,O=[]){const R=l[E.comparator];if(!R)throw Error("Unexpected comparator");if(O=T(O,E,!0),O.length>0){const F=O[O.length-1];E=s.createEquationFromString(F.newEquation.ascii(),E.comparator)}if(E.leftNode=p(E.leftNode),E.rightNode=p(E.rightNode),!i.Type.isConstantOrConstantFraction(E.leftNode,!0)||!i.Type.isConstantOrConstantFraction(E.rightNode,!0))throw Error("Expected both nodes to be constants, instead got: "+E.ascii());const d=e(E.leftNode),_=e(E.rightNode);let I;R(d,_)?I=c.STATEMENT_IS_TRUE:I=c.STATEMENT_IS_FALSE;const v=new t(I,null,E);return y&&N(v),O.push(v),O}function S(E,y){const O=[n.ensureSymbolInLeftNode,n.crossMultiply,n.removeSymbolFromDenominator,n.removeSymbolFromRightSide,n.isolateSymbolOnLeftSide];for(let R=0;R<O.length;R++){const d=O[R](E,y);if(d.hasChanged())return d}return t.noChange(E)}function T(E,y,O=!1){let R=y.clone();const d=a(y.leftNode,!1),_=d.length!==0?d.slice(-1)[0].newNode:y.leftNode,I=u(_,!1),v=[];for(let M=0;M<d.length;M++){const D=d[M];v.push(t.addLeftStep(y,D))}for(let M=0;M<I.length;M++){const D=I[M];v.push(t.addLeftStep(y,D))}if(v.length===1){const M=v[0];O&&N(M),E.push(M)}else if(v.length>1){const M=v[v.length-1],D=t.resetChangeGroups(M.newEquation),A=new t(c.SIMPLIFY_LEFT_SIDE,R,D,v);O&&N(A),E.push(A)}E.length>0&&(y=t.resetChangeGroups(E[E.length-1].newEquation)),R=y.clone();const F=a(y.rightNode,!1),L=[];for(let M=0;M<F.length;M++){const D=F[M];L.push(t.addRightStep(y,D))}if(L.length===1){const M=L[0];O&&N(M),E.push(M)}else if(L.length>1){const M=L[L.length-1],D=t.resetChangeGroups(M.newEquation),A=new t(c.SIMPLIFY_RIGHT_SIDE,R,D,L);O&&N(A),E.push(A)}return E}function N(E){console.log(`
`+E.changeType),console.log(E.newEquation.ascii()),E.substeps.length>0&&(console.log(`
 substeps: `),E.substeps.forEach(N))}return It=g,It}var vt,fn;function _s(){if(fn)return vt;fn=1;const c=B(),r=ds();function s(n,t=!1){const e=["<=",">=","=","<",">"];for(let u=0;u<e.length;u++){const o=e[u],i=n.split(o);if(i.length!==2)continue;let p,a;const f=i[0].trim(),l=i[1].trim();if(!f||!l)return[];try{p=c.parse(f),a=c.parse(l)}catch{return[]}if(p&&a)return r(p,a,o,t)}return[]}return vt=s,vt}var Pt,gn;function Rs(){if(gn)return Pt;gn=1;const c=w(),r=U(),s=P();function n(t){if(!s.Type.isOperator(t))return s.Status.noChange(t);if(t.op==="/"){const e=t.cloneDeep();let u=t.args[0],o=t.args[1];if(r.isNegative(o)&&r.isNegative(u)){o=r.negate(o),u=r.negate(u);const i=c.CANCEL_MINUSES,p=s.Creator.operator("/",[u,o]);return s.Status.nodeChanged(i,e,p)}else if(r.isNegative(o)&&!r.isNegative(u)){o=r.negate(o);const i=c.SIMPLIFY_SIGNS_BEFORE,p=s.Creator.operator("/",[u,o]),a=s.Creator.unaryMinus(p);return s.Status.nodeChanged(i,e,a)}else if(!r.isNegative(o)&&r.isNegative(u)){u=r.negate(u);const i=c.SIMPLIFY_SIGNS_BEFORE,p=s.Creator.operator("/",[u,o]),a=s.Creator.unaryMinus(p);return s.Status.nodeChanged(i,e,a)}else return s.Status.noChange(t)}else if(t.op==="-"&&t.args.length===2&&s.Type.isOperator(t.args[1])&&t.args[1].op==="/"){const e=t.args[1];let u=e.args[0],o=e.args[1],i="-";r.isNegative(u)&&r.isNegative(o)?(u=r.negate(u),o=r.negate(o),i="-"):r.isNegative(o)&&!r.isNegative(u)?(o=r.negate(o),i="+"):!r.isNegative(o)&&r.isNegative(u)&&(u=r.negate(u),i="+");const p=c.SIMPLIFY_SIGNS_BEFORE,a=s.Creator.operator(i,[t.args[0],s.Creator.operator("/",[u,o])]);return s.Status.nodeChanged(p,t,a)}else if(t.op==="+"&&t.args.length===2&&s.Type.isOperator(t.args[1])&&t.args[1].op==="/"){const e=t.args[1];let u=e.args[0],o=e.args[1],i="+";r.isNegative(u)&&r.isNegative(o)?(u=r.negate(u),o=r.negate(o),i="+"):r.isNegative(o)&&!r.isNegative(u)?(o=r.negate(o),i="-"):!r.isNegative(o)&&r.isNegative(u)&&(u=r.negate(u),i="-");const p=c.SIMPLIFY_SIGNS_BEFORE,a=s.Creator.operator(i,[t.args[0],s.Creator.operator("/",[u,o])]);return s.Status.nodeChanged(p,t,a)}else return s.Status.noChange(t)}return Pt=n,Pt}var Ft,hn;function Is(){if(hn)return Ft;hn=1,P();const c=q(),r=z(),s=qn(),n=Rs(),t=In(),e=Dt(),u=vn(),o=Pn(),i=Fn(),p=Mn(),a=wn(),f=Ln(),l=An(),g=Dn(),h=Un(),m=bn();return Ft={SIMPLIFICATION_FUNCTIONS:{convertMixedNumberToImproperFraction:t,reduceMultiplicationByZero:o,reduceZeroDividedByAnything:i,reduceExponentByZero:u,removeExponentByOne:l,removeExponentBaseOne:f,simplifyDoubleUnaryMinus:m,removeAdditionOfZero:p,removeMultiplicationByOne:h,removeMultiplicationByNegativeOne:g,removeDivisionByOne:a,rearrangeCoefficient:e,removeUnnecessaryParens:r,simplifyFractionSigns:s,simplifyFractionSignsBefore:n},TreeSearch:c},Ft}var Mt,Cn;function vs(){if(Cn)return Mt;Cn=1;const c=w(),r=us(),s=Es(),n=_s(),t=H(),e=P(),u=U(),o=$(),{SIMPLIFICATION_FUNCTIONS:i,TreeSearch:p}=Is(),a=j();return Mt={factor:r,simplifyExpression:s,solveEquation:n,Node:e,Negative:u,printMS:t,flatten:o,ChangeTypes:c,SIMPLIFICATION_FUNCTIONS:i,TreeSearch:p,Equation:a},Mt}var Fs=vs();export{Fs as m};
//# sourceMappingURL=mathsteps-m4YnGb-n.js.map
