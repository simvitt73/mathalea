import{r as ut}from"./katex-BISJkeK-.js";import{c as ke,u as Ce,p as Se,d as Ie,m as Ne,s as $e,a as Pe,e as Le,b as Ee}from"./mathjs-DKCMnljp.js";import{c as Me,a as Te}from"./xstate-BSXD3zxA.js";function Ae(e,t){const i=document.createElement("div");i.style.display="flex",i.classList.add("apiGeom-color-palette");for(const s of e){const n=document.createElement("button");n.style.backgroundColor=s,n.style.width="30px",n.style.height="30px",n.style.marginRight="10px",n.style.marginLeft="4px",n.style.marginTop="10px",n.style.cursor="pointer",n.style.borderRadius="5px",n.style.backgroundColor=s,n.style.border="1px solid black",n.style.padding="2px",n.title=Oe(s),n.addEventListener("click",()=>{var o;t.options.color=s,wt(t),t.options.changeColorChangeActionToSetOptions&&((o=t.buttons.get("SET_OPTIONS"))==null||o.click())}),i.appendChild(n)}return wt(t),i}function wt(e){if(!e.options)return;const t=document.querySelectorAll(".apiGeom-color-palette button");for(const i of Array.from(t)){const s=i;s.style.backgroundColor===e.options.color?(s.style.boxShadow="0px 0px 10px 0px rgba(0,0,0,0.75)",s.style.transform="scale(1.2) translate(1px, 1px"):(s.style.boxShadow="",s.style.transform="")}}const At={black:"Noir",blue:"Bleu",gray:"Gris",green:"Vert",lightgray:"Gris clair",purple:"Violet",red:"Rouge",yellow:"Jaune"};function Oe(e){return At[e]!==void 0?At[e]:e.charAt(0).toUpperCase()+e.slice(1)}const De="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='183.46666'%20height='36'%20viewBox='0%200%20172%2033.750001'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='traitPointilles.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='2.9324129'%20inkscape:cx='91.73333'%20inkscape:cy='18.073853'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20units='px'%20height='40px'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:7.80938;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:15.6188,%2015.6188;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20237.13226,248.95148%20H%20383.91529'%20id='path2564'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e",_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='183.46666'%20height='36'%20viewBox='0%200%20172%2033.750001'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='traitContinu.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='7.6035613'%20inkscape:cx='35.378159'%20inkscape:cy='18.017873'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20units='px'%20height='40px'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:7.80938;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20235.17991,248.95148%20H%20381.96294'%20id='path2564'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e";function Fe(e){const t=document.createElement("div");t.style.display="flex",t.classList.add("apiGeom-dashed-choice");const i={};for(const s of["noDashed","dashed"]){const n=document.createElement("img");n.src=s==="noDashed"?_e:De,n.title=s==="noDashed"?"Trait plein":"Pointillés",n.style.width="30px",n.style.margin="10px",n.style.marginLeft="4px",n.style.marginTop="30px",n.style.cursor="pointer",n.style.padding="2px",n.addEventListener("click",()=>{e.options.isDashed=s==="dashed",le(e)}),n.id=s,i[s]=n,t.appendChild(n)}return ae(i.noDashed,i.dashed,e.options.isDashed),t}function ae(e,t,i){i?(e.style.boxShadow="",e.style.transform="",t.style.boxShadow="0px 0px 10px 0px rgba(0,0,0,0.75)",t.style.transform="scale(1.2) translate(1px, 1px"):(t.style.boxShadow="",t.style.transform="",e.style.boxShadow="0px 0px 10px 0px rgba(0,0,0,0.75)",e.style.transform="scale(1.2) translate(1px, 1px")}function le(e){const t=document.querySelectorAll(".apiGeom-dashed-choice img#dashed"),i=document.querySelectorAll(".apiGeom-dashed-choice img#noDashed");for(let s=0;s<t.length;s++)ae(i[s],t[s],e.options.isDashed)}function Re(e,t,i=!1){var s;i&&(e.stackUndo=[],e.stackRedo=[]);for(const n of e.elements.values())n.remove();if(e.elements.clear(),e.divFigure!=null&&(e.divFigure.innerHTML=""),e.clearHtml(),(s=e.divFigure)==null||s.appendChild(e.svg),t.options!=null){const n=t.options;for(const[o,r]of Object.entries(n))o in e.options&&(e.options[o]=r)}wt(e),le(e),e.pointer=e.create("Point",{isChild:!0,isFree:!1,isVisible:!1,color:"black",shape:"",x:0,y:0}),e.pointer.type="pointer";for(const n of Object.values(t))if(n.type==="Point")e.create("Point",{x:n.x,y:n.y,...n});else if(n.type==="Arc"){const o=e.elements.get(n.idCenter),r=e.elements.get(n.idStart),a=e.elements.get(n.idDynamicAngle);e.create("Arc",{center:o,dynamicAngle:a,start:r,...n})}else if(n.type==="ArcByCenterRadiusAndAngles"){const o=e.elements.get(n.idCenter),r=n.radius,a=n.startAngle,l=n.endAngle;e.create("ArcByCenterRadiusAndAngles",{center:o,endAngle:l,radius:r,startAngle:a,...n})}else if(n.type==="BisectorByPoints"){const o=e.elements.get(n.idOrigin),r=e.elements.get(n.idPointOnSide1),a=e.elements.get(n.idPointOnSide2);e.create("BisectorByPoints",{origin:o,pointOnSide1:r,pointOnSide2:a,...n})}else if(n.type==="Circle"){const o=e.elements.get(n.idCenter);e.create("Circle",{center:o,radius:n.radius,...n})}else if(n.type==="CircleCenterPoint"){const o=e.elements.get(n.idCenter),r=e.elements.get(n.idPoint);e.create("CircleCenterPoint",{center:o,point:r,...n})}else if(n.type==="CircleDynamicRadius"){const o=e.elements.get(n.idCenter),r=e.elements.get(n.idRadius);e.create("CircleCenterDynamicRadius",{center:o,radius:r,...n})}else if(n.type==="CircleFractionDiagram"){const o=new Set(n.arrayIndicesSectorsInColor);e.create("CircleFractionDiagram",{indicesSectorsInColor:o,...n})}else if(n.type==="Distance"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("Distance",{point1:o,point2:r,...n})}else if(n.type==="DynamicX"){const o=e.elements.get(n.idPoint);e.create("DynamicX",{point:o,...n})}else if(n.type==="DynamicY"){const o=e.elements.get(n.idPoint);e.create("DynamicY",{point:o,...n})}else if(n.type==="PointOnLine"){const o=e.elements.get(n.idLine);e.create("PointOnLine",{line:o,...n})}else if(n.type==="PointOnCircle"){const o=e.elements.get(n.idCircle);e.create("PointOnCircle",{circle:o,...n})}else if(n.type==="GraphByParts")e.create("GraphByParts",{...n});else if(n.type==="Graph")e.create("Graph",{...n});else if(n.type==="GraduatedLine")e.create("GraduatedLine",{...n});else if(n.type==="Grid")e.create("Grid",{...n});else if(n.type==="Line"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("Line",{point1:o,point2:r,...n})}else if(n.type==="Middle"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("Middle",{point1:o,point2:r,...n})}else if(n.type==="LineByPointVector"){const o=e.elements.get(n.idVector),r=e.elements.get(n.idPoint);e.create("LineByPointVector",{point:r,vector:o,...n})}else if(n.type==="LineFractionDiagram"){const o=new Set(n.arrayIndicesRectanglesInColor);e.create("LineFractionDiagram",{indicesRectanglesInColor:o,...n})}else if(n.type==="RectangleFractionDiagram"){const o=new Set(n.arrayIndicesRectanglesInColor);e.create("RectangleFractionDiagram",{indicesRectanglesInColor:o,...n})}else if(n.type==="LineParallel"){const o=e.elements.get(n.idLine),r=e.elements.get(n.idPoint);e.create("LineParallel",{line:o,point:r,...n})}else if(n.type==="LinePerpendicular"){const o=e.elements.get(n.idLine),r=e.elements.get(n.idPoint);e.create("LinePerpendicular",{line:o,point:r,...n})}else if(n.type==="MarkBetweenPoints"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("MarkBetweenPoints",{text:n.text,point1:o,point2:r,...n})}else if(n.type==="MarkRightAngle"){const o=e.elements.get(n.idPoint),r=e.elements.get(n.idDirectionPoint);e.create("MarkRightAngle",{point:o,directionPoint:r,...n})}else if(n.type==="PerpendicularBisector"){const o=e.elements.get(n.idSegment);e.create("PerpendicularBisector",{segment:o,...n})}else if(n.type==="PerpendicularBisectorByPoints"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("PerpendicularBisectorByPoints",{point1:o,point2:r,...n})}else if(n.type==="ElementByReflect"){const o=e.elements.get(n.idTransformationOrigin),r=e.elements.get(n.idTransformationCenter);o.reflect(r,n)}else if(n.type==="ElementByReflectOverLine"){const o=e.elements.get(n.idTransformationOrigin),r=e.elements.get(n.idTransformationLine);o.reflectOverLine(r,n)}else if(n.type==="ElementByDilate"){const o=e.elements.get(n.idTransformationOrigin),r=e.elements.get(n.idTransformationCenter),a=n.transformationFactor;o.dilate(r,a,n)}else if(n.type==="ElementByRotation"){const o=e.elements.get(n.idTransformationOrigin),r=e.elements.get(n.idTransformationCenter),a=n.transformationAngle;o.rotate(r,a,n)}else if(n.type==="ElementByTranslation"){const o=e.elements.get(n.idTransformationOrigin),r=e.elements.get(n.idTransformationPoint1),a=e.elements.get(n.idTransformationPoint2);o.translate(r,a,n)}else if(n.type==="PointByProjection"){const o=e.elements.get(n.idOrigin),r=e.elements.get(n.idLine);e.create("PointByProjection",{line:r,origin:o,...n})}else if(n.type==="PointByProjectionOnAxisX"){const o=e.elements.get(n.idOrigin);e.create("PointByProjectionOnAxisX",{origin:o,...n})}else if(n.type==="PointByProjectionOnAxisY"){const o=e.elements.get(n.idOrigin);e.create("PointByProjectionOnAxisY",{origin:o,...n})}else if(n.type==="PointIntersectionLL"){const o=e.elements.get(n.idLine1),r=e.elements.get(n.idLine2);e.create("PointIntersectionLL",{line1:o,line2:r,...n})}else if(n.type==="PointIntersectionCC"){const o=e.elements.get(n.idCircle1),r=e.elements.get(n.idCircle2);e.create("PointIntersectionCC",{circle1:o,circle2:r,...n})}else if(n.type==="PointIntersectionLC"){const o=e.elements.get(n.idLine),r=e.elements.get(n.idCircle);e.create("PointIntersectionLC",{circle:r,line:o,...n})}else if(n.type==="PointOnGraph"){const o=e.elements.get(n.idGraph);e.create("PointOnGraph",{graph:o,...n})}else if(n.type==="PointOnPolyline"){const o=e.elements.get(n.idPolyline);e.create("PointOnPolyline",{polyline:o,...n})}else if(n.type==="Segment"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("Segment",{point1:o,point2:r,...n})}else if(n.type==="Polyline"){const o=[];for(const r of n.idPoints)o.push(e.elements.get(r));e.create("Polyline",{points:o,...n})}else if(n.type==="Polygon"){const o=[];for(const r of n.idPoints)o.push(e.elements.get(r));e.create("Polygon",{points:o,...n})}else if(n.type==="Ray"){const o=e.elements.get(n.idPoint1),r=e.elements.get(n.idPoint2);e.create("Ray",{point1:o,point2:r,...n})}else if(n.type==="TextByPosition")e.create("TextByPosition",{text:n.text,x:n.x,y:n.y,...n});else if(n.type==="TextByPoint"){const o=e.elements.get(n.idPoint);e.create("TextByPoint",{point:o,text:n.text,...n})}else if(n.type==="TextDynamicByPosition"){const o=e.elements.get(n.idDynamicNumber);e.create("TextDynamicByPosition",{dynamicNumber:o,...n})}else if(n.type==="Vector"){const o=e.elements.get(n.idOrigin);e.create("Vector",{origin:o,...n})}else if(n.type==="VectorByPoints"){const o=e.elements.get(n.idOrigin),r=e.elements.get(n.idPoint1),a=e.elements.get(n.idPoint2);e.create("VectorByPoints",{origin:o,point1:r,point2:a,...n})}else if(n.type==="VectorPerpendicular"){const o=e.elements.get(n.idOrigin),r=e.elements.get(n.idLine);e.create("VectorPerpendicular",{line:r,origin:o,...n})}if(e.stackUndo.length===0&&e.saveState(),i&&"history"in t&&t.history!==null){const n=t.history;e.stackUndo=[...n],e.handleUndoRedoButtons()}}const ot={lightest:"#f87f5c",title:"#342A34",titlelight:"#f5f1f3"},ce=15,Ot=100,he=2,Dt=10**4,de=10**-4,Be=1,_t=300,Ft=30,Rt=30,Bt=30,Ve="50px",ze="large",je=.1,Ue=1.1,Ge=.9,He=["","|","||","|||","✖︎","O","◼︎","▲","★"],V="#F15929",Q="rgba(241, 89, 41, 0.5)",rt={animationStepInterval:3e3,automaticUserMessage:!0,borderSize:.2,color:"currentColor",colorPointPolygon:"none",changeColorChangeActionToSetOptions:!1,discFillOpacity:.2,displayGrid:!1,distanceWithoutNewPoint:.2,figureHasBorder:!1,fillColor:"none",fillColorAndBorderColorAreSame:!1,fillOpacity:.2,gridWithTwoPointsOnSamePosition:!0,fontSize:"1em",isHandDrawn:!1,isDashed:!1,labelAutomaticForPoints:void 0,labelDxInPixels:15,labelDyInPixels:15,latexHeight:12,labelIsVisible:!0,latexWidth:18,limitNumberOfElement:{},mark:"||",moveTextGrid:15,pointDescriptionWithCoordinates:!0,pointSize:5,thickness:1,shape:"x",shapeForPolygon:"x",thicknessForPoint:2,tmpColor:"gray",tmpFillColor:Q,tmpFillOpacity:.2,tmpIsDashed:!0,tmpThickness:1,tmpShape:"x"},We=["SAVE","OPEN","UNDO","REDO","DRAG","DOWNLOAD_LATEX_SVG","HIDE","REMOVE","POINT","POINT_ON","POINT_INTERSECTION","MIDDLE","SEGMENT","LINE","RAY","POLYGON","LINE_PARALLEL","LINE_PERPENDICULAR","PERPENDICULAR_BISECTOR","BISECTOR_BY_POINTS","CIRCLE_CENTER_POINT","CIRCLE_RADIUS","REFLECTION_OVER_LINE","REFLECTION","ROTATE","TRANSLATION","DILATE","VECTOR","GRID","SET_OPTIONS","FILL","NAME_POINT","MOVE_LABEL","MARK_BETWEEN_POINTS","MESURE_SEGMENT","MESURE_ANGLE","DESCRIPTION","SHAKE","ZOOM_IN","ZOOM_OUT"];class C{constructor(t=0,i=0){this.x=t,this.y=i}}function Vt(e,t){if(e.x===void 0||e.y===void 0||t.x===void 0||t.y===void 0)return Number.NaN;try{return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}catch{return Number.NaN}}function zt(e,t,i=1){try{const s=e.center,n=t.center,o=e._radius,r=t._radius,a=s.x,l=n.x,c=s.y,h=n.y;if(a===void 0||l===void 0||c===void 0||h===void 0)return new C;const d=l-a,p=h-c,g=Math.sqrt(p*p+d*d);if(g>o+r)return{x:Number.NaN,y:Number.NaN};if(g<Math.abs(o-r))return{x:Number.NaN,y:Number.NaN};const m=(o*o-r*r+g*g)/(2*g),f=a+d*m/g,v=c+p*m/g,w=Math.sqrt(o*o-m*m),N=-p*(w/g),k=d*(w/g),M=f+N,J=f-N,W=v+k,K=v-k;return i===1?K>W?new C(J,K):new C(M,W):K>W?new C(M,W):new C(J,K)}catch{return new C(Number.NaN,Number.NaN)}}function jt(e,t){try{const[i,s,n]=e.equation,[o,r,a]=t.equation;let l,c;if(o*s-r*i===0)return{x:Number.NaN,y:Number.NaN};c=(a*i-n*o)/(o*s-r*i),i===0?l=(-a-r*c)/o:l=(-n-s*c)/i;let h=!0;return e.type==="Segment"&&(l<Math.min(e.point1.x,e.point2.x)||l>Math.max(e.point1.x,e.point2.x)||c<Math.min(e.point1.y,e.point2.y)||c>Math.max(e.point1.y,e.point2.y))&&(h=!1),t.type==="Segment"&&(l<Math.min(t.point1.x,t.point2.x)||l>Math.max(t.point1.x,t.point2.x)||c<Math.min(t.point1.y,t.point2.y)||c>Math.max(t.point1.y,t.point2.y))&&(h=!1),e.type==="Ray"&&(e.point1.x<e.point2.x&&l<e.point1.x&&(h=!1),e.point1.x>e.point2.x&&l>e.point1.x&&(h=!1),e.point1.y<e.point2.y&&c<e.point1.y&&(h=!1),e.point1.y>e.point2.y&&c>e.point1.y&&(h=!1)),t.type==="Ray"&&(t.point1.x<t.point2.x&&l<t.point1.x&&(h=!1),t.point1.x>t.point2.x&&l>t.point1.x&&(h=!1),t.point1.y<t.point2.y&&c<t.point1.y&&(h=!1),t.point1.y>t.point2.y&&c>t.point1.y&&(h=!1)),h||(l=Number.NaN,c=Number.NaN),new C(l,c)}catch(i){return console.error(i),new C(Number.NaN,Number.NaN)}}function I(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}function lt(e,t){try{const i=e.y-t.y,s=t.x-e.x,n=(e.x-t.x)*e.y+(t.y-e.y)*e.x;return[i,s,n]}catch(i){return console.error("Erreur dans Line.equation()",i),[Number.NaN,Number.NaN,Number.NaN]}}function Ut(e,t,i=1){try{const s=t.center,n=t.radius,[o,r,a]=e.equation,l=s.x,c=s.y;let h,d,p,g,m,f;if(r===0){if(p=-a/o,m=p,h=4*(-l*l-a*a/(o*o)-2*l*a/o+n*n),h<0)return new C(Number.NaN,Number.NaN);Math.abs(h)<10**-6?(g=c+Math.sqrt(h)/2,f=g):(g=c-Math.sqrt(h)/2,f=c+Math.sqrt(h)/2)}else if(o===0){if(g=-a/r,f=g,h=4*(-c*c-a*a/(r*r)-2*c*a/r+n*n),h<0)return new C(Number.NaN,Number.NaN);Math.abs(h)<10**-6?(p=l+Math.sqrt(h)/2,m=p):(p=l-Math.sqrt(h)/2,m=l+Math.sqrt(h)/2)}else{if(h=(2*(o*a/(r*r)+c*o/r-l))**2-4*(1+(o/r)**2)*(l*l+c*c+(a/r)**2+2*c*a/r-n*n),h<0)return new C(Number.NaN,Number.NaN);Math.abs(h)<10**-6?(d=Math.sqrt(h),p=(-2*(o*a/(r*r)+c*o/r-l)-d)/(2*(1+(o/r)**2)),m=p,g=(-o*p-a)/r,f=g):(d=Math.sqrt(h),p=(-2*(o*a/(r*r)+c*o/r-l)-d)/(2*(1+(o/r)**2)),m=(-2*(o*a/(r*r)+c*o/r-l)+d)/(2*(1+(o/r)**2)),g=(-o*p-a)/r,f=(-o*m-a)/r)}return i===1?f>g?new C(m,f):new C(p,g):f>g?new C(p,g):new C(m,f)}catch{return new C(Number.NaN,Number.NaN)}}function tt(e,t){try{const[i,s,n]=t.equation,o=1/(i*i+s*s);let r,a;if(i===0)r=e.x,a=-n/s;else if(s===0)a=e.y,r=-n/i;else{if(e.x===void 0||e.y===void 0)return new C;r=o*(s*s*e.x-i*s*e.y-i*n),a=o*(-i*s*e.x+i*i*e.y+i*i*n/s)-n/s}return new C(r,a)}catch{return new C(Number.NaN,Number.NaN)}}function R(e,t,i){try{if(t.x===void 0||t.y===void 0||e.x===void 0||e.y===void 0)return new C;const s=t.x+(e.x-t.x)*Math.cos(i*Math.PI/180)-(e.y-t.y)*Math.sin(i*Math.PI/180),n=t.y+(e.x-t.x)*Math.sin(i*Math.PI/180)+(e.y-t.y)*Math.cos(i*Math.PI/180);return new C(s,n)}catch{return new C(Number.NaN,Number.NaN)}}function Ye(e,t,i){if(e.x===void 0||e.y===void 0||t.x===void 0||t.y===void 0)return new C;try{const s=t.x+i*(e.x-t.x),n=t.y+i*(e.y-t.y);return new C(s,n)}catch{return new C(Number.NaN,Number.NaN)}}function D(e,t,i,s){if(e.x===void 0||e.y===void 0||t.x===void 0||t.y===void 0)return new C;try{const n=s*Math.PI/180,o=t.x+i*(Math.cos(n)*(e.x-t.x)-Math.sin(n)*(e.y-t.y)),r=t.y+i*(Math.cos(n)*(e.y-t.y)+Math.sin(n)*(e.x-t.x));return new C(o,r)}catch{return new C(Number.NaN,Number.NaN)}}function Ze(e,t){let i,s;const[n,o,r]=t.equation,a=1/(n*n+o*o);return n===0?(i=e.x,s=-(e.y+2*r/o)):o===0?(s=e.y,i=-(e.x+2*r/n)):(i=a*((o*o-n*n)*e.x-2*n*o*e.y-2*n*r),s=a*((n*n-o*o)*e.y-2*n*o*e.x+n*n*r/o-o*r)-r/o),{x:i,y:s}}function qe(e,t,i){const s=e.x+i.x-t.x,n=e.y+i.y-t.y;return{x:s,y:n}}function Xe(e,t,i){const s={x:i.x-t.x,y:i.y-t.y},n={x:e.x-t.x,y:e.y-t.y};return(n.x*s.y-s.x*n.y>=0?1:-1)*St(e,t,i)}function St(e,t,i){const s={norme:0,x:e.x-t.x,y:e.y-t.y};s.norme=Math.sqrt(s.x**2+s.y**2);const n={norme:0,x:i.x-t.x,y:i.y-t.y};n.norme=Math.sqrt(n.x**2+n.y**2);const o=s.x*n.x+s.y*n.y;return s.norme*n.norme<de?0:Math.acos(o/(s.norme*n.norme))*180/Math.PI}function ct(e,t){try{const i=(e.x+t.x)/2,s=(e.y+t.y)/2,n=t.x-e.x,r=-(t.y-e.y),a=n,l=Math.sqrt(r*r+a*a),c=r/l,h=a/l,d=c*.5,p=h*.5,g=i+d,m=s+p;return new C(g,m)}catch{return new C(Number.NaN,Number.NaN)}}function Gt({line:e,point:t,figure:i}){try{const s=t.x,n=t.y;let o,r;return e.point2.x-e.point1.x===0?(o=s,r=i.yMax):(o=s+5,r=n+5*(e.point2.y-e.point1.y)/(e.point2.x-e.point1.x)),{x1:s,y1:n,x2:o,y2:r}}catch(s){return console.error("Erreur dans Coords.parallelCoords",s),{x1:Number.NaN,y1:Number.NaN,x2:Number.NaN,y2:Number.NaN}}}function u(e,t=4){return Math.round(e*10**t)/10**t}function A(e,t=4){return u(e,t).toLocaleString("fr-FR")==="-0"?"0":u(e,t).toLocaleString("fr-FR").replace(",","{,}")}function H({delta:e=3,figure:t,repeat:i=5,time:s=1}){const n=s/i;t.container.style.animation="none",t.container.offsetWidth,t.container.style.animation=`shake ${n}s`,t.container.style.animationIterationCount=i.toString();const o=c=>{const d=u(c+(Math.random()-.5)*e,1);return d>t.xMin+.5&&d<t.xMax-.5?d:c},r=c=>{const d=u(c+(Math.random()-.5)*e,1);return d>t.yMin+2&&d<t.yMax-2?d:c},l=[...t.elements.values()].filter(c=>c.type!=="pointer"&&c.type==="Point").filter(c=>c.isFree);for(let c=0;c<i;c++)for(const h of l)h.moveTo(o(h.x),r(h.y));t.container.style.animation="none"}function Je({angle:e,figure:t,label1:i,label2:s,label3:n}){const o=[...t.elements.values()].filter(g=>g.type!=="pointer"&&g.type.includes("Point")),r=o.filter(g=>g.label===i),a=o.filter(g=>g.label===s),l=o.filter(g=>g.label===n);if(r.length===0)return{isValid:!1,message:`Il n'y a pas de point $${i}$ dans la figure.`};if(r.length>1)return{isValid:!1,message:`Il y a plusieurs points nommés $${i}$ dans la figure.`};if(a.length===0)return{isValid:!1,message:`Il n'y a pas de point $${s}$ dans la figure.`};if(a.length>1)return{isValid:!1,message:`Il y a plusieurs points nommés $${s}$ dans la figure.`};if(l.length===0)return{isValid:!1,message:`Il n'y a pas de point $${n}$ dans la figure.`};if(l.length>1)return{isValid:!1,message:`Il y a plusieurs points nommés $${n}$ dans la figure.`};let c=!0;const h=r[0],d=a[0],p=l[0];for(let g=0;g<3;g++)c=c&&u(St(h,d,p),2)===u(e,2),H({figure:t});return c?{isValid:c,message:`L'angle $\\widehat{${i}${s}${n}}$ est bien toujours égal à ${e}°.`}:{isValid:c,message:`L'angle $\\widehat{${i}${s}${n}}$ n'est pas toujours égal à ${e}°.`}}function Ke({center:e,figure:t,labelCenter:i,radius:s}){const n=[...t.elements.values()].filter(a=>a.type.includes("Circle"));let o=[];if(i&&(o=n.filter(a=>a.center.label===i)),n.length===0)return{isValid:!1,message:"Il n'y a pas de cercle dans la figure."};const r=n.find(a=>u(a.center.x)===u(e.x)&&u(a.center.y)===u(e.y)&&u(a.radius)===u(s));if(!r)return{isValid:!1,message:`Le cercle de centre $(${u(e.x,2)}\\;;\\;${u(e.y,2)})$ et de rayon ${u(s,1)} n'existe pas dans la figure.`};if(i){const a=o.find(l=>u(l.center.x)===u(e.x)&&u(l.center.y)===u(e.y)&&u(l.radius)===u(s));return a?{isValid:!0,message:"",element:a}:{isValid:!1,message:`Le cercle de centre $(${u(e.x,2)}\\;;\\;${u(e.y,2)})$ et de rayon ${u(s,2)} est bien tracé mais son centre n'est pas ${i}.`,element:r}}return{isValid:!0,message:"",element:r}}function Qe(e){const t=e.replace(/^#/,""),i=Number.parseInt(t,16),s=i>>16&255,n=i>>8&255,o=i&255;return`{rgb,255:red,${s}; green,${n}; blue,${o}}`}function ti(e){const t=e.match(/\d+(\.\d+)?/g);if(t&&t.length>=3){const i=Number.parseInt(t[0],10),s=Number.parseInt(t[1],10),n=Number.parseInt(t[2],10);return`{rgb,255:red,${i}; green,${s}; blue,${n}}`}throw new Error("Invalid RGBA color format")}function ht(e){return e.includes("#")?Qe(e):e.includes("rgba")?ti(e):e==="currentColor"?"black":e}const ei="__APIGEOM_DEBUG_OBSERVERS__",ii="APIGEOM_DEBUG_OBSERVERS",Ht=e=>{if(e===!0)return!0;if(typeof e=="string"){const t=e.trim().toLowerCase();return t==="1"||t==="true"||t==="yes"}return!1},si=()=>{var i,s;const e=globalThis;if(Ht(e[ei]))return!0;const t=(s=(i=e.process)==null?void 0:i.env)==null?void 0:s[ii];return t!==void 0?Ht(t):!1};function _(e,t){if(!si())return;const i=t??{};console.debug(`[ObserverLifecycle] ${e}`,i)}class S{constructor(t,{color:i,id:s,isChild:n,isDashed:o,isDeletable:r=!0,isSelectable:a=!0,isVisible:l,opacity:c,thickness:h}){if(this._isHover=!1,this._isSelected=!1,this._opacity=1,this.isHidden=!1,this.isDeletable=!0,this.figure=t,this.isChild=n??!1,this.isSelectable=a,this.isDeletable=r,s==null||this.figure.elements.has(s)){if(s!=null&&this.figure.elements.has(s))throw Error(`id ${s} déjà utilisé`);if(this.isChild){let d=0;for(;this.figure.elements.has(`elementTmp${d.toString()}`);)d++;this.id=`elementTmp${d.toString()}`}else{let d=0;for(;this.figure.elements.has(`element${d.toString()}`);)d++;this.id=`element${d.toString()}`}}else this.id=s;this.figure.elements.set(this.id,this),this._color=i??this.figure.options.color,this._thickness=h??this.figure.options.thickness,this._isDashed=o??this.figure.options.isDashed,this._isVisible=l??!0,this._opacity=c??1,this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","g"),this.observers=[],this.parents=new Set}changeColor(t,i){const s=i==="mathalea"?V:i;if(t.groupSvg.children.length>0)for(const n of Array.from(t.groupSvg.children))n.setAttribute("stroke",s);else t.groupSvg.setAttribute("stroke",s)}distancePointer(t,i){return Number.POSITIVE_INFINITY}draw(){}hide(){this.isVisible=!1,this.isHidden=!0}jsonOptions(){var i,s,n,o,r;const t={color:this.color,id:this.id,isChild:this.isChild,isDashed:this.isDashed,isVisible:this.isVisible,isSelectable:this.isSelectable,isDeletable:this.isDeletable,opacity:this.opacity,thickness:this.thickness,type:this.type};return((i=this.transformation)==null?void 0:i.type)==="dilate"?{...t,idTransformationCenter:this.transformation.center.id,idTransformationOrigin:this.transformation.origin.id,transformationFactor:this.transformation.factor,type:"ElementByDilate"}:((s=this.transformation)==null?void 0:s.type)==="reflect"?{...t,idTransformationCenter:this.transformation.center.id,idTransformationOrigin:this.transformation.origin.id,type:"ElementByReflect"}:((n=this.transformation)==null?void 0:n.type)==="reflectOverLine"?{...t,idTransformationLine:this.transformation.line.id,idTransformationOrigin:this.transformation.origin.id,type:"ElementByReflectOverLine"}:((o=this.transformation)==null?void 0:o.type)==="rotation"?{...t,idTransformationCenter:this.transformation.center.id,idTransformationOrigin:this.transformation.origin.id,transformationAngle:this.transformation.angle,type:"ElementByRotation"}:((r=this.transformation)==null?void 0:r.type)==="translation"?{...t,idTransformationPoint1:this.transformation.point1.id,idTransformationPoint2:this.transformation.point2.id,idTransformationOrigin:this.transformation.origin.id,type:"ElementByTranslation"}:t}notify(){for(const t of this.observers)t.update()}remove(){var i;if(!this.isDeletable)return;_("remove:start",{id:this.id,observers:this.observers.length,parents:this.parents.size,constructor:this.constructor.name}),this.disposeParents();const t=[...this.observers];this.observers=[];for(const s of t)s.remove();if((i=this.figure)!=null&&i.elements&&this.figure.elements.delete(this.id),this.groupSvg){for(;this.groupSvg.firstChild;)this.groupSvg.removeChild(this.groupSvg.firstChild);this.groupSvg.remove()}this.parents.clear(),this.groupSvg=null,this.figure=null,this.observers=[],_("remove:end",{id:this.id})}setVisibilityColorThicknessAndDashed(){this.isVisible=this._isVisible,this.color=this._color,this.thickness=this._thickness,!this.type.includes("Point")&&(this.isDashed=this._isDashed)}show(){this.figure&&(this.isVisible=!0)}subscribe(t){this.observers.includes(t)||(this.observers.push(t),t.registerParent(this))}disposeParents(){if(this.parents.size===0)return;_("disposeParents:start",{childId:this.id,parents:[...this.parents].map(i=>i.id)});const t=[...this.parents];for(const i of t)i.unsubscribe(this);this.parents.size!==0&&this.parents.clear(),_("disposeParents:end",{childId:this.id})}registerParent(t){this.parents.has(t)||(this.parents.add(t),_("registerParent",{childId:this.id,parentId:t.id}))}unregisterParent(t){this.parents.delete(t)&&_("unregisterParent",{childId:this.id,parentId:t.id})}temp(){return this.figure.tmpElements.push(this),this.color=this.figure.options.tmpColor,this.thickness=this.figure.options.tmpThickness,"isDashed"in this&&(this.isDashed=this.figure.options.tmpIsDashed),"fillColor"in this&&(this.fillColor=this.figure.options.tmpFillColor),"fillOpacity"in this&&(this.fillOpacity=this.figure.options.tmpFillOpacity),this}tempShow(){this.isVisible=!0,this.changeColor(this,this.figure.options.tmpColor),G(this,.5)}toJSON(){return{...this.jsonOptions}}unsubscribe(t){const i=this.observers.length;this.observers=this.observers.filter(s=>s!==t),i!==this.observers.length&&t.unregisterParent(this)}update(){}set color(t){this._color=t,this.changeColor(this,t)}get color(){return this._color}get description(){return this.id}set isDashed(t){t?this.groupSvg.setAttribute("stroke-dasharray","4 3"):this.groupSvg.removeAttribute("stroke-dasharray"),this._isDashed=t}get isDashed(){return this._isDashed}get isHover(){return this._isHover}set isHover(t){this.figure.currentState==="HIDE"?t?(this.changeColor(this,V),G(this,this._thickness+2)):!this._isSelected&&!this.isHidden?(this.changeColor(this,this._color),G(this,this._thickness)):this.tempShow():t?(this.changeColor(this,V),G(this,this._thickness+2)):!this._isSelected&&!this.isHidden&&(this.changeColor(this,this._color),G(this,this._thickness)),this._isHover=t}get isSelected(){return this._isSelected}set isSelected(t){t?(this.changeColor(this,V),G(this,this._thickness+2)):this._isHover||(this.changeColor(this,this._color),G(this,this._thickness)),this._isSelected=t}set isVisible(t){t?this.figure.svg.appendChild(this.groupSvg):this.groupSvg.remove(),this._isVisible=t}get isVisible(){return this._isVisible}get latex(){return`% ${this.type} ${this.id}} n'a pas de sortie LaTeX`}get latexOptions(){const t=[];return this.color!=="black"&&this.color!==""&&t.push(`color=${ht(this.color)}`),this.thickness!==1&&t.push(`line width=${this.thickness}`),this.isDashed&&t.push("dashed"),this.opacity!==1&&t.push(`opacity=${this.opacity}`),t.length>0?`[${t.join(",")}]`:""}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.groupSvg.setAttribute("opacity",`${t}`)}set thickness(t){this._thickness=t,G(this,t)}get thickness(){return this._thickness}}function G(e,t){if(e.groupSvg.children.length>0)for(const i of Array.from(e.groupSvg.children))(i.getAttribute("stroke-readonly")===null||i.getAttribute("stroke-readonly")==="0")&&i.setAttribute("stroke-width",`${t}`);else e.groupSvg.setAttribute("stroke-width",`${t}`)}function ni({checkOnlyAbscissa:e=!1,figure:t,label:i,x:s,y:n=0,color:o,precision:r=.1}){let a=[];if(o!==void 0?a=[...t.elements.values()].filter(h=>h instanceof S&&h.type!=="pointer"&&h.type.includes("Point")&&h.color===o):a=[...t.elements.values()].filter(h=>h.type!=="pointer"&&h.type.startsWith("Point")&&h instanceof S&&h.isSelectable),i!==void 0){const h=a.filter(m=>m.label===i);if(h.length===0)return{isValid:!1,message:`Il n'y a pas de point $${i}$ dans la figure.`,points:[]};if(h.length>1)return{isValid:!1,message:`Il y a ${h.length} points $${i}$ dans la figure.`,points:h};const d=h[0],p=u(d.x,r)===u(s,r)&&u(d.y,r)===u(n,r);let g;return e?g=p?"":`Le point $${i}$ a pour abscisse $${A(d.x)}$ et non $${A(s)}$.`:g=p?"":`Le point $${i}$ a pour coordonnées $(${A(d.x)}\\;;\\;${A(d.y)})$ et non $(${A(s)}\\;;\\;${A(n)})$.`,{isValid:p,message:g,points:[d]}}let l=a.filter(h=>u(h.x)===u(s)&&u(h.y)===u(n));return e&&(l=a.filter(h=>u(h.x)===u(s))),l.length===0?e?{isValid:!1,message:`Il n'y a pas de point d'abscisse $${A(s)}$ dans la figure.`,points:[]}:{isValid:!1,message:`Il n'y a pas de point en $(${A(s)}\\;;\\;${A(n)})$ dans la figure.`,points:[]}:l.length>1?e?{isValid:!0,message:`Il y a ${l.length} points d'abscisse $${A(s)}$ dans la figure.`,points:l}:{isValid:!0,message:`Il y a ${l.length} points de coordonnées $(${A(s)}\\;;\\;${A(n)})$ dans la figure.`,points:l}:{isValid:!0,message:"",points:[l[0]]}}function oi({distance:e,figure:t,label1:i,label2:s,shake:n=!0,time:o=0}){const r=[...t.elements.values()].filter(g=>g.type!=="pointer"&&g.type.includes("Point")),a=r.filter(g=>g.label===i);if(a.length===0)return{isValid:!1,message:`Il n'y a pas de point $${i}$ dans la figure.`};if(a.length>1)return{isValid:!1,message:`Il y a ${a.length} points $${i}$ dans la figure.`};const l=r.filter(g=>g.label===s);if(l.length===0)return{isValid:!1,message:`Il n'y a pas de point $${s}$ dans la figure.`};if(l.length>1)return{isValid:!1,message:`Il y a ${l.length} points $${s}$ dans la figure.`};const c=a[0],h=l[0];let d=Math.abs(I(c,h)-e)<.001;n&&(H({figure:t,time:o}),d=d&&Math.abs(I(c,h)-e)<.001,H({figure:t,time:o}),d=d&&Math.abs(I(c,h)-e)<.001);let p="";return d?p=`La distance entre les points $${i}$ et $${s}$ est bien toujours égale à ${e}.`:p=`La distance entre les points $${i}$ et $${s}$ n'est pas toujours égale à ${e}.`,{isValid:d,message:p}}function Rn({figure:e,nameLine:t,color:i}){let s,n=[],o=[];if(s=[...e.elements.values()].filter(a=>a.type==="Line"),s.length===0)return{isValid:!1,message:"Il n'y a pas de droite dans la figure."};const r=Array.isArray(t)?t[0]:t;return s.length!==0&&(n=s.filter(a=>t.includes(a.notation)||t.includes(a.point1.label+a.point2.label)||t.includes(a.point2.label+a.point1.label)),n.length===0)?{isValid:!1,message:`${r} n'existe pas sur la figure.`}:(o=n.filter(a=>a.color===i),o.length===0?{isValid:!1,message:"Il n'y a pas de droite de la couleur demandée dans la figure."}:{isValid:!0,message:"La droite a bien été tracée."})}function ri({figure:e,point1:t,point2:i,color:s}){let n,o;if(n=[...e.elements.values()].filter(c=>c.type.includes("Line")),n.length===0)return{isValid:!1,message:"Il n'y a pas de droite dans la figure."};if(s!==void 0){if(o=n.filter(p=>p.color===s),o.length===0)return{isValid:!1,message:"Il n'y a pas de droite de la couleur demandée dans la figure."};const[c,h,d]=lt(t,i);for(const p of o){const[g,m,f]=p.equation;if(Wt(c,h,d,g,m,f))return{isValid:!0,message:"La droite a bien été tracée."}}}const[r,a,l]=lt(t,i);for(const c of n){const[h,d,p]=c.equation;if(Wt(r,a,l,h,d,p))return s===void 0?{isValid:!0,message:"La droite a bien été tracée."}:{isValid:!1,message:"La droite n'est pas tracée de la bonne couleur."}}return{isValid:!1,message:"Aucune droite ne correspond à la réponse attendue."}}function Wt(e,t,i,s,n,o,r=2){if(t===0&&n===0)return i/e===o/s;const a=t!==0?-e/t:Number.POSITIVE_INFINITY,l=n!==0?-s/n:Number.POSITIVE_INFINITY,c=t!==0?-i/t:Number.NaN,h=n!==0?-o/n:Number.NaN;return u(a,r)===u(l,r)&&u(c,r)===u(h,r)}function ai({figure:e,label1:t,label2:i,time:s=0}){const[n,o]=t.split(""),[r,a]=i.split(""),l=[...e.elements.values()].filter(k=>k.type!=="pointer"&&k.type.includes("Point")),c=l.filter(k=>k.label===n);if(c.length===0)return{isValid:!1,message:`Il n'y a pas de point $${n}$ dans la figure.`};if(c.length>1)return{isValid:!1,message:`Il y a ${c.length} points $${n}$ dans la figure.`};const h=l.filter(k=>k.label===o);if(h.length===0)return{isValid:!1,message:`Il n'y a pas de point $${o}$ dans la figure.`};if(h.length>1)return{isValid:!1,message:`Il y a ${h.length} points $${o}$ dans la figure.`};const d=l.filter(k=>k.label===r);if(d.length===0)return{isValid:!1,message:`Il n'y a pas de point $${r}$ dans la figure.`};if(d.length>1)return{isValid:!1,message:`Il y a ${d.length} points $${r}$ dans la figure.`};const p=l.filter(k=>k.label===a);if(p.length===0)return{isValid:!1,message:`Il n'y a pas de point $${a}$ dans la figure.`};if(p.length>1)return{isValid:!1,message:`Il y a ${p.length} points $${a}$ dans la figure.`};const g=c[0],m=h[0],f=d[0],v=p[0];let w=u((m.y-g.y)/(m.x-g.x),2)===u((v.y-f.y)/(v.x-f.x),2);H({figure:e,time:s}),w=w&&u((m.y-g.y)/(m.x-g.x),2)===u((v.y-f.y)/(v.x-f.x),2),H({figure:e,time:s}),w=w&&u((m.y-g.y)/(m.x-g.x),2)===u((v.y-f.y)/(v.x-f.x),2);const N=w?`Les droites $(${n}${o})$ et $(${r}${a})$ sont bien toujours parallèles.`:`Les droites $(${n}${o})$ et $(${r}${a})$ ne sont pas toujours parallèles.`;return{isValid:w,message:N}}class b extends S{constructor(t,{borderSize:i,color:s=t.options.color,isDashed:n=t.options.isDashed,point1:o,point2:r,shape:a="",thickness:l=t.options.thickness,...c}){super(t,c),this.type="Segment",this.point1=o,this.point2=r,this.shape=a,this.borderSize=i??t.options.borderSize,this.color=s,this.thickness=l,this.isDashed=n,this.point1.subscribe(this),this.point2.subscribe(this)}dilate(t,i,s){const n=this.point1.dilate(t,i,{isChild:!0,isVisible:!1}),o=this.point2.dilate(t,i,{isChild:!0,isVisible:!1,...s});let r=this.type;r!=="Ray"&&r!=="Segment"&&(r="Line");const a=this.figure.create(r,{point1:n,point2:o});return a.transformation={center:t,factor:i,origin:this,type:"dilate"},a}distancePointer(t,i){const s={x:t,y:i},n=I(s,this.point1),o=I(s,this.point2),r=I(this.point1,this.point2),a=((t-this.point1.x)*(this.point2.x-this.point1.x)+(i-this.point1.y)*(this.point2.y-this.point1.y))/r**2;if(a<0)return n;if(a>1)return o;const l=this.point1.x+a*(this.point2.x-this.point1.x),c=this.point1.y+a*(this.point2.y-this.point1.y);return I(s,{x:l,y:c})}draw(){this.svgLine=document.createElementNS("http://www.w3.org/2000/svg","line"),this.groupSvg.appendChild(this.svgLine),this.shape!==""&&(this.svgBorder1=document.createElementNS("http://www.w3.org/2000/svg","line"),this.svgBorder2=document.createElementNS("http://www.w3.org/2000/svg","line"),this.svgArrow1=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.svgArrow2=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.groupSvg.appendChild(this.svgBorder1),this.groupSvg.appendChild(this.svgBorder2),this.groupSvg.appendChild(this.svgArrow1),this.groupSvg.appendChild(this.svgArrow2)),this.setVisibilityColorThicknessAndDashed(),this.update()}drawArrow1(){const t={x:this.point1.x,y:this.point1.y},i={x:this.point2.x,y:this.point2.y},s=Math.hypot(this.point1.x-this.point2.x,this.point1.y-this.point2.y),{x:n,y:o}=D(i,t,1/s*this.borderSize*2,45),{x:r,y:a}=D(i,t,1/s*this.borderSize*2,-45),l=this.figure.xToSx(n),c=this.figure.xToSx(r),h=this.figure.yToSy(o),d=this.figure.yToSy(a),p=this.figure.xToSx(t.x),g=this.figure.yToSy(t.y);Yt(l,c,h,d,p,g)&&(this.svgArrow1.setAttribute("points",`${l},${h} ${p},${g} ${c},${d}`),this.groupSvg.appendChild(this.svgArrow1))}drawArrow2(){const t={x:this.point1.x,y:this.point1.y},i={x:this.point2.x,y:this.point2.y},s=Math.hypot(this.point1.x-this.point2.x,this.point1.y-this.point2.y),{x:n,y:o}=D(t,i,1/s*this.borderSize*2,45),{x:r,y:a}=D(t,i,1/s*this.borderSize*2,-45),l=this.figure.xToSx(n),c=this.figure.xToSx(r),h=this.figure.yToSy(o),d=this.figure.yToSy(a),p=this.figure.xToSx(i.x),g=this.figure.yToSy(i.y);Yt(l,c,h,d,p,g)&&(this.svgArrow2.setAttribute("points",`${l},${h} ${p},${g} ${c},${d}`),this.groupSvg.appendChild(this.svgArrow2))}drawBorder1(){const t={x:this.point1.x,y:this.point1.y},i={x:this.point2.x,y:this.point2.y},s=Math.hypot(this.point1.x-this.point2.x,this.point1.y-this.point2.y),{x:n,y:o}=D(i,t,1/s*this.borderSize,90),{x:r,y:a}=D(i,t,1/s*this.borderSize,-90),l=this.figure.xToSx(n).toString(),c=this.figure.xToSx(r).toString(),h=this.figure.yToSy(o).toString(),d=this.figure.yToSy(a).toString();this.svgBorder1.setAttribute("x1",l),this.svgBorder1.setAttribute("y1",h),this.svgBorder1.setAttribute("x2",c),this.svgBorder1.setAttribute("y2",d),this.groupSvg.appendChild(this.svgBorder1)}drawBorder2(){const t={x:this.point1.x,y:this.point1.y},i={x:this.point2.x,y:this.point2.y},s=Math.hypot(this.point1.x-this.point2.x,this.point1.y-this.point2.y),{x:n,y:o}=D(t,i,1/s*this.borderSize,90),{x:r,y:a}=D(t,i,1/s*this.borderSize,-90),l=this.figure.xToSx(n).toString(),c=this.figure.xToSx(r).toString(),h=this.figure.yToSy(o).toString(),d=this.figure.yToSy(a).toString();this.svgBorder2.setAttribute("x1",l),this.svgBorder2.setAttribute("y1",h),this.svgBorder2.setAttribute("x2",c),this.svgBorder2.setAttribute("y2",d),this.groupSvg.appendChild(this.svgBorder2)}reflect(t,i){const s=this.point1.reflect(t,{isChild:!0,isVisible:!1}),n=this.point2.reflect(t,{isChild:!0,isVisible:!1});let o=this.type;o!=="Ray"&&o!=="Segment"&&(o="Line");const r=this.figure.create(o,{point1:s,point2:n,...i});return r.transformation={center:t,origin:this,type:"reflect"},r}reflectOverLine(t,i){const s=this.point1.reflectOverLine(t,{isChild:!0,isVisible:!1}),n=this.point2.reflectOverLine(t,{isChild:!0,isVisible:!1});let o=this.type;o!=="Ray"&&o!=="Segment"&&(o="Line");const r=this.figure.create(o,{point1:s,point2:n,...i});return r.transformation={line:t,origin:this,type:"reflectOverLine"},r}rotate(t,i,s){const n=this.point1.rotate(t,i,{isChild:!0,isVisible:!1}),o=this.point2.rotate(t,i,{isChild:!0,isVisible:!1,...s});let r=this.type;r!=="Ray"&&r!=="Segment"&&(r="Line");const a=this.figure.create(r,{point1:n,point2:o});return a.transformation={angle:i,center:t,origin:this,type:"rotation"},a}toJSON(){return{...this.jsonOptions(),borderSize:this.borderSize,idPoint1:this.point1.id,idPoint2:this.point2.id,shape:this.shape}}translate(t,i,s){const n=this.point1.translate(t,i),o=this.point2.translate(t,i);let r=this.type;r!=="Ray"&&r!=="Segment"&&(r="Line");const a=this.figure.create(r,{point1:n,point2:o,...s});return a.transformation={origin:this,point1:t,point2:i,type:"translation"},a}update(){var t,i,s,n,o,r,a,l,c,h,d;if(this.notify(),this.point1.x===void 0||this.point1.y===void 0||this.point2.x===void 0||this.point2.y===void 0||!Number.isFinite(this.point1.x)||!Number.isFinite(this.point1.y)||!Number.isFinite(this.point2.x)||!Number.isFinite(this.point2.y))this.svgLine.removeAttribute("x1"),this.svgLine.removeAttribute("x2"),this.svgLine.removeAttribute("y1"),this.svgLine.removeAttribute("y2");else{const p=this.figure.xToSx(this.point1.x),g=this.figure.xToSx(this.point2.x),m=this.figure.yToSy(this.point1.y),f=this.figure.yToSy(this.point2.y);this.svgLine.setAttribute("x1",`${p}`),this.svgLine.setAttribute("y1",`${m}`),this.svgLine.setAttribute("x2",`${g}`),this.svgLine.setAttribute("y2",`${f}`)}((t=this.shape)==null?void 0:t.at(0))==="|"?(this.drawBorder1(),(i=this.svgArrow1)==null||i.remove()):((s=this.shape)==null?void 0:s.at(0))==="<"?(this.drawArrow1(),(n=this.svgBorder1)==null||n.remove()):((o=this.svgArrow1)==null||o.remove(),(r=this.svgBorder1)==null||r.remove()),((a=this.shape)==null?void 0:a.at(-1))==="|"?(this.drawBorder2(),this.svgArrow2.remove()):((l=this.shape)==null?void 0:l.at(-1))===">"?(this.drawArrow2(),(c=this.svgBorder2)==null||c.remove()):((h=this.svgArrow2)==null||h.remove(),(d=this.svgBorder2)==null||d.remove())}get angleWithHorizontalInDegres(){const[t,i]=this.equation;return Math.atan2(-t,i)*180/Math.PI}get color(){return this._color}set color(t){super.color=t;for(const i of[this.svgArrow1,this.svgArrow2])i!==void 0&&(i.setAttribute("stroke",t),i.setAttribute("fill",t))}get description(){return`Segment ${this.notation}`}get equation(){if(this.point1.x===void 0||this.point1.y===void 0||this.point2.x===void 0||this.point2.y===void 0)return[Number.NaN,Number.NaN,Number.NaN];try{const t=this.point1.y-this.point2.y,i=this.point2.x-this.point1.x,s=(this.point1.x-this.point2.x)*this.point1.y+(this.point2.y-this.point1.y)*this.point1.x;return[t,i,s]}catch(t){return console.error("Erreur dans Line.equation()",t),[Number.NaN,Number.NaN,Number.NaN]}}get latex(){let t=`%${this.description}`,s=[this.latexOptions.replace(/^\[|\]$/g,"").trim(),this.shape].filter(Boolean).join(", ");return(s.includes("->")||s.includes("<-"))&&(s+=", >=stealth"),t+=`
\\draw[${s}] (${this.point1.x}, ${this.point1.y}) -- (${this.point2.x}, ${this.point2.y});`,t}get notation(){const t=this.point1.label!==""?this.point1.label:this.point1.id,i=this.point2.label!==""?this.point2.label:this.point2.id;return`[${t}${i}]`}get unitPerpendicularVectorBinome(){try{const[t,i]=this.equation;return{x:t,y:i}}catch(t){return console.error("Erreur dans Line.directeur()",t),{x:Number.NaN,y:Number.NaN}}}get unitVectorBinome(){try{const[t,i]=this.equation;return{x:i,y:-t}}catch(t){return console.error("Erreur dans Line.normal()",t),{x:Number.NaN,y:Number.NaN}}}}function Yt(...e){for(const t of e)if(!Number.isFinite(t))return!1;return!0}function li({color:e,label1:t,label2:i,figure:s}){const n=[...s.elements.values()].filter(h=>h.type!=="pointer"&&h.type.includes("Point")),o=n.filter(h=>h.label===t),r=n.filter(h=>h.label===i);if(o.length===0)return{isValid:!1,message:`Il n'y a pas de point $${t}$ dans la figure.`};if(o.length>1)return{isValid:!1,message:`Il y a plusieurs points nommés $${t}$ dans la figure.`};if(r.length===0)return{isValid:!1,message:`Il n'y a pas de point $${i}$ dans la figure.`};if(r.length>1)return{isValid:!1,message:`Il y a plusieurs points nommés $${i}$ dans la figure.`};let a=[...s.elements.values()].filter(h=>h instanceof b);if(e!==void 0){if(a=a.filter(h=>h instanceof b&&h.color===e),a.length>1)return{isValid:!1,message:`Il y a plusieurs droites de couleur ${e}.`};if(a.length===0)return{isValid:!1,message:`Il n'y a aucune droite de couleur ${e}.`}}if(a.length===0)return{isValid:!1,message:"Aucune droite n'est tracée."};let l=!1;for(const h of a){const d=I(h.point1,o[0]),p=I(h.point1,r[0]),g=I(h.point2,o[0]),m=I(h.point2,r[0]);if(l=Math.abs(d-p)<.001&&Math.abs(g-m)<.001,l)break}let c=l?`La médiatrice de $[${t+i}]$ bien construite`:`La médiatrice de [$${t+i}]$ n'est pas construite`;return c+=e!==void 0&&l?` en ${e}.`:".",{isValid:l,message:c}}function ci({figure:e,label:t,x:i,y:s,color:n}){let o=[];if(n!==void 0?o=[...e.elements.values()].filter(l=>l instanceof S&&l.type!=="pointer"&&l.type==="Point"&&l.color===n):o=[...e.elements.values()].filter(l=>l.type!=="pointer"&&l.type==="Point"),t!==void 0){const l=o.filter(p=>p.label===t);if(l.length===0)return{isValid:!1,message:`Il n'y a pas de point $${t}$ dans la figure.`,points:[]};if(l.length>1)return{isValid:!1,message:`Il y a ${l.length} points $${t}$ dans la figure.`,points:l};const c=l[0],h=u(c.x)===u(i)&&u(c.y)===u(s),d=h?"":`Le point $${t}$ n'est pas  non bien placé dans la figure.`;return{isValid:h,message:d,points:[c]}}const r=o.filter(l=>u(l.x)===u(i)&&u(l.y)===u(s));return r.length===0?{isValid:!1,message:"Un point attendu n'est pas à sa place dans la figure.",points:[]}:r.length>1?{isValid:!0,message:`Il y a ${r.length} points confondus à la place d'un point attendu dans la figure.`,points:r}:{isValid:!0,message:"",points:[r[0]]}}function dt(e,t,i){const s=e<=t&&t<=i,n=e>=t&&t>=i;return s||n}function hi({figure:e,labelPt:t,labelPt1:i,labelPt2:s}){const n=[...e.elements.values()].filter(a=>a.type!=="pointer"&&a.type.includes("Point")&&"label"in a&&a.label===t);if(n.length===0)return{isValid:!1,message:`Il n'existe pas de point ${t} sur la figure.`};if(n.length>1)return{isValid:!1,message:`Il existe trop de points ${t} sur la figure.`};const o=[...e.elements.values()].filter(a=>a.type!=="pointer"&&a.type.includes("Point")&&"label"in a&&a.label===i);if(o.length===0)return{isValid:!1,message:`Il n'existe pas de point ${i} sur la figure.`};if(o.length>1)return{isValid:!1,message:`Il existe trop de points ${i} sur la figure.`};const r=[...e.elements.values()].filter(a=>a.type!=="pointer"&&a.type.includes("Point")&&"label"in a&&a.label===s);return r.length===0?{isValid:!1,message:`Il n'existe pas de point ${s} sur la figure.`}:r.length>1?{isValid:!1,message:`Il existe trop de points ${s} sur la figure.`}:!e.checkPointOnLine({labelPt:t,nameLine:`${i}${s}`}).isValid||!dt(o[0].x,n[0].x,r[0].x)||!dt(o[0].y,n[0].y,r[0].y)?{isValid:!1,message:`Le point ${t} n'est pas sur le segment[${i}${s}].`}:{isValid:!0,message:`Le point ${t} est sur le segment[${i}${s}].`}}function bt(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}function di(e){try{let t,i;return e>180?(t=1,i=0):e<-180?(t=1,i=1):(t=0,i=e>0?0:1),[t,i]}catch{return[Number.NaN,Number.NaN]}}function xt(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function Zt(e,t,i){const s=i*Math.PI/180;return{x:e.x+t*Math.cos(s),y:e.y+t*Math.sin(s)}}class pe extends S{constructor(t,{axeX:i=!0,axeY:s=!0,color:n="black",grid:o=!0,labelX:r=!0,labelY:a=!0,stepX:l=1,stepY:c=1,subGrid:h=!1,subGridDivisions:d=5,xMax:p=t.xMax,xMin:g=t.xMin,yMax:m=t.yMax,yMin:f=t.yMin,strokeWidthGrid:v=.5,thickThickness:w=2,thickHeight:N=4,repereOij:k=!1,...M}={}){super(t,{...M}),this.type="Grid",this._color=n,this.axeX=i,this.axeY=s,this.grid=o,this.subGrid=h,this.labelX=r,this.labelY=a,this.stepX=l,this.stepY=c,this.subGridDivisions=d,this.xMin=g,this.xMax=p,this.yMin=f,this.yMax=m,this.labels=[],this.vectors=[],this.strokeWidthGrid=v,this.thickThickness=w,this.thickHeight=N,this.repereOij=k,this.thicks=document.createElementNS("http://www.w3.org/2000/svg","g")}draw(){if(this.axeX){const i=document.createElementNS("http://www.w3.org/2000/svg","defs");this.figure.svg.appendChild(i);const s=document.createElementNS("http://www.w3.org/2000/svg","marker");s.setAttribute("id","arrow"),s.setAttribute("markerWidth","20"),s.setAttribute("markerHeight","20"),s.setAttribute("refX","0"),s.setAttribute("refY","6"),s.setAttribute("orient","auto"),s.setAttribute("markerUnits","strokeWidth");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M0,0 L0,12 L18,6 z"),s.appendChild(n),i.appendChild(s);const o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",this.figure.xToSx(this.xMin).toString()),o.setAttribute("y1",this.figure.yToSy(0).toString()),o.setAttribute("x2",(this.figure.xToSx(this.xMax)-20).toString()),o.setAttribute("y2",this.figure.yToSy(0).toString()),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("marker-end","url(#arrow)");for(let r=0;r<this.xMax;r+=this.stepX){const a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",this.figure.xToSx(r).toString()),a.setAttribute("y1",(-this.thickHeight).toString()),a.setAttribute("x2",this.figure.xToSx(r).toString()),a.setAttribute("y2",this.thickHeight.toString()),a.setAttribute("stroke",this._color),a.setAttribute("stroke-width",this.thickThickness.toString()),this.thicks.appendChild(a)}for(let r=0;r>=this.xMin;r-=this.stepX){const a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",this.figure.xToSx(r).toString()),a.setAttribute("y1",(-this.thickHeight).toString()),a.setAttribute("x2",this.figure.xToSx(r).toString()),a.setAttribute("y2",this.thickHeight.toString()),a.setAttribute("stroke",this._color),a.setAttribute("stroke-width",this.thickThickness.toString()),this.thicks.appendChild(a)}this.groupSvg.appendChild(o)}if(this.axeY){const i=document.createElementNS("http://www.w3.org/2000/svg","defs");this.figure.svg.appendChild(i);const s=document.createElementNS("http://www.w3.org/2000/svg","marker");s.setAttribute("id","arrow"),s.setAttribute("markerWidth","20"),s.setAttribute("markerHeight","20"),s.setAttribute("refX","0"),s.setAttribute("refY","6"),s.setAttribute("orient","auto"),s.setAttribute("markerUnits","strokeWidth");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M0,0 L0,12 L18,6 z"),s.appendChild(n),i.appendChild(s);const o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",this.figure.xToSx(0).toString()),o.setAttribute("y1",this.figure.yToSy(this.yMin).toString()),o.setAttribute("x2",this.figure.xToSx(0).toString()),o.setAttribute("y2",(this.figure.yToSy(this.yMax)+20).toString()),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("marker-end","url(#arrow)");for(let r=0;r<this.yMax;r+=this.stepY){const a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",(-this.thickHeight).toString()),a.setAttribute("y1",this.figure.yToSy(r).toString()),a.setAttribute("x2",this.thickHeight.toString()),a.setAttribute("y2",this.figure.yToSy(r).toString()),a.setAttribute("stroke",this._color),a.setAttribute("stroke-width",this.thickThickness.toString()),this.thicks.appendChild(a)}for(let r=0;r>=this.yMin;r-=this.stepY){const a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",(-this.thickHeight).toString()),a.setAttribute("y1",this.figure.yToSy(r).toString()),a.setAttribute("x2",this.thickHeight.toString()),a.setAttribute("y2",this.figure.yToSy(r).toString()),a.setAttribute("stroke",this._color),a.setAttribute("stroke-width",this.thickThickness.toString()),this.thicks.appendChild(a)}this.groupSvg.appendChild(o)}if(this.grid){const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttribute("stroke","gray"),i.setAttribute("stroke-opacity","0.5"),this.groupSvg.appendChild(i);for(let s=this.xMin<=0?0:this.xMin;s<=this.xMax;s+=this.stepX){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",this.figure.xToSx(s).toString()),n.setAttribute("y1",this.figure.yToSy(this.yMin).toString()),n.setAttribute("x2",this.figure.xToSx(s).toString()),n.setAttribute("y2",this.figure.yToSy(this.yMax).toString()),n.setAttribute("stroke-width",this.strokeWidthGrid.toString()),i.appendChild(n)}for(let s=this.xMax<0?this.xMax:this.xMax<this.stepX?0:-1;s>=this.xMin;s-=this.stepX){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",this.figure.xToSx(s).toString()),n.setAttribute("y1",this.figure.yToSy(this.yMin).toString()),n.setAttribute("x2",this.figure.xToSx(s).toString()),n.setAttribute("y2",this.figure.yToSy(this.yMax).toString()),n.setAttribute("stroke-width","0.5"),i.appendChild(n)}for(let s=this.yMin<=0?0:this.yMin;s<=this.yMax;s+=this.stepY){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",this.figure.xToSx(this.xMin).toString()),n.setAttribute("y1",this.figure.yToSy(s).toString()),n.setAttribute("x2",this.figure.xToSx(this.xMax).toString()),n.setAttribute("y2",this.figure.yToSy(s).toString()),n.setAttribute("stroke-width",this.strokeWidthGrid.toString()),i.appendChild(n)}for(let s=this.yMax<0?this.yMax:this.yMax<this.stepY?0:-1;s>=this.yMin;s-=this.stepY){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",this.figure.xToSx(this.xMin).toString()),n.setAttribute("y1",this.figure.yToSy(s).toString()),n.setAttribute("x2",this.figure.xToSx(this.xMax).toString()),n.setAttribute("y2",this.figure.yToSy(s).toString()),n.setAttribute("stroke-width","0.5"),i.appendChild(n)}}if(this.subGrid){const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttribute("stroke","gray"),i.setAttribute("stroke-opacity","0.2"),this.groupSvg.appendChild(i);for(let s=this.xMin;s<=this.xMax;s+=this.stepX/this.subGridDivisions){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",this.figure.xToSx(s).toString()),n.setAttribute("y1",this.figure.yToSy(this.yMin).toString()),n.setAttribute("x2",this.figure.xToSx(s).toString()),n.setAttribute("y2",this.figure.yToSy(this.yMax).toString()),n.setAttribute("stroke-width","0.25"),i.appendChild(n)}for(let s=this.yMin;s<=this.yMax;s+=this.stepY/this.subGridDivisions){const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",this.figure.xToSx(this.xMin).toString()),n.setAttribute("y1",this.figure.yToSy(s).toString()),n.setAttribute("x2",this.figure.xToSx(this.xMax).toString()),n.setAttribute("y2",this.figure.yToSy(s).toString()),n.setAttribute("stroke-width","0.25"),i.appendChild(n)}}if(this.labelX){for(let i=this.labelY?this.stepX:0;i<this.xMax;i+=this.stepX)this.labels.push(this.figure.create("TextByPosition",{anchor:"topCenter",dyInPixels:-this.thickHeight-2,fontSize:"0.67em",isChild:!0,isSelectable:!0,text:`$${i.toString()}$`,x:i,y:0}));for(let i=-this.stepX;i>=this.xMin;i-=this.stepX)this.labels.push(this.figure.create("TextByPosition",{anchor:"topCenter",dyInPixels:-this.thickHeight-2,fontSize:"0.67em",isChild:!0,isSelectable:!0,text:`$${i.toString()}$`,x:i,y:0}))}if(this.labelY){for(let i=this.stepY;i<this.yMax;i+=this.stepY)this.labels.push(this.figure.create("TextByPosition",{anchor:"middleRight",dxInPixels:-this.thickHeight-5,dyInPixels:0,fontSize:"0.67em",isChild:!0,isSelectable:!0,text:`$${i.toString()}$`,x:0,y:i}));for(let i=-this.stepY;i>=this.yMin;i-=this.stepY)this.labels.push(this.figure.create("TextByPosition",{anchor:"middleRight",dxInPixels:-this.thickHeight-5,dyInPixels:2,fontSize:"0.67em",isChild:!0,isSelectable:!0,text:`$${i.toString()}$`,x:0,y:i-.1}));this.labelX||this.labels.push(this.figure.create("TextByPosition",{anchor:"middleRight",dxInPixels:this.thickHeight+10,dyInPixels:2,fontSize:"0.67em",isChild:!0,isSelectable:!0,text:"$0$",x:-1.2,y:0}))}if(this.groupSvg.appendChild(this.thicks),this.setVisibilityColorThicknessAndDashed(),this.repereOij){const i=this.figure.create("Point",{x:0,y:0,isVisible:!1,isChild:!0});this.vectors=[this.figure.create("Vector",{origin:i,x:1,y:0,color:V,thickness:3,isChild:!0}),this.figure.create("Vector",{origin:i,x:0,y:1,color:V,thickness:3,isChild:!0})],this.labels.push(this.figure.create("TextByPosition",{text:"$O$",x:-.25,y:-.25,anchor:"topRight",color:V,fontSize:"8pt",isChild:!0}),this.figure.create("TextByPosition",{text:"$\\vec \\imath$",x:.5,y:-.25,anchor:"topRight",color:V,fontSize:"8pt",isChild:!0}),this.figure.create("TextByPosition",{text:"$\\vec \\jmath$",x:-.5,y:.25,anchor:"bottomRight",color:V,fontSize:"8pt",isChild:!0}))}this.update()}get latex(){let t=`%${this.description}`;return t+=`
\\tkzInit[xmin=${this.xMin}, xmax=${this.xMax}, ymin=${this.yMin}, ymax=${this.yMax}]`,t+=`
\\tkzGrid[thick]`,this.axeX&&this.axeY?t+=`
\\tkzAxeXY`:(this.axeX&&(t+=`
\\tkzAxeX`),this.axeY&&(t+=`
\\tkzAxeY`)),t}get isVisible(){return super.isVisible}set isVisible(t){super.isVisible=t;for(const i of this.labels)i.isVisible=t;for(const i of this.vectors)i.isVisible=t}toJSON(){return{...this.jsonOptions(),xMin:this.xMin,xMax:this.xMax,yMin:this.yMin,yMax:this.yMax,axeX:this.axeX,axeY:this.axeY,grid:this.grid,labelX:this.labelX,labelY:this.labelY,repereOij:this.repereOij,stepX:this.stepX,stepY:this.stepY,subGrid:this.subGrid,thickHeight:this.thickHeight,thickThickness:this.thickThickness}}}class y extends S{constructor(t,{color:i=t.options.color,colorLabel:s=t.options.color,id:n,isChild:o,isFree:r=!0,isSelectable:a,isVisible:l=!0,label:c,labelIsVisible:h=t.options.labelIsVisible??!0,labelDxInPixels:d,labelDyInPixels:p,shape:g=t.options.shape,sizeInPixels:m,thickness:f,x:v=0,y:w=0}){if(n===void 0){let N=0;for(;t.elements.has(`point${N.toString()}`);)N++;n=`point${N.toString()}`}super(t,{color:i,id:n,isChild:o,isSelectable:a,thickness:f}),this.type="Point",this._shape=g??"x",this._sizeInPixels=m??t.options.pointSize,this._thickness=f??t.options.thicknessForPoint,this.labelDxInPixels=d??t.options.labelDxInPixels,this.labelDyInPixels=p??t.options.labelDyInPixels,this.figure.snapGrid&&this.isVisible?(this._x=Math.round(v/this.figure.dx)*this.figure.dx,this._y=Math.round(w/this.figure.dy)*this.figure.dy):(this._x=v,this._y=w),this.label=c,this.labelIsVisible=h,this._colorLabel=s,this.isFree=r,this._isVisible=l??!0}redraw(){var t,i,s,n,o,r,a,l,c,h,d,p;if(this.figure){if(this.notify(),!Number.isFinite(this._x)||!Number.isFinite(this._y)){(t=this.svgCircle)==null||t.remove(),(i=this.svgLine1)==null||i.remove(),(s=this.svgLine2)==null||s.remove(),(n=this.elementTextLabel)==null||n.hide();return}if(this.elementTextLabel===void 0||this.elementTextLabel.x>this.figure.xMax||this.elementTextLabel.y>this.figure.yMax||this.elementTextLabel.x<this.figure.xMin||this.elementTextLabel.y<this.figure.yMin?(o=this.elementTextLabel)==null||o.hide():this.isVisible&&this.labelIsVisible&&((r=this.elementTextLabel)==null||r.show()),this._shape==="x"){const g=this.figure.xToSx(this._x)-this._sizeInPixels,m=this.figure.xToSx(this._x)+this._sizeInPixels,f=this.figure.xToSx(this._x)+this._sizeInPixels,v=this.figure.xToSx(this._x)-this._sizeInPixels,w=this.figure.yToSy(this._y)-this._sizeInPixels,N=this.figure.yToSy(this._y)+this._sizeInPixels,k=this.figure.yToSy(this._y)-this._sizeInPixels,M=this.figure.yToSy(this._y)+this._sizeInPixels;this.svgLine1.setAttribute("x1",`${g}`),this.svgLine1.setAttribute("y1",`${w}`),this.svgLine1.setAttribute("x2",`${m}`),this.svgLine1.setAttribute("y2",`${N}`),this.svgLine2.setAttribute("x1",`${f}`),this.svgLine2.setAttribute("y1",`${k}`),this.svgLine2.setAttribute("x2",`${v}`),this.svgLine2.setAttribute("y2",`${M}`),(a=this.svgCircle)==null||a.remove(),this.groupSvg.appendChild(this.svgLine1),this.groupSvg.appendChild(this.svgLine2)}else if(this._shape==="o"){const g=this.figure.xToSx(this._x),m=this.figure.yToSy(this._y),f=this._sizeInPixels;this.svgCircle.setAttribute("cx",`${g}`),this.svgCircle.setAttribute("cy",`${m}`),this.svgCircle.setAttribute("r",`${f}`),(l=this.svgLine1)==null||l.remove(),(c=this.svgLine2)==null||c.remove(),this.groupSvg.appendChild(this.svgCircle)}else this._shape===""&&((h=this.svgLine1)==null||h.remove(),(d=this.svgLine2)==null||d.remove(),(p=this.svgCircle)==null||p.remove())}}createSegmentToAxeX(){const t=this.figure.create("PointByProjectionOnAxisX",{isVisible:!1,origin:this});return this.figure.create("Segment",{isDashed:!0,point1:this,point2:t})}createSegmentToAxeY(){const t=this.figure.create("PointByProjectionOnAxisY",{isVisible:!1,origin:this});return this.figure.create("Segment",{isDashed:!0,point1:this,point2:t})}dilate(t,i,s){const n=this.figure.create("Point",s);return n.transformation={center:t,factor:i,origin:this,type:"dilate"},this.subscribe(n),t.subscribe(n),n.isFree=!1,n.update(),n}distancePointer(t,i){return this._x===void 0||this._y===void 0?Number.POSITIVE_INFINITY:Math.hypot((this._x-t)*this.figure.scale*this.figure.xScale,(this._y-i)*this.figure.scale*this.figure.yScale)}remove(){this.elementTextLabel&&(this.elementTextLabel.remove(),this.elementTextLabel=null),super.remove()}draw(){this.figure&&(this.svgLine1=document.createElementNS("http://www.w3.org/2000/svg","line"),this.svgLine2=document.createElementNS("http://www.w3.org/2000/svg","line"),this.svgCircle=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","g"),this.setVisibilityColorThicknessAndDashed(),this.isVisible&&(this.shape=this._shape,this.label=this._label),this.update())}isInArc(t){const[i,s]=[this.x,this.y],n=bt(this,t.center),o=bt(t.center,t.start);if(n>o)return!1;const r=xt(Math.atan2(s-t.center.y,i-t.center.x)),a=xt(Math.atan2(t.start.y-t.center.y,t.start.x-t.center.x)),l=xt(a+t.dynamicAngle.value*Math.PI/180);return a<l?a<r&&r<l:a<r||r<l}isInCircle(t){return(this.x-t.center.x)**2+(this.y-t.center.y)**2<=t.radius**2}isInPolygon(t){const i=this.x,s=this.y;let n=!1;for(let o=0;o<t.points.length;o++){const r=t.points.at(o%t.points.length),a=t.points.at((o+1)%t.points.length);r.y>s!=a.y>s&&i<(a.x-r.x)*(s-r.y)/(a.y-r.y)+r.x&&(n=!n)}return n}isOnline(t){const[i,s,n]=t.equation;let o=Math.abs(i*this.x+s*this.y+n)<10**-6;return t.type==="Segment"&&(this.x<Math.min(t.point1.x,t.point2.x)||this.x>Math.max(t.point1.x,t.point2.x)||this.y<Math.min(t.point1.y,t.point2.y)||this.y>Math.max(t.point1.y,t.point2.y))&&(o=!1),t.type==="Ray"&&(t.point1.x<t.point2.x&&this.x<t.point1.x&&(o=!1),t.point1.x>t.point2.x&&this.x>t.point1.x&&(o=!1),t.point1.y<t.point2.y&&this.y<t.point1.y&&(o=!1),t.point1.y>t.point2.y&&this.y>t.point1.y&&(o=!1)),o}jsonOptions(){return{...super.jsonOptions(),colorLabel:this.colorLabel,label:this.label,labelDxInPixels:this.labelDxInPixels,labelDyInPixels:this.labelDyInPixels,shape:this.shape,sizeInPixels:this.sizeInPixels,x:u(this.x),y:u(this.y)}}moveTo(t,i){this.x=t,this.y=i}reflect(t,i){const s=this.figure.create("Point",i);return s.transformation={center:t,origin:this,type:"reflect"},this.subscribe(s),t.subscribe(s),s.isFree=!1,s.update(),s}reflectOverLine(t,i){const s=this.figure.create("Point",i);return s.transformation={line:t,origin:this,type:"reflectOverLine"},this.subscribe(s),t.subscribe(s),s.isFree=!1,s.update(),s}rotate(t,i,s){const n=this.figure.create("Point",s);return n.transformation={angle:i,center:t,origin:this,type:"rotation"},this.subscribe(n),t.subscribe(n),n.isFree=!1,n.update(),n}toJSON(){return this.jsonOptions()}translate(t,i,s){const n=this.figure.create("Point",s);return n.transformation={origin:this,point1:t,point2:i,type:"translation"},this.subscribe(n),t.subscribe(n),i.subscribe(n),n.isFree=!1,n.update(),n}translateVector(t,i){const s=this.figure.create("Point",i);return s.transformation={origin:this,vector:t,type:"translationVector"},this.subscribe(s),t.subscribe(s),s.isFree=!1,s.update(),s}update(){var t,i,s,n,o,r;if(this.figure){if(((t=this.transformation)==null?void 0:t.type)==="reflect")this._x=2*this.transformation.center.x-this.transformation.origin.x,this._y=2*this.transformation.center.y-this.transformation.origin.y;else if(((i=this.transformation)==null?void 0:i.type)==="dilate")this._x=this.transformation.center.x+this.transformation.factor*(this.transformation.origin.x-this.transformation.center.x),this._y=this.transformation.center.y+this.transformation.factor*(this.transformation.origin.y-this.transformation.center.y);else if(((s=this.transformation)==null?void 0:s.type)==="rotation"){const{x:a,y:l}=R(this.transformation.origin,this.transformation.center,this.transformation.angle);this._x=a,this._y=l}else if(((n=this.transformation)==null?void 0:n.type)==="reflectOverLine"){const{x:a,y:l}=Ze(this.transformation.origin,this.transformation.line);this._x=a,this._y=l}else if(((o=this.transformation)==null?void 0:o.type)==="translation"){const{x:a,y:l}=qe(this.transformation.origin,this.transformation.point1,this.transformation.point2);this._x=a,this._y=l}else if(((r=this.transformation)==null?void 0:r.type)==="translationVector"){const a=this.transformation.origin.x+this.transformation.vector.x,l=this.transformation.origin.y+this.transformation.vector.y;this._x=a,this._y=l}this.redraw()}}get color(){return this._color}set color(t){this.figure&&(this._color=t,this.svgCircle!==void 0&&(this.svgCircle.setAttribute("fill",t),this.svgCircle.setAttribute("stroke",t)),this.svgLine1!==void 0&&this.svgLine1.setAttribute("stroke",t),this.svgLine2!==void 0&&this.svgLine2.setAttribute("stroke",t))}get colorLabel(){return this._colorLabel}set colorLabel(t){this.figure&&(this._colorLabel=t,this.elementTextLabel!==void 0&&(this.elementTextLabel.color=t))}get description(){var t,i,s,n,o,r,a,l,c;return((t=this.transformation)==null?void 0:t.type)==="reflect"?`Point $${this.label}$ image du point $${this.transformation.origin.notation}$ dans la symétrie de centre $${(i=this.transformation)==null?void 0:i.center.notation}$`:((s=this.transformation)==null?void 0:s.type)==="reflectOverLine"?`Point $${this.label}$ image du point $${this.transformation.origin.notation}$ dans la symétrie d'axe $${(n=this.transformation)==null?void 0:n.line.notation}$`:((o=this.transformation)==null?void 0:o.type)==="dilate"?`Point $${this.label}$ image du point $${this.transformation.origin.notation}$ dans l'homothétie de centre $${(r=this.transformation)==null?void 0:r.center.notation}$ et de rapport $${this.transformation.factor}$`:((a=this.transformation)==null?void 0:a.type)==="rotation"?`Point $${this.label}$ image du point $${this.transformation.origin.notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\degree$ dans le sens ${this.transformation.angle>0?"anti-horaire":"horaire"}`:((l=this.transformation)==null?void 0:l.type)==="translation"?`Point $${this.label}$ image du point $${this.transformation.origin.notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`:((c=this.transformation)==null?void 0:c.type)==="translationVector"?`Point $${this.label}$ image
      du point $${this.transformation.origin.notation}$
      par la translation de vecteur $${this.transformation.vector.notation}$
      `:this.figure.options.pointDescriptionWithCoordinates?`Point $${this.label}$ libre de coordonnées $(${u(this.x,2).toString().replace(".",",")}\\;;\\;${u(this.y,2).toString().replace(".",",")})$`:`Point $${this.label}$`}get isVisible(){return this._isVisible}set isVisible(t){var i,s;this.figure&&(this._isVisible=t,this.isVisible?(i=this.elementTextLabel)==null||i.show():(s=this.elementTextLabel)==null||s.hide(),this.isVisible||(this.labelIsVisible=!1),super.isVisible=t)}get label(){return this._label===void 0?"":this._label}set label(t){var i;if(this.figure){if(this._label=t,!this.isVisible||!this.labelIsVisible){(i=this.elementTextLabel)==null||i.hide();return}t!==void 0&&t.length>0&&(this.elementTextLabel===void 0?this.elementTextLabel=this.figure.create("TextByPoint",{color:this.colorLabel,dxInPixels:this.labelDxInPixels*this.figure.scale,dyInPixels:this.labelDyInPixels*this.figure.scale,id:`${this.id}_label`,isChild:!0,isSelectable:!0,point:this,text:`$${t}$`}):(this.elementTextLabel.text=`$${t}$`,this.elementTextLabel.color=this._colorLabel))}}get latex(){if(this.shape==="")return"";let t=`% Point ${this.label}`;return t+=`
\\draw${this.latexOptions} plot[mark=${this.shape}, mark size=${.15/this.figure.scale}cm] coordinates{(${this.x},${this.y})};`,t}get notation(){return this.label!==""?this.label:this.id}get shape(){return this._shape}set shape(t){var i,s,n,o,r,a,l;this.figure&&(this._shape=t,this._shape==="x"?(this.figure.svg.appendChild(this.groupSvg),(i=this.svgCircle)==null||i.remove(),this.groupSvg.appendChild(this.svgLine1),this.groupSvg.appendChild(this.svgLine2)):this._shape==="o"?(this.figure.svg.appendChild(this.groupSvg),(s=this.svgLine1)==null||s.remove(),(n=this.svgLine2)==null||n.remove(),this.groupSvg.appendChild(this.svgCircle)):this._shape===""&&((o=this.groupSvg)==null||o.remove(),(r=this.svgLine1)==null||r.remove(),(a=this.svgLine2)==null||a.remove(),(l=this.svgCircle)==null||l.remove()),this.update())}get sizeInPixels(){return this._sizeInPixels}set sizeInPixels(t){this.figure&&(this._sizeInPixels=t,this.update())}get x(){return this._x}set x(t){this.figure&&(this.figure.snapGrid&&this.isVisible?(this._x=Math.round(t/this.figure.dx)*this.figure.dx,this.figure.options.gridWithTwoPointsOnSamePosition||this.goToClosestFreePosition()):this._x=t,this.update())}get y(){return this._y}set y(t){this.figure&&(this.figure.snapGrid&&this.isVisible?(this._y=Math.round(t/this.figure.dy)*this.figure.dy,this.figure.options.gridWithTwoPointsOnSamePosition||this.goToClosestFreePosition()):this._y=t,this.update())}goToClosestFreePosition(){if(!this.figure)return;const t=10,{points:i}=this.figure.checkCoords({x:this._x,y:this._y}),s=[...this.figure.elements.values()].find(r=>r instanceof pe),n=this._x>=this.figure.xMin&&this._x<=this.figure.xMax&&this._y>=this.figure.yMin&&this._y<=this.figure.yMax,o=s!==void 0&&this._x<=s.xMax&&this._x>=s.xMin&&this._y<=s.yMax&&this._y>=s.yMin;if(!(i.length===1&&n&&(!s||o)))for(let r=1;r<=t;r++)for(const a of[0,r,-r])for(const l of[0,r,-r]){if(l===0&&a===0)continue;const c=this._x+l*this.figure.dx,h=this._y+a*this.figure.dy;if(!(c<this.figure.xMin||c>this.figure.xMax||h<this.figure.yMin&&h>this.figure.yMax||s!==void 0&&(c<s.xMin||c>s.xMax||h<s.yMin&&h>s.yMax))&&this.checkAndMove(l*this.figure.dx,a*this.figure.dy))return}}checkAndMove(t,i){const s=this._x+t,n=this._y+i,{points:o}=this.figure.checkCoords({x:s,y:n});return o.length===0?(this._x=s,this._y=n,!0):!1}}class ue extends y{constructor(t,{line1:i,line2:s,...n}){const o=jt(i,s);super(t,{isFree:!1,x:o.x,y:o.y,...n}),this.type="PointIntersectionLL",this.line1=i,this.line2=s,this.line1.subscribe(this),this.line2.subscribe(this)}toJSON(){return{...this.jsonOptions(),...super.jsonOptions(),idLine1:this.line1.id,idLine2:this.line2.id,label:this.label,shape:this.shape,sizeInPixels:this.sizeInPixels}}update(){if(!(this.line1===void 0||this.line2===void 0)){try{const t=jt(this.line1,this.line2);this._x=t.x,this._y=t.y,super.update()}catch(t){console.error("Erreur dans PointIntersectionLL.update()",t)}this.notify()}}get description(){const t=this.line1.notation,i=this.line2.notation;return`Point $${this.notation}$ à l'intersection de la droite $${t}$ et de la droite $${i}$`}}function pi({figure:e,labelPt:t,nameLine1:i,nameLine2:s}){let n=[...e.elements.values()].filter(h=>h.type!=="pointer"&&h.type.includes("Point")&&"label"in h&&h.label===t);if(n.length===0)return{isValid:!1,message:`Il n'existe pas de point ${t} sur la figure.`};if(n.length>1)return{isValid:!1,message:`Il existe trop de points ${t} sur la figure.`};const o=[...e.elements.values()].filter(h=>h.type.includes("Line")||h.type.includes("Segment")||h.type.includes("Ray"));let r,a;const l=Array.isArray(i)?i[0]:i,c=Array.isArray(s)?s[0]:s;if(o.length!==0){if(r=o.filter(h=>i.includes(h.notation)),r.length===0)return{isValid:!1,message:`${l} n'existe pas sur la figure.`};if(a=o.filter(h=>s.includes(h.notation)),a.length===0)return{isValid:!1,message:`${c} n'existe pas sur la figure.`}}return n=[...e.elements.values()].filter(h=>h instanceof ue&&h.type!=="pointer"&&h.type.includes("PointIntersectionLL")&&"label"in h&&h.label===t&&r.some(d=>h.line1===d||h.line2===d)&&a.some(d=>h.line1===d||h.line2===d)),n.length===0?{isValid:!1,message:`Le point ${t} n'est pas à l'intersection de ${l} et de ${c}.`}:{isValid:!0,message:`Le point ${t} est à l'intersection de ${l} et de ${c}.`}}class Y extends b{constructor(t,{point1:i,point2:s,...n}){super(t,{point1:i,point2:s,...n}),this.type="Line"}distancePointer(t,i){const s={x:t,y:i},n=tt(s,this);return I(s,n)}update(){var o,r,a,l;const[t,i,s,n]=qt(this.point1,this.point2);Number.isNaN(t)||Number.isNaN(s)||Number.isNaN(i)||Number.isNaN(i)?(this.svgLine.removeAttribute("x1"),this.svgLine.removeAttribute("x2"),this.svgLine.removeAttribute("y1"),this.svgLine.removeAttribute("y2")):(this.svgLine.setAttribute("x1",`${this.figure.xToSx(t)}`),this.svgLine.setAttribute("y1",`${this.figure.yToSy(i)}`),this.svgLine.setAttribute("x2",`${this.figure.xToSx(s)}`),this.svgLine.setAttribute("y2",`${this.figure.yToSy(n)}`)),((o=this.shape)==null?void 0:o.at(0))==="|"?this.drawBorder1():(r=this.svgBorder1)==null||r.remove(),((a=this.shape)==null?void 0:a.at(-1))==="|"?this.drawBorder2():(l=this.svgBorder2)==null||l.remove(),this.notify()}get description(){return this.point1.label!==""||this.point2.label!==""?`Droite ${this.notation}`:`Droite n°${[...this.figure.elements.values()].filter(s=>s instanceof Y).indexOf(this)+1}`}get latex(){const[t,i,s,n]=qt(this.point1,this.point2);let o=`%${this.description}`;return o+=`
\\draw${this.latexOptions} (${t}, ${i}) -- (${s}, ${n});`,o}get notation(){const t=this.point1.label!==""?this.point1.label:this.point1.id,i=this.point2.label!==""?this.point2.label:this.point2.id;return`(${t}${i})`}}function qt(e,t){if(e.x===void 0||e.y===void 0||t.x===void 0||t.y===void 0||Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))return[Number.NaN,Number.NaN,Number.NaN,Number.NaN];try{const i=e.figure;let s=Dt;if(t.x!==e.x&&(s=(t.y-e.y)/(t.x-e.x)),Math.abs(s)>=Dt)return[e.x,i.yMax,e.x,i.yMin];if(Math.abs(s)<de)return[i.xMin,e.y,i.xMax,e.y];let n=i.xMin,o=e.y+(i.xMin-e.x)*s;o>i.yMax?(o=i.yMax,n=e.x+(i.yMax-e.y)/s):o<i.yMin&&(o=i.yMin,n=e.x+(i.yMin-e.y)/s);let r=i.xMax,a=e.y+(i.xMax-e.x)*s;return a>i.yMax?(a=i.yMax,r=e.x+(i.yMax-e.y)/s):a<i.yMin&&(a=i.yMin,r=e.x+(i.yMin-e.y)/s),[n,o,r,a]}catch(i){return console.error("Erreur dans Line.getCoordsOut",i),[Number.NaN,Number.NaN,Number.NaN,Number.NaN]}}class It extends b{constructor(t,{point1:i,point2:s,...n}){super(t,{point1:i,point2:s,...n}),this.type="Ray"}distancePointer(t,i){const s={x:t,y:i},n={x:this.point2.x-this.point1.x,y:this.point2.y-this.point1.y},o=Math.hypot(n.x,n.y);if(o===0)return I(s,this.point1);const r={x:n.x/o,y:n.y/o},a=(r.x*(t-this.point1.x)+r.y*(i-this.point1.y))/o;if(a<0)return I(s,this.point1);const l=this.point1.x+n.x*a,c=this.point1.y+n.y*a;return I(s,{x:l,y:c})}update(){var c,h,d,p;const[t,i,s,n]=Xt(this.point1,this.point2),[o,r,a,l]=[this.figure.xToSx(t),this.figure.yToSy(i),this.figure.xToSx(s),this.figure.yToSy(n)];!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(r)||!Number.isFinite(l)?(this.svgLine.removeAttribute("x1"),this.svgLine.removeAttribute("x2"),this.svgLine.removeAttribute("y1"),this.svgLine.removeAttribute("y2")):(this.svgLine.setAttribute("x1",`${o}`),this.svgLine.setAttribute("y1",`${r}`),this.svgLine.setAttribute("x2",`${a}`),this.svgLine.setAttribute("y2",`${l}`)),((c=this.shape)==null?void 0:c.at(0))==="|"?this.drawBorder1():(h=this.svgBorder1)==null||h.remove(),((d=this.shape)==null?void 0:d.at(-1))==="|"?this.drawBorder2():(p=this.svgBorder2)==null||p.remove(),this.notify()}get description(){return`Demi-droite ${this.notation}`}get latex(){const[t,i,s,n]=Xt(this.point1,this.point2);let o=`%${this.description}`;return o+=`
\\draw${this.latexOptions} (${t}, ${i}) -- (${s}, ${n});`,o}get notation(){const t=this.point1.label!==""?this.point1.label:this.point1.id,i=this.point2.label!==""?this.point2.label:this.point2.id;return`[${t}${i})`}}function Xt(e,t){if(e.x===void 0||e.y===void 0||t.x===void 0||t.y===void 0||Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))return[Number.NaN,Number.NaN,Number.NaN,Number.NaN];try{const i=e.figure;let s=Number.POSITIVE_INFINITY;if(t.x!==e.x&&(s=(t.y-e.y)/(t.x-e.x)),s===Number.POSITIVE_INFINITY)return e.y>t.y?[e.x,e.y,e.x,i.yMin]:[e.x,e.y,e.x,i.yMax];if(Math.abs(s)<10**-4)return e.x>t.x?[e.x,e.y,i.xMin,e.y]:[e.x,e.y,i.xMax,e.y];let n,o,r=0;if(t.x>e.x){for(;n=e.x+r,o=e.y+r*s,r++,!(n>i.xMax+1||o>i.yMax+1||o<i.yMin-1););return[e.x,e.y,n,o]}for(;n=e.x-r,o=e.y-r*s,r++,!(n<i.xMin-1||o>i.yMax+1||o<i.yMin-1););return[e.x,e.y,n,o]}catch(i){return console.error("Erreur dans Ray.getRayCoordsOut",i),[Number.NaN,Number.NaN,Number.NaN,Number.NaN]}}class ge extends y{constructor(t,{k:i,line:s,shape:n="|",...o}){i===void 0&&(i=Math.random()),n===void 0&&(n="|"),super(t,{x:99,y:99,shape:n,...o}),this.center=s.point1,this.origin=s.point2,this.k=i,this.type="PointOnLine",this.line=s,this.isFree=!0,this.line.subscribe(this)}moveTo(t,i){const s={x:t,y:i};try{const[n,o,r]=this.line.equation,a=1/(n*n+o*o);let l,c;if(n===0?(l=s.x,c=-r/o):o===0?(c=s.y,l=-r/n):s.x===void 0||s.y===void 0?(l=Number.NaN,c=Number.NaN):(l=a*(o*o*s.x-n*o*s.y-n*r),c=a*(-n*o*s.x+n*n*s.y+n*n*r/o)-r/o),this.line instanceof b){const h=this.line;if(this.line instanceof Y){let d=1;(this.line.point1.x<this.line.point2.x&&l<this.line.point1.x||this.line.point1.x>this.line.point2.x&&l>this.line.point1.x||this.line.point1.y<this.line.point2.y&&c<this.line.point1.y||this.line.point1.y>this.line.point2.y&&c>this.line.point1.y)&&(d=-1),this.k=d*Math.hypot(l-this.line.point1.x,c-this.line.point1.y)/Math.hypot(this.line.point2.x-this.line.point1.x,this.line.point2.y-this.line.point1.y)}else if(h instanceof It){const d=this.line;d.point1.x<d.point2.x&&l<d.point1.x?this.k=0:d.point1.x>d.point2.x&&l>d.point1.x?this.k=0:d.point1.y<d.point2.y&&c<d.point1.y?this.k=0:d.point1.y>d.point2.y&&c>d.point1.y?this.k=0:this.k=Math.hypot(l-d.point1.x,c-d.point1.y)/Math.hypot(d.point2.x-d.point1.x,d.point2.y-d.point1.y)}else if(h instanceof b){const d=this.line;l<Math.min(d.point1.x,d.point2.x)?this.k=d.point1.x<d.point2.x?0:1:l>Math.max(d.point1.x,d.point2.x)?this.k=d.point1.x<d.point2.x?1:0:c<Math.min(d.point1.y,d.point2.y)?this.k=d.point1.y<d.point2.y?0:1:c>Math.max(d.point1.y,d.point2.y)?this.k=d.point1.y<d.point2.y?1:0:this.k=Math.hypot(l-d.point1.x,c-d.point1.y)/Math.hypot(d.point2.x-d.point1.x,d.point2.y-d.point1.y)}}}catch{console.error("Erreur dans le moveTo PointOnLine")}this.update()}toJSON(){return{...this.jsonOptions(),idLine:this.line.id,k:this.k,label:this.label,shape:this.shape}}update(){if(this._x=this.center.x+this.k*(this.origin.x-this.center.x),this._y=this.center.y+this.k*(this.origin.y-this.center.y),this.shape==="|"){const t={x:this.line.point1.x,y:this.line.point1.y},i={x:this._x,y:this._y},s=Math.hypot(this.line.point1.x-this._x,this.line.point1.y-this._y);let{x:n,y:o}=D(t,i,1/s*this.sizeInPixels/this.figure.pixelsPerUnit*Math.sqrt(2),90),{x:r,y:a}=D(t,i,1/s*this.sizeInPixels/this.figure.pixelsPerUnit*Math.sqrt(2),-90);if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(o)||!Number.isFinite(a)){const{x:l,y:c}=D(i,t,1/s*this.sizeInPixels/this.figure.pixelsPerUnit*Math.sqrt(2),90),{x:h,y:d}=D(i,t,1/s*this.sizeInPixels/this.figure.pixelsPerUnit*Math.sqrt(2),-90);n=l,r=h,o=c,a=d}if(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o)&&Number.isFinite(a)){const l=this.figure.xToSx(n).toString(),c=this.figure.xToSx(r).toString(),h=this.figure.yToSy(o).toString(),d=this.figure.yToSy(a).toString();this.svgLine1.setAttribute("x1",l),this.svgLine1.setAttribute("y1",h),this.svgLine1.setAttribute("x2",c),this.svgLine1.setAttribute("y2",d),this.groupSvg.appendChild(this.svgLine1)}else console.error("Erreur dans le update de PointOnLine")}super.update()}get description(){return`Point sur $${this.line.notation}$`}get x(){return this._x}set x(t){const[i,s,n]=this.line.equation,o=(-i*t-n)/s;this.moveTo(t,o)}get y(){return this._y}set y(t){const[i,s,n]=this.line.equation,o=(-s*t-n)/i;this.moveTo(o,t)}}function ui({figure:e,labelPt:t,nameLine:i}){let s=[...e.elements.values()].filter(r=>r.type!=="pointer"&&r.type.includes("Point")&&"label"in r&&r.label===t);if(s.length===0)return{isValid:!1,message:`Il n'existe pas de point ${t} sur la figure.`};if(s.length>1)return{isValid:!1,message:`Il existe trop de points ${t} sur la figure.`};let n=[...e.elements.values()].filter(r=>r.type.includes("Line")||r.type.includes("Segment")||r.type.includes("Ray"));n.length===0&&(n=n.filter(r=>i.includes(r.notation)));const o=Array.isArray(i)?i[0]:i;return n.length===0?{isValid:!1,message:`${o} n'existe pas sur la figure.`}:(s=[...e.elements.values()].filter(r=>r instanceof ge&&r.type!=="pointer"&&r.type.includes("PointOnLine")&&n.some(a=>r.line===a)),s.length===0?{isValid:!1,message:`Il n'existe pas de point sur ${o}.`}:(s=s.filter(r=>r.label===t),s.length===0?{isValid:!1,message:`Il n'existe pas de point ${t} sur ${o}.`}:{isValid:!0,message:`Le point ${t} sur ${o}.`}))}function gi({figure:e,points:t,color:i,acceptSegments:s=!0}){let n=[...e.elements.values()].filter(r=>r.type.includes("Polygon"));if(i!==void 0&&(n=n.filter(r=>r.color===i)),n.length===0){if(s){let r=[...e.elements.values()].filter(h=>h.type==="Segment");if(i!==void 0&&(r=r.filter(h=>h.color===i)),r.length===0)return{isValid:!1,message:i===void 0?"Il n'y a ni polygone, ni segments dans la figure.":`Il n'y a ni polygone, ni segments de couleur ${i} dans la figure.`};const a=t.length,l=(h,d)=>u(h.x)===u(d.x)&&u(h.y)===u(d.y);let c=!0;for(let h=0;h<a;h++){const d=t[h],p=t[(h+1)%a];if(!r.some(m=>l(m.point1,d)&&l(m.point2,p)||l(m.point1,p)&&l(m.point2,d))){c=!1;break}}return{isValid:c,message:c?"Les segments du polygone ont bien été tracés.":i===void 0?"Tous les côtés n'ont pas été tracés.":"Tous les côtés n'ont pas été tracés avec la couleur demandée."}}return{isValid:!1,message:i===void 0?"Il n'y a pas de polygones dans la figure.":`Il n'y a pas de polygones de couleur ${i} dans la figure.`}}let o=!1;for(const r of n){if(r.points.length!==t.length)continue;const a=t.length,l=(h,d)=>u(h.x)===u(d.x)&&u(h.y)===u(d.y),c=(h,d)=>{for(let p=0;p<a;p++){let g=!0;for(let m=0;m<a;m++)if(!l(h[(m+p)%a],d[m])){g=!1;break}if(g)return!0}return!1};if(c(t,r.points)||c([...t].reverse(),r.points)){o=!0;break}}return{isValid:o,message:o?"Le polygone a bien été tracé":""}}function fi({figure:e,labels:t,color:i}){let s=[...e.elements.values()].filter(o=>o.type.includes("Polygon"));if(i!==void 0&&(s=s.filter(o=>o.color===i)),s.length===0)return{isValid:!1,message:i===void 0?"Il n'y a pas de polygones dans la figure.":`Il n'y a pas de polygones de couleur ${i} dans la figure.`};let n=!1;for(const o of s){if(o.points.length!==t.length)continue;const r=t.indexOf(o.points[0].label);if(r===-1||(n=t.slice(r).concat(t.slice(0,r)).every((d,p)=>d===o.points[p].label),n))break;const l=t.reverse(),c=l.indexOf(o.points[0].label);if(n=l.slice(c).concat(l.slice(0,c)).every((d,p)=>d===o.points[p].label),n)break}return{isValid:n,message:""}}function Bn({figure:e,nameRay:t,color:i}){let s,n=[],o=[];if(s=[...e.elements.values()].filter(a=>a.type.includes("Ray")),s.length===0)return{isValid:!1,message:"Il n'y a pas de demi-droite dans la figure."};const r=Array.isArray(t)?t[0]:t;return s.length!==0&&(n=s.filter(a=>t.includes(a.notation)||t.includes(a.point1.label+a.point2.label)||t.includes(a.point2.label+a.point1.label)),n.length===0)?{isValid:!1,message:`${r} n'existe pas sur la figure.`}:(o=n.filter(a=>a.color===i),o.length===0?{isValid:!1,message:"Il n'y a pas demi-droite de la couleur demandée dans la figure."}:{isValid:!0,message:"La demi-droite a bien été tracée."})}function mi({figure:e,point1:t,point2:i,color:s}){let n=[...e.elements.values()].filter(l=>l.type==="Ray");const[o,r,a]=lt(t,i);if(n.length===0)return{isValid:!1,message:"Il n'y a pas de demi-droite dans la figure."};if(s!==void 0&&(n=n.filter(l=>l.color===s),n.length===0))return{isValid:!1,message:"Il n'y a pas de demi-droite de la couleur demandée dans la figure."};for(const l of n){const[c,h,d]=l.equation;if(Jt(o,r,a,c,h,d)&&u(l.point1.x)===u(t.x)&&u(l.point1.y)===u(t.y)){const p={x:u(l.point2.x-l.point1.x),y:u(l.point2.y-l.point1.y)},g={x:u(i.x-t.x),y:u(i.y-t.y)};if(p.x*g.x>=0&&p.y*g.y>=0)return{isValid:!0,message:"La demi-droite a bien été tracée."}}}if(s!==void 0){n=[...e.elements.values()].filter(l=>l.type==="Ray");for(const l of n){const[c,h,d]=l.equation;if(Jt(o,r,a,c,h,d)&&u(l.point1.x)===u(t.x)&&u(l.point1.y)===u(t.y)){const p={x:u(l.point2.x-l.point1.x),y:u(l.point2.y-l.point1.y)},g={x:u(i.x)-u(t.x),y:u(i.y)-u(t.y)};if(p.x*g.x>=0&&p.y*g.y>=0)return{isValid:!1,message:"Il n'y a pas de demi-droite de la couleur demandée dans la figure."}}}}return{isValid:!1,message:"Aucune demi-droite ne correspond à la réponse attendue."}}function Jt(e,t,i,s,n,o,r=2){if(t===0&&n===0)return i/e===o/s;const a=t!==0?-e/t:Number.POSITIVE_INFINITY,l=n!==0?-s/n:Number.POSITIVE_INFINITY,c=t!==0?-i/t:Number.NaN,h=n!==0?-o/n:Number.NaN;return u(a,r)===u(l,r)&&u(c,r)===u(h,r)}function yi({figure:e,label1:t,label2:i,time:s=0}){const[n,o]=t.split(""),[r,a]=i.split(""),l=[...e.elements.values()].filter(k=>k.type!=="pointer"&&k.type.includes("Point")),c=l.filter(k=>k.label===n);if(c.length===0)return{isValid:!1,message:`Il n'y a pas de point $${n}$ dans la figure.`};if(c.length>1)return{isValid:!1,message:`Il y a ${c.length} points $${n}$ dans la figure.`};const h=l.filter(k=>k.label===o);if(h.length===0)return{isValid:!1,message:`Il n'y a pas de point $${o}$ dans la figure.`};if(h.length>1)return{isValid:!1,message:`Il y a ${h.length} points $${o}$ dans la figure.`};const d=l.filter(k=>k.label===r);if(d.length===0)return{isValid:!1,message:`Il n'y a pas de point $${r}$ dans la figure.`};if(d.length>1)return{isValid:!1,message:`Il y a ${d.length} points $${r}$ dans la figure.`};const p=l.filter(k=>k.label===a);if(p.length===0)return{isValid:!1,message:`Il n'y a pas de point $${a}$ dans la figure.`};if(p.length>1)return{isValid:!1,message:`Il y a ${p.length} points $${a}$ dans la figure.`};const g=c[0],m=h[0],f=d[0],v=p[0];let w=u(I(g,m),2)===u(I(f,v),2);H({figure:e,time:s}),w=w&&u(I(g,m),2)===u(I(f,v),2),H({figure:e,time:s}),w=w&&u(I(g,m),2)===u(I(f,v),2),H({figure:e,time:s}),w=w&&u(I(g,m),2)===u(I(f,v),2);const N=w?`Les longueurs $${n}${o}$ et $${r}${a}$ sont bien toujours égales.`:`Les longueurs $${n}${o}$ et $${r}${a}$ ne sont pas toujours égales.`;return{isValid:w,message:N}}function Vn({figure:e,nameSegment:t,color:i}){let s,n=[],o=[];if(s=[...e.elements.values()].filter(a=>a.type.includes("Segment")),s.length===0)return{isValid:!1,message:"Il n'y a pas de segment dans la figure."};const r=Array.isArray(t)?t[0]:t;return s.length!==0&&(n=s.filter(a=>t.includes(a.notation)||t.includes(a.point1.label+a.point2.label)||t.includes(a.point2.label+a.point1.label)),n.length===0)?{isValid:!1,message:`${r} n'existe pas sur la figure.`}:(o=n.filter(a=>a.color===i),o.length===0?{isValid:!1,message:"Il n'y a pas de segment de la couleur demandée dans la figure."}:{isValid:!0,message:"Le segment a bien été tracé."})}function xi({figure:e,point1:t,point2:i,color:s}){let n=[...e.elements.values()].filter(c=>c.type==="Segment");if(n.length===0)return{isValid:!1,message:"Il n'y a pas de segment dans la figure."};if(s!==void 0&&(n=n.filter(c=>c.color===s)),n.length===0)return{isValid:!1,message:"Il n'y a pas de segment de la couleur demandée dans la figure."};const[o,r,a]=lt(t,i),l=n.filter(c=>{const[h,d,p]=c.equation;return vi(o,r,a,h,d,p)});if(l.length===0)return{isValid:!1,message:"Les segments ne sont pas confondus."};for(const c of l){if(u(c.point1.x)===u(t.x)&&u(c.point1.y)===u(t.y)&&u(c.point2.x)===u(i.x)&&u(c.point2.y)===u(i.y)||u(c.point2.x)===u(t.x)&&u(c.point2.y)===u(t.y)&&u(c.point1.x)===u(i.x)&&u(c.point1.y)===u(i.y))return{isValid:!0,message:"Le segment a bien été tracé."};if(c.point1.x<=t.x&&t.x<=c.point2.x&&c.point1.y<=t.y&&t.y<=c.point2.y&&c.point1.x<=i.x&&i.x<=c.point2.x&&c.point1.y<=i.y&&i.y<=c.point2.y)return{isValid:!0,message:"Un segment plus grand existe."}}if(s!==void 0){n=[...e.elements.values()].filter(c=>c.type.includes("Segment"));for(const c of l)if(u(c.point1.x)===u(t.x)&&u(c.point1.y)===u(t.y)&&u(c.point2.x)===u(i.x)&&u(c.point2.y)===u(i.y)||u(c.point2.x)===u(t.x)&&u(c.point2.y)===u(t.y)&&u(c.point1.x)===u(i.x)&&u(c.point1.y)===u(i.y))return{isValid:!1,message:"Le segment n'est pas tracé de la bonne couleur."}}return{isValid:!1,message:"Aucun segment ne correspond à la réponse attendue."}}function vi(e,t,i,s,n,o,r=2){if(t===0&&n===0)return i/e===o/s;const a=t!==0?-e/t:Number.POSITIVE_INFINITY,l=n!==0?-s/n:Number.POSITIVE_INFINITY,c=t!==0?-i/t:Number.NaN,h=n!==0?-o/n:Number.NaN;return u(a,r)===u(l,r)&&u(c,r)===u(h,r)}function wi({color:e,figure:t,labelOrigin:i,labelPoint2:s,x:n,xOrigin:o,y:r,yOrigin:a}){let c=[...t.elements.values()].filter(f=>f.type==="Vector"||f.type==="VectorByPoints").filter(f=>f.x===n&&f.y===r);if(e!==void 0&&(c=c.filter(f=>f.color===e)),c.length===0)return{isValid:!1,message:`Il n'y a aucun vecteur de coordonnées $(${n}\\;;\\;${r})$`,vectors:[]};const h=()=>{const f=c.filter(v=>v.point1.label===i);return f.length===0?{isValid:!1,message:`Il n'y a aucun vecteur de coordonnées $(${n}\\;;\\;${r})$ dont l'origine est nommée $${i}$`,vectors:[]}:{isValid:!0,message:"",vectors:f}},d=()=>{const f=c.filter(v=>v.point1.label===i&&v.point2.label===s);return f.length===0?{isValid:!1,message:`Il n'y a aucun vecteur de coordonnées $(${n}\\;;\\;${r})$ dont l'origine est nommée $${i}$ et l'extrémité est nommée $${s}$`,vectors:[]}:{isValid:!0,message:"",vectors:f}},p=()=>{const f=c.filter(v=>v.point1.x===o&&v.point1.y===a);return c.length===0&&f.length===0?{isValid:!1,message:`Il n'y a aucun vecteur de coordonnées $(${n}\\;;\\;${r})$ dont l'origine a pour coordonnées $(${o}\\;;\\;${a})$`,vectors:[]}:c.length>0&&f.length===0?{isValid:!1,message:`Il y a bien un vecteur de coordonnées $(${n}\\;;\\;${r})$ mais son origine n'a pas pour coordonnées $(${o}\\;;\\;${a})$`,vectors:c}:{isValid:!0,message:"",vectors:f}},g=()=>{const f=c.filter(v=>v.point1.label===i&&v.point1.x===o&&v.point1.y===a);return f.length===0?{isValid:!1,message:`Il n'y a aucun vecteur de coordonnées $(${n}\\;;\\;${r})$ dont l'origine est nommée $${i}$ et a pour coordonnées $(${o}\\;;\\;${a})$`,vectors:[]}:{isValid:!0,message:"",vectors:f}},m=()=>{const f=c.filter(v=>v.point1.label===i&&v.point2.label===s&&v.point1.x===o&&v.point1.y===a);return f.length===0?{isValid:!1,message:`Il n'y a aucun vecteur de coordonnées $(${n}\\;;\\;${r})$ dont l'origine est nommée $${i}$, l'extrémité est nommée $${s}$ et a pour coordonnées $(${o}\\;;\\;${a})$`,vectors:[]}:{isValid:!0,message:"",vectors:f}};return c.length===1?i!==void 0&&i!==""&&s===void 0&&o===void 0&&a===void 0?h():i!==void 0&&i!==""&&s!==void 0&&s!==""&&o===void 0&&a===void 0?d():i===void 0&&s===void 0&&o!==void 0&&a!==void 0?p():i!==void 0&&i!==""&&s===void 0&&o!==void 0&&a!==void 0?g():i!==void 0&&i!==""&&s!==void 0&&s!==""&&o!==void 0&&a!==void 0?m():{isValid:!0,message:`Il y a bien un vecteur de coordonnées $(${n}\\;;\\;${r})$`,vectors:c}:{isValid:!1,message:`Il y a ${c.length} vecteurs de coordonnées $(${n}\\;;\\;${r})`,vectors:c}}async function bi({delta:e=3,figure:t,repeat:i=5,time:s=1}){if(t.container===null)return;const n=s/i;t.container.style.animation="none",t.container.offsetWidth,t.container.style.animation=`shake ${n}s`,t.container.style.animationIterationCount=i.toString();const o=h=>{const p=u(h+(Math.random()-.5)*e,1);return p>t.xMin+.5&&p<t.xMax-.5?p:h},r=h=>{const p=u(h+(Math.random()-.5)*e,1);return p>t.yMin+2&&p<t.yMax-2?p:h},a=[...t.elements.values()].filter(h=>h.type!=="pointer"&&h instanceof y),l=a.filter(h=>h.x<t.xMax&&h.x>t.xMin&&h.y<t.yMax&&h.y>t.yMin),c=a.filter(h=>h.isFree);for(let h=0;h<i&&t.container!==null;h++){for(const d of c){const{x:p,y:g}=d;d.moveTo(o(d.x),r(d.y)),Ci(l)||d.moveTo(p,g)}await ki(s/i/a.length*1e3)}t.container&&(t.container.style.animation="none")}async function ki(e){await new Promise(t=>{setTimeout(t,e)})}function Ci(e){const t=e[0].figure;return e.every(i=>dt(t.xMin,i.x,t.xMax)&&dt(t.yMin,i.y,t.yMax))}class Z{constructor(t,{isChild:i=!1,textAfter:s="",textBefore:n=""}){if(this.figure=t,this.isChild=i,this.isChild){let o=0;for(;this.figure.elements.has(`elementTmp${o.toString()}`);)o++;this.id=`elementTmp${o.toString()}`}else{let o=0;for(;this.figure.elements.has(`element${o.toString()}`);)o++;this.id=`element${o.toString()}`}this.figure.elements.set(this.id,this),this.observers=[],this.parents=new Set,this._value=Number.NaN,this.type="",this.textBefore=n,this.textAfter=s}display({color:t,maximumFractionDigits:i,minimumFractionDigits:s,textAfter:n="",textBefore:o="",x:r,y:a}){return this.figure.create("TextDynamicByPosition",{color:t,dynamicNumber:this,id:`${this.id}_display`,maximumFractionDigits:i,minimumFractionDigits:s,textAfter:n,textBefore:o,x:r,y:a})}draw(){}notify(){for(const t of this.observers)t.update()}remove(){_("remove:start",{id:this.id,observers:this.observers.length,parents:this.parents.size,constructor:this.constructor.name}),this.disposeParents();const t=[...this.observers];this.observers=[],this.figure.elements.delete(this.id);for(const i of t)i.remove();_("remove:end",{id:this.id})}subscribe(t){this.observers.includes(t)||(this.observers.push(t),t.registerParent(this))}toJSON(){return{id:this.id,isChild:this.isChild,type:this.type}}unsubscribe(t){const i=this.observers.length;this.observers=this.observers.filter(s=>s!==t),i!==this.observers.length&&t.unregisterParent(this)}update(){this.notify()}get label(){return this._label}get string(){return this.textBefore+this.value.toString()+this.textAfter}set value(t){this._value=t,this.notify()}get value(){return this._value}disposeParents(){if(this.parents.size===0)return;_("disposeParents:start",{childId:this.id,parents:[...this.parents].map(i=>i.id)});const t=[...this.parents];for(const i of t)i.unsubscribe(this);this.parents.size!==0&&this.parents.clear(),_("disposeParents:end",{childId:this.id})}registerParent(t){this.parents.has(t)||(this.parents.add(t),_("registerParent",{childId:this.id,parentId:t.id}))}unregisterParent(t){this.parents.delete(t)&&_("unregisterParent",{childId:this.id,parentId:t.id})}}class Si extends Z{constructor(t,{center:i,end:s,precision:n=6,start:o}){super(t,{isChild:!1}),this.start=o,this.center=i,this.end=s,this.precision=n,this.start.subscribe(this),this.center.subscribe(this),this.end.subscribe(this),this.update()}toJSON(){return{id:this.id,idCenter:this.center.id,idEnd:this.end.id,idStart:this.start.id,isChild:this.isChild,precision:this.precision,type:this.type}}update(){this._value=u(St(this.start,this.center,this.end),this.precision),this.notify()}}class Ii extends Z{constructor(t,{center:i,end:s,precision:n=6,start:o}){super(t,{isChild:!1}),this.start=o,this.center=i,this.end=s,this.precision=n,this.start.subscribe(this),this.center.subscribe(this),this.end.subscribe(this),this.update()}toJSON(){return{id:this.id,idCenter:this.center.id,idEnd:this.end.id,idStart:this.start.id,isChild:this.isChild,precision:this.precision,type:this.type}}update(){this._value=u(Xe(this.start,this.center,this.end),this.precision),this.notify()}}class fe extends Z{constructor(t,{isChild:i=!1,precision:s=6,point1:n,point2:o}){super(t,{isChild:i}),this.type="Distance",this.point1=n,this.idPoint1=n.id,this.point2=o,this.idPoint2=o.id,this.precision=s,this.point1.subscribe(this),this.point2.subscribe(this),this.update()}toJSON(){return{id:this.id,idPoint1:this.idPoint1,idPoint2:this.idPoint2,isChild:this.isChild,precision:this.precision,type:this.type}}update(){try{this.value=u(Math.hypot(this.point1.x-this.point2.x,this.point1.y-this.point2.y),this.precision)}catch(t){console.error("Erreur dans Distance.update()",t)}this.notify()}}class Ni extends Z{constructor(t,{calculus:i,dynamicNumbers:s,...n}){super(t,{...n}),this.calculus=i,this.dynamicNumbers=s;for(const o of this.dynamicNumbers)o.subscribe(this);this.update()}update(){const t=[];for(const i of this.dynamicNumbers)t.push(i.value);this._value=this.calculus(t),this.notify()}}class $i extends Z{constructor(t,{point:i}){super(t,{}),this.point=i,this.point.subscribe(this),this.dynamicText=this.figure.create("TextDynamicByPosition",{color:"blue",dynamicNumber:this,isChild:!0,maximumFractionDigits:2,minimumFractionDigits:0,textAfter:"",textBefore:"",x:i.x,y:-1}),this.type="DynamicX",this.update(),this.dynamicText.div.style.fontWeight="bolder"}toJSON(){return{...super.toJSON(),idPoint:this.point.id}}update(){this.value=this.point.x,this.dynamicText.x=this.point.x,this.point.y>0?this.dynamicText.y=-1:this.dynamicText.y=1,this.notify()}}class Pi extends Z{constructor(t,{point:i}){super(t,{}),this.point=i,this.point.subscribe(this),this.dynamicText=this.figure.create("TextDynamicByPosition",{color:"blue",dynamicNumber:this,isChild:!0,maximumFractionDigits:2,minimumFractionDigits:0,textAfter:"",textBefore:"",x:-1,y:i.y}),this.type="DynamicY",this.update(),this.dynamicText.div.style.fontWeight="bolder"}toJSON(){return{...super.toJSON(),idPoint:this.point.id}}update(){this.value=this.point.y,this.dynamicText.y=this.point.y,this.point.x>0?this.dynamicText.x=-1:this.dynamicText.x=1,this.notify()}}const Li={},me=ke({parseDependencies:Ee,evaluateDependencies:Le,addDependencies:Pe,subtractDependencies:$e,multiplyDependencies:Ne,divideDependencies:Ie,powDependencies:Se,unaryMinusDependencies:Ce},Li),Kt=me;class kt extends S{constructor(t,{expression:i,prohibitedValues:s=[],step:n,xMax:o=t.xMax,xMin:r=t.xMin,...a}){super(t,{...a}),this.type="Graph",this.xMin=r,this.xMax=o,this.expression=i,this.prohibitedValues=s,n===void 0&&(n=2/(t.pixelsPerUnit*t.xScale*t.scale)),this.step=n;const l=Kt.parse(i);this.f=c=>l.evaluate({x:c})}draw(){const i=Ei({f:this.f,prohibitedValues:this.prohibitedValues,step:this.step,xMax:this.xMax,xMin:this.xMin}).map(s=>`${this.figure.xToSx(s.x).toString()},${this.figure.yToSy(s.y).toString()}`).join(" ");this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.groupSvg.setAttribute("fill","none"),this.groupSvg.setAttribute("points",i),this.setVisibilityColorThicknessAndDashed()}distancePointer(t,i){let s=Number.POSITIVE_INFINITY;for(let n=this.xMin;n<=this.xMax;n+=this.step)try{const o=this.f(n);if(!Number.isNaN(o)&&Number.isFinite(o)){const r=I({x:t,y:i},{x:n,y:o});s=Math.min(s,r)}}catch{}return s}toJSON(){return{...this.jsonOptions(),expression:this.expression,isChild:this.isChild}}get description(){return`Courbe représentative de la fonction ${this.notation}`}get latex(){return`\\draw[domain=${this.xMin}:${this.xMax}, smooth, thick, ${this.color}, ${this.isDashed?"dashed, ":""} line width=${this.thickness}] 
        plot (\\x, {${Kt.parse(this.expression).toString({implicit:"show"}).replaceAll("x","(\\x)")}});`}get notation(){return`f(x) = ${this.expression}`}}function Ei({f:e,prohibitedValues:t,step:i,xMax:s,xMin:n}){const o=[];for(let r=n;r<s;r+=i)if(!t.includes(r)){const a={x:r,y:e(r)};o.push(a)}return o}class Mi extends S{constructor(t,{f:i,prohibitedValues:s=[],step:n,xMax:o=t.xMax,xMin:r=t.xMin,...a}){super(t,{...a}),this.type="Graph",this.xMin=r,this.xMax=o,this.f=i,this.prohibitedValues=s,n===void 0&&(n=2/(t.pixelsPerUnit*t.xScale*t.scale)),this.step=n}draw(){const i=Ti({f:this.f,prohibitedValues:this.prohibitedValues,step:this.step,xMax:this.xMax,xMin:this.xMin}).map(s=>`${this.figure.xToSx(s.x).toString()},${this.figure.yToSy(s.y).toString()}`).join(" ");this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.groupSvg.setAttribute("fill","none"),this.groupSvg.setAttribute("points",i),this.setVisibilityColorThicknessAndDashed()}toJSON(){return{...this.jsonOptions(),isChild:this.isChild,thickness:this.thickness}}}function Ti({f:e,prohibitedValues:t,step:i,xMax:s,xMin:n}){const o=[];for(let r=n;r<s;r+=i)if(!t.includes(r)){const a={x:r,y:e(r)};o.push(a)}return o}const Qt=me;class Ai extends S{constructor(t,{parts:i,prohibitedValues:s=[],step:n,xMax:o=t.xMax,xMin:r=t.xMin,...a}){super(t,{...a}),this.type="GraphByParts",this.xMin=Math.min(...i.map(l=>l.xMin)),this.xMax=Math.max(...i.map(l=>l.xMax)),this.fonctions=[],this.parts=i;for(let l=0;l<i.length;l++){const c=Qt.parse(i[l].expression);this.fonctions.push(h=>c.evaluate({x:h}))}this.prohibitedValues=s,n===void 0&&(n=2/(t.pixelsPerUnit*t.xScale*t.scale)),this.step=n,this.f=this.f.bind(this)}f(t){let i=0;for(;t>this.parts[i].xMax&&i<this.parts.length;)i++;if(i>=this.parts.length)return Number.NaN;const s=this.fonctions[i];return s(t)}draw(){const t=[];for(const i of this.parts){const n=Oi({f:this.f,prohibitedValues:this.prohibitedValues,step:this.step,xMax:i.xMax,xMin:i.xMin}).map(r=>`${this.figure.xToSx(r.x).toString()},${this.figure.yToSy(r.y).toString()}`).join(" "),o=document.createElementNS("http://www.w3.org/2000/svg","polyline");o.setAttribute("fill","none"),o.setAttribute("points",n),t.push(o)}this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","g"),this.groupSvg.innerHTML=t.map(i=>i.outerHTML).join(`
`),this.setVisibilityColorThicknessAndDashed()}distancePointer(t,i){let s=Number.POSITIVE_INFINITY;for(let n=this.xMin;n<=this.xMax;n+=this.step)try{const o=this.f(n);if(!Number.isNaN(o)&&Number.isFinite(o)){const r=I({x:t,y:i},{x:n,y:o});s=Math.min(s,r)}}catch{}return s}toJSON(){return{...this.jsonOptions(),parts:this.parts,xMax:this.xMax,xMin:this.xMin}}get description(){return`Courbe représentative de la fonction ${this.notation}`}get latex(){let t="";for(const i of this.parts)t+=`\\draw[domain=${i.xMin}:${i.xMax}, smooth, thick, ${this.color}, ${this.isDashed?"dashed, ":""} line width=${this.thickness}] 
        plot (\\x, {${Qt.parse(i.expression).toString({implicit:"show"}).replaceAll("x","(\\x)")}});
`;return t}get notation(){let t="";for(const i of this.parts)t+=`f(x) = ${i.expression}\\text{ pour }${i.xMin} ≤ x ≤ ${i.xMax}~;~
`;return t}}function Oi({f:e,prohibitedValues:t,step:i,xMax:s,xMin:n}){const o=[];for(let r=n;r<s;r+=i)if(!t.includes(r)){const a={x:r,y:e(r)};o.push(a)}return o}class Di extends S{constructor(t,{denominator:i,gap:s=1,indicesSectorsInColor:n=new Set,numberOfCircle:o=1,numerator:r=0,radius:a,x:l=0,y:c=0,...h}){if(super(t,{...h}),this.centers=[],this.sectors=[],this._indicesSectorsInColor=new Set,this.center=this.figure.create("Point",{shape:"",x:l,y:c,isChild:!0}),this.radius=a,this.denominator=i,this.gap=s,this.numberOfCircle=o,r!==void 0&&n.size===0)for(let d=0;d<r;d++)this.indicesSectorsInColor.add(d);else this.indicesSectorsInColor=n;this.type="CircleFractionDiagram"}draw(){this.centers=[this.center],this.sectors=[];const t=360/this.denominator;for(let i=0;i<this.numberOfCircle;i++){i>0&&this.centers.push(this.figure.create("Point",{isChild:!0,isSelectable:!1,shape:"",x:this.center.x+i*(2*this.radius+this.gap),y:this.center.y}));for(let s=0;s<this.denominator;s++)this.sectors.push(this.figure.create("ArcByCenterRadiusAndAngles",{center:this.centers[i],endAngle:t*(s+1),isChild:!0,radius:this.radius,startAngle:t*s,color:this.color,thickness:this.thickness,isDashed:this.isDashed}))}this.indicesSectorsInColor=this._indicesSectorsInColor}redraw(){for(const t of this.centers)t.remove();for(const t of this.sectors)t.remove();this.draw()}toJSON(){return{...this.jsonOptions(),denominator:this.denominator,gap:this.gap,arrayIndicesSectorsInColor:Array.from(this.indicesSectorsInColor),numberOfCircle:this.numberOfCircle,numerator:this.numerator,radius:this.radius,x:this.center.x,y:this.center.y}}get indicesSectorsInColor(){for(let t=0;t<this.sectors.length;t++)this.sectors[t].fillColor!=="none"?this._indicesSectorsInColor.add(t):this._indicesSectorsInColor.delete(t);return this._indicesSectorsInColor}set indicesSectorsInColor(t){this._indicesSectorsInColor=t,this.sectors.forEach((i,s)=>{this._indicesSectorsInColor.has(s)?i.fillColor=this.color:i.fillColor="none"})}get numerator(){return this.sectors.filter(t=>t.fillColor!=="none").length}set numerator(t){this.sectors.forEach((i,s)=>{s<t?i.fillColor=this.color:i.fillColor="none"})}}class _i extends S{constructor(t,{denominator:i=4,height:s=.2,indicesRectanglesInColor:n=new Set,min:o=0,max:r=5,numerator:a,thickHeightInPixels:l=10,thickThickness:c=4,verticalDistanceForClick:h=1,width:d=4,x:p=0,y:g=0,...m}={}){if(super(t,{...m}),this._indicesRectanglesInColor=new Set,this.origins=[],this.rectangles=[],this.origin=this.figure.create("Point",{isChild:!0,isFree:!1,shape:"",x:p,y:g-s/2}),this.width=d,this.height=s,this.min=o,this.denominator=i,this.max=r,this.thickHeightInPixels=l,this.thickThickness=c,a!==void 0&&n.size===0)for(let f=0;f<a;f++)this.indicesRectanglesInColor.add(f);else this.indicesRectanglesInColor=n;this.type="LineFractionDiagram",this.verticalDistanceForClick=h}draw(){this.figure.svg.appendChild(this.groupSvg),this.origins=[this.origin],this.rectangles=[];const t=this.width/this.denominator;for(let s=0;s<this.max;s++){s>0&&this.origins.push(this.figure.create("Point",{isChild:!0,isSelectable:!1,shape:"",x:this.origin.x+s*this.width,y:this.origin.y}));for(let n=0;n<this.denominator;n++)this.rectangles.push(Fi({height:this.height,origin:this.origins[s],width:t,xTranslate:n*t,color:this.color,thickness:this.thickness,isDashed:this.isDashed}))}const i=this.verticalDistanceForClick;for(const s of this.rectangles)s.distancePointer=function(n,o){return this.figure.currentState==="FILL"&&this.figure.pointer.x>=this.points[0].x&&this.figure.pointer.x<=this.points[1].x&&this.figure.pointer.y-this.points[0].y<i&&this.figure.pointer.y-this.points[0].y>-i?0:Number.POSITIVE_INFINITY};for(let s=0;s<=this.max;s++){const n=this.origin.x+s*this.width,o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",this.figure.xToSx(n).toString()),o.setAttribute("y1",(this.figure.yToSy(this.origin.y+this.height/2)-this.thickHeightInPixels*this.figure.yScale*this.figure.scale).toString()),o.setAttribute("x2",this.figure.xToSx(n).toString()),o.setAttribute("y2",(this.figure.yToSy(this.origin.y+this.height/2)+this.thickHeightInPixels*this.figure.yScale*this.figure.scale).toString()),o.setAttribute("stroke",this._color),o.setAttribute("stroke-width",this.thickThickness.toString()),o.setAttribute("stroke-readonly","1"),this.groupSvg.appendChild(o),this.figure.create("TextByPosition",{isChild:!0,x:n,y:this.origin.y+1+this.thickHeightInPixels/(this.figure.yScale*this.figure.scale*this.figure.pixelsPerUnit),text:(this.min+s).toString()})}this.indicesRectanglesInColor=this._indicesRectanglesInColor}redraw(){for(const t of this.origins)t.remove();for(const t of this.rectangles)t.remove();this.draw()}toJSON(){return{...this.jsonOptions(),denominator:this.denominator,height:this.height,arrayIndicesRectanglesInColor:Array.from(this.indicesRectanglesInColor),min:this.min,max:this.max,thickHeightInPixels:this.thickHeightInPixels,thickThickness:this.thickThickness,verticalDistanceForClick:this.verticalDistanceForClick,width:this.width,x:this.origin.x,y:this.origin.y+this.height/2}}get numerator(){return this.rectangles.filter(t=>t.fillColor!=="none").length}get indicesRectanglesInColor(){for(let t=0;t<this.rectangles.length;t++)this.rectangles[t].fillColor!=="none"?this._indicesRectanglesInColor.add(t):this._indicesRectanglesInColor.delete(t);return this._indicesRectanglesInColor}set indicesRectanglesInColor(t){this._indicesRectanglesInColor=t,this.rectangles.forEach((i,s)=>{this._indicesRectanglesInColor.has(s)?i.fillColor=this.color:i.fillColor="none"})}get indiceLastInColor(){const t=this.rectangles.findIndex(i=>i.fillColor==="none");return t===-1?this.max*this.denominator:t}set numerator(t){this.rectangles.forEach((i,s)=>{s<t?i.fillColor=this.color:i.fillColor="none"})}}function Fi({height:e,origin:t,width:i,xTranslate:s,color:n,thickness:o,isDashed:r}){const a=[],l=t.figure;return a.push(l.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s,y:t.y})),a.push(l.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s+i,y:t.y})),a.push(l.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s+i,y:t.y+e})),a.push(l.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s,y:t.y+e})),l.create("Polygon",{isChild:!0,points:a,color:n,thickness:o,isDashed:r})}class Ri extends S{constructor(t,{denominator:i=4,gap:s=1,height:n=1,numberOfRectangles:o=5,indicesRectanglesInColor:r=new Set,numerator:a=0,width:l=4,x:c=0,y:h=0,...d}={}){if(super(t,{...d}),this._indicesRectanglesInColor=new Set,this.origins=[],this.rectangles=[],this.origin=this.figure.create("Point",{isChild:!0,isFree:!1,shape:"",x:c,y:h}),this.width=l,this.height=n,this.denominator=i,this.gap=s,this.numberOfRectangles=o,this.numerator=a,a!==void 0&&r.size===0)for(let p=0;p<a;p++)this.indicesRectanglesInColor.add(p);else this.indicesRectanglesInColor=r;this.type="RectangleFractionDiagram"}draw(){this.origins=[this.origin],this.rectangles=[];const t=this.width/this.denominator;for(let i=0;i<this.numberOfRectangles;i++){i>0&&this.origins.push(this.figure.create("Point",{isChild:!0,isSelectable:!1,shape:"",x:this.origin.x+i*(this.width+this.gap),y:this.origin.y}));for(let s=0;s<this.denominator;s++)this.rectangles.push(Bi({height:this.height,origin:this.origins[i],width:t,xTranslate:s*t}))}for(const i of this.rectangles)i.distancePointer=function(s,n){return this.figure.currentState==="FILL"&&this.figure.pointer.isInPolygon(this)?0:Number.POSITIVE_INFINITY};this.indicesRectanglesInColor=this._indicesRectanglesInColor}redraw(){for(let t=1;t<this.origins.length;t++)this.origins[t].remove();for(const t of this.rectangles)t.remove();this.draw()}toJSON(){return{...this.jsonOptions(),denominator:this.denominator,numerator:this.numerator,arrayIndicesRectanglesInColor:Array.from(this.indicesRectanglesInColor),height:this.height,width:this.width,gap:this.gap,x:this.origin.x,y:this.origin.y}}get indicesRectanglesInColor(){for(let t=0;t<this.rectangles.length;t++)this.rectangles[t].fillColor!=="none"?this._indicesRectanglesInColor.add(t):this._indicesRectanglesInColor.delete(t);return this._indicesRectanglesInColor}set indicesRectanglesInColor(t){this._indicesRectanglesInColor=t,this.rectangles.forEach((i,s)=>{this._indicesRectanglesInColor.has(s)?i.fillColor=this.color:i.fillColor="none"})}get numerator(){return this.rectangles.filter(t=>t.fillColor!=="none").length}set numerator(t){this.rectangles.forEach((i,s)=>{s<t?i.fillColor=this.color:i.fillColor="none"})}}function Bi({height:e,origin:t,width:i,xTranslate:s}){const n=[],o=t.figure;return n.push(o.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s,y:t.y})),n.push(o.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s+i,y:t.y})),n.push(o.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s+i,y:t.y+e})),n.push(o.create("Point",{isChild:!0,isFree:!1,shape:"",x:t.x+s,y:t.y+e})),o.create("Polygon",{isChild:!0,points:n})}class Vi extends S{constructor(t,{addLeft:i=0,addRight:s=0,color:n,labelInterval:o,max:r=6,min:a=-6,step:l=1,stepBis:c,thick:h=.2,yLabel:d=-.5}={}){super(t,{}),this._labelSize="0.8em",this.addInPixels=5,this.labels=[],this.points=[],this.addLeft=i,this.addRight=s,this._color=n??t.options.color,this.labelInterval=o??l,this.min=a,this.max=r,this.step=l,this.stepBis=c,this.thick=h,this.yLabel=d,this.type="GraduatedLine"}draw(){this.svgLine=document.createElementNS("http://www.w3.org/2000/svg","line"),this.groupSvg.appendChild(this.svgLine),this.groupSvg.setAttribute("color",this.color),this.setVisibilityColorThicknessAndDashed(),this.drawLine(),this.drawThicks(),this.drawThicksBis(),this.drawLabels()}drawLabels(){const t=u(Math.ceil(this.min/this.labelInterval)*this.labelInterval),i=u(Math.floor(this.max/this.labelInterval)*this.labelInterval);for(let s=t;s<=i;){const n=`$${A(s)}$`;this.labels.push(this.figure.create("TextByPosition",{anchor:"topCenter",dxInPixels:0,dyInPixels:0,isChild:!0,text:n,x:s,y:this.yLabel})),s=u(s+this.labelInterval)}}drawLine(){const t=this.figure.xToSx(this.min-this.addLeft),i=this.figure.xToSx(this.max+this.addRight),s=this.figure.yToSy(0),n=this.figure.yToSy(0);this.svgLine.setAttribute("x1",`${t-this.addInPixels}`),this.svgLine.setAttribute("y1",`${s}`),this.svgLine.setAttribute("x2",`${i+this.addInPixels}`),this.svgLine.setAttribute("y2",`${n}`),this.svgLine.setAttribute("stroke","currentColor");const o=document.createElementNS("http://www.w3.org/2000/svg","defs");this.figure.svg.appendChild(o);const r=document.createElementNS("http://www.w3.org/2000/svg","marker");r.setAttribute("id","arrow"),r.setAttribute("markerWidth","10"),r.setAttribute("markerHeight","10"),r.setAttribute("refX","0"),r.setAttribute("refY","3"),r.setAttribute("orient","auto"),r.setAttribute("markerUnits","strokeWidth");const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d","M0,0 L0,6 L9,3 z"),a.setAttribute("fill",this.color),r.appendChild(a),o.appendChild(r),this.svgLine.setAttribute("marker-end","url(#arrow)")}drawThicks(){const t=u(Math.ceil(this.min/this.step)*this.step),i=u(Math.floor(this.max/this.step)*this.step);for(let s=t;s<=i;){const n=this.figure.xToSx(s),o=this.figure.yToSy(-this.thick),r=this.figure.yToSy(this.thick),a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",`${n}`),a.setAttribute("y1",`${o}`),a.setAttribute("x2",`${n}`),a.setAttribute("y2",`${r}`),a.setAttribute("stroke","currentColor"),a.setAttribute("stroke-width","1"),this.groupSvg.appendChild(a),s=u(s+this.step)}}drawThicksBis(){if(this.stepBis===void 0)return;const t=u(Math.ceil(this.min/this.stepBis)*this.stepBis),i=u(Math.floor(this.max/this.stepBis)*this.stepBis);let s=0;for(let n=t;n<=i&&s<1e3;){const o=this.figure.xToSx(n),r=this.figure.yToSy(-this.thick/2),a=this.figure.yToSy(this.thick/2),l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1",`${o}`),l.setAttribute("y1",`${r}`),l.setAttribute("x2",`${o}`),l.setAttribute("y2",`${a}`),l.setAttribute("stroke","currentColor"),l.setAttribute("stroke-width","1"),this.groupSvg.appendChild(l),n=u(n+this.stepBis),s++}}toJSON(){return{...super.toJSON(),type:this.type,color:this.color,addLeft:this.addLeft,addRight:this.addRight,labelInterval:this.labelInterval,max:this.max,min:this.min,step:this.step,stepBis:this.stepBis,thick:this.thick,yLabel:this.yLabel}}get labelSize(){return this._labelSize}set labelSize(t){this._labelSize=t;for(const i of this.labels)i.fontSize=t}get latex(){let t=`
\\tkzInit[xmin=${this.min}, xmax=${this.max}, xstep=${this.step}]`;return t+=`
\\tkzDrawX[label={}, tickup=3pt, tickdn=3pt]`,this.stepBis!==void 0&&(t+=`\\foreach \\i in {${this.min},${u(this.min+this.stepBis,6)},...,${this.max}} {`,t+=`
\\tkzHTick[mark=|,mark size=2pt]{\\i}
}`),t}}class gt extends S{constructor(t,{addBorders:i=!1,center:s,codingMarks:n=1,color:o,dynamicAngle:r,fillColor:a,fillOpacity:l,start:c,...h}){if(super(t,{...h}),this.start=c,this.center=s,this.dynamicAngle=r,this.addBorders=i,this.codingMarks=n<4&&n>0?n:1,this._color=o??"black",this._fillColor=a??"none",this._fillOpacity=this.fillOpacity??this.figure.options.fillOpacity,this.svgArc=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svgArcs=[this.svgArc],this.groupSvg.appendChild(this.svgArc),this.codingMarks>1)for(let d=1;d<this.codingMarks;d++){const p=document.createElementNS("http://www.w3.org/2000/svg","path");this.svgArcs.push(p),this.groupSvg.appendChild(p)}this.start.subscribe(this),this.center.subscribe(this),this.dynamicAngle.subscribe(this)}distancePointer(t,i){return this.figure.pointer.isInArc(this)?0:Number.POSITIVE_INFINITY}draw(){this.figure.svg.appendChild(this.groupSvg),this.update(),this.setVisibilityColorThicknessAndDashed()}setVisibilityColorThicknessAndDashed(){this.color=this._color,this.fillColor=this._fillColor,this._fillOpacity!==void 0&&(this.fillOpacity=this._fillOpacity),this._isDashed!==void 0&&(this.isDashed=this._isDashed),this.isDashed=this._isDashed,this.isVisible=this._isVisible}toJSON(){return{...this.jsonOptions(),idCenter:this.center.id,idDynamicAngle:this.dynamicAngle.id,idStart:this.start.id}}update(){this.notify();const t=bt(this.start,this.center),[i,s]=di(this.dynamicAngle.value);if(Number.isFinite(this.start.x)&&Number.isFinite(this.start.y)&&Number.isFinite(this.center.x)&&Number.isFinite(this.center.y)){const n=this.codingMarks>1?.15:0;for(let o=0;o<this.codingMarks;o++){const r=this.codingMarks>1?(o-(this.codingMarks-1)/2)*n:0,a=t+r,l=this.start.x-this.center.x,c=this.start.y-this.center.y,h=Math.sqrt(l*l+c*c),d=a/h,p={x:this.center.x+l*d,y:this.center.y+c*d},g=R(p,this.center,this.dynamicAngle.value),m=this.figure.xToSx(a);let f=`M${this.figure.xToSx(p.x)} ${this.figure.yToSy(p.y)} A ${m} ${m} 0 ${i} ${s} ${this.figure.xToSx(g.x)} ${this.figure.yToSy(g.y)}`;this.addBorders&&(f+=`L ${this.figure.xToSx(this.center.x)} ${this.figure.yToSy(this.center.y)} Z`),this.svgArcs[o].setAttribute("d",f)}}}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.groupSvg.setAttribute("fill",this._fillColor)}get fillOpacity(){return this._fillOpacity}set fillOpacity(t){this._fillOpacity=t,t!==void 0&&this.groupSvg.setAttribute("fill-opacity",t.toString())}}class zi extends gt{constructor(t,{addBorders:i=!0,center:s,codingMarks:n=1,end:o,radius:r,start:a,...l}){const c=t.create("Segment",{isChild:!0,isSelectable:!0,isVisible:!1,point1:s,point2:a}),h=t.create("PointOnLineAtDistance",{distance:r,isChild:!0,isVisible:!1,line:c,shape:a.shape}),d=t.create("AngleOriented",{center:s,end:o,start:h});super(t,{addBorders:i,center:s,codingMarks:n,dynamicAngle:d,start:h,...l}),this.radius=r}}class ji extends Z{constructor(t,{isChild:i,value:s}){super(t,{isChild:i}),this.type="Const",this.value=s}toJSON(){return{id:this.id,isChild:this.isChild,type:this.type,value:this.value}}}class Ui extends gt{constructor(t,{addBorders:i=!0,center:s,color:n,endAngle:o,fillColor:r,fillOpacity:a,radius:l,startAngle:c,...h}){const d=new ji(t,{isChild:!0,value:o-c}),{x:p,y:g}=Zt(s,l,c),m=t.create("Point",{isChild:!0,isFree:!1,shape:"",x:p,y:g});super(t,{addBorders:i,center:s,color:n,dynamicAngle:d,fillColor:r,fillOpacity:a,start:m,...h}),this.radius=l,this.startAngle=c,this.endAngle=o,this.type="ArcByCenterRadiusAndAngles"}toJSON(){return{...this.jsonOptions(),endAngle:this.endAngle,fillColor:this.fillColor,idCenter:this.center.id,radius:this.radius,startAngle:this.startAngle}}get latex(){let t=`% Arc de cercle ${this.id}`;const i=Zt(this.center,this.radius,this.startAngle);return this.fillColor&&this.fillColor!=="none"?t+=`
\\fill${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.startAngle})}, {${this.center.y} + ${this.radius} * sin(${this.startAngle})}) arc(${this.startAngle}:${this.endAngle}:${this.radius}) -- 
    cycle;`:t+=`
\\draw${this.latexOptions} (${i.x}, ${i.y}) arc (${this.startAngle}:${this.endAngle}:${this.radius});`,this.addBorders&&(t+=`
\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.startAngle})}, {${this.center.y} + ${this.radius} * sin(${this.startAngle})});`,t+=`
\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.endAngle})}, {${this.center.y} + ${this.radius} * sin(${this.endAngle})});`),t}}class Gi extends It{constructor(t,{origin:i,pointOnSide1:s,pointOnSide2:n,...o}){let r=Math.atan2(n.y-i.y,n.x-i.x)-Math.atan2(s.y-i.y,s.x-i.x);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);const a=i.x+Math.cos(r/2)*(s.x-i.x)-Math.sin(r/2)*(s.y-i.y),l=i.y+Math.sin(r/2)*(s.x-i.x)+Math.cos(r/2)*(s.y-i.y),c=t.create("Point",{isChild:!0,isSelectable:!1,isVisible:!1,x:a,y:l});super(t,{point1:i,point2:c,...o}),this.type="BisectorByPoints",this.pointOnSide1=s,this.pointOnSide2=n,this.pointOnBisector=c,this.pointOnSide1.subscribe(this),this.pointOnSide2.subscribe(this),this.point2.unsubscribe(this)}toJSON(){return{...this.jsonOptions(),idOrigin:this.point1.id,idPointOnSide1:this.pointOnSide1.id,idPointOnSide2:this.pointOnSide2.id,isChild:this.isChild}}update(){let t=Math.atan2(this.pointOnSide2.y-this.point1.y,this.pointOnSide2.x-this.point1.x)-Math.atan2(this.pointOnSide1.y-this.point1.y,this.pointOnSide1.x-this.point1.x);t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI);const i=this.point1.x+Math.cos(t/2)*(this.pointOnSide1.x-this.point1.x)-Math.sin(t/2)*(this.pointOnSide1.y-this.point1.y),s=this.point1.y+Math.sin(t/2)*(this.pointOnSide1.x-this.point1.x)+Math.cos(t/2)*(this.pointOnSide1.y-this.point1.y);this.point2.moveTo(i,s),super.update()}get description(){const t=this.point1.label!==""?this.point1.label:this.point1.id,i=this.pointOnSide1.label!==""?this.pointOnSide1.label:this.pointOnSide1.id,s=this.pointOnSide2.label!==""?this.pointOnSide2.label:this.pointOnSide2.id;return`Bissectrice de l'angle $\\widehat{${i}${t}${s}}$`}}class E extends S{constructor(t,{center:i,fillOpacity:s=t.options.fillOpacity,radius:n,...o}){super(t,o),this.type="Circle",this._radius=n,this.center=i,(o==null?void 0:o.fillColor)!==void 0?this._fillColor=o.fillColor:this._fillColor=this.figure.options.fillColor,this.fillOpacity=s||this.figure.options.fillOpacity,(o==null?void 0:o.isDashed)!==void 0&&(this._isDashed=o.isDashed)}dilate(t,i,s){const n=this.center.dilate(t,i,{isChild:!0,isVisible:!1}),o=this.figure.create("Circle",{center:n,radius:Math.abs(i)*this.radius,...s});return o.transformation={center:t,factor:i,origin:this,type:"dilate"},o}distancePointer(t,i){if((this.figure.currentState==="FILL"||this.figure.currentState==="SET_OPTIONS"&&this.fillColor!=="none")&&this.figure.pointer.isInCircle(this))return 0;const s=Math.hypot((t-this.center.x)*this.figure.xScale,(i-this.center.y)*this.figure.yScale)*this.figure.scale;return Math.abs(s-this.radius*this.figure.scale)}draw(){this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.center.subscribe(this),this.setVisibilityColorThicknessAndDashed(),this.update()}reflect(t,i){const s=this.center.reflect(t,{isChild:!0,isVisible:!1}),n=this.figure.create("Circle",{center:s,radius:this.radius,...i});return n.transformation={center:t,origin:this,type:"reflect"},n}reflectOverLine(t,i){const s=this.center.reflectOverLine(t,{isChild:!0,isVisible:!1}),n=this.figure.create("Circle",{center:s,radius:this.radius,...i});return n.transformation={line:t,origin:this,type:"reflectOverLine"},n}rotate(t,i,s){const n=this.center.rotate(t,i,{isChild:!0,isVisible:!1}),o=this.figure.create("Circle",{center:n,radius:this.radius,...s});return o.transformation={angle:i,center:t,origin:this,type:"rotation"},o}setVisibilityColorThicknessAndDashed(){this.color=this._color,this.fillColor=this._fillColor,this._fillOpacity!==void 0&&(this.fillOpacity=this._fillOpacity),this._isDashed!==void 0&&(this.isDashed=this._isDashed),this.isDashed=this._isDashed,this.isVisible=this._isVisible}toJSON(){return{...this.jsonOptions(),fillColor:this.fillColor,fillOpacity:this.fillOpacity,idCenter:this.center.id,radius:this._radius}}translate(t,i,s){const n=this.center.translate(t,i,{isChild:!0,isVisible:!1}),o=this.figure.create("Circle",{center:n,radius:this.radius,...s});return o.transformation={origin:this,point1:t,point2:i,type:"translation"},o}update(){if(this.center.x===void 0||this.center.y===void 0||Number.isNaN(this.center.x)||Number.isNaN(this.center.y))this.groupSvg.removeAttribute("r");else{const t=this.figure.xToSx(this.center.x),i=this.figure.yToSy(this.center.y),s=this.figure.pixelsPerUnit*this._radius*this.figure.scale;this.groupSvg.setAttribute("cx",`${t}`),this.groupSvg.setAttribute("cy",`${i}`),this.groupSvg.setAttribute("r",`${s}`)}this.notify()}get description(){var i,s,n,o,r,a,l,c;if(((i=this.transformation)==null?void 0:i.type)==="reflect")return`Cercle $${this.label}$, image du cercle $${this.transformation.origin.notation}$ dans la symétrie de centre $${(s=this.transformation)==null?void 0:s.center.notation}$`;if(((n=this.transformation)==null?void 0:n.type)==="reflectOverLine")return`Cercle $${this.label}$, image du cercle $${this.transformation.origin.notation}$ dans la symétrie d'axe  $${(o=this.transformation)==null?void 0:o.line.notation}$`;if(((r=this.transformation)==null?void 0:r.type)==="dilate")return`Cercle $${this.label}$, image du cercle $${this.transformation.origin.notation}$ dans l'homothétie de centre $${(a=this.transformation)==null?void 0:a.center.notation}$ et de rapport $${this.transformation.factor}$`;if(((l=this.transformation)==null?void 0:l.type)==="rotation")return`Cercle $${this.label}$, image du cercle $${this.transformation.origin.notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\degree$ dans le sens ${this.transformation.angle>0?"anti-horaire":"horaire"}`;if(((c=this.transformation)==null?void 0:c.type)==="translation")return`Cercle $${this.label}$, image du cercle $${this.transformation.origin.notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`;const t=this.center.label!==""?this.center.label:this.center.id;return`Cercle $${this.label}$ de centre $${t}$ et de rayon ${this.radius} cm`}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.groupSvg.setAttribute("fill",this._fillColor)}get fillOpacity(){return this._fillOpacity}set fillOpacity(t){this._fillOpacity=t,t!==void 0&&this.groupSvg.setAttribute("fill-opacity",t.toString())}get label(){return this.id.replace("element","C_")}get latex(){let t=`% Cercle ${this.id}`;return t+=`
\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) circle (${this.radius});`,t}get latexOptions(){const t=super.latexOptions.replace("[","").replace("]","").split(",").filter(i=>i!=="");return this.fillColor!=="none"&&t.push(`fill=${ht(this.fillColor)}`),this.fillOpacity!==1&&this.fillOpacity!==void 0&&t.push(`fill opacity=${this.fillOpacity}`),t.length>0?`[${t.join(",")}]`:""}get notation(){return this.id}get radius(){return this._radius}set radius(t){this._radius=t,this.update()}}class ye extends E{constructor(t,{center:i,radius:s,...n}){super(t,{center:i,radius:s.value,...n}),this.type="CircleDynamicRadius",this.center=i,this.radiusDynamic=s,this.radiusDynamic.subscribe(this),this.update(),this.setVisibilityColorThicknessAndDashed()}toJSON(){return{...this.jsonOptions(),fillColor:this.fillColor,fillOpacity:this.fillOpacity,idCenter:this.center.id,idRadius:this.radiusDynamic.id}}update(){var n,o;if(((n=this.radiusDynamic)==null?void 0:n.value)===void 0||this.center.x===void 0||this.center.y===void 0)return;const t=this.figure.xToSx(this.center.x),i=this.figure.yToSy(this.center.y),s=this.figure.pixelsPerUnit*((o=this.radiusDynamic)==null?void 0:o.value)*this.figure.scale;this._radius=this.radiusDynamic.value,this.groupSvg.setAttribute("cx",`${t}`),this.groupSvg.setAttribute("cy",`${i}`),Number.isFinite(s)&&this.groupSvg.setAttribute("r",`${s}`),this.notify()}}class Hi extends ye{constructor(t,{center:i,point:s,...n}){const o=new fe(t,{isChild:!0,point1:i,point2:s});super(t,{center:i,radius:o,...n}),this.type="CircleCenterPoint",this.point=s,this.point.subscribe(this)}dilate(t,i,s){const n=this.center.dilate(t,i,{isChild:!0,isVisible:!1}),o=this.point.dilate(t,i,{isChild:!0,isVisible:!1}),r=this.figure.create("CircleCenterPoint",{center:n,point:o,...s});return r.transformation={center:t,factor:i,origin:this,type:"dilate"},r}reflect(t,i){const s=this.center.reflect(t,{isChild:!0,isVisible:!1}),n=this.point.reflect(t,{isChild:!0,isVisible:!1}),o=this.figure.create("CircleCenterPoint",{center:s,point:n,...i});return o.transformation={center:t,origin:this,type:"reflect"},o}reflectOverLine(t,i){const s=this.center.reflectOverLine(t,{isChild:!0,isVisible:!1}),n=this.point.reflectOverLine(t,{isChild:!0,isVisible:!1}),o=this.figure.create("CircleCenterPoint",{center:s,point:n,...i});return o.transformation={line:t,origin:this,type:"reflectOverLine"},o}rotate(t,i,s){const n=this.center.rotate(t,i,{isChild:!0,isVisible:!1}),o=this.point.rotate(t,i,{isChild:!0,isVisible:!1}),r=this.figure.create("CircleCenterPoint",{center:n,point:o,...s});return r.transformation={center:t,angle:i,origin:this,type:"rotation"},r}toJSON(){return{...this.jsonOptions(),fillColor:this.fillColor,fillOpacity:this.fillOpacity,idCenter:this.center.id,idPoint:this.point.id}}translate(t,i,s){const n=this.center.translate(t,i,{isChild:!0,isVisible:!1}),o=this.point.translate(t,i,{isChild:!0,isVisible:!1}),r=this.figure.create("CircleCenterPoint",{center:n,point:o,...s});return r.transformation={origin:this,point1:t,point2:i,type:"translation"},r}get description(){var s,n,o,r,a,l,c,h;if(((s=this.transformation)==null?void 0:s.type)==="reflect")return`Image du cercle $${this.transformation.origin.notation}$ dans la symétrie de centre $${(n=this.transformation)==null?void 0:n.center.notation}$`;if(((o=this.transformation)==null?void 0:o.type)==="reflectOverLine")return`Image du cercle $${this.transformation.origin.notation}$ dans la symétrie d'axe $${(r=this.transformation)==null?void 0:r.line.notation}$`;if(((a=this.transformation)==null?void 0:a.type)==="dilate")return`Image du cercle $${this.transformation.origin.notation}$ dans l'homothétie de centre $${(l=this.transformation)==null?void 0:l.center.notation}$ et de rapport $${this.transformation.factor}$`;if(((c=this.transformation)==null?void 0:c.type)==="rotation")return`Image du cercle $${this.transformation.origin.notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\degree$ dans le sens ${this.transformation.angle>0?"anti-horaire":"horaire"}`;if(((h=this.transformation)==null?void 0:h.type)==="translation")return`Image du cercle $${this.transformation.origin.notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`;const t=this.center.label!==""?this.center.label:this.center.id,i=this.point.label!==""?this.point.label:this.point.id;return`Cercle de centre $${t}$ et passant par le point $${i}$`}}class Wi extends Y{constructor(t,{point:i,vector:s,...n}){const o=i.translateVector(s);o.isVisible=!1,o.isSelectable=!0,o.isVisible=!1,o.shape=i.shape,super(t,{point1:i,point2:o,shape:"",...n}),this.type="LineByPointVector",this.point=i,this.vector=s}toJSON(){return{...this.jsonOptions(),idPoint:this.point.id,idVector:this.vector.id}}}class Nt extends Y{constructor(t,{line:i,point:s,...n}){const{x1:o,y1:r,x2:a,y2:l}=Gt({line:i,point:s,figure:t}),c=t.create("Point",{isChild:!0,isFree:!1,isVisible:!1,x:o,y:r}),h=t.create("Point",{isChild:!0,isFree:!1,isVisible:!1,x:a,y:l});super(t,{point1:c,point2:h,...n}),this.type="LineParallel",this.line=i,this.point=s,this.line.subscribe(this),this.point.subscribe(this),this.point1.unsubscribe(this),this.point2.unsubscribe(this)}toJSON(){return{...this.jsonOptions(),idLine:this.line.id,idPoint:this.point.id}}update(){const{x1:t,y1:i,x2:s,y2:n}=Gt({line:this.line,point:this.point,figure:this.figure});this.point1.moveTo(t,i),this.point2.moveTo(s,n),super.update()}get description(){const t=this.point.label!==""?this.point.label:this.point.id;return this.line.point1.label!==""&&this.line.point2.label!==""&&this.point.label!==""?`Droite parallèle à $${this.line.notation}$ et passant par le point $${t}$`:`Droite parallèle n°${[...this.figure.elements.values()].filter(n=>n instanceof Nt).indexOf(this)+1}`}}class ft extends Y{constructor(t,{line:i,point:s,...n}){const o=s.x,r=s.y;let a;o===i.point1.x&&r===i.point1.y?a=R(i.point2,i.point1,90):o===i.point2.x&&r===i.point2.y||s.isOnline(i)?a=R(i.point1,s,90):a=tt(s,i);const l=a.x,c=a.y,h=t.create("Point",{isChild:!0,isFree:!1,isVisible:!1,color:"",x:o,y:r}),d=t.create("Point",{isChild:!0,isFree:!1,isVisible:!1,color:"",x:l,y:c});super(t,{point1:h,point2:d,...n}),this.type="LinePerpendicular",this.line=i,this.point=s,this.line.subscribe(this),this.point.subscribe(this),this.point1.unsubscribe(this),this.point2.unsubscribe(this)}toJSON(){return{...this.jsonOptions(),idLine:this.line.id,idPoint:this.point.id}}update(){const t=this.point.x,i=this.point.y;let s;t===this.line.point1.x&&i===this.line.point1.y?s=R(this.line.point2,this.line.point1,90):t===this.line.point2.x&&i===this.line.point2.y?s=R(this.line.point1,this.point,90):this.point.isOnline(this.line)?s=R(this.line.point1,this.point,90):s=tt(this.point,this.line);const n=s.x,o=s.y;this.point1.moveTo(t,i),this.point2.moveTo(n,o),super.update()}get description(){const t=this.point.label!==""?this.point.label:this.point.id;return this.line.point1.label!==""&&this.line.point2.label!==""&&this.point.label!==""?`Droite perpendiculaire à $${this.line.notation}$ et passant par le point $${t}$`:`Droite perpendiculaire n°${[...this.figure.elements.values()].filter(n=>n instanceof ft).indexOf(this)+1}`}}class xe extends ft{constructor(t,{segment:i,...s}){const n=t.create("Middle",{isChild:!0,isSelectable:!0,isVisible:!1,point1:i.point1,point2:i.point2,shape:""});super(t,{line:i,point:n,...s}),this.type="PerpendicularBisector",this.notationSegment=i.notation}toJSON(){return{...this.jsonOptions(),idSegment:this.line.id}}get description(){return`Médiatrice du segment $${this.notationSegment}$`}get notation(){return`\\text{médiatrice de }${this.notationSegment}`}}class Yi extends xe{constructor(t,{point1:i,point2:s,...n}){const o=t.create("Segment",{isChild:!0,isSelectable:!0,isVisible:!1,point1:i,point2:s});super(t,{segment:o,...n}),this.type="PerpendicularBisectorByPoints"}toJSON(){return{...this.jsonOptions(),idPoint1:this.line.point1.id,idPoint2:this.line.point2.id}}get description(){const t=this.line.point1.label!==""?this.line.point1.label:this.line.point1.id,i=this.line.point2.label!==""?this.line.point2.label:this.line.point2.id;return`Médiatrice du segment $[${t}${i}]$`}}class j extends S{constructor(t,{fillColor:i="none",fillOpacity:s=t.options.fillOpacity,isBuiltWithSegments:n=!0,points:o,shape:r="",...a}){if(super(t,a),this._fillColor="none",this._fillOpacity=.5,this.type="Polygon",Zi(o[0])){this.points=[];for(const l of o)this.points.push(this.figure.create("Point",{x:l.x,y:l.y,isVisible:!1,isChild:!1}))}else this.points=o;this.shape=r,this.segments=[],this.fillColor=i,this.fillOpacity=s,this.isBuiltWithSegments=n;for(const l of this.points)l.subscribe(this)}createSegments(){for(let t=0;t<this.points.length;t++){const i=this.points.at(t%this.points.length),s=this.points.at((t+1)%this.points.length),n=this.figure.create("Segment",{color:"",id:`${this.id}_segment${t.toString()}`,isChild:!0,point1:i,point2:s});this.segments.push(n)}for(const t of this.segments)t.createdBy=this}dilate(t,i,s){const n=[];for(const r of this.points)n.push(r.dilate(t,i,{isChild:!0,isVisible:!1}));const o=this.figure.create("Polygon",{points:n,...s});return o.transformation={center:t,factor:i,origin:this,type:"dilate"},o}distancePointer(t,i){if(this.figure.currentState==="FILL"&&this.figure.pointer.isInPolygon(this))return 0;let s=Number.POSITIVE_INFINITY;for(const n of this.segments){const o=n.distancePointer(t,i);o<s&&(s=o)}return s}draw(){this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.groupSvg.setAttribute("fill",this.fillColor??"none"),this.groupSvg.setAttribute("fill-opacity",this.fillOpacity.toString()),this.setVisibilityColorThicknessAndDashed(),this.isBuiltWithSegments&&this.createSegments(),this.update()}reflect(t,i){const s=[];for(const o of this.points)s.push(o.reflect(t,{isChild:!0,isVisible:!1}));const n=this.figure.create("Polygon",{points:s,...i});return n.transformation={center:t,origin:this,type:"reflect"},n}reflectOverLine(t,i){const s=[];for(const o of this.points)s.push(o.reflectOverLine(t,{isChild:!0,isVisible:!1}));const n=this.figure.create("Polygon",{points:s,...i});return n.transformation={line:t,origin:this,type:"reflectOverLine"},n}rotate(t,i,s){const n=[];for(const r of this.points)n.push(r.rotate(t,i,{isChild:!0,isVisible:!1}));const o=this.figure.create("Polygon",{points:n,...s});return o.transformation={center:t,origin:this,angle:i,type:"rotation"},o}remove(){super.remove();for(const t of this.segments)t.remove()}toJSON(){const t=[];for(const i of this.points)t.push(i.id);return{...this.jsonOptions(),idPoints:t}}translate(t,i,s){const n=[];for(const r of this.points)n.push(r.translate(t,i,{isChild:!0,isVisible:!1}));const o=this.figure.create("Polygon",{points:n,...s});return o.transformation={origin:this,point1:t,point2:i,type:"translation"},o}update(){this.notify();const t=this.points.filter(i=>Number.isFinite(i.x)&&Number.isFinite(i.y));if(t.length<2)this.groupSvg.removeAttribute("points");else{let i="";for(const s of t)i+=`${this.figure.xToSx(s.x).toString()},${this.figure.yToSy(s.y).toString()} `;this.groupSvg.setAttribute("points",i)}}get description(){var t,i,s,n,o,r,a,l;return((t=this.transformation)==null?void 0:t.type)==="reflect"?`Image du polygone $${this.transformation.origin.notation}$ dans la symétrie de centre $${(i=this.transformation)==null?void 0:i.center.notation}$`:((s=this.transformation)==null?void 0:s.type)==="reflectOverLine"?`Image du polygone $${this.transformation.origin.notation}$ dans la symétrie d'axe $${(n=this.transformation)==null?void 0:n.line.notation}$`:((o=this.transformation)==null?void 0:o.type)==="dilate"?`Image du polygone $${this.transformation.origin.notation}$ dans l'homothétie de centre $${(r=this.transformation)==null?void 0:r.center.notation}$ et de rapport $${this.transformation.factor}$`:((a=this.transformation)==null?void 0:a.type)==="rotation"?`Image du polygone $${this.transformation.origin.notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\degree$ dans le sens ${this.transformation.angle>0?"anti-horaire":"horaire"}`:((l=this.transformation)==null?void 0:l.type)==="translation"?`Image du polygone $${this.transformation.origin.notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`:`Polygone $${this.notation}$`}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.groupSvg.setAttribute("fill",this._fillColor)}get fillOpacity(){return this._fillOpacity??this.figure.options.fillOpacity}set fillOpacity(t){this._fillOpacity=t,t!==void 0&&this.groupSvg.setAttribute("fill-opacity",t.toString())}get latex(){let t=`% Polygone ${this.points.reduce((i,s)=>i+s.label,"")}`;t+=`
 \\draw [color=${ht(this.color?this.color:"none")},fill=${ht(this.fillColor?this.fillColor:"none")},fill opacity=${this.fillOpacity},line width=${this.thickness}] `;for(const i of this.points)t+=`(${i.x.toFixed(2)},${i.y.toFixed(2)}) -- `;return t+=" cycle;",t}get notation(){return this.points.reduce((t,i)=>{const s=i.label===""?i.id:i.label;return t+s},"")}}function Zi(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"x"in e&&"y"in e&&typeof e.x=="number"&&typeof e.y=="number"}class qi extends S{constructor(t,{points:i,...s}){super(t,s),this.type="Polyline",this.points=i;for(const n of i)n.subscribe(this)}draw(){this.groupSvg=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.groupSvg.setAttribute("fill","none"),this.setVisibilityColorThicknessAndDashed(),this.update()}toJSON(){const t=[];for(const i of this.points)t.push(i.id);return{...this.jsonOptions(),idPoints:t}}update(){if(this.notify(),!Xi(this.points))this.groupSvg.removeAttribute("points");else{let t="";for(const i of this.points)t+=`${this.figure.xToSx(i.x).toString()},${this.figure.yToSy(i.y).toString()} `;this.groupSvg.setAttribute("points",t)}}}function Xi(e){for(const t of e)if(!Number.isFinite(t.x)||!Number.isFinite(t.y))return!1;return!0}class et extends S{constructor(t,{anchor:i="middleCenter",backgroundColor:s,color:n="black",dxInPixels:o=0,dyInPixels:r=0,fontSize:a=t.options.fontSize,id:l,isChild:c=!1,isDeletable:h=!0,isSelectable:d=!0,isVisible:p=!0,text:g,x:m,y:f}){super(t,{id:l,isChild:c}),this._angleWithHorizontalInDegres=0,this.type="TextByPosition",this._x=m,this._y=f,this.div=document.createElement("div"),this._fontSize=a,this.dxInPixels=o,this.dyInPixels=r,this._text=g,this.backgroundColor=s,this._color=n,this.anchor=i,this.isDeletable=h,this.isSelectable=d,this.isVisible=p}distancePointer(t,i){var g;if(!this.figure||!this.div||this._x===void 0||this._y===void 0)return Number.POSITIVE_INFINITY;const s=this.figure.xToSx(t-this.figure.xMin),n=this.figure.yToSy(i-this.figure.yMax),o=this.div.getBoundingClientRect(),r=(g=this.figure.svg)==null?void 0:g.getBoundingClientRect();if(!r)return Number.POSITIVE_INFINITY;const a=o.left-r.left,l=o.top-r.top,c=a+o.width,h=l+o.height;let d=0,p=0;return s<a?d=a-s:s>c&&(d=s-c),n<l?p=l-n:n>h&&(p=n-h),Math.hypot(d,p)/this.figure.pixelsPerUnit}draw(){var t;!this.figure||!this.div||(this.div.style.position="absolute",this.div.style.pointerEvents="none",(t=this.figure.divFigure)==null||t.appendChild(this.div),this.color!=="black"&&(this.div.style.color=this.color),this.backgroundColor!==void 0&&(this.div.style.backgroundColor=this.backgroundColor),this.text=this._text,this.x=this._x,this.y=this._y,this._angleWithHorizontalInDegres!==0&&(this.div.style.transform=this.div.style.transform.replace(/rotate\([0-9.]+deg\)/,""),this.div.style.transformOrigin="center",this.div.style.transform+=` rotate(${this._angleWithHorizontalInDegres}deg)`,this.div.style.transform+="translateY(-50%)",this.div.style.verticalAlign="middle"),this.div.style.alignItems="center",this.figure.scale-this.figure.initial.scale!==0&&(this._fontSize.includes("em")||this._fontSize.includes("pt")&&(this.fontSize=`${Number.parseFloat(this._fontSize)*(1+(this.figure.scale-this.figure.initial.scale))}pt`)))}moveTo(t,i){this.x=t,this.y=i}remove(){super.remove(),this.div&&(this.div.onclick=null,this.div.onchange=null,this.div.oninput=null,this.div.onmousedown=null,this.div.onmouseup=null,this.div.onmousemove=null,this.div.onmouseenter=null,this.div.onmouseleave=null,this.div.onpointerdown=null,this.div.onpointerup=null,this.div.onpointermove=null,this.div.onpointerleave=null,this.div.onkeydown=null,this.div.onkeyup=null,this.div.remove(),this.div=null)}update(){var s;if(!this.figure||!this.div)return;this.x!==void 0&&this.y!==void 0&&this.moveTo(this.x,this.y),this.notify();const t=this.div.getBoundingClientRect(),i=(s=this.figure.svg)==null?void 0:s.getBoundingClientRect();i&&(t.right<i.left||t.left>i.right||t.bottom<i.top||t.top>i.bottom)?this.div.style.visibility="hidden":this.div.style.visibility="visible"}set isHover(t){!this.figure||!this.div||(this._isHover=t,t&&this.isSelectable?(this.div.style.color=V,this.div.style.cursor="pointer"):(this.div.style.color=this._color,this.div.style.cursor="default"))}get isHover(){return this._isHover}get isVisible(){return this._isVisible}set isVisible(t){var i,s;!this.figure||!this.div||(this._isVisible=t,t?(s=(i=this.figure)==null?void 0:i.divFigure)==null||s.appendChild(this.div):this.div.remove())}get opacity(){return this._opacity}set opacity(t){!this.figure||!this.div||(this._opacity=t,this.div.style.opacity=t.toString())}toJSON(){return{...this.jsonOptions(),backgroundColor:this.backgroundColor,color:this.color,name:this.id,text:this.text,x:u(this.x),y:u(this.y),anchor:this.anchor}}set angleWithHorizontalInDegres(t){!this.figure||!this.div||(this._angleWithHorizontalInDegres=t,this.div.style.transform=this.div.style.transform.replace(/rotate\([0-9.]+deg\)/,""),this.div.style.transformOrigin="center",this.div.style.transform+=` rotate(${t}deg)`)}get angleWithHorizontalInDegres(){return this._angleWithHorizontalInDegres}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){!this.figure||!this.div||(this._backgroundColor=t,t!==void 0&&(this.div.style.backgroundColor=t))}get color(){return this._color}set color(t){!this.figure||!this.div||(this._color=t,this.div.style.color=t)}get fontSize(){return this._fontSize}set fontSize(t){!this.figure||!this.div||(this._fontSize=t,this.div.style.fontSize=t)}get latex(){const t=[...this.figure.elements.values()].filter(i=>i.type==="Grid")[0];return t&&t.labels.indexOf(this)!==-1?"":this.text!=="$$"&&this.text!==""?`\\node[${this.latexOptions}] at (${this.x},${this.y}) {${this.text}};`:""}get latexOptions(){const t=super.latexOptions,i=t===""?[]:t.substring(1,t.length-1).split(","),s=[];this.dyInPixels>0?s.push("above"):this.dyInPixels<0&&s.push("below"),this.dxInPixels>0?s.push("right"):this.dxInPixels<0&&s.push("left");const n=s.join(" ");return s.length>0&&i.push(n),i.join(",")}get text(){return this._text}set text(t){!this.figure||!this.div||(this._text=t,this.div.innerHTML=t,ut(this.div,{delimiters:[{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"}],errorColor:"#CC0000",preProcess:i=>i.replaceAll(" ","\\,"),strict:"warn",throwOnError:!0,trust:!1}))}get x(){return this._x}set x(t){var s;if(!this.figure||!this.div)return;let i="";this.anchor.includes("Left")?this.div.style.left=`${this.figure.xToSx(t-this.figure.xMin).toString()}px`:this.anchor.includes("Right")?((s=this.figure.divFigure)==null?void 0:s.clientWidth)!==void 0&&this.figure.divFigure.clientWidth>this.figure.width?this.div.style.right=`${(this.figure.xToSx(-t+this.figure.xMax)+Math.max(0,this.figure.divFigure.clientWidth-this.figure.width)).toString()}px`:this.div.style.right=`${this.figure.xToSx(-t+this.figure.xMax).toString()}px`:this.anchor.includes("Center")&&(this.div.style.left=`${this.figure.xToSx(t-this.figure.xMin).toString()}px`,i+="translateX(-50%)"),this.anchor.includes("middle")&&(i+="translateY(-50%)"),(this.dxInPixels!==0||this.dyInPixels!==0)&&(i+=` translate(${this.dxInPixels.toString()}px, ${-this.dyInPixels.toString()}px)`),this.div.style.fontSize=this._fontSize,this.div.style.transform=i,this._x=t}get y(){return this._y}set y(t){!this.figure||!this.div||(this.anchor.includes("top")?this.div.style.top=`${this.figure.yToSy(t-this.figure.yMax).toString()}px`:this.anchor.includes("bottom")?this.div.style.bottom=`${this.figure.yToSy(-t+this.figure.yMin).toString()}px`:this.anchor.includes("middle")&&(this.div.style.top=`${this.figure.yToSy(t-this.figure.yMax).toString()}px`),this._y=t)}}class Ji extends et{constructor(t,{color:i=t.options.color,fontSize:s=t.options.fontSize,point1:n,point2:o,text:r=t.options.mark}){const a=(n.x+o.x)/2,l=(n.y+o.y)/2;super(t,{color:i,fontSize:s,text:r,x:a,y:l}),this.type="MarkSegment",this.fontSize=s,this._color=i,this.point1=n,this.point2=o,this.point1.subscribe(this),this.point2.subscribe(this);const c=Vt(this.point1,this.point2);this.angleWithHorizontalInDegres=-c,this.type="MarkBetweenPoints",this.erasePreviousMarks()}draw(){super.draw(),this.update()}erasePreviousMarks(){const t=[...this.figure.elements.values()].filter(i=>i instanceof S&&i.type==="MarkBetweenPoints");for(const i of t)i.id!==this.id&&(i.point1.id===this.point1.id&&i.point2.id===this.point2.id||i.point1.id===this.point2.id&&i.point2.id===this.point1.id)&&i.remove()}update(){var t;if(this.x=(this.point1.x+this.point2.x)/2,this.y=(this.point1.y+this.point2.y)/2,this.div!==void 0){this.text!=="||"&&this.text!=="|||"&&(this.div.style.fontFamily="Courier New"),this.div.style.fontWeight="bold",this.div.style.fontSize=this.fontSize,this.div.style.transformOrigin="center center",this.div.style.transformBox="fill-box",this.div.style.transform="translate(-50%, -50%)",this.div.classList.add("-tracking-2");const i=Vt(this.point1,this.point2);this.div.style.transform+=`rotate(${-i}deg)`;const s=this.div.getBoundingClientRect(),n=(t=this.figure.svg)==null?void 0:t.getBoundingClientRect();n&&(s.right<n.left||s.left>n.right||s.bottom<n.top||s.top>n.bottom)?this.div.style.visibility="hidden":this.div.style.visibility="visible"}this.notify()}toJSON(){return{...this.jsonOptions(),color:this.color,text:this.text,idPoint1:this.point1.id,idPoint2:this.point2.id}}}class Ki extends S{constructor(t,{point:i,directionPoint:s,size:n=.4,quadrant:o=0,...r}){super(t,{...r}),this.directionPoint=s,this.point=i,this.size=n,this.quadrant=o,this.type="MarkRightAngle",this.point.subscribe(this),this.directionPoint.subscribe(this),this.svgPolygon=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.groupSvg.appendChild(this.svgPolygon),this.update(),this.setVisibilityColorThicknessAndDashed()}draw(){this.update()}computeVertices(){const t=this.point,i=Ye(this.directionPoint,this.point,this.size/I(this.point,this.directionPoint)),s=this.quadrant*90,n=R(i,this.point,s),o=R(this.point,n,90),r=R(n,this.point,-90);return{sommet1:t,sommet2:n,sommet3:o,sommet4:r}}update(){const{sommet1:t,sommet2:i,sommet3:s,sommet4:n}=this.computeVertices(),o=this.figure.xToSx(t.x),r=this.figure.yToSy(t.y),a=this.figure.xToSx(i.x),l=this.figure.yToSy(i.y),c=this.figure.xToSx(s.x),h=this.figure.yToSy(s.y),d=this.figure.xToSx(n.x),p=this.figure.yToSy(n.y);this.svgPolygon.setAttribute("points",`${o},${r} ${a},${l} ${c},${h} ${d},${p}`),this.svgPolygon.setAttribute("fill","none"),this.notify()}toJSON(){return{...this.jsonOptions(),color:this.color,idPoint:this.point.id,idDirectionPoint:this.directionPoint.id,quadrant:this.quadrant}}get latex(){const{sommet2:t,sommet3:i,sommet4:s}=this.computeVertices();let n=`% Angle droit en ${this.point.label}`;return n+=`
\\draw${this.latexOptions} (${this.point.x},${this.point.y}) -- (${t.x},${t.y}) -- (${i.x},${i.y}) -- (${s.x},${s.y}) -- cycle;`,n}}class Qi extends y{constructor(t,{points:i,...s}){const n=i.reduce((r,a)=>r+a.x,0)/i.length,o=i.reduce((r,a)=>r+a.y,0)/i.length;super(t,{x:n,y:o,...s}),this.type="Barycenter",this.points=i;for(const r of this.points)r.subscribe(this)}update(){const t=this.points.reduce((s,n)=>s+n.x,0)/this.points.length,i=this.points.reduce((s,n)=>s+n.y,0)/this.points.length;this._x=t,this._y=i,super.update()}}class ts extends y{constructor(t,{point1:i,point2:s,...n}){const[o,r]=es(i,s);super(t,{isFree:!1,x:o,y:r,...n}),this.type="Middle",this.point1=i,this.point2=s,this.point1.subscribe(this),this.point2.subscribe(this)}toJSON(){return{...this.jsonOptions(),idPoint1:this.point1.id,idPoint2:this.point2.id}}update(){var t,i,s,n;((t=this.point1)==null?void 0:t.x)===void 0||((i=this.point2)==null?void 0:i.x)===void 0||((s=this.point1)==null?void 0:s.y)===void 0||((n=this.point2)==null?void 0:n.y)===void 0||Number.isNaN(this.point1.x)||Number.isNaN(this.point1.y)||Number.isNaN(this.point2.x)||Number.isNaN(this.point2.y)?(this._x=Number.NaN,this._y=Number.NaN):(this._x=(this.point1.x+this.point2.x)/2,this._y=(this.point1.y+this.point2.y)/2),super.update(),this.notify()}get description(){const t=this.point1.label!==""?this.point1.label:this.point1.id,i=this.point2.label!==""?this.point2.label:this.point2.id;return`Milieu de $[${t}${i}]$`}}function es(e,t){return Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y)?[Number.NaN,Number.NaN]:[(e.x+t.x)/2,(e.y+t.y)/2]}class is extends y{constructor(t,{abscissa:i=!1,graph:s,ordinate:n=!1,x:o=1,...r}){super(t,{x:o,y:s.f(o),...r}),this.type="PointOnGraph",this.graph=s,this.graph.subscribe(this)}moveTo(t){let i=t;t>this.graph.xMax&&(i=this.graph.xMax),t<this.graph.xMin&&(i=this.graph.xMin),this.x=i}toJSON(){return{...this.jsonOptions(),idGraph:this.graph.id,label:this.label,shape:this.shape,sizeInPixels:this.sizeInPixels,x:this.x}}get x(){return this._x}set x(t){t>this.figure.xMax||t<this.figure.xMin||this.graph.f(t)>this.figure.yMax||this.graph.f(t)<this.figure.yMin||(this._x=t,this._y=this.graph.f(t),this.update())}get y(){return this.graph.f(this.x)}}class ss extends y{constructor(t,{line:i,origin:s,...n}){const{x:o,y:r}=tt(s,i);super(t,{isFree:!1,x:o,y:r,...n}),this.type="PointByProjection",this.origin=s,this.line=i,this.origin.subscribe(this),this.line.subscribe(this)}toJSON(){return{...this.jsonOptions(),idLine:this.line.id,idOrigin:this.origin.id,label:this.label,shape:this.shape,sizeInPixels:this.sizeInPixels}}update(){const{x:t,y:i}=tt(this.origin,this.line);this._x=t,this._y=i,super.update()}get description(){const t=this.line.notation;return`Projection orthogonale de $${this.origin.label!==""?this.origin.label:this.origin.id}$ sur $${t}$`}}class ns extends y{constructor(t,{origin:i,...s}){super(t,{isFree:!1,x:i.x,y:0,...s}),this.type="PointByProjectionOnAxisX",this.origin=i,this.origin.subscribe(this)}toJSON(){return{...this.jsonOptions(),idOrigin:this.origin.id,label:this.label,shape:this.shape,sizeInPixels:this.sizeInPixels}}update(){this._x=this.origin.x,this._y=0,super.update()}}class os extends y{constructor(t,{origin:i,...s}){super(t,{isFree:!1,x:0,y:i.x,...s}),this.type="PointByProjectionOnAxisY",this.origin=i,this.origin.subscribe(this)}toJSON(){return{...this.jsonOptions(),idOrigin:this.origin.id,label:this.label,shape:this.shape,sizeInPixels:this.sizeInPixels}}update(){this._x=0,this._y=this.origin.y,super.update()}}class rs extends y{constructor(t,{circle1:i,circle2:s,isChild:n,n:o,...r}){const a=zt(i,s,o);super(t,{isChild:n,isFree:!1,x:a.x,y:a.y,...r}),this.type="PointIntersectionCC",this.circle1=i,this.circle2=s,this.n=o??1,this.circle1.subscribe(this),this.circle2.subscribe(this)}toJSON(){return{...this.jsonOptions(),idCircle1:this.circle1.id,idCircle2:this.circle2.id,label:this.label,n:this.n,shape:this.shape}}update(){if(!(this.circle1==null||this.circle2==null)){try{const{x:t,y:i}=zt(this.circle1,this.circle2,this.n);this._x=t,this._y=i,super.update()}catch(t){console.error("Erreur dans PointIntersectionLL.update()",t)}this.notify()}}get description(){return this.label?`Point ${this.label}, intersection du cercle $${this.circle1.label}$ et du cercle $${this.circle2.label}$`:`Intersection du cercle $${this.circle1.label}$ et du cercle $${this.circle2.label}$`}}class as extends y{constructor(t,{circle:i,line:s,n,...o}){const r=Ut(s,i,n);super(t,{isFree:!1,x:r.x,y:r.y,...o}),this.type="PointIntersectionLC",this.line=s,this.circle=i,this.n=n??1,this.line.subscribe(this),this.circle.subscribe(this)}toJSON(){return{...this.jsonOptions(),idCircle:this.circle.id,idLine:this.line.id,label:this.label,n:this.n,shape:this.shape}}update(){if(!(this.line===void 0||this.circle===void 0)){try{const{x:t,y:i}=Ut(this.line,this.circle,this.n);this._x=t,this._y=i,this.isOnline(this.line)||(this._x=Number.NaN,this._y=Number.NaN),super.update()}catch(t){console.error("Erreur dans PointIntersectionLL.update()",t)}this.notify()}}get description(){const t=this.line.notation,i=this.circle.id;return`Intersection de la droite $${t}$ et du cercle $${i}$`}}class ls extends y{constructor(t,{angleWithHorizontal:i,circle:s,label:n,...o}){i===void 0&&(i=Math.random()*2*Math.PI),super(t,{label:n,x:s.center.x+s.radius*Math.cos(i),y:s.center.y+s.radius*Math.sin(i),...o}),this.figure=t,this.circle=s,this.angleWithHorizontal=i,this.isFree=!0,this.type="PointOnCircle",this.circle.subscribe(this)}moveTo(t,i){const s=Math.atan2(i-this.circle.center.y,t-this.circle.center.x);this.angleWithHorizontal=s,this.x=this.circle.center.x+this.circle.radius*Math.cos(s),this.y=this.circle.center.y+this.circle.radius*Math.sin(s),this.update()}toJSON(){return{...this.jsonOptions(),angleWithHorizontal:this.angleWithHorizontal,idCircle:this.circle.id,label:this.label}}update(){this._x=this.circle.center.x+this.circle.radius*Math.cos(this.angleWithHorizontal),this._y=this.circle.center.y+this.circle.radius*Math.sin(this.angleWithHorizontal),super.update()}get description(){return`Point sur le cercle $${this.circle.label}$`}}class cs extends y{constructor(t,{distance:i,line:s,...n}){const o=s.point2.x-s.point1.x,r=s.point2.y-s.point1.y,a=Math.sqrt(o*o+r*r),l=s.point1.x+o/a*i,c=s.point1.y+r/a*i;super(t,{x:l,y:c,...n}),this.line=s,this.distance=i,this.line.subscribe(this)}update(){const t=this.line.point2.x-this.line.point1.x,i=this.line.point2.y-this.line.point1.y,s=Math.sqrt(t*t+i*i);this._x=this.line.point1.x+t/s*this.distance,this._y=this.line.point1.y+i/s*this.distance,super.update()}}function vt(e,t){const i=e.points.map(c=>c.x),s=e.points.map(c=>c.y);let n=0;for(;n<i.length-1&&t>i[n+1];)n++;if(n===i.length-1)return Number.NaN;const o=i[n],r=i[n+1],a=s[n],l=s[n+1];return a+(l-a)*(t-o)/(r-o)}class hs extends y{constructor(t,{polyline:i,x:s,dx:n=.05,shape:o="|",abscissa:r=!1,ordinate:a=!1,...l}){const c=i.points.map(d=>d.x),h=s??c[Math.floor(c.length/2)];super(t,{x:h,y:vt(i,h),...l}),this.lesX=[...c],this.type="PointOnPolyline",this.polyline=i,this.dx=n,this.abscissa=r,this.ordinate=a}get x(){return this._x}set x(t){this.dx!==void 0?this._x=Math.round(t/this.dx)*this.dx:this._x=t,this._y=vt(this.polyline,this._x),this.update()}get y(){return vt(this.polyline,this._x)}moveTo(t){t>this.lesX[0]&&t<this.lesX[this.lesX.length-1]&&(this.x=t)}toJSON(){return{...this.jsonOptions(),x:this.x,dx:this.dx,idPolyline:this.polyline.id}}}class ds extends S{constructor(t,{circle1:i,circle2:s,shape:n,sizeInPixels:o,...r}){super(t,r),this.type="PointsIntersectionCC",this.circle1=i,this.circle2=s,this.shape=n??"x",this.sizeInPixels=o}draw(){this.point1=this.figure.create("PointIntersectionCC",{circle1:this.circle1,circle2:this.circle2,id:`${this.id}_1`,n:1,shape:this.shape,sizeInPixels:this.sizeInPixels}),this.point2=this.figure.create("PointIntersectionCC",{circle1:this.circle1,circle2:this.circle2,id:`${this.id}_2`,n:2,shape:this.shape,sizeInPixels:this.sizeInPixels})}toJSON(){return{...this.jsonOptions(),idCircle1:this.circle1.id,idCircle2:this.circle2.id,shape:this.shape,sizeInPixels:this.sizeInPixels}}}class ps extends S{constructor(t,{circle:i,line:s,shape:n="x",sizeInPixels:o,...r}){super(t,r),this.type="PointsIntersectionLC",o=o??t.options.pointSize,this.line=s,this.circle=i,this.point1=t.create("PointIntersectionLC",{circle:i,line:s,n:1,shape:n,sizeInPixels:o,...r}),this.point2=t.create("PointIntersectionLC",{circle:i,line:s,n:2,shape:n,sizeInPixels:o,...r}),this.shape=n,this.sizeInPixels=o}draw(){}toJSON(){return{...this.jsonOptions(),idCircle:this.circle.id,idLine:this.line.id,shape:this.shape,sizeInPixels:this.sizeInPixels}}}class pt extends et{constructor(t,{color:i="black",dxInPixels:s=0,dyInPixels:n=0,id:o,isChild:r,point:a,text:l,...c}){super(t,{color:i,dxInPixels:s,dyInPixels:n,id:o,isChild:r,text:l,x:a.x,y:a.y,...c}),this.type="TextByPoint",this.dxInPixels=s,this.dyInPixels=n,this.point=a,this.point.subscribe(this)}moveTo(t,i){const[s,n]=[this.x,this.y];this.dxInPixels=Math.round(this.figure.xToSx(t-this.point.x)/this.figure.options.moveTextGrid)*this.figure.options.moveTextGrid,this.dyInPixels=Math.round(this.figure.yToSy(this.point.y-i)/this.figure.options.moveTextGrid)*this.figure.options.moveTextGrid,this.point.labelDxInPixels=this.dxInPixels,this.point.labelDyInPixels=this.dyInPixels,this.x=s,this.y=n}toJSON(){return{...this.jsonOptions(),point:this.point.id,text:this.text}}update(){var t,i;((t=this.point)==null?void 0:t.x)!==void 0&&((i=this.point)==null?void 0:i.y)!==void 0&&super.moveTo(this.point.x,this.point.y),this.notify()}}class Ct extends pt{constructor(t,{color:i="black",dynamicNumber:s,isChild:n=!1,maximumFractionDigits:o=he,minimumFractionDigits:r=0,textAfter:a="",textBefore:l="",point:c,...h}){const d=l+Intl.NumberFormat("fr-FR",{maximumFractionDigits:o,minimumFractionDigits:r}).format(s.value)+a;super(t,{color:i,isChild:n,point:c,...h,text:d}),this.type="TextDynamicByPoint",this.dynamicNumber=s,this.textBefore=l,this.textAfter=a,this.minimumFractionDigits=r,this.maximumFractionDigits=o,s.subscribe(this),this.update()}toJSON(){return{...this.jsonOptions(),idDynamicNumber:this.dynamicNumber.id,maximumFractionDigits:this.maximumFractionDigits,minimumFractionDigits:this.minimumFractionDigits,textAfter:this.textAfter,textBefore:this.textBefore,point:this.point.id}}update(){this.text=this.textBefore+Intl.NumberFormat("fr-FR",{maximumFractionDigits:this.maximumFractionDigits,minimumFractionDigits:this.minimumFractionDigits}).format(this.dynamicNumber.value)+this.textAfter,super.update()}}class us extends et{constructor(t,{color:i="black",dynamicNumber:s,isChild:n=!1,maximumFractionDigits:o=he,minimumFractionDigits:r=0,textAfter:a="",textBefore:l="",x:c,y:h}){const d=l+Intl.NumberFormat("fr-FR",{maximumFractionDigits:o,minimumFractionDigits:r}).format(s.value)+a;super(t,{color:i,isChild:n,text:d,x:c,y:h}),this.type="TextDynamicByPosition",this.dynamicNumber=s,this.textBefore=l,this.textAfter=a,this.minimumFractionDigits=r,this.maximumFractionDigits=o,s.subscribe(this)}toJSON(){return{...this.jsonOptions(),idDynamicNumber:this.dynamicNumber.id,maximumFractionDigits:this.maximumFractionDigits,minimumFractionDigits:this.minimumFractionDigits,textAfter:this.textAfter,textBefore:this.textBefore,x:u(this.x),y:u(this.y)}}update(){this.text=this.textBefore+Intl.NumberFormat("fr-FR",{maximumFractionDigits:this.maximumFractionDigits,minimumFractionDigits:this.minimumFractionDigits}).format(this.dynamicNumber.value)+this.textAfter}}class ve extends S{constructor(t,{color:i,id:s,isChild:n,isDashed:o,isSelectable:r,isVisible:a=!0,label:l,labelColor:c,labelDxInPixels:h,labelDyInPixels:d,origin:p,opacity:g,thickness:m,x:f,y:v,...w}){super(t,{color:i,id:s,isChild:n,isDashed:o,isSelectable:r,thickness:m,isVisible:a,...w}),this.type="Vector",this.x=f,this.y=v,this.origin=p,this._labelColor=c??this._color,this.label=l,this.labelDxInPixels=h??0,this.labelDyInPixels=d??0}draw(){this.origin!==void 0&&(this.origin.subscribe(this),this.end=this.figure.create("Point",{isChild:!0,isFree:!1,isSelectable:!0,isVisible:this.isVisible,shape:"",x:this.origin.x+this.x,y:this.origin.y+this.y}),this.representation=this.figure.create("Segment",{color:this.color,isChild:!0,isDashed:this.isDashed,isSelectable:this.isSelectable,isVisible:this.isVisible,point1:this.origin,point2:this.end,shape:"->",thickness:this.thickness}))}toJSON(){var t;return{...this.jsonOptions(),idOrigin:(t=this.origin)==null?void 0:t.id,x:u(this.x),y:u(this.y),label:this.label,labelColor:this.labelColor}}update(){if(this.notify(),this.origin!==void 0&&this.end!==void 0&&(this.end.x=this.origin.x+this.x,this.end.y=this.origin.y+this.y),this.elementTextLabel!==void 0){const{x:t,y:i}=ct(this.origin,this.end);this.elementTextLabel.x=t,this.elementTextLabel.y=i}}get color(){return this._color}set color(t){this._color=t,this.representation!==void 0&&(this.representation.color=t)}get isDashed(){return this._isDashed}set isDashed(t){this._isDashed=t,this.representation!==void 0&&(this.representation.isDashed=t)}get isVisible(){return this._isVisible}set isVisible(t){this._isVisible=t,this.representation!==void 0&&(this.representation.isVisible=t),this.elementTextLabel!==void 0&&(this.elementTextLabel.isVisible=t)}get label(){return this._label===void 0?"":this._label}set label(t){if(this._label=t,t!==void 0)if(this.elementTextLabel===void 0){const i=this.origin.x+this.x,s=this.origin.y+this.y,{x:n,y:o}=ct(this.origin,{x:i,y:s});this.elementTextLabel=this.figure.create("TextByPosition",{color:this._labelColor??this._color,dxInPixels:this.labelDxInPixels,dyInPixels:this.labelDyInPixels,id:`${this.id}_label`,isChild:!0,isSelectable:!0,isVisible:this.isVisible,x:n,y:o,text:`$${t}$`})}else this.elementTextLabel.text=`$${t}$`,this.elementTextLabel.color=this._labelColor??"currentColor"}get labelColor(){return this._labelColor}set labelColor(t){this._labelColor=t,this.elementTextLabel!==void 0&&(this.elementTextLabel.color=t)}get notation(){return this.label!==""?this.label:this.id}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.representation!==void 0&&(this.representation.opacity=t),this.elementTextLabel!==void 0&&(this.elementTextLabel.opacity=t)}get thickness(){return this._thickness}set thickness(t){this._thickness=t,this.representation!==void 0&&(this.representation.thickness=t)}}class gs extends b{constructor(t,{point1:i,point2:s,label:n,...o}){super(t,{point1:i,point2:s,...o}),this.type="VectorByPoints",this.shape="->",this.label=n,this.labelDxInPixels=o.labelDxInPixels??0,this.labelDyInPixels=o.labelDyInPixels??0}get label(){return this._label===void 0?"":this._label}set label(t){if(this._label=t,t!==void 0)if(this.elementTextLabel===void 0){const{x:i,y:s}=ct(this.point1,this.point2);this.elementTextLabel=this.figure.create("TextByPosition",{color:this._colorLabel??this.color,dxInPixels:this.labelDxInPixels,dyInPixels:this.labelDyInPixels,id:`${this.id}_label`,isChild:!0,isSelectable:!0,x:i,y:s,text:`$${t}$`})}else this.elementTextLabel.text=`$${t}$`,this.elementTextLabel.color=this._colorLabel??"currentColor"}get x(){return this.point2.x-this.point1.x}get y(){return this.point2.y-this.point1.y}update(){if(super.update(),this.elementTextLabel!==void 0){const{x:t,y:i}=ct(this.point1,this.point2);this.elementTextLabel.x=t,this.elementTextLabel.y=i}}toJSON(){return{...this.jsonOptions(),idPoint1:this.point1.id,idPoint2:this.point2.id,label:this.label}}}class fs extends ve{constructor(t,{line:i,origin:s,...n}){const[o,r]=i.equation;super(t,{origin:s,x:o,y:r,...n}),this.type="VectorPerpendicular",this.line=i,this.origin=s,i.subscribe(this),s.subscribe(this)}toJSON(){return{...this.jsonOptions(),idLine:this.line.id,idOrigin:this.origin.id}}update(){this.notify();const[t,i]=this.line.equation;this.x=t,this.y=i,this.end!==void 0&&(this.end.x=this.origin.x+this.x,this.end.y=this.origin.y+this.y)}}function ms(){try{return window.localStorage.setItem("__test__","__test__"),window.localStorage.removeItem("__test__"),!0}catch{return!1}}function te(e,t,i){var o,r,a,l;const s=[...e.elements.values()].filter(c=>c instanceof S);e.hoverPoints.clear();const n=s.filter(c=>c.type!=="pointer"&&c.isVisible&&c.isSelectable&&e.filter(c)&&c.distancePointer(t,i)*e.pixelsPerUnit<ce).map(c=>({element:c,distance:c.distancePointer(t,i)*e.pixelsPerUnit})).sort((c,h)=>c.distance-h.distance).slice(0,2);for(const c of s)c.isHover=!1;for(const{element:c}of n)c.isHover=!0,c instanceof y&&c.isFree&&e.hoverPoints.add(c);e.hoverPoints.size>0&&typeof((r=(o=e==null?void 0:e.ui)==null?void 0:o.state)==null?void 0:r.value)=="object"&&"POINT"in((l=(a=e==null?void 0:e.ui)==null?void 0:a.state)==null?void 0:l.value)?e.divFigure.style.cursor="move":e.divFigure.style.cursor="default"}function ys(e,t){var h;const[i,s]=e.getPointerCoord(t),[n,o]=[i,s];if(n>e.xMax||n<e.xMin||o>e.yMax||o<e.yMin)return;if(e.currentState==="POINT"){const d=[...e.elements.values()].filter(p=>p.type.includes("Point"));for(const p of d)if((p.isVisible||p.isSelectable)&&I({x:n,y:o},{x:p.x,y:p.y})<e.options.distanceWithoutNewPoint)return}const r=[];(h=e.modal)==null||h.remove();const l=[...e.elements.values()].filter(d=>d instanceof S).filter(e.filter).filter(d=>d.type!=="pointer"&&d.isVisible&&d.isSelectable);for(const d of l)d.distancePointer(i,s)*e.pixelsPerUnit<ce&&d.isSelectable&&r.push(d);const c=l.filter(d=>d.isHover);if(r.length===1)X(e,{element:r[0],x:n,y:o});else if(e.currentState==="POINT_INTERSECTION"&&c.length===2&&(c[0]instanceof b||c[0]instanceof E)&&(c[1]instanceof b||c[1]instanceof E))X(e,{element:void 0,possibleElements:c,x:n,y:o});else if(r.length>1){const d=r.filter(m=>m instanceof y);if(d.length===1){X(e,{element:d[0],x:n,y:o});return}const p=new et(e,{isChild:!0,isSelectable:!1,text:"",x:i+Be,y:Math.min(s,e.yMax-2)});p.draw(),e.modal=p.div,e.modal.style.pointerEvents="auto",e.modal.style.padding="10px",e.modal.style.overflowY="auto",e.modal.style.backgroundColor=ot.titlelight,e.modal.style.color=ot.title,e.modal.style.boxShadow="0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",e.modal.style.touchAction="none",e.modal.innerText="Quel élément souhaitez-vous sélectionner ?";const g=[];for(const m of r){const f=document.createElement("div");f.innerText=m.description!==""?m.description:`${m.type} ${m.id}`,f.addEventListener("click",()=>{p.remove(),X(e,{element:m,x:n,y:o})}),f.addEventListener("mouseenter",()=>{f.style.backgroundColor=ot.lightest}),f.addEventListener("mouseleave",()=>{f.style.backgroundColor=ot.titlelight}),f.style.marginTop="5px",f.style.marginLeft="10px",f.style.userSelect="none",f.style.cursor="default",g.push(f),ut(f,{delimiters:[{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"}],errorColor:"#CC0000",preProcess:v=>v.replaceAll(" ","\\,"),strict:"warn",throwOnError:!0,trust:!1})}for(const m of g)e.modal.appendChild(m);X(e,{element:void 0,possibleElements:r,waitingWithModal:!0,x:n,y:o})}else X(e,{element:void 0,x:n,y:o})}function X(e,{element:t,possibleElements:i,waitingWithModal:s,x:n,y:o}){e.ui!==void 0&&e.ui.send({type:"clickLocation",element:t,possibleElements:i,waitingWithModal:s??!1,x:n,y:o})}const xs="/alea/assets/bisectorByPoints-8Wo1p5cX.svg",vs="/alea/assets/circle-YEHu_za-.svg",ws="/alea/assets/circleCompass-DZ5Kuejt.svg",bs="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='172'%20height='172'%20viewBox='0%200%20172%20172'%20id='svg4328'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='CercOA.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs4330'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='10.627907'%20inkscape:cx='86.094092'%20inkscape:cy='86.282276'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20units='px'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata4333'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-33.585071,-34.933635)'%3e%3cellipse%20cy='121.43363'%20cx='117.08508'%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;fill:none;stroke:%230e232e;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='path3386'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\CercOA.png'%20inkscape:export-xdpi='24.994829'%20inkscape:export-ydpi='24.994829'%20rx='67.943108'%20ry='67.00219'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20130.56652,103.50458%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.644494,5.28773%2012.462224,13.30306%20-13.303059,12.46224%205.287729,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3cpath%20id='path916'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20198.31269,101.52865%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.64449,5.28773%2012.46222,13.30306%20-13.30306,12.46224%205.28773,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3c/g%3e%3c/svg%3e",ks="/alea/assets/cursor-CzfD_iL8.svg",Cs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8%2016h8v2H8zm0-4h8v2H8zm6-10H6c-1.1%200-2%20.9-2%202v16c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6zm4%2018H6V4h7v5h5v11z'/%3e%3c/svg%3e",Ss="/alea/assets/dilate-DmWsGu-p.svg",Is="/alea/assets/disc-D00LfbgT.svg",Ns="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='172'%20height='172'%20viewBox='0%200%20172%20172'%20id='svg4328'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='CercOA.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs4330'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='10.627907'%20inkscape:cx='86.094092'%20inkscape:cy='86.282276'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20units='px'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata4333'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-33.585071,-34.933635)'%3e%3cellipse%20cy='121.43363'%20cx='117.08508'%20style='fill-opacity:0.5;color:%23000000;display:inline;overflow:visible;visibility:visible;fill:%23216D9A;stroke:%230e232e;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='path3386'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\CercOA.png'%20inkscape:export-xdpi='24.994829'%20inkscape:export-ydpi='24.994829'%20rx='67.943108'%20ry='67.00219'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20130.56652,103.50458%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.644494,5.28773%2012.462224,13.30306%20-13.303059,12.46224%205.287729,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3cpath%20id='path916'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20198.31269,101.52865%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.64449,5.28773%2012.46222,13.30306%20-13.30306,12.46224%205.28773,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3c/g%3e%3c/svg%3e",$s="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DeplacerCroix.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.1671513'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20id='rect1225-3'%20style='fill:%234d4d4d;stroke:%23333333;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20273.42827,258.65045%20-4.28859,16.54236%20-16.54238,-4.28858%20-1.81965,7.01893%2016.54237,4.28859%20-4.28859,16.54237%207.01893,1.81966%204.2886,-16.54237%2016.54415,4.28905%201.81964,-7.01894%20-16.54414,-4.28905%204.2886,-16.54237%20z'%20/%3e%3cpath%20id='rect1575'%20style='fill:%230000ff;stroke:%23000080;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none'%20d='m%20315.17268,274.25336%20-19.96665,22.76627%2015.01387,-0.10537%20v%2019.32699%20h%20-19.76077%20l%200.10773,-14.6843%20-23.27726,19.52834%2022.98522,20.47654%200.10289,-14.18562%20h%2019.84217%20v%2019.327%20l%20-15.01389,-0.10537%2019.96665,22.76629%2020.93614,-22.48065%20-14.504,-0.10067%20v%20-19.40659%20h%2019.84216%20l%200.10289,14.18562%2022.98523,-20.47655%20-23.27728,-19.52833%200.10773,14.6843%20h%20-19.7608%20V%20296.8347%20l%2014.50399,-0.10067%20z'%20/%3e%3c/g%3e%3c/svg%3e",Ps="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='50'%20height='50'%20id='svg3076'%20version='1.1'%20inkscape:version='0.48.3.1%20r9886'%20sodipodi:docname='Translation24.svg'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\Translation24.png'%20inkscape:export-xdpi='43.200001'%20inkscape:export-ydpi='43.200001'%3e%3cdefs%20id='defs3078'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.6'%20inkscape:cx='11.559973'%20inkscape:cy='41.015213'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20inkscape:window-width='1301'%20inkscape:window-height='752'%20inkscape:window-x='1771'%20inkscape:window-y='114'%20inkscape:window-maximized='0'%20/%3e%3cmetadata%20id='metadata3081'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(0,-1002.3622)'%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2021.06238,1030.9464%20-9.997195,0%200,6.6937%20-9.4258535,-10.5188%209.1402445,-9.0845%200,6.2156%209.997072,0%20z'%20id='path3084-3'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2021.177764,1023.6809%200,-9.9972%20-6.6937,0%2010.5188,-9.4259%209.0845,9.1403%20-6.2156,0%200,9.997%20z'%20id='path3084-3-2'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2029.03845,1024.2542%209.9972,0%200,-6.6937%209.4259,10.5188%20-9.1403,9.0845%200,-6.2156%20-9.997,0%20z'%20id='path3084-3-21'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2028.286522,1031.0435%200,9.9972%206.6937,0%20-10.5188,9.4259%20-9.0845,-9.1403%206.2156,0%200,-9.997%20z'%20id='path3084-3-6'%20inkscape:connector-curvature='0'%20/%3e%3c/g%3e%3c/svg%3e",Ls="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M419.1,337.45a3.94,3.94,0,0,0-6.1,0c-10.5,12.4-45,46.55-45,77.66,0,27,21.5,48.89,48,48.89h0c26.5,0,48-22,48-48.89C464,384,429.7,349.85,419.1,337.45Z'%20style='fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:32px'/%3e%3cpath%20d='M387,287.9,155.61,58.36a36,36,0,0,0-51,0l-5.15,5.15a36,36,0,0,0,0,51l52.89,52.89,57-57L56.33,263.2a28,28,0,0,0,.3,40l131.2,126a28.05,28.05,0,0,0,38.9-.1c37.8-36.6,118.3-114.5,126.7-122.9,5.8-5.8,18.2-7.1,28.7-7.1h.3A6.53,6.53,0,0,0,387,287.9Z'%20style='fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:32px'/%3e%3c/svg%3e",Es="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='48px'%20height='48px'%20id='svg2985'%20version='1.1'%20inkscape:version='0.48.3.1%20r9886'%20sodipodi:docname='RepQuadrille.svg'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\RepQuadrille.png'%20inkscape:export-xdpi='45'%20inkscape:export-ydpi='45'%3e%3cdefs%20id='defs2987'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='7'%20inkscape:cx='8.6892489'%20inkscape:cy='24'%20inkscape:current-layer='layer1'%20showgrid='true'%20inkscape:grid-bbox='true'%20inkscape:document-units='px'%20inkscape:window-width='1920'%20inkscape:window-height='1018'%20inkscape:window-x='1272'%20inkscape:window-y='-8'%20inkscape:window-maximized='1'%20/%3e%3cmetadata%20id='metadata2990'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20id='layer1'%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2019.714286,2.8571429%200,42.0000001'%20id='path3777'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2031.857143,44.428571%200,-41.5714281'%20id='path3779'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%203.0000002,27.928571%2042.0000008,0'%20id='path3777-1'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2044.571429,15.785714%20-41.5714288,0'%20id='path3779-7'%20inkscape:connector-curvature='0'%20/%3e%3cg%20id='g3769'%20transform='translate(-15.714286,-0.57142857)'%3e%3cpath%20inkscape:connector-curvature='0'%20id='path2993'%20d='m%2022.285714,45.142857%200,-41.9999999'%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20id='path3765'%20d='m%2018.571429,9.5714287%203.714285,-6.0000001%204,6.1428571'%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20sodipodi:nodetypes='ccc'%20/%3e%3c/g%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%202.1428571,39.857142%2043.4285719,0'%20id='path2995'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='M%2040.285715,36.285713%2045.285714,39.857142%2040,43.142857'%20id='path3767'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='ccc'%20/%3e%3c/g%3e%3c/svg%3e",Ms="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg7795'%20version='1.1'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20sodipodi:docname='Cacher.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='3.6342001'%20inkscape:cx='49.529469'%20inkscape:cy='89.153045'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3ccircle%20style='fill:%23333333;stroke:none;stroke-width:4.6875;stroke-linecap:round;stroke-linejoin:round'%20id='path1103'%20cx='309.63495'%20cy='310.36917'%20r='20.379314'%20/%3e%3cpath%20id='circle1221'%20style='fill:none;stroke:%23333333;stroke-width:4.68749;stroke-linecap:round;stroke-linejoin:round'%20d='m%20309.82851,284.44282%20a%2046.111419,35.599308%200%200%200%20-44.46899,26.22253%2046.111419,35.599308%200%200%200%2045.24353,29.11194%2046.111419,35.599308%200%200%200%2044.52576,-26.3562%2046.111419,35.599308%200%200%200%20-45.3003,-28.97827%20z'%20/%3e%3cpath%20style='fill:none;stroke:%23ffffff;stroke-width:4.6875;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20283.58039,349.32202%2056.23658,-75.97098'%20id='path1337'%20sodipodi:nodetypes='cc'%20/%3e%3cpath%20style='fill:none;stroke:%23333333;stroke-width:5.71875;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20277.90514,349.19304%2056.23658,-75.97098'%20id='path1728'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e",Ts="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M8%206.9834C7.44772%206.9834%207%207.43111%207%207.9834C7%208.53568%207.44772%208.9834%208%208.9834H16C16.5523%208.9834%2017%208.53568%2017%207.9834C17%207.43111%2016.5523%206.9834%2016%206.9834H8Z'%20fill='currentColor'%20/%3e%3cpath%20d='M7%2012C7%2011.4477%207.44772%2011%208%2011H16C16.5523%2011%2017%2011.4477%2017%2012C17%2012.5523%2016.5523%2013%2016%2013H8C7.44772%2013%207%2012.5523%207%2012Z'%20fill='currentColor'%20/%3e%3cpath%20d='M8%2015.017C7.44772%2015.017%207%2015.4647%207%2016.017C7%2016.5693%207.44772%2017.017%208%2017.017H16C16.5523%2017.017%2017%2016.5693%2017%2016.017C17%2015.4647%2016.5523%2015.017%2016%2015.017H8Z'%20fill='currentColor'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%206.47715%206.47715%202%2012%202C17.5228%202%2022%206.47715%2022%2012ZM20%2012C20%2016.4183%2016.4183%2020%2012%2020C7.58172%2020%204%2016.4183%204%2012C4%207.58172%207.58172%204%2012%204C16.4183%204%2020%207.58172%2020%2012Z'%20fill='currentColor'%20/%3e%3c/svg%3e",As="/alea/assets/latex-Clyn6jvs.svg",Os="/alea/assets/latexSvg-tD_CRcjT.svg",Ds="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6059'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DteAB.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6061'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6064'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-239.71429,-146.3622)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20259.24625,169.42969%20132.93607,136.4716%200,0'%20id='path5210'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DteAB.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20313.58289,199.16932%20-17.05023,1.15379%20-1.1538,-17.05024%20-7.23443,0.48955%201.15379,17.05024%20-17.05024,1.15379%200.48956,7.23443%2017.05024,-1.15379%201.15391,17.05207%207.23443,-0.48956%20-1.15392,-17.05206%2017.05025,-1.15379%20z'%20/%3e%3cpath%20id='rect1225-6'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20374.77181,262.24024%20-17.08874,0.12894%20-0.12895,-17.08875%20-7.25076,0.0547%200.12894,17.08874%20-17.08875,0.12895%200.0547,7.25077%2017.08875,-0.12894%200.12896,17.09058%207.25077,-0.0547%20-0.12896,-17.09057%2017.08875,-0.12894%20z'%20/%3e%3c/g%3e%3c/svg%3e",_s="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg8379'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DtePar.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs8381'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata8384'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-188.28571,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20209.93899,362.6242%20322.36896,252.31555'%20id='path5128-6'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DtePar.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20229.38443,387.37294%20341.8144,277.06429'%20id='path5128-6-1'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DtePar.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20265.33198,286.22826%20-2.70865,16.87321%20-16.87321,-2.70864%20-1.14928,7.15931%2016.87321,2.70864%20-2.70864,16.87322%207.15931,1.14927%202.70865,-16.87321%2016.87502,2.70894%201.14927,-7.15932%20-16.87501,-2.70893%202.70864,-16.87321%20z'%20/%3e%3c/g%3e%3c/svg%3e",Fs="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg10117'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DtePer.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs10119'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata10122'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-373.99999,-383.50506)'%3e%3crect%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;fill:none;stroke:%23000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='rect5356-5'%20width='22.627417'%20height='22.627417'%20x='651.37585'%20y='-49.423424'%20transform='matrix(0.67181757,0.74071665,-0.74071665,0.67181757,0,0)'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20396.71395,402.68345%20507.02258,515.11342'%20id='path5128-6-0'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20415.09871,538.8015%20527.52869,428.49286'%20id='path5128-6-1-6'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20420.04977,407.25998%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e",Rs="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9584'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='MarqueAngNor.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9586'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9589'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-85.428573,-169.21935)'%3e%3cpath%20sodipodi:type='arc'%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0'%20id='path6264'%20sodipodi:cx='109.4986'%20sodipodi:cy='316.49066'%20sodipodi:rx='68'%20sodipodi:ry='68'%20d='M%20138.13417,254.81405%20A%2068,68%200%200%201%20174.048,295.10436'%20sodipodi:start='5.1470592'%20sodipodi:end='5.9632507'%20sodipodi:open='true'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\MarqueAngNor.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20sodipodi:arc-type='arc'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20246.4986,270.49066%20-138,48%2061,-134.00001'%20id='path6262'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\MarqueAngNor.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%2093.803141,303.52038%2010.528829,13.46052%20-13.460534,10.52884%204.467379,5.7113%2013.460535,-10.52882%2010.52883,13.46052%205.7113,-4.46738%20-10.52882,-13.46053%2013.46198,-10.52996%20-4.4674,-5.71131%20-13.46196,10.52996%20-10.528836,-13.46054%20z'%20/%3e%3cpath%20id='rect1225-3'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20228.00548,256.64656%20-4.24057,16.55473%20-16.55475,-4.24058%20-1.79927,7.02419%2016.55473,4.24058%20-4.24057,16.55474%207.02418,1.79928%204.24058,-16.55474%2016.55652,4.24103%201.79928,-7.02419%20-16.55651,-4.24102%204.24058,-16.55476%20z'%20/%3e%3cpath%20id='rect1225-4'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20154.71904,190.33971%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29385,7.24501%2017.07519,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e",Bs="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg11955'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='MarqueSegment.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs11957'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata11960'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-202.57143,-183.50506)'%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20223.57144,228.50504%20128,89'%20id='path10603'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20289.57144,252.50504%20-17,34'%20id='path10630'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20302.07144,262.50504%20-17,34'%20id='path10630-7'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20222.84001,208.38909%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3cpath%20id='rect1225-7'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20347.88816,297.11776%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e",ee="/alea/assets/mesureAngle-DkmJa4B1.svg",Vs="/alea/assets/mesureSegment-yZ5bgyFp.svg",zs="/alea/assets/middle-B6WbvBoj.svg",js="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDguNTQyMjIxbW0iCiAgIGhlaWdodD0iNDguNTQyMjIxbW0iCiAgIHZpZXdCb3g9IjAgMCAxNzIgMTcyIgogICBpZD0ic3ZnNzc5NSIKICAgdmVyc2lvbj0iMS4xIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjItYWxwaGExIChiNmExNWJiLCAyMDIyLTAyLTIzKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ibW92ZUxhYmVsLnN2ZyIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczc3OTciIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjMuNTE2NjMwNiIKICAgICBpbmtzY2FwZTpjeD0iMzkuNTI2NDcyIgogICAgIGlua3NjYXBlOmN5PSI5Ni4zOTkwOTMiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgZml0LW1hcmdpbi10b3A9IjAiCiAgICAgZml0LW1hcmdpbi1sZWZ0PSIwIgogICAgIGZpdC1tYXJnaW4tcmlnaHQ9IjAiCiAgICAgZml0LW1hcmdpbi1ib3R0b209IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxNDQwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjkwMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIwIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBpZD0iZ3JpZDY4NjgiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNzgwMCI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iQ2FscXVlIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjIuNTcxNDMsLTIzMi4wNzY0OCkiPgogICAgPHRleHQKICAgICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgICBzdHlsZT0iZm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2xpbmUtaGVpZ2h0OjAlO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojNGQ0ZDRkO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIgogICAgICAgeD0iMjU5LjM1NzUxIgogICAgICAgeT0iMzEzLjg1MDgiCiAgICAgICBpZD0idGV4dDM2NzMiCiAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9IkM6XFVzZXJzXFNlYlxEb3dubG9hZHNcbWF0aHNcTWF0aGdyYXBoMzJcSWNvbmVzXHBuZ1w0OFxOb21tZXIucG5nIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjI1LjExNjI4IgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9IjI1LjExNjI4Ij48dHNwYW4KICAgICAgICAgc29kaXBvZGk6cm9sZT0ibGluZSIKICAgICAgICAgaWQ9InRzcGFuMzY3NSIKICAgICAgICAgeD0iMjU5LjM1NzUxIgogICAgICAgICB5PSIzMTMuODUwOCIKICAgICAgICAgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjk3Ljg5MnB4O2xpbmUtaGVpZ2h0OjEuMjU7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidTYW5zIEJvbGQnO2ZpbGw6IzRkNGQ0ZDtmaWxsLW9wYWNpdHk6MSI+QTwvdHNwYW4+PC90ZXh0PgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MTIyNSIKICAgICAgIHN0eWxlPSJmaWxsOiM0ZDRkNGQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MDAwMDA7c3Ryb2tlLXdpZHRoOjAuOTM3NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDM3MS45NDQ3MiwzMzIuMTYxMSAtMTIuMDgzOTEsMTIuMDgzOTEgLTEyLjA4MzkyLC0xMi4wODM5MSAtNS4xMjcyMSw1LjEyNzIxIDEyLjA4MzkxLDEyLjA4MzkxIC0xMi4wODM5MSwxMi4wODM5MiA1LjEyNzIxLDUuMTI3MjEgMTIuMDgzOTIsLTEyLjA4MzkxIDEyLjA4NTIxLDEyLjA4NTIxIDUuMTI3MjEsLTUuMTI3MjIgLTEyLjA4NTIxLC0xMi4wODUyIDEyLjA4MzkyLC0xMi4wODM5MiB6IiAvPgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MTU3NSIKICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwZmY7c3Ryb2tlOiMwMDAwODA7c3Ryb2tlLXdpZHRoOjIuODEyNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUiCiAgICAgICBkPSJtIDI5My45MTY5NiwzMDMuMDcxNzMgLTE5Ljk2NjY1LDIyLjc2NjI3IDE1LjAxMzg3LC0wLjEwNTM3IHYgMTkuMzI2OTkgaCAtMTkuNzYwNzcgbCAwLjEwNzczLC0xNC42ODQzIC0yMy4yNzcyNiwxOS41MjgzNCAyMi45ODUyMiwyMC40NzY1NCAwLjEwMjg5LC0xNC4xODU2MiBoIDE5Ljg0MjE3IHYgMTkuMzI3IGwgLTE1LjAxMzg5LC0wLjEwNTM3IDE5Ljk2NjY1LDIyLjc2NjI5IDIwLjkzNjE0LC0yMi40ODA2NSAtMTQuNTA0LC0wLjEwMDY3IHYgLTE5LjQwNjU5IGggMTkuODQyMTYgbCAwLjEwMjg5LDE0LjE4NTYyIDIyLjk4NTIzLC0yMC40NzY1NSAtMjMuMjc3MjgsLTE5LjUyODMzIDAuMTA3NzMsMTQuNjg0MyBoIC0xOS43NjA4IHYgLTE5LjQwNjU2IGwgMTQuNTAzOTksLTAuMTAwNjcgeiIgLz4KICA8L2c+Cjwvc3ZnPgo=",Us="/alea/assets/namePoint-BsI7qgJ-.svg",Gs="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='currentColor'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.956%206h.05a2.99%202.99%200%200%201%202.117.879%203.003%203.003%200%200%201%200%204.242%202.99%202.99%200%200%201-2.117.879h-1.995v-1h1.995a2.002%202.002%200%200%200%200-4h-.914l-.123-.857a2.49%202.49%200%200%200-2.126-2.122A2.478%202.478%200%200%200%206.23%205.5l-.333.762-.809-.189A2.49%202.49%200%200%200%204.523%206c-.662%200-1.297.263-1.764.732A2.503%202.503%200%200%200%204.523%2011h2.494v1H4.523a3.486%203.486%200%200%201-2.628-1.16%203.502%203.502%200%200%201-.4-4.137A3.497%203.497%200%200%201%203.853%205.06c.486-.09.987-.077%201.468.041a3.486%203.486%200%200%201%203.657-2.06A3.479%203.479%200%200%201%2011.956%206zm-1.663%203.853L8.979%208.54v5.436h-.994v-5.4L6.707%209.854%206%209.146%208.146%207h.708L11%209.146l-.707.707z'/%3e%3c/svg%3e",Hs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-circle-ellipsis-icon%20lucide-circle-ellipsis'%3e%3ccircle%20cx='12'%20cy='12'%20r='10'/%3e%3cpath%20d='M17%2012h.01'/%3e%3cpath%20d='M12%2012h.01'/%3e%3cpath%20d='M7%2012h.01'/%3e%3c/svg%3e",Ws="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204H5v16h5V4zm9%200h-5v16h5V4z'%20fill='currentColor'/%3e%3c/svg%3e",Ys="/alea/assets/perpendicularBisector-yc3CvNwU.svg",Zs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M133,440a35.37,35.37,0,0,1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37,7.46-27.53,19.46-34.33a35.13,35.13,0,0,1,35.77.45L399.12,225.48a36,36,0,0,1,0,61L151.23,434.88A35.5,35.5,0,0,1,133,440Z'/%3e%3c/svg%3e",qs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M112,64a16,16,0,0,1,16,16V216.43L360.77,77.11a35.13,35.13,0,0,1,35.77-.44c12,6.8,19.46,20,19.46,34.33V401c0,14.37-7.46,27.53-19.46,34.33a35.14,35.14,0,0,1-35.77-.45L128,295.57V432a16,16,0,0,1-32,0V80A16,16,0,0,1,112,64Z'/%3e%3c/svg%3e",Xs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M400,64a16,16,0,0,0-16,16V216.43L151.23,77.11a35.13,35.13,0,0,0-35.77-.44C103.46,83.47,96,96.63,96,111V401c0,14.37,7.46,27.53,19.46,34.33a35.14,35.14,0,0,0,35.77-.45L384,295.57V432a16,16,0,0,0,32,0V80A16,16,0,0,0,400,64Z'/%3e%3c/svg%3e",Js="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9132'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLibre.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9134'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9137'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-396.85714,-289.21935)'%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20494.9404,357.8194%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e",Ks="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6777'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Int.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6779'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6782'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-53.999999,-106.3622)'%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2093.999977,241.36218%20c%2032.000003,-89%20108.000003,-96%20108.000003,-96'%20id='path6486'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\Int.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2078.999977,140.36218%20c%2086.000003,17%20126.000003,101%20126.000003,101'%20id='path6488'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\Int.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20143.4937,149.03765%20-2.57947,16.89344%20-16.89344,-2.57946%20-1.09447,7.16789%2016.89344,2.57947%20-2.57946,16.89344%207.16789,1.09447%202.57948,-16.89344%2016.89525,2.57974%201.09446,-7.1679%20-16.89525,-2.57974%202.57947,-16.89344%20z'%20/%3e%3c/g%3e%3c/svg%3e",Qs="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg10307'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLie.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs10309'%3e%3cmarker%20inkscape:stockid='TriangleOutM'%20orient='auto'%20refY='0'%20refX='0'%20id='TriangleOutM-49'%20style='overflow:visible'%3e%3cpath%20inkscape:connector-curvature='0'%20id='path4275-6'%20d='m%205.77,0%20-8.65,5%200,-10%208.65,5%20z'%20style='fill-rule:evenodd;stroke:%23000000;stroke-width:1pt;marker-start:none'%20transform='scale(0.4,0.4)'%20/%3e%3c/marker%3e%3c/defs%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata10312'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-76.857139,-83.505057)'%3e%3cpath%20style='fill:none;stroke:%230084c8;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2097.85712,214.50507%20138,-73'%20id='path4062'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\PointLie.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cg%20id='path4124'%3e%3cpath%20style='color:%23000000;fill:%23000000;-inkscape-stroke:none'%20d='m%20113.33398,103.50586%20v%206%20c%2020.12366,0%2029.8666,9.66997%2035.22852,19.55273%205.36192,9.88276%205.82031,19.82227%205.82031,19.82227%20l%205.99414,-0.25586%20c%200,0%20-0.44223,-11.18683%20-6.54101,-22.42773%20-6.09879,-11.2409%20-18.3783,-22.69141%20-40.50196,-22.69141%20z'%20id='path846'%20/%3e%3cg%20id='g836'%3e%3cg%20id='path838'%3e%3cpath%20style='color:%23000000;fill:%23000000;fill-rule:evenodd;stroke-width:2.4pt;-inkscape-stroke:none'%20d='m%20157.96842,162.58791%20-12.87175,-20.23105%2023.9783,-1.02036%20z'%20id='path842'%20/%3e%3cpath%20style='color:%23000000;fill:%23000000;fill-rule:evenodd;-inkscape-stroke:none'%20d='m%20171.77734,139.61914%20-29.51953,1.25781%2015.84571,24.9043%201.2832,-2.45313%20z%20m%20-5.40625,3.43359%20-8.53711,16.3418%20-9.89843,-15.55664%20z'%20id='path844'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20165.4772,160.34679%20-5.65672,16.12585%20-16.12586,-5.65672%20-2.40016,6.84221%2016.12586,5.65673%20-5.65672,16.12586%206.84221,2.40015%205.65673,-16.12586%2016.12759,5.65734%202.40015,-6.84222%20-16.12759,-5.65733%205.65673,-16.12587%20z'%20/%3e%3c/g%3e%3c/svg%3e",tn="/alea/assets/polygon-CYz4PKlW.svg",en="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg5485'%20version='1.1'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20sodipodi:docname='ray.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs5487'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='1.843718'%20inkscape:cx='126.91746'%20inkscape:cy='180.61331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20/%3e%3cmetadata%20id='metadata5490'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(23.142857,-109.21934)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%2010.531241,246.13103%20122.96121,135.82237'%20id='path5128'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\DemiDt.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%207.0994717,225.37249%20-0.6925638,17.07519%20-17.0751979,-0.69256%20-0.293855,7.24501%2017.0751903,0.69257%20-0.692557,17.07519%207.2450127,0.29386%200.692571,-17.0752%2017.077028,0.69264%200.293848,-7.24502%20-17.07702,-0.69263%200.692564,-17.07521%20z'%20/%3e%3cpath%20id='path1390'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%2082.099475,150.37249%20-0.692563,17.07519%20-17.075199,-0.69256%20-0.293855,7.24501%2017.075191,0.69257%20-0.692557,17.07519%207.245013,0.29386%200.692571,-17.0752%2017.077024,0.69264%200.29385,-7.24502%20-17.077018,-0.69263%200.692564,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e",sn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%20512%20512'%20version='1.1'%20id='svg11'%20sodipodi:docname='redo.svg'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs15'%20/%3e%3csodipodi:namedview%20id='namedview13'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='0.4609375'%20inkscape:cx='-156.20339'%20inkscape:cy='256'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20d='m%20289.42871,234.78304%20h%20168.45736%20c%205.5336,0%2010.06934,-4.12064%2010.06934,-9.2057%20V%2072.324346%20c%200,-5.08505%20-4.53574,-9.2057%20-10.06934,-9.2057%20h%20-40.36809%20c%20-5.53359,0%20-10.06933,4.12065%20-10.06933,9.2057%20V%20132.11756%20C%20368.98558,93.190596%20313.10527,68.817416%20250.96563,69.255776%20135.84856,70.044836%2043.773036,154.64961%2044.045186,259.50693%20c%200.18143,104.5943%2093.436244,189.37442%20208.462594,189.37442%2053.88459,0%20102.9613,-18.58675%20139.97293,-49.18475%204.2636,-3.50693%204.44503,-9.64406%200.36286,-13.32634%20l%20-28.57516,-26.03899%20c%20-3.71931,-3.41926%20-9.7972,-3.5946%20-13.78865,-0.43836%20-26.03514,21.12927%20-60.41605,33.84191%20-97.97198,33.84191%20-81.73402,0%20-147.95582,-60.23159%20-147.95582,-134.75393%200,-74.43467%2066.13108,-134.75393%20147.95582,-134.75393%2049.16742,0%2092.71052,21.83066%20119.5621,55.32188%20h%20-82.64117%20c%20-5.53361,0%20-10.06935,4.12065%20-10.06935,9.2057%20v%2036.73513%20c%200,5.08505%204.53574,9.2057%2010.06935,9.2057%20z'%20id='path9'%20style='stroke-width:0.891811'%20/%3e%3c/svg%3e",nn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6604'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='SymCentrale.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6606'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6609'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-242.57143,-206.3622)'%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20262.79014,214.45852%200,44.10483%2073.98869,0%20z'%20id='path3045-4-7'%20inkscape:connector-curvature='0'%20inkscape:transform-center-x='28.537028'%20inkscape:transform-center-y='-56.288402'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\SymCentrale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%230e232e;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20394.33944,369.23811%20-0.27728,-44.10402%20-73.98735,0.42829%20z'%20id='path3045-4-7-1'%20inkscape:connector-curvature='0'%20inkscape:transform-center-x='-28.885614'%20inkscape:transform-center-y='55.147417'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\SymCentrale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.937498;stroke-linecap:round;stroke-linejoin:round'%20d='m%20336.51961,280.10863%20-8.2544,8.61959%20-8.61959,-8.2544%20-3.50236,3.6573%208.6196,8.2544%20-8.25439,8.61959%203.65729,3.50234%208.25441,-8.61958%208.62052,8.25528%203.50235,-3.6573%20-8.62053,-8.25528%208.25441,-8.6196%20z'%20/%3e%3c/g%3e%3c/svg%3e",on="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6028'%20version='1.1'%20inkscape:version='0.91%20r13725'%20sodipodi:docname='SymAxiale.svg'%3e%3cdefs%20id='defs6030'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1920'%20inkscape:window-height='1017'%20inkscape:window-x='1272'%20inkscape:window-y='-8'%20inkscape:window-maximized='1'%20/%3e%3cmetadata%20id='metadata6033'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-93.999999,-123.50506)'%3e%3crect%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;opacity:0.1;fill:none;stroke:%23000000;stroke-width:0.81904763;stroke-miterlimit:4;stroke-dasharray:none;marker:none;enable-background:accumulate'%20id='rect5045-5-5-7'%20width='171.18095'%20height='171.18095'%20x='94.409523'%20y='123.91458'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20130.46906,156.13811%2013.33444,38.77103%2062.4119,-21.4652%20z'%20id='path3045-8'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%230e232e;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20170.47238,272.4512%20-13.33444,-38.77103%2062.4119,-21.4652%20z'%20id='path3045-8-4'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:6;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:24,%2012,%206,%2012;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20117.84631,225.5151%20251.65365,179.49502'%20id='path3961'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\24\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3c/g%3e%3c/svg%3e",rn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='600'%20height='600'%20style='border-radius:300px'%20version='1.1'%20id='svg24'%20sodipodi:docname='corbeille.svg'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs28'%20/%3e%3csodipodi:namedview%20id='namedview26'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20showgrid='false'%20inkscape:zoom='1.455'%20inkscape:cx='299.65636'%20inkscape:cy='299.65636'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:current-layer='svg24'%20/%3e%3c!--%20Created%20with%20SVG-edit%20-%20http://svg-edit.googlecode.com/%20--%3e%3cline%20stroke-linecap='round'%20x1='180'%20y1='159.25'%20x2='420'%20y2='159.25'%20style='stroke:%23333333;stroke-width:30;fill:%23e2e3db'%20id='line7'%20/%3e%3crect%20x='250'%20y='129.25'%20rx='20'%20ry='20'%20width='100'%20height='30'%20style='stroke:%23333333;stroke-width:10;fill:%23e2e3db'%20id='rect9'%20/%3e%3cline%20stroke-linecap='round'%20x1='189'%20y1='198.75'%20x2='200'%20y2='466.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line11'%20/%3e%3cline%20id='bottom'%20stroke-linecap='round'%20x1='411'%20y1='198.75'%20x2='400'%20y2='466.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20/%3e%3cline%20stroke-linecap='square'%20x1='189'%20y1='198.75'%20x2='411'%20y2='198.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line14'%20/%3e%3cline%20stroke-linecap='round'%20x1='203'%20y1='470.75'%20x2='397'%20y2='470.75'%20style='stroke:%23333333;stroke-width:30;fill:%23e2e3db'%20id='line16'%20/%3e%3cline%20stroke-linecap='round'%20x1='260'%20y1='198.75'%20x2='265'%20y2='470.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line18'%20/%3e%3cline%20stroke-linecap='round'%20x1='340'%20y1='198.75'%20x2='335'%20y2='470.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line20'%20/%3e%3c/svg%3e%3c!----%3e",an="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20version='1.1'%20id='mdi-restart'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4C14.1,4%2016.1,4.8%2017.6,6.3C20.7,9.4%2020.7,14.5%2017.6,17.6C15.8,19.5%2013.3,20.2%2010.9,19.9L11.4,17.9C13.1,18.1%2014.9,17.5%2016.2,16.2C18.5,13.9%2018.5,10.1%2016.2,7.7C15.1,6.6%2013.5,6%2012,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15%203.3,11%205.1,7.9L6.6,9.4C5.5,11.6%205.9,14.4%207.8,16.2C8.3,16.7%208.9,17.1%209.6,17.4L9,19.4C8,19%207.1,18.4%206.3,17.6Z'%20/%3e%3c/svg%3e",ln="/alea/assets/rotate-C9bBnx5O.svg",cn="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='currentColor'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.957%206h.05a2.99%202.99%200%200%201%202.116.879%203.003%203.003%200%200%201%200%204.242%202.99%202.99%200%200%201-2.117.879v-1a2.002%202.002%200%200%200%200-4h-.914l-.123-.857a2.49%202.49%200%200%200-2.126-2.122A2.478%202.478%200%200%200%206.231%205.5l-.333.762-.809-.189A2.49%202.49%200%200%200%204.523%206c-.662%200-1.297.263-1.764.732A2.503%202.503%200%200%200%204.523%2011h.498v1h-.498a3.486%203.486%200%200%201-2.628-1.16%203.502%203.502%200%200%201%201.958-5.78%203.462%203.462%200%200%201%201.468.04%203.486%203.486%200%200%201%203.657-2.06A3.479%203.479%200%200%201%2011.957%206zm-5.25%205.121l1.314%201.314V7h.994v5.4l1.278-1.279.707.707-2.146%202.147h-.708L6%2011.829l.707-.708z'/%3e%3c/svg%3e",hn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg11267'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Segment.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs11269'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata11272'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(17.428573,-43.505061)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%209.4170928,107.94873%20C%20133.86789,156.73909%20133.86789,156.73909%20133.86789,156.73909'%20id='path5172'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\Segment.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='M%2019.68314,89.52305%207.59923,101.60696%20-4.48469,89.52305%20-9.6119,94.65026%202.47201,106.73417%20-9.6119,118.81809%20l%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20id='rect1225-1'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20146.33084,139.67403%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e",dn="/alea/assets/setOptions-CLxe87k8.svg",pn="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon'%20viewBox='0%200%201024%201024'%3e%3cpath%20d='M324%20666a48%2048%200%201%200%2096%200%2048%2048%200%201%200-96%200zm616.7-309.6L667.6%2083.2C655.2%2070.9%20638.7%2064%20621.1%2064s-34.1%206.8-46.5%2019.2L83.3%20574.5a65.85%2065.85%200%200%200%200%2093.1l273.2%20273.2c12.3%2012.3%2028.9%2019.2%2046.5%2019.2s34.1-6.8%2046.5-19.2l491.3-491.3c25.6-25.7%2025.6-67.5-.1-93.1zM403%20880.1L143.9%20621l477.2-477.2%20259%20259.2L403%20880.1zM152.8%20373.7a7.9%207.9%200%200%200%2011.2%200L373.7%20164a7.9%207.9%200%200%200%200-11.2l-38.4-38.4a7.9%207.9%200%200%200-11.2%200L114.3%20323.9a7.9%207.9%200%200%200%200%2011.2l38.5%2038.6zm718.6%20276.6a7.9%207.9%200%200%200-11.2%200L650.3%20860.1a7.9%207.9%200%200%200%200%2011.2l38.4%2038.4a7.9%207.9%200%200%200%2011.2%200L909.7%20700a7.9%207.9%200%200%200%200-11.2l-38.3-38.5z'/%3e%3c/svg%3e",un="/alea/assets/translation-g2NwBCdr.svg",gn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%20512%20512'%20version='1.1'%20id='svg11'%20sodipodi:docname='undo.svg'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs15'%20/%3e%3csodipodi:namedview%20id='namedview13'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='0.4609375'%20inkscape:cx='-156.20339'%20inkscape:cy='256'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20d='M%20222.57129,234.78304%20H%2054.113924%20c%20-5.5336,0%20-10.06934,-4.12064%20-10.06934,-9.2057%20V%2072.324346%20c%200,-5.08505%204.53574,-9.2057%2010.06934,-9.2057%20h%2040.36809%20c%205.533596,0%2010.069336,4.12065%2010.069336,9.2057%20v%2059.793214%20c%2038.46307,-38.926964%2094.34338,-63.300144%20156.48302,-62.861784%20115.11707,0.78906%20207.19259,85.393834%20206.92044,190.251154%20-0.18143,104.5943%20-93.43624,189.37442%20-208.46259,189.37442%20-53.88459,0%20-102.9613,-18.58675%20-139.97293,-49.18475%20-4.2636,-3.50693%20-4.44503,-9.64406%20-0.36286,-13.32634%20l%2028.57516,-26.03899%20c%203.71931,-3.41926%209.7972,-3.5946%2013.78865,-0.43836%2026.03514,21.12927%2060.41605,33.84191%2097.97198,33.84191%2081.73402,0%20147.95582,-60.23159%20147.95582,-134.75393%200,-74.43467%20-66.13108,-134.75393%20-147.95582,-134.75393%20-49.16742,0%20-92.71052,21.83066%20-119.5621,55.32188%20h%2082.64117%20c%205.53361,0%2010.06935,4.12065%2010.06935,9.2057%20v%2036.73513%20c%200,5.08505%20-4.53574,9.2057%20-10.06935,9.2057%20z'%20id='path9'%20style='stroke-width:0.891811'%20/%3e%3c/svg%3e",fn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg12430'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Vecteur.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs12432'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata12435'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-114,-203.50506)'%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20147.91469,269.51062%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20id='rect1225-6'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20277.66556,270.01925%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20style='fill:%230e232e;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-mid:none;marker-end:none'%20d='m%20137.2703,286.72174%20122.66222,0.61695'%20id='path3926'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='cc'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\Vecteur.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20230.52355,266.89496%2031.16924,20.38028%20-30.82986,20.71317'%20id='path6358'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='ccc'%20inkscape:export-filename='C:\\Users\\Seb\\Downloads\\maths\\Mathgraph32\\Icones\\png\\48\\Vecteur.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3c/g%3e%3c/svg%3e",mn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5%2014.5C8.94772%2014.5%208.5%2014.0523%208.5%2013.5V11.5H6.5C5.94772%2011.5%205.5%2011.0523%205.5%2010.5V9.5C5.5%208.94772%205.94772%208.5%206.5%208.5H8.5V6.5C8.5%205.94772%208.94772%205.5%209.5%205.5H10.5C11.0523%205.5%2011.5%205.94772%2011.5%206.5V8.5H13.5C14.0523%208.5%2014.5%208.94772%2014.5%209.5V10.5C14.5%2011.0523%2014.0523%2011.5%2013.5%2011.5H11.5V13.5C11.5%2014.0523%2011.0523%2014.5%2010.5%2014.5H9.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.5%2010C0.5%204.75329%204.75329%200.5%2010%200.5C15.2467%200.5%2019.5%204.75329%2019.5%2010C19.5%2012.082%2018.8302%2014.0076%2017.6944%2015.5731L22.4142%2020.2929C22.8047%2020.6834%2022.8047%2021.3166%2022.4142%2021.7071L21.7071%2022.4142C21.3166%2022.8047%2020.6834%2022.8047%2020.2929%2022.4142L15.5731%2017.6944C14.0076%2018.8302%2012.082%2019.5%2010%2019.5C4.75329%2019.5%200.5%2015.2467%200.5%2010ZM10%203.5C6.41015%203.5%203.5%206.41015%203.5%2010C3.5%2013.5899%206.41015%2016.5%2010%2016.5C13.5899%2016.5%2016.5%2013.5899%2016.5%2010C16.5%206.41015%2013.5899%203.5%2010%203.5Z'%20fill='%23000000'/%3e%3c/svg%3e",yn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.5%208.5C5.94772%208.5%205.5%208.94771%205.5%209.5V10.5C5.5%2011.0523%205.94772%2011.5%206.5%2011.5H13.5C14.0523%2011.5%2014.5%2011.0523%2014.5%2010.5V9.5C14.5%208.94772%2014.0523%208.5%2013.5%208.5H6.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.5%2010C0.5%204.75329%204.75329%200.5%2010%200.5C15.2467%200.5%2019.5%204.75329%2019.5%2010C19.5%2012.082%2018.8302%2014.0076%2017.6944%2015.5731L22.4142%2020.2929C22.8047%2020.6834%2022.8047%2021.3166%2022.4142%2021.7071L21.7071%2022.4142C21.3166%2022.8047%2020.6834%2022.8047%2020.2929%2022.4142L15.5731%2017.6944C14.0076%2018.8302%2012.082%2019.5%2010%2019.5C4.75329%2019.5%200.5%2015.2467%200.5%2010ZM10%203.5C6.41015%203.5%203.5%206.41015%203.5%2010C3.5%2013.5899%206.41015%2016.5%2010%2016.5C13.5899%2016.5%2016.5%2013.5899%2016.5%2010C16.5%206.41015%2013.5899%203.5%2010%203.5Z'%20fill='%23000000'/%3e%3c/svg%3e";function we(e){e.style.width="40px",e.style.height="40px",e.style.margin="4px",e.style.cursor="pointer",e.style.borderRadius="5px",e.style.border="1px solid black",e.style.backgroundColor="white",e.style.boxShadow="0px 0px 2px 0px rgba(0,0,0,0.75)",e.style.padding="2px",e.onmouseover=()=>{e.style.boxShadow="0px 0px 5px 0px rgba(0,0,0,0.75)"},e.onmouseout=()=>{e.style.boxShadow="0px 0px 2px 0px rgba(0,0,0,0.75)"}}const ie=new Map([["BISECTOR_BY_POINTS",{tooltip:"Bissectrice",url:xs}],["CIRCLE_CENTER_POINT",{tooltip:"Cercle centre-point",url:bs}],["CIRCLE_COMPASS",{tooltip:"Cercle par report de longueur",url:ws}],["CIRCLE_RADIUS",{tooltip:"Cercle centre-rayon",url:vs}],["CURSOR",{tooltip:"Curseur",url:ks}],["DESCRIPTION",{tooltip:"Afficher le programme de construction",url:Cs}],["DILATE",{tooltip:"Homothétie",url:Ss}],["DISC_CENTER_POINT",{tooltip:"Disque centre-point",url:Ns}],["DISC_RADIUS",{tooltip:"Disque centre-rayon",url:Is}],["DOWNLOAD_LATEX_SVG",{tooltip:"Exporter la figure au format LaTeX ou SVG",url:Os}],["DRAG_ALL",{tooltip:"Déplacer la figure",url:Ps}],["DRAG",{tooltip:"Déplacer les points",url:$s}],["FILL",{tooltip:"Remplir / Vider",url:Ls}],["GRID",{tooltip:"Afficher le repère",url:Es}],["HIDE",{tooltip:"Masquer un élément",url:Ms}],["INFORMATIONS",{tooltip:"Obtenir les informations sur l'élément",url:Ts}],["LATEX",{tooltip:"Export LaTeX",url:As}],["LINE_PARALLEL",{tooltip:"Droite parallèle",url:_s}],["LINE_PERPENDICULAR",{tooltip:"Droite perpendiculaire",url:Fs}],["LINE",{tooltip:"Droite",url:Ds}],["MARK_ANGLE",{tooltip:"Coder un angle",url:Rs}],["MARK_BETWEEN_POINTS",{tooltip:"Coder un segment",url:Bs}],["MESURE_ANGLE",{tooltip:"Mesurer un angle",url:ee}],["MESURE_SEGMENT",{tooltip:"Mesurer une distance",url:Vs}],["MESURE_ANGLE",{tooltip:"Mesurer un angle",url:ee}],["MIDDLE",{tooltip:"Milieu",url:zs}],["MOVE_LABEL",{tooltip:"Déplacer le nom d'un point",url:js}],["NAME_POINT",{tooltip:"Renommer un point",url:Us}],["OPEN",{tooltip:"Charger un fichier",url:Gs}],["OPTIONS",{tooltip:"Options",url:Hs}],["PAUSE",{tooltip:"Pause",url:Ws}],["PERPENDICULAR_BISECTOR",{tooltip:"Médiatrice",url:Ys}],["PLAY_SKIP_BACK",{tooltip:"Étape précédente",url:qs}],["PLAY_SKIP_FORWARD",{tooltip:"Étape suivante",url:Xs}],["PLAY",{tooltip:"Lecture",url:Zs}],["POINT_INTERSECTION",{tooltip:"Point à l'intersection",url:Ks}],["POINT_ON",{tooltip:"Point sur",url:Qs}],["POINT",{tooltip:"Point",url:Js}],["POLYGON",{tooltip:"Polygone",url:tn}],["RAY",{tooltip:"Demi-droite",url:en}],["REDO",{tooltip:"Rétablir",url:sn}],["REFLECTION_OVER_LINE",{tooltip:"Symétrie axiale",url:on}],["REFLECTION",{tooltip:"Symétrie centrale",url:nn}],["REMOVE",{tooltip:"Supprimer",url:rn}],["RESTART",{tooltip:"Recommencer",url:an}],["ROTATE",{tooltip:"Rotation",url:ln}],["SAVE",{tooltip:"Sauvegarder",url:cn}],["SEGMENT",{tooltip:"Segment",url:hn}],["SET_OPTIONS",{tooltip:"Modifier le style",url:dn}],["SHAKE",{tooltip:"Secouer la figure",url:pn}],["TRANSLATION",{tooltip:"Translation",url:un}],["UNDO",{tooltip:"Annuler la dernière action",url:gn}],["VECTOR",{tooltip:"Vecteur",url:fn}],["ZOOM_IN",{tooltip:"Zoom avant",url:mn}],["ZOOM_OUT",{tooltip:"Zoom arrière",url:yn}]]);function xn(e,t){const i=[],s=e.split(" ");for(const n of s){const o=n.toUpperCase();if(!ie.has(o)){console.error(`Le bouton ${o} n'existe pas`);continue}const r=document.createElement("img"),a=ie.get(o);if(a==null){console.error(`L'icône pour le bouton ${o} n'existe pas`);continue}r.src=a.url,r.title=a.tooltip,we(r),r.onclick=()=>{var l;(l=t.ui)==null||l.send({type:o})},t.buttons.set(o,r),i.push(r)}return i}function vn({action:e,figure:t,tooltip:i="",url:s,text:n,container:o,record:r=!0,userMessage:a=""}){if(s==null&&n==null)throw new Error("addCustomButton doit spécifier une url ou un texte");let l;if(s!=null){l=document.createElement("img");const c=l;c.src=s}else{l=document.createElement("div");const c=l;c.textContent=n,l.style.textAlign="center",l.style.lineHeight="40px",l.style.fontSize="20px",l.style.letterSpacing="1px",l.style.fontFamily="Arial"}if(l.title=i,we(l),o==null?t.divButtons.appendChild(l):o.appendChild(l),l.onclick=()=>{e(),t.userMessage=a},r){const c=window.crypto.randomUUID!==void 0?window.crypto.randomUUID():wn();t.buttons.set(c,l),l.addEventListener("click",()=>{for(const h of t.buttons.values())h.style.backgroundColor="white";l.style.backgroundColor=Q})}return l}let se=0;function wn(){return se++,se}function bn(e){const t=document.createElement("div");t.style.marginTop="30px",t.style.fontWeight="bold";const i=document.createElement("div");i.style.marginBottom="10px",i.textContent=`Épaisseur : ${e.options.thickness}`;const s=document.createElement("input");return s.type="range",s.value=`${e.options.thickness}`,s.min="1",s.max="4",t.appendChild(i),t.appendChild(s),s.addEventListener("input",()=>{e.options.thickness=Number(s.value),i.textContent=`Épaisseur : ${e.options.thickness}`}),t}function kn({figure:e,container:t}){const i=[];for(const n of He){const o=e.addCustomButton({record:!1,text:n,action:()=>{e.options.mark=n},container:t});n===e.options.mark&&(o.style.backgroundColor=Q),i.push(o),o.addEventListener("click",s)}function s(){for(const n of i)n.style.backgroundColor="white";this.style.backgroundColor=Q}}function Cn(e,{nbCols:t,position:i="left",showStyles:s,tools:n=We}){if(e.divButtons.innerHTML="",e.divButtons.style.zIndex="100",i==="none"){e.divButtons.style.display="none";return}if(i==="left"&&(s===void 0&&(s=!0),t===void 0&&(t=4),e.divButtons.style.display="grid",window.matchMedia("(min-width: 768px)").matches?e.container.style.gridTemplateColumns="230px 1fr":e.container.style.gridTemplateColumns="50px 1fr",e.container.style.display="grid",window.matchMedia("(min-width: 768px)").matches?e.divButtons.style.gridTemplateColumns=`repeat(${t}, auto)`:e.divButtons.style.gridTemplateColumns="auto",e.divButtons.style.gridAutoRows="min-content",e.divButtons.style.justifyContent="start"),i==="top"&&(s===void 0&&(s=!1),t===void 0&&(t=8),e.container.style.display="block",e.divButtons.style.display="grid",e.divButtons.style.gridTemplateColumns=`repeat(${t}, auto)`,e.divButtons.style.gridAutoRows="min-content",n.length<6?e.divButtons.style.justifyContent="start":e.divButtons.style.justifyContent="center"),s===!1){const r=n.indexOf("SET_OPTIONS");r>-1&&n.splice(r,1)}const o=e.addButtons(n.join(" "));e.divButtons.append(...o);for(const r of o)e.divButtons.appendChild(r);if(s===!0){const r=document.createElement("div");r.style.gridColumn="1 / -1",e.divButtons.appendChild(r),r.appendChild(e.addColorPalette(["black","blue","red"])),r.appendChild(e.addColorPalette(["green","orange","lightgray"])),r.appendChild(e.addDashedChoice()),r.appendChild(e.addThicknessChoice())}n.indexOf("MARK_BETWEEN_POINTS")&&(e.divMarkPalette=document.createElement("div"),e.divMarkPalette.style.display="flex",e.divToolbar2.appendChild(e.divMarkPalette),kn({figure:e,container:e.divMarkPalette}),e.divMarkPalette.style.display="none")}class $t{constructor({border:t=!1,dx:i=1,dy:s=1,height:n=document.documentElement.clientHeight-Ft,isDynamic:o=!0,isHandDrawn:r=!1,pixelsPerUnit:a=30,scale:l=1,snapGrid:c=!1,width:h=document.documentElement.clientWidth-_t,xMin:d=-10,xScale:p=1,yMin:g=-6,yScale:m=1}={}){this._actionsOnChange=[],this._eventListeners={},this._animationFrameHandle=null,this._isDestroyed=!1,this.buttons=new Map,this.currentState="",this.id="",this.zoomLevel=1,this.elements=new Map,this.stackUndo=[],this.stackRedo=[],this.width=h,this.height=n,this.pixelsPerUnit=a,this.xMin=d,this.xMax=d+h/a/l/p,this.yMin=g,this.yMax=g+n/a/l/m,this.dx=i,this.dy=s,this.hoverPoints=new Set,this.xScale=p,this.yScale=m,this._scale=l,this.isDynamic=o,this.pointerX=null,this.pointerY=null,this.selectedElements=[],this.tmpElements=[],rt.figureHasBorder=t,rt.isHandDrawn=r,this.options={...rt},this.snapGrid=c,this.container=document.createElement("div"),this.container.id="containerApigeom",this.divFigureAndUserMessage=document.createElement("div"),this.divFigureAndUserMessage.id="divFigureAndUserMessage",this.divFigure=document.createElement("div"),this.divFigure.id="divFigure",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.divSave=null,this.divButtons=document.createElement("div"),this.divButtons.id="divButtons",this.divUserMessage=document.createElement("div"),this.divUserMessage.id="divUserMessage",this.divUserMessage.style.fontSize=ze,this.divUserMessage.style.height=Ve,this.divUserMessage.style.width="90%",this.divUserMessage.style.textAlign="right",this.divUserMessage.style.right="0",this.divUserMessage.style.color="blue",this.divUserMessage.style.margin="3px",this.divUserMessage.style.padding="0.5em",this.divUserMessage.style.fontSize="1.5em",this.divToolbar2=document.createElement("div"),this.divToolbar2.id="divToolbar2",this.divToolbar2.style.display="flex",this.container.appendChild(this.divButtons),this.container.appendChild(this.divFigureAndUserMessage),this.divFigureAndUserMessage.appendChild(this.divToolbar2),this.divFigureAndUserMessage.appendChild(this.divUserMessage),this.divFigureAndUserMessage.appendChild(this.divFigure),this.divFigure.appendChild(this.svg),t&&(this.svg.style.border="solid"),t&&(this.svg.style.border="solid"),this.svg.style.touchAction="none",this.clearHtml(),this.isDynamic&&this.listenPointer(),this.pointer=new y(this,{isChild:!0,isFree:!1,isVisible:!1,isSelectable:!1,color:"black",shape:"",x:0,y:0}),this.pointer.type="pointer",this.filter=f=>f instanceof y&&f.isFree,this.saveState(),this.initial={height:this.height,width:this.width,scale:this._scale,xMin:this.xMin,yMin:this.yMin},setTimeout(()=>{this.handleUndoRedoButtons()},100)}destroy(){if(this._isDestroyed){console.warn("Figure already destroyed");return}if(this._isDestroyed=!0,this._animationFrameHandle!==null&&(window.cancelAnimationFrame(this._animationFrameHandle),this._animationFrameHandle=null),this._eventListeners.svg&&(this._eventListeners.svg.pointerdown&&this.svg.removeEventListener("pointerdown",this._eventListeners.svg.pointerdown),this._eventListeners.svg.pointerup&&this.svg.removeEventListener("pointerup",this._eventListeners.svg.pointerup),this._eventListeners.svg.pointerleave&&this.svg.removeEventListener("pointerleave",this._eventListeners.svg.pointerleave),this._eventListeners.svg.pointermove&&this.svg.removeEventListener("pointermove",this._eventListeners.svg.pointermove)),this._eventListeners.window&&(this._eventListeners.window.resize&&window.removeEventListener("resize",this._eventListeners.window.resize),this._eventListeners.window.orientationchange&&window.removeEventListener("orientationchange",this._eventListeners.window.orientationchange),this._eventListeners.window.fullscreenchange&&window.removeEventListener("fullscreenchange",this._eventListeners.window.fullscreenchange),this._eventListeners.window.keydown&&window.removeEventListener("keydown",this._eventListeners.window.keydown)),this.ui)try{this.ui.stop()}catch(i){console.warn("Error stopping UI state machine:",i)}const t=Array.from(this.elements.values());for(const i of t)try{"remove"in i&&typeof i.remove=="function"&&i.remove()}catch(s){console.warn(`Error removing element ${i.id}:`,s)}this.elements.clear(),this.hoverPoints.clear(),this.selectedElements=[],this.tmpElements=[],this.stackUndo=[],this.stackRedo=[],this._actionsOnChange=[];for(const i of this.buttons.values())i.onclick=null;this.buttons.clear(),this.grid&&(this.grid.figure=null,this.grid=void 0),this.pointer&&(this.pointer.figure=null),this._eventListeners={},this.modal=void 0,this.inDrag=void 0,this.pointerX=null,this.pointerY=null,this.ui=null,this.options=null,console.log("Figure destroyed successfully")}addButtons(t){return xn(t,this)}addColorPalette(t){return Ae(t,this)}addCustomButton({action:t,container:i,record:s,text:n,tooltip:o="",url:r,userMessage:a}){return vn({action:t,figure:this,tooltip:o,url:r,text:n,container:i,record:s,userMessage:a})}addDashedChoice(){return Fe(this)}addThicknessChoice(){return bn(this)}addHandDrawnFilter(){const t=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS("http://www.w3.org/2000/svg","filter");i.id="handDrawn";const s=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");s.setAttribute("type","fractalNoise"),s.setAttribute("baseFrequency","0.05"),s.setAttribute("numOctaves","2"),s.setAttribute("result","noise");const n=document.createElementNS("http://www.w3.org/2000/svg","feDisplacementMap");n.setAttribute("in","SourceGraphic"),n.setAttribute("in2","noise"),n.setAttribute("scale","5"),i.appendChild(s),i.appendChild(n),t.appendChild(i),this.svg.appendChild(t)}adjustSize(){this.width<Rt&&(this.width=Rt),this.height<Bt&&(this.height=Bt),this.xMax=this.xMin+this.width/this.pixelsPerUnit/this.scale/this.xScale,this.yMax=this.yMin+this.height/this.pixelsPerUnit/this.scale/this.yScale,this.divFigure!==null&&this.svg!==null&&(this.divFigure.style.width=`${this.width.toString()}px`,this.divFigure.style.height=`${this.height.toString()}px`,this.svg.setAttribute("width",this.width.toString()),this.svg.setAttribute("height",this.height.toString()),this.svg.setAttribute("viewBox",`${this.xToSx(this.xMin)} ${this.yToSy(this.yMax)} ${this.width} ${this.height}`));for(const t of this.elements.values())t instanceof S&&t.update()}getMaxSize(){this.width=document.documentElement.clientWidth-_t,this.height=document.documentElement.clientHeight-Ft}autoAdjustSize(){this.getMaxSize();const t=()=>{this.getMaxSize(),this.adjustSize()},i=()=>{this.getMaxSize(),this.adjustSize()},s=()=>{this.getMaxSize(),this.adjustSize()};this._eventListeners.window=this._eventListeners.window||{},this._eventListeners.window.resize=t,this._eventListeners.window.orientationchange=i,this._eventListeners.window.fullscreenchange=s,window.addEventListener("resize",t),window.addEventListener("orientationchange",i),window.addEventListener("fullscreenchange",s)}checkPoint({label:t,x:i,y:s,color:n}){return ci({figure:this,label:t,x:i,y:s,color:n})}checkPointOnLine({labelPt:t,nameLine:i}){return ui({figure:this,labelPt:t,nameLine:i})}checkPointOnIntersectionLL({labelPt:t,nameLine1:i,nameLine2:s}){return pi({figure:this,labelPt:t,nameLine1:i,nameLine2:s})}checkPointBetween2Points({labelPt:t,labelPt1:i,labelPt2:s}){return hi({figure:this,labelPt:t,labelPt1:i,labelPt2:s})}checkAngle({angle:t,label1:i,label2:s,label3:n}){return Je({angle:t,figure:this,label1:i,label2:s,label3:n})}checkPerpendicularBisector({color:t,label1:i,label2:s}){return li({figure:this,label1:i,label2:s,color:t})}checkCircleRadius({center:t,labelCenter:i,radius:s}){return Ke({center:t,figure:this,labelCenter:i,radius:s})}checkCoords({checkOnlyAbscissa:t,label:i,x:s,y:n,color:o,precision:r=.1}){return ni({checkOnlyAbscissa:t,figure:this,label:i,x:s,y:n,color:o,precision:r})}checkDistance({distance:t,label1:i,label2:s}){return oi({distance:t,figure:this,label1:i,label2:s})}checkLine({point1:t,point2:i,color:s}){return ri({figure:this,point1:t,point2:i,color:s})}checkSegment({point1:t,point2:i,color:s}){return xi({figure:this,point1:t,point2:i,color:s})}checkParallel({label1:t,label2:i}){return ai({figure:this,label1:t,label2:i})}checkPolygon({acceptSegments:t,points:i,color:s}){return gi({figure:this,acceptSegments:t,points:i,color:s})}checkPolygonByLabels({labels:t,color:i}){return fi({figure:this,labels:t,color:i})}checkSameDistance({label1:t,label2:i}){return yi({figure:this,label1:t,label2:i})}checkRay({point1:t,point2:i,color:s}){return mi({figure:this,point1:t,point2:i,color:s})}checkVector({color:t,labelOrigin:i,labelPoint2:s,x:n,xOrigin:o,y:r,yOrigin:a}){return wi({color:t,figure:this,labelOrigin:i,labelPoint2:s,x:n,xOrigin:o,y:r,yOrigin:a})}clearHtml(){this.svg.innerHTML="";const t=document.createElementNS("http://www.w3.org/2000/svg","style");this.svg.appendChild(t),t.type="text/css",t.innerHTML=".onlyOver:hover { opacity: 1; }",this.options={...rt},this.addHandDrawnFilter(),this.options.isHandDrawn&&(this.svg.style.filter="url(#handDrawn)")}copy(){const t=this.getJsonWithHistory(),i=new $t;if(i.loadJson(JSON.parse(t)),this.elements.size!==i.elements.size)throw new Error("Erreur lors de la copie de la figure");return i}create(t,i){const s=new Sn[t](this,{...i});return"draw"in s&&s.draw(),s}getContainer(){return this.container}getJsonWithHistory(){const t={apiGeomVersion:void 0,options:this.options,...Object.fromEntries(this.elements),history:this.stackUndo};return JSON.stringify(t,ne,2)}getPointByLabel(t){const i=[...this.elements.values()].filter(s=>s instanceof y&&s.label===t);return i.length>0?i[0]:null}getPointerCoord(t){t.preventDefault();const i=this.svg.getBoundingClientRect(),s=(t.clientX-i.x)/this.pixelsPerUnit/this.xScale/this.scale+this.xMin,n=-(t.clientY-i.y)/this.pixelsPerUnit/this.yScale/this.scale+this.yMax;return[s,n]}getStaticHtml({center:t=!1}={}){const i=this.isDynamic;this.isDynamic=!1;let s="";if(this.container.childElementCount<5){const n=document.createElement("div");this.setContainer(n)}else this.isDynamic=i;return this.divFigure.style.display="block",t&&(this.divFigure.style.margin="0 auto"),s=this.divFigure.outerHTML,s}handleDragAll(){const t=i=>{const s={x:0,y:0},n=je;i.key==="ArrowLeft"&&(s.x=n),i.key==="ArrowRight"&&(s.x=-n),i.key==="ArrowUp"&&(s.y=-n),i.key==="ArrowDown"&&(s.y=+n),i.shiftKey&&(s.x*=10,s.y*=10),!In()&&(s.x!==0||s.y!==0)&&(i.preventDefault(),this.xMin+=s.x,this.yMin+=s.y,this.zoom(this.zoomLevel))};this._eventListeners.window=this._eventListeners.window||{},this._eventListeners.window.keydown=t,window.addEventListener("keydown",t)}handleUndoRedoButtons(){const t=this.buttons.get("REDO"),i=this.buttons.get("UNDO");t!==void 0&&(t.style.opacity=this.stackRedo.length===0?"0.5":"1"),i!==void 0&&(i.style.opacity=this.stackUndo.length<2?"0.5":"1")}latex({xMax:t=this.xMin+this.options.latexWidth,xMin:i=this.xMin,yMax:s=this.yMax,yMin:n=this.yMax-this.options.latexHeight,includePreambule:o=!0}={}){let r="";return o&&(r+="\\documentclass[french,a4paper]{article}",r+=`
\\usepackage[francais]{babel}`,r+=`
\\usepackage[utf8]{inputenc}`,r+=`
\\usepackage{tkz-base}`,r+=`
\\usepackage{pgfplots}`,r+=`
\\begin{document}`),r+=this.tikz({xMax:t,xMin:i,yMax:s,yMin:n}),o&&(r+=`
\\end{document}`),r=r.replace(/\d+\.\d+/g,a=>(Math.round(1e6*Number.parseFloat(a))/1e6).toString()),r}listenPointer(){let t=null,i=null;const s=()=>{if(t=null,!this.isDynamic||i===null)return;const[a,l]=i;this.pointer.moveTo(a,l),te(this,a,l),this.inDrag!==void 0&&this.inDrag.moveTo(a,l)},n=a=>{if(!this.isDynamic)return;t!==null&&(window.cancelAnimationFrame(t),s());const[l,c]=this.getPointerCoord(a);this.pointer.moveTo(l,c),ys(this,a)},o=()=>{this.isDynamic&&(this.pointer.moveTo(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),te(this,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),this.inDrag!==void 0&&(this.inDrag=void 0,this.divFigure!==null&&(this.divFigure.style.cursor="auto"),this.saveState()))},r=a=>{this.isDynamic&&(i=this.getPointerCoord(a),t===null&&(t=window.requestAnimationFrame(s),this._animationFrameHandle=t))};this._eventListeners.svg={pointerdown:n,pointerup:o,pointerleave:o,pointermove:r},this.svg.addEventListener("pointerdown",n),this.svg.addEventListener("pointerup",o),this.svg.addEventListener("pointerleave",o),this.svg.addEventListener("pointermove",r)}_hasChanged(){for(const t of this._actionsOnChange)t()}loadJson(t,i){Re(this,t,i)}onChange(t){this._actionsOnChange.push(t)}redo(){const t=this.stackRedo.at(-1);t!==void 0&&(this.stackUndo.push(t),this.stackRedo.pop(),this.loadJson(JSON.parse(t)),this.handleUndoRedoButtons()),this._hasChanged()}restart(t=1){if(this.stackUndo.length===0)return;const i=Number.isInteger(t)&&t>1?t:1;for(;this.stackUndo.length>i;){const s=this.stackUndo.at(-2);s!==void 0&&(this.stackRedo.push(this.stackUndo.at(-1)),this.stackUndo.pop(),this.stackUndo.length+1===i&&(this.loadJson(JSON.parse(s)),this.handleUndoRedoButtons()))}this._hasChanged()}saveState(){const t=this.json;ms()&&localStorage.setItem("apiGeom",t),this.divSave!==null&&(this.divSave.textContent=t),this.stackUndo.push(t),this.stackRedo=[],this.stackUndo.length>Ot&&(this.stackUndo=this.stackUndo.slice(-Ot)),this.handleUndoRedoButtons();for(const i of this.tmpElements)i.remove();this.tmpElements=[],this.selectedElements=[],this._hasChanged()}setContainer(t){if(!(t instanceof HTMLElement))throw Error("grandParentContainer doit être un HTMLElement");t.appendChild(this.container),this.divFigure.style.position="relative",this.divFigure.style.display="inline-block",this.divFigure.style.margin="0",this.divFigure.style.padding="0",this.divFigure.style.boxSizing="border-box",this.divFigure.style.border="none",this.divButtons.childElementCount===0&&this.isDynamic&&this.setToolbar(),this.adjustSize()}setToolbar({nbCols:t,position:i="left",showStyles:s,tools:n}={}){Cn(this,{nbCols:t,position:i,showStyles:s,tools:n})}async shake({delta:t=3,repeat:i=5,time:s=1}={}){await bi({delta:t,figure:this,repeat:i,time:s})}sxTox(t){return t/this.pixelsPerUnit/this.xScale/this.scale}syToy(t){return-t/this.pixelsPerUnit/this.yScale/this.scale}tempCreate(t,i){const s=this.create(t,{isChild:!0,isSelectable:!1,...i});return s.color=this.options.tmpColor,s.thickness=this.options.tmpThickness,"isDashed"in s&&!(s instanceof y)&&(s.isDashed=this.options.tmpIsDashed),"fillColor"in s&&(s.fillColor=this.options.tmpFillColor),"fillOpacity"in s&&(s.fillOpacity=this.options.tmpFillOpacity),this.tmpElements.push(s),s}tikz({xMax:t=Math.min(this.xMax,this.xMin+this.options.latexWidth),xMin:i=this.xMin,yMax:s=this.yMax,yMin:n=Math.max(this.yMin,this.yMax-this.options.latexHeight),anchor:o="north"}={}){const r=this.scale!==1?`, scale=${this.scale}`:"",a=this.xScale!==1?`, xScale=${this.xScale}`:"",l=this.yScale!==1?`, yScale=${this.yScale}`:"";let c=`
\\begin{tikzpicture}[baseline={(current bounding box.${o})}${r}${a}${l}]`;c+=`
\\clip(${i}, ${n}) rectangle (${t}, ${s});`,this.options.figureHasBorder&&(c+=`

% Bordure de la figure`,c+=`
\\draw[ultra thick] (${i}, ${n}) rectangle (${t}, ${s});`);for(const h of this.elements.values())h instanceof S&&h.latex!==void 0&&h.latex!==""&&h.isVisible&&h.color!==""&&h.color!=="none"&&(c+=`
${h.latex}`);return c+=`
\\end{tikzpicture}`,c=c.replace(/\d+\.\d+/g,h=>(Math.round(1e6*Number.parseFloat(h))/1e6).toString()),c}undo(){const t=this.stackUndo.at(-2);t!==void 0&&(this.stackRedo.push(this.stackUndo.at(-1)),this.stackUndo.pop(),this.loadJson(JSON.parse(t)),this.handleUndoRedoButtons()),this._hasChanged()}async wait(t=1500){await new Promise(i=>{setTimeout(i,t)})}xToSx(t){return t*this.pixelsPerUnit*this.xScale*this.scale}yToSy(t){return-t*this.pixelsPerUnit*this.yScale*this.scale}zoom(t,{changeWidth:i=!0,changeHeight:s=!0,changeLeft:n=!0,changeBottom:o=!0}={}){if(t<=0)return;i&&(this.width=this.initial.width*t),s&&(this.height=this.initial.height*t),this.scale=this.initial.scale*t,n&&(this.xMin=this.initial.xMin/t),o&&(this.yMin=this.initial.yMin/t),this.adjustSize();const r=this.getJsonWithHistory(),a=this.options;this.loadJson(JSON.parse(r),!1),this.options=a}get htmlDescription(){const t=document.createElement("ul");t.style.lineHeight="2";for(const i of this.elements.values())if("description"in i&&!i.isChild){const s=document.createElement("li");s.textContent=i.description,t.appendChild(s)}return t}get json(){const t={apiGeomVersion:void 0,options:this.options,...Object.fromEntries(this.elements)};return JSON.stringify(t,ne,2)}get scale(){return this._scale}set scale(t){this._scale=t,this.adjustSize()}get userMessage(){return this.divUserMessage.textContent??""}set userMessage(t){this.divUserMessage.textContent=t,ut(this.divUserMessage,{delimiters:[{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"}],errorColor:"#CC0000",preProcess:i=>i.replaceAll(" ","\\,"),strict:"warn",throwOnError:!0,trust:!1})}}const Sn={Angle:Si,AngleOriented:Ii,Arc:gt,ArcBy3PointsAndRadius:zi,ArcByCenterRadiusAndAngles:Ui,Barycenter:Qi,BisectorByPoints:Gi,Circle:E,CircleCenterDynamicRadius:ye,CircleCenterPoint:Hi,CircleFractionDiagram:Di,Distance:fe,DynamicCalcul:Ni,DynamicX:$i,DynamicY:Pi,GraduatedLine:Vi,Graph:kt,Graph2:Mi,GraphByParts:Ai,Grid:pe,Line:Y,LineByPointVector:Wi,LineFractionDiagram:_i,RectangleFractionDiagram:Ri,LineParallel:Nt,LinePerpendicular:ft,MarkBetweenPoints:Ji,MarkRightAngle:Ki,Middle:ts,PerpendicularBisector:xe,PerpendicularBisectorByPoints:Yi,Point:y,PointByProjection:ss,PointByProjectionOnAxisX:ns,PointByProjectionOnAxisY:os,PointIntersectionCC:rs,PointIntersectionLC:as,PointIntersectionLL:ue,PointOnCircle:ls,PointOnGraph:is,PointOnLine:ge,PointOnPolyline:hs,PointOnLineAtDistance:cs,PointsIntersectionCC:ds,PointsIntersectionLC:ps,Polygon:j,Polyline:qi,Ray:It,Segment:b,TextByPoint:pt,TextByPosition:et,TextDynamicByPoint:Ct,TextDynamicByPosition:us,Vector:ve,VectorByPoints:gs,VectorPerpendicular:fs};function ne(e,t){if(!(t!=null&&t.isChild)&&e!=="isChild")return t}function In(){return Array.from(document.querySelectorAll("dialog")).some(t=>!!t.open)}function Nn(e,t,i){const s=[...t.elements.values()].filter(n=>n.type==="TextByPosition"||n.type==="TextByPoint"||n.type==="TextDynamicByPosition"||n.type==="TextDynamicByPoint");for(const n of s){if(!n.isVisible)continue;const o=n.x,r=n.y;if(o===void 0||r===void 0)continue;const a=t.xToSx(o)+n.dxInPixels,l=t.yToSy(r)-n.dyInPixels;if(a<i.xMin||a>i.xMin+i.width||l<i.yMax||l>i.yMax+i.height)continue;const c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",a.toString()),c.setAttribute("y",l.toString()),c.setAttribute("fill",n.color||"black"),c.setAttribute("font-size",n.fontSize||"12pt");const h=n.anchor||"middleCenter";h.includes("Left")?c.setAttribute("text-anchor","start"):h.includes("Right")?c.setAttribute("text-anchor","end"):c.setAttribute("text-anchor","middle"),h.includes("top")?c.setAttribute("dominant-baseline","hanging"):h.includes("bottom")?c.setAttribute("dominant-baseline","auto"):c.setAttribute("dominant-baseline","middle"),n._angleWithHorizontalInDegres&&n._angleWithHorizontalInDegres!==0&&c.setAttribute("transform",`rotate(${n._angleWithHorizontalInDegres} ${a} ${l})`);let d=n.text;d.startsWith("$")&&d.endsWith("$")&&(d=d.slice(1,-1)),c.textContent=d,e.appendChild(c)}}function oe(e){const t=document.querySelector("dialog#apigeom-dialog-radius");t!=null&&t.remove();const i=document.createElement("dialog");i.id="apigeom-dialog-radius",i.style.border="1px solid black",i.style.backgroundColor="white",i.style.padding="20px";const s=document.createElement("label");s.innerHTML="Rayon : ";const n=document.createElement("input");n.type="text",n.name="radius",n.style.marginLeft="10px",n.setAttribute("autocomplete","off"),n.setAttribute("spellcheck","false"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","none"),n.setAttribute("data-form-type","other");const o=document.createElement("button");return o.innerHTML="Valider",o.style.marginLeft="10px",i.appendChild(s),i.appendChild(n),i.appendChild(o),document.body.appendChild(i),i.addEventListener("close",()=>{e.ui!=null&&(n.value.match(/[a-zA-Z]/)?e.ui.send({type:"RADIUS",radius:n.value}):e.ui.send({type:"RADIUS",radius:String(Number(n.value.replace(",",".")))}))}),o.addEventListener("click",()=>{i.close()}),n.addEventListener("keydown",r=>{r.key==="Enter"||r.key==="Escape"?(r.preventDefault(),i.close()):r.key==="."&&(r.preventDefault(),n.value+=",")}),i}function $n(e){const t=document.createElement("dialog");t.style.border="1px solid black",t.style.backgroundColor="white",t.style.padding="20px";const i=document.createElement("label");i.innerHTML="Coefficient de l'homothétie : ";const s=document.createElement("input");s.type="number",s.name="coefficient",s.min="-10",s.max="10",s.value="2",s.style.marginLeft="10px",s.setAttribute("autocomplete","off"),s.setAttribute("data-form-type","other");const n=document.createElement("button");return n.innerHTML="Valider",n.style.marginLeft="10px",t.appendChild(i),t.appendChild(s),t.appendChild(n),document.body.appendChild(t),t.addEventListener("close",()=>{e.ui!=null&&e.ui.send({type:"DILATE_COEF",coefficient:Number(s.value)})}),n.addEventListener("click",()=>{t.close()}),s.addEventListener("keyup",o=>{(o.key==="Enter"||o.key==="Escape")&&(o.preventDefault(),t.close())}),t}function Pn(e){const t=document.createElement("dialog");t.style.border="1px solid black",t.style.backgroundColor="white",t.style.padding="20px";const i=document.createElement("label");i.innerHTML="Nom du point";const s=document.createElement("input");s.type="text",s.name="search",s.style.marginLeft="10px",s.setAttribute("autocomplete","off"),s.setAttribute("spellcheck","false"),s.setAttribute("autocorrect","off"),s.setAttribute("autocapitalize","none");const n=document.createElement("button");return n.innerHTML="Valider",n.style.marginLeft="10px",t.appendChild(i),t.appendChild(s),t.appendChild(n),document.body.appendChild(t),t.addEventListener("close",()=>{e.ui!=null&&e.ui.send({type:"TEXT_FROM_DIALOG",text:s.value})}),n.addEventListener("click",()=>{t.close()}),s.addEventListener("keyup",o=>{(o.key==="Enter"||o.key==="Escape")&&(o.preventDefault(),t.close())}),t}function Ln(e){const t=document.createElement("dialog");t.style.border="1px solid black",t.style.backgroundColor="white",t.style.padding="20px";const i=document.createElement("label");i.innerHTML="Angle (en degrés) : ";const s=document.createElement("input");s.type="number",s.name="angle",s.style.marginLeft="10px",s.value="90",s.setAttribute("autocomplete","off"),s.setAttribute("data-form-type","other");const n=document.createElement("select");n.style.marginLeft="10px",n.innerHTML='<option value="-1">Sens horaire</option><option value="1">Sens anti-horaire</option>';const o=document.createElement("button");return o.innerHTML="Valider",o.style.marginLeft="10px",t.appendChild(i),t.appendChild(s),t.appendChild(n),t.appendChild(o),document.body.appendChild(t),t.addEventListener("close",()=>{const r=Number(s.value)*Number.parseInt(n.value,10);e.ui!=null&&e.ui.send({type:"ANGLE",angle:r})}),o.addEventListener("click",()=>{t.close()}),s.addEventListener("keyup",r=>{(r.key==="Enter"||r.key==="Escape")&&(r.preventDefault(),t.close())}),t}function En(e){const t=document.createElement("dialog");return t.id="dialog",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="50%",t.style.height="90%",t.style.border="none",t.style.background="white",t.style.zIndex="100",t.appendChild(e.htmlDescription),ut(t,{delimiters:[{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"}],errorColor:"#CC0000",preProcess:i=>i.replaceAll(" ","\\,"),strict:"warn",throwOnError:!0,trust:!1}),t.addEventListener("click",()=>{t.close()}),document.body.appendChild(t),t.showModal(),t}function Mn(e){const t=document.createElement("dialog");t.style.border="1px solid black",t.style.backgroundColor="white",t.style.padding="20px",t.style.display="flex",t.style.flexDirection="column",t.style.gap="10px";const i=document.createElement("h2");i.innerText="Options de la figure",i.style.margin="0 0 10px 0",t.appendChild(i);const s=document.createElement("div"),n=document.createElement("label");n.innerText="Taille des points : ";const o=document.createElement("input");o.type="number",o.min="1",o.max="10",o.value=String(e.options.pointSize),s.appendChild(n),s.appendChild(o),t.appendChild(s);const r=document.createElement("div"),a=document.createElement("label");a.innerText="Forme des points : ";const l=document.createElement("select"),c=[{value:"",text:"Rien"},{value:"o",text:"Rond"},{value:"x",text:"Croix"},{value:"|",text:"Trait"}];for(const k of c){const M=document.createElement("option");M.value=k.value,M.text=k.text,e.options.shape===k.value&&(M.selected=!0),l.appendChild(M)}r.appendChild(a),r.appendChild(l),t.appendChild(r);const h=document.createElement("div"),d=document.createElement("label");d.innerText="Aspect main levée : ";const p=document.createElement("input");p.type="checkbox",p.checked=e.options.isHandDrawn,h.appendChild(d),h.appendChild(p),t.appendChild(h);const g=document.createElement("div"),m=document.createElement("label");m.innerText="Cadre : ";const f=document.createElement("input");f.type="checkbox",f.checked=e.options.figureHasBorder,g.appendChild(m),g.appendChild(f),t.appendChild(g);const v=document.createElement("div");v.style.display="flex",v.style.justifyContent="flex-end",v.style.marginTop="10px";const w=document.createElement("button");w.innerText="Annuler",w.style.marginRight="10px";const N=document.createElement("button");return N.innerText="Valider",v.appendChild(w),v.appendChild(N),t.appendChild(v),document.body.appendChild(t),w.addEventListener("click",()=>{t.close(),t.remove()}),N.addEventListener("click",()=>{e.options.pointSize=Number(o.value),e.options.shape=l.value,e.options.isHandDrawn=p.checked,e.options.figureHasBorder=f.checked,e.options.isHandDrawn?e.svg.style.filter="url(#handDrawn)":e.svg.style.filter="",e.options.figureHasBorder?e.svg.style.border="solid":e.svg.style.border="none",t.close(),t.remove()}),t.showModal(),t}function Tn(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.border="1px solid black",t.style.backgroundColor="rgba(0, 0, 0, 0.1)",t.style.pointerEvents="none",t.style.zIndex="1000";const i=document.createElement("button");i.style.position="absolute",i.style.border="1px solid black",i.style.pointerEvents="auto",i.style.zIndex="1001",i.innerHTML="SVG";const s=document.createElement("button");s.style.position="absolute",s.style.border="1px solid black",s.style.pointerEvents="auto",s.style.zIndex="1001",s.innerHTML="LaTeX",s.style.top="50px",s.style.right="10%",s.style.cursor="pointer",i.style.cursor="pointer",s.style.backgroundColor="white",i.style.backgroundColor="white",s.style.boxShadow="0px 0px 5px 0px rgba(0,0,0,0.75)",i.style.boxShadow="0px 0px 5px 0px rgba(0,0,0,0.75)";const n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.right="0",n.style.backgroundColor="white",n.style.padding="2px 6px",n.style.border="1px solid black",n.style.fontSize="12px",n.style.fontFamily="monospace",n.style.pointerEvents="none",n.style.zIndex="1001",n.style.whiteSpace="nowrap";const o=e.divFigure,r=o.getBoundingClientRect(),a=r.left,l=r.top;o.appendChild(t),t.appendChild(i),t.appendChild(s),t.appendChild(n),i.style.top="100px",i.style.right="10%",i.style.cursor="pointer",t.style.width=`${e.divFigure.clientWidth-100}px`,t.style.height=`${e.divFigure.clientHeight-200}px`;const c=()=>{const L=t.getBoundingClientRect(),T=L.width,F=L.height,O=Math.abs(e.sxTox(T)-e.sxTox(0)),z=Math.abs(e.syToy(0)-e.syToy(F)),B=Math.round(O*10)/10,it=Math.round(z*10)/10;n.textContent=`${B} × ${it}`};c();let h=!1,d=!1,p=!1,g=!1,m=!1,f=!1,v=!1,w=!1,N=!1;const k=L=>{const T=t.getBoundingClientRect(),F=L.clientX,O=L.clientY;o.style.cursor="default",Math.abs(F-T.left)<10?(d=!0,o.style.cursor="ew-resize"):Math.abs(F-T.right)<10?(p=!0,o.style.cursor="ew-resize"):(d=!1,p=!1),Math.abs(O-T.top)<10?(g=!0,o.style.cursor="n-resize"):Math.abs(O-T.bottom)<10?(m=!0,o.style.cursor="s-resize"):(g=!1,m=!1),d&&g?(f=!0,o.style.cursor="nw-resize"):p&&g?(v=!0,o.style.cursor="ne-resize"):d&&m?(w=!0,o.style.cursor="sw-resize"):p&&m?(N=!0,o.style.cursor="se-resize"):(f=!1,v=!1,w=!1,N=!1),h=d||p||g||m||f||v||w||N};window.addEventListener("mousemove",k);const M=()=>{if(h){const L=t.getBoundingClientRect(),T=L.width,F=L.height,O=L.left,z=L.top,B=Pt=>{const st=Pt.clientX-O,nt=Pt.clientY-z,q=(U,Mt)=>{const be=Math.abs(Mt?e.sxTox(U)-e.sxTox(0):e.syToy(0)-e.syToy(U)),Tt=Math.round(be*10)/10;return Math.abs(Mt?e.xToSx(Tt)-e.xToSx(0):e.yToSy(0)-e.yToSy(Tt))};let mt=T,yt=F,Lt=O-a,Et=z-l;if(d){const U=st>0?q(st,!0):-q(-st,!0);Lt=O+U-a,mt=T-U}else p&&(mt=q(st,!0));if(g){const U=nt>0?q(nt,!1):-q(-nt,!1);Et=z+U-l,yt=F-U}else m&&(yt=q(nt,!1));(d||f||w)&&(t.style.left=`${Lt}px`),(g||f||v)&&(t.style.top=`${Et}px`),(d||p||f||v||w||N)&&(t.style.width=`${mt}px`),(g||m||f||v||w||N)&&(t.style.height=`${yt}px`),c()},it=()=>{window.removeEventListener("pointermove",B),window.removeEventListener("pointerup",it)};window.addEventListener("pointermove",B),window.addEventListener("pointerup",it)}};window.addEventListener("pointerdown",M);const J=()=>{var B;const L=t.getBoundingClientRect(),T=L.left-a,F=L.top-l,O=L.width,z=L.height;(B=e.ui)==null||B.send({type:"SELECTION_AREA_TO_SVG",height:z,width:O,xMin:T,yMax:F})};i.addEventListener("click",J);const W=()=>{var B;const L=t.getBoundingClientRect(),T=L.left-a,F=L.top-l,O=L.width,z=L.height;(B=e.ui)==null||B.send({type:"SELECTION_AREA_TO_LATEX",height:z,width:O,xMin:T,yMax:F})};return s.addEventListener("click",W),{div:t,cleanup:()=>{window.removeEventListener("mousemove",k),window.removeEventListener("pointerdown",M),i.removeEventListener("click",J),s.removeEventListener("click",W),i.onclick=null,s.onclick=null,t.remove()}}}const An=Me({context:({input:e})=>({figure:e.figure,temp:e.temp}),entry:["highlightButton","eraseTempElements","eraseUserMessage"],id:"apiGeomUI",initial:"INIT",on:{BISECTOR_BY_POINTS:{target:".BISECTOR_BY_POINTS",actions:"highlightButton"},CIRCLE_CENTER_POINT:{target:".CIRCLE_CENTER_POINT",actions:"highlightButton"},CIRCLE_RADIUS:{target:".CIRCLE_RADIUS",actions:"highlightButton"},COLOR:{target:".COLOR",actions:"highlightButton"},DESCRIPTION:{target:".DESCRIPTION",actions:"highlightButton"},DILATE:{target:".DILATE",actions:"highlightButton"},DISC_CENTER_POINT:{target:".DISC_CENTER_POINT",actions:"highlightButton"},DISC_RADIUS:{target:".DISC_RADIUS",actions:"highlightButton"},DOWNLOAD_LATEX_SVG:{target:".DOWNLOAD_LATEX_SVG",actions:"highlightButton"},DRAG:{target:"#apiGeomUI.DRAG",actions:"highlightButton"},FILL:{target:".FILL",actions:"highlightButton"},GRID:{target:".GRID",actions:"highlightButton"},HIDE:{target:"#apiGeomUI.HIDE",actions:"highlightButton"},INFORMATIONS:{target:"#apiGeomUI.INFORMATIONS",actions:"highlightButton"},LATEX:{target:".LATEX",actions:"highlightButton"},LINE:{target:".LINE",actions:"highlightButton"},LINE_PARALLEL:{target:".LINE_PARALLEL",actions:"highlightButton"},LINE_PERPENDICULAR:{target:".LINE_PERPENDICULAR",actions:"highlightButton"},MARK_BETWEEN_POINTS:{target:".MARK_BETWEEN_POINTS",actions:"highlightButton"},MESURE_ANGLE:{target:".MESURE_ANGLE",actions:"highlightButton"},MESURE_SEGMENT:{target:".MESURE_SEGMENT",actions:"highlightButton"},MIDDLE:{target:".MIDDLE",actions:"highlightButton"},MOVE_LABEL:{target:".MOVE_LABEL",actions:"highlightButton"},NAME_POINT:{target:".NAME_POINT",actions:"highlightButton"},OPEN:{target:".OPEN",actions:"highlightButton"},OPTIONS:{target:".OPTIONS",actions:"highlightButton"},PAUSE:{target:".PAUSE",actions:"highlightButton"},PERPENDICULAR_BISECTOR:{target:".PERPENDICULAR_BISECTOR",actions:"highlightButton"},PLAY:{target:".PLAY",actions:"highlightButton"},PLAY_SKIP_BACK:{target:".PLAY_SKIP_BACK",actions:"highlightButton"},PLAY_SKIP_FORWARD:{target:".PLAY_SKIP_FORWARD",actions:"highlightButton"},POINT:{target:".POINT",actions:"highlightButton"},POINT_INTERSECTION:{target:".POINT_INTERSECTION",actions:"highlightButton"},POINT_ON:{target:"#apiGeomUI.POINT_ON",actions:"highlightButton"},POLYGON:{target:".POLYGON",actions:"highlightButton"},RAY:{target:".RAY",actions:"highlightButton"},REDO:{target:".REDO",actions:"highlightButton"},REFLECTION:{target:".REFLECTION",actions:"highlightButton"},REFLECTION_OVER_LINE:{target:".REFLECTION_OVER_LINE",actions:"highlightButton"},REMOVE:{target:".REMOVE",actions:"highlightButton"},RESTART:{target:".RESTART",actions:"highlightButton"},ROTATE:{target:".ROTATE",actions:"highlightButton"},SAVE:{target:".SAVE",actions:"highlightButton"},SEGMENT:{target:".SEGMENT",actions:"highlightButton"},SET_OPTIONS:{target:".SET_OPTIONS",actions:"highlightButton"},SHAKE:{target:".SHAKE",actions:"highlightButton"},TRANSLATION:{target:".TRANSLATION",actions:"highlightButton"},UNDO:{target:".UNDO",actions:"highlightButton"},VECTOR:{target:".VECTOR",actions:"highlightButton"},ZOOM_IN:{target:".ZOOM_IN",actions:"highlightButton"},ZOOM_OUT:{target:".ZOOM_OUT",actions:"highlightButton"}},states:{BISECTOR_BY_POINTS:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur un premier point (autre que le sommet de l'angle).",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0,target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer sur le sommet de l'angle.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element},guard:({event:e})=>e.element!==void 0,target:"waitingForThirdElement"}}},waitingForThirdElement:{entry:({context:e})=>{x("Cliquer sur un troisième point.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[2]=t.element;const[i,s,n]=e.figure.selectedElements;e.figure.create("BisectorByPoints",{origin:s,pointOnSide1:i,pointOnSide2:n}),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"waitingForFirstElement"}}}}},CIRCLE_CENTER_POINT:{initial:"waitingForCenter",states:{waitingForCenter:{entry:({context:e})=>{x("Cliquer sur le centre du cercle.",e.figure),e.figure.filter=t=>t instanceof y,e.figure.currentState="POINT_INTERSECTION"},exit:({context:e})=>{e.figure&&(e.figure.currentState="")},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,e.figure.tempCreate("CircleCenterPoint",{center:e.figure.selectedElements[0],point:e.figure.pointer})),e.figure.filter=s=>s instanceof y},guard:({event:e})=>$(e),target:"waitingForPoint"}}},waitingForPoint:{entry:({context:e})=>{x("Cliquer sur un point du cercle.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements;e.figure.create("CircleCenterPoint",{center:s,point:n}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForCenter"}}}}},CIRCLE_RADIUS:{initial:"waitingForCenter",states:{waitingForCenter:{entry:({context:e})=>{x("Cliquer sur le centre du cercle.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,oe(e.figure).showModal()),e.figure.filter=s=>s instanceof y},guard:({event:e})=>$(e),target:"waitingForRadius"}}},waitingForRadius:{on:{RADIUS:{actions:({context:e,event:t})=>{const i=t.radius,s=e.figure.selectedElements[0],n=re(t.radius,e.figure);if(n!==void 0){const o=e.figure.create("Distance",{point1:n[0],point2:n[1]});e.figure.create("CircleCenterDynamicRadius",{center:s,radius:o}),e.figure.saveState()}else i>0&&(e.figure.create("Circle",{center:s,radius:i}),e.figure.saveState())},target:"waitingForCenter"}}}}},COLOR:{entry:({context:e,event:t})=>{e.figure.options.color=t.text}},DESCRIPTION:{entry:({context:e})=>{En(e.figure)}},DILATE:{entry:({context:e})=>{e.figure.filter=t=>t instanceof y},exit:({context:e})=>{if(e.figure){e.figure.selectedElements=[];for(const t of e.figure.tmpElements)t.remove()}},initial:"waitingForCenter",states:{waitingForCenter:{entry:({context:e})=>{x("Cliquer sur le centre de l'homothétie.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,$n(e.figure).showModal())},guard:({event:e})=>$(e),target:"waitingForCoefficient"}}},waitingForCoefficient:{on:{DILATE_COEF:{actions:({context:e,event:t})=>{e.temp.values[0]=t.coefficient},target:"waitingForElement"}}},waitingForElement:{entry:({context:e})=>{e.figure.filter=s=>s instanceof y||s instanceof b||s instanceof E||s instanceof j;const t=e.figure.selectedElements[0],i=e.temp.values[0];e.figure.tmpElements.push(e.figure.pointer.dilate(t,i,{color:e.figure.options.tmpColor,isChild:!0})),x("Cliquer sur l'élément à transformer.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=e.figure.selectedElements[0],s=t.element,n=e.temp.values[0];s.dilate(i,n),e.figure.saveState(),e.figure.selectedElements[0]=i},guard:({event:e})=>e.element!==void 0,target:"waitingForElement"}}}}},DISC_CENTER_POINT:{initial:"waitingForCenter",states:{waitingForCenter:{entry:({context:e})=>{x("Cliquer sur le centre du disque.",e.figure),e.figure.filter=t=>t instanceof y||t instanceof b,e.figure.currentState="POINT_INTERSECTION"},exit:({context:e})=>{e.figure&&(e.figure.currentState="")},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,e.figure.tempCreate("CircleCenterPoint",{center:e.figure.selectedElements[0],point:e.figure.pointer})),e.figure.filter=s=>s instanceof y},guard:({event:e})=>$(e),target:"waitingForPoint"}}},waitingForPoint:{entry:({context:e})=>{x("Cliquer sur un point du disque.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements;e.figure.create("CircleCenterPoint",{center:s,point:n,fillColor:e.figure.options.color,fillOpacity:e.figure.options.discFillOpacity}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForCenter"}}}}},DISC_RADIUS:{initial:"waitingForCenter",states:{waitingForCenter:{entry:({context:e})=>{x("Cliquer sur le centre du disque.",e.figure),e.figure.filter=t=>t instanceof y||t instanceof b},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,oe(e.figure).showModal()),e.figure.filter=s=>s instanceof y},guard:({event:e})=>$(e),target:"waitingForRadius"}}},waitingForRadius:{on:{RADIUS:{actions:({context:e,event:t})=>{const i=t.radius,s=e.figure.selectedElements[0],n=re(t.radius,e.figure);if(n!==void 0){const o=e.figure.create("Distance",{point1:n[0],point2:n[1]});e.figure.create("CircleCenterDynamicRadius",{center:s,radius:o,fillColor:e.figure.options.color,fillOpacity:e.figure.options.discFillOpacity}),e.figure.saveState()}else i>0&&(e.figure.create("Circle",{center:s,radius:i,fillColor:e.figure.options.color,fillOpacity:e.figure.options.discFillOpacity}),e.figure.saveState())},target:"waitingForCenter"}}}}},DOWNLOAD_LATEX_SVG:{entry:({context:e})=>{const t=Tn(e.figure);e.temp.htmlElement[0]=t.div,e.temp.cleanupFunctions=e.temp.cleanupFunctions||[],e.temp.cleanupFunctions.push(t.cleanup)},exit:({context:e})=>{if(e.temp.htmlElement[0]&&e.temp.htmlElement[0].remove(),e.temp.cleanupFunctions){for(const t of e.temp.cleanupFunctions)t();e.temp.cleanupFunctions=[]}},on:{SELECTION_AREA_TO_LATEX:{actions:({context:e,event:t})=>{var h;const i=e.figure.xMin+e.figure.sxTox(t.xMin),s=i+e.figure.sxTox(t.width),n=e.figure.yMax+e.figure.syToy(t.yMax),o=n+e.figure.syToy(t.height);e.temp.htmlElement[0]&&(e.temp.htmlElement[0].remove(),e.temp.htmlElement[0]=void 0);const r=e.figure.latex({xMax:s,xMin:i,yMax:n,yMin:o}),a=new Blob([r],{type:"text/plain"}),l=window.URL.createObjectURL(a),c=document.createElement("a");c.style.display="none",c.href=l,c.download="figure.tex",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(l),document.body.removeChild(c),(h=e.figure.buttons.get("DRAG"))==null||h.click()},target:"#apiGeomUI.DRAG"},SELECTION_AREA_TO_SVG:{actions:({context:e,event:t})=>{var h;const i=e.figure.xToSx(e.figure.xMin+e.figure.sxTox(t.xMin)),s=e.figure.yToSy(e.figure.yMax+e.figure.syToy(t.yMax));e.temp.htmlElement[0]&&(e.temp.htmlElement[0].remove(),e.temp.htmlElement[0]=void 0);const n=Math.abs(e.figure.sxTox(t.width)-e.figure.sxTox(0)),o=Math.abs(e.figure.syToy(0)-e.figure.syToy(t.height)),r=e.figure.svg.cloneNode(!0);r.setAttribute("width",`${n.toFixed(2)}cm`),r.setAttribute("height",`${o.toFixed(2)}cm`),r.setAttribute("viewBox",`${i} ${s} ${t.width} ${t.height}`),Nn(r,e.figure,{xMin:i,yMax:s,width:t.width,height:t.height});const a=new Blob([r.outerHTML],{type:"image/svg+xml"}),l=window.URL.createObjectURL(a),c=document.createElement("a");c.style.display="none",c.href=l,c.download="figure.svg",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(l),document.body.removeChild(c),(h=e.figure.buttons.get("DRAG"))==null||h.click()},target:"#apiGeomUI.DRAG"}}},DRAG:{entry:({context:e})=>{e.figure.elements.size>1?x("Cliquer sur un point pour le déplacer.",e.figure):x("",e.figure),e.figure.filter=t=>t instanceof y&&t.isFree},exit:({context:e})=>{e.figure&&(e.figure.divFigure.style.cursor="default",e.figure.inDrag=void 0)},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.inDrag=t.element,e.figure.divFigure.style.cursor="move"},guard:({event:e})=>e.element!==void 0,target:"#apiGeomUI.DRAG"}}},FILL:{entry:({context:e})=>{e.figure.filter=t=>t instanceof j||t instanceof E||t instanceof gt,e.figure.currentState="FILL"},exit:({context:e})=>{if(e.figure){e.figure.currentState="";for(const t of e.figure.tmpElements)t.isSelected=!1}},on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element;i!==void 0&&(i.fillColor===e.figure.options.color?i.fillColor="none":i.fillColor=e.figure.options.color,e.figure.saveState())}}}},GRID:{entry:({context:e})=>{e.figure.grid===void 0?e.figure.grid=e.figure.create("Grid",{color:"black"}):e.figure.grid.isVisible?(e.figure.grid.isVisible=!1,e.figure.snapGrid=!1):(e.figure.grid.isVisible=!0,e.figure.snapGrid=!0),e.figure.saveState()}},HIDE:{entry:({context:e})=>{e.figure.currentState="HIDE",x("Cliquer sur l'élément à masquer ou à démasquer.",e.figure),e.figure.filter=t=>t.isVisible;for(const t of e.figure.elements)t instanceof S&&t.isHidden&&t.tempShow()},exit:({context:e})=>{if(e.figure){e.figure.currentState="";for(const t of e.figure.elements)t instanceof S&&t.isHidden&&t.hide()}},on:{clickLocation:{actions:({context:e,event:t})=>{t.element.isHidden===!0?(t.element.show(),t.element.isHidden=!1):(t.element.tempShow(),t.element.isHidden=!0),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"#apiGeomUI.HIDE"}}},INFORMATIONS:{entry:({context:e})=>{x("Cliquer sur l'élément",e.figure),e.figure.filter=t=>t.isVisible},on:{clickLocation:{actions:({event:e})=>{console.info(e.element)},guard:({event:e})=>e.element!==void 0,target:"#apiGeomUI.INFORMATIONS"}}},INIT:{entry:({context:e})=>{e.figure.userMessage=""}},LATEX:{entry:({context:e})=>{var o;const t=e.figure.latex,i=new Blob([t()],{type:"text/plain"}),s=window.URL.createObjectURL(i),n=document.createElement("a");n.style.display="none",n.href=s,n.download="figure.tex",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),(o=e.figure.buttons.get("DRAG"))==null||o.click()}},LINE:{entry:({context:e})=>{e.figure.filter=t=>t instanceof y},initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur un premier point de la droite.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,e.figure.tempCreate("Line",{point1:e.figure.selectedElements[0],point2:e.figure.pointer}))},guard:({event:e})=>$(e),target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer sur un deuxième point de la droite.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements;e.figure.create("Line",{point1:s,point2:n}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForFirstElement"}}}}},LINE_PARALLEL:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur un point ou une droite.",e.figure),e.figure.filter=t=>t instanceof b||t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0,target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{e.figure.selectedElements[0]instanceof y?(x("Cliquer sur une droite.",e.figure),e.figure.filter=t=>t instanceof b):(x("Cliquer sur un point.",e.figure),e.figure.filter=t=>t instanceof y)},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element;let i,s;e.figure.selectedElements[0]instanceof y?[i,s]=e.figure.selectedElements:[s,i]=e.figure.selectedElements,e.figure.create("LineParallel",{line:s,point:i}),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"waitingForFirstElement"}}}}},LINE_PERPENDICULAR:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur un point ou une droite.",e.figure),e.figure.filter=t=>t instanceof b||t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0,target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{e.figure.selectedElements[0]instanceof y?(x("Cliquer sur une droite.",e.figure),e.figure.filter=t=>t instanceof b):(x("Cliquer sur un point.",e.figure),e.figure.filter=t=>t instanceof y)},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element;let i,s;e.figure.selectedElements[0]instanceof y?[i,s]=e.figure.selectedElements:[s,i]=e.figure.selectedElements,e.figure.create("LinePerpendicular",{line:s,point:i}),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"waitingForFirstElement"}}}}},MARK_BETWEEN_POINTS:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{var t;x("Cliquer sur la première extrémité du segment ou sur un segment.",e.figure),((t=e.figure)==null?void 0:t.divMarkPalette)!==void 0&&(e.figure.divMarkPalette.style.display="flex"),e.figure.filter=i=>i instanceof y||i instanceof b},on:{clickLocation:[{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0&&e.element instanceof y,target:"waitingForSecondElement"},{actions:({context:e,event:t})=>{const i=t.element,s=i.point1,n=i.point2;e.figure.create("MarkBetweenPoints",{point1:s,point2:n}),e.figure.saveState()},guard:({event:e})=>e.element!==void 0&&e.element instanceof b,target:"waitingForFirstElement"}]},exit:({context:e})=>{var t;((t=e.figure)==null?void 0:t.divMarkPalette)!==void 0&&(e.figure.divMarkPalette.style.display="none")}},waitingForSecondElement:{entry:({context:e})=>{var t;((t=e.figure)==null?void 0:t.divMarkPalette)!==void 0&&(e.figure.divMarkPalette.style.display="flex"),x("Cliquer sur la deuxième extrémité du segment.",e.figure),e.figure.filter=i=>i instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element;const[i,s]=e.figure.selectedElements;e.figure.create("MarkBetweenPoints",{point1:i,point2:s}),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"waitingForFirstElement"}}}}},MESURE_SEGMENT:{initial:"waitingForFirstPoint",states:{waitingForFirstPoint:{entry:({context:e})=>{x("Cliquer sur le premier point.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i)},guard:({event:e})=>$(e),target:"waitingForSecondPoint"}}},waitingForSecondPoint:{entry:({context:e})=>{x("Cliquer sur le deuxième point.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements,o=e.figure.create("Distance",{point1:s,point2:n,precision:1}),r=e.figure.create("Middle",{point1:s,point2:n,isVisible:!1});e.figure.create("TextDynamicByPoint",{dynamicNumber:o,point:r,text:"",textBefore:"",textAfter:" cm",isVisible:!0,isSelectable:!0,anchor:"bottomCenter"}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForFirstPoint"}}}}},MESURE_ANGLE:{initial:"waitingForFirstPoint",states:{waitingForFirstPoint:{entry:({context:e})=>{x("Cliquer sur le premier point (pas le sommet de l'angle).",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i)},guard:({event:e})=>$(e),target:"waitingForSecondPoint"}}},waitingForSecondPoint:{entry:({context:e})=>{x("Cliquer sur le sommet de l'angle.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[1]=i)},guard:({event:e})=>$(e),target:"waitingForThirdPoint"}}},waitingForThirdPoint:{entry:({context:e})=>{x("Cliquer sur le troisième point.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[2]=i;const[s,n,o]=e.figure.selectedElements,r=e.figure.create("Angle",{start:s,center:n,end:o,precision:0}),a=e.figure.create("BisectorByPoints",{pointOnSide1:s,origin:n,pointOnSide2:o,isVisible:!1}),l=e.figure.create("PointOnLineAtDistance",{line:a,distance:1,isVisible:!1,isChild:!0});e.figure.create("TextDynamicByPoint",{dynamicNumber:r,point:l,text:"",textBefore:"",textAfter:"°",isVisible:!0,isSelectable:!0,anchor:"middleCenter"}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForFirstPoint"}}}}},MIDDLE:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur la première extrémité du segment ou sur un segment.",e.figure),e.figure.filter=t=>t instanceof y||t instanceof b},on:{clickLocation:[{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0&&e.element instanceof y,target:"waitingForSecondElement"},{actions:({context:e,event:t})=>{const i=t.element,s=i.point1,n=i.point2;e.figure.create("Middle",{point1:s,point2:n})},guard:({event:e})=>e.element!==void 0&&e.element instanceof b,target:"waitingForFirstElement"}]}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer sur la deuxième extrémité du segment.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element;const[i,s]=e.figure.selectedElements;e.figure.create("Middle",{point1:i,point2:s}),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"waitingForFirstElement"}}}}},MOVE_LABEL:{entry:({context:e})=>{x("Cliquer sur un point, sur un nom de point ou sur un texte.",e.figure),e.figure.filter=t=>t instanceof y&&t.elementTextLabel!==void 0||t instanceof pt||t instanceof Ct},initial:"waitingForPoint",states:{waitingForPoint:{on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element;i instanceof y?e.figure.inDrag=i.elementTextLabel:i instanceof Ct?e.figure.inDrag=i:i instanceof pt&&(e.figure.inDrag=i.point.elementTextLabel)},target:"waitingForPoint"}}}}},NAME_POINT:{initial:"waitingForPoint",states:{waitingForName:{entry:({context:e})=>{Pn(e.figure).showModal()},on:{TEXT_FROM_DIALOG:{actions:({context:e,event:t})=>{const i=e.temp.elements[0];i.label=t.text,e.figure.saveState()},target:"waitingForPoint"}}},waitingForPoint:{entry:({context:e})=>{e.figure.filter=t=>t instanceof y,x("Cliquer sur un point à renommer.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t,!1);i!==void 0&&(e.temp.elements[0]=i)},guard:({event:e})=>$(e),target:"waitingForName"}}}}},OPEN:{entry:({context:e})=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=i=>{var o;const s=(o=i.target.files)==null?void 0:o[0];if(s===void 0)return;const n=new FileReader;n.readAsText(s,"UTF-8"),n.onload=r=>{var l;const a=((l=r==null?void 0:r.target)==null?void 0:l.result)??"";typeof a=="string"&&a!==""&&e.figure.loadJson(JSON.parse(a),!0)}},t.click()}},OPTIONS:{entry:({context:e})=>{Mn(e.figure)}},PAUSE:{entry:({context:e})=>{x("",e.figure),e.intervalId!==void 0&&clearInterval(e.intervalId)}},PERPENDICULAR_BISECTOR:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur la première extrémité du segment.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element,e.figure.tempCreate("PerpendicularBisectorByPoints",{point1:e.figure.selectedElements[0],point2:e.figure.pointer})},guard:({event:e})=>e.element!==void 0,target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer sur la deuxième extrémité du segment.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element;const[i,s]=e.figure.selectedElements;e.figure.create("PerpendicularBisectorByPoints",{point1:i,point2:s}),e.figure.saveState()},target:"waitingForFirstElement"}}}}},PLAY:{entry:({context:e})=>{x("",e.figure),clearInterval(e.intervalId),e.figure.redo(),e.intervalId=setInterval(()=>{var t;if(e.figure.stackRedo.length===0){(t=e.figure.buttons.get("PAUSE"))==null||t.click(),clearInterval(e.intervalId);return}e.figure.redo()},e.figure.options.animationStepInterval)}},PLAY_SKIP_BACK:{entry:({context:e})=>{x("",e.figure),e.figure.undo()}},PLAY_SKIP_FORWARD:{entry:({context:e})=>{x("",e.figure),e.figure.redo()}},POINT:{entry:({context:e})=>{x("Cliquer pour créer un point.",e.figure),e.figure.filter=t=>t instanceof y,e.figure.currentState="POINT"},initial:"waitingForLocation",states:{waitingForLocation:{on:{clickLocation:{actions:({context:e,event:t})=>{var i;if(e.figure.hoverPoints.size>0){const s=[...e.figure.hoverPoints][0];e.figure.inDrag=s,e.figure.divFigure.style.cursor="move"}else{const{x:s,y:n}=t,o=((i=e.figure.options.limitNumberOfElement)==null?void 0:i.Point)??Number.POSITIVE_INFINITY,r=o===void 0||!Number.isFinite(o),a=[...e.figure.elements.values()].filter(c=>c instanceof y).length>o;if(!(!e.figure.options.gridWithTwoPointsOnSamePosition&&[...e.figure.elements.values()].filter(c=>c instanceof y&&c.isSelectable&&c.isVisible&&c.x===Math.round(s/e.figure.dx)*e.figure.dx&&c.y===Math.round(n/e.figure.dy)*e.figure.dy).length>0)&&(r||!a)){const c=at(e.figure);e.figure.create("Point",{x:s,y:n,label:c})}}e.figure.saveState()},target:"waitingForLocation"}}}},exit:({context:e})=>{e.figure&&(e.figure.currentState="")}},POINT_INTERSECTION:{entry:({context:e})=>{e.figure.filter=t=>t instanceof b||t instanceof E,e.figure.currentState="POINT_INTERSECTION"},exit:({context:e})=>{if(e.figure){e.figure.selectedElements=[];for(const t of e.figure.tmpElements)t.remove();e.figure.currentState=""}},initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur une droite, une demi-droite, un segment ou un cercle.",e.figure)},exit:({context:e})=>{var t;(t=e.figure.selectedElements[0])!=null&&t.isSelected&&(e.figure.selectedElements[0].isSelected=!1)},on:{clickLocation:[{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element,t.element.isSelected=!0},guard:({event:e})=>e.element!==void 0,target:"waitingForSecondElement"},{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.possibleElements[0],e.figure.selectedElements[1]=t.possibleElements[1];const[i,s]=e.figure.selectedElements,n=at(e.figure);i instanceof b?(s instanceof b&&e.figure.create("PointIntersectionLL",{line1:i,line2:s,label:n}),s instanceof E&&e.figure.create("PointsIntersectionLC",{circle:s,line:i}),e.figure.saveState()):i instanceof E&&(s instanceof b&&e.figure.create("PointsIntersectionLC",{circle:i,line:s}),s instanceof E&&e.figure.create("PointsIntersectionCC",{circle1:i,circle2:s}),e.figure.saveState())},guard:({event:e})=>e.possibleElements&&e.possibleElements.length===2,target:"waitingForFirstElement"}]}},waitingForSecondElement:{exit:({context:e})=>{if(e.figure){for(const t of e.figure.selectedElements)t.isSelected=!1;for(const t of e.figure.tmpElements)t.isSelected=!1}},on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[1]=t.element;const[i,s]=e.figure.selectedElements;i instanceof b?(s instanceof b&&e.figure.create("PointIntersectionLL",{line1:i,line2:s}),s instanceof E&&e.figure.create("PointsIntersectionLC",{circle:s,line:i}),e.figure.saveState()):i instanceof E&&(s instanceof b&&e.figure.create("PointsIntersectionLC",{circle:i,line:s}),s instanceof E&&e.figure.create("PointsIntersectionCC",{circle1:i,circle2:s}),e.figure.saveState())},guard:({event:e})=>e.element!==void 0,target:"waitingForFirstElement"}}}}},POINT_ON:{entry:({context:e})=>{e.figure.filter=t=>t instanceof b||t instanceof E||t instanceof kt,x("Cliquer sur un segment, un cercle ou une courbe.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{if(e.figure.selectedElements[0]=t.element,t.element instanceof b){const[i,s]=[t.element.point1,t.element.point2],n=((t.x-i.x)*(s.x-i.x)+(t.y-i.y)*(s.y-i.y))/I(i,s)**2,o=at(e.figure);e.figure.create("PointOnLine",{k:n,line:t.element,label:o}),e.figure.saveState()}else if(t.element instanceof E){const i=Math.atan2(t.y-t.element.center.y,t.x-t.element.center.x);e.figure.create("PointOnCircle",{angleWithHorizontal:i,circle:t.element}),e.figure.saveState()}else if(t.element instanceof kt){const i=t.x;e.figure.create("PointOnGraph",{x:i,graph:t.element}),e.figure.saveState()}},target:"#apiGeomUI.POINT_ON"}}},POLYGON:{id:"polygon",initial:"init",on:{STOPPOLYGON:"#polygon.STOPPOLYGON"},states:{init:{always:"waitingElement",entry:({context:e})=>{x("Cliquer sur un sommet du polygone.",e.figure),e.figure.filter=t=>t instanceof y}},STOPPOLYGON:{always:{target:"#polygon.waitingElement"},entry:({context:e})=>{const t=e.figure.create("Polygon",{points:e.figure.selectedElements,fillColor:e.figure.options.fillColor});for(const i of t.points)i.color=e.figure.options.colorPointPolygon;x("Cliquer sur un sommet pour créer un autre polygone.",e.figure),e.figure.saveState()}},waitingElement:{exit:({context:e})=>{var t;if((t=e.figure)!=null&&t.tmpElements)for(const i of e.figure.tmpElements)i.remove()},on:{clickLocation:[{actions:({context:e,event:t})=>{var s;e.figure.selectedElements.length>0?x("Cliquer sur un nouveau sommet ou sur le premier sommet pour terminer.",e.figure):x("Cliquer sur un sommet du polygone.",e.figure);const i=P(e,t);if(i!==void 0){i.shape=e.figure.options.tmpShape,i.color=e.figure.options.tmpColor,e.figure.selectedElements.push(i);const n=[...e.figure.selectedElements,e.figure.pointer];if((s=e.figure)!=null&&s.tmpElements){for(const o of e.figure.tmpElements)o instanceof j&&o.remove();e.figure.tmpElements=e.figure.tmpElements.filter(o=>!(o instanceof j))}n.length>=2&&e.figure.tempCreate("Polygon",{isBuiltWithSegments:!1,isChild:!0,color:e.figure.options.tmpColor,fillColor:e.figure.options.tmpFillColor,points:n})}},guard:({context:e,event:t})=>{if(e.figure.selectedElements.length<2)return $(t);const i=t.element,s=e.figure.selectedElements[0],n=(i==null?void 0:i.id)===(s==null?void 0:s.id);return $(t)&&!n}},{guard:({context:e,event:t})=>{if(e.figure.selectedElements.length>1){const i=t.element,s=e.figure.selectedElements[0];return(i==null?void 0:i.id)===(s==null?void 0:s.id)}return!1},target:"#polygon.STOPPOLYGON"}]}}}},RAY:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur l'origine de la demi-droite.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,e.figure.tempCreate("Ray",{point1:e.figure.selectedElements[0],point2:e.figure.pointer}))},guard:({event:e})=>$(e),target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer un point de la demi-droite.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements;e.figure.create("Ray",{point1:s,point2:n}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForFirstElement"}}}}},REDO:{entry:({context:e})=>{var t;e.figure.redo(),(t=e.figure.buttons.get("DRAG"))==null||t.click()}},REFLECTION:{entry:({context:e})=>{x("Cliquer sur le centre de la symétrie.",e.figure),e.figure.filter=t=>t instanceof y},exit:({context:e})=>{if(e.figure){e.figure.selectedElements=[];for(const t of e.figure.tmpElements)t.remove()}},initial:"waitingForCenter",states:{waitingForCenter:{on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0,target:"waitingForElement"}}},waitingForElement:{entry:({context:e})=>{x("Cliquer sur l'élément à transformer.",e.figure),e.figure.filter=i=>i instanceof y||i instanceof b||i instanceof E||i instanceof j;const t=e.figure.selectedElements[0];t!==void 0&&(e.figure.selectedElements[0]=t,e.figure.tmpElements.push(e.figure.pointer.reflect(t,{color:e.figure.options.tmpColor,isChild:!0,isSelectable:!1})))},on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element,s=e.figure.selectedElements[0];i!==void 0&&(i.reflect(s),e.figure.saveState(),e.figure.selectedElements[0]=s)},target:"waitingForElement"}}}}},REFLECTION_OVER_LINE:{entry:({context:e})=>{x("Cliquer sur l'axe de la symétrie.",e.figure),e.figure.filter=t=>t instanceof b},exit:({context:e})=>{if(e.figure){e.figure.selectedElements=[];for(const t of e.figure.tmpElements)t.remove()}},initial:"waitingForAxis",states:{waitingForAxis:{on:{clickLocation:{actions:({context:e,event:t})=>{e.figure.selectedElements[0]=t.element},guard:({event:e})=>e.element!==void 0,target:"waitingForOrigin"}}},waitingForOrigin:{entry:({context:e})=>{x("Cliquer sur l'élément à transformer.",e.figure),e.figure.filter=i=>i instanceof y||i instanceof b||i instanceof E||i instanceof j;const t=e.figure.selectedElements[0];t!==void 0&&(e.figure.selectedElements[0]=t,e.figure.tmpElements.push(e.figure.pointer.reflectOverLine(t,{color:e.figure.options.tmpColor,isChild:!0,isSelectable:!1})))},on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element,s=e.figure.selectedElements[0];i!==void 0&&(i.reflectOverLine(s),e.figure.saveState(),e.figure.selectedElements[0]=s)},guard:({event:e})=>e.element!==void 0,target:"waitingForOrigin"}}}}},REMOVE:{entry:({context:e})=>{x("Cliquer sur l'élément à supprimer.",e.figure),e.figure.filter=t=>t.isVisible&&t.isDeletable},on:{clickLocation:{actions:({context:e,event:t})=>{t.element.remove(),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"#apiGeomUI.REMOVE"}}},RESTART:{entry:({context:e})=>{x("",e.figure),e.figure.restart()}},ROTATE:{entry:({context:e})=>{e.figure.filter=t=>t instanceof y||t instanceof b},exit:({context:e})=>{if(e.figure){e.figure.selectedElements=[];for(const t of e.figure.tmpElements)t.remove()}},initial:"waitingForCenter",states:{waitingForAngle:{on:{ANGLE:{actions:({context:e,event:t})=>{const i=t.angle;e.temp.values[0]=i},target:"waitingForOrigin"}}},waitingForCenter:{entry:({context:e})=>{x("Cliquer sur le centre de rotation.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,Ln(e.figure).showModal())},guard:({event:e})=>$(e),target:"waitingForAngle"}}},waitingForOrigin:{entry:({context:e})=>{const t=e.figure.selectedElements[0],i=e.temp.values[0];e.figure.tmpElements.push(e.figure.pointer.rotate(t,i,{color:e.figure.options.tmpColor,isChild:!0,isSelectable:!1})),x("Cliquer sur l'élément à transformer.",e.figure),e.figure.filter=s=>s instanceof y||s instanceof b||s instanceof E||s instanceof j},on:{clickLocation:{actions:({context:e,event:t})=>{const i=e.figure.selectedElements[0],s=t.element,n=e.temp.values[0];s.rotate(i,n),e.figure.saveState(),e.figure.selectedElements[0]=i},guard:({event:e})=>e.element!==void 0,target:"waitingForOrigin"}}}}},SAVE:{entry:({context:e})=>{var o;const t=e.figure.getJsonWithHistory(),i=new Blob([t],{type:"text/plain"}),s=window.URL.createObjectURL(i),n=document.createElement("a");n.style.display="none",n.href=s,n.download="figure.json",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),(o=e.figure.buttons.get("DRAG"))==null||o.click()}},SEGMENT:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur la première extrémité du segment.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,e.figure.tempCreate("Segment",{point1:e.figure.selectedElements[0],point2:e.figure.pointer}))},guard:({event:e})=>$(e),target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer sur la deuxième extrémité du segment.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements;e.figure.create("Segment",{point1:s,point2:n}),e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForFirstElement"}}}}},SET_OPTIONS:{entry:({context:e})=>{e.figure.filter=t=>t instanceof S,e.figure.currentState="SET_OPTIONS"},on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element;i!==void 0&&(i.color=e.figure.options.color,i.thickness=e.figure.options.thickness,"isDashed"in i&&(i.isDashed=e.figure.options.isDashed),e.figure.options.fillColorAndBorderColorAreSame&&"fillColor"in i&&i.fillColor!=="none"&&(i.fillColor=e.figure.options.color))}}}},SHAKE:{always:"#apiGeomUI.DRAG",entry:async({context:e})=>{await e.figure.shake(),e.figure.saveState()}},TRANSLATION:{exit:({context:e})=>{if(e.figure)for(const t of e.figure.tmpElements)t.isSelectable=!1},initial:"waitingForFistPoint",states:{waitingForFistPoint:{entry:({context:e})=>{e.figure.filter=t=>t instanceof y,x("Cliquer sur le premier point qui définit de la translation.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element;e.temp.elements[0]=i,i.isSelected=!0},guard:({event:e})=>e.element!==void 0,target:"waitingForSecondPoint"}}},waitingForOrigin:{entry:({context:e})=>{x("Cliquer sur l'objet à transformer.",e.figure),e.figure.filter=t=>t instanceof y||t instanceof b||t instanceof E||t instanceof j},on:{clickLocation:{actions:({context:e,event:t})=>{const[i,s]=e.temp.elements;t.element.translate(i,s),e.figure.saveState()},guard:({event:e})=>e.element!==void 0,target:"waitingForOrigin"}}},waitingForSecondPoint:{entry:({context:e})=>{x("Cliquer sur le deuxième point qui définit de la translation.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=t.element;e.temp.elements[1]=i,i.isSelected=!0},guard:({event:e})=>e.element!==void 0,target:"waitingForOrigin"}}}}},UNDO:{entry:({context:e})=>{var t;e.figure.undo(),(t=e.figure.buttons.get("DRAG"))==null||t.click()}},VECTOR:{initial:"waitingForFirstElement",states:{waitingForFirstElement:{entry:({context:e})=>{x("Cliquer sur l'origine de la représentation du vecteur.",e.figure),e.figure.filter=t=>t instanceof y},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);i!==void 0&&(e.figure.selectedElements[0]=i,e.figure.tempCreate("Segment",{point1:e.figure.selectedElements[0],point2:e.figure.pointer,shape:"->"}))},guard:({event:e})=>$(e),target:"waitingForSecondElement"}}},waitingForSecondElement:{entry:({context:e})=>{x("Cliquer sur l'extrémité de la représentation du vecteur.",e.figure)},on:{clickLocation:{actions:({context:e,event:t})=>{const i=P(e,t);if(i!==void 0){e.figure.selectedElements[1]=i;const[s,n]=e.figure.selectedElements;e.figure.create("VectorByPoints",{point1:s,point2:n}),s.color="",n.color="",e.figure.saveState()}},guard:({event:e})=>$(e),target:"waitingForFirstElement"}}}}},ZOOM_IN:{initial:"zoom_in",states:{zoom_in:{entry:({context:e})=>{e.figure.zoomLevel*=Ue,e.figure.zoom(e.figure.zoomLevel)}}}},ZOOM_OUT:{initial:"zoom_out",states:{zoom_out:{entry:({context:e})=>{e.figure.zoomLevel*=Ge,e.figure.zoom(e.figure.zoomLevel)}}}}}},{actions:{eraseTempElements:({context:e})=>{for(const t of e.figure.tmpElements)t.remove()},highlightButton:({context:e,event:t})=>{const i=e.figure.buttons.get(t.type);i!==void 0&&(i.style.backgroundColor=Q),e.figure.buttons.forEach((s,n)=>{n!==t.type&&(s.style.backgroundColor="white")})},eraseUserMessage:({context:e})=>{x("",e.figure)}}});function P(e,t,i){if(t.element instanceof y)return t.element;const[s,n]=[t.x,t.y];if(t.possibleElements!==void 0&&t.possibleElements.length===2&&t.possibleElements[0]instanceof b&&t.possibleElements[1]instanceof b)return e.figure.create("PointIntersectionLL",{line1:t.possibleElements[0],line2:t.possibleElements[1]});if(t.element instanceof b){const[r,a]=[t.element.point1,t.element.point2],l=((s-r.x)*(a.x-r.x)+(n-r.y)*(a.y-r.y))/I(r,a)**2;return e.figure.create("PointOnLine",{k:l,line:t.element})}if(t.waitingWithModal===!0)return;const o=at(e.figure);return i?e.figure.create("Point",{x:s,y:n,label:o}):e.figure.create("Point",{x:s,y:n})}function $(e){return e.waitingWithModal===!1}function x(e,t){if(!t.options.automaticUserMessage)return;const i=t.divUserMessage;i!=null&&(i.innerHTML=t.isDynamic?e:"")}function re(e,t){if(e===void 0||typeof e!="string")return;const[i,s]=e.split(""),n=[...t.elements.values()].filter(a=>{var l;return a.type!=="pointer"&&((l=a.type)==null?void 0:l.includes("Point"))}),o=n.filter(a=>a.label===i),r=n.filter(a=>a.label===s);if(!(o.length!==1||r.length!==1))return[o[0],r[0]]}function at(e){let t;if(e.options.labelAutomaticBeginsWith!==void 0){let i=e.options.labelAutomaticBeginsWith.charCodeAt(0);const s=90;t=e.options.labelAutomaticBeginsWith;const n=t.endsWith("'");for(n&&(t=t.slice(0,-1));[...e.elements.values()].some(o=>"label"in o?o.label===t+(n?"'":""):!1);)i++,i>s&&(i=65),t=String.fromCharCode(i);t+=n?"'":""}return t}class zn extends $t{constructor({border:t=!1,dx:i=1,dy:s=1,height:n=400,isDynamic:o=!0,pixelsPerUnit:r=30,scale:a=1,snapGrid:l=!1,width:c=400,xMin:h=-10,xScale:d=1,yMin:p=-6,yScale:g=1}={}){super({border:t,dx:i,dy:s,height:n,isDynamic:o,pixelsPerUnit:r,scale:a,snapGrid:l,width:c,xMin:h,xScale:d,yMin:p,yScale:g}),this.ui=Te(An,{input:{figure:this,temp:{elements:[],htmlElement:[],values:[]}}}).start()}}const jn="data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m223.57%2081.81-41.38-41.38a22%2022%200%200%200-31.12%200L32.43%20159.07a22%2022%200%200%200%200%2031.11l30.07%2030.06a6%206%200%200%200%204.24%201.76H216a6%206%200%200%200%200-12h-89.51l97.08-97.08a22%2022%200%200%200%200-31.11ZM109.51%20210H69.22l-28.3-28.3a10%2010%200%200%201%200-14.15L96%20112.48%20151.52%20168Zm105.57-105.56L160%20159.51%20104.48%20104l55.08-55.07a10%2010%200%200%201%2014.14%200l41.38%2041.37a10%2010%200%200%201%200%2014.14Z'/%3e%3c/svg%3e",Un="data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M174%20128a6%206%200%200%201-6%206H88a6%206%200%200%201%200-12h80a6%206%200%200%201%206%206Zm56%200A102%20102%200%201%201%20128%2026a102.12%20102.12%200%200%201%20102%20102Zm-12%200a90%2090%200%201%200-90%2090%2090.1%2090.1%200%200%200%2090-90Z'/%3e%3c/svg%3e",Gn="data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M128%2026a102%20102%200%201%200%20102%20102A102.12%20102.12%200%200%200%20128%2026Zm0%20192a90%2090%200%201%201%2090-90%2090.1%2090.1%200%200%201-90%2090Zm46-90a6%206%200%200%201-6%206h-34v34a6%206%200%200%201-12%200v-34H88a6%206%200%200%201%200-12h34V88a6%206%200%200%201%2012%200v34h34a6%206%200%200%201%206%206Z'/%3e%3c/svg%3e";function Hn(e,t){let s=[...t.elements.values()].filter(n=>n.type!=="pointer").filter(n=>n.type===e.type);switch(e.type){case"Point":return s=s.filter(n=>n.type==="Point"),s=s.filter(n=>n.label===e.label),{isValid:s.length===1,result:s,type:e.type};case"Line":return s=s.filter(n=>n.type==="Line"),s=s.filter(n=>n.point1.label===e.point1&&n.point2.label===e.point2||n.point1.label===e.point2&&n.point2.label===e.point1),{isValid:s.length===1,result:s,type:e.type};case"Segment":return s=s.filter(n=>n.type==="Segment"),s=s.filter(n=>n.point1.label===e.point1&&n.point2.label===e.point2||n.point1.label===e.point2&&n.point2.label===e.point1),{isValid:s.length===1,result:s,type:e.type};case"Ray":return s=s.filter(n=>n.type==="Ray"),s=s.filter(n=>n.point1.label===e.point1&&n.point2.label===e.point2),{isValid:s.length===1,result:s,type:e.type};case"Circle":return s=s.filter(n=>n.type==="Circle"),s=s.filter(n=>n.center.label===e.center&&n.radius===e.radius),{isValid:s.length===1,result:s,type:e.type};case"CircleCenterPoint":return s=s.filter(n=>n.type==="CircleCenterPoint"),s=s.filter(n=>n.center.label===e.center&&n.radius===e.radius),{isValid:s.length===1,result:s,type:e.type};default:s=[]}return{isValid:!1,result:[],type:""}}export{C,S as E,$t as F,Vi as G,_i as L,y as P,Ri as R,zn as S,et as T,ni as a,Ke as b,gi as c,mi as d,ri as e,xi as f,u as g,Ze as h,I as i,Rn as j,Vn as k,Bn as l,St as m,Hn as n,V as o,Un as p,Gn as q,R as r,jn as s,an as t,Q as u,E as v};
//# sourceMappingURL=apigeom-CvUqzk7F.js.map
