{"version":3,"file":"4C22Old-C27aSiNB.js","sources":["../../src/exercices/4e/4C22Old.ts"],"sourcesContent":["import { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport {\n  choice,\n  combinaisonListes,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport { obtenirListeFractionsIrreductibles } from '../../lib/outils/deprecatedFractions'\nimport { context } from '../../modules/context'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { lettreDepuisChiffre } from '../../lib/outils/outilString'\n\nexport const titre = 'Multiplier ou/et diviser des fractions'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const dateDeModifImportante = '09/04/2022'\n\n/**\n * Exercice de calcul de produit de deux fractions.\n *\n * Paramétrages possibles :\n * * 1 : Produits de nombres positifs seulement\n * * 2 : deux questions niveau 1 puis deux questions niveau 3\n * * 3 : Produits de nombres relatifs\n * * Si décomposition cochée : les nombres utilisés sont plus importants.\n * @author Jean-Claude Lhote\n * Ajout d'une option pour ne pas exiger une fraction irréductible le 09/04/2022 par Guillaume Valmont\n */\nexport const uuid = '72ce7'\n\nexport const refs = {\n  'fr-fr': [],\n  'fr-ch': [],\n}\n\nconst space = '\\\\phantom{\\\\dfrac{(_(^(}{(_(^(}}' // Utilisé pour mettre de l'espace dans une fraction de fraction\nconst space2 = '\\\\phantom{(_(^(}' // Utilisé pour mettre de l'espace dans une fraction de fraction lorsque le numérateur ou le dénominateur est entier\n\nexport default class ExerciceMultiplierFractions extends Exercice {\n  constructor() {\n    super()\n    this.nbCols = 4 // Pour Latex\n    this.nbColsCorr = 2\n    this.besoinFormulaireTexte = [\n      'Niveau de difficulté',\n      'Nombres séparés par des tirets\\n1 : Un entier et une fraction (tout positif)\\n2 : Deux fractions à numérateurs et dénominateurs positifs\\n3 : Fractions avec nombres relatifs (au moins 2 négatifs)\\n4 : Mélange',\n    ]\n    this.besoinFormulaire2CaseACocher = [\n      'Avec décomposition en produit de facteurs premiers',\n    ]\n    this.besoinFormulaire3CaseACocher = ['Demander une fraction irréductible']\n    this.besoinFormulaire4Numerique = [\n      \"Type d'opération\",\n      3,\n      '1 : Multiplication\\n2 : Division\\n3 : Mélange',\n    ]\n    this.listeAvecNumerotation = false\n    this.sup = '2' // Avec ou sans relatifs\n    this.sup3 = true\n    if (context.isAmc)\n      this.titre =\n        'Multiplier des fractions et donner le résultat sous forme irréductible'\n    this.spacing = 3\n    this.spacingCorr = 3\n    this.nbQuestions = 5\n    this.sup2 = true // méthode de simplification par défaut = factorisation\n    this.sup4 = 1 // multiplications par défaut\n  }\n\n  nouvelleVersion() {\n    const listeFractions = obtenirListeFractionsIrreductibles()\n    const fractionIrreductibleDemandee = this.sup3\n    if (fractionIrreductibleDemandee) {\n      this.consigne = 'Calculer et donner le résultat sous forme irréductible.'\n    } else {\n      this.consigne = 'Calculer.'\n    }\n    const listeTypeDeQuestions = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 3,\n      melange: 4,\n      defaut: 2,\n      nbQuestions: this.nbQuestions,\n    })\n\n    // On choisit les opérations en fonction de this.sup4\n    const typesDoperation = []\n    if (this.sup4 % 2 === 1) typesDoperation.push('mul')\n    if (this.sup4 > 1) typesDoperation.push('div')\n    const listeTypesDoperation = combinaisonListes(\n      typesDoperation,\n      this.nbQuestions,\n    )\n    let nombreDeSigneMoins\n\n    for (\n      let i = 0,\n        a,\n        b,\n        c,\n        d,\n        texte,\n        texteCorr,\n        reponse,\n        typesDeQuestions,\n        cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      typesDeQuestions = listeTypeDeQuestions[i]\n      do {\n        ;[a, b] = choice(listeFractions)\n        ;[c, d] = choice(listeFractions)\n      } while ((a * c) % (b * d) === 0 || (a * c) % d === 0 || b * d === 100)\n      if (!this.sup2) {\n        // methode 1 : simplifications finale\n        switch (typesDeQuestions) {\n          case 1: {\n            // entier * fraction (tout positif)\n            if (a === 1) {\n              a = randint(2, 9)\n            }\n            b = 1\n            const tampon = c\n            c = d\n            d = tampon\n            break\n          }\n          case 2: // fraction * fraction tout positif\n            break\n\n          case 3:\n            do {\n              a = a * choice([-1, 1])\n              b = b * choice([-1, 1])\n              c = c * choice([-1, 1])\n              d = d * choice([-1, 1])\n              nombreDeSigneMoins =\n                Number(a < 0) + Number(b < 0) + Number(c < 0) + Number(d < 0)\n            } while (nombreDeSigneMoins < 2)\n            break\n        }\n      } else {\n        // méthode 2 : décomposition\n        let facteurA, facteurB\n        const listePremiers = shuffle([2, 3, 5, 7, 11])\n\n        do {\n          facteurA = listePremiers.pop() as number\n          facteurB = listePremiers.pop() as number\n          a = a * facteurA\n          d = d * facteurA\n          b = b * facteurB\n          c = c * facteurB\n        } while (\n          Math.abs(a) === Math.abs(b) &&\n          Math.abs(c) === Math.abs(d) &&\n          listePremiers.length > 1\n        )\n\n        switch (typesDeQuestions) {\n          case 1: // entier * fraction (tout positif)\n            b = 1\n            break\n          case 2: // fraction * fraction tout positif\n            break\n          case 3:\n            do {\n              a = a * choice([-1, 1])\n              b = b * choice([-1, 1])\n              c = c * choice([-1, 1])\n              d = d * choice([-1, 1])\n              nombreDeSigneMoins =\n                Number(a < 0) + Number(b < 0) + Number(c < 0) + Number(d < 0)\n            } while (nombreDeSigneMoins < 2)\n            break\n        }\n      }\n      const f1 = new FractionEtendue(a, b)\n      if (listeTypesDoperation[i] === 'mul') {\n        const f2 = new FractionEtendue(c, d)\n        texte = `$${lettreDepuisChiffre(i + 1)} = ${f1.texFraction}\\\\times${f2.texFraction}$`\n        texteCorr = `$\\\\begin{aligned}${lettreDepuisChiffre(i + 1)} &= ${f1.texProduitFraction(f2, this.sup2).replaceAll('=', '\\\\\\\\&=')}\\\\end{aligned}$`\n        reponse = f1.produitFraction(f2).simplifie()\n      } else {\n        const f2 = new FractionEtendue(d, c)\n        texte = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${(f1.den === 1 ? space2 : space) + f1.texFSD + (f1.den === 1 ? space2 : space)}}{${(f2.den === 1 ? space2 : space) + f2.texFraction + (f2.den === 1 ? space2 : space)}}$`\n        texteCorr = `$\\\\begin{aligned}${lettreDepuisChiffre(i + 1)} &= ${f1.texDiviseFraction(f2, this.sup2, '/').replaceAll('=', '\\\\\\\\&=')}\\\\end{aligned}$`\n        reponse = f1.diviseFraction(f2).simplifie()\n      }\n      if (this.questionJamaisPosee(i, a, b, c, d, typesDeQuestions)) {\n        // Si la question n'a jamais été posée, on en créé une autre\n        texte += ajouteChampTexteMathLive(\n          this,\n          i,\n          KeyboardType.clavierDeBaseAvecFraction,\n          { texteAvant: '$=$' },\n        )\n        handleAnswers(this, i, {\n          reponse: {\n            value: reponse.toLatex(),\n            options: { fractionIrreductible: fractionIrreductibleDemandee },\n          },\n        })\n\n        if (context.isAmc) {\n          texte =\n            'Calculer et donner le résultat sous forme irréductible\\\\\\\\\\n' +\n            texte\n          this.autoCorrection[i] = {\n            enonce: texte, // Si vide, l'énoncé est celui de l'exercice.\n            propositions: [\n              {\n                texte: '', // Si vide, le texte est la correction de l'exercice.\n              },\n            ],\n            reponse: {\n              // @ts-expect-error\n              valeur: [reponse], // obligatoire (la réponse numérique à comparer à celle de l'élève), NE PAS METTRE DE STRING à virgule ! 4.9 et non pas 4,9. Cette valeur doit être passée dans un tableau d'où la nécessité des crochets.\n              param: {\n                digits: 5,\n                digitsNum: 3,\n                digitsDen: 2,\n                signe: true,\n              },\n            },\n          }\n        }\n\n        // Uniformisation : Mise en place de la réponse attendue en interactif en orange et gras\n        const textCorrSplit = texteCorr.split('=')\n        let aRemplacer = textCorrSplit[textCorrSplit.length - 1]\n        const [result, end] = aRemplacer.split('\\\\end{aligned}')\n        aRemplacer = `${miseEnEvidence(result.trim())}\\\\end{aligned}${end ?? ''}`\n        textCorrSplit.length = textCorrSplit.length - 1\n        texteCorr = `${textCorrSplit.join('=')}=${aRemplacer}`\n        // Fin de cette uniformisation\n\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n\n    listeQuestionsToContenu(this) // Espacement de 2 em entre chaque questions.\n  }\n}\n"],"names":["titre","amcReady","amcType","interactifReady","interactifType","dateDeModifImportante","uuid","refs","space","space2","ExerciceMultiplierFractions","Exercice","context","listeFractions","obtenirListeFractionsIrreductibles","fractionIrreductibleDemandee","listeTypeDeQuestions","gestionnaireFormulaireTexte","typesDoperation","listeTypesDoperation","combinaisonListes","nombreDeSigneMoins","i","a","b","c","d","texte","texteCorr","reponse","typesDeQuestions","cpt","choice","facteurA","facteurB","listePremiers","shuffle","randint","tampon","f1","FractionEtendue","f2","lettreDepuisChiffre","ajouteChampTexteMathLive","KeyboardType","handleAnswers","textCorrSplit","aRemplacer","result","end","miseEnEvidence","listeQuestionsToContenu"],"mappings":"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"}