{"version":3,"file":"OutilSpline-DelMag2v.js","sources":["../../src/exercicesInteractifs/OutilSpline.svelte"],"sourcesContent":["<script>\n  import HeaderExerciceVueProf from '../components/shared/exercice/shared/headerExerciceVueProf/HeaderExerciceVueProf.svelte'\n  import CheckboxWithLabel from '../components/shared/forms/CheckboxWithLabel.svelte'\n  import InputNumber from '../components/shared/forms/InputNumber.svelte'\n  import { fixeBordures } from '../lib/2d/fixeBordures'\n  import { repere } from '../lib/2d/reperes'\n  import { spline, trieNoeuds } from '../lib/mathFonctions/Spline'\n  import { mathalea2d } from '../modules/mathalea2d'\n\n  export const titre = 'Interpolation par splines (avec formulaire)'\n\n  export const refs = {\n    'fr-fr': ['P022'],\n    'fr-ch': [],\n  }\n  export const uuid = 'spline'\n\n  export let indiceExercice\n  export let indiceLastExercice\n  const headerExerciceProps = {\n    title: '',\n    isInteractif: false,\n    settingsReady: false,\n    interactifReady: false,\n    randomReady: false,\n    correctionReady: false,\n  }\n  let noeuds = [\n    { x: -3, y: -2, deriveeGauche: 2, deriveeDroit: 2, isVisible: true },\n    { x: -1, y: 0, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n    { x: 1, y: -3, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n    { x: 3, y: 4, deriveeGauche: 1, deriveeDroit: 1, isVisible: true },\n  ]\n\n  let contenu = ''\n\n  function refreshCourb() {\n    if (trieNoeuds(noeuds)) {\n      const f = spline(noeuds)\n      const { xMin, xMax, yMin, yMax } = f.trouveMaxes()\n      const r = repere({ xMin, xMax, yMin, yMax })\n      const c = f.courbe({ repere: r, ajouteNoeuds: true })\n      const objets = [r, c]\n      contenu = mathalea2d(Object.assign({}, fixeBordures(objets)), objets)\n    }\n  }\n\n  function removeNoeud() {\n    if (noeuds.length < 4) return\n    noeuds.pop()\n    noeuds = noeuds\n    refreshCourb()\n  }\n\n  function addNoeud() {\n    noeuds.push({\n      x: noeuds.at(-1).x + 1,\n      y: noeuds.at(-1).y,\n      deriveeGauche: 0,\n      deriveeDroit: 0,\n      isVisible: true,\n    })\n    noeuds = noeuds\n    refreshCourb()\n  }\n\n  function copy() {\n    noeuds = noeuds\n    navigator.clipboard.writeText(JSON.stringify(noeuds))\n    alert('Noeuds copiés dans le presse-papier')\n  }\n\n  async function paste() {\n    const jsonNoeuds = (await navigator.clipboard.readText())\n      .replaceAll('x', '\"x\"')\n      .replaceAll('y', '\"y\"')\n      .replaceAll('deriveeGauche', '\"deriveeGauche\"')\n      .replaceAll('deriveeDroit', '\"deriveeDroit\"')\n      .replaceAll('isVisible', '\"isVisible\"')\n    try {\n      noeuds = JSON.parse(jsonNoeuds)\n      alert('Presse-papier importé')\n    } catch (e) {\n      console.error(e.message)\n    }\n  }\n\n  refreshCourb()\n</script>\n\n<div class=\"text-coopmaths-corpus dark:text-coopmathsdark-corpus\">\n  <HeaderExerciceVueProf\n    {indiceExercice}\n    {indiceLastExercice}\n    id=\"spline\"\n    {...headerExerciceProps}\n  />\n\n  <section>\n    <div class=\"grid grid-cols-2 gap-4\">\n      <div>\n        <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n        {@html contenu}\n      </div>\n      <div class=\"my-10 grid grid-cols-5 gap-4 text-center\">\n        <div>x</div>\n        <div>y</div>\n        <div>Dérivée à gauche</div>\n        <div>Dérivée à droite</div>\n        <div class=\"text-left\">Visible ?</div>\n        {#each noeuds as { x, y, deriveeGauche, deriveeDroit, isVisible }, i}\n          <InputNumber\n            id=\"spline-x-{i}\"\n            bind:value={x}\n            min={-10}\n            max={10}\n            step={0.1}\n            on:change={refreshCourb}\n          />\n          <InputNumber\n            id=\"spline-y-{i}\"\n            bind:value={y}\n            min={-10}\n            max={10}\n            step={0.1}\n            on:change={refreshCourb}\n          />\n          <InputNumber\n            id=\"spline-deriveeGauche-{i}\"\n            bind:value={deriveeGauche}\n            min={-10}\n            max={10}\n            step={0.1}\n            on:change={refreshCourb}\n          />\n          <InputNumber\n            id=\"spline-deriveeDroit-{i}\"\n            bind:value={deriveeDroit}\n            min={-10}\n            max={10}\n            step={0.1}\n            on:change={refreshCourb}\n          />\n          <CheckboxWithLabel\n            id=\"spline-visible-{i}\"\n            bind:isChecked={isVisible}\n            on:change={refreshCourb}\n          />\n        {/each}\n        <button on:click={removeNoeud} aria-label=\"Supprimer un noeud\"\n          ><i class=\"bx bx-lg bx-minus-circle\"></i></button\n        >\n        <button on:click={addNoeud} aria-label=\"Ajouter un noeud\"\n          ><i class=\"bx bx-lg bx-plus-circle\"></i></button\n        >\n        <button on:click={copy} aria-label=\"Copier\"\n          ><i class=\"bx bx-lg bx-clipboard\"></i></button\n        >\n        <button on:click={paste} aria-label=\"Coller\"\n          ><i class=\"bx bx-lg bx-download\"></i></button\n        >\n      </div>\n    </div>\n  </section>\n</div>\n"],"names":["titre","refs","uuid","indiceExercice","$.prop","$$props","indiceLastExercice","headerExerciceProps","noeuds","$.mutable_source","contenu","refreshCourb","trieNoeuds","$.get","f","spline","xMin","xMax","yMin","yMax","r","repere","c","objets","mathalea2d","fixeBordures","removeNoeud","$.set","addNoeud","copy","paste","jsonNoeuds","e","div","root","HeaderExerciceVueProf","node","$.spread_props","section","$.sibling","div_1","div_2","div_3","$.index","$$anchor","$$item","i","x","y","deriveeGauche","deriveeDroit","isVisible","InputNumber","node_3","$$value","node_4","node_5","node_6","CheckboxWithLabel","node_7","button","node_2","button_1","button_2","button_3","$.event"],"mappings":"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"}