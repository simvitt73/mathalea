{"version":3,"file":"5G11-6-BYN2CKwj.js","sources":["../../src/exercices/5e/5G11-6.ts"],"sourcesContent":["import { point } from '../../lib/2d/PointAbstrait'\nimport { papierPointe } from '../../lib/2d/reperes'\nimport { labelPoint } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { rotation } from '../../lib/2d/transformations'\nimport { longueur } from '../../lib/2d/utilitairesGeometriques'\nimport { choice, shuffle } from '../../lib/outils/arrayOutils'\nimport { PointCliquable, pointCliquable } from '../../modules/2dinteractif'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nexport const titre = 'Compl√©ter un nuage de points sym√©triques'\nexport const dateDePublication = '18/12/2021'\nexport const interactifReady = false\n// remettre interactif_Ready √† true qd l'exo sera refait avec apiGeom\nexport const interactifType = 'custom'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\n\n/**\n * Sym√©trie centrale sur papier point√©\n * @author Jean-Claude Lhote\n */\nexport const uuid = '2a611'\n\nexport const refs = {\n  'fr-fr': ['5G11-6'],\n  'fr-ch': ['9ES6-16'],\n}\nexport default class CompleterParSymetrie5e extends Exercice {\n  pointsNonSolution: PointCliquable[][]\n  pointsSolution: PointCliquable[][]\n  constructor() {\n    super()\n    this.besoinFormulaire2Numerique = [\n      'Type de papier point√©',\n      4,\n      '1 : Carr√©s\\n2 : Hexagones\\n3 : Triangles √©quilat√©raux\\n4 : M√©lange',\n    ]\n\n    this.nbQuestions = 1\n\n    this.sup2 = 1\n    this.pointsNonSolution = []\n    this.pointsSolution = []\n  }\n\n  nouvelleVersion() {\n    if (this.interactif)\n      this.consigne = 'Placer les points en cliquant, puis v√©rifier la r√©ponse.'\n    const couples = []\n    const pointsCliquables: PointCliquable[][] = [[]]\n    let pointsPossibles\n    const pointsChoisis = []\n    const pointsAffiches = []\n    const pointsEnPlusCorr = []\n\n    const typeDePapier = ['quad', 'quad', 'hexa', 'equi'] // l'√©l√©ment 0 sera chang√© al√©atoirement pour correspondre au type m√©lange (this.sup2 % 4)\n    for (\n      let i = 0,\n        cpt = 0,\n        papier,\n        image,\n        d,\n        O,\n        j,\n        trouve,\n        texte,\n        texteCorr,\n        objetsEnonce,\n        nbCouplesComplets,\n        objetsCorrection;\n      i < this.nbQuestions && cpt < 50;\n\n    ) {\n      typeDePapier[0] = typeDePapier[1 + (i % 3)]\n      // on remet √† vide tous les tableaux utilis√©s pour la question suivante\n      objetsEnonce = []\n      objetsCorrection = []\n      pointsChoisis.length = 0\n      pointsAffiches.length = 0\n      pointsEnPlusCorr.length = 0\n      this.pointsNonSolution[i] = []\n      this.pointsSolution[i] = []\n      pointsCliquables[i] = []\n      couples.length = 0\n\n      papier = papierPointe({\n        xmin: 0,\n        ymin: 0,\n        xmax: 10,\n        ymax: 10,\n        type: typeDePapier[this.sup2 === 4 ? 0 : this.sup2],\n      })\n\n      objetsEnonce.push(papier)\n\n      if (typeDePapier[this.sup2 === 4 ? 0 : this.sup2] === 'quad') {\n        O = point(5, 5, 'O')\n      } else {\n        O = point(4.33, 4.5, 'O')\n      }\n      d = tracePoint(O, context.isHtml ? 'blue' : 'black')\n      d.epaisseur = 2\n      d.style = '+'\n      objetsEnonce.push(d)\n      pointsPossibles = papier.listeCoords.slice()\n      // on pr√©pare les points cliquables pour la version interactive\n      if (this.interactif && context.isHtml) {\n        for (let p = 0; p < papier.listeCoords.length; p++) {\n          pointsCliquables[i].push(\n            pointCliquable(papier.listeCoords[p][0], papier.listeCoords[p][1], {\n              radius: 0.2,\n              color: 'red',\n              width: 2,\n              opacite: 0.7,\n            }),\n          )\n        }\n      }\n      while (pointsPossibles.length > 1) {\n        // si il n'en reste qu'un, on ne peut pas trouver de sym√©trique\n        image = rotation(\n          point(pointsPossibles[0][0], pointsPossibles[0][1]),\n          O,\n          180,\n        )\n        j = 1\n        trouve = false\n        while (j < pointsPossibles.length && !trouve) {\n          // si l'image est proche d'un point, c'est qu'on a deux sym√©triques donc un couple potentiel.\n          if (\n            longueur(\n              image,\n              point(pointsPossibles[j][0], pointsPossibles[j][1]),\n            ) < 0.5\n          ) {\n            trouve = true\n          } else j++\n        }\n        if (trouve) {\n          // on stocke le couple de sym√©trique en modifiant al√©atoirement l'ordre.\n          couples.push(\n            choice([true, false])\n              ? [pointsPossibles[0], pointsPossibles[j]]\n              : [pointsPossibles[j], pointsPossibles[0]],\n          )\n          pointsPossibles.splice(j, 1) // on retire d'abord le points d'indice j\n          pointsPossibles.splice(0, 1) // puis le point d'indice 0\n        } else {\n          pointsPossibles.splice(0, 1) // Le point d'indice 0 n'a pas de sym√©trique, on le retire\n        }\n      }\n      // la liste des couples est pr√™te, on va pouvoir choisir les points affich√©s et ceux qu'on n'affiche pas.\n      const nbCouplesChoisis = randint(8, 12)\n      const couplesChoisis = shuffle(couples).splice(0, nbCouplesChoisis)\n      for (let p = 0; p < couplesChoisis.length; p++) {\n        pointsChoisis.push(couplesChoisis[p][0], couplesChoisis[p][1])\n      }\n      nbCouplesComplets = randint(2, 5)\n      for (let p = 0; p < pointsChoisis.length; p += 2) {\n        if (p < nbCouplesComplets) {\n          // On affiche un certains nombre de couples\n          pointsAffiches.push(point(pointsChoisis[p][0], pointsChoisis[p][1]))\n          pointsAffiches.push(\n            point(pointsChoisis[p + 1][0], pointsChoisis[p + 1][1]),\n          )\n        } else {\n          // et on affiche un seul des points pour les couples restants\n          pointsAffiches.push(point(pointsChoisis[p][0], pointsChoisis[p][1]))\n          pointsEnPlusCorr.push(\n            point(pointsChoisis[p + 1][0], pointsChoisis[p + 1][1]),\n          )\n        }\n      }\n      for (let p = 0; p < pointsAffiches.length; p++) {\n        objetsEnonce.push(tracePoint(pointsAffiches[p]))\n      }\n      for (let p = 0; p < pointsEnPlusCorr.length; p++) {\n        objetsCorrection.push(tracePoint(pointsEnPlusCorr[p], 'red'))\n      }\n      for (let p = 0; p < pointsCliquables[i].length; p++) {\n        trouve = false\n        let q = 0\n        while (q < pointsEnPlusCorr.length && !trouve) {\n          if (\n            longueur(pointsEnPlusCorr[q], pointsCliquables[i][p].point) < 0.1\n          ) {\n            trouve = true\n            this.pointsSolution[i].push(pointsCliquables[i][p])\n          } else {\n            q++\n          }\n        }\n        if (!trouve) {\n          this.pointsNonSolution[i].push(pointsCliquables[i][p])\n        }\n      }\n      texte = context.isAmc\n        ? 'Voici une grille contenant des points et un centre de sym√©trie.<br>Ajouter un minimum de points afin que chacun des points ait son sym√©trique par rapport √† O.<br>√âcrire le nombre de points ajout√©s dans le cadre. Coder ensuite ce nombre de points.<br>'\n        : 'Voici une grille contenant des points et un centre de sym√©trie.<br>Ajouter un minimum de points afin que chacun des points ait son sym√©trique par rapport √† O.<br>'\n      texteCorr = ''\n      // On pr√©pare la figure...\n      texte += mathalea2d(\n        { xmin: -1, ymin: -1, xmax: 11, ymax: 11, scale: 0.5 },\n        ...objetsEnonce,\n        ...pointsCliquables[i],\n        labelPoint(O),\n      )\n      if (this.interactif && context.isHtml) {\n        texte += `<div id=\"resultatCheckEx${this.numeroExercice}Q${i}\"></div>`\n      }\n      texteCorr += mathalea2d(\n        { xmin: -1, ymin: -1, xmax: 11, ymax: 11, scale: 0.5 },\n        ...objetsEnonce,\n        ...objetsCorrection,\n        labelPoint(O),\n      )\n\n      if (\n        this.questionJamaisPosee(\n          i,\n          nbCouplesChoisis,\n          nbCouplesComplets,\n          pointsChoisis[0][0],\n          pointsChoisis[0][1],\n        )\n      ) {\n        if (context.isAmc) {\n          this.autoCorrection[i] = {\n            enonce: '',\n            enonceAvant: false,\n            propositions: [\n              {\n                type: 'AMCOpen',\n                propositions: [\n                  {\n                    enonce: texte,\n                    texte: texteCorr,\n                    statut: 1,\n                    pointilles: true,\n                  },\n                ],\n              },\n              {\n                type: 'AMCNum',\n                propositions: [\n                  {\n                    texte: '',\n                    statut: '',\n                    reponse: {\n                      texte: 'Nombre de points ajout√©s',\n                      valeur: [pointsEnPlusCorr.length],\n                      param: {\n                        digits: 2,\n                        signe: false,\n                        decimals: 0,\n                      },\n                    },\n                  },\n                ],\n              },\n            ],\n          }\n        }\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n\n  correctionInteractive = (i: number) => {\n    let resultat\n    let aucunMauvaisPointsCliques = true\n    for (const monPoint of this.pointsNonSolution[i]) {\n      if (monPoint.etat) aucunMauvaisPointsCliques = false\n      monPoint.stopCliquable()\n    }\n    for (const monPoint of this.pointsSolution[i]) {\n      if (!monPoint.etat) aucunMauvaisPointsCliques = false\n      monPoint.stopCliquable()\n    }\n    const spanFeedback = document.querySelector(\n      `#resultatCheckEx${this.numeroExercice}Q${i}`,\n    ) as HTMLSpanElement\n    for (let j = 0; j < this.pointsSolution[i].length; j++) {\n      this.pointsSolution[i][j].stopCliquable()\n    }\n    let etat = true\n    for (let k = 0; k < this.pointsSolution[i].length; k++) {\n      etat = etat && this.pointsSolution[i][k].etat\n    }\n    if (aucunMauvaisPointsCliques && etat) {\n      spanFeedback.innerHTML = 'üòé'\n      resultat = 'OK'\n    } else {\n      spanFeedback.innerHTML = '‚òπÔ∏è'\n      resultat = 'KO'\n    }\n    return resultat\n  }\n}\n"],"names":["titre","dateDePublication","interactifReady","interactifType","amcReady","amcType","uuid","refs","CompleterParSymetrie5e","Exercice","__publicField","i","resultat","aucunMauvaisPointsCliques","monPoint","spanFeedback","j","etat","k","couples","pointsCliquables","pointsPossibles","pointsChoisis","pointsAffiches","pointsEnPlusCorr","typeDePapier","cpt","papier","image","d","O","trouve","texte","texteCorr","objetsEnonce","nbCouplesComplets","objetsCorrection","papierPointe","point","tracePoint","context","p","pointCliquable","rotation","longueur","choice","nbCouplesChoisis","randint","couplesChoisis","shuffle","q","mathalea2d","labelPoint","listeQuestionsToContenu"],"mappings":"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"}