{"version":3,"file":"EN-shikaku-CCryI4ly.js","sources":["../../src/exercices/enigmes-jeux/svg/bluePolygon.svg","../../src/exercices/enigmes-jeux/EN-shikaku.ts"],"sourcesContent":["export default \"__VITE_ASSET__CE94e28M__\"","import Figure from 'apigeom'\nimport remove from 'apigeom/src/assets/svg/restart.svg'\nimport type { Coords } from 'apigeom/src/elements/calculus/Coords'\nimport {\n  orangeMathalea,\n  orangeMathaleaLight,\n} from 'apigeom/src/elements/defaultValues'\nimport figureApigeom from '../../lib/figureApigeom'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { range1 } from '../../lib/outils/nombres'\nimport { context } from '../../modules/context'\nimport { randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport bluePolygon from './svg/bluePolygon.svg'\n\nexport const dateDePublication = '31/07/2024'\nexport const dateDeModifImportante = '03/09/2024'\nexport const titre = 'Résoudre une grille de Shikaku'\nexport const interactifReady = true\nexport const interactifType = 'custom'\n\n/** Résoudre une grille de Shikaku\n * @author Eric Elter\n * Soutenu par Rémi Angot pour l'aide pour le développement avec ApiGeom\n */\n\nexport const uuid = 'ccf19'\nexport const refs = {\n  'fr-fr': ['EN-Shikaku'],\n  'fr-ch': [],\n}\n\ntype Cell = {\n  value: number | string\n  regionId: number\n}\n\ntype Rectangle = {\n  topLeft: [number, number]\n  bottomRight: [number, number]\n}\n\nexport default class shikaku extends Exercice {\n  // On déclare des propriétés supplémentaires pour cet exercice afin de pouvoir les réutiliser dans la correction\n  figure!: Figure\n  figureCorrection!: Figure\n  goodAnswers: Array<Coords[]>\n  longueur: number\n  largeur: number\n\n  constructor() {\n    super()\n    this.goodAnswers = []\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n\n    this.exoCustomResultat = true\n    this.besoinFormulaireTexte = [\n      'Hauteur de la grille',\n      'Choisir un nombre entier entre 2 et 15.',\n    ]\n    this.besoinFormulaire2Texte = [\n      'Longueur de la grille',\n      'Choisir un nombre entier entre 2 et 15.',\n    ]\n    this.besoinFormulaire3Texte = [\n      'Nombre minimum de rectangles ou carrés',\n      ' Choisir un nombre entier.',\n    ]\n    this.sup = 5\n    this.sup2 = 5\n    this.sup3 = 3\n    this.longueur = this.sup\n    this.largeur = this.sup2\n  }\n\n  nouvelleVersion(): void {\n    this.consigne =\n      'Cette grille de Shikaku doit être divisée en rectangles ou carrés, chacun contenant un seul nombre. Le nombre indique le nombre de cases que doit contenir le rectangle ou le carré. '\n    this.consigne +=\n      'Tous les rectangles et carrés doivent se toucher par leurs côtés et remplir la grille entière sans chevauchement. '\n    this.consigne +=\n      '<br>Pour être certain que rien ne se chevauche, les rectangles et carrés doivent tous avoir strictement la même couleur de fond. '\n    this.comment =\n      'Grâce au choix de la longueur et de la hauteur de la grille, vous pouvez graduer la difficulté des grilles SquarO proposés.'\n    this.comment +=\n      '<br>Si vous précisez un nombre minimum de rectangles ou carrés, alors si ce nombre minimum est trop élevé pour créer une grille pertinente pour la taille demandée, il ne sera pas pris en compte.'\n    this.longueur = Math.max(2, Math.min(parseInt(this.sup), 15)) || 2\n    this.largeur = Math.max(2, Math.min(parseInt(this.sup2), 15)) || 2\n    // Quand on duplique un exercice le numeroExercice ne semble pas se mettre à jour\n    this.figure = new Figure({\n      xMin: -0.25, // On enlève 0.25 unités\n      yMin: -0.25,\n      // width: this.longueur * 30 + 20, // On ajoute 20 pixels\n      // height: this.largeur * 30 + 20,\n      height: this.longueur * 30 + 20, // On ajoute 20 pixels\n      width: this.largeur * 30 + 20,\n      border: false,\n    })\n    this.figure.create('Grid', {\n      strokeWidthGrid: 1,\n      color: 'black',\n      yMin: 0,\n      // yMax: this.largeur,\n      // xMax: this.longueur,\n      xMax: this.largeur,\n      yMax: this.longueur,\n      xMin: 0,\n      axeX: false,\n      axeY: false,\n      labelX: false,\n      labelY: false,\n    })\n    this.figure.snapGrid = true\n    this.figure.options.color = 'blue'\n    this.figure.options.shape = 'o'\n    this.figure.options.labelIsVisible = false\n    this.figure.options.gridWithTwoPointsOnSamePosition = false // Pour éviter que deux points aient la même position\n    this.figure.setToolbar({ tools: ['DRAG', 'REMOVE'], position: 'top' })\n\n    // Figure correction\n    this.figureCorrection = new Figure({\n      xMin: -0.25,\n      yMin: -0.25,\n      // width: this.longueur * 30 + 20, // On ajoute 20 pixels\n      // height: this.largeur * 30 + 20,\n      height: this.longueur * 30 + 20, // On ajoute 20 pixels\n      width: this.largeur * 30 + 20,\n      border: false,\n    })\n    this.figureCorrection.create('Grid', {\n      strokeWidthGrid: 1,\n      color: 'black',\n      yMin: 0,\n      // yMax: this.largeur,\n      // xMax: this.longueur,\n      xMax: this.largeur,\n      yMax: this.longueur,\n      xMin: 0,\n      axeX: false,\n      axeY: false,\n      labelX: false,\n      labelY: false,\n    })\n    this.figureCorrection.snapGrid = true\n    this.figureCorrection.options.color = 'red'\n    this.figureCorrection.options.shape = 'o'\n    this.figureCorrection.options.labelIsVisible = false\n\n    const drawBluePolygon = () => {\n      this.figure.options.tmpShape = 'o'\n      this.figure.options.shape = '' // inutile car valeur par défaut\n      this.figure.options.tmpColor = 'blue'\n      this.figure.options.colorPointPolygon = 'none'\n      this.figure.options.color = orangeMathalea\n      this.figure.options.thickness = 3\n      this.figure.options.tmpFillColor = 'blue'\n      this.figure.options.fillColor = orangeMathalea\n      this.figure.ui?.send({ type: 'POLYGON' })\n    }\n    const eraseAllPoints = () => {\n      for (const element of this.figure.elements.values()) {\n        if (element.type === 'Point') {\n          element.remove()\n        }\n      }\n      this.figure.saveState()\n    }\n    this.figure.addCustomButton({\n      action: drawBluePolygon,\n      tooltip: 'Dessiner un polygone bleu',\n      url: bluePolygon,\n    })\n    this.figure.addCustomButton({\n      action: eraseAllPoints,\n      tooltip: 'Effacer tous les points',\n      url: remove,\n    })\n    const emplacementPourFigure = figureApigeom({\n      exercice: this,\n      i: 0,\n      figure: this.figure,\n    })\n    this.goodAnswers = []\n    const rows = this.largeur\n    const cols = this.longueur\n    let regionIdCounter = 1\n\n    // Processus de création d'une grille\n    let grid: Cell[][]\n    let rectangles: Rectangle[]\n\n    function isValidPlacement(\n      row: number,\n      col: number,\n      height: number,\n      width: number,\n    ): boolean {\n      if (row + height > rows || col + width > cols) return false\n      for (let r = row; r < row + height; r++) {\n        for (let c = col; c < col + width; c++) {\n          if (grid[r][c].value !== -1) return false\n        }\n      }\n      return true\n    }\n    function placeRegion(\n      row: number,\n      col: number,\n      height: number,\n      width: number,\n    ): void {\n      const value = height * width\n      const dejaMis = [] as number[]\n      for (let r = row; r < row + height; r++) {\n        for (let c = col; c < col + width; c++) {\n          const pourComparerAAire = choice(range1(value, dejaMis))\n          grid[r][c] = {\n            value: pourComparerAAire === value ? value : '',\n            regionId: regionIdCounter,\n          }\n          dejaMis.push(pourComparerAAire)\n        }\n      }\n      // rectangles.push({ topLeft: [col, row], bottomRight: [col + width - 1, row + height - 1] })\n      rectangles.push({\n        topLeft: [row, col],\n        bottomRight: [row + height - 1, col + width - 1],\n      })\n      regionIdCounter++\n    }\n\n    function generateGrid(): void {\n      for (let row = 0; row < rows; row++) {\n        for (let col = 0; col < cols; col++) {\n          if (grid[row][col].value === -1) {\n            let placed = false\n            while (!placed) {\n              const height = randint(1, rows - row)\n              const width = randint(1, cols - col)\n              if (isValidPlacement(row, col, height, width)) {\n                placeRegion(row, col, height, width)\n                placed = true\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Génération de la grille\n    let compteur = 0\n    do {\n      // Cette boucle doit tourner 1O fois maximum et s'arrêter dès que le nb de découpes est supérieur ou égal à this.sup3\n      grid = Array.from({ length: rows }, () =>\n        Array.from({ length: cols }, () => ({ value: -1, regionId: -1 })),\n      )\n      rectangles = []\n      generateGrid()\n      compteur++\n    } while (rectangles.length < parseInt(this.sup3) && compteur < 10)\n\n    // Rotation des grilles pour éviter d'avoir toujours les gros nombres en bas à gauche.\n\n    function rotate90(\n      grid: Cell[][],\n      rectangles: Rectangle[],\n    ): { grid: Cell[][]; rectangles: Rectangle[] } {\n      const n = grid.length\n      const newGrid: Cell[][] = Array.from({ length: n }, () =>\n        Array(n).fill({ value: ' ', regionId: -1 }),\n      )\n      for (let i = 0; i < n; i++) {\n        for (let j = 0; j < n; j++) {\n          newGrid[j][n - 1 - i] = grid[i][j]\n        }\n      }\n      const newRectangles = rectangles.map((rect) => ({\n        // topLeft: [n - 1 - rect.bottomRight[1], rect.topLeft[0]],\n        // bottomRight: [n - 1 - rect.topLeft[1], rect.bottomRight[0]]\n        topLeft: [rect.topLeft[1], n - 1 - rect.bottomRight[0]],\n        bottomRight: [rect.bottomRight[1], n - 1 - rect.topLeft[0]],\n      })) as Rectangle[]\n      return { grid: newGrid, rectangles: newRectangles }\n    }\n\n    function rotate180Carree(\n      grid: Cell[][],\n      rectangles: Rectangle[],\n    ): { grid: Cell[][]; rectangles: Rectangle[] } {\n      const n = grid.length\n      const newGrid: Cell[][] = Array.from({ length: n }, () =>\n        Array(n).fill({ value: ' ', regionId: -1 }),\n      )\n      for (let i = 0; i < n; i++) {\n        for (let j = 0; j < n; j++) {\n          newGrid[n - 1 - i][n - 1 - j] = grid[i][j]\n        }\n      }\n      const newRectangles = rectangles.map((rect) => ({\n        topLeft: [n - 1 - rect.bottomRight[0], n - 1 - rect.bottomRight[1]],\n        bottomRight: [n - 1 - rect.topLeft[0], n - 1 - rect.topLeft[1]],\n      })) as Rectangle[]\n      return { grid: newGrid, rectangles: newRectangles }\n    }\n\n    function rotate180NonCarree(\n      grid: Cell[][],\n      rectangles: Rectangle[],\n    ): { grid: Cell[][]; rectangles: Rectangle[] } {\n      const rows = grid.length\n      const cols = grid[0].length\n      const newGrid: Cell[][] = Array.from({ length: rows }, () =>\n        Array(cols).fill({ value: ' ', regionId: -1 }),\n      )\n      for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n          newGrid[rows - 1 - i][cols - 1 - j] = grid[i][j]\n        }\n      }\n      const newRectangles = rectangles.map((rect) => ({\n        topLeft: [\n          rows - 1 - rect.bottomRight[0],\n          cols - 1 - rect.bottomRight[1],\n        ],\n        bottomRight: [rows - 1 - rect.topLeft[0], cols - 1 - rect.topLeft[1]],\n        // bottomRight: [rows - 1 - rect.bottomRight[0], cols - 1 - rect.bottomRight[1]],\n        // topLeft: [rows - 1 - rect.topLeft[0], cols - 1 - rect.topLeft[1]]\n      })) as Rectangle[]\n      return { grid: newGrid, rectangles: newRectangles }\n    }\n\n    function rotate270(\n      grid: Cell[][],\n      rectangles: Rectangle[],\n    ): { grid: Cell[][]; rectangles: Rectangle[] } {\n      const n = grid.length\n      const newGrid: Cell[][] = Array.from({ length: n }, () =>\n        Array(n).fill({ value: ' ', regionId: -1 }),\n      )\n      for (let i = 0; i < n; i++) {\n        for (let j = 0; j < n; j++) {\n          newGrid[n - 1 - j][i] = grid[i][j]\n        }\n      }\n      const newRectangles = rectangles.map((rect) => ({\n        //  topLeft: [rect.topLeft[1], n - 1 - rect.bottomRight[0]],\n        // bottomRight: [rect.bottomRight[1], n - 1 - rect.topLeft[0]]\n        bottomRight: [n - 1 - rect.topLeft[1], rect.bottomRight[0]],\n        topLeft: [n - 1 - rect.bottomRight[1], rect.topLeft[0]],\n      })) as Rectangle[]\n      return { grid: newGrid, rectangles: newRectangles }\n    }\n\n    let result = { grid, rectangles }\n\n    if (this.largeur === this.longueur) {\n      // Si la grille est carrée, 3 rotations + l'identité sont possibles\n      const choixRotation = choice(range1(4))\n      switch (choixRotation) {\n        case 2: {\n          result = rotate90(grid, rectangles)\n          // result = { grid, rectangles }\n          break\n        }\n        case 3: {\n          result = rotate180Carree(grid, rectangles)\n          break\n        }\n        case 4: {\n          result = rotate270(grid, rectangles)\n          break\n        }\n      }\n    } else {\n      switch (choice(range1(2))) {\n        case 2: {\n          result = rotate180NonCarree(grid, rectangles)\n          break\n        }\n      }\n    }\n    const newGrid = result.grid\n    const newRectangles = result.rectangles\n\n    /*\n    function displayRectanglesBeforeAndAfterRotation (\n      grid: Cell[][],\n      rectangles: Rectangle[]\n    ): void {\n      // Appel de la fonction pour effectuer la rotation\n      rectangles.forEach((rect, index) => {\n        const originalTopLeft = rect.topLeft\n        const originalBottomRight = rect.bottomRight\n\n        const rotatedTopLeft = result.rectangles[index].topLeft\n        const rotatedBottomRight = result.rectangles[index].bottomRight\n\n        console log(`Rectangle ${index + 1}:`)\n        console log(`  Avant rotation : topLeft = [${originalTopLeft}], bottomRight = [${originalBottomRight}]`)\n        console log(`  Après rotation : topLeft = [${rotatedTopLeft}], bottomRight = [${rotatedBottomRight}]`)\n      })\n    }\n    displayRectanglesBeforeAndAfterRotation(grid, rectangles)\n    */\n    // Positionnement des chiffres dans une grille\n    for (let j = 0; j < this.largeur; j++) {\n      for (let i = 0; i < this.longueur; i++) {\n        this.figure.create('TextByPosition', {\n          isDeletable: false,\n          anchor: 'middleCenter',\n          text: newGrid[this.largeur - j - 1][i].value.toString(),\n          //  x: i + 0.5,\n          //  y: this.largeur - j - 0.5\n          y: i + 0.5,\n          x: this.largeur - j - 0.5,\n        })\n        this.figureCorrection.create('TextByPosition', {\n          anchor: 'middleCenter',\n          text: newGrid[this.largeur - j - 1][i].value.toString(),\n          // x: i + 0.5,\n          // y: this.largeur - j - 0.5\n          y: i + 0.5,\n          x: this.largeur - j - 0.5,\n        })\n      }\n    }\n    for (let k = 0; k < newRectangles.length; k++) {\n      const A = this.figure.create('Point', {\n        x: newRectangles[k].bottomRight[0] + 1,\n        y: newRectangles[k].bottomRight[1] + 1,\n        isVisible: false,\n      })\n      const B = this.figure.create('Point', {\n        x: newRectangles[k].bottomRight[0] + 1,\n        y: newRectangles[k].topLeft[1],\n        isVisible: false,\n      })\n      const C = this.figure.create('Point', {\n        x: newRectangles[k].topLeft[0],\n        y: newRectangles[k].topLeft[1],\n        isVisible: false,\n      })\n      const D = this.figure.create('Point', {\n        x: newRectangles[k].topLeft[0],\n        y: newRectangles[k].bottomRight[1] + 1,\n        isVisible: false,\n      })\n      this.goodAnswers.push([\n        { x: A.x, y: A.y },\n        { x: B.x, y: B.y },\n        { x: C.x, y: C.y },\n        { x: D.x, y: D.y },\n      ])\n      this.figureCorrection.create('Polygon', {\n        points: [A, B, C, D],\n        thickness: 3,\n        color: orangeMathalea,\n        fillColor: orangeMathaleaLight,\n      })\n    }\n    function handleExercicesAffiches() {\n      drawBluePolygon()\n      document.removeEventListener('exercicesAffiches', handleExercicesAffiches)\n    }\n    document.addEventListener('exercicesAffiches', handleExercicesAffiches)\n\n    let texteCorr =\n      'Voici une solution possible :<br>' +\n      this.figureCorrection.getStaticHtml()\n    let texte = emplacementPourFigure\n\n    // Construction de la grille au format voulu par ProfCollege... Inutile finalement car on se passe de ProfCollege pour la correction.\n    const tabProfCollege: string[] = []\n    for (let j = 0; j < this.largeur; j++) {\n      for (let i = 0; i < this.longueur; i++) {\n        let contenuCasePC: string = ''\n        if (\n          i !== 0 &&\n          newGrid[this.largeur - j - 1][i].regionId !==\n            newGrid[this.largeur - j - 1][i - 1].regionId\n        )\n          contenuCasePC = '1'\n        if (\n          j !== this.largeur - 1 &&\n          newGrid[this.largeur - j - 1][i].regionId !==\n            newGrid[this.largeur - j - 2][i].regionId\n        )\n          contenuCasePC += 'b'\n        contenuCasePC += '/' + newGrid[this.largeur - j - 1][i].value.toString()\n        tabProfCollege.push(contenuCasePC)\n      }\n    }\n\n    if (!context.isHtml) {\n      texte += '<br>' + this.figure.latex({ includePreambule: false })\n      texteCorr = this.figureCorrection.latex({ includePreambule: false })\n    }\n\n    this.listeQuestions.push(texte)\n    this.listeCorrections.push(texteCorr)\n  }\n\n  correctionInteractive = () => {\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la réponse pour Capytale\n    this.answers[this.figure.id] = this.figure.json\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q${0}`,\n    ) as HTMLDivElement\n    let validUnPolygone = true\n    const nbPolygon = [...this.figure.elements.values()].filter(\n      (e) => e.type === 'Polygon',\n    ).length\n\n    let isValid = nbPolygon === this.goodAnswers.length\n    let message: string\n\n    if (!isValid) {\n      if (nbPolygon > this.goodAnswers.length)\n        message = 'Trop de polygones ont été tracés.'\n      else if (nbPolygon > 0) message = 'Trop peu de polygones ont été tracés.'\n      else message = \"Aucun polygone n'a été tracé.\"\n      divFeedback.innerHTML = message\n      return ['KO']\n    }\n\n    for (let i = 0; i < this.goodAnswers.length; i++) {\n      validUnPolygone = this.figure.checkPolygon({\n        points: this.goodAnswers[i],\n      }).isValid\n      isValid &&= validUnPolygone\n    }\n\n    this.figure.isDynamic = false\n    this.figure.divButtons.style.display = 'none'\n    this.figure.divUserMessage.style.display = 'none'\n    this.figure.buttons.get('SHAKE')?.click()\n    if (isValid) {\n      divFeedback.innerHTML = 'Bravo !'\n      return ['OK']\n    }\n    divFeedback.innerHTML = \"Au moins un polygone n'a pas la bonne aire.\"\n    return ['KO']\n  }\n}\n"],"names":["bluePolygon","dateDePublication","dateDeModifImportante","titre","interactifReady","interactifType","uuid","refs","shikaku","Exercice","__publicField","divFeedback","validUnPolygone","nbPolygon","e","isValid","message","i","_a","Figure","drawBluePolygon","orangeMathalea","eraseAllPoints","element","remove","emplacementPourFigure","figureApigeom","rows","cols","regionIdCounter","grid","rectangles","isValidPlacement","row","col","height","width","r","c","placeRegion","value","dejaMis","pourComparerAAire","choice","range1","generateGrid","placed","randint","compteur","rotate90","n","newGrid","j","newRectangles","rect","rotate180Carree","rotate180NonCarree","rotate270","result","k","A","B","C","D","orangeMathaleaLight","handleExercicesAffiches","texteCorr","texte","contenuCasePC","context"],"mappings":"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"}