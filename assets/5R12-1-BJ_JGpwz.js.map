{"version":3,"file":"5R12-1-BJ_JGpwz.js","sources":["../../src/exercices/5e/5R12-1.ts"],"sourcesContent":["import Figure from 'apigeom'\nimport type TextByPosition from 'apigeom/src/elements/text/TextByPosition'\nimport figureApigeom from '../../lib/figureApigeom'\nimport { shuffle } from '../../lib/outils/arrayOutils'\nimport { context } from '../../modules/context'\nimport { randint } from '../../modules/outils'\nimport ExerciceSimple from '../ExerciceSimple'\n\nexport const titre = 'Placer des points dans un repère'\nexport const dateDePublication = '27/10/2023'\nexport const interactifReady = true\nexport const interactifType = 'custom'\nexport const amcReady = true\nexport const amcType = 'AMCOpen'\n\n/**\n * Placer des points dans un repère\n * @author Rémi Angot\n */\nexport const uuid = '4dadb'\n\nexport const refs = {\n  'fr-fr': ['5R12-1', '3AutoG01-1'],\n  'fr-ch': ['9FA1-6'],\n}\n\n// Type simplifié pour la sauvegarde de la réponse\ntype Coords = { label: string; x: number; y: number }\n\nclass ReperagePointDuPlan extends ExerciceSimple {\n  // On déclare des propriétés supplémentaires pour cet exercice afin de pouvoir les réutiliser dans la correction\n  figure!: Figure\n  points: Coords[] = []\n  constructor() {\n    super()\n    this.typeExercice = 'simple'\n    this.exoCustomResultat = true // Pour qu'une unique question puisse rapporter plusieurs points\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n    this.formatChampTexte = 'none' // Pour un exercice de type simple qui n'utilise pas le champ de réponse\n    this.reponse = ''\n  }\n\n  nouvelleVersion(): void {\n    this.figure = new Figure({\n      snapGrid: true,\n      xMin: -6.3,\n      yMin: -6.3,\n      width: 378,\n      height: 378,\n    })\n    this.figures = [this.figure]\n    // De -6.3 à 6.3 donc width = 12.6 * 30 = 378\n    this.figure.create('Grid', { xMin: -6, yMin: -6, xMax: 6, yMax: 6 })\n    this.figure.options.labelAutomaticBeginsWith = 'A' // Les points sont nommés par ordre alphabétique\n    if ('Point' in this.figure.options.limitNumberOfElement)\n      this.figure.options.limitNumberOfElement.Point = 4 // On limite le nombre de points à 4\n    this.figure.options.pointDescriptionWithCoordinates = false\n\n    let x1 = randint(-6, -1)\n    let x2 = randint(1, 6, x1)\n    let x3 = randint(-6, 6, [0, x1, x2])\n    let x4 = 0\n    let y1 = randint(-6, -1)\n    let y2 = randint(1, 6, y1)\n    let y3 = randint(-6, 6, [0, y1, y2])\n    let y4 = 0\n    // On mélange en évitant le couple (0,0)\n    while (\n      [\n        [x1, y1],\n        [x2, y2],\n        [x3, y3],\n        [x4, y4],\n      ].some((e) => e[0] === 0 && e[1] === 0)\n    ) {\n      ;[x1, x2, x3, x4] = shuffle([x1, x2, x3, x4])\n      ;[y1, y2, y3, y4] = shuffle([y1, y2, y3, y4])\n    }\n    this.points = [\n      { label: 'A', x: x1, y: y1 },\n      { label: 'B', x: x2, y: y2 },\n      { label: 'C', x: x3, y: y3 },\n      { label: 'D', x: x4, y: y4 },\n    ]\n    const figureCorr = new Figure({\n      snapGrid: true,\n      xMin: -7,\n      yMin: -7,\n      width: 420,\n      height: 420,\n      isDynamic: false,\n    })\n    this.figures.push(figureCorr)\n    figureCorr.setToolbar({ tools: ['REMOVE'], position: 'top' })\n    figureCorr.create('Grid', { xMin: -6, yMin: -6, xMax: 6, yMax: 6 })\n    for (const coord of this.points) {\n      figureCorr.create('Point', {\n        x: coord.x,\n        y: coord.y,\n        color: 'green',\n        thickness: 3,\n        label: coord.label,\n      })\n    }\n    let enonce = 'Placer les points suivants : '\n    enonce += `$A(${x1}\\\\;;\\\\;${y1})$ ; $B(${x2}\\\\;;\\\\;${y2})$ ; $C(${x3}\\\\;;\\\\;${y3})$ et $D(${x4}\\\\;;\\\\;${y4})$.`\n    // this.figure.divButtons = this.figure.addButtons('POINT DRAG REMOVE')\n    this.figure.setToolbar({\n      tools: ['POINT', 'DRAG', 'REMOVE'],\n      position: 'top',\n    })\n    if (context.isHtml) {\n      if (this.interactif) {\n        this.question =\n          enonce +\n          '<br>' +\n          figureApigeom({\n            exercice: this,\n            i: 0,\n            figure: this.figure,\n            isDynamic: true,\n            defaultAction: 'POINT',\n          })\n      } else {\n        this.question =\n          enonce +\n          '<br>' +\n          figureApigeom({\n            exercice: this,\n            i: 0,\n            figure: this.figure,\n            isDynamic: false,\n          })\n      }\n      this.correction = figureApigeom({\n        exercice: this,\n        i: 0,\n        figure: figureCorr,\n        isDynamic: false,\n        idAddendum: 'correction',\n      })\n    } else {\n      this.question =\n        enonce +\n        `\\n\\n\\\\bigskip\\n{\\\\Reperage[Plan,AffichageGrad,Unitex=0.75,Unitey=0.75]{%\n        -5/0/A,0/-5/B,5/0/C,0/5/D%\n        }}`\n      this.correction = `{\\\\Reperage[Plan,AffichageGrad,Unitesx=0.75,Unitey=0.75,Traces={%\n        drawoptions(withcolor red);\n        pointe(A,B,C,D);\n        label.urt(btex A etex,A);\n        label.urt(btex B etex,B);\n        label.urt(btex C etex,C);\n        label.urt(btex D etex,D);\n      }]{%\n        -5/0/ ,0/-5/ ,5/0/ ,0/5/ ,${x1}/${y1}/A,${x2}/${y2}/B,${x3}/${y3}/C,${x4}/${y4}/D%\n        }}`\n    }\n    if (context.isAmc) {\n      this.autoCorrection[0] = {\n        enonce: this.question,\n        propositions: [\n          {\n            texte: '',\n            statut: 1, // OBLIGATOIRE (ici c'est le nombre de lignes du cadre pour la réponse de l'élève sur AMC)\n            sanscadre: true, // EE : ce champ est facultatif et permet (si true) de cacher le cadre et les lignes acceptant la réponse de l'élève\n          },\n        ],\n      }\n    }\n  }\n\n  correctionInteractive = () => {\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la réponse pour Capytale\n    this.answers[this.figure.id] = this.figure.json\n    const resultat = [] // Tableau de 'OK' ou de'KO' pour le calcul du score\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q0`,\n    )\n    for (const coord of this.points) {\n      const { points, isValid, message } = this.figure.checkCoords({\n        label: coord.label,\n        x: coord.x,\n        y: coord.y,\n      })\n      // Point par point, je vérifie que le label et les coordonnées correspondent\n      if (isValid) {\n        resultat.push('OK')\n      } else {\n        if (divFeedback != null) {\n          divFeedback.innerHTML += message + '<br>'\n        }\n        if (points[0] !== undefined) {\n          const point = points[0]\n          point.color = 'red'\n          point.thickness = 3\n          const textLabel = point.elementTextLabel as TextByPosition\n          // Là aussi je rajoute as TextByPosition car je suis sûr que ce point a un label\n          textLabel.color = 'red'\n        }\n        const pointCorr = this.figure.create('Point', {\n          x: coord.x,\n          y: coord.y,\n          color: 'green',\n          thickness: 3,\n          label: coord.label,\n        })\n        const pointCorrLabel = pointCorr.elementTextLabel as TextByPosition\n        pointCorrLabel.color = 'green'\n        resultat.push('KO')\n      }\n    }\n    this.figure.isDynamic = false\n    this.figure.divButtons.style.display = 'none'\n    this.figure.divUserMessage.style.display = 'none'\n    return resultat\n  }\n}\n\nexport default ReperagePointDuPlan\n"],"names":["titre","dateDePublication","interactifReady","interactifType","amcReady","amcType","uuid","refs","ReperagePointDuPlan","ExerciceSimple","__publicField","resultat","divFeedback","coord","points","isValid","message","point","textLabel","pointCorrLabel","Figure","x1","randint","x2","x3","x4","y1","y2","y3","y4","e","shuffle","figureCorr","enonce","context","figureApigeom"],"mappings":"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"}