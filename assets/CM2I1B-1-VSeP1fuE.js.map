{"version":3,"file":"CM2I1B-1-VSeP1fuE.js","sources":["../../src/exercices/CM2/CM2I1B-1.ts"],"sourcesContent":["/* eslint-disable camelcase */\nimport { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { texteParPositionEchelle } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { propositionsQcm } from '../../lib/interactif/qcm'\nimport {\n  choixDeroulant,\n  listeDeroulanteToQcm,\n} from '../../lib/interactif/questionListeDeroulante'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { texteEnCouleurEtGras } from '../../lib/outils/embellissements'\nimport { ajouterLien } from '../../lib/outils/enrichissements'\nimport { stringNombre } from '../../lib/outils/texNombre'\nimport {\n  allerA,\n  angleScratchTo2d,\n  attendre,\n  baisseCrayon,\n  clone,\n  creerLutin,\n  orienter,\n} from '../../modules/2dLutin'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  noteLaCouleur,\n  plateau2dNLC,\n  testInstruction,\n  testSequence,\n  traducColor,\n  traducNum,\n  type CouleurNLC,\n} from '../../modules/noteLaCouleur'\nimport {\n  contraindreValeur,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport { scratchblock } from '../../modules/scratchblock'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Note la couleur (Scratch)'\nexport const interactifReady = true\nexport const interactifType = 'listeDeroulante'\nexport const dateDeModifImportante = '14/09/2024'\nexport const dateDePublication = '11/04/2021'\n\n/**\n * Note_la_couleur() Exercice inspiré de l'activité débranchée de Jean-Yves Labouche Note La Couleur\n * https://www.monclasseurdemaths.fr/profs/algorithmique-scratch/note-la-couleur/\n * variante de 6I11 avec des dalles de 20 x 20\n * @author Jean-Claude Lhote\n */\nexport const uuid = 'e380b'\n\nexport const refs = {\n  'fr-fr': ['CM2I1B-1'],\n  'fr-2016': ['c3I11'],\n  'fr-ch': [],\n}\nexport default class NoteLaCouleurC3 extends Exercice {\n  relatif = false\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Type de plateau',\n      4,\n      '1 : Plateau couleur sans numéro\\n2 : Plateau couleur avec numéros\\n3 : Plateau noir et blanc avec nom des couleurs\\n4 : Plateau noir et blanc avec numéros',\n    ]\n    this.besoinFormulaire2CaseACocher = ['Graduations', true]\n    this.besoinFormulaire3Numerique = ['Nombre de couleurs (Maximum 6)', 6]\n    this.besoinFormulaire4CaseACocher = ['Plateau de jeu original', false]\n\n    this.nbQuestions = 1\n    this.typeExercice = 'Scratch'\n    this.sup = 1\n    this.sup2 = true\n    this.sup3 = 4\n    this.sup4 = true\n    this.relatif = false\n    this.correctionDetailleeDisponible = true\n    this.correctionDetaillee = true\n  }\n\n  nouvelleVersion() {\n    const damier: CouleurNLC[][] = [\n      [\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Noir',\n        'Orange',\n        'Rouge',\n        'Orange',\n        'Jaune',\n        'Rouge',\n        'Jaune',\n        'Rose',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Rose',\n        'Gris',\n        'Noir',\n        'Bleu',\n        'Vert',\n        'Bleu',\n        'Rouge',\n        'Orange',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Noir',\n        'Rouge',\n        'Rose',\n        'Vert',\n        'Orange',\n        'Rose',\n        'Noir',\n        'Orange',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Orange',\n        'Gris',\n        'Rouge',\n        'Jaune',\n        'Noir',\n        'Vert',\n        'Rouge',\n        'Rose',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Bleu',\n        'Jaune',\n        'Orange',\n        'Vert',\n        'Gris',\n        'Jaune',\n        'Gris',\n        'Orange',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Rose',\n        'Bleu',\n        'Jaune',\n        'Rose',\n        'Orange',\n        'Rouge',\n        'Bleu',\n        'Noir',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n      ],\n    ]\n    const choixListeDeroulante: CouleurNLC[][] = [\n      [\n        'Blanc',\n        'Noir',\n        'Rouge',\n        'Bleu',\n        'Orange',\n        'Rose',\n        'Jaune',\n        'Vert',\n        'Gris',\n      ],\n      [\n        '(0) Blanc',\n        '(1) Noir',\n        '(2) Rouge',\n        '(3) Bleu',\n        '(4) Orange',\n        '(5) Rose',\n        '(6) Jaune',\n        '(7) Vert',\n        '(8) Gris',\n      ],\n    ]\n    this.sup = contraindreValeur(1, 4, this.sup, 1)\n    const echelleDessin = 0.75\n\n    let j, test\n    let objetsEnonce: NestedObjetMathalea2dArray = []\n    let objetsCorrection: NestedObjetMathalea2dArray = []\n    // const paramsCorrection = { xmin: -1, ymin: -1, xmax: 16, ymax: 13, pixelsParCm: 30, scale: echelleDessin }\n    const paramsCorrection = {\n      xmin: -1,\n      ymin: -1,\n      xmax: 16,\n      ymax: 13,\n      pixelsParCm: 20,\n      scale: echelleDessin,\n    }\n    let commandes_disponibles\n    const sequences_disponibles = []\n    let sequence\n    let result\n    let nb_couleurs\n    let instruction\n    let couleurs: CouleurNLC[] = []\n    let liste_instructions\n\n    let lutin, lutindepart\n    let angledepart\n    let xdepart = 10 + randint(1, 8) * 20\n    let ydepart = 10 + randint(1, 6) * 20\n\n    context.unitesLutinParCm = 13.33\n    // context.pixelsParCm = 30\n    context.pixelsParCm = 20\n\n    const lePlateauEnonce = plateau2dNLC({\n      type: this.sup,\n      melange: !this.sup4,\n      scale: echelleDessin,\n      relatif: this.relatif,\n      nx: 10,\n      ny: 8,\n      pas: 20,\n      plateau: damier,\n    })\n    const lePlateauCorr = plateau2dNLC({\n      type: this.sup,\n      melange: !this.sup4,\n      scale: echelleDessin,\n      relatif: this.relatif,\n      nx: 10,\n      ny: 8,\n      pas: 20,\n      plateau: damier,\n    })\n    let pion = noteLaCouleur({\n      x: xdepart,\n      y: ydepart,\n      orientation: angledepart,\n      plateau: lePlateauCorr.plateauNLC,\n      relatif: this.relatif,\n      nx: 10,\n      ny: 8,\n      pas: 20,\n    })\n    for (let q = 0; q < this.nbQuestions; ) {\n      objetsCorrection = []\n      objetsEnonce = []\n      objetsEnonce.push(lePlateauEnonce.objets)\n      objetsCorrection.push(lePlateauCorr.objets)\n      let reponseCouleur = []\n      let texte = ''\n      let texteCorr = ''\n      let compteur = 0\n      let retour_a_la_case_depart\n      let compteur_essais_sequence\n      commandes_disponibles = [\n        ['AV20', 'AV40', 'AV60', 'AV80', 'AV100'],\n        ['TD90', 'TG90', 'TG180'],\n      ]\n      for (let m = 0, ins1; m < 5; m++) {\n        for (let n = 0, ins2; n < 3; n++) {\n          ins1 = commandes_disponibles[0][m]\n          ins2 = commandes_disponibles[1][n]\n          sequences_disponibles.push([ins1, ins2, 'NLC'], [ins2, ins1, 'NLC'])\n        }\n      }\n      retour_a_la_case_depart = true\n      do {\n        objetsEnonce.length = 1\n        lutin = creerLutin()\n        angledepart = choice([90, 0, -90, 180])\n        xdepart = 10 + randint(1, 8) * 20\n        ydepart = 10 + randint(1, 6) * 20\n\n        pion = noteLaCouleur({\n          x: xdepart,\n          y: ydepart,\n          orientation: angledepart,\n          plateau: lePlateauCorr.plateauNLC,\n          relatif: this.relatif,\n          nx: 10,\n          ny: 8,\n          pas: 20,\n        })\n        lutin.color = context.isHtml\n          ? colorToLatexOrHTML('green')\n          : colorToLatexOrHTML('black')\n        lutin.epaisseur = 2\n        lutin.pointilles = 2\n        allerA(xdepart, ydepart, lutin)\n        orienter(angleScratchTo2d(angledepart), lutin)\n        lutindepart = clone(lutin)\n        baisseCrayon(lutindepart)\n        allerA(xdepart, ydepart, lutindepart)\n        objetsEnonce.push(lutindepart)\n        baisseCrayon(lutin)\n        compteur++\n        if (compteur > 5) break\n        pion.codeScratch = ''\n        couleurs = []\n        nb_couleurs = parseInt(this.sup3)\n        liste_instructions = []\n        j = 0\n        compteur_essais_sequence = 0\n        pion.codeScratch =\n          '\\\\begin{scratch}[print,fill,blocks,scale=0.7]\\n \\\\blockinit{quand \\\\greenflag est cliqué}\\n '\n        pion.codeScratch += `\\\\blockmove{aller à x: \\\\ovalnum{${xdepart}} y: \\\\ovalnum{${ydepart}}}\\n \\\\blockmove{s'orienter à \\\\ovalnum{${angledepart}}}\\n`\n        pion.currentIndex += pion.codeScratch.length\n        while (nb_couleurs > j && compteur_essais_sequence < 10) {\n          compteur_essais_sequence = 0\n          sequence = choice(sequences_disponibles)\n          test = testSequence(sequence, pion)\n          while (!test[0] && compteur_essais_sequence < 10) {\n            compteur_essais_sequence++\n            sequence = choice(sequences_disponibles)\n            test = testSequence(sequence, pion)\n          }\n          if (compteur_essais_sequence < 10) {\n            retour_a_la_case_depart = false\n            for (let i = 0; i < sequence.length; i++) {\n              instruction = sequence[i]\n              result = testInstruction(instruction, lutin, pion)\n              if (instruction === 'NLC') {\n                liste_instructions.push(instruction)\n                couleurs.push(pion.nlc())\n                j++\n                pion.codeScratch += result[4] + '\\n'\n                pion.currentIndex += result[4].length + 1\n                lutin = result[5]\n                attendre(5, lutin)\n              } else {\n                liste_instructions.push(instruction)\n                pion.currentPos.x = result[1]\n                pion.currentPos.y = result[2]\n                pion.currentOrientation = result[3]\n                pion.codeScratch += result[4] + '\\n'\n                pion.currentIndex += result[4].length + 1\n                lutin = result[5]\n              }\n            }\n          } else {\n            angledepart = choice([90, 0, -90, 180])\n            xdepart = 10 + randint(1, 8) * 20\n            ydepart = 10 + randint(1, 6) * 20\n          }\n        }\n      } while (retour_a_la_case_depart)\n      if (this.sup2) {\n        objetsEnonce.push(tracePoint(point(xdepart * 0.075, ydepart * 0.075)))\n        for (let i = 1; i < 10; i++) {\n          if (i !== 1) {\n            objetsEnonce.push(\n              texteParPositionEchelle(\n                stringNombre(20 * i),\n                1.5 * i,\n                -0.3,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                true,\n                echelleDessin,\n              ),\n            )\n          }\n        }\n        for (let i = 1; i < 12; i++) {\n          if (i !== 1) {\n            objetsEnonce.push(\n              texteParPositionEchelle(\n                stringNombre(20 * i),\n                -0.5,\n                1.5 * i,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                true,\n                echelleDessin,\n              ),\n            )\n          }\n        }\n      }\n      pion.codeScratch += '\\\\end{scratch}'\n      if (context.isHtml) {\n        texte = `Cet exercice est tiré de l'excellente activité débranchée ${ajouterLien('https://www.monclasseurdemaths.fr/profs/algorithmique-scratch/note-la-couleur/', 'Note la couleur')} de Jean-Yves Labouche.<br>`\n        texte +=\n          'Il a été conçu pour étendre les possibilités de fiches proposées.<br>'\n        texte += `N'hésitez pas à vous rendre sur le site ${ajouterLien('https://www.monclasseurdemaths.fr', 'Mon classeur de Maths.fr')} de Jean-Yves pour y découvrir la multitude de ressources qu'il propose.<br>`\n        texte += `Pour jouer, regarder les ${ajouterLien('https://coopmaths.fr/alea/assets/pdf/reglesnlc.pdf', 'Règles du jeu')} .<br>`\n      } else {\n        texte = ''\n      }\n      texte +=\n        'Exécuter le programme et trouver la succession de couleur.<br><br>'\n      if (context.isHtml) {\n        texte +=\n          '<table><tr><td>' +\n          scratchblock(pion.codeScratch) +\n          '</td><td>' +\n          `${\n            this.sup === 4 || this.sup === 2\n              ? 'Correspondance chiffre-couleur : <br>0=Blanc ; 1=Noir ; 2=Rouge ; 3=Bleu ; 4=Orange ; 5=Rose ; 6=Jaune ; 7=Vert ; 8=Gris<br>'\n              : ''\n          }` +\n          mathalea2d(paramsCorrection, objetsEnonce) +\n          '</td></tr></table>'\n      } else {\n        texte += `\\\\begin{minipage}{.3 \\\\linewidth} \\n\\t ${scratchblock(pion.codeScratch)} \\n \\\\end{minipage}\n      \\\\begin{minipage}{.7 \\\\linewidth} \\n\\t ${\n        this.sup === 4 || this.sup === 2\n          ? 'Correspondance chiffre-couleur : \\\\\\\\\\n0=Blanc, 1=Noir, 2=Rouge, 3=Bleu, 4=Orange, 5=Rose, 6=Jaune, 7=Vert, 8=Gris\\\\\\\\\\n'\n          : ''\n      } ${mathalea2d(paramsCorrection, objetsEnonce)} \\n\\\\end{minipage}`\n        if (q < this.nbQuestions - 1 && !context.isHtml) {\n          texte += '\\n\\\\newpage'\n        }\n      }\n      reponseCouleur = couleurs as string[]\n      if (this.sup % 2 === 0)\n        reponseCouleur[0] = '(' + traducNum(couleurs[0]) + ') ' + couleurs[0]\n      texteCorr = 'On obtient la série de couleurs suivante :<br> '\n      texteCorr += `${texteEnCouleurEtGras(reponseCouleur[0])} `\n      if (this.interactif && context.isHtml) {\n        texte +=\n          'Couleur n°1 : ' +\n          choixDeroulant(this, q * couleurs.length, [\n            { label: 'Choisir une couleur', value: '' },\n            ...choixListeDeroulante[(this.sup - 1) % 2].map(\n              (item: CouleurNLC) =>\n                this.sup === 1\n                  ? {\n                      svg:\n                        '<rect x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" stroke=\"black\" fill=\"' +\n                        traducColor(item) +\n                        '\"/>',\n                      value: item,\n                    }\n                  : { label: item, value: item },\n            ),\n          ]) +\n          '<br>'\n        handleAnswers(\n          this,\n          q * couleurs.length,\n          { reponse: { value: couleurs[0] } },\n          { formatInteractif: 'listeDeroulante' },\n        )\n      } else if (context.isHtml) {\n        listeDeroulanteToQcm(\n          this,\n          q * couleurs.length,\n          [\n            { label: 'Choisir une couleur', value: '' },\n            ...choixListeDeroulante[(this.sup - 1) % 2].map((item) =>\n              this.sup === 1\n                ? {\n                    svg:\n                      '<rect x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" stroke=\"black\" fill=\"' +\n                      traducColor(item) +\n                      '\"/>',\n                    value: item,\n                  }\n                : { label: item, value: item },\n            ),\n          ],\n          reponseCouleur[0],\n          { ordered: false, vertical: false },\n        )\n        const leQcm = propositionsQcm(this, q * couleurs.length)\n\n        texte += 'Couleur n°1 : ' + leQcm.texte + '<br>'\n      }\n      /*\n      texteCorr += `${texteGras(this.sup === 4 || this.sup === 2 ? '(' + traducNum(couleurs[0]) + ')' + couleurs[0] : couleurs[0])} `\n      for (let i = 1; i < couleurs.length; i++) {\n        texteCorr += `- ${texteGras(this.sup === 4 || this.sup === 2 ? '(' + traducNum(couleurs[i]) + ')' + couleurs[i] : couleurs[i])} `\n      }\n      texteCorr += '<br>'\n      */\n      for (let i = 1; i < couleurs.length; i++) {\n        if (this.sup % 2 === 0)\n          reponseCouleur[i] = '(' + traducNum(couleurs[i]) + ') ' + couleurs[i]\n        texteCorr += `${texteEnCouleurEtGras(reponseCouleur[i])} `\n        if (this.interactif && context.isHtml) {\n          texte +=\n            'Couleur n°' +\n            (i + 1) +\n            ' : ' +\n            choixDeroulant(this, q * couleurs.length + i, [\n              { label: 'Choisir une couleur', value: '' },\n              ...choixListeDeroulante[(this.sup - 1) % 2].map((item) =>\n                this.sup === 1\n                  ? {\n                      svg:\n                        '<rect x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" fill=\"' +\n                        traducColor(item) +\n                        '\"/>',\n                      value: item,\n                    }\n                  : { label: item, value: item },\n              ),\n            ]) +\n            '<br>'\n          handleAnswers(\n            this,\n            q * couleurs.length + i,\n            { reponse: { value: couleurs[i] } },\n            { formatInteractif: 'listeDeroulante' },\n          )\n        } else if (context.isHtml) {\n          listeDeroulanteToQcm(\n            this,\n            q * couleurs.length + i,\n            [\n              { label: 'Choisir une couleur', value: '' },\n              ...choixListeDeroulante[(this.sup - 1) % 2].map((item) =>\n                this.sup === 1\n                  ? {\n                      svg:\n                        '<rect x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" stroke=\"black\" fill=\"' +\n                        traducColor(item) +\n                        '\"/>',\n                      value: item,\n                    }\n                  : { label: item, value: item },\n              ),\n            ],\n            couleurs[i],\n            { ordered: false, vertical: false },\n          )\n          const leQcm = propositionsQcm(this, q * couleurs.length + i)\n          texte += 'Couleur n°' + (i + 1) + ' : ' + leQcm.texte + '<br>'\n        }\n      }\n      lutin.animation = `<radialGradient id=\"Ball\" cx=\"8\" cy=\"-3\" r=\"20\" gradientUnits=\"userSpaceOnUse\">\n    <stop offset=\"0\" style=\"stop-color:#FFFF99\"/>\n    <stop offset=\"1\" style=\"stop-color:#FF9400\"/>\n  </radialGradient> <circle fill=\"url(#Ball)\"  r=\"12\" stroke-width=\"1\"\n   x=\"${lutin.listeTraces[0][0] * context.pixelsParCm}\"\n    y=\"${-lutin.listeTraces[0][1] * context.pixelsParCm}\">\\n\n    <animateMotion path=\"M ${lutin.listeTraces[0][0] * context.pixelsParCm} ${-lutin.listeTraces[0][1] * context.pixelsParCm} L`\n\n      for (let i = 0; i < lutin.listeTraces.length; i++) {\n        const B = point(lutin.listeTraces[i][2], lutin.listeTraces[i][3])\n        lutin.animation += ` ${B.xSVG(context.pixelsParCm)} ${B.ySVG(context.pixelsParCm)} `\n      }\n      lutin.animation +=\n        '\" begin=\"10s\" dur=\"10s\" repeatCount=\"indefinite\" />; </circle>'\n      objetsCorrection.push(tracePoint(point(xdepart * 0.075, ydepart * 0.075)))\n      if (this.sup2) {\n        for (let i = 1; i < 10; i++) {\n          if (i !== 1) {\n            objetsEnonce.push(\n              texteParPositionEchelle(\n                stringNombre(20 * i),\n                1.5 * i,\n                -0.3,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                true,\n                echelleDessin,\n              ),\n            )\n          }\n        }\n        for (let i = 1; i < 12; i++) {\n          if (i !== 1) {\n            objetsEnonce.push(\n              texteParPositionEchelle(\n                stringNombre(20 * i),\n                -0.5,\n                1.5 * i,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                true,\n                echelleDessin,\n              ),\n            )\n          }\n        }\n      }\n\n      if (this.correctionDetaillee) {\n        for (let i = 1; i < 10; i++) {\n          if (i !== 1) {\n            objetsCorrection.push(\n              texteParPositionEchelle(\n                stringNombre(20 * i),\n                1.5 * i,\n                -0.3,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                true,\n                echelleDessin,\n              ),\n            )\n          }\n        }\n        for (let i = 1; i < 12; i++) {\n          if (i !== 1) {\n            objetsCorrection.push(\n              texteParPositionEchelle(\n                stringNombre(20 * i),\n                -0.5,\n                1.5 * i,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                true,\n                echelleDessin,\n              ),\n            )\n          }\n        }\n      }\n      texteCorr +=\n        '<br><br>' + mathalea2d(paramsCorrection, objetsCorrection, lutin)\n      if (q < this.nbQuestions - 1 && !context.isHtml) {\n        texteCorr += '\\n\\\\newpage'\n      }\n      if (this.questionJamaisPosee(q, xdepart, ydepart, angledepart)) {\n        this.listeQuestions[q] = texte\n        this.listeCorrections[q] = texteCorr\n\n        q++\n      }\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDeModifImportante","dateDePublication","uuid","refs","NoteLaCouleurC3","Exercice","__publicField","damier","choixListeDeroulante","contraindreValeur","echelleDessin","j","test","objetsEnonce","objetsCorrection","paramsCorrection","commandes_disponibles","sequences_disponibles","sequence","result","nb_couleurs","instruction","couleurs","liste_instructions","lutin","lutindepart","angledepart","xdepart","randint","ydepart","context","lePlateauEnonce","plateau2dNLC","lePlateauCorr","pion","noteLaCouleur","q","reponseCouleur","texte","texteCorr","compteur","retour_a_la_case_depart","compteur_essais_sequence","m","ins1","n","ins2","creerLutin","choice","colorToLatexOrHTML","allerA","orienter","angleScratchTo2d","clone","baisseCrayon","testSequence","i","testInstruction","attendre","tracePoint","point","texteParPositionEchelle","stringNombre","ajouterLien","scratchblock","mathalea2d","traducNum","texteEnCouleurEtGras","choixDeroulant","item","traducColor","handleAnswers","listeDeroulanteToQcm","leQcm","propositionsQcm","B","listeQuestionsToContenu"],"mappings":"03HA4CO,MAAMA,GAAQ,4BACRC,GAAkB,GAClBC,GAAiB,kBACjBC,GAAwB,aACxBC,GAAoB,aAQpBC,GAAO,QAEPC,GAAO,CAClB,QAAS,CAAC,UAAU,EACpB,UAAW,CAAC,OAAO,EACnB,QAAS,CAAA,CACX,EACA,MAAqBC,WAAwBC,EAAS,CAEpD,aAAc,CACZ,MAAA,EAFFC,EAAA,eAAU,IAGR,KAAK,0BAA4B,CAC/B,kBACA,EACA;AAAA;AAAA;AAAA,uCAAA,EAEF,KAAK,6BAA+B,CAAC,cAAe,EAAI,EACxD,KAAK,2BAA6B,CAAC,iCAAkC,CAAC,EACtE,KAAK,6BAA+B,CAAC,0BAA2B,EAAK,EAErE,KAAK,YAAc,EACnB,KAAK,aAAe,UACpB,KAAK,IAAM,EACX,KAAK,KAAO,GACZ,KAAK,KAAO,EACZ,KAAK,KAAO,GACZ,KAAK,QAAU,GACf,KAAK,8BAAgC,GACrC,KAAK,oBAAsB,EAC7B,CAEA,iBAAkB,CAChB,MAAMC,EAAyB,CAC7B,CACE,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OAAA,EAEF,CACE,QACA,OACA,SACA,QACA,SACA,QACA,QACA,QACA,OACA,OAAA,EAEF,CACE,QACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,SACA,OAAA,EAEF,CACE,QACA,OACA,QACA,OACA,OACA,SACA,OACA,OACA,SACA,OAAA,EAEF,CACE,QACA,SACA,OACA,QACA,QACA,OACA,OACA,QACA,OACA,OAAA,EAEF,CACE,QACA,OACA,QACA,SACA,OACA,OACA,QACA,OACA,SACA,OAAA,EAEF,CACE,QACA,OACA,OACA,QACA,OACA,SACA,QACA,OACA,OACA,OAAA,EAEF,CACE,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OAAA,CACF,EAEIC,EAAuC,CAC3C,CACE,QACA,OACA,QACA,OACA,SACA,OACA,QACA,OACA,MAAA,EAEF,CACE,YACA,WACA,YACA,WACA,aACA,WACA,YACA,WACA,UAAA,CACF,EAEF,KAAK,IAAMC,GAAkB,EAAG,EAAG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"}