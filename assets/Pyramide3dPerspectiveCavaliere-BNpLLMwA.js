import{c as O,e as B,l as y,f as Q}from"./utilitairesGeometriques-rO8Jz15i.js";import{d as C,v as d}from"./droites-D3-ZzJ69.js";import{O as R}from"./ObjetMathalea2D-CXcNXRpD.js";import{p as v,r as T}from"./polygones-CHA8469v.js";import{s as a,a as V,e as W}from"./segmentsVecteurs-DhSnlc3S.js";import{c as j}from"./textes-BId1S-Qs.js";import{t as X}from"./TracePoint-eOswwPl5.js";import{t as p}from"./transformations-KFxwrOCd.js";import{c as w}from"./aleatoires-DgKjmCd-.js";import{b as L,P as M}from"./elementsEtTransformations3d-d0l2m2vW.js";class N extends R{constructor(f,b,c="black",P,g=!1,u="black",S=!1,x=!1,A="gray",k=!0){super(),f.color=c,this.base=f,this.sommet=b,this.color=O(c),this.centre=P,this.affichageAxe=g,this.colorAxe=u,this.affichageNom=S,this.estCone=x,this.colorCone=A,this.c2d=[],this.nom="";let i;this.aretesSommet=[];for(let s=0;s<this.base.listePoints.length;s++)i=L(this.base.listePoints[s],this.sommet,c,!0),this.aretesSommet.push(i);const h=[];for(let s=0;s<this.base.listePoints.length;s++)i=L(this.base.listePoints[s],this.base.listePoints[(s+1)%this.base.listePoints.length],c,!0),h.push(i);let o=!1,D;const n=[0,0],r=[];for(let s=0;s<this.base.listePoints.length;s++){D=o,o=!1;for(let t=1;t<this.base.listePoints.length-1;t++){const e=v([this.sommet.c2d,this.base.listePoints[(s+t)%this.base.listePoints.length].c2d,this.base.listePoints[(s+t+1)%this.base.listePoints.length].c2d]);e.isVisible=!1,o=o||B(this.base.listePoints[s].c2d,e)}this.estCone&&D!==o&&s!==0&&(o?r.push(this.aretesSommet[(this.aretesSommet.length+s-1)%this.aretesSommet.length]):r.push(this.aretesSommet[s]),o?n[1]=s:n[0]=s),o&&b.z>this.base.listePoints[0].z&&(this.aretesSommet[s].isVisible=!1,this.aretesSommet[s].c2d.pointilles=2,h[s].c2d.pointilles=2,h[(this.base.listePoints.length+s-1)%this.base.listePoints.length].c2d.pointilles=2)}if(this.estCone&&n[1]<=n[0]&&(n[1]+=this.base.listePoints.length),this.estCone&&r.length===1&&(r.push(this.aretesSommet[this.aretesSommet.length-1]),n[1]=this.aretesSommet.length-1),this.estCone){const s=[this.sommet.c2d];for(let e=n[0];e<n[1];e++)s.push(this.base.listePoints[e%this.base.listePoints.length].c2d);const t=v(s,this.colorCone);t.couleurDeRemplissage=O(this.colorCone),this.c2d.push(t)}if(this.estCone)for(let s=0;s<r.length;s++)this.c2d.push(r[s].c2d);else{let s;if(this.sommet.z>this.base.listePoints[0].z)for(let t=0;t<this.base.listePoints.length;t++){o=!1,s=y(this.base.listePoints[t].c2d,this.base.listePoints[(t+1)%this.base.listePoints.length].c2d),i=a(V(this.base.listePoints[t].c2d,this.base.listePoints[(t+1)%this.base.listePoints.length].c2d,s/20),V(this.base.listePoints[t].c2d,this.base.listePoints[(t+1)%this.base.listePoints.length].c2d,19*s/20)),i.isVisible=!1;for(let e=0;e<this.aretesSommet.length;e++)o=o||!!i.estSecant(this.aretesSommet[e].c2d);o&&(h[t].c2d.pointilles=2)}else for(let t=0;t<this.base.listePoints.length;t++){s=y(this.base.listePoints[t].c2d,this.sommet.c2d),i=a(V(this.base.listePoints[t].c2d,this.sommet.c2d,s/20),this.sommet.c2d),i.isVisible=!1;let e=0;for(;e<h.length&&!i.estSecant(h[e].c2d);)e++;e<h.length&&(this.aretesSommet[t].c2d.pointilles=2)}for(let t=0;t<this.base.listePoints.length;t++)this.c2d.push(this.aretesSommet[t].c2d)}if(k)for(let s=0;s<this.base.listePoints.length;s++)this.c2d.push(h[s].c2d);if(this.centre!==void 0&&this.centre.constructor===M&&(this.c2d.push(X(this.centre.c2d,this.colorAxe)),this.centre.label===""&&(this.centre.label=w(1,"OQWX")[0]),this.c2d.push(...j(this.centre.c2d)),this.affichageAxe))if(this.sommet.z>0){let s=!1,t=0;for(;!s&&t<h.length;){if(i=h[t].c2d,i.pointilles!==2){const e=C(this.centre.c2d,this.sommet.c2d);e.isVisible=!1,s=!!i.estSecant(e)}t++}if(s){t--;const e=C(this.base.listePoints[t].c2d,this.base.listePoints[(t+1)%this.base.listePoints.length].c2d);e.isVisible=!1;const l=C(this.centre.c2d,this.sommet.c2d);l.isVisible=!1;const m=W(e,l);if(!m){window.notify("Axe de la pyramide non dÃ©fini correctement",{d1:e,d2:l});return}i=a(m,this.sommet.c2d,this.colorAxe),i.pointilles=2,this.c2d.push(i),i=a(m,p(m,d(this.centre.c2d,m)),this.colorAxe),this.c2d.push(i),i=a(this.sommet.c2d,p(this.sommet.c2d,d(m,this.centre.c2d)),this.colorAxe),this.c2d.push(i)}}else{i=a(this.centre.c2d,this.sommet.c2d,this.colorAxe),i.pointilles=2,this.c2d.push(i);const s=d(this.centre.c2d,this.sommet.c2d),t=y(this.base.listePoints[0].c2d,this.centre.c2d),e=2*Q(s);i=a(this.sommet.c2d,p(this.sommet.c2d,d(t*s.x/e,t*s.y/e)),this.colorAxe),this.c2d.push(i),i=a(this.centre.c2d,p(this.centre.c2d,d(-t*s.x/e,-t*s.y/e)),this.colorAxe),this.c2d.push(i)}if(this.affichageNom){const s=v(this.base.listePoints2d);s.isVisible=!1,(this.centre.label===""||this.centre.label===this.sommet.label)&&(this.sommet.label=w(1,"OQWX")[0]);const t=s.listePoints.map(l=>l.nom).join(""),e=t===""?w(this.base.listePoints.length,"OQWX"+this.sommet.label+this.centre.label):Array.from(t);T(s,e);for(let l=0;l<this.base.listePoints2d.length;l++)this.base.listePoints2d[l].positionLabel=this.sommet.z>0?"below":"above";this.c2d.push(j(...s.listePoints)),this.c2d.push(j(this.sommet.c2d)),this.nom=e.join("")+this.sommet.label}}}function Z(z,f,b="black",c,P=!1,g="black",u=!1,S=!1,x="gray",A=!0){return new N(z,f,b,c,P,g,u,S,x,A)}export{Z as p};
//# sourceMappingURL=Pyramide3dPerspectiveCavaliere-BNpLLMwA.js.map
