{"version":3,"file":"geoTriangle1-CDrMWhx-.js","sources":["../../src/exercices/geodyn/geoTriangle1.ts"],"sourcesContent":["import ExerciceSimple from '../ExerciceSimple'\nimport Figure from 'apigeom'\nimport figureApigeom from '../../lib/figureApigeom'\nimport { creerNomDePolygone } from '../../lib/outils/outilString'\nimport { randint } from '../../modules/outils'\nimport { mathaleaRenderDiv } from '../../lib/mathalea'\nimport { context } from '../../modules/context'\n\nexport const titre = 'Tracer un triangle à partir de longueurs des 3 côtés'\nexport const dateDePublication = '29/10/2023'\nexport const interactifReady = true\nexport const interactifType = 'custom'\n\n/**\n * Tracer un triangle à partir de longueurs des 3 côtés\n * @author Rémi Angot\n\n */\n\nexport const refs = {\n  'fr-fr': ['triangle1'],\n  'fr-ch': [],\n}\nexport const uuid = 'e514f'\n\ntype Triangle = { label: string; a: number; b: number; c: number }\n\nclass ConstructionTriangle extends ExerciceSimple {\n  // On déclare des propriétés supplémentaires pour cet exercice afin de pouvoir les réutiliser dans la correction\n  figure!: Figure\n  triangle!: Triangle\n  constructor() {\n    super()\n    this.typeExercice = 'simple'\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n    this.reponse = ''\n    this.exoCustomResultat = true\n    this.formatChampTexte = 'none' // Pas de champ texte pour cet exercice simple de géométrie dynamique\n  }\n\n  nouvelleVersion(): void {\n    this.figure = new Figure({\n      xMin: -7,\n      yMin: -7,\n      width: 800,\n      height: 500,\n      border: true,\n    })\n    this.triangle = { label: 'ABC', a: 3, b: 4, c: 50 }\n    this.triangle.label = creerNomDePolygone(3)\n    while (!isTriangle(this.triangle)) {\n      this.triangle.a = randint(3, 10)\n      this.triangle.b = randint(3, 10, this.triangle.a)\n      this.triangle.c = randint(3, 10, [this.triangle.a, this.triangle.b])\n    }\n\n    const [labelA, labelB, labelC] = this.triangle.label.split('') as [\n      string,\n      string,\n      string,\n    ]\n    const [a, b, c] = [this.triangle.a, this.triangle.b, this.triangle.c]\n\n    const enonce = `Tracer le triangle $${this.triangle.label}$ tel que $${labelA}${labelB}=${c}$ ; $${labelB}${labelC}=${a}$ et $${labelC}${labelA}=${b}$.`\n    this.figure.setToolbar({\n      tools: [\n        'POINT',\n        'POINT_ON',\n        'POINT_INTERSECTION',\n        'SEGMENT',\n        'POLYGON',\n        'CIRCLE_CENTER_POINT',\n        'CIRCLE_RADIUS',\n        'NAME_POINT',\n        'DRAG',\n        'HIDE',\n        'REMOVE',\n        'UNDO',\n        'REDO',\n        'SHAKE',\n      ],\n      position: 'top',\n    })\n    this.figure.options.labelAutomaticBeginsWith = labelA\n    const emplacementPourFigure = figureApigeom({\n      exercice: this,\n      i: 0,\n      figure: this.figure,\n      defaultAction: 'POINT',\n    })\n    let texteCorr = `$${labelA}${labelB}=${c}$ donc $${labelB}$ est sur le cercle de centre $${labelA}$ et de rayon $${c}$.`\n    texteCorr += `<br>$${labelB}${labelC}=${a}$ donc $${labelC}$ est sur le cercle de centre $${labelB}$ et de rayon $${a}$.`\n    texteCorr += `<br>$${labelC}${labelA}=${b}$ donc $${labelC}$ est sur le cercle de centre $${labelA}$ et de rayon $${b}$.`\n    const figureCorrection = createAnimationConstructionTriangle(this.triangle)\n    const emplacementPourFigureCorrection = figureApigeom({\n      animation: true,\n      exercice: this,\n      i: 0,\n      idAddendum: 'Correction',\n      figure: figureCorrection,\n    })\n    if (!context.isHtml) {\n      texteCorr = figureCorrection.tikz()\n    }\n    this.question = this.interactif ? enonce + emplacementPourFigure : enonce\n    this.correction = texteCorr + emplacementPourFigureCorrection\n  }\n\n  correctionInteractive = () => {\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la réponse pour Capytale\n    this.answers[this.figure.id] = this.figure.json\n    const resultat = []\n    // 1 point par distance correcte + 2 points si tout est correct (on ne vérifie pas que le triangle est tracé)\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q${0}`,\n    ) as HTMLDivElement\n    let feedback = ''\n    const [labelA, labelB, labelC] = this.triangle.label.split('') as [\n      string,\n      string,\n      string,\n    ]\n    const [a, b, c] = [this.triangle.a, this.triangle.b, this.triangle.c]\n    let { message, isValid } = this.figure.checkDistance({\n      label1: labelA,\n      label2: labelB,\n      distance: c,\n    })\n    if (message) feedback += `${message}<br>`\n    resultat.push(isValid ? 'OK' : 'KO')\n    ;({ message, isValid } = this.figure.checkDistance({\n      label1: labelB,\n      label2: labelC,\n      distance: a,\n    }))\n    if (message) feedback += `${message}<br>`\n    resultat.push(isValid ? 'OK' : 'KO')\n    ;({ message, isValid } = this.figure.checkDistance({\n      label1: labelC,\n      label2: labelA,\n      distance: b,\n    }))\n    if (message) feedback += `${message}<br>`\n    resultat.push(isValid ? 'OK' : 'KO')\n    if (resultat.every((r) => r === 'OK')) {\n      resultat.push('OK')\n    } else {\n      resultat.push('KO')\n    }\n    const isPolygoneDrawn = this.figure.checkPolygonByLabels({\n       labels: [labelA, labelB, labelC]\n     }).isValid\n    if (isPolygoneDrawn && resultat.every((r) => r === 'OK')) {\n      resultat.push('OK')\n      feedback += `Le triangle $${labelA + labelB + labelC}$ a bien été tracé.<br>`\n    } else {\n      resultat.push('KO')\n      feedback += `Le triangle $${labelA + labelB + labelC}$ n'a pas été tracé.<br>`\n    }\n    if (resultat.every((r) => r === 'OK')) {\n      feedback += '<br>Bravo !'\n    }\n\n    if (divFeedback) divFeedback.innerHTML = feedback\n    // Comme c'est asynchrone, il faut forcer le rendu LaTeX\n    mathaleaRenderDiv(divFeedback)\n    this.figure.setToolbar({ position: 'top', tools: ['DRAG', 'DESCRIPTION'] })\n    this.figure.buttons.get('SHAKE')?.click()\n    return resultat\n  }\n}\n\nfunction isTriangle(triangle: Triangle): boolean {\n  const { a, b, c } = triangle\n  return a + b > c && a + c > b && b + c > a\n}\n\nfunction createAnimationConstructionTriangle(triangle: Triangle): Figure {\n  const { label, a, b, c } = triangle\n  const [labelA, labelB, labelC] = label.split('') as [string, string, string]\n  const figure = new Figure({\n    xMin: 0,\n    yMin: 0,\n    width: 800,\n    height: 500,\n    border: true,\n  })\n  figure.setToolbar({\n    position: 'top',\n    tools: ['RESTART', 'PLAY_SKIP_BACK', 'PLAY', 'PLAY_SKIP_FORWARD', 'PAUSE'],\n  })\n  const description = figure.create('TextByPosition', {\n    anchor: 'bottomLeft',\n    backgroundColor: 'white',\n    text: `$${labelA}${labelB}=${c}$ donc $${labelB}$ est sur le cercle de centre $${labelA}$ et de rayon ${c}`,\n    x: 10,\n    y: 15,\n  })\n  figure.saveState()\n  const A = figure.create('Point', { label: labelA, x: 5, y: 7 })\n  const cA1 = figure.create('Circle', { center: A, radius: c })\n  const B = figure.create('PointOnCircle', {\n    angleWithHorizontal: 0,\n    circle: cA1,\n    label: labelB,\n  })\n  description.text =\n    'Il faut bien utiliser le bouton « Point sur » et pas « Point libre ».'\n  figure.saveState()\n  figure.create('Segment', { point1: A, point2: B })\n  figure.saveState()\n  description.text = `On peut cacher le cercle de centre $${labelA}$ et de rayon ${c}.`\n  cA1.hide()\n  figure.saveState()\n  description.text = `$${labelA}${labelC}=${b}$ donc $${labelC}$ est sur le cercle de centre $${labelA}$ et de rayon ${b}.`\n  const cA2 = figure.create('Circle', { center: A, radius: b })\n  figure.saveState()\n  description.text = `$${labelB}${labelC}=${a}$ donc $${labelC}$ est aussi sur le cercle de centre $${labelB}$ et de rayon ${a}.`\n  const cB = figure.create('Circle', { center: B, radius: a })\n  figure.saveState()\n  description.text = `On place le point $${labelC}$ à une intersection des deux cercles.`\n  figure.saveState()\n  const C = figure.create('PointIntersectionCC', { circle1: cA2, circle2: cB })\n  C.label = labelC\n  description.text =\n    \"Il faut bien utiliser le bouton « Point à l'intersection » et pas « Point libre ».\"\n  figure.saveState()\n  figure.create('Polygon', { points: [A, B, C] })\n  figure.saveState()\n  description.text = 'On peut cacher les cercles.'\n  cA2.hide()\n  cB.hide()\n  if (!context.isHtml) {\n    description.text = ''\n    A.shape = ''\n    B.shape = ''\n    C.shape = ''\n  }\n  figure.saveState()\n  return figure\n}\n\nexport default ConstructionTriangle\n"],"names":["titre","dateDePublication","interactifReady","interactifType","refs","uuid","ConstructionTriangle","ExerciceSimple","__publicField","resultat","divFeedback","feedback","labelA","labelB","labelC","a","b","c","message","isValid","r","mathaleaRenderDiv","_a","Figure","creerNomDePolygone","isTriangle","randint","enonce","emplacementPourFigure","figureApigeom","texteCorr","figureCorrection","createAnimationConstructionTriangle","emplacementPourFigureCorrection","context","triangle","label","figure","description","A","cA1","B","cA2","cB","C"],"mappings":"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"}