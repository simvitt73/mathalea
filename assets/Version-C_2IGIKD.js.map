{"version":3,"file":"Version-C_2IGIKD.js","sources":["../../src/exercicesInteractifs/Version.svelte"],"sourcesContent":["<script>\n  import Exercice from '../exercices/Exercice'\n  import HeaderExerciceVueProf from '../components/shared/exercice/shared/headerExerciceVueProf/HeaderExerciceVueProf.svelte'\n  import { afterUpdate } from 'svelte'\n  import {\n    fetchServerVersion,\n    checkForServerUpdate,\n    getLocalVersion,\n    forceLocalVersion,\n  } from '../lib/components/version'\n\n  export let indiceExercice\n  export let indiceLastExercice\n\n  export const titre = 'Version du serveur'\n  // Cette ressource n'a pas d'uuid ou de ref\n  // Son accès est défini dans uuidsRessources.json\n\n  const headerExerciceProps = {\n    title: '',\n    isInteractif: false,\n    settingsReady: false,\n    interactifReady: false,\n    randomReady: false,\n    correctionReady: false,\n  }\n\n  const exercice = new Exercice()\n  exercice.id = 'Version'\n  exercice.numeroExercice = indiceExercice\n  exercice.interactif = false\n  let promise = fetchServerVersion()\n  let localeVersion = getLocalVersion()\n  let compare = checkForServerUpdate()\n  function update() {\n    forceLocalVersion()\n    localeVersion = getLocalVersion()\n    compare = checkForServerUpdate()\n  }\n</script>\n\n<HeaderExerciceVueProf\n  {indiceExercice}\n  {indiceLastExercice}\n  id=\"Version\"\n  {...headerExerciceProps}\n/>\n\n<br />\nLa version du serveur est :\n<br /><br />\n<pre>fetchServerVersion()</pre>\n<br /><br />\n<p>Version locale du Serveur: {localeVersion}</p>\n{#await promise}\n  <p>...attendre</p>\n{:then version}\n  <p>Version du Serveur: {version}</p>\n{:catch error}\n  <p style=\"color: red\">{error.message}</p>\n{/await}\n<br /><br />\n{#await compare}\n  <p>...attendre</p>\n{:then compareValue}\n  <p>\n    Compare la version locale avec la version du Serveur: {compareValue\n      ? 'différent'\n      : 'identique'}\n  </p>\n{:catch error}\n  <p style=\"color: red\">{error.message}</p>\n{/await}\n<br /><br />\n\n<button\n  class=\"inline-flex px-6 py-2.5 ml-6 bg-coopmaths-action dark:bg-coopmathsdark-action text-coopmaths-canvas dark:text-coopmathsdark-canvas font-medium text-xs leading-tight uppercase rounded shadow-md transform hover:bg-coopmaths-action-lightest dark:hover:bg-coopmathsdark-action-lightest hover:shadow-lg focus:bg-coopmaths-action-lightest dark:focus:bg-coopmathsdark-action-lightest focus:shadow-lg focus:outline-none focus:ring-0 active:bg-coopmaths-action-lightest dark:active:bg-coopmathsdark-action-lightest active:shadow-lg transition duration-150 ease-in-out\"\n  on:click=\"{() => {\n    promise = fetchServerVersion()\n  }}\">Rafraîchir</button\n>\n<br /><br />\n<button\n  class=\"inline-flex px-6 py-2.5 ml-6 bg-coopmaths-action dark:bg-coopmathsdark-action text-coopmaths-canvas dark:text-coopmathsdark-canvas font-medium text-xs leading-tight uppercase rounded shadow-md transform hover:bg-coopmaths-action-lightest dark:hover:bg-coopmathsdark-action-lightest hover:shadow-lg focus:bg-coopmaths-action-lightest dark:focus:bg-coopmathsdark-action-lightest focus:shadow-lg focus:outline-none focus:ring-0 active:bg-coopmaths-action-lightest dark:active:bg-coopmathsdark-action-lightest active:shadow-lg transition duration-150 ease-in-out\"\n  on:click=\"{() => {\n    update()\n  }}\">Force la version locale</button\n>\n"],"names":["indiceExercice","$.prop","$$props","indiceLastExercice","titre","headerExerciceProps","exercice","Exercice","promise","fetchServerVersion","localeVersion","getLocalVersion","compare","checkForServerUpdate","update","forceLocalVersion","$.set","HeaderExerciceVueProf","node","$.spread_props","p","$.sibling","p_3","root_3","version","p_1","root_1","error","p_2","root_2","$.untrack","$.get","p_6","root_6","compareValue","p_4","root_4","p_5","root_5","button","node_2","button_1"],"mappings":"kuIAAA,SAWa,IAAAA,EAAAC,EAAAC,EAAA,iBAAA,CAAA,EACAC,EAAAF,EAAAC,EAAA,qBAAA,CAAA,EAEE,MAAAE,EAAQ,qBAIfC,EAAmB,CACvB,MAAO,GACP,aAAc,GACd,cAAe,GACf,gBAAiB,GACjB,YAAa,GACb,gBAAiB,IAGbC,MAAeC,EACrBD,EAAS,GAAK,UACdA,EAAS,eAAiBN,EAAA,EAC1BM,EAAS,WAAa,GAClB,IAAAE,IAAUC,GAAkB,EAC5BC,IAAgBC,GAAe,EAC/BC,IAAUC,GAAoB,EACzB,SAAAC,GAAS,CAChBC,EAAiB,EACjBC,EAAAN,EAAgBC,GAAe,EAC/BK,EAAAJ,EAAUC,GAAoB,CAChC,uCAGDI,EAAAC,EAAAC,+BACEnB,EAAc,mCACdG,EAAkB,qBAEfE,QAQLe,EAACC,EAAAH,EAAA,EAAA,MAADE,CAAC,MAADA,EAAC,CAAA,YACMZ,CAAO,UACZc,EAACC,EAAA,MAADD,CAAC,MACGE,IAAO,KACXC,EAACC,EAAA,MAADD,CAAC,qCAAsBD,CAAO,GAAA,EAAA,EAAA,CAAA,MAA9BC,CAAC,MACIE,IAAK,KACVC,EAACC,EAAA,MAADD,CAAC,iBADID,CAAK,CAAA,EACYG,EAAA,IAAAC,EAAAJ,CAAK,EAAC,OAAO,SAAnCC,CAAC,2BAGIhB,CAAO,UACZoB,EAACC,GAAA,MAADD,CAAC,MACGE,IAAY,KAChBC,EAACC,EAAA,MAADD,CAAC,uEACuDD,CAAA,EACnD,YACA,WAAW,EAAA,CAAA,MAHhBC,CAAC,MAKIR,IAAK,KACVU,EAACC,GAAA,MAADD,CAAC,iBADIV,CAAK,CAAA,EACYG,EAAA,IAAAC,EAAAJ,CAAK,EAAC,OAAO,SAAnCU,CAAC,IAIH,IAAAE,EAAAlB,EAAAmB,EAAA,CAAA,EAOAC,EAAApB,EAPAkB,EAAA,CAAA,mDAtB8B7B,CAAa,GAAA,EAAA,EAAA,CAAA,YAsB3C6B,EAAA,IAEkB,CACfvB,EAAAR,EAAUC,GAAkB,CAC9B,CAAC,YAGFgC,EAAA,IAEkB,CACf3B,EAAM,CACR,CAAC,4BA/CK"}