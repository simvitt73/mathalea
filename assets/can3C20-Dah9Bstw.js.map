{"version":3,"file":"can3C20-Dah9Bstw.js","sources":["../../src/exercices/can/3e/can3C20.ts"],"sourcesContent":["import { KeyboardType } from '../../../lib/interactif/claviers/keyboard'\nimport { shuffle } from '../../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../../lib/outils/embellissements'\nimport { pgcd, ppcm } from '../../../lib/outils/primalite'\nimport type FractionEtendue from '../../../modules/FractionEtendue'\nimport { fraction } from '../../../modules/fractions'\nimport { randint } from '../../../modules/outils'\nimport ExerciceSimple from '../../ExerciceSimple'\nexport const titre =\n  'Déterminer le plus petit dénominateur commun à deux fractions'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\nexport const dateDePublication = '11/10/2025'\n\n/**\n * @author Jean-Claude Lhote\n */\nexport const uuid = '3b4d5'\n\nexport const refs = {\n  'fr-fr': ['can3C20'],\n  'fr-ch': [],\n}\n\nconst listeDesDénominateursAEviter = [\n  11, 13, 17, 19, 22, 23, 29, 31, 33, 34, 37, 38, 41, 43, 44, 46, 47, 49, 51,\n  53, 55, 57, 59, 61, 62, 65, 66, 67, 69, 71, 73, 74, 77, 79, 82, 86, 87, 88,\n  91, 93, 94, 95, 97,\n]\nexport default class DenominateurCommun2 extends ExerciceSimple {\n  constructor() {\n    super()\n    this.typeExercice = 'simple'\n    this.correctionDetailleeDisponible = true\n    this.versionQcmDisponible = true\n    this.spacing = 2\n    this.spacingCorr = 2\n    this.nbQuestions = 1\n    this.formatChampTexte = KeyboardType.clavierDeBase\n    this.optionsChampTexte = { texteAvant: '<br>' }\n  }\n\n  nouvelleVersion() {\n    // générer deux fractions avec dénominateurs différents dans [4,80]\n    // s'assurer que le résultat (ppcm des dénominateurs réduits) soit < 100\n    let frac1: FractionEtendue\n    let frac2: FractionEtendue\n    let resultat: number\n    let attempts = 0\n    let sontPremiersEntreEux: boolean\n    do {\n      const den1 = randint(4, 80, listeDesDénominateursAEviter)\n      const num1 = randint(1, den1 - 1, listeDesDénominateursAEviter)\n      frac1 = fraction(num1, den1)\n\n      let den2: number, num2: number\n      do {\n        den2 = randint(4, 80, listeDesDénominateursAEviter)\n        num2 = randint(1, den2 - 1, listeDesDénominateursAEviter)\n        frac2 = fraction(num2, den2)\n      } while (frac2.den === frac1.den)\n\n      resultat = ppcm(frac1.denIrred, frac2.denIrred)\n      attempts++\n      // si boucle trop longue, restreindre la plage des dénominateurs pour favoriser ppcm < 100\n      if (attempts === 150) {\n        // forcer dénominateurs plus petits afin d'obtenir un PPCM < 100\n        const denA = randint(4, 30)\n        const numA = randint(1, denA - 1)\n        frac1 = fraction(numA, denA)\n        const denB = randint(4, 30)\n        const numB = randint(1, denB - 1)\n        frac2 = fraction(numB, denB)\n        resultat = ppcm(frac1.denIrred, frac2.denIrred)\n        break\n      }\n      sontPremiersEntreEux = pgcd(frac1.denIrred, frac2.denIrred) === 1\n    } while (\n      (resultat >= 100 && !sontPremiersEntreEux) ||\n      listeDesDénominateursAEviter.includes(frac1.denIrred) ||\n      listeDesDénominateursAEviter.includes(frac2.denIrred)\n    ) // si ppcm >= 100, forcer fractions premières entre elles pour limiter le ppcm\n    // réduire chaque fraction si possible\n    const k1 = resultat / frac1.denIrred\n    const k2 = resultat / frac2.denIrred\n    const numScale1 = frac1.numIrred * k1\n    const numScale2 = frac2.numIrred * k2\n\n    this.question = `Voici deux fractions : $${frac1.texFraction}$ et $${frac2.texFraction}$.<br>\nQuel est le plus petit dénominateur commun de ces deux fractions ?`\n\n    let correction = `Les dénominateurs initiaux des fractions $${frac1.texFraction}$ et $${frac2.texFraction}$ sont $${frac1.den}$ et $${frac2.den}$.<br>`\n    if (!frac1.estIrreductible || !frac2.estIrreductible) {\n      // au moins une fraction se simplifie\n      correction += `Après simplification on obtient `\n      correction += ` $${frac1.texFractionSimplifiee}$` // affichage simple\n      correction += ` et `\n      correction += ` $${frac2.texFractionSimplifiee}$` // affichage simple\n      correction += `.<br>On prend ensuite le plus petit multiple commun des dénominateurs simplifiés $${frac1.denIrred}$ et $${frac2.denIrred}$.<br>`\n    } else {\n      correction += `Les deux fractions sont déjà irréductibles.<br>On cherche le plus petit multiple commun de $${frac1.denIrred}$ et $${frac2.denIrred}$.<br>`\n    }\n    if (this.correctionDetaillee) {\n      correction += `On multiplie le dénominateur de la première fraction par ${k1} : $${frac1.denIrred}\\\\times ${k1} = ${resultat}$.<br>`\n      correction += `On multiplie le dénominateur de la deuxième fraction par ${k2} : $${frac2.denIrred}\\\\times ${k2} = ${resultat}$.<br>`\n    }\n    if (this.correctionDetaillee) {\n      correction += `Les numérateurs correspondants deviennent $${frac1.numIrred}\\\\times ${k1} = ${numScale1}$ et $${frac2.numIrred}\\\\times ${k2} = ${numScale2}$.<br>`\n      correction += `Les fractions s'écrivent donc avec le dénominateur commun $${resultat}$ :<br>`\n      correction += ` $${frac1.texFractionSimplifiee} = \\\\dfrac{${numScale1}}{${resultat}}$ et $${frac2.texFractionSimplifiee} = \\\\dfrac{${numScale2}}{${resultat}}$.<br>`\n    }\n    correction += `Le plus petit dénominateur commun est $${miseEnEvidence(resultat)}$.`\n\n    this.correction = correction\n    this.reponse = resultat\n\n    // proposer des distracteurs pour la version QCM\n    if (this.versionQcm) {\n      // construire une liste de candidats d'erreurs courantes puis filtrer pour éviter la bonne réponse\n      const ppcmOriginal = ppcm(frac1.den, frac2.den) // oublier de simplifier\n      const produitOriginal = frac1.den * frac2.den // confondre avec le produit\n      const produitIrreductible = frac1.denIrred * frac2.denIrred // confondre produit des dénominateurs réduits\n      const pgcdOriginal = pgcd(frac1.den, frac2.den) // confondre avec le PGCD\n      const pgcdIrred = pgcd(frac1.denIrred, frac2.denIrred)\n      const minDen = Math.min(frac1.denIrred, frac2.denIrred)\n      const maxDen = Math.max(frac1.denIrred, frac2.denIrred)\n      const diffDen = Math.abs(frac1.denIrred - frac2.denIrred) || 1\n      const half = Math.max(1, Math.floor(resultat / 2))\n      const double = resultat * 2\n\n      const candidates = [\n        ppcmOriginal,\n        produitOriginal,\n        produitIrreductible,\n        pgcdOriginal,\n        pgcdIrred,\n        minDen,\n        maxDen,\n        diffDen,\n        half,\n        double,\n      ]\n\n      // filtrer, dédupliquer et retirer la bonne réponse\n      const uniq = Array.from(\n        new Set(candidates.filter((n) => n > 0 && n !== resultat)),\n      )\n\n      const picked = shuffle(uniq).slice(0, 4)\n\n      this.distracteurs = picked.map((n) => `$${n}$`)\n    }\n\n    this.canEnonce = this.question\n    this.canReponseACompleter = ''\n  }\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","dateDePublication","uuid","refs","listeDesDénominateursAEviter","DenominateurCommun2","ExerciceSimple","KeyboardType","frac1","frac2","resultat","attempts","sontPremiersEntreEux","den1","randint","num1","fraction","den2","num2","ppcm","denA","numA","denB","numB","pgcd","k1","k2","numScale1","numScale2","correction","miseEnEvidence","ppcmOriginal","produitOriginal","produitIrreductible","pgcdOriginal","pgcdIrred","minDen","maxDen","diffDen","half","double","candidates","uniq","n","picked","shuffle"],"mappings":"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"}