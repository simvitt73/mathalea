{"version":3,"file":"1A-F01-4-lG0iILVY.js","sources":["../../src/exercices/1e/1A-F01-4.ts"],"sourcesContent":["import { repere } from '../../lib/2d/reperes'\nimport { latex2d } from '../../lib/2d/textes'\nimport {\n  Spline,\n  spline,\n  type NoeudSpline,\n} from '../../lib/mathFonctions/Spline'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { ecritureParentheseSiNegatif } from '../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { randint } from '../../modules/outils'\n\nimport ExerciceQcmA from '../ExerciceQcmA'\nexport const dateDePublication = '03/01/2026'\nexport const uuid = '26795'\n\nexport const refs = {\n  'fr-fr': ['1A-F01-4'],\n  'fr-ch': [''],\n}\nexport const interactifReady = true\nexport const interactifType = 'qcm'\nexport const amcReady = 'true'\nexport const amcType = 'qcmMono'\nexport const titre =\n  \"Calculer une somme ou différence d'images avec un graphique\"\nexport default class AutoF01d extends ExerciceQcmA {\n  compteur = 0\n  spline?: Spline\n\n  private appliquerLesValeurs(\n    noeuds: NoeudSpline[],\n    coeffX: number,\n    abs1: number,\n    abs2: number,\n    estSomme: boolean,\n  ): void {\n    // Aléatorisation éventuelle de la courbe\n    function aleatoiriseCourbe(noeudsChoisis: NoeudSpline[]) {\n      const coeffY = 1\n      const deltaX = 0\n      const deltaY = 0\n\n      return noeudsChoisis.map((noeud: NoeudSpline) =>\n        Object({\n          x: (noeud.x + deltaX) * coeffX,\n          y: (noeud.y + deltaY) * coeffY,\n          deriveeGauche: noeud.deriveeGauche * coeffX * coeffY,\n          deriveeDroit: noeud.deriveeDroit * coeffX * coeffY,\n          isVisible: noeud.isVisible,\n        }),\n      )\n    }\n\n    const o = latex2d('\\\\text{O}', -0.3, -0.3, { letterSize: 'scriptsize' })\n\n    const nuage = aleatoiriseCourbe(noeuds)\n    const theSpline = spline(nuage)\n    this.spline = theSpline\n    const bornes = theSpline.trouveMaxes()\n\n    const repere1 = repere({\n      xMin: bornes.xMin - 1,\n      xMax: bornes.xMax + 1,\n      yMin: bornes.yMin - 1,\n      yMax: bornes.yMax + 1,\n      grilleX: true,\n      grilleY: true,\n      xThickMin: bornes.xMin - 1,\n      yThickMin: bornes.yMin - 1,\n      yThickMax: bornes.yMax + 1,\n      xLabelMin: bornes.xMin,\n      yLabelMin: bornes.yMin,\n      yLabelMax: bornes.yMax,\n      xLabelMax: bornes.xMax,\n      xThickMax: bornes.xMax + 1,\n      axesEpaisseur: 1.5,\n      grilleOpacite: 0.6,\n      grilleSecondaire: true,\n      grilleSecondaireDistance: 0.5,\n      grilleSecondaireOpacite: 0.2,\n      grilleYMin: bornes.yMin - 1.02,\n      grilleYMax: bornes.yMax + 1.02,\n      grilleXMin: bornes.xMin - 1.02,\n      grilleXMax: bornes.xMax + 1.02,\n    })\n\n    const courbe1 = theSpline.courbe({\n      epaisseur: 1.5,\n      ajouteNoeuds: true,\n      optionsNoeuds: { color: 'black', taille: 1.5, style: 'x', epaisseur: 2 },\n      color: 'blue',\n    })\n\n    const objetsEnonce = [repere1, courbe1]\n\n    this.enonce = `On considère une fonction $f$ dont la représentation graphique  est tracée ci-dessous.<br>`\n    this.enonce +=\n      mathalea2d(\n        Object.assign(\n          { pixelsParCm: 30, scale: 1, style: 'margin: auto' },\n          {\n            xmin: bornes.xMin - 1,\n            ymin: bornes.yMin - 1,\n            xmax: bornes.xMax + 1,\n            ymax: bornes.yMax + 1,\n          },\n        ),\n        objetsEnonce,\n        o,\n      ) + '<br><br>'\n\n    const x1 = theSpline.x[abs1]\n    const y1 = theSpline.y[abs1]\n    const x2 = theSpline.x[abs2]\n    const y2 = theSpline.y[abs2]\n    const resultat = estSomme ? y1 + y2 : y1 - y2\n\n    const operateur = estSomme ? '+' : '-'\n    this.enonce += `$f(${texNombre(x1)}) ${operateur} f(${texNombre(x2)})$ est égal à :`\n\n    // Distracteurs\n    const mauvaisesReponses = [\n      x1 + x2, // Erreur : somme des abscisses\n      x1 - x2, // Erreur : différence des abscisses\n      y1 + x2, // Erreur : mélange image et abscisse\n      y2 + x1, // Erreur : mélange image et abscisse\n      y1 - x2, // Erreur : mélange image et abscisse\n      y2 - x1, // Erreur : mélange image et abscisse\n      estSomme ? y1 - y2 : y1 + y2, // Erreur : mauvaise opération\n    ]\n\n    // Filtrer les doublons et les valeurs égales au résultat\n    const mauvaisesReponsesUniques = [...new Set(mauvaisesReponses)]\n      .filter((val) => val !== resultat)\n      .slice(0, 3)\n\n    // S'assurer d'avoir au moins 3 distracteurs\n    while (mauvaisesReponsesUniques.length < 3) {\n      const distraction = resultat + randint(-3, 3, [0])\n      if (\n        !mauvaisesReponsesUniques.includes(distraction) &&\n        distraction !== resultat\n      ) {\n        mauvaisesReponsesUniques.push(distraction)\n      }\n    }\n\n    this.reponses = [\n      `$${texNombre(resultat)}$`, // Bonne réponse en premier\n      ...mauvaisesReponsesUniques.map((val) => `$${texNombre(val)}$`), // Mauvaises réponses ensuite\n    ]\n\n    this.correction = `D'après le graphique, on lit :<br>\n          $f(${texNombre(x1)}) = ${texNombre(y1)}$ et\n          $f(${texNombre(x2)}) = ${texNombre(y2)}$.<br>\n          Donc $f(${texNombre(x1)}) ${operateur} f(${texNombre(x2)}) = ${texNombre(y1)} ${operateur} ${ecritureParentheseSiNegatif(y2)} = ${miseEnEvidence(texNombre(resultat))}$.`\n  }\n\n  versionOriginale: () => void = () => {\n    const noeuds1: NoeudSpline[] = [\n      { x: -4, y: -1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: -3, y: 0, deriveeGauche: 1, deriveeDroit: 1, isVisible: true },\n      { x: -2, y: 1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: -1, y: 0, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 0, y: -1, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 1, y: -3, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 3, y: -4, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: 4, y: -2, deriveeGauche: 1, deriveeDroit: 1, isVisible: true },\n      { x: 5, y: -1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n    ]\n\n    this.appliquerLesValeurs(noeuds1, 1, 2, 4, true)\n  }\n\n  versionAleatoire = () => {\n    const cas = randint(1,2)\n\n    const noeuds1: NoeudSpline[] = [\n      { x: -4, y: -1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: -3, y: 0, deriveeGauche: 1, deriveeDroit: 1, isVisible: true },\n      { x: -2, y: 1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: -1, y: 0, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 0, y: -0.5, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 1, y: -3, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 3, y: -4, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: 4, y: -2, deriveeGauche: 2, deriveeDroit: 2, isVisible: true },\n      { x: 5, y: -1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n    ]\n\n    const noeuds2: NoeudSpline[] = [\n      { x: -6, y: 2, deriveeGauche: 1, deriveeDroit: 1, isVisible: true },\n      { x: -5, y: 3, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: -4, y: 2, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: -3, y: 1, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: -2, y: 0, deriveeGauche: -1, deriveeDroit: -1, isVisible: true },\n      { x: 0, y: -4, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: 1, y: -2, deriveeGauche: 2, deriveeDroit: 2, isVisible: true },\n      { x: 2, y: -1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n      { x: 3, y: -3, deriveeGauche: -2, deriveeDroit: -2, isVisible: true },\n    ]\n\n    const noeudsCourbe = cas === 1 ? noeuds1 : noeuds2\n    const coeffX = choice([-1, 1])\n    const estSomme = choice([true, false])\n\n    // Choisir deux points distincts\n    const abs1 = randint(0, noeudsCourbe.length - 1)\n    let abs2 = randint(0, noeudsCourbe.length - 1)\n\n    // S'assurer que les deux points sont différents\n    while (abs2 === abs1) {\n      abs2 = randint(0, noeudsCourbe.length - 1)\n    }\n\n    this.appliquerLesValeurs(noeudsCourbe, coeffX, abs1, abs2, estSomme)\n  }\n\n  constructor() {\n    super()\n    this.versionAleatoire()\n    this.options = { vertical: false, ordered: false }\n  }\n}\n"],"names":["dateDePublication","uuid","refs","interactifReady","interactifType","amcReady","amcType","titre","AutoF01d","ExerciceQcmA","__publicField","noeuds1","noeudsCourbe","randint","coeffX","choice","estSomme","abs1","abs2","noeuds","aleatoiriseCourbe","noeudsChoisis","noeud","o","latex2d","nuage","theSpline","spline","bornes","repere1","repere","courbe1","objetsEnonce","mathalea2d","x1","y1","x2","y2","resultat","operateur","texNombre","mauvaisesReponses","mauvaisesReponsesUniques","val","distraction","ecritureParentheseSiNegatif","miseEnEvidence"],"mappings":"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"}