{"version":3,"file":"1A-S01-1-BcmTVuk8.js","sources":["../../src/exercices/1e/1A-S01-1.ts"],"sourcesContent":["/**\n * Exercice 1A-S1 : Choisir le bon diagramme circulaire\n *\n * OBJECTIF PÉDAGOGIQUE :\n * L'élève doit identifier le bon diagramme circulaire parmi 4 propositions\n * en fonction d'effectifs donnés dans une situation concrète.\n *\n * PRINCIPE DE FONCTIONNEMENT :\n * 1. On choisit une proportion prédéfinie (ex: [1/2, 1/4, 1/4])\n * 2. On choisit un total compatible parmi ceux prédéfinis pour cette proportion\n * 3. On calcule les effectifs correspondants\n * 4. On génère 3 distracteurs selon les règles de types\n * 5. La correction montre le calcul des parts et angles\n *\n * NOUVEAUTÉ : Système de types pour garantir des distracteurs visuellement distincts\n * - 8 types exhaustifs basés sur la composition angulaire\n * - Règles strictes : pas de même type entre bonne réponse et distracteurs\n *\n * @author G.Marris\n * @date 26/09/2025\n * @updated 08/10/2025 - Refactorisation selon architecture obligatoire (appliquerLesValeurs)\n */\n\nimport { diagrammeCirculaire } from '../../lib/2d/diagrammes'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { tableauColonneLigne } from '../../lib/2d/tableau'\nimport { createList } from '../../lib/format/lists'\nimport { choice, shuffle } from '../../lib/outils/arrayOutils'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport ExerciceQcmA from '../ExerciceQcmA'\n\n// ============================================================================\n// MÉTADONNÉES DE L'EXERCICE\n// ============================================================================\nexport const dateDePublication = '26/09/2025'\nexport const uuid = 'q5c12f'\nexport const refs = { 'fr-fr': ['1A-S01-1'], 'fr-ch': ['9FA1-8'] }\nexport const interactifReady = true\nexport const interactifType = 'qcm'\nexport const amcReady = 'true'\nexport const amcType = 'qcmMono'\nexport const titre = 'Choisir le bon diagramme circulaire'\n\n// ============================================================================\n// INTERFACES TYPESCRIPT\n// ============================================================================\n\n/**\n * Définit une proportion visuelle avec 3 secteurs\n */\ninterface ProportionVisuelle {\n  fractions: [number, number, number]\n  totauxPossibles: number[]\n  typeId: number\n}\n\n/**\n * Définit un contexte de situation réaliste\n */\ninterface ContexteSituation {\n  sujet: string\n  unite: string\n  groupes: string[]\n}\n\n/**\n * Données nécessaires pour construire l'exercice\n * (utilisées par appliquerLesValeurs)\n */\ninterface DonneesExercice {\n  bonne: ProportionVisuelle\n  total: number\n  ctx: ContexteSituation\n  proportionsDistractrices: ProportionVisuelle[]\n}\n\n// ============================================================================\n// CLASSE PRINCIPALE DE L'EXERCICE\n// ============================================================================\nexport default class Auto1AS1 extends ExerciceQcmA {\n  // ==========================================================================\n  // 1. DONNÉES STATIQUES\n  // ==========================================================================\n\n  /**\n   * CLASSIFICATION DES TYPES DE DIAGRAMMES (8 types exhaustifs)\n   *\n   * Classification par ordre décroissant des angles :\n   * - Rentrant (R) : 180° < α < 360°\n   * - Plat (P)     : α = 180°\n   * - Obtus (O)    : 90° < α < 180°\n   * - Droit (D)    : α = 90°\n   * - Aigu (A)     : 0° < α < 90°\n   *\n   * ┌────────┬───┬───┬───┬───┬───┬────────────────────────────────┐\n   * │ Type   │ R │ P │ O │ D │ A │ Description                    │\n   * ├────────┼───┼───┼───┼───┼───┼────────────────────────────────┤\n   * │ Type 1 │ 1 │ 0 │ 1 │ 0 │ 1 │ Ex: 210°, 120°, 30°            │\n   * │ Type 2 │ 1 │ 0 │ 0 │ 1 │ 1 │ Ex: 225°, 90°, 45°             │\n   * │ Type 3 │ 1 │ 0 │ 0 │ 0 │ 2 │ Ex: 216°, 72°, 72°             │\n   * │ Type 4 │ 0 │ 1 │ 1 │ 0 │ 1 │ Ex: 180°, 120°, 60°            │\n   * │ Type 5 │ 0 │ 1 │ 0 │ 2 │ 0 │ Ex: 180°, 90°, 90°             │\n   * │ Type 6 │ 0 │ 0 │ 3 │ 0 │ 0 │ Ex: 120°, 120°, 120°           │\n   * │ Type 7 │ 0 │ 0 │ 2 │ 1 │ 0 │ Ex: 135°, 135°, 90°            │\n   * │ Type 8 │ 0 │ 0 │ 2 │ 0 │ 1 │ Ex: 144°, 144°, 72°            │\n   * └────────┴───┴───┴───┴───┴───┴────────────────────────────────┘\n   *\n   * RÈGLES DE SÉLECTION DES DISTRACTEURS :\n   * - Bonne réponse et distracteurs doivent être de types différents\n   * - Type 4 : au plus 2 occurrences parmi les 4 propositions\n   * - Autres types : au plus 1 occurrence parmi les 4 propositions\n   */\n  private static readonly PROPORTIONS_VISUELLES: ProportionVisuelle[] = [\n    // Type 1\n    {\n      fractions: [7 / 12, 4 / 12, 1 / 12],\n      totauxPossibles: [60, 120],\n      typeId: 1,\n    },\n    // Type 2\n    {\n      fractions: [5 / 8, 1 / 4, 1 / 8],\n      totauxPossibles: [40, 80, 120, 160, 200],\n      typeId: 2,\n    },\n    // Type 3\n    {\n      fractions: [3 / 5, 1 / 5, 1 / 5],\n      totauxPossibles: [40, 60, 80, 100, 120, 160, 200],\n      typeId: 3,\n    },\n    // Type 4 (3 configurations)\n    {\n      fractions: [1 / 2, 4 / 10, 1 / 10],\n      totauxPossibles: [40, 60, 80, 100, 120, 160, 200],\n      typeId: 4,\n    },\n    {\n      fractions: [1 / 2, 3 / 10, 2 / 10],\n      totauxPossibles: [40, 60, 80, 100, 120, 160, 200],\n      typeId: 4,\n    },\n    {\n      fractions: [1 / 2, 1 / 3, 1 / 6],\n      totauxPossibles: [60, 120],\n      typeId: 4,\n    },\n    // Type 5\n    {\n      fractions: [1 / 2, 1 / 4, 1 / 4],\n      totauxPossibles: [40, 60, 80, 100, 120, 160, 200],\n      typeId: 5,\n    },\n    // Type 6\n    {\n      fractions: [1 / 3, 1 / 3, 1 / 3],\n      totauxPossibles: [60, 120],\n      typeId: 6,\n    },\n    // Type 7\n    {\n      fractions: [3 / 8, 3 / 8, 1 / 4],\n      totauxPossibles: [40, 80, 120, 160, 200],\n      typeId: 7,\n    },\n    // Type 8\n    {\n      fractions: [2 / 5, 2 / 5, 1 / 5],\n      totauxPossibles: [40, 60, 80, 100, 120, 160, 200],\n      typeId: 8,\n    },\n  ]\n\n  private static readonly CONTEXTES: ContexteSituation[] = [\n    {\n      sujet: 'employés dans une entreprise',\n      unite: 'employés',\n      groupes: [\n        'service commercial',\n        'service technique',\n        'service administratif',\n      ],\n    },\n    {\n      sujet: 'visiteurs dans un musée',\n      unite: 'visiteurs',\n      groupes: ['adultes', 'enfants', 'seniors'],\n    },\n    {\n      sujet: \"votes lors d'une élection\",\n      unite: 'votes',\n      groupes: ['candidat A', 'candidat B', 'candidat C'],\n    },\n    {\n      sujet: 'produits vendus dans un magasin',\n      unite: 'ventes',\n      groupes: ['produit A', 'produit B', 'produit C'],\n    },\n    {\n      sujet: 'votes du public pour un jeu télé',\n      unite: 'votes',\n      groupes: ['candidat A', 'équipe bleue', 'équipe verte'],\n    },\n    {\n      sujet: 'animaux dans un parc naturel',\n      unite: 'animaux',\n      groupes: ['éléphants', 'lions', 'girafes'],\n    },\n    {\n      sujet: 'votes pour un logo',\n      unite: 'votes',\n      groupes: ['logo 1', 'logo 2', 'logo 3'],\n    },\n    {\n      sujet: 'pièces produites dans une usine',\n      unite: 'pièces',\n      groupes: ['pièces type A', 'pièces type B', 'pièces type C'],\n    },\n    {\n      sujet: 'adhérents à un club sportif local',\n      unite: 'adhérents',\n      groupes: ['activité A', 'activité B', 'activité C'],\n    },\n    {\n      sujet: 'véhicules dans un parking',\n      unite: 'véhicules',\n      groupes: ['voitures', 'motos', 'camions'],\n    },\n    {\n      sujet: 'arbres dans un parc',\n      unite: 'arbres',\n      groupes: ['chênes', 'érables', 'autres essences'],\n    },\n    {\n      sujet: 'logements dans un quartier',\n      unite: 'logements',\n      groupes: ['appartements', 'maisons individuelles', 'autres types'],\n    },\n    {\n      sujet: 'réponses à un sondage',\n      unite: 'réponses',\n      groupes: ['réponse A', 'réponse B', 'réponse C'],\n    },\n    {\n      sujet: 'articles vendus dans un magasin',\n      unite: 'articles',\n      groupes: ['catégorie 1', 'catégorie 2', 'catégorie 3'],\n    },\n  ]\n\n  private static readonly MAX_TENTATIVES = 100\n\n  // ==========================================================================\n  // 2. MÉTHODES UTILITAIRES PRIVÉES\n  // ==========================================================================\n\n  /**\n   * Calcule les effectifs à partir d'une proportion et d'un total\n   */\n  private calculerEffectifs(\n    proportion: ProportionVisuelle,\n    total: number,\n  ): [number, number, number] {\n    return [\n      proportion.fractions[0] * total,\n      proportion.fractions[1] * total,\n      proportion.fractions[2] * total,\n    ]\n  }\n\n  /**\n   * Génère une figure SVG d'un diagramme circulaire\n   */\n  private fig = (effectifs: [number, number, number]): string => {\n    const r = 3\n    const n = effectifs.length\n    const labels = Array(n).fill('')\n\n    const diag = diagrammeCirculaire({\n      effectifs,\n      labels,\n      rayon: r,\n      legendeAffichage: false,\n      visibles: Array(n).fill(true),\n      // remplissage: Array(n).fill(true),\n      hachures: [true, true, true],\n    })\n\n    const objets = [diag]\n\n    return mathalea2d(\n      Object.assign(\n        {\n          style: 'display: inline-block;',\n          pixelsParCm: 16,\n          scale: 0.4,\n        },\n        fixeBordures(objets, { rxmin: 0, rymin: 0, rxmax: 0, rymax: 0 }),\n      ),\n      objets,\n    )\n  }\n\n  /**\n   * Détecte si des angles sont égaux dans les fractions\n   */\n  private detecterAnglesEgaux(\n    fractions: [number, number, number],\n  ): { nb: 2 | 3; valeur: number } | null {\n    const angles = fractions.map((f) => Math.round(f * 360))\n\n    if (angles[0] === angles[1] && angles[1] === angles[2]) {\n      return { nb: 3, valeur: angles[0] }\n    }\n\n    if (angles[0] === angles[1]) return { nb: 2, valeur: angles[0] }\n    if (angles[0] === angles[2]) return { nb: 2, valeur: angles[0] }\n    if (angles[1] === angles[2]) return { nb: 2, valeur: angles[1] }\n\n    return null\n  }\n\n  /**\n   * Génère la description textuelle des angles du diagramme\n   */\n  private genererDescription(fractions: [number, number, number]): string {\n    const angles = fractions.map((f) => Math.round(f * 360))\n    const anglesEgaux = this.detecterAnglesEgaux(fractions)\n\n    const categoriser = (angle: number): string => {\n      if (angle > 180) return 'rentrant'\n      if (angle === 180) return 'plat'\n      if (angle > 90) return 'obtus'\n      if (angle === 90) return 'droit'\n      return 'aigu'\n    }\n\n    // Helper pour le pluriel (obtus reste obtus au pluriel)\n    const avecPluriel = (categorie: string, nb: number): string => {\n      if (nb === 1) return categorie\n      if (categorie === 'obtus') return 'obtus'\n      return categorie + 's'\n    }\n\n    // Cas 1 : Trois angles égaux\n    if (anglesEgaux && anglesEgaux.nb === 3) {\n      const categorie = categoriser(anglesEgaux.valeur)\n      const categoriePluriel = avecPluriel(categorie, 3)\n      return `trois angles ${categoriePluriel} égaux (de $${anglesEgaux.valeur}°$)`\n    }\n\n    // Cas 2 : Deux angles égaux\n    if (anglesEgaux && anglesEgaux.nb === 2) {\n      const categorie = categoriser(anglesEgaux.valeur)\n      const categoriePluriel = avecPluriel(categorie, 2)\n      const angleDifferent = angles.find((a) => a !== anglesEgaux.valeur)!\n      const categorieDiff = categoriser(angleDifferent)\n\n      return `deux angles ${categoriePluriel} égaux (de $${anglesEgaux.valeur}°$) et un angle ${categorieDiff} (de $${angleDifferent}°$)`\n    }\n\n    // Cas 3 : Trois angles différents\n    const descriptions: string[] = []\n    const valeursAngles: number[] = []\n\n    for (const angle of angles) {\n      const categorie = categoriser(angle)\n      descriptions.push(`un angle ${categorie}`)\n      valeursAngles.push(angle)\n    }\n\n    let resultat = ''\n    if (descriptions.length === 2) {\n      resultat = descriptions.join(' et ')\n    } else {\n      resultat =\n        descriptions.slice(0, -1).join(', ') +\n        ' et ' +\n        descriptions[descriptions.length - 1]\n    }\n    resultat += ` (respectivement de $${valeursAngles.join('°, ')}°$)`\n    return resultat\n  }\n\n  /**\n   * Construit le tableau de correction (effectifs → parts → angles)\n   */\n  private construireTableauCorrection(\n    effectifs: [number, number, number],\n    total: number,\n    groupes: [string, string, string],\n    fractions: [number, number, number],\n  ): string {\n    const [eff1, eff2, eff3] = effectifs\n    const [frac1, frac2, frac3] = fractions\n    const a1 = Math.round(360 * frac1)\n    const a2 = Math.round(360 * frac2)\n    const a3 = Math.round(360 * frac3)\n\n    const entetesColonnes: (string | number)[] = []\n    const entetesLignes = [\n      '\\\\text{Groupe}',\n      '\\\\text{Effectif}',\n      '\\\\text{Part}',\n      '\\\\text{Angle}',\n    ]\n\n    const frac1Obj = new FractionEtendue(eff1, total)\n    const frac2Obj = new FractionEtendue(eff2, total)\n    const frac3Obj = new FractionEtendue(eff3, total)\n\n    const frac1NR = frac1Obj.texFraction.replace(/\\$/g, '')\n    const frac2NR = frac2Obj.texFraction.replace(/\\$/g, '')\n    const frac3NR = frac3Obj.texFraction.replace(/\\$/g, '')\n\n    const frac1Simpl = frac1Obj.texFractionSimplifiee.replace(/\\$/g, '')\n    const frac2Simpl = frac2Obj.texFractionSimplifiee.replace(/\\$/g, '')\n    const frac3Simpl = frac3Obj.texFractionSimplifiee.replace(/\\$/g, '')\n\n    const cellules = [\n      `\\\\text{${groupes[0]}}`,\n      `\\\\text{${groupes[1]}}`,\n      `\\\\text{${groupes[2]}}`,\n      eff1,\n      eff2,\n      eff3,\n      frac1NR === frac1Simpl ? frac1NR : `${frac1NR}=${frac1Simpl}`,\n      frac2NR === frac2Simpl ? frac2NR : `${frac2NR}=${frac2Simpl}`,\n      frac3NR === frac3Simpl ? frac3NR : `${frac3NR}=${frac3Simpl}`,\n      `${a1}°`,\n      `${a2}°`,\n      `${a3}°`,\n    ]\n\n    return tableauColonneLigne(entetesColonnes, entetesLignes, cellules)\n  }\n\n  // ==========================================================================\n  // 3. CONSTRUCTEUR\n  // ==========================================================================\n  constructor() {\n    super()\n    this.versionAleatoire()\n    this.ajouteQcmCorr = true\n    this.spacing = 1.5\n    this.spacingCorr = 1.5\n  }\n\n  // ==========================================================================\n  // 4. VERSIONS (qui appellent appliquerLesValeurs())\n  // ==========================================================================\n\n  versionOriginale: () => void = () => {\n    // Définition de la bonne réponse (proportion type 4)\n    const bonne: ProportionVisuelle = {\n      fractions: [1 / 2, 1 / 5, 3 / 10],\n      totauxPossibles: [60],\n      typeId: 4,\n    }\n\n    // Contexte fixe\n    const ctx: ContexteSituation = {\n      sujet: 'élèves dans une classe',\n      unite: 'élèves',\n      groupes: ['groupe A', 'groupe B', 'groupe C'],\n    }\n\n    // Distracteurs fixes (types différents)\n    const proportionsDistractrices: ProportionVisuelle[] = [\n      { fractions: [1 / 3, 1 / 3, 1 / 3], totauxPossibles: [60], typeId: 6 }, // Type 6\n      { fractions: [1 / 4, 1 / 4, 1 / 2], totauxPossibles: [60], typeId: 5 }, // Type 5\n      { fractions: [2 / 5, 1 / 5, 2 / 5], totauxPossibles: [60], typeId: 8 }, // Type 8\n    ]\n\n    this.appliquerLesValeurs({\n      bonne,\n      total: 60,\n      ctx,\n      proportionsDistractrices,\n    })\n  }\n\n  versionAleatoire: () => void = () => {\n    for (let tentative = 0; tentative < Auto1AS1.MAX_TENTATIVES; tentative++) {\n      // Sélection de la bonne réponse\n      const bonne = choice(Auto1AS1.PROPORTIONS_VISUELLES)\n      const total = choice(bonne.totauxPossibles)\n\n      // Sélection des distracteurs selon les règles de types\n      let candidats = Auto1AS1.PROPORTIONS_VISUELLES.filter((p) => {\n        // Exclusions :\n        if (p === bonne) return false // Pas la bonne réponse\n        if (p.typeId === bonne.typeId) return false // Pas le même type\n        if (!p.totauxPossibles.includes(total)) return false // Total incompatible\n        return true\n      })\n\n      // Règle spéciale pour Type 4 : autoriser au plus 2 occurrences (bonne + 1 distracteur)\n      if (bonne.typeId === 4) {\n        const type4Candidats = candidats.filter((p) => p.typeId === 4)\n        const autresCandidats = candidats.filter((p) => p.typeId !== 4)\n        const type4Selectionne =\n          type4Candidats.length > 0 ? [choice(type4Candidats)] : []\n        candidats = [...type4Selectionne, ...autresCandidats]\n      }\n\n      // Sélection aléatoire de 3 distracteurs\n      const proportionsDistractrices = shuffle(candidats).slice(0, 3)\n\n      // Validation : on doit avoir exactement 3 distracteurs\n      if (proportionsDistractrices.length < 3) {\n        continue // Retenter\n      }\n\n      // Sélection du contexte\n      const ctx = choice(Auto1AS1.CONTEXTES)\n\n      // Si toutes les conditions sont satisfaites, appliquer les valeurs\n      this.appliquerLesValeurs({\n        bonne,\n        total,\n        ctx,\n        proportionsDistractrices,\n      })\n      return // Succès\n    }\n\n    // Fallback si aucune configuration valide trouvée\n    console.warn(\n      'Impossible de générer un exercice valide après ' +\n        Auto1AS1.MAX_TENTATIVES +\n        ' tentatives, utilisation de la version originale',\n    )\n    this.versionOriginale()\n  }\n\n  // ==========================================================================\n  // 5. MÉTHODE CENTRALE : appliquerLesValeurs\n  // ==========================================================================\n\n  /**\n   * Construit l'énoncé, la correction et les réponses à partir des données\n   * Cette méthode centralise TOUTE la logique de construction\n   */\n  private appliquerLesValeurs(donnees: DonneesExercice): void {\n    const { bonne, total, ctx, proportionsDistractrices } = donnees\n\n    // ========================================================================\n    // CALCUL DES EFFECTIFS\n    // ========================================================================\n    const [eff1, eff2, eff3] = this.calculerEffectifs(bonne, total)\n\n    // ========================================================================\n    // CONSTRUCTION ÉNONCÉ\n    // ========================================================================\n    this.enonce =\n      `Sur $${total}$ ${ctx.sujet}, on distingue trois groupes :` +\n      createList({\n        items: [\n          `${ctx.groupes[0]} : $${eff1}$ ${ctx.unite} ;`,\n          `${ctx.groupes[1]} : $${eff2}$ ${ctx.unite} ;`,\n          `${ctx.groupes[2]} : les autres.`,\n        ],\n        style: 'fleches',\n      }) +\n      'Quel diagramme circulaire représente la situation ?'\n\n    // ========================================================================\n    // CONSTRUCTION RÉPONSES\n    // ========================================================================\n    this.reponses = [\n      this.fig([eff1, eff2, eff3]), // Bonne réponse en premier\n      ...proportionsDistractrices.map((p) =>\n        this.fig(this.calculerEffectifs(p, total)),\n      ),\n    ]\n\n    // ========================================================================\n    // CONSTRUCTION CORRECTION\n    // ========================================================================\n    const tableau = this.construireTableauCorrection(\n      [eff1, eff2, eff3],\n      total,\n      [ctx.groupes[0], ctx.groupes[1], ctx.groupes[2]],\n      bonne.fractions,\n    )\n\n    const description = this.genererDescription(bonne.fractions)\n\n    this.correction =\n      `Les effectifs des $3$ groupes sont respectivement $${eff1}$, $${eff2}$ et $${total}-${eff1}-${eff2}=${eff3}$.<br><br>` +\n      tableau +\n      `Le bon diagramme est le seul avec : ${description}.`\n  }\n}\n"],"names":["dateDePublication","uuid","refs","interactifReady","interactifType","amcReady","amcType","titre","_Auto1AS1","ExerciceQcmA","__publicField","effectifs","n","labels","objets","diagrammeCirculaire","mathalea2d","fixeBordures","bonne","ctx","proportionsDistractrices","tentative","choice","total","candidats","p","type4Candidats","autresCandidats","shuffle","proportion","fractions","angles","f","anglesEgaux","categoriser","angle","avecPluriel","categorie","nb","categoriePluriel","angleDifferent","a","categorieDiff","descriptions","valeursAngles","resultat","groupes","eff1","eff2","eff3","frac1","frac2","frac3","a1","a2","a3","entetesColonnes","entetesLignes","frac1Obj","FractionEtendue","frac2Obj","frac3Obj","frac1NR","frac2NR","frac3NR","frac1Simpl","frac2Simpl","frac3Simpl","cellules","tableauColonneLigne","donnees","createList","tableau","description","Auto1AS1"],"mappings":"uxHAmCO,MAAMA,GAAoB,aACpBC,GAAO,SACPC,GAAO,CAAE,QAAS,CAAC,UAAU,EAAG,QAAS,CAAC,QAAQ,CAAA,EAClDC,GAAkB,GAClBC,GAAiB,MACjBC,GAAW,OACXC,GAAU,UACVC,GAAQ,sCAsCAC,EAArB,MAAqBA,UAAiBC,CAAa,CAyWjD,aAAc,CACZ,MAAA,EAxKMC,EAAA,WAAOC,GAAgD,CAE7D,MAAMC,EAAID,EAAU,OACdE,EAAS,MAAMD,CAAC,EAAE,KAAK,EAAE,EAYzBE,EAAS,CAVFC,EAAoB,CAC/B,UAAAJ,EACA,OAAAE,EACA,MAAO,EACP,iBAAkB,GAClB,SAAU,MAAMD,CAAC,EAAE,KAAK,EAAI,EAE5B,SAAU,CAAC,GAAM,GAAM,EAAI,CAAA,CAC5B,CAEmB,EAEpB,OAAOI,EACL,OAAO,OACL,CACE,MAAO,yBACP,YAAa,GACb,MAAO,EAAA,EAETC,EAAaH,EAAQ,CAAE,MAAO,EAAG,MAAO,EAAG,MAAO,EAAG,MAAO,CAAA,CAAG,CAAA,EAEjEA,CAAA,CAEJ,GAuJAJ,EAAA,wBAA+B,IAAM,CAEnC,MAAMQ,EAA4B,CAChC,UAAW,CAAC,GAAO,GAAO,EAAM,EAChC,gBAAiB,CAAC,EAAE,EACpB,OAAQ,CAAA,EAIJC,EAAyB,CAC7B,MAAO,yBACP,MAAO,SACP,QAAS,CAAC,WAAY,WAAY,UAAU,CAAA,EAIxCC,EAAiD,CACrD,CAAE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAAG,gBAAiB,CAAC,EAAE,EAAG,OAAQ,CAAA,EACnE,CAAE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAAG,gBAAiB,CAAC,EAAE,EAAG,OAAQ,CAAA,EACnE,CAAE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAAG,gBAAiB,CAAC,EAAE,EAAG,OAAQ,CAAA,CAAE,EAGvE,KAAK,oBAAoB,CACvB,MAAAF,EACA,MAAO,GACP,IAAAC,EACA,yBAAAC,CAAA,CACD,CACH,GAEAV,EAAA,wBAA+B,IAAM,CACnC,QAASW,EAAY,EAAGA,EAAYb,EAAS,eAAgBa,IAAa,CAExE,MAAMH,EAAQI,EAAOd,EAAS,qBAAqB,EAC7Ce,EAAQD,EAAOJ,EAAM,eAAe,EAG1C,IAAIM,EAAYhB,EAAS,sBAAsB,OAAQiB,GAEjD,EAAAA,IAAMP,GACNO,EAAE,SAAWP,EAAM,QACnB,CAACO,EAAE,gBAAgB,SAASF,CAAK,EAEtC,EAGD,GAAIL,EAAM,SAAW,EAAG,CACtB,MAAMQ,EAAiBF,EAAU,OAAQC,GAAMA,EAAE,SAAW,CAAC,EACvDE,EAAkBH,EAAU,OAAQC,GAAMA,EAAE,SAAW,CAAC,EAG9DD,EAAY,CAAC,GADXE,EAAe,OAAS,EAAI,CAACJ,EAAOI,CAAc,CAAC,EAAI,CAAA,EACvB,GAAGC,CAAe,CACtD,CAGA,MAAMP,EAA2BQ,EAAQJ,CAAS,EAAE,MAAM,EAAG,CAAC,EAG9D,GAAIJ,EAAyB,OAAS,EACpC,SAIF,MAAMD,EAAMG,EAAOd,EAAS,SAAS,EAGrC,KAAK,oBAAoB,CACvB,MAAAU,EACA,MAAAK,EACA,IAAAJ,EACA,yBAAAC,CAAA,CACD,EACD,MACF,CAGA,QAAQ,KACN,kDACEZ,EAAS,eACT,kDAAA,EAEJ,KAAK,iBAAA,CACP,GA5FE,KAAK,iBAAA,EACL,KAAK,cAAgB,GACrB,KAAK,QAAU,IACf,KAAK,YAAc,GACrB,CA3LQ,kBACNqB,EACAN,EAC0B,CAC1B,MAAO,CACLM,EAAW,UAAU,CAAC,EAAIN,EAC1BM,EAAW,UAAU,CAAC,EAAIN,EAC1BM,EAAW,UAAU,CAAC,EAAIN,CAAA,CAE9B,CAsCQ,oBACNO,EACsC,CACtC,MAAMC,EAASD,EAAU,IAAKE,GAAM,KAAK,MAAMA,EAAI,GAAG,CAAC,EAEvD,OAAID,EAAO,CAAC,IAAMA,EAAO,CAAC,GAAKA,EAAO,CAAC,IAAMA,EAAO,CAAC,EAC5C,CAAE,GAAI,EAAG,OAAQA,EAAO,CAAC,CAAA,EAG9BA,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAU,CAAE,GAAI,EAAG,OAAQA,EAAO,CAAC,CAAA,EACzDA,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAU,CAAE,GAAI,EAAG,OAAQA,EAAO,CAAC,CAAA,EACzDA,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAU,CAAE,GAAI,EAAG,OAAQA,EAAO,CAAC,CAAA,EAEtD,IACT,CAKQ,mBAAmBD,EAA6C,CACtE,MAAMC,EAASD,EAAU,IAAKE,GAAM,KAAK,MAAMA,EAAI,GAAG,CAAC,EACjDC,EAAc,KAAK,oBAAoBH,CAAS,EAEhDI,EAAeC,GACfA,EAAQ,IAAY,WACpBA,IAAU,IAAY,OACtBA,EAAQ,GAAW,QACnBA,IAAU,GAAW,QAClB,OAIHC,EAAc,CAACC,EAAmBC,IAClCA,IAAO,EAAUD,EACjBA,IAAc,QAAgB,QAC3BA,EAAY,IAIrB,GAAIJ,GAAeA,EAAY,KAAO,EAAG,CACvC,MAAMI,EAAYH,EAAYD,EAAY,MAAM,EAEhD,MAAO,gBADkBG,EAAYC,EAAW,CAAC,CACV,eAAeJ,EAAY,MAAM,KAC1E,CAGA,GAAIA,GAAeA,EAAY,KAAO,EAAG,CACvC,MAAMI,EAAYH,EAAYD,EAAY,MAAM,EAC1CM,EAAmBH,EAAYC,EAAW,CAAC,EAC3CG,EAAiBT,EAAO,KAAMU,GAAMA,IAAMR,EAAY,MAAM,EAC5DS,EAAgBR,EAAYM,CAAc,EAEhD,MAAO,eAAeD,CAAgB,eAAeN,EAAY,MAAM,mBAAmBS,CAAa,SAASF,CAAc,KAChI,CAGA,MAAMG,EAAyB,CAAA,EACzBC,EAA0B,CAAA,EAEhC,UAAWT,KAASJ,EAAQ,CAC1B,MAAMM,EAAYH,EAAYC,CAAK,EACnCQ,EAAa,KAAK,YAAYN,CAAS,EAAE,EACzCO,EAAc,KAAKT,CAAK,CAC1B,CAEA,IAAIU,EAAW,GACf,OAAIF,EAAa,SAAW,EAC1BE,EAAWF,EAAa,KAAK,MAAM,EAEnCE,EACEF,EAAa,MAAM,EAAG,EAAE,EAAE,KAAK,IAAI,EACnC,OACAA,EAAaA,EAAa,OAAS,CAAC,EAExCE,GAAY,wBAAwBD,EAAc,KAAK,KAAK,CAAC,MACtDC,CACT,CAKQ,4BACNlC,EACAY,EACAuB,EACAhB,EACQ,CACR,KAAM,CAACiB,EAAMC,EAAMC,CAAI,EAAItC,EACrB,CAACuC,EAAOC,EAAOC,CAAK,EAAItB,EACxBuB,EAAK,KAAK,MAAM,IAAMH,CAAK,EAC3BI,EAAK,KAAK,MAAM,IAAMH,CAAK,EAC3BI,EAAK,KAAK,MAAM,IAAMH,CAAK,EAE3BI,EAAuC,CAAA,EACvCC,EAAgB,CACpB,iBACA,mBACA,eACA,eAAA,EAGIC,EAAW,IAAIC,EAAgBZ,EAAMxB,CAAK,EAC1CqC,EAAW,IAAID,EAAgBX,EAAMzB,CAAK,EAC1CsC,EAAW,IAAIF,EAAgBV,EAAM1B,CAAK,EAE1CuC,EAAUJ,EAAS,YAAY,QAAQ,MAAO,EAAE,EAChDK,EAAUH,EAAS,YAAY,QAAQ,MAAO,EAAE,EAChDI,EAAUH,EAAS,YAAY,QAAQ,MAAO,EAAE,EAEhDI,EAAaP,EAAS,sBAAsB,QAAQ,MAAO,EAAE,EAC7DQ,EAAaN,EAAS,sBAAsB,QAAQ,MAAO,EAAE,EAC7DO,EAAaN,EAAS,sBAAsB,QAAQ,MAAO,EAAE,EAE7DO,EAAW,CACf,UAAUtB,EAAQ,CAAC,CAAC,IACpB,UAAUA,EAAQ,CAAC,CAAC,IACpB,UAAUA,EAAQ,CAAC,CAAC,IACpBC,EACAC,EACAC,EACAa,IAAYG,EAAaH,EAAU,GAAGA,CAAO,IAAIG,CAAU,GAC3DF,IAAYG,EAAaH,EAAU,GAAGA,CAAO,IAAIG,CAAU,GAC3DF,IAAYG,EAAaH,EAAU,GAAGA,CAAO,IAAIG,CAAU,GAC3D,GAAGd,CAAE,IACL,GAAGC,CAAE,IACL,GAAGC,CAAE,GAAA,EAGP,OAAOc,EAAoBb,EAAiBC,EAAeW,CAAQ,CACrE,CA6GQ,oBAAoBE,EAAgC,CAC1D,KAAM,CAAE,MAAApD,EAAO,MAAAK,EAAO,IAAAJ,EAAK,yBAAAC,GAA6BkD,EAKlD,CAACvB,EAAMC,EAAMC,CAAI,EAAI,KAAK,kBAAkB/B,EAAOK,CAAK,EAK9D,KAAK,OACH,QAAQA,CAAK,KAAKJ,EAAI,KAAK,iCAC3BoD,EAAW,CACT,MAAO,CACL,GAAGpD,EAAI,QAAQ,CAAC,CAAC,OAAO4B,CAAI,KAAK5B,EAAI,KAAK,KAC1C,GAAGA,EAAI,QAAQ,CAAC,CAAC,OAAO6B,CAAI,KAAK7B,EAAI,KAAK,KAC1C,GAAGA,EAAI,QAAQ,CAAC,CAAC,gBAAA,EAEnB,MAAO,SAAA,CACR,EACD,sDAKF,KAAK,SAAW,CACd,KAAK,IAAI,CAAC4B,EAAMC,EAAMC,CAAI,CAAC,EAC3B,GAAG7B,EAAyB,IAAKK,GAC/B,KAAK,IAAI,KAAK,kBAAkBA,EAAGF,CAAK,CAAC,CAAA,CAC3C,EAMF,MAAMiD,EAAU,KAAK,4BACnB,CAACzB,EAAMC,EAAMC,CAAI,EACjB1B,EACA,CAACJ,EAAI,QAAQ,CAAC,EAAGA,EAAI,QAAQ,CAAC,EAAGA,EAAI,QAAQ,CAAC,CAAC,EAC/CD,EAAM,SAAA,EAGFuD,EAAc,KAAK,mBAAmBvD,EAAM,SAAS,EAE3D,KAAK,WACH,sDAAsD6B,CAAI,OAAOC,CAAI,SAASzB,CAAK,IAAIwB,CAAI,IAAIC,CAAI,IAAIC,CAAI,aAC3GuB,EACA,uCAAuCC,CAAW,GACtD,CACF,EAleE/D,EAjCmBF,EAiCK,wBAA8C,CAEpE,CACE,UAAW,CAAC,EAAI,GAAI,EAAI,GAAI,EAAI,EAAE,EAClC,gBAAiB,CAAC,GAAI,GAAG,EACzB,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAI,IAAK,IAAK,GAAG,EACvC,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,EAChD,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,GAAI,EAAI,EAAE,EACjC,gBAAiB,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,EAChD,OAAQ,CAAA,EAEV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,GAAI,EAAI,EAAE,EACjC,gBAAiB,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,EAChD,OAAQ,CAAA,EAEV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAG,EACzB,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,EAChD,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAG,EACzB,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAI,IAAK,IAAK,GAAG,EACvC,OAAQ,CAAA,EAGV,CACE,UAAW,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,CAAC,EAC/B,gBAAiB,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,EAChD,OAAQ,CAAA,CACV,GAGFE,EA9FmBF,EA8FK,YAAiC,CACvD,CACE,MAAO,+BACP,MAAO,WACP,QAAS,CACP,qBACA,oBACA,uBAAA,CACF,EAEF,CACE,MAAO,0BACP,MAAO,YACP,QAAS,CAAC,UAAW,UAAW,SAAS,CAAA,EAE3C,CACE,MAAO,4BACP,MAAO,QACP,QAAS,CAAC,aAAc,aAAc,YAAY,CAAA,EAEpD,CACE,MAAO,kCACP,MAAO,SACP,QAAS,CAAC,YAAa,YAAa,WAAW,CAAA,EAEjD,CACE,MAAO,mCACP,MAAO,QACP,QAAS,CAAC,aAAc,eAAgB,cAAc,CAAA,EAExD,CACE,MAAO,+BACP,MAAO,UACP,QAAS,CAAC,YAAa,QAAS,SAAS,CAAA,EAE3C,CACE,MAAO,qBACP,MAAO,QACP,QAAS,CAAC,SAAU,SAAU,QAAQ,CAAA,EAExC,CACE,MAAO,kCACP,MAAO,SACP,QAAS,CAAC,gBAAiB,gBAAiB,eAAe,CAAA,EAE7D,CACE,MAAO,oCACP,MAAO,YACP,QAAS,CAAC,aAAc,aAAc,YAAY,CAAA,EAEpD,CACE,MAAO,4BACP,MAAO,YACP,QAAS,CAAC,WAAY,QAAS,SAAS,CAAA,EAE1C,CACE,MAAO,sBACP,MAAO,SACP,QAAS,CAAC,SAAU,UAAW,iBAAiB,CAAA,EAElD,CACE,MAAO,6BACP,MAAO,YACP,QAAS,CAAC,eAAgB,wBAAyB,cAAc,CAAA,EAEnE,CACE,MAAO,wBACP,MAAO,WACP,QAAS,CAAC,YAAa,YAAa,WAAW,CAAA,EAEjD,CACE,MAAO,kCACP,MAAO,WACP,QAAS,CAAC,cAAe,cAAe,aAAa,CAAA,CACvD,GAGFE,EA3KmBF,EA2KK,iBAAiB,KA3K3C,IAAqBkE,EAArBlE"}