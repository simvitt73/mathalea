var Q=Object.defineProperty;var Z=(e,a,s)=>a in e?Q(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;var d=(e,a,s)=>Z(e,typeof a!="symbol"?a+"":a,s);import{T as w,P as t,R as L}from"./index-CMKaCP9B.js";import{c as T,f as R,a as z}from"./utilitairesGeometriques-rO8Jz15i.js";import{O as _}from"./ObjetMathalea2D-CXcNXRpD.js";import{a as P,P as Y}from"./PointAbstrait-Cz1GEocE.js";import{d as U,a as B,s as I}from"./segmentsVecteurs-DhSnlc3S.js";import{a as v,t as ee}from"./textes-BId1S-Qs.js";import{v as W}from"./Vide2d-lYMmc9eB.js";class te{constructor(a,s,i=""){d(this,"nom");d(this,"x");d(this,"y");this.nom=i??"";const h=l=>typeof l=="object"&&l!=null&&"x"in l&&"y"in l;if(typeof a=="number"&&typeof s=="number"){this.x=a,this.y=s;return}if(h(a)&&h(s)){this.x=s.x-a.x,this.y=s.y-a.y;return}window.notify("Vecteur : utilisez (x: number, y: number) ou (A, B) pour construire un vecteur.",{a,b:s,nom:i}),this.x=0,this.y=0}norme(){return Math.sqrt(this.x**2+this.y**2)}oppose(){this.x=-this.x,this.y=-this.y}xSVG(a){return this.x*a}ySVG(a){return-this.y*a}}function A(e,a,s=""){return new te(e,a,s)}function ce(e,a,{preferedPosition:s="auto",usedPosition:i=[],letterSize:h="footnotesize",color:l="red",backgroundColor:c="white"}={}){let n,f,b,u,r;const o=[];if(a!==""){if(w(e.b,0,.05))n=-e.c/e.a+30*.5/t.pixelsParCm+2/t.pixelsParCm,f=t.fenetreMathalea2d[1]+1,u="right",r="below",b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]});else if(w(e.a,0,.05))n=t.fenetreMathalea2d[0]+1,f=-e.c/e.b+20*.5/t.pixelsParCm,u="above",r="left",b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]});else{const p=(-e.a*(t.fenetreMathalea2d[0]+1)-e.c)/e.b,M=(-e.a*(t.fenetreMathalea2d[2]-1)-e.c)/e.b,m=(-e.b*(t.fenetreMathalea2d[1]+1)-e.c)/e.a,N=(-e.b*(t.fenetreMathalea2d[3]-1)-e.c)/e.a;p>t.fenetreMathalea2d[1]&&p<t.fenetreMathalea2d[3]&&(n=t.fenetreMathalea2d[0]+1,f=p-e.pente*(30*.5/t.pixelsParCm)+(e.pente>0?-1:1)*20*.5/t.pixelsParCm,u=e.pente>0?"below":"above",r="left",f<t.fenetreMathalea2d[1]+1||f>t.fenetreMathalea2d[3]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]})),n=t.fenetreMathalea2d[0]+1,f=p+e.pente*(30*.5/t.pixelsParCm)-(e.pente>0?-1:1)*20*.5/t.pixelsParCm,u=e.pente>0?"above":"below",r="left",f<t.fenetreMathalea2d[1]+1||f>t.fenetreMathalea2d[3]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]}))),M>t.fenetreMathalea2d[1]&&M<t.fenetreMathalea2d[3]&&(n=t.fenetreMathalea2d[2]-1,f=M-e.pente*(30*.5/t.pixelsParCm)+(e.pente>0?-1:1)*20*.5/t.pixelsParCm,u=e.pente>0?"below":"above",r="right",f<t.fenetreMathalea2d[1]+1||f>t.fenetreMathalea2d[3]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]}))),m>t.fenetreMathalea2d[0]&&m<t.fenetreMathalea2d[2]&&(n=m+(e.pente>0?-1:1)*30*.5/t.pixelsParCm-(e.pente>0,1*(20*.5/t.pixelsParCm)/e.pente)-(e.pente>0?1:-1)*2/t.pixelsParCm,f=t.fenetreMathalea2d[1]+1,u=e.pente>0?"left":"right",r="below",n<t.fenetreMathalea2d[0]+1||n>t.fenetreMathalea2d[2]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]})),n=m-(e.pente>0?-1:1)*30*.5/t.pixelsParCm+(e.pente>0,1*(20*.5/t.pixelsParCm)/e.pente)+(e.pente>0?1:-1)*2/t.pixelsParCm,f=t.fenetreMathalea2d[1]+1,u=e.pente>0?"right":"left",r="below",n<t.fenetreMathalea2d[0]+1||n>t.fenetreMathalea2d[2]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]}))),N>t.fenetreMathalea2d[0]&&N<t.fenetreMathalea2d[2]&&(n=N+(e.pente>0?-1:1)*30*.5/t.pixelsParCm-(e.pente>0,1*(20*.5/t.pixelsParCm)/e.pente)-(e.pente>0?1:-1)*2/t.pixelsParCm,f=t.fenetreMathalea2d[3]-1,u=e.pente>0?"left":"right",r="above",n<t.fenetreMathalea2d[0]+1||n>t.fenetreMathalea2d[2]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]})),n=N-(e.pente>0?-1:1)*30*.5/t.pixelsParCm+(e.pente>0,1*(20*.5/t.pixelsParCm)/e.pente)+(e.pente>0?1:-1)*2/t.pixelsParCm,f=t.fenetreMathalea2d[3]-1,u=e.pente>0?"right":"left",r="above",n<t.fenetreMathalea2d[0]+1||n>t.fenetreMathalea2d[2]-1||(b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]})));let D,$;p>t.fenetreMathalea2d[1]&&p<t.fenetreMathalea2d[3]?D=t.fenetreMathalea2d[0]:D=Math.min(m,N),M>t.fenetreMathalea2d[1]&&M<t.fenetreMathalea2d[3]?$=t.fenetreMathalea2d[2]:$=Math.max(m,N),n=(D+$)/2,f=U(e,n,"").y,u=e.pente>0?"left":"right",r="middle",b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h}),o.push({label:b,position:r,anch:u,colision:[]})}b=v(a,n,f,{color:l,backgroundColor:"white",letterSize:h});for(let p=0;p<o.length;p++){if(o[p].position==="middle")continue;const M=[];for(let m=0;m<i.length;m++){const N=i[m],D=Math.sqrt((N.x-o[p].label.x)**2+(N.y-o[p].label.y)**2)*t.pixelsParCm,$=[N.x*t.pixelsParCm-30/2,N.x*t.pixelsParCm+30/2,N.y*t.pixelsParCm-20/2,N.y*t.pixelsParCm+20/2],S=[o[p].label.x*t.pixelsParCm-30/2,o[p].label.x*t.pixelsParCm+30/2,o[p].label.y*t.pixelsParCm-20/2,o[p].label.y*t.pixelsParCm+20/2],V=$[0]<S[1]&&$[1]>S[0]&&$[2]<S[3]&&$[3]>S[2];M[m]=[D,V]}o[p].colision=[...M]}const C=[!1,0];for(let p=0;p<o.length&&!C[0];p++)if(o[p].position!=="middle"&&o[p].position===s){C[0]=!0;for(let M=0;M<i.length;M++)o[p].colision[M][1]&&(C[0]=!1);C[1]=p}let k=[0,0,0];for(let p=0;p<o.length&&!C[0]&&i.length>0;p++){if(o[p].position==="middle")continue;let M=[1e3,0,0];for(let m=0;m<i.length;m++)o[p].colision[m][0]<M[0]&&(M=[o[p].colision[m][0],p,m]);M[0]>k[0]&&(k=M)}let g=!1;k[0]>0&&(g=o[k[1]].colision[k[2]][1]),b=C[0]?o[C[1]].label:k[0]>0&&!g?o[k[1]].label:o[i.length===0?0:o.length-1].label}else b=W();return b}function fe(e,a,s="black"){e.color=T(s??"black");let i,h;if(e.epaisseur=1,e.opacite=1,w(e.b,0,.05))i=-e.c/e.a+.8,h=t.fenetreMathalea2d[1]+1;else if(w(e.a,0,.05))i=t.fenetreMathalea2d[0]+.8,h=-e.c/e.b+.8;else{const c=(-e.a*(t.fenetreMathalea2d[0]+1)-e.c)/e.b,x=(-e.a*(t.fenetreMathalea2d[2]-1)-e.c)/e.b,y=(-e.b*(t.fenetreMathalea2d[1]+1)-e.c)/e.a,n=(-e.b*(t.fenetreMathalea2d[3]-1)-e.c)/e.a;c>t.fenetreMathalea2d[1]&&c<t.fenetreMathalea2d[3]?(i=t.fenetreMathalea2d[0]+1,h=c+e.pente):x>t.fenetreMathalea2d[1]&&x<t.fenetreMathalea2d[3]?(i=t.fenetreMathalea2d[2]-1,h=x-e.pente):y>t.fenetreMathalea2d[0]&&y<t.fenetreMathalea2d[2]?(i=y,h=t.fenetreMathalea2d[1]+Math.abs(e.pente)):n>t.fenetreMathalea2d[0]&&n<t.fenetreMathalea2d[2]?(i=n,h=t.fenetreMathalea2d[3]+e.pente):(i=(t.fenetreMathalea2d[0]+t.fenetreMathalea2d[2])/2,h=U(e,i,"").y)}const l=v(a,i,h,{color:s});return[e,l]}class O extends _{constructor(s,i,h,l,c){super();d(this,"x1");d(this,"x2");d(this,"y1");d(this,"y2");d(this,"a");d(this,"b");d(this,"c");d(this,"pente");d(this,"angleAvecHorizontale");d(this,"nom");d(this,"normal");d(this,"directeur");d(this,"stringColor");d(this,"usePgfplots");d(this,"pgfplotsOptions");d(this,"pgfplotsDomain");d(this,"leNom");let x,y,n;this.stringColor="black",this.usePgfplots=!1,arguments.length===2?(s instanceof Y&&i instanceof Y?(this.x1=s.x,this.x2=i.x,this.y1=s.y,this.y2=i.y):(window.notify("Droite : (attendus : A et B) les arguments de sont pas des points valides",{arg1:s,arg2:i}),this.x1=0,this.x2=0,this.y1=0,this.y2=0),this.nom="",this.pointilles=0,this.opacite=1,this.epaisseur=1,this.a=this.y1-this.y2,this.b=this.x2-this.x1,this.c=(this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1,this.pente=NaN):arguments.length===3?typeof s=="number"?((isNaN(s)||Number.isNaN(i)||Number.isNaN(h))&&window.notify("Droite : (attendus : a, b et c) les arguments de sont pas des nombres valides",{arg1:s,arg2:i,arg3:h}),this.nom="",this.a=Number(s),this.b=Number(i),this.c=Number(h),x=Number(s),y=Number(i),n=Number(h),w(x,0)?(this.x1=0,this.x2=1,this.y1=-n/y,this.y2=-n/y):w(y,0)?(this.y1=0,this.y2=1,this.x1=-n/x,this.x2=-n/x):(this.x1=0,this.y1=-n/y,this.x2=1,this.y2=(-n-x)/y)):((isNaN(s.x)||isNaN(s.y)||isNaN(i.x)||isNaN(i.y))&&window.notify('Droite : (attendus : A, B et "nom") les arguments de sont pas des points valides',{arg1:s,arg2:i}),this.x1=s.x,this.y1=s.y,this.x2=i.x,this.y2=i.y,this.a=this.y1-this.y2,this.b=this.x2-this.x1,this.c=(this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1,this.nom=String(h)):arguments.length===4?typeof s=="number"?((isNaN(s)||Number.isNaN(i)||Number.isNaN(h))&&window.notify('Droite : (attendus : a, b, c et "nom") les arguments de sont pas des nombres valides',{arg1:s,arg2:i,arg3:h}),this.a=Number(s),this.b=Number(i),this.c=Number(h),x=Number(s),y=Number(i),n=Number(h),this.nom=String(l),w(x,0)?(this.x1=0,this.x2=1,this.y1=-n/y,this.y2=-n/y):w(y,0)?(this.y1=0,this.y2=1,this.x1=-n/x,this.x2=-n/x):(this.x1=0,this.y1=-n/y,this.x2=1,this.y2=(-n-x)/y)):((isNaN(s.x)||isNaN(s.y)||isNaN(i.x)||isNaN(i.y))&&window.notify('Droite : (attendus : A, B, "nom" et "couleur") les arguments de sont pas des points valides',{arg1:s,arg2:i}),this.x1=s.x,this.y1=s.y,this.x2=i.x,this.y2=i.y,this.a=this.y1-this.y2,this.b=this.x2-this.x1,this.c=(this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1,this.nom=String(h),this.color=T(String(l)),this.stringColor=String(l)):((Number.isNaN(s)||Number.isNaN(i)||Number.isNaN(h))&&window.notify('Droite : (attendus : a, b, c et "nom") les arguments de sont pas des nombres valides',{arg1:s,arg2:i,arg3:h}),this.a=Number(s),this.b=Number(i),this.c=Number(h),x=Number(s),y=Number(i),n=Number(h),this.nom=String(l),this.color=T(String(c)),this.stringColor=String(c),w(x,0)?(this.x1=0,this.x2=1,this.y1=-n/y,this.y2=-n/y):w(y,0)?(this.y1=0,this.y2=1,this.x1=-n/x,this.x2=-n/x):(this.x1=0,this.y1=-n/y,this.x2=1,this.y2=(-n-x)/y)),this.b!==0?this.pente=-this.a/this.b:this.pente=NaN;let f,b;this.x1>this.x2&&(f=this.x1,b=this.y1,this.x1=this.x2+0,this.y1=this.y2+0,this.x2=f,this.y2=b),this.x1=L(this.x1,2),this.y1=L(this.y1,2),this.x2=L(this.x2,2),this.y2=L(this.y2,2),this.normal=A(this.a,this.b),this.directeur=A(this.b,-this.a),this.angleAvecHorizontale=z(P(1,0),P(0,0),P(this.directeur.x,this.directeur.y)),this.bordures=[Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.max(this.x1,this.x2),Math.max(this.y1,this.y2)];let u,r;if(this.nom!==""){if(w(this.b,0,.05))u=-this.c/this.a+.8,r=t.fenetreMathalea2d[1]+1;else if(w(this.a,0,.05))u=t.fenetreMathalea2d[0]+.8,r=-this.c/this.b+.8;else{const o=(-this.a*(t.fenetreMathalea2d[0]+1)-this.c)/this.b,C=(-this.a*(t.fenetreMathalea2d[2]-1)-this.c)/this.b,k=(-this.b*(t.fenetreMathalea2d[1]+1)-this.c)/this.a,g=(-this.b*(t.fenetreMathalea2d[3]-1)-this.c)/this.a;o>t.fenetreMathalea2d[1]&&o<t.fenetreMathalea2d[3]?(u=t.fenetreMathalea2d[0]+1,r=o+this.pente):C>t.fenetreMathalea2d[1]&&C<t.fenetreMathalea2d[3]?(u=t.fenetreMathalea2d[2]-1,r=C-this.pente):k>t.fenetreMathalea2d[0]&&k<t.fenetreMathalea2d[2]?(u=k,r=t.fenetreMathalea2d[1]+Math.abs(this.pente)):g>t.fenetreMathalea2d[0]&&g<t.fenetreMathalea2d[2]?(u=g,r=t.fenetreMathalea2d[3]+this.pente):(u=(t.fenetreMathalea2d[0]+t.fenetreMathalea2d[2])/2,r=U(this,u,"").y)}this.leNom=ee(this.nom,u,r,0,this.stringColor,1,"milieu",!0)}if(this.nom.includes("$"))return window.notify(`Droite() appelé avec un nom contenant du Latex... utiliser droiteAvecNom() à la place !
On va retourner un array contenant la droite et un latexParCoordonnees dans un proche avenir !
Il faut donc adapter l'exo qui a provoqué ça.
 Pour l'instant on retourne une droite sans nom.`,{nom:this.nom}),new O(P(this.x1,this.y1),P(this.x2,this.y2))}svg(s){var x;switch(this.epaisseur!==1&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;case 5:this.style+=' stroke-dasharray="5 5" ';break}this.opacite!==1&&(this.style+=` stroke-opacity="${this.opacite}" `);const i=P(this.x1,this.y1),h=P(this.x2,this.y2),l=B(i,h,-50),c=B(h,i,-50);return this.nom===""?`<line x1="${l.xSVG(s)}" y1="${l.ySVG(s)}" x2="${c.xSVG(s)}" y2="${c.ySVG(s)}" stroke="${this.color[0]}" ${this.style} id ="${this.id}" />`:`<line x1="${l.xSVG(s)}" y1="${l.ySVG(s)}" x2="${c.xSVG(s)}" y2="${c.ySVG(s)}" stroke="${this.color[0]}" ${this.style} id ="${this.id}" />`+(this.leNom!=null?((x=this.leNom)==null?void 0:x.svg(s))??"":"")}tikz(s,i,h,l){var C,k,g,p,M;const c=[];switch(this.color[1].length>1&&this.color[1]!=="black"&&c.push(`color=${this.color[1]}`),this.epaisseur!==1&&c.push(`line width = ${this.epaisseur}`),this.pointilles){case 1:c.push(" dash dot ");break;case 2:c.push(" densely dash dot dot ");break;case 3:c.push(" dash dot dot ");break;case 4:c.push(" dotted ");break;case 5:c.push(" dashed ");break}this.opacite!==1&&c.push(`opacity = ${this.opacite}`);const x=c.length>0?"["+c.join(",")+"]":"",y=this.usePgfplots&&s!==void 0&&i!==void 0&&h!==void 0&&l!==void 0,n=m=>Number.isFinite(m)?Number(m.toFixed(4)).toString():"0",f=m=>{const N=Number(m.toFixed(6));return Math.abs(N)<1e-9?"0":N.toString()};if(y){const m=[...c];this.pgfplotsOptions&&this.pgfplotsOptions.trim()!==""&&m.push(this.pgfplotsOptions);const N=((C=this.pgfplotsDomain)==null?void 0:C.xmin)??h,D=((k=this.pgfplotsDomain)==null?void 0:k.xmax)??l,$=((g=this.pgfplotsDomain)==null?void 0:g.ymin)??s,S=((p=this.pgfplotsDomain)==null?void 0:p.ymax)??i,V=[...m],J=w(this.b,0,1e-4);let q="";if(J){const G=n(this.x1),E=n($??s),H=n(S??i),j=V.length>0?"["+V.join(",")+"]":"";q+=`\\addplot${j} coordinates {(${G},${E}) (${G},${H})};
`}else{const G=(this.y2-this.y1)/(this.x2-this.x1),E=this.y1-G*this.x1;N!==void 0&&D!==void 0&&V.push(`domain=${n(N)}:${n(D)}`),$!==void 0&&S!==void 0&&V.push(`restrict y to domain=${n($)}:${n(S)}`);const H=V.length>0?"["+V.join(",")+"]":"",j=f(G),F=f(E),K=F.startsWith("-")?`${j}*x${F}`:`${j}*x+${F}`;q+=`\\addplot${H} {${K}};
`}return q}const b=P(this.x1,this.y1),u=P(this.x2,this.y2),r=B(b,u,-50),o=B(u,b,-50);return this.nom!==""?`\\draw${x} (${r.x},${r.y})--(${o.x},${o.y});`+(this.leNom!=null?((M=this.leNom)==null?void 0:M.tikz())??"":""):`\\draw${x} (${r.x},${r.y})--(${o.x},${o.y});`}svgml(s,i){const h=P(this.x1,this.y1),l=P(this.x2,this.y2),c=B(h,l,-50),x=B(l,h,-50);return I(c,x,this.color[0]).svgml(s,i)}tikzml(s){const i=P(this.x1,this.y1),h=P(this.x2,this.y2),l=B(i,h,-50),c=B(h,i,-50);return I(l,c,this.color[1]).tikzml(s)}}function pe(e,a,s,i,h){return arguments.length===2?new O(e,a):arguments.length===3?new O(e,a,s):arguments.length===4?new O(e,a,s,i):new O(e,a,s,i,h)}function xe(e,a,s=1e-4){return w(e.a*a.x+e.b*a.y+e.c,0,s)?"sur":w(e.b,0)?a.x<-e.c/e.a?"gauche":"droite":e.a*a.x+e.b*a.y+e.c<0?"dessous":"dessus"}function be(e,{xmin:a=0,ymin:s=0,xmax:i=10,ymax:h=10}){let l,c,x,y,n,f;if(e.b===0)l=-e.b/e.c-.5,c=h-.5;else{const u=r=>(-e.c-e.a*r)/e.b;if(x=u(i),x<=h&&x>=s)l=i-.8,c=u(l);else if(n=u(a),n<=h&&n>=s)l=a+.8,c=u(l);else{const r=o=>(-e.c-e.b*o)/e.a;if(y=r(h),y<=i&&y>=a)c=h-.8,l=r(c);else if(f=r(s),f<=i&&f>=a)c=s+.8,l=r(c);else return W()}}const b=.5/R(A(e.a,e.b));return P(l+e.a*b,c+e.b*b)}function X(e,a,s="",i="black"){const h=P(e.x+a.x,e.y+a.y);return new O(e,h,s,i)}function ye(e,a,s="",i="black"){return X(e,a.directeur,s,i)}function me(e,a,s="",i="black"){return X(e,a.normal,s,i)}function de(e,a="",s="black"){return se(e,0,a,s)}function Me(e,a="",s="black"){return X(e,A(0,1),a,s)}function se(e,a,s="",i="black"){const h=P(e.x+1,e.y+a);return new O(e,h,s,i)}function Ne(e,a){const s=R(A(a.a,a.b));return s<1e-12?0:L(Math.abs(a.a*e.x+a.b*e.y+a.c)/s,9)}export{O as D,te as V,se as a,me as b,de as c,pe as d,Me as e,ye as f,fe as g,Ne as h,xe as i,ce as l,be as p,A as v};
//# sourceMappingURL=droites-D3-ZzJ69.js.map
