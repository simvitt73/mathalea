{"version":3,"file":"3G10-3-D3szBH6p.js","sources":["../../src/exercices/3e/3G10-3.ts"],"sourcesContent":["import { arcPointPointAngle } from '../../lib/2d/Arc'\nimport { cibleCarree, dansLaCibleCarree } from '../../lib/2d/cibles'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { labelPoint } from '../../lib/2d/textes'\nimport { tracePoint } from '../../lib/2d/TracePoint'\nimport { rotation } from '../../lib/2d/transformations'\nimport { longueur } from '../../lib/2d/utilitairesGeometriques'\nimport { arcenciel } from '../../lib/format/style'\nimport { choisitLettresDifferentes } from '../../lib/outils/aleatoires'\nimport { lettreDepuisChiffre } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nexport const titre =\n  \"Construire l'image d'un point par une rotation avec cible auto-corrective\"\n\n/**\n * Construction d'images par rotation avec dispositif d'auto-correction aléatoire\n * Ref 3G10-3\n * @author Jean-Claude Lhote\n * Publié le 30/11/2020\n */\nexport const uuid = '19ce6'\n\nexport const refs = {\n  'fr-fr': ['3G10-3'],\n  'fr-ch': ['10ES2-8'],\n}\nexport default class ConstruireRotationPoint3e extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = ['Nombre de points (1 à 5)', 5]\n    // this.besoinFormulaire2CaseACocher = [\"Avec des points de part et d'autre\"];\n\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n\n    this.sup = 3\n  }\n\n  nouvelleVersion() {\n    let nontrouve, assezloin, cible\n    const angle = randint(-8, 8, 0) * 10\n    let result = [0, 0]\n    let texteCorr = ''\n    const nbpoints = parseInt(this.sup)\n    const celluleAlea = function (rang: number) {\n      const lettre = lettreDepuisChiffre(randint(1, rang))\n      const chiffre = Number(randint(1, rang)).toString()\n      return lettre + chiffre\n    }\n    // On prépare la figure...\n    const O = point(0, 0, 'O')\n    const noms = choisitLettresDifferentes(nbpoints, 'QO', true)\n    this.consigne = `Construire l'image des points $${noms[0]}$`\n    for (let i = 1; i < nbpoints - 1; i++) {\n      this.consigne += `, $${noms[i]}$`\n    }\n    this.consigne += ` et $${noms[nbpoints - 1]}$ par la rotation de centre $O$`\n    this.consigne += ` et d'angle $${Math.abs(angle)}^\\\\circ$`\n    if (angle < 0) {\n      this.consigne += \" dans le sens des aiguilles d'une montre.\"\n    } else {\n      this.consigne += \" dans le sens contraire des aiguilles d'une montre.\"\n    }\n    const cibles = []\n    const M = []\n    const N = []\n    const objetsEnonce = []\n    const objetsCorrection = [] // cibles, M point marqués, N symétrique de M\n    const cellules = []\n    let xMin, yMin, xMax, yMax\n    ;[xMin, yMin, xMax, yMax] = [0, 0, 0, 0]\n    for (let i = 0; i < nbpoints; i++) {\n      // On place les cibles.\n      N.push(\n        point(\n          randint(-80, 80, 0) / 10,\n          randint(-80, 80, 0) / 10,\n          noms[i] + \"'\",\n        ),\n      )\n      nontrouve = true\n      while (longueur(N[i], O) < 3 || nontrouve) {\n        nontrouve = true\n        if (longueur(N[i], O) < 3) {\n          N[i].x = randint(-80, 80, 0) / 10\n          N[i].y = randint(-80, 80, 0) / 10\n        } else {\n          assezloin = true\n          for (let j = 0; j < i; j++) {\n            if (longueur(N[i], N[j]) < 4.5) {\n              assezloin = false\n            }\n          }\n          if (assezloin === false) {\n            // éloigner les points donc les grilles\n            N[i].x = randint(-80, 80, 0) / 10\n            N[i].y = randint(-80, 80, 0) / 10\n          } else {\n            nontrouve = false\n          }\n        }\n      }\n    }\n\n    objetsEnonce.push(tracePoint(O), labelPoint(O))\n    objetsCorrection.push(tracePoint(O), labelPoint(O))\n\n    for (let i = 0; i < nbpoints; i++) {\n      cellules.push(celluleAlea(4))\n      result = dansLaCibleCarree(N[i].x, N[i].y, 4, 0.6, cellules[i])\n      cible = cibleCarree({\n        x: result[0],\n        y: result[1],\n        rang: 4,\n        num: i + 1,\n        taille: 0.6,\n        color: '#f15929',\n      })\n      cible.opacite = 0.7\n      cibles.push(cible)\n    }\n    for (let i = 0; i < nbpoints; i++) {\n      M.push(rotation(N[i], O, -angle, noms[i]))\n      objetsEnonce.push(tracePoint(M[i]), labelPoint(M[i]), cibles[i])\n      objetsCorrection.push(\n        tracePoint(M[i], N[i]),\n        labelPoint(M[i], N[i]),\n        cibles[i],\n      )\n      objetsCorrection.push(\n        arcPointPointAngle(M[i], N[i], angle, true, arcenciel(i), 'gray', 0.2),\n      )\n      texteCorr += `$${noms[i]}'$, l'image du point $${noms[i]}$ est dans la case ${cellules[i]} de la grille ${i + 1}.<br>`\n    }\n\n    for (let i = 0; i < nbpoints; i++) {\n      xMin = Math.min(xMin, N[i].x - 2, M[i].x - 2)\n      yMin = Math.min(yMin, N[i].y - 2, M[i].y - 2)\n      xMax = Math.max(xMax, N[i].x + 2, M[i].x + 2)\n      yMax = Math.max(yMax, N[i].y + 2, M[i].y + 2)\n    }\n\n    context.fenetreMathalea2d = [xMin, yMin, xMax, yMax]\n\n    this.listeQuestions.push(\n      mathalea2d(\n        {\n          xmin: xMin,\n          ymin: yMin,\n          xmax: xMax,\n          ymax: yMax,\n          pixelsParCm: 20,\n          scale: 18 / Math.max(xMax - xMin, yMax - yMin),\n        },\n        objetsEnonce,\n      ),\n    )\n    this.listeCorrections.push(\n      texteCorr +\n        mathalea2d(\n          {\n            xmin: xMin,\n            ymin: yMin,\n            xmax: xMax,\n            ymax: yMax,\n            pixelsParCm: 20,\n            scale: 18 / Math.max(xMax - xMin, yMax - yMin),\n          },\n          objetsCorrection,\n        ),\n    )\n    listeQuestionsToContenu(this)\n\n    //  let nonchoisi,coords=[],x,y,objetsEnonce=[],objetsCorrection=[],nomd,label_pos\n  }\n}\n"],"names":["titre","uuid","refs","ConstruireRotationPoint3e","Exercice","nontrouve","assezloin","cible","angle","randint","result","texteCorr","nbpoints","celluleAlea","rang","lettre","lettreDepuisChiffre","chiffre","O","point","noms","choisitLettresDifferentes","i","cibles","M","N","objetsEnonce","objetsCorrection","cellules","xMin","yMin","xMax","yMax","longueur","j","tracePoint","labelPoint","dansLaCibleCarree","cibleCarree","rotation","arcPointPointAngle","arcenciel","context","mathalea2d","listeQuestionsToContenu"],"mappings":"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"}