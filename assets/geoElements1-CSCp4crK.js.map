{"version":3,"file":"geoElements1-CSCp4crK.js","sources":["../../src/exercices/geodyn/geoElements1.ts"],"sourcesContent":["import Figure from 'apigeom'\nimport checkElementExist from 'apigeom/src/check/checkElementExist'\nimport Point from 'apigeom/src/elements/points/Point'\nimport figureApigeom from '../../lib/figureApigeom'\nimport { shuffle } from '../../lib/outils/arrayOutils'\nimport ExerciceSimple from '../ExerciceSimple'\n\nexport const titre = 'Tracer segment, droite et demi-droite (depuis notation)'\nexport const dateDePublication = '29/01/2024'\nexport const interactifReady = true\nexport const interactifType = 'custom'\n\n/**\n * @author R√©mi Angot\n */\n\nexport const refs = {\n  'fr-fr': ['elements1'],\n  'fr-ch': [],\n}\nexport const uuid = '6fdab'\n\nclass Trait {\n  type: 'Segment' | 'Ray' | 'Line'\n  nameA: string\n  nameB: string\n  constructor(type: 'Segment' | 'Ray' | 'Line', nameA: string, nameB: string) {\n    this.type = type\n    this.nameA = nameA\n    this.nameB = nameB\n  }\n\n  checkExist(figure: Figure) {\n    return checkElementExist(\n      { type: this.type, point1: this.nameA, point2: this.nameB },\n      figure,\n    )\n  }\n\n  create(figure: Figure): void {\n    const point1 = [...figure.elements.values()].filter(\n      (element) => element instanceof Point && element.label === this.nameA,\n    )[0]\n    const point2 = [...figure.elements.values()].filter(\n      (element) => element instanceof Point && element.label === this.nameB,\n    )[0]\n    figure.create(this.type, { point1, point2 })\n  }\n\n  get point1() {\n    return this.nameA\n  }\n\n  get point2() {\n    return this.nameB\n  }\n\n  get descriptionConstruction() {\n    if (this.type === 'Segment') {\n      return `On trace le segment $[${this.nameA + this.nameB}]$.`\n    }\n    if (this.type === 'Ray') {\n      return `On trace la demi-droite $[${this.nameA + this.nameB})$.`\n    }\n    return `On trace la droite $(${this.nameA + this.nameB})$.`\n  }\n\n  get description() {\n    if (this.type === 'Segment') {\n      return `le segment d'extr√©mit√©s $${this.nameA}$ et $${this.nameB}$`\n    }\n    if (this.type === 'Ray') {\n      return `la demi-droite d'origine $${this.nameA}$ passant par $${this.nameB}$`\n    }\n    return `la droite passant par les points $${this.nameA}$ et $${this.nameB}$`\n  }\n\n  get notation(): string {\n    if (this.type === 'Segment') {\n      return `$[${this.nameA + this.nameB}$]`\n    }\n    if (this.type === 'Ray') {\n      return `$[${this.nameA + this.nameB}$)`\n    }\n    return `$(${this.nameA + this.nameB}$)`\n  }\n\n  get wrongFeedback() {\n    if (this.type === 'Segment') {\n      return `Le segment $[${this.nameA + this.nameB}$] n'existe pas.`\n    }\n    if (this.type === 'Ray') {\n      return `La demi-droite $[${this.nameA + this.nameB}$) n'existe pas.`\n    }\n    return `La droite $(${this.nameA + this.nameB}$) n'existe pas.`\n  }\n}\n\nclass ConstructionSegmentRayLine extends ExerciceSimple {\n  // On d√©clare des propri√©t√©s suppl√©mentaires pour cet exercice afin de pouvoir les r√©utiliser dans la correction\n  figure!: Figure\n  nameA!: string\n  nameB!: string\n  nameC!: string\n  traits!: Trait[]\n  constructor() {\n    super()\n    this.typeExercice = 'simple'\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n    this.reponse = ''\n    this.formatChampTexte = 'none' // Pas de champ texte pour cet exercice simple de g√©om√©trie dynamique\n    this.exoCustomResultat = true\n  }\n\n  nouvelleVersion(): void {\n    this.figure = new Figure({\n      xMin: 0,\n      yMin: 0,\n      width: 800,\n      height: 500,\n      border: true,\n    })\n    this.traits = []\n\n    const indiceFirstLetter = 65 + Math.floor(Math.random() * 22)\n    this.nameA = String.fromCharCode(indiceFirstLetter)\n    this.nameB = String.fromCharCode(indiceFirstLetter + 1)\n    this.nameC = String.fromCharCode(indiceFirstLetter + 2)\n    this.figure.options.labelAutomaticBeginsWith = this.nameA\n\n    const types = shuffle(['Segment', 'Line', 'Ray']) as (\n      | 'Segment'\n      | 'Line'\n      | 'Ray'\n    )[]\n    this.traits.push(new Trait(types[0], this.nameA, this.nameB))\n    this.traits.push(new Trait(types[1], this.nameB, this.nameC))\n    this.traits.push(new Trait(types[2], this.nameC, this.nameA))\n    let enonce = ''\n    if (this.sup) {\n      enonce = `Tracer ${this.traits[0].description},<br>${this.traits[1].description}<br>et ${this.traits[2].description}.`\n    } else {\n      enonce = `Tracer ${this.traits[0].notation}, ${this.traits[1].notation} et ${this.traits[2].notation}.`\n    }\n    this.figure.setToolbar({\n      tools: [\n        'POINT',\n        'NAME_POINT',\n        'SEGMENT',\n        'LINE',\n        'RAY',\n        'DRAG',\n        'REMOVE',\n        'UNDO',\n        'REDO',\n      ],\n      position: 'top',\n      nbCols: 9,\n    })\n    const emplacementPourFigure = figureApigeom({\n      exercice: this,\n      i: 0,\n      figure: this.figure,\n      defaultAction: 'POINT',\n    })\n    const figureCorrection = createAnimation(this.traits)\n    const emplacementPourFigureCorrection = figureApigeom({\n      animation: true,\n      exercice: this,\n      i: 0,\n      idAddendum: 'Correction',\n      figure: figureCorrection,\n    })\n    this.question = enonce + emplacementPourFigure\n    this.correction = emplacementPourFigureCorrection\n  }\n\n  correctionInteractive = () => {\n    const resultat: ('OK' | 'KO')[] = []\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la r√©ponse pour Capytale\n    this.answers[this.figure.id] = this.figure.json\n    let feedback = ''\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q${0}`,\n    )\n    const resultatCheck = document.querySelector(\n      `#resultatCheckEx${this.numeroExercice}Q${0}`,\n    )\n    const points = [...this.figure.elements.values()].filter(\n      (element) => element instanceof Point && element.type !== 'pointer',\n    )\n    const pointsA = points.filter((point) => point.label === this.nameA)\n    const pointsB = points.filter((point) => point.label === this.nameB)\n    const pointsC = points.filter((point) => point.label === this.nameC)\n    if (pointsA.length > 1 || pointsB.length > 1 || pointsC.length > 1) {\n      feedback = 'Il ne doit pas y avoir plusieurs points avec le m√™me nom'\n      resultat.push('KO', 'KO', 'KO')\n    } else {\n      for (const trait of this.traits) {\n        const { isValid, result } = trait.checkExist(this.figure)\n        if (isValid) {\n          resultat.push('OK')\n          result[0].color = 'green'\n        } else {\n          resultat.push('KO')\n          feedback += trait.wrongFeedback + '<br><br>'\n        }\n      }\n    }\n\n    if (divFeedback) {\n      divFeedback.innerHTML = feedback || 'Bravo !'\n    }\n    if (resultatCheck) {\n      resultatCheck.innerHTML = resultat.every((r) => r === 'OK') ? 'üòé' : '‚òπÔ∏è'\n    }\n    this.figure.setToolbar({ position: 'top', tools: ['DRAG', 'DESCRIPTION'] })\n    return resultat\n  }\n}\n\nexport default ConstructionSegmentRayLine\n\nfunction createAnimation(traits: Trait[]): Figure {\n  const figure = new Figure({\n    xMin: 0,\n    yMin: 0,\n    width: 800,\n    height: 500,\n    border: true,\n  })\n  figure.setToolbar({\n    position: 'top',\n    tools: ['RESTART', 'PLAY_SKIP_BACK', 'PLAY', 'PLAY_SKIP_FORWARD', 'PAUSE'],\n  })\n  const description = figure.create('TextByPosition', {\n    anchor: 'bottomLeft',\n    backgroundColor: 'white',\n    text: '',\n    x: 10,\n    y: 15,\n  })\n  figure.create('Point', { x: 3, y: 3, label: traits[0].point1 })\n  figure.create('Point', { x: 12, y: 4, label: traits[0].point2 })\n  figure.create('Point', { x: 8, y: 10, label: traits[1].point2 })\n  for (const trait of traits) {\n    description.text = trait.descriptionConstruction\n    trait.create(figure)\n    figure.saveState()\n  }\n  return figure\n}\n"],"names":["titre","dateDePublication","interactifReady","interactifType","refs","uuid","Trait","type","nameA","nameB","__publicField","figure","checkElementExist","point1","element","Point","point2","ConstructionSegmentRayLine","ExerciceSimple","resultat","feedback","divFeedback","resultatCheck","points","pointsA","point","pointsB","pointsC","trait","isValid","result","Figure","indiceFirstLetter","types","shuffle","enonce","emplacementPourFigure","figureApigeom","figureCorrection","createAnimation","emplacementPourFigureCorrection","traits","description"],"mappings":"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"}