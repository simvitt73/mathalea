{"version":3,"file":"5P12-2-CkMheOsw.js","sources":["../../src/exercices/5e/5P12-2.ts"],"sourcesContent":["import { listeShapes2DInfos } from '../../lib/2d/figures2d/shapes2d'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport {\n  listePatternRatio,\n  type PatternRiche,\n} from '../../lib/2d/patterns/patternsPreDef'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { polygone } from '../../lib/2d/polygones'\nimport { texteParPosition } from '../../lib/2d/textes'\nimport { ajouteQuestionMathlive } from '../../lib/interactif/questionMathLive'\nimport { enleveDoublonNum, shuffle } from '../../lib/outils/arrayOutils'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n// import type { VisualPattern } from '../../lib/2d/patterns/VisualPattern'\nimport { VisualPattern } from '../../lib/2d/patterns/VisualPattern'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { range1 } from '../../lib/outils/nombres'\nimport { gestionnaireFormulaireTexte } from '../../modules/outils'\n\nexport const titre = \"Trouver le ratio d'évolution d'un motif numérique\"\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n// Gestion de la date de publication initiale\nexport const dateDePublication = '26/06/2025'\n\n/**\n * Étudier les premiers termes d'une série de motifs afin de donner le nombre de formes du motif de rang n sous forme de ratio.\n * Les patterns sont des motifs numériques qui évoluent selon des règles définies.\n * Cet exercice contient des patterns issus de l'excellent site : https://www.visualpatterns.org/\n * @author Jean-Claude Lhote\n */\nexport const uuid = '328b8'\n\nexport const refs = {\n  'fr-fr': ['5P12-2'],\n  'fr-ch': ['NR'],\n}\n\nexport default class PaternNum1 extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 3\n    this.comment =\n      \"Cet exercice contient des patterns issus de l'excellent site : https://www.visualpatterns.org/\"\n    this.comment += `<br>\nGrâce au dernier paramètre, on peut imposer des patterns choisis dans cette <a href=\"https://coopmaths.fr/alea/?uuid=71ff5&s=5\" target=\"_blank\" style=\"color: blue\">liste de patterns</a>.<br>\nSi le nombre de questions est supérieur au nombre de patterns choisis, alors l'exercice sera complété par des patterns choisis au hasard.`\n    this.besoinFormulaireNumerique = ['Nombre de figures par question', 4]\n    this.sup = 3\n    const nbDePattern = listePatternRatio.length\n    this.besoinFormulaire2Texte = [\n      'Numéros des pattern désirés :',\n      [\n        'Nombres séparés par des tirets  :',\n        `Mettre des nombres entre 1 et ${nbDePattern}.`,\n        `Mettre ${nbDePattern + 1} pour laisser le hasard faire.`,\n      ].join('\\n'),\n    ]\n\n    this.sup2 = `${nbDePattern + 1}`\n  }\n\n  nouvelleVersion(): void {\n    /* const listePat: PatternRiche[] = shuffle(\n      listePatternRatio,\n    ) as PatternRiche[]\n    */\n    const nbFigures = Math.max(2, this.sup)\n\n    const nbDePattern = listePatternRatio.length\n    let typesPattern = gestionnaireFormulaireTexte({\n      saisie: this.sup2,\n      max: nbDePattern,\n      defaut: nbDePattern + 1,\n      melange: nbDePattern + 1,\n      nbQuestions: this.nbQuestions,\n    }).map(Number)\n\n    typesPattern = [...typesPattern, ...shuffle(range1(nbDePattern))]\n    typesPattern = enleveDoublonNum(typesPattern)\n    typesPattern = typesPattern.reverse()\n\n    const listePreDef = typesPattern.map((i) => listePatternRatio[i - 1])\n\n    for (\n      let i = 0;\n      i < Math.min(this.nbQuestions, listePatternRatio.length);\n\n    ) {\n      const objetsCorr: NestedObjetMathalea2dArray = []\n      const popped = listePreDef.pop()\n      if (!popped) {\n        continue\n      }\n      const pat = popped\n      const pattern = new VisualPattern([])\n      pattern.iterate = (pat as PatternRiche).iterate\n      pattern.shapes = pat.shapes\n\n      //  patterns.push(pattern)\n\n      for (const name of pat.shapes) {\n        if (name in listeShapes2DInfos) {\n          objetsCorr.push(listeShapes2DInfos[name].shapeDef)\n        } else {\n          throw new Error(\n            `Le nom de la forme \"${name}\" n'est pas reconnu dans les formes prédéfinies.`,\n          )\n        }\n      }\n      const rendered = pattern.render(nbFigures + 1, 0, 0)\n      objetsCorr.push(...rendered)\n      let yMax = 0\n      let yMin = 0\n      let texte = `Voici les ${nbFigures} premiers motifs d'une série de motifs numériques. Les motifs se succèdent selon une règle bien définie.<br>`\n      const figures: NestedObjetMathalea2dArray[] = []\n      for (let j = 0; j < nbFigures; j++) {\n        figures[j] = []\n        for (const name of pat.shapes) {\n          if (name in listeShapes2DInfos) {\n            figures[j].push(listeShapes2DInfos[name].shapeDef)\n          } else {\n            throw new Error(\n              `Le nom de la forme \"${name}\" n'est pas reconnu dans les formes prédéfinies.`,\n            )\n          }\n        }\n\n        let xmin = Infinity\n        let ymin = Infinity\n        let xmax = -Infinity\n        let ymax = -Infinity\n\n        figures[j].push(...pattern.render(j + 1, 0, 0))\n        ;({ xmin, ymin, xmax, ymax } = fixeBordures(figures[j]))\n        figures[j].push(\n          texteParPosition(\n            `Motif ${j + 1}`,\n            (xmax + xmin + 1) / 2,\n            ymin - 1.5,\n            0,\n            'black',\n            0.8,\n            'milieu',\n          ),\n        )\n        const cadre = polygone(\n          point(xmin - 2, ymin - 2),\n          point(xmax + 2, ymin - 2),\n          point(xmax + 2, ymax + 2),\n          point(xmin - 2, ymax + 2),\n        )\n        cadre.pointilles = 4\n        figures[j].push(cadre)\n        yMax = Math.max(yMax, ymax)\n        yMin = Math.min(yMin, ymin)\n      }\n      texte += figures\n        .map((fig, index) =>\n          mathalea2d(\n            Object.assign(\n              fixeBordures(fig, { rxmin: 0, rymin: -1, rxmax: 0, rymax: 1 }),\n              {\n                id: `Motif${i}F${index}`,\n                pixelsParCm: 20,\n                yMax,\n                yMin,\n                scale: 0.4,\n                style: 'display: inline-block',\n                optionsTikz: 'transform shape',\n              },\n            ),\n            fig,\n          ),\n        )\n        .join('\\n')\n      let texteCorr = ''\n      texte += `<br>Donner le ratio \"${(pat as PatternRiche).texRatio}\" dans le motif au rang $${nbFigures + 1}$ ?<br>${ajouteQuestionMathlive(\n        {\n          exercice: this,\n          question: i,\n          objetReponse: { reponse: { value: pat.formule } },\n          typeInteractivite: 'mathlive',\n        },\n      )}`\n      if (!pat.fonctionRatio) {\n        throw new Error(\n          `La fonction ratio n'est pas définie pour le pattern ${JSON.stringify(pat)}`,\n        )\n      }\n      const ratio = pat.fonctionRatio(nbFigures + 1)\n      texteCorr += `Au rang $${nbFigures + 1}$, le ratio \"${(pat as PatternRiche).texRatio}\" sera $${miseEnEvidence(ratio.toLatex())}$.<br>`\n      this.listeQuestions.push(texte)\n      this.listeCorrections.push(texteCorr)\n      i++\n    }\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","uuid","refs","PaternNum1","Exercice","nbDePattern","listePatternRatio","nbFigures","typesPattern","gestionnaireFormulaireTexte","shuffle","range1","enleveDoublonNum","listePreDef","i","objetsCorr","popped","pat","pattern","VisualPattern","name","listeShapes2DInfos","rendered","yMax","yMin","texte","figures","j","xmin","ymin","xmax","ymax","fixeBordures","texteParPosition","cadre","polygone","point","fig","index","mathalea2d","texteCorr","ajouteQuestionMathlive","ratio","miseEnEvidence"],"mappings":"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"}