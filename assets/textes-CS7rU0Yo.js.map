{"version":3,"file":"textes-CS7rU0Yo.js","sources":["../../src/lib/2d/textes.ts"],"sourcesContent":["import { context } from '../../modules/context'\nimport type { NestedObjetMathalea2dArray, ObjetDivLatex } from '../../types/2d'\nimport { arrondi } from '../outils/nombres'\nimport { stringNombre } from '../outils/texNombre'\nimport { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport type { IPoint3d, IPointAbstrait, IPolygone } from './Interfaces'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { pointAbstrait, PointAbstrait } from './PointAbstrait'\nimport type { Vide2d } from './Vide2d'\n\nexport type AncrageDeRotationType = 'gauche' | 'milieu' | 'droite'\nexport const tikzAncrages = {\n  gauche: 'west',\n  milieu: 'center',\n  droite: 'east',\n}\nexport const svgAncrages = {\n  gauche: 'start',\n  milieu: 'middle',\n  droite: 'end',\n}\n/**\n * Associe à tous les points passés en paramètre, son label, défini préalablement en Latex. Par exemple, si besoin de nommer le point A_1.\n * @param {number} [distance=1.5] Taille de l'angle\n * @param {string} [label=''] Si vide, alors affiche la mesure de l'angle sinon affiche ce label.\n * @param {Object} parametres À saisir entre accolades\n * @param {PointAbstrait|PointAbstrait[]} [parametres.points = []] PointAbstrait ou tableau de points\n * @param {string} [parametres.color = 'black'] Couleur du label : du type 'blue' ou du type '#f15929'\n * @param {number} [parametres.taille = 8] Taille du label\n * @param {number} [parametres.largeur = 10] Largeur en pixels du label à des fins de centrage\n * @param {number} [parametres.hauteur = 10] Hauteur en pixels du label à des fins de centrage\n * @param {string} [parametres.couleurDeRemplissage=''] Couleur de fond de ce label : du type 'blue' ou du type '#f15929'\n * @property {string} svg Sortie au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} tikz Sortie au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @property {string} color Couleur du label. À associer obligatoirement à colorToLatexOrHTML().\n * @property {number} taille Taille du label\n * @property {number} largeur Largeur en pixels du label à des fins de centrage\n * @property {number} hauteur Hauteur en pixels du label à des fins de centrage\n * @property {string} couleurDeRemplissage Couleur de fond de ce label. À associer obligatoirement à colorToLatexOrHTML().\n * @author Rémi Angot et Jean-Claude Lhote\n * @class\n */\n// JSDOC Validee par EE Juin 2022\nexport function labelLatexPoint(\n  {\n    points,\n    color,\n    taille,\n    largeur,\n    hauteur,\n    couleurDeRemplissage,\n  }: {\n    points: PointAbstrait[]\n    color?: string\n    taille: number\n    largeur?: number\n    hauteur?: number\n    couleurDeRemplissage: string\n  } = {\n    points: [],\n    color: 'black',\n    taille: 8,\n    largeur: 10,\n    hauteur: 10,\n    couleurDeRemplissage: '',\n  },\n): NestedObjetMathalea2dArray {\n  // Jean-Claude Lhote 15/08/2023\n  const offset = 0.25 * Math.log10(taille) // context.pixelsParCm ne correspond pas forcément à la valeur utilisée par mathalea2d... cela peut entrainer un trés léger écart\n  let x\n  let y\n  const objets = []\n  let listePoints: Array<PointAbstrait>\n  if (Array.isArray(points[0])) {\n    // Si le premier argument est un tableau\n    listePoints = points[0]\n  } else {\n    listePoints = points\n  }\n  listePoints = listePoints.map((pt: PointAbstrait | IPoint3d) =>\n    'c2d' in pt ? pt.c2d : pt,\n  )\n  for (const unPoint of listePoints) {\n    x = arrondi(unPoint.x)\n    y = arrondi(unPoint.y)\n    switch (unPoint.positionLabel) {\n      case 'left':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x - offset,\n            y,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      case 'right':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x + offset,\n            y,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      case 'below':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x,\n            y - offset,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      case 'above':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x,\n            y + offset,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      case 'above right':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x + offset,\n            y + offset,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      case 'below left':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x - offset,\n            y - offset,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      case 'below right':\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x + offset,\n            y - offset,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n      default:\n        objets.push(\n          latexParCoordonnees(\n            unPoint.nom,\n            x - offset,\n            y + offset,\n            color,\n            largeur,\n            hauteur,\n            couleurDeRemplissage,\n            taille,\n          ),\n        )\n        break\n    }\n  }\n  return objets\n}\n\n/**  Nomme les points passés en argument, le nombre d'arguments n'est pas limité.\n * @param  {(PointAbstrait|string)[]} args Points mis à la suite si une couleur doit être passée, c'est le dernier argument\n * @property {string} color Couleur des points. À associer obligatoirement à colorToLatexOrHTML().\n * @property {number} taille Taille de la boite contenant le nom des points\n * @property {number} largeur Largeur de la boite contenant le nom des points\n * @property {number[]} bordures Coordonnées de la fenêtre d'affichage du genre [-2,-2,5,5]\n * @author Rémi Angot\n * @return object[]\n */\n// JSDOC Validee par EE Septembre 2022\nexport function labelPoint(\n  ...args: (IPointAbstrait | PointAbstrait | PointAbstrait | string)[]\n) {\n  const taille = 1\n  const points = [...args]\n  let color\n  if (typeof points[points.length - 1] === 'string') {\n    color = colorToLatexOrHTML(String(points[points.length - 1]))\n    points.length--\n  } else {\n    color = colorToLatexOrHTML('black')\n  }\n  const objets = []\n  for (const unPoint of points) {\n    let x, y\n    if (unPoint instanceof PointAbstrait || unPoint instanceof PointAbstrait) {\n      x = unPoint.x\n      y = unPoint.y\n      // if (this.positionLabel === '' && unPoint.typeObjet === 'point3d') A.positionLabel = this.positionLabel\n      switch (unPoint.positionLabel) {\n        case 'left':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x - 10 / context.pixelsParCm,\n              y,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'right':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x + 10 / context.pixelsParCm,\n              y,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'below':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x,\n              y - 10 / context.pixelsParCm,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'above':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x,\n              y + 10 / context.pixelsParCm,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'above left':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x - 10 / context.pixelsParCm,\n              y + 10 / context.pixelsParCm,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'above right':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x + 10 / context.pixelsParCm,\n              y + 10 / context.pixelsParCm,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'below left':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x - 10 / context.pixelsParCm,\n              y - 10 / context.pixelsParCm,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        case 'below right':\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x + 10 / context.pixelsParCm,\n              y - 10 / context.pixelsParCm,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n        default:\n          objets.push(\n            texteParPosition(\n              unPoint.nom,\n              x,\n              y,\n              0,\n              color[0],\n              taille,\n              'milieu',\n              true,\n              1,\n            ),\n          )\n          break\n      }\n    }\n  }\n  return objets\n}\n\n/**  Déplace les labels des sommets d'un polygone s'ils sont mal placés nativement\n * @param {Polygone} p Polygone sur lequel les labels de ses sommets sont mal placés\n * @param {string} nom Points mal placés sous la forme, par exemple, 'AB'. Chaque point doit être représenté par un SEUL caractère.\n * @param {string} positionLabel Les possibilités sont : 'left', 'right', 'below', 'above', 'above right', 'above left', 'below right', 'below left'. Si on se trompe dans l'orthographe, ce sera 'above left' et si on ne précise rien, pour un point ce sera 'above'.\n * @example deplaceLabel(p1,'MNP','below') // S'il y a des points nommés 'M', 'N' ou 'P' dans le polygone p1, leur nom sera mis en dessous du point.\n * // Ne fonctionne pas avec les points du type A1 ou A_1.\n * @author Rémi Angot\n */\n// JSDOC Validee par EE Aout 2022\nexport function deplaceLabel(p: IPolygone, nom: string, positionLabel: string) {\n  for (let i = 0; i < p.listePoints.length; i++) {\n    for (const lettre of nom) {\n      if (p.listePoints[i].nom === lettre) {\n        p.listePoints[i].positionLabel = positionLabel\n        labelPoint(p.listePoints[i])\n      }\n    }\n  }\n}\n\n/**\n * texteParPoint('mon texte',A) // Écrit 'mon texte' avec A au centre du texte\n * texteParPoint('mon texte',A,45) // Écrit 'mon texte' centré sur A avec une rotation de 45°\n * texteParPoint('mon texte',A, 0, 'black', 1, 'gauche',true, 0.5) // écrit le texte à droite du point A car le point d'ancrage est à gauche\n *  // couleur du texte en noir, avec une taille normale et une police mathématique et une opacité de 50%\n * oriention est un nombre, c'est l'angle de rotation (0 par défaut), et il faut positionner le centre de rotation avec ancrageDeRotation (milieu par défaut)\n * ancrageDeRotation est à prendre parmi ['milieu', 'gauche', 'droite']\n * Si mathOn est true, la chaine est traitée par texteParPoint mais avec une police se rapprochant de la police Katex (quelques soucis d'alignement des caractères sur certains navigateurs)\n * Si le texte commence et finit par des $ la chaine est traitée par latexParPoint\n * @author Rémi Angot rectifié par Jean-Claude Lhote\n */\nexport class TexteParPoint extends ObjetMathalea2D {\n  texte: string\n  point: PointAbstrait | Vide2d\n  orientation: number\n  color: [string, string]\n  scale: number\n  ancrageDeRotation: AncrageDeRotationType\n  mathOn: boolean\n  opacite: number\n  gras: boolean\n  opaciteDeRemplissage!: number\n  bordures: [number, number, number, number]\n  couleurDeRemplissage: [string, string]\n  contour: boolean\n  taille: number\n\n  constructor(\n    texte: string,\n    A: PointAbstrait | Vide2d,\n    orientation: number = 0,\n    color: string = 'black',\n    scale: number = 1,\n    ancrageDeRotation: AncrageDeRotationType = 'milieu',\n    mathOn: boolean = false,\n    opacite: number = 1,\n  ) {\n    super()\n    if (typeof orientation !== 'number') {\n      if (orientation === 'milieu' || typeof orientation === 'string') {\n        ancrageDeRotation = orientation\n        orientation = 0\n      }\n    }\n    if (!['milieu', 'gauche', 'droite'].includes(ancrageDeRotation))\n      ancrageDeRotation = 'milieu'\n\n    this.ancrageDeRotation = ancrageDeRotation\n    this.orientation = orientation\n    this.color = colorToLatexOrHTML(color)\n    this.scale = scale\n    this.taille = Math.round(14 * scale)\n    this.opacite = opacite\n    this.couleurDeRemplissage = colorToLatexOrHTML(color)\n    this.mathOn = mathOn\n    this.point = A\n    this.gras = false\n    this.contour = false\n    this.opaciteDeRemplissage = opacite\n\n    if (typeof texte !== 'string') {\n      if (!Number.isNaN(texte)) texte = stringNombre(texte, 3)\n    }\n    const angle = (Math.PI * orientation) / 180\n    // constantes utilisée pour le calcul des bordures\n    const cx = Math.cos(angle)\n    const sx = Math.sin(angle)\n    const ratioLettreCm = 0.25\n    const epaisseurTexte = 0.3 * scale\n    const longueurTexte = texte.length * ratioLettreCm * scale\n    // définition des bordures suivant le point d'ancrage\n    if (ancrageDeRotation === 'milieu') {\n      this.bordures = [\n        A.x - longueurTexte * cx,\n        A.y - longueurTexte * sx - epaisseurTexte,\n        A.x + longueurTexte * cx,\n        A.y + longueurTexte * sx + epaisseurTexte,\n      ]\n    } else if (ancrageDeRotation === 'gauche') {\n      this.bordures = [\n        A.x,\n        A.y - 2 * (longueurTexte * sx) - epaisseurTexte,\n        A.x + 2 * (longueurTexte * cx),\n        A.y + epaisseurTexte,\n      ]\n    } else {\n      this.bordures = [\n        A.x - 2 * longueurTexte * cx,\n        A.y - epaisseurTexte,\n        A.x,\n        A.y + 2 * (longueurTexte * sx) + epaisseurTexte,\n      ]\n    }\n\n    if (typeof texte !== 'string') {\n      texte = String(texte)\n    }\n    texte = texte.replaceAll('$$', '$') // ça arrive que des fonctions ajoutent des $ alors qu'il y en a déjà...\n    this.texte = texte\n  }\n\n  svg(coeff: number) {\n    if (this.texte.charAt(0) === '$') {\n      if (!this.point.positionLabel) {\n        this.point.positionLabel = 'above'\n      }\n      return latex2d(\n        this.texte.substring(1, this.texte.length - 1),\n        this.point.x,\n        this.point.y,\n        {\n          color: this.color[0],\n          orientation: this.orientation,\n          letterSize: 'normalsize',\n        },\n      ).svg()\n    } else {\n      let code = ''\n      let style = ''\n      if (this.mathOn)\n        style = ' font-family= \"Book Antiqua\"; font-style= \"italic\" '\n      if (this.contour)\n        style += ` style=\"font-size: ${this.taille}px;fill: ${this.couleurDeRemplissage[0]};fill-opacity: ${this.opaciteDeRemplissage};stroke: ${this.color[0]};stroke-width: 0.5px;stroke-linecap: butt;stroke-linejoin:miter;stroke-opacity: ${this.opacite}\" `\n      else\n        style += ` style=\"font-size:${this.taille}px;fill:${this.color[0]};fill-opacity:${this.opacite};${this.gras ? 'font-weight:bolder' : ''}\" `\n      const anchor = svgAncrages[this.ancrageDeRotation]\n      code = `<text ${style} x=\"${this.point.xSVG(coeff)}\" y=\"${this.point.ySVG(\n        coeff,\n      )}\" text-anchor = \"${anchor}\" dominant-baseline = \"central\" fill=\"${\n        this.couleurDeRemplissage[0]\n      }\" transform=\"rotate(${String(this.orientation)} ${this.point.xSVG(coeff)} ${this.point.ySVG(\n        coeff,\n      )})\" id=\"${this.id}\" >${this.texte}</text>\\n `\n      return code\n    }\n  }\n\n  tikz() {\n    if (this.texte.charAt(0) === '$') {\n      if (!this.point.positionLabel) {\n        this.point.positionLabel = 'above'\n      }\n      let code = ''\n      const anchor = tikzAncrages[this.ancrageDeRotation]\n      code = `\\\\draw [color=${this.color[1]}] (${String(arrondi(this.point.x))},${String(\n        arrondi(this.point.y),\n      )}) node[anchor = ${anchor},scale=${String(this.scale)}, rotate = ${String(-this.orientation)}] {${this.texte}};`\n      return code\n    } else {\n      let code = ''\n      const anchor = tikzAncrages[this.ancrageDeRotation]\n      code = `\\\\draw [color=${this.color[1]}] (${arrondi(this.point.x)},${arrondi(\n        this.point.y,\n      )}) node[anchor = ${anchor},scale=${String(this.scale)}, rotate = ${String(-this.orientation)}] {${this.texte}};`\n      return code\n    }\n  }\n}\n/**\n * texteParPoint('mon texte',A) // Écrit 'mon texte' avec A au centre du texte\n * texteParPoint('mon texte',A,45) // Écrit 'mon texte' centré sur A avec une rotation de 45°\n * texteParPoint('mon texte',A, 0, 'black', 1, 'gauche',true, 0.5) // écrit le texte à droite du point A car le point d'ancrage est à gauche\n *  // couleur du texte en noir, avec une taille normale et une police mathématique et une opacité de 50%\n * oriention est un nombre, c'est l'angle de rotation (0 par défaut), et il faut positionner le centre de rotation avec ancrageDeRotation (milieu par défaut)\n * ancrageDeRotation est à prendre parmi ['milieu', 'gauche', 'droite']\n * Si mathOn est true, la chaine est traitée par texteParPoint mais avec une police se rapprochant de la police Katex (quelques soucis d'alignement des caractères sur certains navigateurs)\n * Si le texte commence et finit par des $ la chaine est traitée par latexParPoint\n * @author Rémi Angot rectifié par Jean-Claude Lhote\n */\nexport function texteParPoint(\n  texte: string,\n  A: PointAbstrait | Vide2d,\n  orientation: number = 0,\n  color: string = 'black',\n  scale: number = 1,\n  ancrageDeRotation: 'milieu' | 'droite' | 'gauche' = 'milieu',\n  mathOn: boolean = false,\n  opacite: number = 1,\n) {\n  return new TexteParPoint(\n    texte,\n    A,\n    orientation,\n    color,\n    scale,\n    ancrageDeRotation,\n    mathOn,\n    opacite,\n  )\n}\n\nexport class TexteParPointEchelle extends ObjetMathalea2D {\n  gras: boolean\n  texte: string\n  point: PointAbstrait\n  orientation: number\n  color: [string, string]\n  scale: number\n  ancrageDeRotation: AncrageDeRotationType\n  mathOn: boolean\n  scaleFigure: number\n  contour: boolean\n  couleurDeRemplissage!: [string, string]\n  opaciteDeRemplissage!: number\n  bordures: [number, number, number, number]\n  taille: number\n  constructor(\n    texte: string,\n    A: PointAbstrait,\n    orientation: number = 0,\n    color: string = 'black',\n    scale: number = 1,\n    ancrageDeRotation: AncrageDeRotationType = 'milieu',\n    mathOn: boolean = false,\n    scaleFigure: number,\n  ) {\n    super()\n    if (typeof orientation !== 'number') {\n      if (orientation === 'milieu' || typeof orientation === 'string') {\n        ancrageDeRotation = orientation\n        orientation = 0\n      }\n    }\n    if (!['milieu', 'gauche', 'droite'].includes(ancrageDeRotation))\n      ancrageDeRotation = 'milieu'\n    this.color = colorToLatexOrHTML(color)\n    this.contour = false\n    this.mathOn = mathOn\n    this.gras = false\n    this.point = A\n    this.scale = scale\n    this.scaleFigure = scaleFigure\n    this.taille = 10 * scale\n    this.opacite = 1\n    this.couleurDeRemplissage = colorToLatexOrHTML(color)\n    this.opaciteDeRemplissage = this.opacite\n    this.bordures = [\n      A.x - texte.length * 0.2,\n      A.y - 0.4,\n      A.x + texte.length * 0.2,\n      A.y + 0.4,\n    ]\n    this.texte = texte\n    this.orientation = orientation\n    this.ancrageDeRotation = ancrageDeRotation\n  }\n\n  svg(coeff: number) {\n    if (this.texte.charAt(0) === '$') {\n      return latexParPoint(\n        this.texte.substring(1, this.texte.length - 2),\n        this.point,\n        this.color[0],\n        this.texte.length * 8,\n        10,\n        '',\n        this.taille * 0.8,\n      ).svg(coeff)\n    } else {\n      let style = ''\n      if (this.mathOn)\n        style = ' font-family= \"Book Antiqua\"; font-style= \"italic\" '\n      if (this.contour)\n        style += ` style=\"font-size: ${this.taille}px;fill: ${this.couleurDeRemplissage[0]};fill-opacity: ${this.opaciteDeRemplissage};stroke: ${this.color[0]};stroke-width: 0.5px;stroke-linecap: butt;stroke-linejoin:miter;stroke-opacity: ${this.opacite}\" `\n      else\n        style += ` style=\"font-size:${this.taille}px;fill:${this.color[0]};fill-opacity:${this.opacite};${this.gras ? 'font-weight:bolder' : ''}\" `\n      return `<text ${style} x=\"${this.point.xSVG(coeff)}\" y=\"${this.point.ySVG(\n        coeff,\n      )}\" text-anchor = \"${svgAncrages[this.ancrageDeRotation]}\" dominant-baseline = \"central\" fill=\"${\n        this.color[0]\n      }\" transform=\"rotate(${String(this.orientation)} ${this.point.xSVG(coeff)} ${this.point.ySVG(\n        coeff,\n      )})\" id=\"${this.id}\" >${this.texte}</text>\\n `\n    }\n  }\n\n  tikz() {\n    let copyThistexte = this.texte\n    if (this.mathOn && copyThistexte[0] !== '$')\n      copyThistexte = '$' + this.texte + '$'\n    return `\\\\draw ${this.color[0] === 'black' ? '' : `[color=${this.color[1]}]`} (${String(arrondi(this.point.x))},${String(\n      arrondi(this.point.y),\n    )}) node[anchor = ${tikzAncrages[this.ancrageDeRotation]}, rotate = ${String(-this.orientation)}, scale=${(this.scale * this.scaleFigure * 1.25).toFixed(2)}] {${copyThistexte}};`\n  }\n}\nexport function texteParPointEchelle(\n  texte: string,\n  A: PointAbstrait,\n  orientation: number = 0,\n  color: string = 'black',\n  scale: number = 1,\n  ancrageDeRotation: 'milieu' | 'droite' | 'gauche' = 'milieu',\n  mathOn: boolean = false,\n  scaleFigure: number = 1,\n): TexteParPointEchelle {\n  return new TexteParPointEchelle(\n    texte,\n    A,\n    orientation,\n    color,\n    scale,\n    ancrageDeRotation,\n    mathOn,\n    scaleFigure,\n  )\n}\n\nexport function texteParPositionEchelle(\n  texte: string,\n  x: number,\n  y: number,\n  orientation: number = 0,\n  color: string = 'black',\n  scale: number = 1,\n  ancrageDeRotation: 'milieu' | 'droite' | 'gauche' = 'milieu',\n  mathOn: boolean = false,\n  scaleFigure: number = 1,\n) {\n  return texteParPointEchelle(\n    texte,\n    pointAbstrait(arrondi(x, 2), arrondi(y, 2), '', 'center'),\n    orientation,\n    color,\n    scale,\n    ancrageDeRotation,\n    mathOn,\n    scaleFigure,\n  )\n}\n\n/**\n * texteParPosition('mon texte',x,y) // Écrit 'mon texte' avec (x,y) au centre du texte\n * texteParPoint('mon texte',x,y,45) // Écrit 'mon texte' centré sur A avec une rotation de 45°\n * orientation est l'angle de rotation du texte\n * ancrageDeRotation est à prendre parmi ['milieu', 'gauche', 'droite']\n * Si mathOn est true, la chaine est traitée par texteParPoint mais avec une police se rapprochant de la police Katex (quelques soucis d'alignement des caractères sur certains navigateurs)\n * Si le texte commence et finit par des $ la chaine est traitée par latex2d en retirant les $ en 1ère et dernière position\n * @author Rémi Angot\n * @param {string} texte // Le texte qu'on veut afficher\n * @param {number} x // L'abscisse de la position initiale du texte\n * @param {number} y // L'ordonnée de la position initiale du texte\n * @param {number} [orientation=0]\n * @param {string} [color='black'] // Couleur du texte\n * @param {number} [scale=1] // Echelle du texte.\n * @param {AncrageDeRotationType} [ancrageDeRotation='milieu']\n * @param {string} [mathOn=false] // Ecriture dans le style de Latex.\n *\n * @author Rémi Angot\n */\nexport function texteParPosition(\n  texte: string | number,\n  x: number,\n  y: number,\n  orientation: number = 0,\n  color: string = 'black',\n  scale: number = 1,\n  ancrageDeRotation: 'milieu' | 'gauche' | 'droite' = 'milieu',\n  mathOn: boolean = false,\n  opacite?: number,\n) {\n  if (typeof texte === 'number') texte = String(texte)\n  if (typeof orientation !== 'number') {\n    ancrageDeRotation = orientation\n    orientation = 0\n  }\n  // @ts-expect-error TS2367 // normalement ts devrait veiller au grain, sauf que plein d'exo tournant en js ont mal utilisé ces paramètres, donc on blinde.\n  if (ancrageDeRotation === 'middle') ancrageDeRotation = 'milieu'\n  if (!['milieu', 'droite', 'gauche'].includes(ancrageDeRotation))\n    ancrageDeRotation = 'milieu'\n  if (texte[0] === '$') {\n    return latex2d(texte.substring(1, texte.length - 1), x, y, {\n      color,\n      backgroundColor: 'white',\n      letterSize: 'normalsize',\n    })\n  } else {\n    return new TexteParPoint(\n      texte,\n      pointAbstrait(x, y, ''),\n      orientation,\n      color,\n      scale,\n      ancrageDeRotation,\n      mathOn,\n      opacite,\n    )\n  }\n}\n\n/**\n * latexParPoint('\\\\dfrac{3}{5}',A,'black',12,20,\"white\") Ecrit la fraction 3/5 à l'emplacement du label du point A en noir, avec un fond blanc.\n * 12 est la largeur en pixels 20 la hauteur en pixels (utilisé à des fins de centrage). Pour un bon centrage sur A, il faut que A.positionLabel='center'.\n * si colorBackground=\"\", le fond est transparent.\n * tailleCaracteres est à 8 par défaut et correspond à \\footnotesize. tailleCaracteres va de 5 = \\small à 20 = \\huge\n * @author Rémi Angot\n */\nexport function latexParPoint(\n  texte: string,\n  A: PointAbstrait | Vide2d,\n  color: string = 'black',\n  largeur: number = 20,\n  hauteur: number = 12,\n  colorBackground: string = 'white',\n  tailleCaracteres: number = 8,\n): LatexParCoordonnees | Vide2d {\n  let x\n  let y\n  const coeff = context.pixelsParCm\n  const offset = 10 * Math.log10(tailleCaracteres)\n  switch (A.positionLabel) {\n    case 'above':\n      x = A.x\n      y = A.y + offset / coeff\n      break\n    case 'below':\n      x = A.x\n      y = A.y - offset / coeff\n      break\n    case 'left':\n      x = A.x - offset / coeff\n      y = A.y\n      break\n    case 'right':\n      x = A.x + offset / coeff\n      y = A.y\n      break\n    case 'above right':\n      x = A.x + offset / coeff\n      y = A.y + offset / coeff\n      break\n    case 'above left':\n      x = A.x - offset / coeff\n      y = A.y + offset / coeff\n      break\n    case 'below right':\n      x = A.x + offset / coeff\n      y = A.y - offset / coeff\n      break\n    case 'below left':\n      x = A.x - offset / coeff\n      y = A.y - offset / coeff\n      break\n    case 'center':\n      x = A.x\n      y = A.y\n      break\n    default:\n      x = A.x\n      y = A.y\n      break\n  }\n  return latexParCoordonnees(\n    texte,\n    x,\n    y,\n    color,\n    largeur,\n    hauteur,\n    colorBackground,\n    tailleCaracteres,\n  )\n}\n\n/**\n * @param {string} texte Le code latex qui sera mis en mode math en ligne. Ex : '\\\\dfrac{4}{5}\\\\text{cm}'\n * @param {number} x abscisse du point de centrage\n * @param {number} y ordonnée du point de centrage\n * @param {string} [color] couleur\n * @param {number} [largeur] Dimensions de la 'box' rectangulaire conteneur de la formule en pixels en considérant la taille de caractère 8='\\footnotesize'\n * @param {number} [hauteur] Idem pour la hauteur de la box. Prévoir 20 par exemple pour une fraction. Permet le centrage correct.\n * @param {string} [colorBackground] Couleur du fond de la box. Chaine vide pour un fond transparent.\n * @param {number} [tailleCaracteres] Taille de la police utilisée de 5 = \\small à 20=\\huge... agit sur la box en en modifiant les paramètres hauteur et largeur\n * @return LatexParCoordonnees\n * @deprecated Utiliser la fonction latex2d() beaucoup plus évoluée.\n * @class\n */\nexport class LatexParCoordonnees extends ObjetMathalea2D {\n  x: number\n  y: number\n  largeur: number\n  hauteur: number\n  colorBackground: string\n  texte: string\n  bordures: [number, number, number, number]\n  taille: string\n  orientation: number\n  constructor(\n    texte: string,\n    x: number,\n    y: number,\n    color: string,\n    largeur: number,\n    hauteur: number,\n    colorBackground: string = '',\n    tailleCaracteres: number = 8,\n  ) {\n    super()\n    this.x = x\n    this.y = y\n    this.largeur = largeur * Math.log10(2 * tailleCaracteres)\n    this.hauteur = hauteur * Math.log10(tailleCaracteres)\n    this.colorBackground = colorBackground\n    this.color = colorToLatexOrHTML(color)\n    this.texte = texte\n    this.orientation = 0 // dans latexParCoordonnees le latex ne peux pas tourner (on n'a pas d'argument pour ça et c'est pour cela qu'il y a latex2d() !)\n    this.bordures = [\n      this.x - (this.texte.length ?? 0) * 0.15,\n      this.y - 0.02 * this.hauteur,\n      this.x + (this.texte.length ?? 0) * 0.15,\n      this.y + 0.02 * this.hauteur,\n    ]\n    if (tailleCaracteres > 19) this.taille = '\\\\huge'\n    else if (tailleCaracteres > 16) this.taille = '\\\\LARGE'\n    else if (tailleCaracteres > 13) this.taille = '\\\\Large'\n    else if (tailleCaracteres > 11) this.taille = '\\\\large'\n    else if (tailleCaracteres < 6) this.taille = '\\\\tiny'\n    else if (tailleCaracteres < 8) this.taille = '\\\\scriptsize'\n    else if (tailleCaracteres < 9) this.taille = '\\\\footnotesize'\n    else if (tailleCaracteres < 10) this.taille = '\\\\small'\n    else this.taille = '\\\\normalsize'\n    if (typeof this.texte !== 'string')\n      throw Error(\n        `Vous n'avez pas passer un string à latexParCoordonnees() : ${this.texte}`,\n      )\n    // texte doit être de type texte maintenant, sinon, tu revois ton code !\n    //  if (texte === '') return vide2d(x, y) // ton texte est vide ? ben y a rien à afficher !\n    if (this.texte[0] === '$' && this.texte[this.texte.length - 1] === '$') {\n      // tu as mis des $ $ pour délimiter ton texte.\n      // Or c'est prévu d'en ajouter parce que c'est l'idée qu'on se fait de latexParCoordonnees()\n      // Si c'est pas pour du latex en mode math, on aurait utilisé texteParPosition-) !\n      this.texte = this.texte.substring(1, this.texte.length - 2) // donc on les enlève, pour ne pas avoir des $$ !\n    }\n  }\n\n  // Eh oui ! le svg() de latexParCoordonnees est un objet. En fait, cela va produire un div mais plus tard : dans la fonction mathalea2d().\n  svg() {\n    return {\n      latex: this.texte,\n      x: this.x,\n      y: this.y,\n      opacity: this.opacite,\n      orientation: this.orientation,\n      letterSize: this.taille.substring(1),\n      color: this.color[0],\n      backgroundColor: this.colorBackground,\n    }\n  }\n\n  tikz() {\n    let code\n    if (this.colorBackground !== '' && this.colorBackground !== 'none') {\n      code = `\\\\draw (${this.x},${this.y}) node[anchor = center] {\\\\colorbox ${colorToLatexOrHTML(this.colorBackground)[1]}{${this.taille}  \\\\color${this.color[1]}{$${this.texte}$}}};`\n    } else {\n      code = `\\\\draw (${this.x},${this.y}) node[anchor = center] {${this.taille} \\\\color${this.color[1]}{$${this.texte}$}};`\n    }\n    return code\n  }\n}\n\n/**\n * @deprecated utiliser latex2d() à la place (plus récent et plus facile d'usage)\n * @param texte\n * @param x\n * @param y\n * @param color\n * @param largeur // paramètre inutile\n * @param hauteurLigne // paramètre inutile\n * @param colorBackground\n * @param tailleCaracteres\n */\nexport function latexParCoordonnees(\n  texte: string,\n  x: number,\n  y: number,\n  color: string = 'black',\n  largeur: number = 50,\n  hauteurLigne: number = 20,\n  colorBackground: string = '',\n  tailleCaracteres: number = 8,\n) {\n  if (texte === '') texte = '\\\\phantom{ }'\n  return new LatexParCoordonnees(\n    texte,\n    x,\n    y,\n    color,\n    largeur,\n    hauteurLigne,\n    colorBackground,\n    tailleCaracteres,\n  )\n}\n\n/**\n * @param {String} texte Le code latex qui sera mis en mode math en ligne. Ex : '\\\\dfrac{4}{5}\\\\text{cm}'\n * @param {Number} x abscisse du point de centrage\n * @param {Number} y ordonnée du point de centrage\n * @param {String} [color] couleur\n * @param {Number} [largeur] Dimensions de la 'box' rectangulaire conteneur de la formule en pixels en considérant la taille de caractère 8='\\footnotesize'\n * @param {Number} [hauteur] Idem pour la hauteur de la box. Prévoir 20 par exemple pour une fraction. Permet le centrage correct.\n * @param {String} [colorBackground] Couleur du fond de la box. Chaine vide pour un fond transparent.\n * @param {Number} [tailleCaracteres] Taille de la police utilisée de 5 = \\small à 20=\\huge... agit sur la box en en modifiant les paramètres hauteur et largeur\n * @Param {Struct} {options} options.anchor pour forcer la boite\n */\nexport class LatexParCoordonneesBox extends ObjetMathalea2D {\n  texte: string\n  x: number\n  y: number\n  color: [string, string]\n  largeur: number\n  hauteur: number\n  colorBackground: [string, string]\n  taille: string = 'footnotesize'\n  options?: { anchor: string; dx?: string; dy?: string }\n  bordures: [number, number, number, number]\n  style: string\n  constructor(\n    texte: string,\n    x: number,\n    y: number,\n    color: string,\n    largeur: number,\n    hauteur: number,\n    colorBackground: string,\n    tailleCaracteres: number = 8,\n    options: { anchor: string; dx?: string; dy?: string },\n  ) {\n    super()\n    this.x = x\n    this.y = y\n    this.largeur = largeur // * Math.log10(2 * tailleCaracteres)\n    this.hauteur = hauteur // * Math.log10(tailleCaracteres)\n    this.colorBackground = colorToLatexOrHTML(colorBackground)\n    this.color = colorToLatexOrHTML(color)\n    this.texte = texte\n    this.style = ''\n    this.bordures = [\n      x - this.texte.length * 0.2,\n      y - 0.02 * this.hauteur,\n      x + this.texte.length * 0.2,\n      y + 0.02 * this.hauteur,\n    ]\n    if (tailleCaracteres > 19) this.taille = '\\\\huge'\n    else if (tailleCaracteres > 16) this.taille = '\\\\LARGE'\n    else if (tailleCaracteres > 13) this.taille = '\\\\Large'\n    else if (tailleCaracteres > 11) this.taille = '\\\\large'\n    else if (tailleCaracteres < 6) this.taille = '\\\\tiny'\n    else if (tailleCaracteres < 8) this.taille = '\\\\scriptsize'\n    else if (tailleCaracteres < 9) this.taille = '\\\\footnotesize'\n    else if (tailleCaracteres < 10) this.taille = '\\\\small'\n    else this.taille = '\\\\normalsize'\n\n    if (options.anchor !== undefined && options.anchor !== '') {\n      switch (options.anchor) {\n        case 'center': {\n          let dy = 0\n          if (\n            options.dy === undefined ||\n            options.dy === '' ||\n            options.dy.indexOf('%') < 0\n          ) {\n            dy = 0\n          } else {\n            dy = parseInt(options.dy.substr(0, options.dy.indexOf('%')))\n          }\n          let dx = 0\n          if (\n            options.dx === undefined ||\n            options.dx === '' ||\n            options.dx.indexOf('%') < 0\n          ) {\n            dx = 0\n          } else {\n            dx = parseInt(options.dx.substr(0, options.dx.indexOf('%')))\n          }\n          this.style = `position:fixed;top: 50%;left: 50%;transform: translate(${-50 + dx}%, ${-50 + dy}%);`\n          break\n        }\n        case 'above':\n          this.style = 'position:fixed;bottom:0;'\n          break\n        case 'left':\n          this.style = 'position:fixed;right:0;'\n          break\n        case 'right':\n          this.style = 'position:fixed;left:0;'\n          break\n        case 'below':\n          this.style = 'position:fixed;top:0;'\n          break\n      }\n    }\n    if (colorBackground !== '') {\n      this.style += `background-color: ${this.colorBackground[0]};`\n    }\n  }\n\n  svg(coeff: number) {\n    const demiLargeur = this.largeur / 2\n    const centrage = 0 // 0.4 * context.pixelsParCm * Math.log10(tailleCaracteres)\n    return `<foreignObject style=\" overflow: visible; line-height: 0;\" x=\"${this.x * coeff - demiLargeur}\" y=\"${-this.y * coeff - centrage - this.hauteur / 2}\"  width=\"${this.largeur}\" height=\"${this.hauteur}\" id=\"${this.id}\" ><div style=\"width:${this.largeur}px;height:${this.hauteur}px;position:fixed!important; text-align:center\">\n      <div style='${this.style}'>\n      $${this.taille} \\\\color{${this.color[0]}}{${this.texte}}$\n      </div></div></foreignObject>`\n    // <circle cx=\"${this.x * coeff - demiLargeur}\" cy=\"${-this.y * coeff - centrage - this.hauteur / 2}\" r=\"1\" fill=\"red\" stroke=\"blue\" stroke-width=\"2\"  />\n    // <circle cx=\"${this.x * coeff}\" cy=\"${-this.y * coeff}\" r=\"1\" fill=\"red\" stroke=\"blue\" stroke-width=\"2\"  />`\n  }\n\n  tikz() {\n    let code\n    if (this.colorBackground[1] !== '') {\n      code = `\\\\draw (${this.x},${this.y}) node[anchor = center] {\\\\colorbox ${this.colorBackground[1]}{${this.taille}  \\\\color${this.color[1]}{$${this.texte}$}}};`\n    } else {\n      code = `\\\\draw (${this.x},${this.y}) node[anchor = center] {${this.taille} \\\\color${this.color[1]}{$${this.texte}$}};`\n    }\n    return code\n  }\n}\n\nexport function latexParCoordonneesBox(\n  texte: string,\n  x: number,\n  y: number,\n  color: string = 'black',\n  largeur: number = 50,\n  hauteurLigne: number = 20,\n  colorBackground: string = 'white',\n  tailleCaracteres: number = 8,\n  options: { anchor: string; dx?: string; dy?: string },\n) {\n  if (texte === '') texte = '\\\\phantom{ }' // pour éviter les latex vides\n  return new LatexParCoordonneesBox(\n    texte,\n    x,\n    y,\n    color,\n    largeur,\n    hauteurLigne,\n    colorBackground,\n    tailleCaracteres,\n    options,\n  )\n}\n\nexport type LetterSizeType =\n  | 'tiny'\n  | 'small'\n  | 'scriptsize'\n  | 'footnotesize'\n  | 'large'\n  | 'Large'\n  | 'LARGE'\n  | 'huge'\n  | 'normalsize'\n\n/**\n * crée un obiet mathalea2D qui affiche du latex et qui peut tourner contrairement à latexParCoordonnees qui est horizontal\n */\nexport class Latex2d extends ObjetMathalea2D {\n  letterSize: LetterSizeType\n  latex: string\n  x: number\n  y: number\n  opacity: number\n  orientation: number\n  bordures: [number, number, number, number]\n  col: string\n  backgroundCol: string\n  gras: boolean\n\n  /**\n   * Les paramètres obligatoires (ne pas mettre de $ $ dans le latex !\n   * @param latex\n   * @param x\n   * @param y\n   * @param options\n   * @param options.color la couleur du texte\n   * @param options.backgroundColor la couleur de fond\n   * @param options.letterSize la taille des caractères en texte latex sans l'antislash\n   * @param options.orientation l'angle de rotation en degrés\n   * @param options.opacity l'opacité du texte // @fixme non encore implémenté\n   *\n   */\n  constructor(\n    latex: string,\n    x: number,\n    y: number,\n    {\n      color = 'black',\n      backgroundColor = '',\n      letterSize = 'normalsize',\n      orientation = 0,\n      opacity = 1,\n      gras = false,\n    }: {\n      color: string\n      backgroundColor: string\n      letterSize: LetterSizeType\n      orientation: number\n      opacity: number\n      gras: boolean\n    },\n  ) {\n    super()\n    this.col = color\n    this.backgroundCol = backgroundColor\n    this.letterSize = letterSize\n    this.orientation = orientation\n    this.opacity = opacity\n    this.latex = latex\n    this.x = x\n    this.y = y\n    const marge = 0.25\n    this.bordures = [x - marge, y - marge, x + marge, y + marge]\n    this.gras = gras\n  }\n\n  svg(): ObjetDivLatex {\n    // On prend la couleur Latex, parce que c'est pour Katex !\n    return {\n      latex: this.latex,\n      x: this.x,\n      y: this.y,\n      opacity: this.opacity,\n      orientation: this.orientation,\n      letterSize: this.letterSize,\n      color: this.col.replace('#', ''),\n      backgroundColor: this.backgroundCol.replace('#', ''),\n      bordures: this.bordures,\n      gras: this.gras,\n    }\n  }\n\n  // @todo ajouter opacity, orientation au tikz.\n  tikz() {\n    if (this.backgroundCol.startsWith('#')) {\n      this.backgroundCol = `[HTML]{${this.backgroundCol.substring(1)}}`\n    } else {\n      this.backgroundCol = `${this.backgroundCol}`\n    }\n    if (this.col.startsWith('#')) {\n      this.col = `[HTML]{${this.col.substring(1)}}`\n    } else {\n      this.col =\n        this.col.startsWith('{') && this.col.endsWith('}')\n          ? this.col\n          : `{${this.col}}`\n    }\n    return this.backgroundCol !== '' && this.backgroundCol !== 'none'\n      ? `\\\\draw[opacity=${this.opacity}] (${this.x},${this.y}) node[anchor = center, rotate=${this.orientation}] {\\\\colorbox{${this.backgroundCol}} {\\\\${this.letterSize}  \\\\color${this.col}$${this.gras ? '\\\\boldsymbol{' : ''}${this.latex}${this.gras ? '}' : ''}$}};`\n      : `\\\\draw[opacity=${this.opacity}] (${this.x},${this.y}) node[anchor = center, rotate=${this.orientation}] {\\\\${this.letterSize} \\\\color${this.col}$${this.gras ? '\\\\boldsymbol{' : ''}${this.latex}${this.gras ? '}' : ''}$};`\n  }\n}\n\n/**\n * crée un obiet mathalea2D qui affiche du latex et qui peut tourner contrairement à latexParCoordonnees qui est horizontal\n * Les paramètres obligatoires (ne pas mettre de $ $ dans le latex !\n * @param latex\n * @param x\n * @param y\n * @param options\n * @param options.color la couleur du texte\n * @param options.backgroundColor la couleur de fond\n * @param options.letterSize la taille des caractères en texte latex sans l'antislash\n * @param options.orientation l'angle de rotation en degrés\n * @param options.opacity l'opacité du texte // @fixme non encore implémenté\n *\n */\nexport function latex2d(\n  latex: string,\n  x: number,\n  y: number,\n  {\n    color,\n    backgroundColor,\n    letterSize,\n    orientation,\n    opacity,\n    gras,\n  }: {\n    color?: string\n    backgroundColor?: string\n    letterSize?: LetterSizeType\n    orientation?: number\n    opacity?: number\n    gras?: boolean\n  },\n) {\n  color = color ?? 'black'\n  backgroundColor =\n    backgroundColor == null ||\n    backgroundColor === '' ||\n    backgroundColor === 'none'\n      ? ''\n      : backgroundColor\n  letterSize = letterSize ?? 'normalsize'\n  orientation = orientation ?? 0\n  gras = gras ?? false\n\n  opacity = opacity ?? 1\n  return new Latex2d(latex, x, y, {\n    color,\n    backgroundColor,\n    letterSize,\n    orientation,\n    opacity,\n    gras,\n  })\n}\n\nexport function tailleDeNbVersLatex(taille: number): LetterSizeType {\n  if (taille > 1.9) {\n    return 'huge'\n  } else if (taille > 1.6) {\n    return 'LARGE'\n  } else if (taille > 1.3) {\n    return 'Large'\n  } else if (taille > 1.1) {\n    return 'large'\n  } else if (taille < 0.6) {\n    return 'tiny'\n  } else if (taille < 0.8) {\n    return 'scriptsize'\n  } else if (taille < 0.9) {\n    return 'footnotesize'\n  } else if (taille < 1) {\n    return 'small'\n  } else {\n    return 'normalsize'\n  }\n}\n"],"names":["tikzAncrages","svgAncrages","labelLatexPoint","points","color","taille","largeur","hauteur","couleurDeRemplissage","offset","x","y","objets","listePoints","pt","unPoint","arrondi","latexParCoordonnees","labelPoint","args","colorToLatexOrHTML","PointAbstrait","texteParPosition","context","TexteParPoint","ObjetMathalea2D","texte","A","orientation","scale","ancrageDeRotation","mathOn","opacite","__publicField","stringNombre","angle","cx","sx","ratioLettreCm","epaisseurTexte","longueurTexte","coeff","latex2d","code","style","anchor","texteParPoint","TexteParPointEchelle","scaleFigure","latexParPoint","copyThistexte","texteParPointEchelle","texteParPositionEchelle","pointAbstrait","colorBackground","tailleCaracteres","LatexParCoordonnees","hauteurLigne","LatexParCoordonneesBox","options","dy","dx","demiLargeur","latexParCoordonneesBox","Latex2d","latex","backgroundColor","letterSize","opacity","gras","marge","tailleDeNbVersLatex"],"mappings":"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"}