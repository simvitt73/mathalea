{"version":3,"file":"1AN14-3-IeNhQvkI.js","sources":["../../src/exercices/1e/1AN14-3.ts"],"sourcesContent":["import type { BoxedExpression } from '@cortex-js/compute-engine'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport engine, {\n  functionCompare,\n} from '../../lib/interactif/comparisonFunctions'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { Polynome, type CoeffType } from '../../lib/mathFonctions/Polynome'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport {\n  ecritureAlgebrique,\n  ecritureAlgebriqueSauf1,\n} from '../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { obtenirListeFractionsIrreductibles } from '../../modules/fractions'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Dériver un polynôme'\nexport const dateDePublication = '06/05/2024'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n/**\n * Calculer la dérivée d'un polynome\n * @author Jean-Claude Lhote\n */\n\nexport const uuid = 'ec088'\n\nexport const refs = {\n  'fr-fr': ['1AN14-3'],\n  'fr-ch': ['3mA2-2'],\n}\nconst termNames = ['u', 'v', 'w', 'z']\n\nexport default class DeriveePoly extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireTexte = [\n      'Types de fonctions',\n      'Nombres séparés par des tirets :\\n1 Constante\\n2 : Affine\\n3 : Degré 2\\n4 : Degré 3\\n5 : Deux monomes\\n6 : Mélange',\n    ]\n    this.besoinFormulaire2CaseACocher = ['Coefficients rationnels', false]\n    this.besoinFormulaire3CaseACocher = ['Coefficients décimaux', false]\n\n    this.consigne =\n      \"Pour chacune des fonctions suivantes, déterminer l'expression de sa fonction dérivée.\"\n    this.nbQuestions = 3\n    // Sortie LaTeX\n\n    this.spacing = 2\n    this.spacingCorr = 2\n    this.sup = '6'\n    this.sup2 = false\n    this.sup3 = false\n    this.correctionDetailleeDisponible = true\n    this.correctionDetaillee = false\n    // On modifie les règles de simplifications par défaut de math.js pour éviter 10x+10 = 10(x+1) et -4x=(-4x)\n    // const reglesDeSimplifications = math.simplify.rules.slice()\n    // reglesDeSimplifications.splice(reglesDeSimplifications.findIndex(rule => rule.l === 'n1*n2 + n2'), 1)\n    // reglesDeSimplifications.splice(reglesDeSimplifications.findIndex(rule => rule.l === 'n1*n3 + n2*n3'), 1)\n    // reglesDeSimplifications.push({ l: '-(n1*v)', r: '-n1*v' })\n    // reglesDeSimplifications.push('-(n1/n2) -> -n1/n2')\n  }\n\n  nouvelleVersion() {\n    const listeValeurs: string[] = [] // Les questions sont différentes du fait du nom de la fonction, donc on stocke les valeurs\n\n    const listeOfCase = ['const', 'poly1', 'poly2', 'poly3', 'monbis']\n\n    type TypeQuestion = (typeof listeOfCase)[number]\n\n    // Types d'énoncés\n    const listeTypeDeQuestions = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      nbQuestions: this.nbQuestions,\n      listeOfCase,\n      min: 1,\n      max: 5,\n      melange: 6,\n      defaut: 1,\n    })\n      .map(String)\n      .filter((x): x is TypeQuestion => listeOfCase.includes(x as TypeQuestion))\n\n    for (\n      let i = 0, texte, texteCorr, nameF, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      // On commence par générer des fonctions qui pourrait servir\n      const listeFracs = obtenirListeFractionsIrreductibles()\n      let coeffs: CoeffType[]\n      let useFraction\n      if (this.sup2) {\n        if (this.sup3) useFraction = choice([true, false])\n        else useFraction = true\n      } else useFraction = false\n      let useDecimal\n      if (this.sup3) {\n        if (useFraction) {\n          useDecimal = choice([true, false])\n          useFraction = !useDecimal\n        } else useDecimal = true\n      } else useDecimal = false\n      if (useFraction) {\n        coeffs = combinaisonListes(listeFracs, 4).slice(0, 4)\n      } else {\n        coeffs = [\n          [10, true],\n          [10, true],\n          [10, true],\n          [10, true],\n        ]\n      }\n      let deg = randint(1, 2)\n      const deuxCoeffs = coeffs.slice(0, 2)\n      const troisCoeffs = coeffs.slice(0, 3)\n      const unCoeff = coeffs.slice(0, 1)\n      const dictFonctions: Record<TypeQuestion, Polynome> = {\n        poly1: new Polynome({\n          rand: true,\n          coeffs: deuxCoeffs,\n          useFraction,\n          useDecimal,\n        }),\n        poly2: new Polynome({\n          rand: true,\n          coeffs: troisCoeffs,\n          useFraction,\n          useDecimal,\n        }),\n        poly3: new Polynome({ rand: true, coeffs, useFraction, useDecimal }),\n        const: new Polynome({\n          rand: true,\n          coeffs: unCoeff,\n          useFraction,\n          useDecimal,\n        }),\n        monbis: new Polynome(\n          choice([\n            {\n              rand: true,\n              coeffs: [coeffs[0], 0, coeffs[2], 0],\n              useFraction,\n              useDecimal,\n            },\n            {\n              rand: true,\n              coeffs: [0, coeffs[1], 0, coeffs[3]],\n              useFraction,\n              useDecimal,\n            },\n            {\n              rand: true,\n              coeffs: [0, 0, coeffs[2], coeffs[3]],\n              useFraction,\n              useDecimal,\n            },\n            {\n              rand: true,\n              coeffs: [0, coeffs[1], coeffs[2], 0],\n              useFraction,\n              useDecimal,\n            },\n          ]),\n        ),\n        poly: new Polynome({\n          rand: true,\n          coeffs: coeffs.slice(0, deg + 1),\n          useFraction,\n          useDecimal,\n        }),\n      }\n      const poly = dictFonctions[listeTypeDeQuestions[i]]\n      let expression = poly.toMathExpr()\n      if (expression.startsWith('+')) expression = expression.substring(1)\n      // Enoncé\n      nameF = [\n        'f',\n        'g',\n        'h',\n        'l',\n        'm',\n        'p',\n        'r',\n        's',\n        't',\n        'u',\n        'v',\n        'w',\n        'b',\n        'c',\n        'd',\n        'e',\n      ][i % 16]\n      const fExpr = engine.parse(expression) as unknown as BoxedExpression\n      texte = `$${nameF}(x)=${fExpr != null ? fExpr.latex.replaceAll('.', '{,}') : 'Erreur dans la fonction'}$<br>`\n      // Correction\n      texteCorr = `$${nameF}$ est dérivable sur $\\\\R$.<br>`\n      texteCorr +=\n        'On rappelle le cours : si $u,v$ sont  deux fonctions dérivables sur un même intervalle $I$ alors leur somme est dérivable sur $I$ et on a la formule : '\n      texteCorr += '\\\\[(u + v)^\\\\prime=u^\\\\prime+v^\\\\prime.\\\\]'\n      let termes = []\n      let termesD = []\n      deg = poly.deg\n      for (let p = 1; p < poly.monomes.length; p++) {\n        if (poly.monomes[deg + 1 - p] !== 0) {\n          termes.push(\n            `${ecritureAlgebriqueSauf1(poly.monomes[deg + 1 - p])}${deg + 1 - p > 1 ? 'x^' + String(deg + 1 - p) : deg + 1 - p === 1 ? 'x' : ''}`,\n          )\n          const monomeD = poly.derivee().monomes[deg - p]\n          termesD.push(\n            `${deg - p > 1 ? ecritureAlgebriqueSauf1(monomeD) : ecritureAlgebrique(monomeD)}${deg - p > 1 ? 'x^' + String(deg - p) : deg - p === 1 ? 'x' : ''}`,\n          )\n        }\n      }\n      if (poly.monomes[0] !== 0) {\n        termes.push(ecritureAlgebrique(poly.monomes[0]))\n        termesD.push('0')\n      }\n\n      if (this.correctionDetaillee) {\n        termes = termes.map((el) => (el.startsWith('+') ? el.substring(1) : el))\n        termesD = termesD.map((el) =>\n          el.startsWith('+') ? el.substring(1) : el,\n        )\n        if (termes.length > 1) {\n          const fExpr = engine.parse(expression) as unknown as BoxedExpression\n          texteCorr = `La fonction $${nameF}(x)=${fExpr.latex.replaceAll('.', '{,}')}$ est une somme de $${termes.length}$ termes.<br>${useFraction ? '<br>' : ''}`\n          texteCorr +=\n            'On rappelle que $(u+v)^\\\\prime=u^\\\\prime+v^\\\\prime$.<br>'\n          for (let n = 0; n < termes.length; n++) {\n            texteCorr += `$${termNames[n]}(x)=${termes[n]},\\\\ ${termNames[n]}^\\\\prime(x)=${termesD[n]}$.<br>${useFraction ? '<br>' : ''}`\n          }\n        } else {\n          const fExpr = engine.parse(expression) as unknown as BoxedExpression\n          texteCorr = `La fonction $${nameF}(x)=${fExpr.latex.replaceAll('.', '{,}')}$ est une fonction constante, sa dérivée est la fonction constante nulle.<br>`\n        }\n      } else {\n        if (poly.monomes.length > 1) {\n          texteCorr = `$${nameF}^\\\\prime(x)=${poly.detailleCalculDerivee()}$.<br>`\n          texteCorr += 'On effectue les produits.<br>'\n        } else {\n          texteCorr = `La fonction $${nameF}(x)=${fExpr.latex.replaceAll('.', '{,}')}$ est une fonction constante, sa dérivée est la fonction constante nulle.<br>`\n        }\n      }\n      texteCorr += `On obtient alors : $${nameF}^\\\\prime(x)=${poly.derivee().toLatex().replaceAll('.', '{,}')}$.`\n\n      texte = texte.replaceAll('\\\\frac', '\\\\dfrac')\n      texteCorr = texteCorr.replaceAll('\\\\frac', '\\\\dfrac')\n      if (this.interactif) {\n        texte +=\n          `<br>${useFraction ? '<br>' : ''}` +\n          ajouteChampTexteMathLive(this, i, KeyboardType.lyceeClassique, {\n            texteAvant: `$${nameF}'(x)=$`,\n          }) +\n          '<br>'\n      }\n      handleAnswers(this, i, {\n        reponse: { value: poly.derivee().toLatex(), compare: functionCompare },\n      })\n\n      if (listeValeurs.indexOf(expression) === -1) {\n        listeValeurs.push(expression)\n        this.listeQuestions[i] = texte\n        // Uniformisation : Mise en place de la réponse attendue en interactif en orange et gras\n        const textCorrSplit = texteCorr.split('=')\n        let aRemplacer = textCorrSplit[textCorrSplit.length - 1]\n        aRemplacer = aRemplacer.replaceAll('$', '')\n        aRemplacer = aRemplacer.replaceAll('.', '')\n\n        texteCorr = ''\n        for (let ee = 0; ee < textCorrSplit.length - 1; ee++) {\n          texteCorr += textCorrSplit[ee] + '='\n        }\n        texteCorr += ` ${miseEnEvidence(aRemplacer)}$` + '.'\n        // Fin de cette uniformisation\n\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","dateDePublication","interactifReady","interactifType","uuid","refs","termNames","DeriveePoly","Exercice","listeValeurs","listeOfCase","listeTypeDeQuestions","gestionnaireFormulaireTexte","x","i","texte","texteCorr","nameF","cpt","listeFracs","obtenirListeFractionsIrreductibles","coeffs","useFraction","choice","useDecimal","combinaisonListes","deg","randint","deuxCoeffs","troisCoeffs","unCoeff","poly","Polynome","expression","fExpr","engine","termes","termesD","p","ecritureAlgebriqueSauf1","monomeD","ecritureAlgebrique","el","n","ajouteChampTexteMathLive","KeyboardType","handleAnswers","functionCompare","textCorrSplit","aRemplacer","ee","miseEnEvidence","listeQuestionsToContenu"],"mappings":"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"}