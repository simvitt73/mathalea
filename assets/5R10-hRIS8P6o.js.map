{"version":3,"file":"5R10-hRIS8P6o.js","sources":["../../src/exercices/5e/5R10.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport {\n  handleAnswers,\n  setReponse,\n} from '../../lib/interactif/gestionInteractif'\nimport { remplisLesBlancs } from '../../lib/interactif/questionMathLive'\nimport { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport {\n  ecritureAlgebrique,\n  ecritureParentheseSiMoins,\n} from '../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport {\n  arrondi,\n  nombreDeChiffresDansLaPartieEntiere,\n} from '../../lib/outils/nombres'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const interactifReady = true\n\nexport const dateDeModifImportante = '16/05/2025'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\nexport const interactifType = 'mathLive'\nexport const titre = \"Trouver le terme manquant d'une somme de nombres relatifs\"\n\n/**\n * Additions à trou dans les relatifs\n *\n *  @author Jean-Claude Lhote à partir de CM000 de Rémi Angot\n */\nexport const uuid = '61b4a'\n\nexport const refs = {\n  'fr-fr': ['5R20-1'],\n  'fr-ch': ['9NO9-4'],\n}\nexport default class TermeInconnuDeSomme extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Niveau de difficulté',\n      2,\n      '1 : Nombres entiers\\n2 : Nombres décimaux',\n    ]\n    this.besoinFormulaire2Numerique = ['Valeur maximale', 9999]\n    this.nbQuestions = 5\n    this.sup = 1\n    this.sup2 = 20\n    this.consigne = 'Calculer le terme manquant.'\n    this.spacing = 2\n    this.interactif = false\n\n    this.amcType = amcType\n    this.amcReady = amcReady\n  }\n\n  nouvelleVersion() {\n    this.besoinFormulaire3CaseACocher = this.interactif\n      ? ['Parenthèses inutiles dans la réponse', false]\n      : false\n    const typesDeQuestionsDisponibles = [1, 2, 3, 4]\n    const listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    )\n    let decimal\n    if (this.sup === 1) {\n      decimal = 1\n    } else {\n      decimal = 10\n    }\n    for (\n      let i = 0, a, b, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      do {\n        if (!context.isAmc) {\n          a = arrondi(randint(4 * decimal, this.sup2 * decimal) / decimal, 1)\n          b = arrondi(randint(2 * decimal, this.sup2 * decimal) / decimal, 1)\n        } else {\n          a = arrondi(randint(4 * decimal, 20 * decimal) / decimal, 1)\n          b = arrondi(randint(2 * decimal, 20 * decimal) / decimal, 1)\n        }\n      } while (a === b)\n\n      let feedback\n      switch (listeTypeDeQuestions[i]) {\n        case 1: // a + .... = b\n          if (a > b) feedback = feedbackNeedParentheses\n          texte = remplisLesBlancs(\n            this,\n            i,\n            `${texNombre(a)}~+~%{champ1}~=~${texNombre(b)}`,\n            KeyboardType.clavierDeBase,\n            '\\\\ldots',\n          )\n          texteCorr = `$${texNombre(a)} + ${ecritureParentheseSiMoins(texNombre(b - a))} = ${texNombre(b)}$`\n          break\n\n        case 2: // .... + a = b\n          texte = remplisLesBlancs(\n            this,\n            i,\n            `%{champ1}~+~${texNombre(a)}~=~${texNombre(b)}`,\n            KeyboardType.clavierDeBase,\n            '\\\\ldots',\n          )\n          texteCorr = `$${ecritureParentheseSiMoins(texNombre(b - a))} + ${texNombre(a)} = ${texNombre(b)}$`\n          break\n\n        case 3: // b = .... + a\n          texte = remplisLesBlancs(\n            this,\n            i,\n            `${texNombre(b)}~=~%{champ1}~+~${texNombre(a)}`,\n            KeyboardType.clavierDeBase,\n            '\\\\ldots',\n          )\n          texteCorr = `$${texNombre(b)}=${ecritureParentheseSiMoins(texNombre(b - a))} + ${texNombre(a)}$`\n          break\n\n        default: // b = a + ....\n          if (a > b) feedback = feedbackNeedParentheses\n          texte = remplisLesBlancs(\n            this,\n            i,\n            `${texNombre(b)}~=~${texNombre(a)}~+~%{champ1}`,\n            KeyboardType.clavierDeBase,\n            '\\\\ldots',\n          )\n          texteCorr = `$${texNombre(b)}=${texNombre(a)} + ${ecritureParentheseSiMoins(texNombre(b - a))}$`\n          break\n      }\n      texteCorr += `. En effet : $${texNombre(b)}-${texNombre(a)}=${texNombre(b - a)}$`\n\n      // Uniformisation : Mise en place de la réponse attendue en interactif en orange et gras\n      const textCorrSplit = texteCorr.split('=')\n      let aRemplacer = textCorrSplit[textCorrSplit.length - 1]\n      aRemplacer = aRemplacer.replaceAll('$', '')\n\n      texteCorr = ''\n      for (let ee = 0; ee < textCorrSplit.length - 1; ee++) {\n        texteCorr += textCorrSplit[ee] + '='\n      }\n      texteCorr += `$ $${miseEnEvidence(aRemplacer)}$` + '.' // Gestion du point final\n      // Fin de cette uniformisation\n\n      if (this.questionJamaisPosee(i, a, b)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        const tableauReponse = [\n          '(' + arrondi(b - a, 2) + ')',\n          '(' + ecritureAlgebrique(arrondi(b - a, 2)) + ')',\n        ]\n        if (\n          this.sup3 ||\n          listeTypeDeQuestions[i] === 2 ||\n          listeTypeDeQuestions[i] === 3 ||\n          arrondi(b - a, 2) > 0\n        )\n          tableauReponse.push(String(arrondi(b - a, 2)))\n        if (this.interactif) {\n          handleAnswers(this, i, {\n            champ1: {\n              value: tableauReponse,\n              options: { texteSansCasse: true },\n            },\n            feedback,\n          })\n        } else if (context.isAmc) {\n          setReponse(this, i, arrondi(b - a, 2), {\n            signe: true,\n            digits: Math.max(2, nombreDeChiffresDansLaPartieEntiere(b - a)),\n            decimals: 0,\n          })\n        }\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction feedbackNeedParentheses(input: Record<string, string>) {\n  const champ1 = input.champ1\n  if (champ1.length > 0 && !champ1.startsWith('\\\\lparen')) {\n    return 'On ne peut pas écrire les signes + et - côte à côte. Il faudrait mettre la réponse entre parenthèses.'\n  }\n  return ''\n}\n"],"names":["interactifReady","dateDeModifImportante","amcReady","amcType","interactifType","titre","uuid","refs","TermeInconnuDeSomme","Exercice","listeTypeDeQuestions","combinaisonListes","decimal","i","a","b","texte","texteCorr","cpt","context","arrondi","randint","feedback","feedbackNeedParentheses","remplisLesBlancs","texNombre","KeyboardType","ecritureParentheseSiMoins","textCorrSplit","aRemplacer","ee","miseEnEvidence","tableauReponse","ecritureAlgebrique","handleAnswers","setReponse","nombreDeChiffresDansLaPartieEntiere","listeQuestionsToContenu","input","champ1"],"mappings":"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"}