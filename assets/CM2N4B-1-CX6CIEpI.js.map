{"version":3,"file":"CM2N4B-1-CX6CIEpI.js","sources":["../../src/exercices/CM2/CM2N4B-1.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif' // fonction qui va préparer l'analyse de la saisie\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive' // fonctions de mise en place des éléments interactifs\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { lettreDepuisChiffre } from '../../lib/outils/outilString'\nimport {\n  contraindreValeur,\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\nexport const titre = 'Calculer une expression avec des parenthèses'\nexport const dateDePublication = '30/06/2025' // La date de publication initiale au format 'jj/mm/aaaa' pour affichage temporaire d'un tag\n\nexport const uuid = '5e37d'\nexport const refs = {\n  'fr-fr': ['CM2N4B-1'],\n  'fr-2016': ['6C33-3'],\n  'fr-ch': [],\n}\n/**\n * Exercice de calcul d'expressions avec des parenthèses sans autres priorités.\n * @author Olivier Mimeau\n */\nexport default class nomExercice extends Exercice {\n  constructor() {\n    super()\n    this.consigne = 'Calculer en détaillant les étapes de calculs.'\n    this.nbQuestions = 6 // nombre de questions\n    this.besoinFormulaireTexte = [\n      \"Types d'expression\",\n      'Nombres séparés par des tirets :\\n1 : Deux Parenthèses séparées\\n2 : Deux parenthèses imbriquées\\n3: Une seule parenthèse',\n    ]\n    this.sup = '1-2-3'\n    this.besoinFormulaire2Numerique = ['Résulat maximum', 10000] // 10000 car listeNombresPremiersStrictJusqua renvoie un tableau de premiers inférieurs à 10000\n    this.sup2 = 200\n    this.comment =\n      \"Résultat maximum : Il s'agit de produire des expressions dont le résulat est inférieur au maximum. Si ce maximum est trop petit il sera fixé à 50.\"\n  }\n\n  nouvelleVersion() {\n    const typeQuestionsDisponibles = [\n      'deuxParenthesesseparees',\n      'deuxParenthesesimbriquees',\n      'UneParenthese',\n    ]\n    const listeTypeQuestions = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 3,\n      melange: 4,\n      defaut: 4,\n      listeOfCase: typeQuestionsDisponibles,\n      nbQuestions: this.nbQuestions,\n    })\n    // const listeTypeQuestions = combinaisonListes(typeQuestionsDisponibles, this.nbQuestions)\n    const ResultatMmax = contraindreValeur(50, 10000, this.sup2, 200)\n    const avecDivision = false // pas de division pour le moment\n    this.consigne = 'Calculer'\n    this.consigne +=\n      this.nbQuestions < 2\n        ? \" l'expression suivante\"\n        : '  les expressions suivantes'\n    this.consigne += this.interactif\n      ? '.'\n      : ' en détaillant les étapes de calculs.'\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      const lettre = lettreDepuisChiffre(i + 1)\n      let texte = '' // texte de la question\n      let resultat = 0\n      let texteCorr = ''\n      let txtArbre: string = ''\n      let tree: BinaryTree | undefined\n      const op1 = unOperateur(avecDivision)\n      // eviter 1+((2+3)+4)\n      // const op2 =  unOperateur(avecDivision)\n      const op2 =\n        op1 !== '+' && op1 !== '*'\n          ? unOperateur(avecDivision, [op1])\n          : unOperateur(avecDivision)\n      const op3 = unOperateur(avecDivision)\n\n      switch (listeTypeQuestions[i]) {\n        case 'deuxParenthesesseparees':\n          tree = new BinaryTree(\n            new TreeNode(\n              op1,\n              new TreeNode(\n                op2,\n                new TreeNode(randint(1, 10)),\n                new TreeNode(randint(1, 10)),\n              ),\n              new TreeNode(\n                op3,\n                new TreeNode(randint(1, 10)),\n                new TreeNode(randint(1, 10)),\n              ),\n            ),\n          )\n          break\n        case 'deuxParenthesesimbriquees':\n          tree = new BinaryTree(\n            new TreeNode(\n              op1,\n              new TreeNode(randint(1, 10)),\n              new TreeNode(\n                op2,\n                new TreeNode(randint(1, 10)),\n                new TreeNode(\n                  op3,\n                  new TreeNode(randint(1, 10)),\n                  new TreeNode(randint(1, 10)),\n                ),\n              ),\n            ),\n          )\n          braceLArbre(tree.root)\n          break\n        case 'UneParenthese':\n        default:\n          tree = new BinaryTree(\n            new TreeNode(\n              op1,\n              new TreeNode(\n                op2,\n                new TreeNode(randint(1, 10)),\n                new TreeNode(randint(1, 10)),\n              ),\n              new TreeNode(randint(1, 10)),\n            ),\n          )\n          braceLArbre(tree.root)\n          break\n      }\n      if (tree !== undefined) {\n        verifiePositif(tree.root)\n        texte += `$${lettre} = ${ecritExpression(tree.root)}$`\n        texteCorr += `$${lettre} = ${ecritExpression(tree.root, true)}$<br>`\n        if (tree.root !== null) {\n          txtArbre = ''\n          let txtExpression: string | void | [string, boolean] = ''\n          do {\n            effectueUneEtape(tree.root)\n            txtExpression = ecritExpression(tree.root, true)\n\n            if (typeof tree.root.value === 'number') {\n              txtArbre += `$${lettre} = ${miseEnEvidence(`${txtExpression}`)}$<br>` // miseEnEvidence(`${txtExpression}`,'blue')\n            } else {\n              txtArbre += `$${lettre} = ${txtExpression}$<br>`\n            }\n          } while (typeof tree.root.value !== 'number')\n          texteCorr += `${txtArbre}<br>`\n        }\n        resultat = evalueArbre(tree.root)\n        tree = undefined\n      }\n      texte += ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers, {\n        texteAvant: `<br>$${lettre} = $`,\n      })\n      handleAnswers(this, i, {\n        reponse: {\n          value: resultat,\n          options: { nombreDecimalSeulement: true },\n        },\n      })\n      if (resultat < ResultatMmax && this.questionJamaisPosee(i, texte)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\ntype oper = '+' | '-' | '*' | '/'\nclass TreeNode {\n  constructor(\n    public value: number | oper,\n    public left: TreeNode | null = null,\n    public right: TreeNode | null = null,\n  ) {}\n}\nclass BinaryTree implements Iterable<number | oper> {\n  constructor(public root: TreeNode | null) {} // private root: TreeNode | null) {}\n\n  *[Symbol.iterator](): Iterator<number | oper> {\n    function* inOrderTraversal(\n      node: TreeNode | null,\n    ): Generator<number | oper> {\n      if (node) {\n        if (node.left) yield* inOrderTraversal(node.left)\n        yield node.value\n        if (node.right) yield* inOrderTraversal(node.right)\n      }\n    }\n\n    yield* inOrderTraversal(this.root)\n  }\n}\n// Fonction pour parcourir l'arbre binaire et construire l'expression  en LaTeX\n// avec la possibilité de mettre en évidence une étape de calcul en gras si etapeEnGras est vrai.\n// Le paramètre niveau permet de gérer les parenthèses dans l'expression.\n// Le paramètre stop permet de savoir si l'on doit arrêter la mise en évidence.\n// La fonction retourne une chaîne de caractères représentant l'expression en LaTeX\n// et un booléen indiquant que la mise en évidence a été effectuée\nfunction parcoursExpression(\n  node: TreeNode | null,\n  etapeEnGras: boolean = false,\n  niveau: number = 0,\n  stop: boolean = false,\n): [string, boolean] {\n  if (node === null) {\n    return ['', stop]\n  }\n  let rslt = ''\n  let rsltPrecedent = ''\n  let misEnEvidence = stop\n  let enGras = false\n  if (etapeEnGras && !stop) {\n    stop =\n      node.left !== null &&\n      node.right !== null &&\n      typeof node.left.value === 'number' &&\n      typeof node.right.value === 'number'\n    enGras = stop\n    etapeEnGras = !stop\n  }\n  if (niveau > 0 && typeof node.value !== 'number') {\n    rslt += '('\n  }\n  ;[rsltPrecedent, misEnEvidence] = parcoursExpression(\n    node.left,\n    etapeEnGras,\n    niveau + 1,\n    misEnEvidence,\n  )\n  rslt += rsltPrecedent\n  if (node.value === '*') {\n    rslt += ' \\\\times'\n  } else {\n    rslt += `${node.value}`\n  }\n  ;[rsltPrecedent, misEnEvidence] = parcoursExpression(\n    node.right,\n    etapeEnGras,\n    niveau + 1,\n    misEnEvidence,\n  )\n  rslt += rsltPrecedent\n  if (niveau > 0 && typeof node.value !== 'number') {\n    rslt += ')'\n  }\n  if (enGras) {\n    rslt = miseEnEvidence(`${rslt}`, 'blue') // pour indiquer calcul à faire\n  }\n  return [rslt, enGras]\n}\n\nfunction ecritExpression(\n  node: TreeNode | null,\n  etapeEnGras: boolean = false,\n): string {\n  const temp = parcoursExpression(node, etapeEnGras)\n  return temp[0]\n}\n\nfunction evalueArbre(node: TreeNode | null): number {\n  if (node === null) {\n    return 0\n  }\n  let rslt = 0\n  const rsltGauche = evalueArbre(node.left)\n  const rsltDroite = evalueArbre(node.right)\n  if (typeof node.value !== 'number') {\n    switch (node.value) {\n      case '+':\n        rslt = rsltGauche + rsltDroite\n        break\n      case '-':\n        rslt = rsltGauche - rsltDroite\n        break\n      case '*':\n        rslt = rsltGauche * rsltDroite\n        break\n      case '/':\n        rslt = rsltDroite !== 0 ? rsltGauche / rsltDroite : 0\n        break\n      default:\n        rslt = 0\n    }\n  } else {\n    if (typeof node.value === 'number') {\n      rslt = node.value\n    }\n\n    return rslt\n  }\n  return rslt\n}\n\nfunction effectueUneEtape(node: TreeNode | null): boolean {\n  if (node === null) {\n    return false\n  }\n  let rslt = 0\n  let stop = false\n  if (\n    node.left !== null &&\n    node.right !== null &&\n    typeof node.left.value === 'number' &&\n    typeof node.right.value === 'number'\n  ) {\n    const rsltGauche = node.left.value\n    const rsltDroite = node.right.value\n    if (typeof node.value !== 'number') {\n      switch (node.value) {\n        case '+':\n          rslt = rsltGauche + rsltDroite\n          break\n        case '-':\n          rslt = rsltGauche - rsltDroite\n          break\n        case '*':\n          rslt = rsltGauche * rsltDroite\n          break\n        case '/':\n          rslt = rsltDroite !== 0 ? rsltGauche / rsltDroite : 0\n          break\n        default:\n          rslt = 0\n      }\n    }\n    node.value = rslt\n    node.left = null // new TreeNode(rsltGauche)\n    node.right = null // new TreeNode(rsltDroite)\n    stop = true\n  }\n  stop = effectueUneEtape(node.left) || effectueUneEtape(node.right) || stop\n  return stop\n}\n\nfunction braceLArbre(node: TreeNode | null): boolean {\n  if (node === null) {\n    return false\n  }\n  const stop = false\n  if (node !== null && typeof node.value !== 'number') {\n    if (choice([0, 1]) === 1) {\n      const treeTemp = node.right\n      node.right = node.left\n      node.left = treeTemp\n    }\n  }\n\n  braceLArbre(node.left)\n  braceLArbre(node.right)\n  return stop\n}\n\nfunction verifiePositif(node: TreeNode | null): boolean {\n  if (node === null) {\n    return false\n  }\n  const stop = false\n\n  verifiePositif(node.left)\n  verifiePositif(node.right)\n  if (node !== null && typeof node.value !== 'number') {\n    if (node.value === '-') {\n      const rsltGauche = evalueArbre(node.left)\n      const rsltDroite = evalueArbre(node.right)\n      if (rsltGauche - rsltDroite < 0) {\n        const treeTemp = node.right\n        node.right = node.left\n        node.left = treeTemp\n      }\n    }\n  }\n  return stop\n}\n\nfunction unOperateur(avecDivision: boolean = false, eviter: oper[] = []): oper {\n  let rslt: oper\n  if (avecDivision) {\n    rslt = choice(['+', '-', '*', '+', '-', '*', '/'], eviter)\n  } else {\n    rslt = choice(['+', '-', '*'], eviter)\n  }\n  return rslt\n}\n"],"names":["interactifReady","interactifType","titre","dateDePublication","uuid","refs","nomExercice","Exercice","typeQuestionsDisponibles","listeTypeQuestions","gestionnaireFormulaireTexte","ResultatMmax","contraindreValeur","avecDivision","i","cpt","lettre","lettreDepuisChiffre","texte","resultat","texteCorr","txtArbre","tree","op1","unOperateur","op2","op3","BinaryTree","TreeNode","randint","braceLArbre","verifiePositif","ecritExpression","txtExpression","effectueUneEtape","miseEnEvidence","evalueArbre","ajouteChampTexteMathLive","KeyboardType","handleAnswers","listeQuestionsToContenu","value","left","right","root","inOrderTraversal","node","parcoursExpression","etapeEnGras","niveau","stop","rslt","rsltPrecedent","misEnEvidence","enGras","rsltGauche","rsltDroite","choice","treeTemp","eviter"],"mappings":"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"}