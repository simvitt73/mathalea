var M=Object.defineProperty;var C=(m,y,i)=>y in m?M(m,y,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[y]=i;var x=(m,y,i)=>C(m,typeof y!="symbol"?y+"":y,i);import{P as d}from"./index-BvuGzI-o.js";import{c as b}from"./cercle-CW-NIzC1.js";import{c as P}from"./utilitairesGeometriques-rO8Jz15i.js";import{O as w}from"./ObjetMathalea2D-CXcNXRpD.js";import{p as j}from"./Plot-DUXk7rxj.js";import{a as o}from"./PointAbstrait-Cz1GEocE.js";import"./vendors/decimal.js-BceHFVC1.js";import{s as c}from"./segmentsVecteurs-BYbXXoZp.js";import{c as O}from"./polygonesParticuliers-BQc_Ltiy.js";class v extends w{constructor(...i){super();x(this,"taille");x(this,"tailleTikz");x(this,"points");x(this,"couleurDeRemplissage");x(this,"usePgfplots");x(this,"pgfplotsOptions");x(this,"pgfplotsMark");this.taille=3,this.tailleTikz=this.taille/15,this.epaisseur=1,this.opacite=.8,this.style="x",this.usePgfplots=!1;let l=1e3,e=-1e3,h=1e3,r=-1e3,a;typeof i[i.length-1]=="string"?(this.color=P(String(i[i.length-1])),i.pop()):this.color=P("black"),this.points=i;for(const t of this.points){const s=t;s.typeObjet!=="point3d"&&s.typeObjet!=="point"&&window.notify("TracePoint : argument invalide",{...i}),a=s.typeObjet==="point"?s:s.c2d,l=Math.min(l,a.x-this.taille/d.pixelsParCm),e=Math.max(e,a.x+this.taille/d.pixelsParCm),h=Math.min(h,a.y-this.taille/d.pixelsParCm),r=Math.max(r,a.y+this.taille/d.pixelsParCm)}this.bordures=[l,h,e,r]}svg(i){const l=[];let e,h,r,a,t,s;for(const u of this.points)u.typeObjet==="point3d"?s=u.c2d:s=u,this.style==="x"?(e=c(o(s.x-this.taille/i,s.y+this.taille/i),o(s.x+this.taille/i,s.y-this.taille/i),this.color[0]),h=c(o(s.x-this.taille/i,s.y-this.taille/i),o(s.x+this.taille/i,s.y+this.taille/i),this.color[0]),e.epaisseur=this.epaisseur,h.epaisseur=this.epaisseur,e.opacite=this.opacite,h.opacite=this.opacite,l.push(e,h)):this.style==="o"?(r=o(s.x,s.y),t=b(r,this.taille/i,this.color[0]),t.epaisseur=this.epaisseur,t.opacite=this.opacite,t.couleurDeRemplissage=this.color,t.opaciteDeRemplissage=this.opacite/2,l.push(t)):this.style==="#"?(r=o(s.x-this.taille/i,s.y-this.taille/i),a=o(s.x+this.taille/i,s.y-this.taille/i),t=O(r,a,this.color[0]),t.epaisseur=this.epaisseur,t.opacite=this.opacite,t.couleurDeRemplissage=[this.color[0]??"black",this.color[1]??"black"],t.opaciteDeRemplissage=this.opacite/2,l.push(t)):this.style==="+"?(e=c(o(s.x,s.y+this.taille/i),o(s.x,s.y-this.taille/i),this.color[0]),h=c(o(s.x-this.taille/i,s.y),o(s.x+this.taille/i,s.y),this.color[0]),e.epaisseur=this.epaisseur,h.epaisseur=this.epaisseur,e.opacite=this.opacite,h.opacite=this.opacite,l.push(e,h)):this.style==="|"?(e=c(o(s.x,s.y+this.taille/i),o(s.x,s.y-this.taille/i),this.color[0]),e.epaisseur=this.epaisseur,e.opacite=this.opacite,l.push(e)):this.style==="."&&(e=j(s.x,s.y,{couleur:this.color[0],rayon:this.epaisseur*.05,couleurDeRemplissage:this.color[0]}),l.push(e));let p="";for(const u of l)p+=`
	`+u.svg(i);return p=`<g id="${this.id}">`+p+"</g>",p}tikz(){if(this.usePgfplots){const p=[];for(const n of this.points)n.typeObjet==="point3d"?p.push(n.c2d):p.push(n);if(p.length===0)return"";const u=this.color[1].replace(/[{}]/g,"")||"black",T={x:{mark:"x"},"+":{mark:"+"},"|":{mark:"|"},"#":{mark:"square*",filled:!0},o:{mark:"*",filled:!0},".":{mark:"*",filled:!0}},z=T[this.style]??T.x,D=this.pgfplotsMark??z.mark,k=["only marks"];k.push(`color=${u}`),k.push(`mark=${D}`);const $=(this.tailleTikz??this.taille/15)*10*(this.style==="."?.7:1);k.push(`mark size=${Number(Math.max(.6,$).toFixed(3))}pt`),this.opacite!==1&&k.push(`opacity=${this.opacite}`);const g=[];z.filled&&g.push(`fill=${u}`),g.push(`draw=${u}`),g.length>0&&k.push(`mark options={${g.join(",")}}`),this.pgfplotsOptions&&this.pgfplotsOptions.trim()!==""&&k.push(this.pgfplotsOptions);const f=n=>Number.isFinite(n)?Number(n.toFixed(4)).toString():"0",R=p.map(n=>`(${f(n.x)},${f(n.y)})`).join(" ");return`\\addplot [${k.join(",")}] coordinates { ${R} };
`}const i=[];let l,e,h,r,a,t;for(const p of this.points)p.typeObjet==="point3d"?t=p.c2d:t=p,this.style==="x"?(this.tailleTikz=this.taille/16,l=c(o(t.x-this.tailleTikz,t.y+this.tailleTikz),o(t.x+this.tailleTikz,t.y-this.tailleTikz),this.color[1]),e=c(o(t.x-this.tailleTikz,t.y-this.tailleTikz),o(t.x+this.tailleTikz,t.y+this.tailleTikz),this.color[1]),l.epaisseur=this.epaisseur/1.6,e.epaisseur=this.epaisseur/1.6,l.opacite=this.opacite,e.opacite=this.opacite,i.push(l,e)):this.style==="o"?(h=o(t.x,t.y),a=b(h,this.tailleTikz,this.color[1]),a.epaisseur=this.epaisseur,a.opacite=this.opacite,a.couleurDeRemplissage=this.color,a.opaciteDeRemplissage=this.opacite/2,i.push(a)):this.style==="#"?(h=o(t.x-this.tailleTikz,t.y-this.tailleTikz),r=o(t.x+this.tailleTikz,t.y-this.tailleTikz),a=O(r,h,this.color[1]),a.epaisseur=this.epaisseur,a.opacite=this.opacite,a.couleurDeRemplissage=[this.color[0]??"black",this.color[1]??"black"],a.opaciteDeRemplissage=this.opacite/2,i.push(a)):this.style==="+"?(l=c(o(t.x,t.y+this.tailleTikz),o(t.x,t.y-this.tailleTikz),this.color[1]),e=c(o(t.x-this.tailleTikz,t.y),o(t.x+this.tailleTikz,t.y),this.color[1]),l.epaisseur=this.epaisseur,e.epaisseur=this.epaisseur,l.opacite=this.opacite,e.opacite=this.opacite,i.push(l,e)):this.style==="|"?(l=c(o(t.x,t.y+this.tailleTikz),o(t.x,t.y-this.tailleTikz),this.color[1]),l.epaisseur=this.epaisseur,l.opacite=this.opacite,i.push(l)):this.style==="."&&(l=j(t.x,t.y,{couleur:this.color[0],rayon:this.epaisseur*.05,couleurDeRemplissage:this.color[1]}),i.push(l));let s="";for(const p of i)s+=p.tikz();return s}}function I(...m){return new v(...m)}export{v as T,I as t};
//# sourceMappingURL=TracePoint-BcXcNg6T.js.map
