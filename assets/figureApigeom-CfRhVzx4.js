import{S as M}from"./vendors/apigeom-CvUqzk7F.js";import{C as a}from"./vendors/svelte-BrkG1v2Q.js";import{P as b,bb as g,bc as k,bd as L}from"./index-Bl1vqpvV.js";function H(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof M}function P({exercice:t,figure:e,animation:x=!1,i:c,defaultAction:m,idAddendum:A="",isDynamic:l,hasFeedback:z=!0}){var f;if(!b.isHtml)return"";e.isDynamic=l!==void 0?l:!!t.interactif,e.divButtons.style.display=e.isDynamic?"grid":"none",e.divUserMessage.style.fontSize="1em",e.divUserMessage.style.pointerEvents="none",e.divUserMessage.style.removeProperty("color"),e.divUserMessage.classList.add("text-coopmaths-struct"),t.interactif||(e.divUserMessage.style.display="none");const n=`apigeomEx${t.numeroExercice}F${c}${A}`;e.id=n;function p(o){if(!e.options){r();return}const s=o.detail;e.loadJson(JSON.parse(s)),a(g).isChoosen&&a(g).state==="solutions"&&(e.divButtons.style.display="none",e.divUserMessage.style.display="none")}document.addEventListener(n,p);let i=1;function u(o){if(!e.options){r();return}const s=Number(o.detail.zoom);i!==s&&(i=s,e!=null&&e.zoom(s,{changeHeight:!0,changeWidth:!0,changeLeft:!1,changeBottom:!1}))}document.addEventListener("zoomChanged",u);function v(){var $;if(!e.options){r();return}if(!b.isHtml)return;const o=document.querySelector(`#${n}`);if(o==null)return;document.querySelectorAll(`#${n}`).length>1&&window.notify(`Plusieurs éléments avec le même id ${n} dans la page.`,{exercice:t,figure:e}),o.innerHTML="";try{e.setContainer(o)}catch(d){throw window.notify(`figureApigeom: erreur lors du setContainer de la figure ${n}`,{figure:e,container:o,exo:t,globalOptions:a(L),exercicesParams:a(k)}),d}x&&(e.divUserMessage.innerHTML="",e.restart(),setTimeout(()=>{var d;(d=e.buttons.get("PLAY"))==null||d.click()},3e3)),m&&(($=e.buttons.get(m))==null||$.click(),m="");const s=Number(a(L).z);i!==s&&(i=s,e.zoom(s,{changeHeight:!0,changeWidth:!0,changeLeft:!1,changeBottom:!1}))}document.addEventListener("exercicesAffiches",v);let y=!1;const r=()=>{y||(y=!0,document.removeEventListener(n,p),document.removeEventListener("zoomChanged",u),document.removeEventListener("exercicesAffiches",v))},h=(f=e.destroy)==null?void 0:f.bind(e);return e.destroy=()=>{r(),e.options&&h&&h()},z?`<div class="m-6 leading-none" id="${n}"></div><span id="resultatCheckEx${t.numeroExercice}Q${c}"></span><div class="ml-2 py-2 text-coopmaths-warn-darkest dark:text-coopmathsdark-warn-darkest" id="feedbackEx${t.numeroExercice}Q${c}"></div>`:`<div class="m-6 leading-none" id="${n}"></div>`}export{P as f,H as i};
//# sourceMappingURL=figureApigeom-CfRhVzx4.js.map
