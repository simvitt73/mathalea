{"version":3,"file":"5N11-3-Bj79W_68.js","sources":["../../src/exercices/5e/5N11-3.ts"],"sourcesContent":["import { ComputeEngine } from '@cortex-js/compute-engine'\nimport type { MathfieldElement } from 'mathlive'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport {\n  handleAnswers,\n  setReponse,\n} from '../../lib/interactif/gestionInteractif'\nimport {\n  ajouteChampTexteMathLive,\n  remplisLesBlancs,\n} from '../../lib/interactif/questionMathLive'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre =\n  \"√âcrire une fraction sur 100 puis sous la forme d'un pourcentage\"\nexport const interactifReady = true\nexport const interactifType = ['custom', 'mathLive']\nexport const amcType = 'AMCNum'\nexport const amcReady = true\nexport const dateDePublication = '06/02/2021'\nexport const dateDeModifImportante = '03/04/2024'\nconst ce = new ComputeEngine()\n\n/**\n * Une fraction √©tant donn√©e, il faut l'√©crire avec 100 au d√©nominateur puis donner son √©criture sous forme de pourcentage.\n * @author R√©mi Angot\n */\n\nexport const uuid = '0e58f'\n\nexport const refs = {\n  'fr-fr': ['5N11-3'],\n  'fr-ch': ['9NO14-6'],\n}\nexport default class FractionVersPourcentage extends Exercice {\n  constructor() {\n    super()\n\n    this.consigne = 'Compl√©ter.'\n    this.nbQuestions = 6\n    this.nbCols = 2\n    this.nbColsCorr = 2\n\n    this.besoinFormulaireNumerique = [\n      'Difficult√©',\n      2,\n      \"1 : Partir d'une fraction de d√©nominateur autre que 100\\n2 : Partir d'une fraction de d√©nominateur 100\",\n    ]\n    this.sup = 1\n  }\n\n  nouvelleVersion() {\n    this.introduction =\n      this.interactif && this.sup === 1\n        ? 'La premi√®re fraction est facultative : elle sera corrig√©e, mais ne sera pas prise en compte dans le bar√®me.'\n        : ''\n\n    const typeDeDenominateurs = [10, 20, 50, 1000, 2, 4, 5, 200]\n    const listeTypeDeQuestions = combinaisonListes(\n      typeDeDenominateurs,\n      this.nbQuestions,\n    )\n    for (\n      let i = 0, texte, texteCorr, percenti, den, num, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      // Boucle principale o√π i+1 correspond au num√©ro de la question\n      den = listeTypeDeQuestions[i]\n      if (den === 2) {\n        num = choice([1, 3, 5])\n      } else if (den === 1000) {\n        num = 10 * randint(1, 99)\n      } else if (den === 200) {\n        num = 2 * randint(1, 99)\n      } else {\n        num = randint(1, den - 1)\n      }\n      percenti = Math.round((num * 100) / den)\n      if (this.sup === 1) {\n        this.interactifType = 'custom'\n        if (this.interactif) {\n          texte = remplisLesBlancs(\n            this,\n            i,\n            `\\\\dfrac{${num}}{${den}}=\\\\dfrac{%{champ1}}{%{champ2}}=\\\\dfrac{%{champ3}}{100}=%{champ4}\\\\%`,\n            'clavierDeBase',\n            '\\\\ldots\\\\ldots',\n          )\n        } else {\n          texte = `$\\\\dfrac{${num}}{${den}}=~\\\\dfrac{\\\\ldots\\\\ldots\\\\ldots\\\\ldots\\\\ldots}{\\\\ldots\\\\ldots\\\\ldots\\\\ldots\\\\ldots}=\\\\dfrac{\\\\ldots\\\\ldots}{100}~=~{\\\\ldots\\\\ldots}~\\\\%$`\n        }\n        if (den < 100) {\n          texteCorr = `$\\\\dfrac{${num}}{${texNombre(den)}}=\\\\dfrac{${num}{\\\\color{blue}\\\\times${100 / den}}}{${den}{\\\\color{blue}\\\\times${100 / den}}}=\\\\dfrac{${percenti}}{100}=${percenti}~\\\\%$`\n        } else {\n          texteCorr = `$\\\\dfrac{${num}}{${texNombre(den)}}=\\\\dfrac{${num}{\\\\color{blue}\\\\div${den / 100}}}{${den}{\\\\color{blue}\\\\div${den / 100}}}=\\\\dfrac{${percenti}}{100}=${percenti}~\\\\%$`\n        }\n        handleAnswers(\n          this,\n          i,\n          {\n            champ1: { value: den },\n            champ2: { value: num },\n            champ3: { value: String(percenti) },\n            champ4: { value: String(percenti) },\n          },\n          { formatInteractif: 'custom', digits: 3, decimals: 0 },\n        )\n      } else {\n        this.interactifType = 'mathLive'\n        texte = `$\\\\dfrac{${percenti}}{100}= $${context.isHtml && this.interactif ? ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers, { texteApres: ' %' }) : '$\\\\ldots\\\\ldots\\\\%$'}`\n        texteCorr = `$\\\\dfrac{${texNombre(percenti, 0)}}{100}=${texNombre(percenti, 0)}~\\\\%$`\n        setReponse(this, i, percenti, {\n          formatInteractif: 'calcul',\n          digits: 3,\n          decimals: 0,\n        })\n      }\n\n      if (this.questionJamaisPosee(i, den, num)) {\n        // <- laisser le i et ajouter toutes les variables qui rendent les exercices diff√©rents (par exemple a, b, c et d)\n        // Si la question n'a jamais √©t√© pos√©e, on en cr√©e une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n\n  correctionInteractive = (i: number) => {\n    const reponseAttendue = String(\n      this.autoCorrection[i].reponse?.valeur?.champ4?.value,\n    )\n    if (this.answers === undefined) this.answers = {}\n    let result = 'KO'\n    let feedback = ''\n    const mf = document.querySelector(\n      `math-field#champTexteEx${this.numeroExercice}Q${i}`,\n    ) as MathfieldElement\n    if (mf == null) {\n      window.notify(\n        `La correction de 5N11-3 n'a pas trouv√© de mathfield d'id champTexteEx${this.numeroExercice}Q${i}`,\n        { exercice: this },\n      )\n    } else {\n      this.answers[`Ex${this.numeroExercice}Q${i}`] = mf.getValue()\n      const spanResultat = document.querySelector(\n        `span#resultatCheckEx${this.numeroExercice}Q${i}`,\n      ) as HTMLSpanElement\n      let num1 = mf.getPromptValue('champ1')\n      num1 = num1.replace(',', '.')\n      const den1 = mf.getPromptValue('champ2')\n      const num2 = mf.getPromptValue('champ3')\n      const champ4 = mf.getPromptValue('champ4')\n      let test1: boolean = true\n      let test1Bis: boolean = true\n      if (num1 !== '' && den1 !== '') {\n        test1 =\n          (num1.includes('\\\\times')\n            ? ce\n                .parse(\n                  `\\\\frac{${Number(num1.split('\\\\times')[0]) * (Number(num1.split('\\\\times')[1]) ?? 1)}}{${Number(den1.split('\\\\times')[0]) * (Number(den1.split('\\\\times')[1]) ?? 1)}}`,\n                  { canonical: true },\n                )\n                .isEqual(ce.parse(`\\\\frac{${reponseAttendue}}{100}`))\n            : ce\n                .parse(\n                  `\\\\frac{${Number(num1.split('\\\\div')[0]) * (Number(num1.split('\\\\div')[1]) ?? 1)}}{${Number(den1.split('\\\\div')[0]) * (Number(den1.split('\\\\div')[1]) ?? 1)}}`,\n                  { canonical: true },\n                )\n                .isEqual(ce.parse(`\\\\frac{${reponseAttendue}}{100}`))) ?? false\n        test1Bis = ce.parse(den1).isEqual(ce.parse('100')) ?? false\n      }\n      if (num2 === '') {\n        feedback +=\n          'Il faut saisir un num√©rateur pour la fraction sur $100$.<br>'\n      }\n      if (champ4 === '') {\n        feedback += 'Le r√©sultat final est obligatoire.<br>'\n      }\n      const test1Ter = den1 === '' || num1 === ''\n      const test2 = ce.parse(num2).isSame(ce.parse(reponseAttendue))\n      const test3 = ce.parse(champ4).isSame(ce.parse(reponseAttendue))\n      let smiley\n      if (test2 && test3) {\n        smiley = 'üòé'\n        result = 'OK'\n        if (test1) {\n          // On a bon, mais regardons le premier calcul facultatif ici il est correct\n          if (!test1Bis) {\n            // pas √©gal √† 100 au d√©nominateur\n            feedback +=\n              'La premi√®re fraction est correcte mais le d√©nominateur ne vaut pas $100$.'\n          }\n          // sinon, il n'y a rien a dire.\n        } else {\n          // le premier calcul est faux, il faut le dire\n          if (test1Ter) {\n            feedback += 'La premi√®re fraction est incompl√®te.'\n          } else {\n            feedback += 'La premi√®re fraction est incorrecte.'\n          }\n        }\n      } else {\n        // ici le r√©sultat est faux (ou la fraction sur 100)\n        smiley = '‚òπÔ∏è'\n        result = 'KO'\n        if (test1Ter) {\n          feedback += 'La premi√®re fraction est incompl√®te'\n        } else {\n          if (test1) {\n            // On regarde le premier calcul ici il est juste\n            if (!test1Bis) {\n              // pas √©gal √† 100 au d√©nominateur\n              feedback +=\n                'La premi√®re fraction est correcte mais le d√©nominateur ne vaut pas $100$'\n            } else {\n              feedback += 'La premi√®re fraction est correcte'\n            }\n          } else {\n            feedback += 'La premi√®re fraction est incorrecte'\n          } // ici, le premier calcul est faux donc tout est faux, y a rien a dire\n        }\n        feedback += ' et au moins un des r√©sultats finaux est faux.'\n      }\n      const divDuFeedback = document.querySelector(\n        `div#feedbackEx${this.numeroExercice}Q${i}`,\n      ) as HTMLDivElement\n      spanResultat.innerHTML = smiley\n      if (divDuFeedback) {\n        divDuFeedback.innerHTML = feedback\n        spanResultat.after(divDuFeedback)\n        divDuFeedback.style.display = 'block'\n      }\n      mf.setPromptState('champ1', test1 ? 'correct' : 'incorrect', true)\n      mf.setPromptState('champ2', test1 ? 'correct' : 'incorrect', true)\n      mf.setPromptState('champ3', test2 ? 'correct' : 'incorrect', true)\n      mf.setPromptState('champ4', test3 ? 'correct' : 'incorrect', true)\n    }\n    return result\n  }\n}\n"],"names":["titre","interactifReady","interactifType","amcType","amcReady","dateDePublication","dateDeModifImportante","ce","ComputeEngine","uuid","refs","FractionVersPourcentage","Exercice","__publicField","i","reponseAttendue","_c","_b","_a","result","feedback","mf","spanResultat","num1","den1","num2","champ4","test1","test1Bis","test1Ter","test2","test3","smiley","divDuFeedback","listeTypeDeQuestions","combinaisonListes","texte","texteCorr","percenti","den","num","cpt","choice","randint","remplisLesBlancs","texNombre","handleAnswers","context","ajouteChampTexteMathLive","KeyboardType","setReponse","listeQuestionsToContenu"],"mappings":"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"}