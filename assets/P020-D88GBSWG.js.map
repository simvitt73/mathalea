{"version":3,"file":"P020-D88GBSWG.js","sources":["../../src/exercices/profs/P020.ts"],"sourcesContent":["import { tableauColonneLigne } from '../../lib/2d/tableau'\nimport { choice, shuffle } from '../../lib/outils/arrayOutils'\nimport {\n  contraindreValeur,\n  listeQuestionsToContenu,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Décoder un message avec les tables de multiplication'\n\nexport const refs = {\n  'fr-fr': ['P020'],\n  'fr-ch': [],\n}\nexport const uuid = 'de353'\nconst tableauDesCaracteres = Array.from(\n  \"-xçwjè,k~:aq«rlgdmftbéocsà.êeipzhu'ynvî»â!\",\n)\nconst enteteColonnes = [\n  '\\\\times',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  '10',\n]\n\nfunction produitPourCaractere(car: string, map: Map<number, string>): number {\n  const liste = map.entries()\n  for (const paire of liste) {\n    if (paire[1] === car) return paire[0]\n  }\n  return NaN\n}\nexport default class EncodeurTexte extends Exercice {\n  besoinCorrection: boolean\n  type: string\n  constructor(type = 'générateur') {\n    super()\n    this.consigne =\n      'Choisir un texte à encoder dans le formulaire en paramètre.'\n    this.besoinFormulaireTexte = [\n      'Texte à encoder (liste de mots ou de phrases séparés par /',\n      '',\n    ]\n    this.besoinFormulaire2CaseACocher = [\n      'Grille différente pour chaque morceau',\n      false,\n    ]\n    this.sup = 'mathématiques'\n    this.sup2 = false\n    this.nbQuestions = 1\n    this.besoinCorrection = false\n    this.type = type\n  }\n\n  nouvelleVersion() {\n    const enteteLignes = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10']\n    const listeDeMots = [\n      'mathématiques',\n      'diviseur',\n      'multiple',\n      'médiatrice',\n      'milieu',\n      'parallèle',\n      'perpendiculaire',\n      'multiplication',\n      'addition',\n      'soustraction',\n      'division',\n      'addition',\n      'cercle',\n      'histogramme',\n      'diagramme',\n      'numération',\n      'fraction',\n      'égalité',\n      'propriété',\n      'contre-exemple',\n    ]\n    const listeDePhrases = [\n      \"Les mathématiques/c'est fantastique\",\n      'multiplier et diviser/se fait avant/additionner ou soustraire',\n      'être supérieur/à un nombre signifie/être plus grand que ce nombre',\n      'Il faut toujours/vérifier la cohérence/de ses résultats',\n      'Pour tracer des/droites ou des segments/on utilise une règle',\n      'Pour tracer des/droites perpendiculaires/utilise ton équerre',\n    ]\n    this.sup3 = contraindreValeur(1, 3, this.sup3, 1)\n\n    if (this.type === 'exo') {\n      switch (this.sup3) {\n        case 1:\n          this.sup = choice(listeDeMots)\n          break\n        case 2:\n          this.sup = choice(listeDePhrases).replaceAll('/', ' ')\n          this.sup2 = false\n          break\n        case 3:\n          this.sup = choice(listeDePhrases)\n          this.sup2 = true\n          break\n      }\n    }\n    const texteAEncoder = this.sup.replaceAll(' ', '~').split('/') // On récupère la saisie du formulaire ou du choix aléatoire si c'est un exo\n    this.nbQuestions = texteAEncoder.length\n    for (let j = 0; j < this.nbQuestions; j++) {\n      texteAEncoder[j] = texteAEncoder[j].toLowerCase()\n    }\n    for (\n      let i = 0, texte, positionCourante, tabCar, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      const table: string[][] = []\n      const associations: Map<number, string> = new Map()\n      if (i === 0 || this.sup2) {\n        // on mélange les caractères pour la première question ou à chaque question si sup2=true\n        // objet qui contiendra des associations : '12' : 'a'\n        positionCourante = 0\n        tabCar = shuffle(tableauDesCaracteres) // On mélange les caractères à disposition pour changer de grille à chaque fois\n        // On initialise la grille (table) de 100 cases qui contiendra les caractères.\n        for (let j = 0; j < 10; j++) {\n          table[j] = []\n          for (let k = 0, produit; k < 10; k++) {\n            produit = (j + 1) * (k + 1) // La table js est indicée de 0 à 9 donc on ajoute 1 pour avoir le facteur correspondant.\n\n            if (!associations.has(produit)) {\n              // Ce produit n'est pas déjà associé\n              associations.set(produit, tabCar[positionCourante]) // on lui associe le caractère courant\n              positionCourante++ // On se positionne sur le caractère suivant n'ayant pas encore été assigné\n            }\n            table[j][k] = String(associations.get(produit)) // on ajoute le caractère dans la table.\n          }\n        }\n        texte = `${tableauColonneLigne(\n          enteteColonnes,\n          enteteLignes,\n          table.flat().map((c) => `\\\\large \\\\textbf{${c}}`),\n          1.3,\n          false,\n          this.numeroExercice,\n          i,\n          false,\n        )}`\n      } else {\n        texte = ''\n      }\n      texte +=\n        \"<br><br>À l'aide de la table ci-dessus, décoder le message suivant :<br>\"\n      for (let j = 0; j < texteAEncoder[i].length; j++) {\n        texte += `${produitPourCaractere(texteAEncoder[i][j], associations)} `\n      }\n      texte += '<br><br>'\n\n      if (\n        this.questionJamaisPosee(i, texteAEncoder[i], table.flat().join(''))\n      ) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteAEncoder[i]\n          .replaceAll('~', ' ')\n          .replaceAll('/', ' ')\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","refs","uuid","tableauDesCaracteres","enteteColonnes","produitPourCaractere","car","map","liste","paire","EncodeurTexte","Exercice","type","__publicField","enteteLignes","listeDeMots","listeDePhrases","contraindreValeur","choice","texteAEncoder","j","i","texte","positionCourante","tabCar","cpt","table","associations","shuffle","k","produit","tableauColonneLigne","c","listeQuestionsToContenu"],"mappings":"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"}