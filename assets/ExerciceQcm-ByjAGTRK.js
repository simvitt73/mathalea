var E=Object.defineProperty;var A=(h,c,n)=>c in h?E(h,c,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[c]=n;var i=(h,c,n)=>A(h,typeof c!="symbol"?c+"":c,n);import{E as y,P as C,u as $,a1 as g,aR as L}from"./index-Bl1vqpvV.js";import{c as R}from"./lists-Cb1jXPcV.js";const D=h=>new Set(h).size;class J extends y{constructor(){super();i(this,"versionQcm");i(this,"versionQcmDisponible",!0);i(this,"enonce");i(this,"reponses");i(this,"bonnesReponses");i(this,"corrections");i(this,"options");i(this,"ajouteQcmCorr",!1);i(this,"versionAleatoire");i(this,"versionOriginale");this.besoinFormulaire2CaseACocher=["Consigne augmentée",!1],this.sup2=!1,this.nbQuestions=1,this.nbQuestionsModifiable=!1,this.spacingCorr=2,this.options={vertical:!1,ordered:!1,lastChoice:8},this.enonce="",this.reponses=[],this.correction=""}nouvelleVersion(){var d;this.sup2?this.consigne=this.bonnesReponses==null?`Parmi les ${this.reponses.length} réponses ci-dessous, une seule est correcte.<br>
${this.interactif||C.isAmc?"Cocher la case correspondante":"Donner la lettre correspondante"}${this.sup4?", ou choisir « Je ne sais pas ».":"."}`:`Parmi les ${this.reponses.length} réponses ci-dessous, il peut y avoir plusieurs bonnes réponses.<br>
${this.interactif||C.isAmc?"Cocher la (ou les) case(s) correspondante(s)":"Donner la (ou les) lettre(s) correspondante(s)"}${this.sup4?", ou choisir « Je ne sais pas ».":"."}`:this.consigne="";const n=[];if(this.bonnesReponses==null)n.fill(!1,0,this.reponses.length-1),n[0]=!0;else for(let s=0;s<this.reponses.length;s++)n[s]=this.bonnesReponses[s]??!1;if(this.versionAleatoire!=null)for(let s=0,p=0;s<this.nbQuestions&&p<30;){this.sup&&this.versionOriginale!=null?this.versionOriginale():this.versionAleatoire();const m=this.reponses[0];if(this.questionJamaisPosee(s,m)){let a=this.enonce;this.autoCorrection[s]={},this.options!=null&&(this.autoCorrection[s].options={...this.options});const e=this.autoCorrection[s];e.propositions=[];for(let t=0;t<this.reponses.length;t++)e.propositions.push({texte:this.reponses[t],statut:n[t]});this.sup4&&(e.propositions.push({texte:"Je ne sais pas",statut:!1}),e.options&&(e.options.lastChoice=this.reponses.length-1));const u=["A","B","C","D","E","F","G","H","I","J"].slice(0,this.reponses.length),l=$(this,s,{style:"margin:0 3px 0 3px;",format:this.interactif?"case":"lettre"});a+=`<br>${l.texte}`;let b;if(this.corrections&&e.propositions!=null){this.correction="";const t=new Array(this.reponses.length),o=e.propositions;for(let r=0;r<this.reponses.length;r++){const x=this.reponses.findIndex(Q=>Q===o[r].texte);this.corrections[x]!=null&&this.corrections[x]!==""&&(t[r]=`réponse ${u[r]} : ${this.corrections[x]}${C.isHtml?o[r].statut?"✅":"❌":o[r].statut?"${\\bf \\color[cmyk]{.63,.23,.93,.06}\\boldsymbol{\\checkmark}}$":"${\\bf \\color[rgb]{1,.1,.1}\\boldsymbol{\\times}}$"}<br>`)}const f=t.filter(r=>r!=null&&r!=="");f.length!==0?this.correction=R({items:f,style:"fleches"}):this.correction+=this.correction.endsWith("\\end{tikzpicture}")?`

`:this.correction!==""?"<br>":""}else this.correction+=(d=this.correction)!=null&&d.endsWith("\\end{tikzpicture}")?`

`:this.correction!==""?"<br>":"";if(this.ajouteQcmCorr&&(this.correction+=`<br>${l.texteCorr}`),this.bonnesReponses){const t=e.propositions.map((o,f)=>Object.assign({},{prop:o,index:f})).filter(o=>o.prop.statut).map(o=>u[o.index]);b=`Les bonnes réponses sont les réponses ${g(t.join(" ; "))}.`}else{const t=u[e.propositions.findIndex(o=>o.statut)];b=`La bonne réponse est la réponse ${g(t)}.`}const v=`${this.correction}${this.interactif?"":b}`;this.listeQuestions[s]=a,this.listeCorrections[s]=v,s++}if(p++,this.sup)break}else{this.versionOriginale!=null&&this.versionOriginale();let s=this.enonce;this.autoCorrection[0]={},this.options!=null&&(this.autoCorrection[0].options={...this.options});const p=this.autoCorrection[0];p.propositions=[];for(let l=0;l<this.reponses.length;l++)p.propositions.push({texte:this.reponses[l],statut:n[l]});const m=["A","B","C","D","E","F","G","H","I","J"].slice(0,this.reponses.length),a=$(this,0,{style:"margin:0 3px 0 3px;",format:this.interactif?"case":"lettre"});s+=`<br>${a.texte}`,this.ajouteQcmCorr&&(this.correction+=`<br>${a.texteCorr}`);const e=m[p.propositions.findIndex(l=>l.statut)],u=`${this.correction}<br>${this.interactif?"":`La bonne réponse est la réponse ${g(e)}.`}`;this.listeQuestions[0]=s,this.listeCorrections[0]=u}}qcmCamExport(){return L(this)}}export{J as E,D as n};
//# sourceMappingURL=ExerciceQcm-ByjAGTRK.js.map
