{"version":3,"file":"AfficheCoteSegment-nB4NDJiu.js","sources":["../../src/lib/2d/AfficheCoteSegment.ts"],"sourcesContent":["import { afficheLongueurSegment } from './afficheLongueurSegment'\nimport { fixeBordures } from './fixeBordures'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { placeLatexSurSegment } from './placeLatexSurSegment'\nimport { Segment, segment } from './segmentsVecteurs'\nimport { texteSurSegment } from './texteSurSegment'\nimport { similitude, translation } from './transformations'\nimport { longueur } from './utilitairesGeometriques'\nimport { vecteur } from './Vecteur'\nimport { Vide2d } from './Vide2d'\n\n/**\n * Affiche la côte d'un segment sous la forme d'une flèche à double sens et d'une valeur associée.\n * @param {Segment} s Segment pour lequel on affiche la côte\n * @param {string} [Cote=''] Si '', alors la longueur en cm est affichée, sinon c'est cette valeur qui s'affiche (et cela peut être une variable).\n * @param {number} [positionCote = 0.5] Position de la flèche par rapport au segment. Valeur négative ou positive selon la position voulue.\n * @param {string} [couleurCote='black'] Couleur de la flèche  : du type 'blue' ou du type '#f15929'.\n * @param {number} [epaisseurCote=1] Epaisseur de la flèche.\n * @param {number} [positionValeur=0.5] Position de la valeur par rapport à la flèche. Valeur négative ou positive selon la position voulue.\n * @param {string} [couleurValeur='black']  Couleur de la valeur indiquée : du type 'blue' ou du type '#f15929'.\n * @param {boolean} [horizontal=false]  Si true, alors le texte est horizontal, sinon le texte est parallèle au segment.\n * @property {string} svg Sortie au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} tikz Sortie au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @author Jean-Claude Lhote\n * @class\n */\n// JSDOC Validee par EE Juin 2022\n\nexport class AfficheCoteSegment extends ObjetMathalea2D {\n  Cote: any\n  constructor(\n    s: Segment,\n    Cote = '',\n    positionCote = 0.5,\n    couleurCote = 'black',\n    epaisseurCote = 1,\n    positionValeur = 0.5,\n    couleurValeur = 'black',\n    horizontal = false,\n  ) {\n    super()\n    let valeur\n    const A = s.extremite1\n    const B = s.extremite2\n\n    const v = similitude(vecteur(A, B), A, 90, positionCote / s.longueur)\n    const cote = segment(translation(A, v), translation(B, v), couleurCote)\n    if (longueur(A, B) > 1) cote.styleExtremites = '<->'\n    else cote.styleExtremites = '>-<'\n    cote.epaisseur = epaisseurCote\n    if (Cote.length === 0) {\n      valeur = afficheLongueurSegment(\n        cote.extremite1,\n        cote.extremite2,\n        couleurValeur,\n        positionValeur,\n        'cm',\n        horizontal,\n      )\n    }\n    if (Cote.includes('\\\\')) {\n      valeur = placeLatexSurSegment(Cote, cote.extremite1, cote.extremite2, {\n        distance: positionValeur,\n        horizontal,\n        letterSize: 'normalsize',\n        color: couleurValeur,\n      })\n    } else {\n      valeur = texteSurSegment(\n        String(Cote).replace('.', ','), // Pour les pays utilisant la virgule comme séparateur décimal\n        cote.extremite1,\n        cote.extremite2,\n        couleurValeur,\n        positionValeur,\n        horizontal,\n      )\n    }\n    const { xmin, xmax, ymin, ymax } = fixeBordures([cote, valeur])\n    this.bordures = [xmin, ymin, xmax, ymax]\n    this.objets = [cote, valeur]\n  }\n\n  svg(coeff: number) {\n    let code = ''\n    if (this.objets == null) return code\n    this.objets.forEach((objet) => {\n      objet.opacite = this.opacite\n    })\n    for (const objet of this.objets) code += '\\n\\t' + objet.svg(coeff)\n    return code\n  }\n\n  tikz() {\n    let code = ''\n    if (this.objets == null) return code\n    this.objets.forEach((objet) => {\n      objet.opacite = this.opacite\n    })\n    for (const objet of this.objets) code += '\\n\\t' + objet.tikz()\n    return code\n  }\n}\n/**\n * Affiche la côte d'un segment sous la forme d'une flèche à double sens et d'une valeur associée.\n * @param {Segment} s Segment pour lequel on affiche la côte\n * @param {string} [Cote=''] Si '', alors la longueur en cm est affichée, sinon c'est cette valeur qui s'affiche (et cela peut être une variable).\n * @param {number} [positionCote = 0.5] Position de la flèche par rapport au segment. Valeur négative ou positive selon la position voulue.\n * @param {string} [couleurCote='black'] Couleur de la flèche  : du type 'blue' ou du type '#f15929'.\n * @param {number} [epaisseurCote=1] Epaisseur de la flèche.\n * @param {number} [positionValeur=0.5] Position de la valeur par rapport à la flèche. Valeur négative ou positive selon la position voulue.\n * @param {string} [couleurValeur='black']  Couleur de la valeur indiquée : du type 'blue' ou du type '#f15929'.\n * @param {boolean} [horizontal=false]  Si true, alors le texte est horizontal, sinon le texte est parallèle au segment.\n * @example afficheCoteSegment(s)\n * // Affiche la côte du segment s (avec une flèche noire d\\'épaisseur 1 \"cm\", placée 0.5 \"cm\" sous le segment, avec la longueur du segment, en cm, écrite en noir, 0,5 \"cm\" au-dessus, et parallèle au segment).\n * @example afficheCoteSegment(s,'x',-1,'red',2,1,'blue',true)\n * // Affiche la côte du segment s, avec une flèche rouge d\\'épaisseur 2 \"cm\", placée 1 \"cm\" sous le segment, avec le texte 'x' écrit en bleu, 1 \"cm\" au-dessus, et horizontalement.\n * @return {AfficheCoteSegment|Vide2d}\n * @author Jean-Claude Lhote\n */\n// JSDOC Validee par EE Juin 2022\n\nexport function afficheCoteSegment(\n  s: Segment,\n  Cote = '',\n  positionCote = 0.5,\n  couleurCote = 'black',\n  epaisseurCote = 1,\n  positionValeur = 0.5,\n  couleurValeur = 'black',\n  horizontal = false,\n) {\n  if (s.longueur < 1) {\n    window.notify(\n      'afficheCoteSegment : Segment trop petit pour cette fonction',\n      { s },\n    )\n    return new Vide2d(s.extremite1.x, s.extremite1.y)\n  }\n  return new AfficheCoteSegment(\n    s,\n    Cote,\n    positionCote,\n    couleurCote,\n    epaisseurCote,\n    positionValeur,\n    couleurValeur,\n    horizontal,\n  )\n}\n"],"names":["AfficheCoteSegment","ObjetMathalea2D","s","Cote","positionCote","couleurCote","epaisseurCote","positionValeur","couleurValeur","horizontal","__publicField","valeur","A","B","v","similitude","vecteur","cote","segment","translation","longueur","afficheLongueurSegment","placeLatexSurSegment","texteSurSegment","xmin","xmax","ymin","ymax","fixeBordures","coeff","code","objet","afficheCoteSegment","Vide2d"],"mappings":"gqBA4BO,MAAMA,UAA2BC,CAAgB,CAEtD,YACEC,EACAC,EAAO,GACPC,EAAe,GACfC,EAAc,QACdC,EAAgB,EAChBC,EAAiB,GACjBC,EAAgB,QAChBC,EAAa,GACb,CACA,MAAA,EAXFC,EAAA,aAYE,IAAIC,EACJ,MAAMC,EAAIV,EAAE,WACNW,EAAIX,EAAE,WAENY,EAAIC,EAAWC,EAAQJ,EAAGC,CAAC,EAAGD,EAAG,GAAIR,EAAeF,EAAE,QAAQ,EAC9De,EAAOC,EAAQC,EAAYP,EAAGE,CAAC,EAAGK,EAAYN,EAAGC,CAAC,EAAGT,CAAW,EAClEe,EAASR,EAAGC,CAAC,EAAI,IAAQ,gBAAkB,QACrC,gBAAkB,MAC5BI,EAAK,UAAYX,EACbH,EAAK,SAAW,IAClBQ,EAASU,EACPJ,EAAK,WACLA,EAAK,WACLT,EACAD,EACA,KACAE,CAAA,GAGAN,EAAK,SAAS,IAAI,EACpBQ,EAASW,EAAqBnB,EAAMc,EAAK,WAAYA,EAAK,WAAY,CACpE,SAAUV,EACV,WAAAE,EACA,WAAY,aACZ,MAAOD,CAAA,CACR,EAEDG,EAASY,EACP,OAAOpB,CAAI,EAAE,QAAQ,IAAK,GAAG,EAC7Bc,EAAK,WACLA,EAAK,WACLT,EACAD,EACAE,CAAA,EAGJ,KAAM,CAAE,KAAAe,EAAM,KAAAC,EAAM,KAAAC,EAAM,KAAAC,CAAA,EAASC,EAAa,CAACX,EAAMN,CAAM,CAAC,EAC9D,KAAK,SAAW,CAACa,EAAME,EAAMD,EAAME,CAAI,EACvC,KAAK,OAAS,CAACV,EAAMN,CAAM,CAC7B,CAEA,IAAIkB,EAAe,CACjB,IAAIC,EAAO,GACX,GAAI,KAAK,QAAU,KAAM,OAAOA,EAChC,KAAK,OAAO,QAASC,GAAU,CAC7BA,EAAM,QAAU,KAAK,OACvB,CAAC,EACD,UAAWA,KAAS,KAAK,UAAgB;AAAA,GAASA,EAAM,IAAIF,CAAK,EACjE,OAAOC,CACT,CAEA,MAAO,CACL,IAAIA,EAAO,GACX,GAAI,KAAK,QAAU,KAAM,OAAOA,EAChC,KAAK,OAAO,QAASC,GAAU,CAC7BA,EAAM,QAAU,KAAK,OACvB,CAAC,EACD,UAAWA,KAAS,KAAK,OAAQD,GAAQ;AAAA,GAASC,EAAM,KAAA,EACxD,OAAOD,CACT,CACF,CAoBO,SAASE,EACd9B,EACAC,EAAO,GACPC,EAAe,GACfC,EAAc,QACdC,EAAgB,EAChBC,EAAiB,GACjBC,EAAgB,QAChBC,EAAa,GACb,CACA,OAAIP,EAAE,SAAW,GACf,OAAO,OACL,8DACA,CAAE,EAAAA,CAAA,CAAE,EAEC,IAAI+B,EAAO/B,EAAE,WAAW,EAAGA,EAAE,WAAW,CAAC,GAE3C,IAAIF,EACTE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,CAAA,CAEJ"}