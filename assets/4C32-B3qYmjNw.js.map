{"version":3,"file":"4C32-B3qYmjNw.js","sources":["../../src/exercices/4e/4C32.ts"],"sourcesContent":["/**\n * ⚠️ Cet exercice est utilisé dans le test : tests/e2e/tests/interactivity/mathLive.ecritureScientifique.test.ts ⚠️\n */\n\nimport Decimal from 'decimal.js'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { sp } from '../../lib/outils/outilString'\nimport {\n  scientifiqueToDecimal,\n  stringNombre,\n  texNombre,\n} from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport {\n  handleAnswers,\n  setReponse,\n} from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\n\nexport const titre = 'Associer un nombre décimal à sa notation scientifique'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\n\n/**\n * Écrire un nombre décimal en notation scientifique et inversement\n * @author Jean-Claude Lhote\n */\n\nexport const uuid = 'a0d17'\n\nexport const refs = {\n  'fr-fr': ['4C32', 'BP2AutoF1', '3AutoN07-2'],\n  'fr-ch': ['10NO2-16'],\n}\nexport default class NotationScientifique extends Exercice {\n  can: boolean\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Type de questions',\n      2,\n      '1 : Traduire en notation scientifique\\n2 : Traduire en notation décimale',\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Niveau de difficulté',\n      3,\n      '1 : Facile\\n2 : Moyen\\n3 : Difficile',\n    ]\n    this.besoinFormulaire3CaseACocher = ['Avec des nombres négatifs', false]\n    this.sup = 1\n    this.sup2 = 1\n    this.sup3 = false\n    this.nbQuestions = 5\n    this.interactif = false\n    this.can = false\n  }\n\n  nouvelleVersion() {\n    Decimal.set({ toExpNeg: -15, toExpPos: 20 })\n    let reponse\n    if (this.sup === 1)\n      this.consigne =\n        this.nbQuestions === 1\n          ? 'Donner la notation scientifique du nombre suivant.'\n          : 'Donner la notation scientifique des nombres suivants.'\n    else\n      this.consigne =\n        this.nbQuestions === 1\n          ? \"Donner l'écriture décimale du nombre suivant.\"\n          : \"Donner l'écriture décimale des nombres suivants.\"\n    let typesDeQuestionsDisponibles\n    if (this.sup2 === 1) typesDeQuestionsDisponibles = [0, 0, 0, 1, 1]\n    else if (this.sup2 === 2) typesDeQuestionsDisponibles = [0, 1, 1, 2, 2]\n    else typesDeQuestionsDisponibles = [2, 2, 3, 3, 3]\n\n    const listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    )\n    for (\n      let i = 0,\n        texteAMC,\n        texte,\n        texteCorr,\n        mantisse,\n        exp,\n        decimalstring,\n        scientifiquestring,\n        cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      const signe = this.sup3 ? choice([-1, 1]) : 1\n      switch (listeTypeDeQuestions[i]) {\n        case 0:\n          mantisse = new Decimal(randint(1, 9))\n          if (!context.isAmc) {\n            exp = randint(1, 5)\n          } else {\n            exp = randint(1, 3)\n          }\n\n          break\n        case 1:\n          mantisse = new Decimal(randint(11, 99)).div(10)\n          if (!context.isAmc) {\n            exp = randint(1, 5)\n          } else {\n            exp = randint(1, 3)\n          }\n          break\n        case 2:\n          if (choice([false, true]))\n            mantisse = new Decimal(randint(111, 999)).div(100)\n          else\n            mantisse = new Decimal(randint(1, 9))\n              .plus(randint(1, 9) * 100)\n              .div(100)\n          if (!context.isAmc) {\n            exp = randint(1, 7) * choice([-1, 1])\n          } else {\n            exp = randint(1, 3) * choice([-1, 1])\n          }\n          break\n        case 3:\n        default:\n          if (choice([true, false]))\n            mantisse = new Decimal(randint(1, 19) * 5)\n              .plus(randint(1, 9) * 1000)\n              .div(1000)\n          else mantisse = new Decimal(randint(1111, 9999)).div(1000)\n          if (!context.isAmc) {\n            exp = randint(1, 7) * choice([-1, 1])\n          } else {\n            exp = randint(1, 3) * choice([-1, 1])\n          }\n\n          break\n      }\n\n      scientifiquestring = `${texNombre(mantisse.mul(signe), 8)}\\\\times 10^{${exp}}`\n      decimalstring = scientifiqueToDecimal(mantisse.mul(signe).toNumber(), exp)\n\n      if (this.sup === 1) {\n        reponse = `${stringNombre(mantisse.mul(signe), 8)}e${exp}`\n        texteAMC = `$${decimalstring}$`\n        texteCorr = `$${decimalstring} = ${miseEnEvidence(scientifiquestring)}$`\n      } else {\n        reponse = mantisse.mul(Decimal.pow(10, exp)).mul(signe)\n        texteCorr = `$${scientifiquestring} = ${miseEnEvidence(decimalstring)}$`\n        texteAMC = `$${scientifiquestring}$`\n      }\n      texte = texteAMC + `$${sp()}=$`\n      if (this.interactif) {\n        texte += ajouteChampTexteMathLive(\n          this,\n          i,\n          '  ' +\n            (this.sup === 2\n              ? KeyboardType.clavierDeBase\n              : KeyboardType.clavierFullOperations),\n        )\n      } else {\n        texte += `$${sp()}\\\\dots$`\n      }\n\n      if (this.questionJamaisPosee(i, mantisse, exp)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n\n        if (this.sup === 1) {\n          if (context.isAmc) {\n            setReponse(\n              this,\n              i,\n              String(reponse)\n                .replace(/\\\\thickspace /g, '')\n                .replace(/ /g, ''),\n              {\n                // formatInteractif: 'ecritureScientifique',\n                digits: listeTypeDeQuestions[i] + 1,\n                decimals: listeTypeDeQuestions[i],\n                signe: false,\n                exposantNbChiffres: 1,\n                exposantSigne: true,\n                approx: 0,\n              },\n            )\n          } else {\n            handleAnswers(this, i, {\n              reponse: {\n                value: reponse,\n                options: { ecritureScientifique: true },\n              },\n            })\n          }\n        } else {\n          if (context.isAmc) {\n            setReponse(this, i, reponse, {\n              // formatInteractif: 'nombreDecimal',\n              decimals: Math.max(0, listeTypeDeQuestions[i] - exp),\n            })\n          } else {\n            handleAnswers(this, i, { reponse: { value: reponse } })\n          }\n        }\n\n        if (context.isAmc) {\n          texteAMC += '.'\n          // @ts-expect-error\n          this.autoCorrection[i].reponse.valeur = [\n            mantisse.mul(Decimal.pow(10, exp)).toString(),\n          ]\n          if (this.sup === 1) {\n            this.amcType = 'AMCNum'\n            this.autoCorrection[i].enonce =\n              'Donner la notation scientifique du nombre ' + texteAMC\n          } else {\n            this.amcType = 'qcmMono'\n            this.autoCorrection[i].enonce =\n              \"Donner l'écriture décimale du nombre \" + texteAMC\n            this.autoCorrection[i].options = {\n              ordered: false,\n              lastChoice: 5,\n            }\n            this.autoCorrection[i].propositions = [\n              {\n                texte: `$${decimalstring}$`,\n                statut: true,\n              },\n              {\n                texte: `$${texNombre(mantisse.mul(Decimal.pow(10, exp - 1)).mul(signe), 20)}$`,\n                statut: false,\n              },\n              {\n                texte: `$${texNombre(mantisse.mul(Decimal.pow(10, exp + 1)).mul(signe), 20)}$`,\n                statut: false,\n              },\n              {\n                texte: `$${texNombre(mantisse.mul(Decimal.pow(10, -exp)).mul(signe), 20)}$`,\n                statut: false,\n              },\n            ]\n          }\n        }\n        i++\n      }\n      cpt++\n    }\n    if (this.can) {\n      this.listeQuestions[0] = `${this.consigne.substring(0, this.consigne.length - 1)} : ${this.listeQuestions[0]}`\n      this.consigne = ''\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","uuid","refs","NotationScientifique","Exercice","__publicField","Decimal","reponse","typesDeQuestionsDisponibles","listeTypeDeQuestions","combinaisonListes","texteAMC","texte","texteCorr","mantisse","exp","decimalstring","scientifiquestring","cpt","signe","choice","randint","context","texNombre","scientifiqueToDecimal","stringNombre","miseEnEvidence","sp","ajouteChampTexteMathLive","KeyboardType","setReponse","handleAnswers","listeQuestionsToContenu"],"mappings":"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"}