{"version":3,"file":"1A-P05-3-CHkLH2ku.js","sources":["../../src/exercices/1e/1A-P05-3.ts"],"sourcesContent":["import { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { Arbre } from '../../modules/arbres'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { randint } from '../../modules/outils'\nimport ExerciceQcmA from '../ExerciceQcmA'\nexport const dateDePublication = '10/08/2025'\nexport const uuid = '24438'\n// Author Stéphane Guyon\nexport const refs = {\n  'fr-fr': ['1A-P05-3'],\n  'fr-ch': ['3mP1-2'],\n}\nexport const interactifReady = true\nexport const interactifType = 'qcm'\nexport const amcReady = 'true'\nexport const amcType = 'qcmMono'\nexport const titre = 'Déterminer une probabilité conditionnelle'\nexport default class auto1AP3c extends ExerciceQcmA {\n  versionOriginale: () => void = () => {\n    let objets = []\n    const rationnel = true\n\n    const omega = new Arbre({\n      racine: true,\n      rationnel,\n      nom: '',\n      proba: 1,\n      visible: false,\n      alter: '',\n      enfants: [\n        new Arbre({\n          rationnel,\n          nom: 'A',\n          proba: 0.3,\n          enfants: [\n            new Arbre({\n              rationnel,\n              nom: 'C',\n              proba: 0.6,\n            }),\n            new Arbre({\n              rationnel,\n              nom: '\\\\bar C',\n              proba: 0.4,\n            }),\n          ],\n        }),\n        new Arbre({\n          rationnel,\n          nom: '\\\\bar A',\n          proba: 0.7,\n          enfants: [\n            new Arbre({\n              rationnel,\n              nom: 'C',\n              proba: 0.4,\n              visible: true,\n              // alter: 'x'\n            }),\n            new Arbre({\n              rationnel,\n              nom: '\\\\bar C',\n              proba: 0.6,\n              visible: true,\n              alter: '',\n            }),\n          ],\n        }),\n      ],\n    })\n\n    omega.setTailles() // On calcule les tailles des arbres.\n    objets = omega.represente(0, 6, 0, 3, true, 1, 8)\n\n    let distracteur2: number\n    let distracteur3: number\n    // Génère distracteur2 différent de distracteur1 et de la bonne réponse\n\n    this.enonce = \"On donne l'arbre de probabilités ci-dessous :<br>\"\n    this.enonce += mathalea2d(\n      Object.assign({ style: 'inline' }, fixeBordures(objets)),\n      objets,\n    )\n    this.enonce += '<br>$p_C(A)=\\\\ldots$'\n    this.correction = `On sait que $ P_C(A)=\\\\dfrac{P(A \\\\cap C)}{P(C)}$<br>\n        D'après la formule des probabilités totales :<br>\n         $\\\\begin{aligned}P(C)&=p(A\\\\cap C)+p(\\\\bar A \\\\cap C)\\\\\\\\\n         &=P(A)\\\\times P_A(C)+P(\\\\bar A)\\\\times P_{\\\\bar A}(C)\\\\\\\\\n         &=${texNombre(0.3)}\\\\times ${texNombre(0.6)}+${texNombre(0.7)}\\\\times ${texNombre(0.4)}\\\\\\\\\n         &=${texNombre(0.18)}+${texNombre(0.28)}\\\\\\\\\n            &=${texNombre(0.46)}\\\\\\\\\n            \\\\end{aligned}$<br>\n         <br>$\\\\begin{aligned}\n    P_C(A)&=\\\\dfrac{P(A \\\\cap C)}{P(C)}\\\\\\\\\n    &=\\\\dfrac{P(A)\\\\times P_A(C)}{P(C)}\\\\\\\\\n    &=\\\\dfrac{${texNombre(0.18)}}{${texNombre(0.46)}}\\\\\\\\\n   &=\\\\dfrac{9}{23}\n     \\\\end{aligned}$`\n\n    this.reponses = [\n      '$\\\\dfrac{9}{23}$',\n      '$\\\\dfrac{11}{23}$ ',\n      '$\\\\dfrac{13}{23}$ ',\n      '$\\\\dfrac{9}{50}$ ',\n    ]\n  }\n\n  versionAleatoire = () => {\n    let objets = []\n    const rationnel = true\n    const NumA = randint(1, 9)\n    const DenA = 10\n    const NumAC = randint(1, 9)\n    const DenAC = 10\n    const NumBC = randint(2, 8)\n    const DenBC = 10\n    const pA = new FractionEtendue(NumA, DenA)\n    const pAC = new FractionEtendue(NumAC, DenAC)\n    const pBC = new FractionEtendue(NumBC, DenBC)\n\n    // On définit l'arbre complet\n    const omega = new Arbre({\n      racine: true,\n      rationnel,\n      nom: '',\n      proba: 1,\n      visible: false,\n      alter: '',\n      enfants: [\n        new Arbre({\n          rationnel,\n          nom: 'A',\n          proba: pA,\n          enfants: [\n            new Arbre({\n              rationnel,\n              nom: 'C',\n              proba: pAC,\n            }),\n            new Arbre({\n              rationnel,\n              nom: '\\\\bar C',\n              proba: pAC.entierMoinsFraction(1),\n            }),\n          ],\n        }),\n        new Arbre({\n          rationnel,\n          nom: '\\\\bar A',\n          proba: pA.entierMoinsFraction(1),\n          enfants: [\n            new Arbre({\n              rationnel,\n              nom: 'C',\n              proba: pBC,\n              visible: true,\n              // alter: 'x'\n            }),\n            new Arbre({\n              rationnel,\n              nom: '\\\\bar C',\n              proba: pBC.entierMoinsFraction(1),\n              visible: true,\n              alter: '',\n            }),\n          ],\n        }),\n      ],\n    })\n\n    omega.setTailles() // On calcule les tailles des arbres.\n    objets = omega.represente(0, 6, 0, 3, true, 1, 8)\n    const pC1 = pA.produitFraction(pAC)\n    const pC2 = pA.entierMoinsFraction(1).produitFraction(pBC)\n    const pC = pC1.sommeFraction(pC2) // On a calculé p(C)\n    const Reponse = pC1.diviseFraction(pC)\n    // Génère distracteur2 différent de distracteur1 et de la bonne réponse\n\n    this.enonce = \"On donne l'arbre de probabilités ci-dessous :<br>\"\n    this.enonce += mathalea2d(\n      Object.assign({ style: 'inline' }, fixeBordures(objets)),\n      objets,\n    )\n    this.enonce += '<br>$P_C(A)=\\\\ldots$'\n    const resultat = Reponse.texFractionSimplifiee\n\n    this.correction = `On sait que $ P_C(A)=\\\\dfrac{P(A \\\\cap C)}{P(C)}$<br>\n        D'après la formule des probabilités totales :<br>\n         $\\\\begin{aligned}P(C)&=p(A\\\\cap C)+p(\\\\bar A \\\\cap C)\\\\\\\\\n         &=P(A)\\\\times P_A(C)+P(\\\\bar A)\\\\times P_{\\\\bar A}(C)\\\\\\\\\n         &=${pA.texFractionSimplifiee}\\\\times ${pAC.texFractionSimplifiee}+${pA.entierMoinsFraction(1).texFractionSimplifiee}\\\\times ${pBC.texFractionSimplifiee}\\\\\\\\\n         &=${pC1.texFractionSimplifiee}+${pC2.texFractionSimplifiee}\\\\\\\\\n            &=${pC.texFractionSimplifiee}\\\\\\\\\n            \\\\end{aligned}$<br>\n         <br>$\\\\begin{aligned}\n    P_C(A)&=\\\\dfrac{P(A \\\\cap C)}{P(C)}\\\\\\\\\n    &=\\\\dfrac{P(A)\\\\times P_A(C)}{P(C)}\\\\\\\\\n    &=\\\\dfrac{${pC1.texFractionSimplifiee}}{${pC.texFractionSimplifiee}}\\\\\\\\\n    &=${Reponse.texFractionSimplifiee}\\\\\\\\\n     \\\\end{aligned}$`\n    // --- Distracteurs sûrs, distincts et ≠ bonne réponse --- Merci mon ami Chat GPT pour cette astuce, devenue trop lourde car j'ai viré un distracteur....\n    const denom = Math.max(1, Reponse.denIrred) // garde-fou\n    const correct = Reponse.numIrred\n\n    // 1) Construire un pool de numérateurs candidats\n    let candidats: number[] = []\n    if (denom > 2) {\n      // Numérateurs \"classiques\" entre 1 et denom-1\n      for (let k = 1; k < denom; k++) {\n        if (k !== correct) candidats.push(k)\n      }\n    } else {\n      // Cas limites (denom = 1 ou 2) : valeurs autour de la réponse\n      candidats = [\n        correct + 1,\n        Math.max(1, correct - 1),\n        correct + 2,\n        correct + 3,\n      ]\n    }\n\n    // Déduplication et positifs\n    candidats = Array.from(new Set(candidats)).filter((n) => n > 0)\n\n    // 2) S'assurer d'avoir au moins 2 options\n    while (candidats.length < 2) {\n      const extra = correct + randint(1, 5)\n      if (!candidats.includes(extra) && extra !== correct) candidats.push(extra)\n    }\n\n    // 3) Tirer deux candidats distincts sans boucle infinie\n    const takeOne = () => {\n      const i = randint(0, candidats.length - 1)\n      return candidats.splice(i, 1)[0] // retire du pool pour garantir la distinction\n    }\n    const n1 = takeOne()\n    const n2 = takeOne()\n\n    // 4) Construire les deux distracteurs\n    const distracteur1 = new FractionEtendue(n1, denom)\n    const distracteur2 = new FractionEtendue(n2, denom)\n    this.reponses = [\n      `$${Reponse.texFractionSimplifiee} $`,\n      `$${distracteur1.texFractionSimplifiee}$ `,\n      `$${pC1.texFractionSimplifiee} $`,\n      `$${pAC.texFractionSimplifiee} $`,\n    ]\n  }\n\n  constructor() {\n    super()\n    this.versionAleatoire()\n  }\n}\nfunction Do(arg0: number) {\n  throw new Error('Function not implemented.')\n}\n"],"names":["dateDePublication","uuid","refs","interactifReady","interactifType","amcReady","amcType","titre","auto1AP3c","ExerciceQcmA","__publicField","objets","omega","Arbre","mathalea2d","fixeBordures","texNombre","NumA","randint","DenA","NumAC","DenAC","NumBC","DenBC","pA","FractionEtendue","pAC","pBC","pC1","pC2","pC","Reponse","denom","correct","candidats","k","n","extra","takeOne","i","n1","n2","distracteur1"],"mappings":"63GAOO,MAAMA,GAAoB,aACpBC,GAAO,QAEPC,GAAO,CAClB,QAAS,CAAC,UAAU,EACpB,QAAS,CAAC,QAAQ,CACpB,EACaC,GAAkB,GAClBC,GAAiB,MACjBC,GAAW,OACXC,GAAU,UACVC,GAAQ,4CACrB,MAAqBC,WAAkBC,CAAa,CAwOlD,aAAc,CACZ,MAAA,EAxOFC,EAAA,wBAA+B,IAAM,CACnC,IAAIC,EAAS,CAAA,EAGb,MAAMC,EAAQ,IAAIC,EAAM,CACtB,OAAQ,GACR,aACA,IAAK,GACL,MAAO,EACP,QAAS,GACT,MAAO,GACP,QAAS,CACP,IAAIA,EAAM,CACR,aACA,IAAK,IACL,MAAO,GACP,QAAS,CACP,IAAIA,EAAM,CACR,aACA,IAAK,IACL,MAAO,EAAA,CACR,EACD,IAAIA,EAAM,CACR,aACA,IAAK,UACL,MAAO,EAAA,CACR,CAAA,CACH,CACD,EACD,IAAIA,EAAM,CACR,aACA,IAAK,UACL,MAAO,GACP,QAAS,CACP,IAAIA,EAAM,CACR,aACA,IAAK,IACL,MAAO,GACP,QAAS,EAAA,CAEV,EACD,IAAIA,EAAM,CACR,aACA,IAAK,UACL,MAAO,GACP,QAAS,GACT,MAAO,EAAA,CACR,CAAA,CACH,CACD,CAAA,CACH,CACD,EAEDD,EAAM,WAAA,EACND,EAASC,EAAM,WAAW,EAAG,EAAG,EAAG,EAAG,GAAM,EAAG,CAAC,EAMhD,KAAK,OAAS,oDACd,KAAK,QAAUE,EACb,OAAO,OAAO,CAAE,MAAO,UAAYC,EAAaJ,CAAM,CAAC,EACvDA,CAAA,EAEF,KAAK,QAAU,uBACf,KAAK,WAAa;AAAA;AAAA;AAAA;AAAA,aAITK,EAAU,EAAG,CAAC,WAAWA,EAAU,EAAG,CAAC,IAAIA,EAAU,EAAG,CAAC,WAAWA,EAAU,EAAG,CAAC;AAAA,aAClFA,EAAU,GAAI,CAAC,IAAIA,EAAU,GAAI,CAAC;AAAA,gBAC/BA,EAAU,GAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKfA,EAAU,GAAI,CAAC,KAAKA,EAAU,GAAI,CAAC;AAAA;AAAA,sBAI/C,KAAK,SAAW,CACd,mBACA,qBACA,qBACA,mBAAA,CAEJ,GAEAN,EAAA,wBAAmB,IAAM,CACvB,IAAIC,EAAS,CAAA,EAEb,MAAMM,EAAOC,EAAQ,EAAG,CAAC,EACnBC,EAAO,GACPC,EAAQF,EAAQ,EAAG,CAAC,EACpBG,EAAQ,GACRC,EAAQJ,EAAQ,EAAG,CAAC,EACpBK,EAAQ,GACRC,EAAK,IAAIC,EAAgBR,EAAME,CAAI,EACnCO,EAAM,IAAID,EAAgBL,EAAOC,CAAK,EACtCM,EAAM,IAAIF,EAAgBH,EAAOC,CAAK,EAGtCX,EAAQ,IAAIC,EAAM,CACtB,OAAQ,GACR,aACA,IAAK,GACL,MAAO,EACP,QAAS,GACT,MAAO,GACP,QAAS,CACP,IAAIA,EAAM,CACR,aACA,IAAK,IACL,MAAOW,EACP,QAAS,CACP,IAAIX,EAAM,CACR,aACA,IAAK,IACL,MAAOa,CAAA,CACR,EACD,IAAIb,EAAM,CACR,aACA,IAAK,UACL,MAAOa,EAAI,oBAAoB,CAAC,CAAA,CACjC,CAAA,CACH,CACD,EACD,IAAIb,EAAM,CACR,aACA,IAAK,UACL,MAAOW,EAAG,oBAAoB,CAAC,EAC/B,QAAS,CACP,IAAIX,EAAM,CACR,aACA,IAAK,IACL,MAAOc,EACP,QAAS,EAAA,CAEV,EACD,IAAId,EAAM,CACR,aACA,IAAK,UACL,MAAOc,EAAI,oBAAoB,CAAC,EAChC,QAAS,GACT,MAAO,EAAA,CACR,CAAA,CACH,CACD,CAAA,CACH,CACD,EAEDf,EAAM,WAAA,EACND,EAASC,EAAM,WAAW,EAAG,EAAG,EAAG,EAAG,GAAM,EAAG,CAAC,EAChD,MAAMgB,EAAMJ,EAAG,gBAAgBE,CAAG,EAC5BG,EAAML,EAAG,oBAAoB,CAAC,EAAE,gBAAgBG,CAAG,EACnDG,EAAKF,EAAI,cAAcC,CAAG,EAC1BE,EAAUH,EAAI,eAAeE,CAAE,EAGrC,KAAK,OAAS,oDACd,KAAK,QAAUhB,EACb,OAAO,OAAO,CAAE,MAAO,UAAYC,EAAaJ,CAAM,CAAC,EACvDA,CAAA,EAEF,KAAK,QAAU,uBACEoB,EAAQ,sBAEzB,KAAK,WAAa;AAAA;AAAA;AAAA;AAAA,aAITP,EAAG,qBAAqB,WAAWE,EAAI,qBAAqB,IAAIF,EAAG,oBAAoB,CAAC,EAAE,qBAAqB,WAAWG,EAAI,qBAAqB;AAAA,aACnJC,EAAI,qBAAqB,IAAIC,EAAI,qBAAqB;AAAA,gBACnDC,EAAG,qBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKxBF,EAAI,qBAAqB,KAAKE,EAAG,qBAAqB;AAAA,QAC9DC,EAAQ,qBAAqB;AAAA,sBAGjC,MAAMC,EAAQ,KAAK,IAAI,EAAGD,EAAQ,QAAQ,EACpCE,EAAUF,EAAQ,SAGxB,IAAIG,EAAsB,CAAA,EAC1B,GAAIF,EAAQ,EAEV,QAASG,EAAI,EAAGA,EAAIH,EAAOG,IACrBA,IAAMF,GAASC,EAAU,KAAKC,CAAC,OAIrCD,EAAY,CACVD,EAAU,EACV,KAAK,IAAI,EAAGA,EAAU,CAAC,EACvBA,EAAU,EACVA,EAAU,CAAA,EAQd,IAHAC,EAAY,MAAM,KAAK,IAAI,IAAIA,CAAS,CAAC,EAAE,OAAQE,GAAMA,EAAI,CAAC,EAGvDF,EAAU,OAAS,GAAG,CAC3B,MAAMG,EAAQJ,EAAUf,EAAQ,EAAG,CAAC,EAChC,CAACgB,EAAU,SAASG,CAAK,GAAKA,IAAUJ,GAASC,EAAU,KAAKG,CAAK,CAC3E,CAGA,MAAMC,EAAU,IAAM,CACpB,MAAMC,EAAIrB,EAAQ,EAAGgB,EAAU,OAAS,CAAC,EACzC,OAAOA,EAAU,OAAOK,EAAG,CAAC,EAAE,CAAC,CACjC,EACMC,EAAKF,EAAA,EACLG,EAAKH,EAAA,EAGLI,EAAe,IAAIjB,EAAgBe,EAAIR,CAAK,EAC7B,IAAIP,EAAgBgB,EAAIT,CAAK,EAClD,KAAK,SAAW,CACd,IAAID,EAAQ,qBAAqB,KACjC,IAAIW,EAAa,qBAAqB,KACtC,IAAId,EAAI,qBAAqB,KAC7B,IAAIF,EAAI,qBAAqB,IAAA,CAEjC,GAIE,KAAK,iBAAA,CACP,CACF"}