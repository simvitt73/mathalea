{"version":3,"file":"2F32-2-DKhEATaf.js","sources":["../../src/exercices/2e/2F32-2.ts"],"sourcesContent":["import { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { repere } from '../../lib/2d/reperes'\nimport { texteParPosition } from '../../lib/2d/textes'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { spline, type NoeudSpline } from '../../lib/mathFonctions/Spline'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Déterminer graphiquement les extremums'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\nexport const dateDePublication = '27/06/2023' // La date de publication initiale au format 'jj/mm/aaaa' pour affichage temporaire d'un tag\nexport const uuid = '7761e' // @todo à changer dans un nouvel exo (utiliser pnpm getNewUuid)\n\nexport const refs = {\n  'fr-fr': ['2F32-2'],\n  'fr-ch': [],\n}\n// une liste de nœuds pour définir une fonction Spline\nconst noeuds1 = [\n  { x: -4, y: -1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n  { x: -3, y: 1, deriveeGauche: 2, deriveeDroit: 2, isVisible: false },\n  { x: -2, y: 4, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: -1, y: 1, deriveeGauche: -2, deriveeDroit: -2, isVisible: false },\n  { x: 0, y: -3, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: 2, y: 2, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: 3, y: -2, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: 4, y: 1, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n]\n// une autre liste de nœuds...\nconst noeuds2 = [\n  { x: -5, y: 3, deriveeGauche: 0, deriveeDroit: 0, isVisible: true },\n  { x: -3, y: 4, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: -1, y: -3, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: 2, y: 2, deriveeGauche: -0.5, deriveeDroit: -0.5, isVisible: true },\n]\nconst noeuds3 = [\n  { x: -5, y: 0, deriveeGauche: -2, deriveeDroit: -2, isVisible: true },\n  { x: -4, y: -3, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: -2, y: 1, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: 0, y: 0, deriveeGauche: -0.5, deriveeDroit: -0.5, isVisible: true },\n]\nconst noeuds4 = [\n  { x: -5, y: 0, deriveeGauche: -2, deriveeDroit: -2, isVisible: true },\n  { x: -4, y: -3, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: -2, y: 1, deriveeGauche: 0, deriveeDroit: 0, isVisible: false },\n  { x: 0, y: 0, deriveeGauche: -0.5, deriveeDroit: -0.5, isVisible: true },\n]\n// une liste des listes\nconst mesFonctions = [noeuds1, noeuds2, noeuds3, noeuds4] //, noeuds1, noeuds2, noeuds3, noeuds4\n\n/**\n * trouve les extrema mais ne fonctionne que si les extrema se trouvent en des noeuds.\n * @param {{x: number, y:number,deriveeGauche:number,deriveeDroit:number, isVisible:boolean}[]} nuage les noeuds\n * @returns {{yMin: number, yMax: number, xMax: number, xMin: number}}\n */\nfunction trouveMaxes(nuage: NoeudSpline[]) {\n  const xMin = Math.floor(Math.min(...nuage.map((el) => el.x)) - 1)\n  const yMin = Math.floor(Math.min(...nuage.map((el) => el.y)) - 1)\n  const xMax = Math.ceil(Math.max(...nuage.map((el) => el.x)) + 1)\n  const yMax = Math.ceil(Math.max(...nuage.map((el) => el.y)) + 1)\n  return { xMin, xMax, yMin, yMax }\n}\n\n/**\n * choisit les caractèristique de la transformation de la courbe\n * @returns {{coeffX: -1|1, deltaX: int, deltaY: int, coeffY: -1|1}}\n */\nfunction aleatoiriseCourbe() {\n  const coeffX = choice([-1, 1]) // symétries ou pas\n  const coeffY = choice([-1, 1])\n  const deltaX = randint(-2, +2) // translations\n  const deltaY = randint(-2, +2)\n  return { coeffX, coeffY, deltaX, deltaY }\n}\n\n/**\n * Aléatoirise une courbe et demande les antécédents d'une valeur entière (eux aussi entiers)\n * @author Gilles Mora (grâce au travail de Jean-Claude Lhote)\n\n */\nexport default class BetaModeleSpline extends Exercice {\n  constructor() {\n    super()\n\n    this.sup = '4'\n    this.nbQuestions = 1 // Nombre de questions par défaut\n  }\n\n  nouvelleVersion() {\n    for (let i = 0; i < this.nbQuestions; i++) {\n      const { coeffX, coeffY, deltaX, deltaY } = aleatoiriseCourbe()\n      // la liste des noeuds de notre fonction\n      const nuage = choice(mesFonctions).map((noeud) =>\n        Object({\n          x: (noeud.x + deltaX) * coeffX,\n          y: (noeud.y + deltaY) * coeffY,\n          deriveeGauche: noeud.deriveeGauche * coeffX * coeffY,\n          deriveeDroit: noeud.deriveeDroit * coeffX * coeffY,\n          isVisible: noeud.isVisible,\n        }),\n      )\n      const maSpline = spline(nuage)\n      const { xMin, xMax, yMin, yMax } = trouveMaxes(nuage)\n      const o = texteParPosition('O', -0.3, -0.3, 0, 'black', 1)\n      // le repère dans lequel sera tracé la courbe (il est important que xMin et yMin soient entiers d'où les arrondis lors de leur définition plus haut\n      const repere1 = repere({\n        xMin: xMin - 1,\n        xMax: xMax + 1,\n        yMin: yMin - 1,\n        yMax: yMax + 1,\n        grilleX: false,\n        grilleY: false,\n        grilleSecondaire: true,\n        grilleSecondaireYDistance: 1,\n        grilleSecondaireXDistance: 1,\n        grilleSecondaireYMin: yMin - 1,\n        grilleSecondaireYMax: yMax + 1,\n        grilleSecondaireXMin: xMin - 1,\n        grilleSecondaireXMax: xMax + 1,\n      })\n      const courbe1 = maSpline.courbe({\n        epaisseur: 1.5,\n        ajouteNoeuds: true,\n        optionsNoeuds: { color: 'blue', taille: 1, style: '.', epaisseur: 2 },\n        color: 'blue',\n      })\n      const objetsEnonce = [repere1, courbe1]\n      let texteEnonce = `On donne la courbe représentative d'une fonction $f$ définie sur l'intervalle $[${maSpline.x[0]}\\\\,;\\\\,${maSpline.x[maSpline.n - 1]}]$. <br>`\n      texteEnonce += `\n      Déterminer les extremums de la fonction et préciser en quelles valeurs ils sont atteints.<br>`\n      texteEnonce += mathalea2d(\n        Object.assign({ scale: 0.7 }, fixeBordures(objetsEnonce)),\n        objetsEnonce,\n        o,\n      )\n      if (this.interactif) {\n        texteEnonce +=\n          '<br>Le maximum de $f$ est : ' +\n          ajouteChampTexteMathLive(this, 4 * i, ' ')\n        texteEnonce +=\n          '. Il est atteint en $x=$ ' +\n          ajouteChampTexteMathLive(this, 4 * i + 1, ' ')\n        texteEnonce +=\n          '<br>Le minimum de $f$ est : ' +\n          ajouteChampTexteMathLive(this, 4 * i + 2, ' ')\n        texteEnonce +=\n          '. Il est atteint en $x=$ ' +\n          ajouteChampTexteMathLive(this, 4 * i + 3, ' ')\n      }\n      // on ajoute les tracés pour repérer les antécédents et on en profite pour rendre les autres noeuds invisibles\n      const solsMax = maSpline.solve(Math.max(...nuage.map((el) => el.y)), 0)\n      const solsMin = maSpline.solve(Math.min(...nuage.map((el) => el.y)), 0)\n      const solutionMax =\n        solsMax!.length === 1 ? solsMax![0] : 'On a un problème'\n      const solutionMin =\n        solsMin!.length === 1 ? solsMin![0] : 'On a un problème'\n      setReponse(this, 4 * i, Math.max(...nuage.map((el) => el.y)))\n      setReponse(this, 4 * i + 1, solutionMax)\n      setReponse(this, 4 * i + 2, Math.min(...nuage.map((el) => el.y)))\n      setReponse(this, 4 * i + 3, solutionMin)\n\n      const texteCorrection = `Le point le plus haut de la courbe a pour coordonnées $(${solutionMax}\\\\,;\\\\,${Math.max(...nuage.map((el) => el.y))})$.<br>\n      On en déduit que le maximum de $f$ est $${Math.max(...nuage.map((el) => el.y))}$. Il est atteint en $x=${solutionMax}$.<br>\n      Le point le plus bas de la courbe a pour coordonnées $(${solutionMin}\\\\,;\\\\,${Math.min(...nuage.map((el) => el.y))})$.<br>\n      On en déduit que le minimum de $f$ est $${Math.min(...nuage.map((el) => el.y))}$. Il est atteint en $x=${solutionMin}$.`\n      this.listeQuestions.push(texteEnonce)\n      this.listeCorrections.push(texteCorrection)\n    }\n    listeQuestionsToContenu(this) // On envoie l'exercice à la fonction de mise en page\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","uuid","refs","noeuds1","noeuds2","noeuds3","noeuds4","mesFonctions","trouveMaxes","nuage","xMin","el","yMin","xMax","yMax","aleatoiriseCourbe","coeffX","choice","coeffY","deltaX","randint","deltaY","BetaModeleSpline","Exercice","noeud","maSpline","spline","o","texteParPosition","repere1","repere","courbe1","objetsEnonce","texteEnonce","mathalea2d","fixeBordures","ajouteChampTexteMathLive","solsMax","solsMin","solutionMax","solutionMin","setReponse","texteCorrection","listeQuestionsToContenu"],"mappings":"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"}