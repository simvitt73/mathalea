{"version":3,"file":"CodageSegment-CxyIX_Oo.js","sources":["../../src/lib/2d/CodageSegment.ts"],"sourcesContent":["import { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { Point, PointAbstrait } from './PointAbstrait'\nimport { segment, Segment } from './segmentsVecteurs'\nimport { TexteParPoint } from './textes'\nimport { milieu } from './utilitairesPoint'\n\n/**\n * Code un segment\n * @param {PointAbstrait} A Première extrémité du segment\n * @param {PointAbstrait} B Seconde extrémité du segment\n * @param {string} [mark='||'] Symbole posé sur le segment\n * @param {string} [color='black'] Couleur du symbole : du type 'blue' ou du type '#f15929'\n * @param {number} [echelle=1] Taille relative du symbole\n * @example codageSegment(H,K) // Code le segment [HK] avec la marque noire '||'\n * @example codageAngle(H,K,'x','green') // Code le segment [HK] avec la marque verte 'x'\n * @example codageAngle(H,K,'x','green',{echelle : 3}) // Code le segment [HK] avec la marque verte 'x' et de taille 3.\n * @author Rémi Angot\n * @return {TexteParPoint}\n */\n// JSDOC Validee par EE Juin 2022\n\nexport function codageSegment(\n  A: PointAbstrait,\n  B: PointAbstrait,\n  mark = '||',\n  color = 'black',\n  echelle = 0.5,\n) {\n  const O = milieu(A, B)\n  const s = segment(A, B)\n  let angle\n  if (B.x > A.x) {\n    angle = -parseInt(s.angleAvecHorizontale.toFixed(0))\n  } else {\n    angle = -parseInt(s.angleAvecHorizontale.toFixed(0)) + 180\n  }\n  return new TexteParPoint(mark, O, angle, color, echelle)\n}\n/**\n * Code plusieurs segments de la même façon\n * @param {string} [mark = '||'] Symbole posé sur le segment\n * @param {string} [color = 'black'] Couleur du symbole : : du type 'blue' ou du type '#f15929'\n * @param  {Point[]|Segment|number} args Les segments différement codés + Taille relative du codage\n * @property {string} svg Sortie au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} tikz Sortie au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @author Rémi Angot\n * @class\n */\n// JSDOC Validee par EE Juin 2022\n\nexport class CodageSegments extends ObjetMathalea2D {\n  echelle: number\n  stringColor: string // Pour pouvoir passer une simple couleur aux autres constructeurs.\n  mark: string\n  isEchelle: boolean\n  args: (PointAbstrait | Point | Segment | number)[]\n  constructor(mark = '||', color = 'black', ...args: any[]) {\n    super()\n    this.args = args\n    this.mark = mark\n    this.stringColor = color\n    this.isEchelle = typeof args[args.length - 1] === 'number'\n    this.echelle = this.isEchelle ? (args[args.length - 1] as number) : 1\n    const trouveExtrem = function (\n      xmin: number,\n      ymin: number,\n      xmax: number,\n      ymax: number,\n      ...pointsOuSegment: (Point | Segment)[]\n    ): [number, number, number, number] {\n      if (pointsOuSegment.length === 0) return [xmin, ymin, xmax, ymax]\n      else {\n        const premierElement = pointsOuSegment.shift() as unknown\n        if (premierElement instanceof Segment) {\n          xmin = Math.min(xmin, premierElement.x1, premierElement.x2)\n          xmax = Math.max(xmax, premierElement.x1, premierElement.x2)\n          ymin = Math.min(ymin, premierElement.y1, premierElement.y2)\n          ymax = Math.max(ymax, premierElement.y1, premierElement.y2)\n          return trouveExtrem(xmin, ymin, xmax, ymax, ...pointsOuSegment)\n        } else if (premierElement instanceof Point) {\n          xmin = Math.min(xmin, premierElement.x)\n          xmax = Math.max(xmax, premierElement.x)\n          ymin = Math.min(ymin, premierElement.y)\n          ymax = Math.max(ymax, premierElement.y)\n          return trouveExtrem(xmin, ymin, xmax, ymax, ...pointsOuSegment)\n        } else {\n          return trouveExtrem(xmin, ymin, xmax, ymax, ...pointsOuSegment)\n        }\n      }\n    }\n    this.bordures = trouveExtrem(\n      1000,\n      1000,\n      -1000,\n      -1000,\n      ...(args as (Point | Segment)[]),\n    ) as unknown as [number, number, number, number]\n  }\n\n  svg(coeff: number) {\n    let code = ''\n    if (Array.isArray(this.args[0])) {\n      // Si on donne un tableau de points\n      for (let i = 0; i < this.args[0].length - 1; i++) {\n        const codage = codageSegment(\n          this.args[0][i],\n          this.args[0][i + 1],\n          this.mark,\n          this.stringColor,\n          this.echelle,\n        )\n        code += codage.svg(coeff)\n        code += '\\n'\n      }\n      const codage = codageSegment(\n        this.args[0][this.args[0].length - 1],\n        this.args[0][0],\n        this.mark,\n        this.stringColor,\n        this.echelle,\n      )\n      code += codage.svg(coeff)\n      code += '\\n'\n    } else if (this.args[0].constructor === Segment) {\n      for (\n        let i = 0;\n        i < (this.isEchelle ? this.args.length - 1 : this.args.length);\n        i++\n      ) {\n        const codage = codageSegment(\n          (this.args[i] as Segment).extremite1,\n          (this.args[i] as Segment).extremite2,\n          this.mark,\n          this.stringColor,\n          this.echelle,\n        )\n        code += codage.svg(coeff)\n        code += '\\n'\n      }\n    } else {\n      for (\n        let i = 0;\n        i < (this.isEchelle ? this.args.length - 1 : this.args.length);\n        i += 2\n      ) {\n        if (\n          [this.args[i], this.args[i + 1]].every(\n            (p) => p instanceof Point || p instanceof PointAbstrait,\n          )\n        ) {\n          const codage = codageSegment(\n            this.args[i] as PointAbstrait,\n            this.args[i + 1] as Point,\n            this.mark,\n            this.stringColor,\n            this.echelle,\n          )\n          code += codage.svg(coeff)\n          code += '\\n'\n        }\n      }\n    }\n    code = `<g id=\"${this.id}\">${code}</g>`\n    return code\n  }\n\n  tikz() {\n    let code = ''\n    if (Array.isArray(this.args[0])) {\n      // Si on donne une liste de points\n      for (let i = 0; i < this.args[0].length - 1; i++) {\n        code += codageSegment(\n          this.args[0][i],\n          this.args[0][i + 1],\n          this.mark,\n          this.stringColor,\n          this.echelle,\n        ).tikz()\n        code += '\\n'\n      }\n      code += codageSegment(\n        this.args[0][this.args[0].length - 1],\n        this.args[0][0],\n        this.mark,\n        this.stringColor,\n      ).tikz()\n      code += '\\n'\n    } else if (this.args[0].constructor === Segment) {\n      const condition = this.isEchelle ? this.args.length - 1 : this.args.length\n      for (let i = 0; i < condition; i++) {\n        code += codageSegment(\n          (this.args[i] as Segment).extremite1,\n          (this.args[i] as Segment).extremite2,\n          this.mark,\n          this.stringColor,\n        ).tikz()\n        code += '\\n'\n      }\n    } else {\n      const condition = this.isEchelle ? this.args.length - 1 : this.args.length\n      for (let i = 0; i < condition; i += 2) {\n        if (\n          [this.args[i], this.args[i + 1]].every(\n            (p) => p instanceof Point || p instanceof PointAbstrait,\n          )\n        ) {\n          code += codageSegment(\n            this.args[i] as PointAbstrait,\n            this.args[i + 1] as PointAbstrait,\n            this.mark,\n            this.stringColor,\n            this.echelle,\n          ).tikz()\n          code += '\\n'\n        }\n      }\n    }\n    return code\n  }\n}\n/**\n * Code plusieurs segments de la même façon\n * @param {string} [mark = '||'] Symbole posé sur le segment\n * @param {string} [color = 'black'] Couleur du symbole : : du type 'blue' ou du type '#f15929'\n * @param {Points|Point[]|Segments|number} args Les segments différement codés + Taille relative du codage. Voir exemples.\n * @example codageSegments('×','blue',A,B, B,C, C,D) // Code les segments [AB], [BC] et [CD] avec une croix bleue\n * @example codageSegments('×','blue',A,B, B,C, C,D, 1.2) // Code les segments [AB], [BC] et [CD] avec une croix bleue et une taille de 1.2\n * @example codageSegments('×','blue',[A,B,C,D]) // Code les segments [AB], [BC], [CD] et [DA] (attention, chemin fermé, pratique pour des polygones pas pour des lignes brisées)\n * @example codageSegments('×','blue',[A,B,C,D],1.5) // Code les segments [AB], [BC], [CD] et [DA] (attention, chemin fermé, pratique pour des polygones pas pour des lignes brisées) et une taille de la marque de 1.5\n * @example codageSegments('×','blue',s1,s2,s3) // Code les segments s1, s2 et s3 avec une croix bleue\n * @example codageSegments('×','blue',p.listePoints) // Code tous les segments du polygone avec une croix bleue\n * @author Rémi Angot\n * @return {CodageSegments}\n */\n// JSDOC Validee par EE Juin 2022\n\nexport function codageSegments(mark = '||', color = 'black', ...args: any[]) {\n  return new CodageSegments(mark, color, ...args)\n}\n"],"names":["codageSegment","A","B","mark","color","echelle","O","milieu","s","segment","angle","TexteParPoint","CodageSegments","ObjetMathalea2D","args","__publicField","trouveExtrem","xmin","ymin","xmax","ymax","pointsOuSegment","premierElement","Segment","Point","coeff","code","codage","i","p","PointAbstrait","condition","codageSegments"],"mappings":"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"}