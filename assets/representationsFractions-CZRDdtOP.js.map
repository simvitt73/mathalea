{"version":3,"file":"representationsFractions-CZRDdtOP.js","sources":["../../src/modules/representationsFractions.ts"],"sourcesContent":["import { arc } from '../lib/2d/Arc'\nimport { cercle } from '../lib/2d/cercle'\nimport { colorToLatexOrHTML } from '../lib/2d/colorToLatexOrHtml'\nimport { ObjetMathalea2D } from '../lib/2d/ObjetMathalea2D'\nimport { pointAbstrait, PointAbstrait } from '../lib/2d/PointAbstrait'\nimport { polygone } from '../lib/2d/polygones'\nimport { carre } from '../lib/2d/polygonesParticuliers'\nimport { segment } from '../lib/2d/segmentsVecteurs'\nimport { latex2d, texteParPosition } from '../lib/2d/textes'\nimport { rotation, translation } from '../lib/2d/transformations'\nimport { vecteur } from '../lib/2d/Vecteur'\nimport { stringNombre } from '../lib/outils/texNombre'\nimport type { NestedObjetMathalea2dArray } from '../types/2d'\nimport type FractionEtendue from './FractionEtendue'\nimport { quotientier } from './outils'\n\ntype FractionRepresentationType = 'gateau' | 'barre' | 'segment'\n\n/**\n * Représentation graphique de la fraction irréductible\n */\nexport function representationFractionIrred(\n  fraction: FractionEtendue,\n  x: number,\n  y: number,\n  rayon: number,\n  depart: number = 0,\n  type: FractionRepresentationType = 'gateau',\n  couleur: string = 'gray',\n  unite0: number | string = 0,\n  unite1: number | string = 1,\n  scale: number = 1,\n  label: string = '',\n): ObjetMathalea2D[] {\n  let num: number\n  let k: number\n  const objets: ObjetMathalea2D[] = []\n  const n = quotientier(fraction.numIrred, fraction.denIrred)\n  num = fraction.numIrred\n\n  const unegraduation = function (\n    x: number,\n    y: number,\n    couleur: string = 'black',\n    epaisseur: number = 1,\n  ) {\n    const A = pointAbstrait(x, y + 0.2, '')\n    const B = pointAbstrait(x, y - 0.2, '')\n    const g = segment(A, B, couleur)\n    g.epaisseur = epaisseur\n    return g\n  }\n\n  if (type === 'gateau') {\n    for (k = 0; k < n; k++) {\n      const O = pointAbstrait(x + k * 2 * (rayon + 0.5), y)\n      const C = cercle(O, rayon)\n      objets.push(C)\n      for (let i = 0; i < fraction.denIrred; i++) {\n        const s = segment(\n          O,\n          rotation(\n            pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n            O,\n            90 - (i * 360) / fraction.denIrred,\n          ),\n        )\n        objets.push(s)\n      }\n      let dep = rotation(\n        pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n        O,\n        90 - (depart * 360) / fraction.denIrred,\n      )\n      for (let j = 0; j < Math.min(fraction.denIrred, num); j++) {\n        const a = arc(dep, O, -360 / fraction.denIrred, true, couleur)\n        a.opacite = 0.3\n        dep = rotation(dep, O, -360 / fraction.denIrred)\n        objets.push(a)\n      }\n      num -= fraction.denIrred\n    }\n    if (Math.abs(fraction.numIrred) % Math.abs(fraction.denIrred) !== 0) {\n      const O = pointAbstrait(x + k * 2 * (rayon + 0.5), y)\n      const C = cercle(O, rayon)\n      objets.push(C)\n      for (let i = 0; i < fraction.denIrred; i++) {\n        const s = segment(\n          O,\n          rotation(\n            pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n            O,\n            90 - (i * 360) / fraction.denIrred,\n          ),\n        )\n        objets.push(s)\n      }\n      let dep = rotation(\n        pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n        O,\n        90 - (depart * 360) / fraction.denIrred,\n      )\n      for (let j = 0; j < Math.min(fraction.denIrred, num); j++) {\n        const a = arc(dep, O, -360 / fraction.denIrred, true, couleur)\n        a.opacite = 0.3\n        dep = rotation(dep, O, -360 / fraction.denIrred)\n        objets.push(a)\n      }\n    }\n  } else if (type === 'segment') {\n    for (k = 0; k < n; k++) {\n      const O = pointAbstrait(x + k * rayon, y)\n      const C = translation(O, vecteur(rayon, 0))\n      const s = segment(O, C)\n      s.styleExtremites = '-|'\n      objets.push(s)\n      for (let i = 0; i < fraction.denIrred; i++) {\n        const s = segment(\n          translation(O, vecteur((i * rayon) / fraction.denIrred, 0)),\n          translation(O, vecteur(((i + 1) * rayon) / fraction.denIrred, 0)),\n        )\n        s.styleExtremites = '|-'\n        objets.push(s)\n      }\n      const a = segment(\n        O,\n        pointAbstrait(\n          O.x + (Math.min(num, fraction.denIrred) * rayon) / fraction.denIrred,\n          O.y,\n        ),\n        couleur,\n      )\n      a.opacite = 0.4\n      a.epaisseur = 6\n      objets.push(a)\n      num -= fraction.denIrred\n    }\n    const O = pointAbstrait(x + k * rayon, y)\n    const C = translation(O, vecteur(rayon, 0))\n    const s = segment(O, C)\n    s.styleExtremites = '-|'\n    objets.push(s)\n    for (let i = 0; i < fraction.denIrred; i++) {\n      const s = segment(\n        translation(O, vecteur((i * rayon) / fraction.denIrred, 0)),\n        translation(O, vecteur(((i + 1) * rayon) / fraction.denIrred, 0)),\n      )\n      s.styleExtremites = '|-'\n      objets.push(s)\n    }\n    if (num > 0) {\n      const a = segment(\n        O,\n        pointAbstrait(\n          O.x +\n            (Math.min(fraction.numIrred, fraction.denIrred) * rayon) /\n              fraction.denIrred,\n          O.y,\n        ),\n        couleur,\n      )\n      a.opacite = 0.4\n      a.epaisseur = 6\n      objets.push(a)\n    }\n    objets.push(unegraduation(x, y))\n    if (typeof unite0 === 'number' && typeof unite1 === 'number') {\n      for (k = 0; k <= n + 1; k++) {\n        objets.push(\n          texteParPosition(\n            stringNombre(unite0 + k * (unite1 - unite0), 0),\n            x + rayon * k,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n    } else {\n      if (unite0 != null) {\n        objets.push(\n          texteParPosition(\n            String(unite0),\n            x,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n      if (unite1 != null) {\n        objets.push(\n          texteParPosition(\n            String(unite1),\n            x + rayon,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n      if (label != null) {\n        objets.push(\n          texteParPosition(\n            label,\n            x + (rayon * fraction.numIrred) / fraction.denIrred,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n    }\n  } else {\n    // Type 'barre'\n    let diviseur\n    if (fraction.denIrred % 6 === 0) {\n      diviseur = 6\n    } else if (fraction.denIrred % 5 === 0) {\n      diviseur = 5\n    } else if (fraction.denIrred % 4 === 0) {\n      diviseur = 4\n    } else if (fraction.denIrred % 3 === 0) {\n      diviseur = 3\n    } else if (fraction.denIrred % 2 === 0) {\n      diviseur = 2\n    } else {\n      diviseur = 1\n    }\n    const tailleCarres = Math.max(rayon / diviseur, 1)\n    for (k = 0; k < n; k++) {\n      for (let j = 0; j < diviseur; j++) {\n        for (let h = 0; h < fraction.denIrred / diviseur; h++) {\n          const O = pointAbstrait(\n            x + k * (diviseur * tailleCarres + 1) + j * tailleCarres,\n            y + h * tailleCarres,\n          )\n          const C: PointAbstrait = translation(O, vecteur(tailleCarres, 0))\n          const dep = carre(O, C, 'black')\n          dep.couleurDeRemplissage = colorToLatexOrHTML(couleur)\n          dep.opaciteDeRemplissage = 0.4\n          objets.push(dep)\n        }\n      }\n      num -= fraction.denIrred\n    }\n    if (num > 0) {\n      for (let j = 0; j < diviseur; j++) {\n        for (let h = 0; h < fraction.denIrred / diviseur; h++) {\n          const O = pointAbstrait(\n            x + n * (diviseur * tailleCarres + 1) + j * tailleCarres,\n            y + h * tailleCarres,\n          )\n          const C = translation(O, vecteur(tailleCarres, 0))\n          const dep = carre(O, C, 'black')\n          objets.push(dep)\n        }\n      }\n      for (let i = 0; i < num; i++) {\n        const O = pointAbstrait(\n          x + n * (diviseur * tailleCarres + 1) + (i % diviseur) * tailleCarres,\n          y + quotientier(i, diviseur) * tailleCarres,\n        )\n        const C = translation(O, vecteur(tailleCarres, 0))\n        const dep = carre(O, C, 'black')\n        dep.couleurDeRemplissage = colorToLatexOrHTML(couleur)\n        dep.opaciteDeRemplissage = 0.4\n        objets.push(dep)\n      }\n    }\n  }\n  return objets\n}\n\n/**\n * Représentation graphique de la fraction (non simplifiée)\n */\nexport function representationFraction(\n  fraction: FractionEtendue,\n  x: number,\n  y: number,\n  rayon: number,\n  depart: number = 0,\n  type: FractionRepresentationType = 'gateau',\n  couleur = 'gray',\n  unite0: String | number = 0,\n  unite1: string | number = 1,\n  scale = 1,\n  label = '',\n): ObjetMathalea2D[] {\n  const objets: ObjetMathalea2D[] = []\n  let num: number\n  let k: number\n  const n = quotientier(Math.abs(fraction.num), Math.abs(fraction.den))\n  num = Math.abs(fraction.num)\n\n  const unegraduation = function (\n    x: number,\n    y: number,\n    couleur: string = 'black',\n    epaisseur: number = 1,\n  ) {\n    const A = pointAbstrait(x, y + 0.2)\n    const B = pointAbstrait(x, y - 0.2)\n    const g = segment(A, B, couleur)\n    g.epaisseur = epaisseur\n    return g\n  }\n\n  if (type === 'gateau') {\n    for (k = 0; k < n; k++) {\n      const O = pointAbstrait(x + k * 2 * (rayon + 0.5), y)\n      const C = cercle(O, rayon)\n      objets.push(C)\n      for (let i = 0; i < fraction.den; i++) {\n        const s = segment(\n          O,\n          rotation(\n            pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n            O,\n            90 - (i * 360) / fraction.den,\n          ),\n        )\n        objets.push(s)\n      }\n      let dep = rotation(\n        pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n        O,\n        90 - (depart * 360) / fraction.den,\n      )\n      for (let j = 0; j < Math.min(fraction.den, num); j++) {\n        const a = arc(dep, O, -360 / fraction.den, true, couleur)\n        a.opacite = 0.3\n        dep = rotation(dep, O, -360 / fraction.den)\n        objets.push(a)\n      }\n      num -= fraction.den\n    }\n    if (fraction.num % fraction.den !== 0) {\n      const O = pointAbstrait(x + k * 2 * (rayon + 0.5), y)\n      const C = cercle(O, rayon)\n      objets.push(C)\n      for (let i = 0; i < fraction.den; i++) {\n        const s = segment(\n          O,\n          rotation(\n            pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n            O,\n            90 - (i * 360) / fraction.den,\n          ),\n        )\n        objets.push(s)\n      }\n\n      let dep = rotation(\n        pointAbstrait(x + rayon + k * 2 * (rayon + 0.5), y),\n        O,\n        90 - (depart * 360) / fraction.den,\n      )\n      if (fraction.num % fraction.den !== 0) {\n        for (let j = 0; j < Math.min(fraction.den, num); j++) {\n          const a = arc(dep, O, -360 / fraction.den, true, couleur)\n          a.opacite = 0.3\n          dep = rotation(dep, O, -360 / fraction.den)\n          objets.push(a)\n        }\n      }\n    }\n  } else if (type === 'segment') {\n    for (k = 0; k < n; k++) {\n      const O = pointAbstrait(x + k * rayon, y)\n      const C = translation(O, vecteur(rayon, 0))\n      const s = segment(O, C)\n      s.styleExtremites = '-|'\n      objets.push(s)\n      for (let i = 0; i < fraction.den; i++) {\n        const s = segment(\n          translation(O, vecteur((i * rayon) / fraction.den, 0)),\n          translation(O, vecteur(((i + 1) * rayon) / fraction.den, 0)),\n        )\n        s.styleExtremites = '|-'\n        objets.push(s)\n      }\n      const a = segment(\n        O,\n        pointAbstrait(\n          O.x + (Math.min(num, fraction.den) * rayon) / fraction.den,\n          O.y,\n        ),\n        couleur,\n      )\n      a.opacite = 0.4\n      a.epaisseur = 6\n      objets.push(a)\n      num -= fraction.den\n    }\n    const O = pointAbstrait(x + k * rayon, y)\n    const C = translation(O, vecteur(rayon, 0))\n    const s = segment(O, C)\n    s.styleExtremites = '-|'\n    objets.push(s)\n    for (let i = 0; i < fraction.den; i++) {\n      const s = segment(\n        translation(O, vecteur((i * rayon) / fraction.den, 0)),\n        translation(O, vecteur(((i + 1) * rayon) / fraction.den, 0)),\n      )\n      s.styleExtremites = '|-'\n      objets.push(s)\n    }\n    if (num > 0) {\n      const a = segment(\n        O,\n        pointAbstrait(\n          O.x + (Math.min(num, fraction.den) * rayon) / fraction.den,\n          O.y,\n        ),\n        couleur,\n      )\n      a.opacite = 0.4\n      a.epaisseur = 6\n      objets.push(a)\n    }\n    objets.push(unegraduation(x, y))\n    if (typeof unite0 === 'number' && typeof unite1 === 'number') {\n      for (k = 0; k <= n + 1; k++) {\n        objets.push(\n          texteParPosition(\n            String(unite0 + k * (unite1 - unite0)),\n            x + rayon * k,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n    } else {\n      if (String(unite0) !== '') {\n        objets.push(\n          texteParPosition(\n            String(unite0),\n            x,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n      if (String(unite1) !== '') {\n        objets.push(\n          texteParPosition(\n            String(unite1),\n            x + rayon,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n      if (label !== '') {\n        objets.push(\n          texteParPosition(\n            label,\n            x + (rayon * fraction.num) / fraction.den,\n            y - 0.6,\n            0,\n            'black',\n            scale,\n            'milieu',\n            true,\n            1,\n          ),\n        )\n      }\n    }\n  } else {\n    // Type barre\n    let diviseur\n    if (fraction.den % 6 === 0) {\n      diviseur = 6\n    } else if (fraction.den % 5 === 0) {\n      diviseur = 5\n    } else if (fraction.den % 4 === 0) {\n      diviseur = 4\n    } else if (fraction.den % 3 === 0) {\n      diviseur = 3\n    } else if (fraction.den % 2 === 0) {\n      diviseur = 2\n    } else {\n      diviseur = 1\n    }\n    const tailleCarres = Math.max(rayon / diviseur, 1)\n    for (k = 0; k < n; k++) {\n      for (let j = 0; j < diviseur; j++) {\n        for (let h = 0; h < fraction.den / diviseur; h++) {\n          const O = pointAbstrait(\n            x + k * (diviseur * tailleCarres + 1) + j * tailleCarres,\n            y + h * tailleCarres,\n          )\n          const C = translation(O, vecteur(tailleCarres, 0))\n          const dep = carre(O, C, 'black')\n          dep.couleurDeRemplissage = colorToLatexOrHTML(couleur)\n          dep.opaciteDeRemplissage = 0.4\n          objets.push(dep)\n        }\n      }\n      num -= fraction.den\n    }\n    if (num > 0) {\n      for (let j = 0; j < diviseur; j++) {\n        for (let h = 0; h < fraction.den / diviseur; h++) {\n          const O = pointAbstrait(\n            x + n * (diviseur * tailleCarres + 1) + j * tailleCarres,\n            y + h * tailleCarres,\n          )\n          const C = translation(O, vecteur(tailleCarres, 0))\n          const dep = carre(O, C, 'black')\n          objets.push(dep)\n        }\n      }\n      for (let i = 0; i < num; i++) {\n        const O = pointAbstrait(\n          x + n * (diviseur * tailleCarres + 1) + (i % diviseur) * tailleCarres,\n          y + quotientier(i, diviseur) * tailleCarres,\n        )\n        const C = translation(O, vecteur(tailleCarres, 0))\n        const dep = carre(O, C, 'black')\n        dep.couleurDeRemplissage = colorToLatexOrHTML(couleur)\n        dep.opaciteDeRemplissage = 0.4\n        objets.push(dep)\n      }\n    }\n  }\n  return objets\n}\n\nexport function representeFractionSurBarre(\n  fraction: FractionEtendue,\n  denominator: number,\n  max: number,\n  width: number,\n): NestedObjetMathalea2dArray {\n  const hauteur = 0.2\n\n  const objets: NestedObjetMathalea2dArray = []\n  function unegraduation(x: number, width: number, vide = false) {\n    const A = pointAbstrait(x, hauteur / 2)\n    const B = pointAbstrait(x, -hauteur / 2)\n    const C = pointAbstrait(x + width, -hauteur / 2)\n    const D = pointAbstrait(x + width, hauteur / 2)\n    const rect = polygone([A, B, C, D])\n    rect.couleurDeRemplissage = vide\n      ? colorToLatexOrHTML('white')\n      : colorToLatexOrHTML('blue')\n    rect.couleur = colorToLatexOrHTML('blue')\n    rect.opaciteDeRemplissage = 0.5\n    return rect\n  }\n  const ratio = denominator / fraction.den\n  const widthByPart = width / denominator\n  for (let i = 0; i < fraction.num * ratio; i++) {\n    objets.push([unegraduation(i * widthByPart, widthByPart, false)])\n  }\n  for (let i = fraction.num * ratio; i < max * denominator; i++) {\n    objets.push([unegraduation(i * widthByPart, widthByPart, true)])\n  }\n  for (let k = 0; k <= max; k++) {\n    const seg = segment(k * width, -hauteur - 0.1, k * width, hauteur + 0.1)\n    seg.color = colorToLatexOrHTML('blue')\n    seg.epaisseur = 3\n    const txt = latex2d(k.toString(), k * width, hauteur + 1, {\n      color: 'black',\n      letterSize: 'normalsize',\n    })\n    objets.push([seg, txt])\n  }\n  return objets\n}\n"],"names":["representationFractionIrred","fraction","x","y","rayon","depart","type","couleur","unite0","unite1","scale","label","num","k","objets","n","quotientier","unegraduation","epaisseur","A","pointAbstrait","B","segment","O","C","cercle","i","s","rotation","dep","j","a","arc","translation","vecteur","texteParPosition","stringNombre","diviseur","tailleCarres","h","carre","colorToLatexOrHTML","representationFraction","representeFractionSurBarre","denominator","max","width","vide","D","rect","polygone","ratio","widthByPart","seg","txt","latex2d"],"mappings":"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"}