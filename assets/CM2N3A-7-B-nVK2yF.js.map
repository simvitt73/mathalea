{"version":3,"file":"CM2N3A-7-B-nVK2yF.js","sources":["../../src/exercices/CM2/CM2N3A-7.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { nombreDeChiffresDansLaPartieEntiere } from '../../lib/outils/nombres'\nimport { context } from '../../modules/context'\nimport {\n  contraindreValeur,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Effectuer additions et soustractions'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\n\n/**\n * Additions et/ou soustractions classique et/ou à trou.\n *\n * Par défaut c'est un mélange d'additions, soustractions avec et sans trou avec des nombres jusqu'à 20.\n * @author Rémi Angot\n\n */\nexport const uuid = '6d698'\n\nexport const refs = {\n  'fr-fr': ['CM2N3A-7'],\n  'fr-2016': ['CM000'],\n  'fr-ch': [],\n}\nexport default class TablesAdditionsSoustractions extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = ['Valeur maximale', 9999] // Texte, tooltip\n    this.besoinFormulaire2Numerique = [\n      'Style de questions',\n      6,\n      '1 : Additions\\n2: Additions à trous\\n3: Soustractions\\n4 : Soustractions à trous\\n5 : Additions et soustractions \\n6 : Additions et soustractions avec ou sans trous',\n    ]\n    this.sup = 20\n    this.sup2 = 6 // additions|additions à trous|soustractions|soustractions à trous|mélange sans trou|mélange avec trou\n    this.consigne = 'Calculer.'\n    this.spacing = 2\n  }\n\n  nouvelleVersion() {\n    this.sup = contraindreValeur(5, 9999, this.sup, 6)\n    let listeTypeDeQuestions: string[] = []\n    if (this.sup2 === 1) {\n      listeTypeDeQuestions = combinaisonListes(['addition'], this.nbQuestions)\n    } else if (this.sup2 === 2) {\n      listeTypeDeQuestions = combinaisonListes(\n        ['addition_a_trou'],\n        this.nbQuestions,\n      )\n    } else if (this.sup2 === 3) {\n      listeTypeDeQuestions = combinaisonListes(\n        ['soustraction'],\n        this.nbQuestions,\n      )\n    } else if (this.sup2 === 4) {\n      listeTypeDeQuestions = combinaisonListes(\n        ['soustraction_a_trou'],\n        this.nbQuestions,\n      )\n    } else if (this.sup2 === 5) {\n      listeTypeDeQuestions = combinaisonListes(\n        ['addition', 'soustraction'],\n        this.nbQuestions,\n      )\n    } else {\n      listeTypeDeQuestions = combinaisonListes(\n        ['addition', 'addition_a_trou', 'soustraction', 'soustraction_a_trou'],\n        this.nbQuestions,\n      )\n    }\n    for (let i = 0, a, b, texte, texteCorr; i < this.nbQuestions; i++) {\n      a = randint(2, this.sup)\n      b = randint(2, this.sup)\n      this.autoCorrection[i] = {}\n      switch (listeTypeDeQuestions[i]) {\n        case 'addition':\n          texte = `$${a} + ${b} =$`\n          if (this.interactif && context.isHtml) {\n            texte = ajouteChampTexteMathLive(\n              this,\n              i,\n              KeyboardType.clavierNumbers,\n              {\n                texteAvant: `$${a} + ${b} = $`,\n              },\n            )\n          }\n          texteCorr = `$${a} + ${b} = ${a + b}$`\n          setReponse(this, i, a + b, { formatInteractif: 'calcul' })\n          break\n        case 'addition_a_trou':\n          texte = `$${a} + \\\\ldots\\\\ldots = ${a + b}$`\n          if (this.interactif && context.isHtml) {\n            texte = ajouteChampTexteMathLive(\n              this,\n              i,\n              KeyboardType.clavierNumbers,\n              {\n                texteAvant: `$${a}~+ $`,\n                texteApres: `$= ${a + b}$`,\n              },\n            )\n          }\n          texteCorr = `$${a} + ${miseEnEvidence(b)} = ${a + b}$`\n          setReponse(this, i, b, { formatInteractif: 'calcul' })\n          break\n        case 'soustraction':\n          if (a === b) {\n            a = randint(2, this.sup, b)\n          }\n          if (a < b) {\n            b = [a, (a = b)][0] // échange les variables a et b\n          }\n          texte = `$${a} - ${b} =$`\n          if (this.interactif && context.isHtml) {\n            texte = ajouteChampTexteMathLive(\n              this,\n              i,\n              KeyboardType.clavierNumbers,\n              {\n                texteAvant: `$${a} - ${b} = $`,\n              },\n            )\n          }\n          texteCorr = `$${a} - ${b} = ${a - b}$`\n          setReponse(this, i, a - b, { formatInteractif: 'calcul' })\n          break\n        case 'soustraction_a_trou':\n        default:\n          if (a === b) {\n            a = randint(2, this.sup, b)\n          }\n          if (a < b) {\n            b = [a, (a = b)][0] // échange les variables a et b\n          }\n          texte = `$${a} - \\\\ldots\\\\ldots = ${a - b}$`\n          if (this.interactif && context.isHtml) {\n            texte = ajouteChampTexteMathLive(\n              this,\n              i,\n              KeyboardType.clavierNumbers,\n              {\n                texteAvant: `$${a}~- $`,\n                texteApres: `$= ${a - b}$`,\n              },\n            )\n          }\n          texteCorr = `$${a} - ${miseEnEvidence(b)} = ${a - b}$`\n          setReponse(this, i, b, { formatInteractif: 'calcul' })\n          break\n      }\n      const autoCorr = this.autoCorrection[i]\n      if (autoCorr && autoCorr.reponse && autoCorr.reponse.valeur) {\n        const value = autoCorr.reponse.valeur.reponse?.value\n\n        autoCorr.reponse.param = {\n          digits: nombreDeChiffresDansLaPartieEntiere(Number(value)),\n          decimals: 0,\n          signe: false,\n          exposantNbChiffres: 0,\n          exposantSigne: false,\n          approx: 0,\n          formatInteractif: 'calcul',\n        }\n        this.autoCorrection[i].enonce = texte\n        this.listeQuestions.push(texte)\n        this.listeCorrections.push(texteCorr)\n      }\n      listeQuestionsToContenu(this)\n    }\n  }\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","uuid","refs","TablesAdditionsSoustractions","Exercice","contraindreValeur","listeTypeDeQuestions","combinaisonListes","i","a","b","texte","texteCorr","randint","context","ajouteChampTexteMathLive","KeyboardType","setReponse","miseEnEvidence","autoCorr","value","_a","nombreDeChiffresDansLaPartieEntiere","listeQuestionsToContenu"],"mappings":"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"}