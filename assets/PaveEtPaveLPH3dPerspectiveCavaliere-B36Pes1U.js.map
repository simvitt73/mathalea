{"version":3,"file":"PaveEtPaveLPH3dPerspectiveCavaliere-B36Pes1U.js","sources":["../../src/lib/3d/3dProjectionMathalea2d/PaveEtPaveLPH3dPerspectiveCavaliere.ts"],"sourcesContent":["import { context } from '../../../modules/context'\nimport { colorToLatexOrHTML } from '../../2d/colorToLatexOrHtml'\nimport { ObjetMathalea2D } from '../../2d/ObjetMathalea2D'\nimport { polygone, polygoneAvecNom } from '../../2d/polygones'\nimport { estDansQuadrilatere, longueur } from '../../2d/utilitairesGeometriques'\nimport { arrondi } from '../../outils/nombres'\nimport {\n  arete3d,\n  point3d,\n  Point3d,\n  polygone3d,\n  translation3d,\n  vecteur3d,\n} from './elementsEtTransformations3d'\n\nexport class PaveLPH3d extends ObjetMathalea2D {\n  constructor(\n    x: number,\n    y: number,\n    z: number,\n    c: number,\n    l: number,\n    p: number,\n    h: number,\n    color = 'black',\n  ) {\n    super()\n    let A, B, C, D, F, G, H, faceAv, faceTop, faceD\n    this.c2d = []\n    const vx = vecteur3d(c, 0, 0)\n    const vy = vecteur3d(0, c, 0)\n    const vz = vecteur3d(0, 0, c)\n\n    for (let i = 0; i < l; i++) {\n      for (let j = 0; j < p; j++) {\n        for (let k = 0; k < h; k++) {\n          A = point3d(x + i * c, y + j * c, z + k * c)\n          B = translation3d(A, vx)\n          C = translation3d(B, vz)\n          D = translation3d(A, vz)\n          F = translation3d(B, vy)\n          G = translation3d(F, vz)\n          H = translation3d(D, vy)\n          if (j === 0) {\n            faceAv = polygone([A.c2d, B.c2d, C.c2d, D.c2d], color)\n            faceAv.couleurDeRemplissage = colorToLatexOrHTML('lightgray')\n            this.c2d.push(faceAv)\n          }\n          if (i === l - 1) {\n            faceD = polygone([B.c2d, F.c2d, G.c2d, C.c2d], color)\n            faceD.couleurDeRemplissage = colorToLatexOrHTML('darkgray')\n            this.c2d.push(faceD)\n          }\n          if (k === h - 1) {\n            faceTop = polygone([D.c2d, C.c2d, G.c2d, H.c2d], color)\n            faceTop.couleurDeRemplissage = colorToLatexOrHTML('white')\n            this.c2d.push(faceTop)\n          }\n        }\n      }\n    }\n  }\n}\n/**\n *\n * @param {number} x coordonnées du sommet en bas à gauche\n * @param {number} y\n * @param {number} z\n * @param {number} c longueur de l'unité\n * @param {number} p profondeur\n * @param {number} l longueur\n * @param {number} h hauteur\n * @param {*} color couleur\n * @returns {PaveLPH3d}\n */\nexport function paveLPH3d(\n  x: number,\n  y: number,\n  z: number,\n  c: number,\n  l: number,\n  p: number,\n  h: number,\n  color = 'black',\n) {\n  return new PaveLPH3d(x, y, z, c, l, p, h, color)\n}\n/**\n * Classe du pavé : construit le pavé ABCDEFGH dont les arêtes [AB],[AD] et [AE] délimitent 3 faces adjacentes.\n * La gestion des arêtes cachées est prise en compte et n'est pas forcément E.\n * En travaillant sur le signe de context.anglePerspective et sur celui de la hauteur (B.z), on peut avoir une vision de haut, de bas, de gauche, de droite comme dans l'exercice....\n * @param {Point3d} A Sommet du pavé droit\n * @param {Point3d} B Sommet du pavé droit\n * @param {Point3d} D Sommet du pavé droit\n * @param {Point3d} E Sommet du pavé droit\n * @param {boolean} [affichageNom = false] Permet (ou pas) l'affichage du nom des sommets du pavé droit.\n * @param {string} [nom = 'ABCDEFGH'] Nom du pavé droit\n * @property {Point3d[]} sommets Tableau contenant les sommets du pavé droit\n * @property {string} color Couleur des arêtes du pavé droit : du type 'blue' ou du type '#f15929'\n * @property {Polygone3d} base Base ABFE du pavé droit\n * @property {Vecteur3d} hauteur Vecteur AD\n * @property {Arete3d} aretes Tableau contenant les arêtes du pavé droit\n * @property {Array} c2d Contient les commandes à tracer en 2d de cette fonction\n * @author Jean-Claude Lhote (optimisé par Eric Elter)\n * @class\n */\nexport class Pave3d extends ObjetMathalea2D {\n  constructor(\n    A: Point3d,\n    B: Point3d,\n    D: Point3d,\n    E: Point3d,\n    color = 'black',\n    affichageNom = false,\n    nom = 'ABCDEFGH',\n  ) {\n    super()\n    this.affichageNom = affichageNom\n    const v1 = vecteur3d(A, B)\n    const v2 = vecteur3d(A, E)\n    const C = translation3d(D, v1)\n    const H = translation3d(D, v2)\n    const G = translation3d(C, v2)\n    const F = translation3d(B, v2)\n\n    // Determination du point caché\n    function distanceMoyenne4points(pt: Point3d) {\n      const dist1 = longueur(pt.c2d, A.c2d, 5)\n      const dist2 = longueur(pt.c2d, B.c2d, 5)\n      const dist3 = longueur(pt.c2d, C.c2d, 5)\n      const dist4 = longueur(pt.c2d, D.c2d, 5)\n      return arrondi((dist1 + dist2 + dist3 + dist4) / 4, 5)\n    }\n\n    E.isVisible = !estDansQuadrilatere(E.c2d, A.c2d, B.c2d, C.c2d, D.c2d)\n    F.isVisible = !estDansQuadrilatere(F.c2d, A.c2d, B.c2d, C.c2d, D.c2d)\n    G.isVisible = !estDansQuadrilatere(G.c2d, A.c2d, B.c2d, C.c2d, D.c2d)\n    H.isVisible = !estDansQuadrilatere(H.c2d, A.c2d, B.c2d, C.c2d, D.c2d)\n    if (E.isVisible && F.isVisible && G.isVisible && H.isVisible) {\n      const minimum = Math.min(\n        distanceMoyenne4points(E),\n        distanceMoyenne4points(F),\n        distanceMoyenne4points(G),\n        distanceMoyenne4points(H),\n      )\n      E.isVisible = minimum !== distanceMoyenne4points(E)\n      F.isVisible = minimum !== distanceMoyenne4points(F)\n      G.isVisible = minimum !== distanceMoyenne4points(G)\n      H.isVisible = minimum !== distanceMoyenne4points(H)\n    }\n    // Fin de determination du point caché\n    this.sommets = [A, B, C, D, E, F, G, H]\n    this.color = colorToLatexOrHTML(color)\n    this.base = polygone3d(A, B, F, E)\n    this.hauteur = vecteur3d(A, D)\n    this.c2d = []\n    this.aretes = [\n      arete3d(A, B, color),\n      arete3d(A, D, color),\n      arete3d(A, E, color),\n      arete3d(C, B, color),\n      arete3d(F, B, color),\n      arete3d(C, D, color),\n      arete3d(C, G, color),\n      arete3d(F, G, color),\n      arete3d(F, E, color),\n      arete3d(H, G, color),\n      arete3d(H, E, color),\n      arete3d(H, D, color),\n    ]\n    for (const arete of this.aretes) {\n      this.c2d.push(arete.c2d)\n    }\n    if (this.affichageNom) {\n      let pointsFace = [A.c2d, B.c2d, C.c2d, D.c2d]\n      A.c2d.nom = nom[0]\n      B.c2d.nom = nom[1]\n      C.c2d.nom = nom[2]\n      D.c2d.nom = nom[3]\n      E.c2d.nom = nom[4]\n      F.c2d.nom = nom[5]\n      G.c2d.nom = nom[6]\n      H.c2d.nom = nom[7]\n\n      const faceAV = polygoneAvecNom(...pointsFace, context.isHtml ? 0.5 : 1.5)\n      pointsFace = [E.c2d, F.c2d, G.c2d, H.c2d]\n      const faceArr = polygoneAvecNom(...pointsFace, context.isHtml ? 0.5 : 1.5)\n      this.c2d.push(faceAV[1], faceArr[1])\n    }\n  }\n}\n/**\n * Construit le pavé ABCDEFGH dont les arêtes [AB],[AD] et [AE] délimitent 3 faces adjacentes.\n * La gestion des arêtes cachées est prise en compte et n'est pas forcément E.\n * En travaillant sur le signe de context.anglePerspective et sur celui de la hauteur (B.z), on peut avoir une vision de haut, de bas, de gauche, de droite comme dans l'exercice....\n * @param {Point3d} A Sommet du pavé droit\n * @param {Point3d} B Sommet du pavé droit\n * @param {Point3d} D Sommet du pavé droit\n * @param {Point3d} E Sommet du pavé droit\n * @param {boolean} [affichageNom = false] Permet (ou pas) l'affichage du nom des sommets du pavé droit.\n * @param {string} [nom = 'ABCDEFGH'] Nom du pavé droit\n * @example pave(A,B,D,E) // Créé un pavé noir sans nom\n * @example pave(A,B,D,E,'blue') // Créé un pavé bleu sans nom\n * @example pave(A,B,D,E,'red',true,'MNOPQRST') // Créé un pavé rouge dont les sommets sont nommés M, N, O, P, Q, R, S et T\n * @author Jean-Claude Lhote (optimisé par Eric Elter)\n * @return {Pave3d}\n */\nexport function pave3d(\n  A: Point3d,\n  B: Point3d,\n  D: Point3d,\n  E: Point3d,\n  color = 'black',\n  affichageNom = false,\n  nom = 'ABCDEFGH',\n) {\n  return new Pave3d(A, B, D, E, color, affichageNom, nom)\n}\n"],"names":["PaveLPH3d","ObjetMathalea2D","x","y","z","c","l","h","color","A","B","C","D","F","G","H","faceAv","faceTop","faceD","vx","vecteur3d","vy","vz","i","j","k","point3d","translation3d","polygone","colorToLatexOrHTML","paveLPH3d","p","Pave3d","E","affichageNom","nom","v1","v2","distanceMoyenne4points","pt","dist1","longueur","dist2","dist3","dist4","arrondi","estDansQuadrilatere","minimum","polygone3d","arete3d","arete","pointsFace","faceAV","polygoneAvecNom","context","faceArr","pave3d"],"mappings":"iTAeO,MAAMA,UAAkBC,CAAgB,CAC7C,YACEC,EACAC,EACAC,EACAC,EACAC,EACA,EACAC,EACAC,EAAQ,QACR,CACA,MAAA,EACA,IAAIC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAQC,EAASC,EAC1C,KAAK,IAAM,CAAA,EACX,MAAMC,EAAKC,EAAUf,EAAG,EAAG,CAAC,EACtBgB,EAAKD,EAAU,EAAGf,EAAG,CAAC,EACtBiB,EAAKF,EAAU,EAAG,EAAGf,CAAC,EAE5B,QAASkB,EAAI,EAAGA,EAAIjB,EAAGiB,IACrB,QAASC,EAAI,EAAGA,EAAI,EAAGA,IACrB,QAASC,EAAI,EAAGA,EAAIlB,EAAGkB,IACrBhB,EAAIiB,EAAQxB,EAAIqB,EAAIlB,EAAGF,EAAIqB,EAAInB,EAAGD,EAAIqB,EAAIpB,CAAC,EAC3CK,EAAIiB,EAAclB,EAAGU,CAAE,EACvBR,EAAIgB,EAAcjB,EAAGY,CAAE,EACvBV,EAAIe,EAAclB,EAAGa,CAAE,EACvBT,EAAIc,EAAcjB,EAAGW,CAAE,EACvBP,EAAIa,EAAcd,EAAGS,CAAE,EACvBP,EAAIY,EAAcf,EAAGS,CAAE,EACnBG,IAAM,IACRR,EAASY,EAAS,CAACnB,EAAE,IAAKC,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EAAGJ,CAAK,EACrDQ,EAAO,qBAAuBa,EAAmB,WAAW,EAC5D,KAAK,IAAI,KAAKb,CAAM,GAElBO,IAAMjB,EAAI,IACZY,EAAQU,EAAS,CAAClB,EAAE,IAAKG,EAAE,IAAKC,EAAE,IAAKH,EAAE,GAAG,EAAGH,CAAK,EACpDU,EAAM,qBAAuBW,EAAmB,UAAU,EAC1D,KAAK,IAAI,KAAKX,CAAK,GAEjBO,IAAMlB,EAAI,IACZU,EAAUW,EAAS,CAAChB,EAAE,IAAKD,EAAE,IAAKG,EAAE,IAAKC,EAAE,GAAG,EAAGP,CAAK,EACtDS,EAAQ,qBAAuBY,EAAmB,OAAO,EACzD,KAAK,IAAI,KAAKZ,CAAO,EAK/B,CACF,CAaO,SAASa,EACd5B,EACAC,EACAC,EACAC,EACAC,EACAyB,EACAxB,EACAC,EAAQ,QACR,CACA,OAAO,IAAIR,EAAUE,EAAGC,EAAGC,EAAGC,EAAGC,EAAGyB,EAAGxB,EAAGC,CAAK,CACjD,CAoBO,MAAMwB,UAAe/B,CAAgB,CAC1C,YACEQ,EACAC,EACAE,EACAqB,EACAzB,EAAQ,QACR0B,EAAe,GACfC,EAAM,WACN,CACA,MAAA,EACA,KAAK,aAAeD,EACpB,MAAME,EAAKhB,EAAUX,EAAGC,CAAC,EACnB2B,EAAKjB,EAAUX,EAAGwB,CAAC,EACnBtB,EAAIgB,EAAcf,EAAGwB,CAAE,EACvBrB,EAAIY,EAAcf,EAAGyB,CAAE,EACvBvB,EAAIa,EAAchB,EAAG0B,CAAE,EACvBxB,EAAIc,EAAcjB,EAAG2B,CAAE,EAG7B,SAASC,EAAuBC,EAAa,CAC3C,MAAMC,EAAQC,EAASF,EAAG,IAAK9B,EAAE,IAAK,CAAC,EACjCiC,EAAQD,EAASF,EAAG,IAAK7B,EAAE,IAAK,CAAC,EACjCiC,EAAQF,EAASF,EAAG,IAAK5B,EAAE,IAAK,CAAC,EACjCiC,EAAQH,EAASF,EAAG,IAAK3B,EAAE,IAAK,CAAC,EACvC,OAAOiC,GAASL,EAAQE,EAAQC,EAAQC,GAAS,EAAG,CAAC,CACvD,CAMA,GAJAX,EAAE,UAAY,CAACa,EAAoBb,EAAE,IAAKxB,EAAE,IAAKC,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EACpEC,EAAE,UAAY,CAACiC,EAAoBjC,EAAE,IAAKJ,EAAE,IAAKC,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EACpEE,EAAE,UAAY,CAACgC,EAAoBhC,EAAE,IAAKL,EAAE,IAAKC,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EACpEG,EAAE,UAAY,CAAC+B,EAAoB/B,EAAE,IAAKN,EAAE,IAAKC,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EAChEqB,EAAE,WAAapB,EAAE,WAAaC,EAAE,WAAaC,EAAE,UAAW,CAC5D,MAAMgC,EAAU,KAAK,IACnBT,EAAuBL,CAAC,EACxBK,EAAuBzB,CAAC,EACxByB,EAAuBxB,CAAC,EACxBwB,EAAuBvB,CAAC,CAAA,EAE1BkB,EAAE,UAAYc,IAAYT,EAAuBL,CAAC,EAClDpB,EAAE,UAAYkC,IAAYT,EAAuBzB,CAAC,EAClDC,EAAE,UAAYiC,IAAYT,EAAuBxB,CAAC,EAClDC,EAAE,UAAYgC,IAAYT,EAAuBvB,CAAC,CACpD,CAEA,KAAK,QAAU,CAACN,EAAGC,EAAGC,EAAGC,EAAGqB,EAAGpB,EAAGC,EAAGC,CAAC,EACtC,KAAK,MAAQc,EAAmBrB,CAAK,EACrC,KAAK,KAAOwC,EAAWvC,EAAGC,EAAGG,EAAGoB,CAAC,EACjC,KAAK,QAAUb,EAAUX,EAAGG,CAAC,EAC7B,KAAK,IAAM,CAAA,EACX,KAAK,OAAS,CACZqC,EAAQxC,EAAGC,EAAGF,CAAK,EACnByC,EAAQxC,EAAGG,EAAGJ,CAAK,EACnByC,EAAQxC,EAAGwB,EAAGzB,CAAK,EACnByC,EAAQtC,EAAGD,EAAGF,CAAK,EACnByC,EAAQpC,EAAGH,EAAGF,CAAK,EACnByC,EAAQtC,EAAGC,EAAGJ,CAAK,EACnByC,EAAQtC,EAAGG,EAAGN,CAAK,EACnByC,EAAQpC,EAAGC,EAAGN,CAAK,EACnByC,EAAQpC,EAAGoB,EAAGzB,CAAK,EACnByC,EAAQlC,EAAGD,EAAGN,CAAK,EACnByC,EAAQlC,EAAGkB,EAAGzB,CAAK,EACnByC,EAAQlC,EAAGH,EAAGJ,CAAK,CAAA,EAErB,UAAW0C,KAAS,KAAK,OACvB,KAAK,IAAI,KAAKA,EAAM,GAAG,EAEzB,GAAI,KAAK,aAAc,CACrB,IAAIC,EAAa,CAAC1C,EAAE,IAAKC,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EAC5CH,EAAE,IAAI,IAAM0B,EAAI,CAAC,EACjBzB,EAAE,IAAI,IAAMyB,EAAI,CAAC,EACjBxB,EAAE,IAAI,IAAMwB,EAAI,CAAC,EACjBvB,EAAE,IAAI,IAAMuB,EAAI,CAAC,EACjBF,EAAE,IAAI,IAAME,EAAI,CAAC,EACjBtB,EAAE,IAAI,IAAMsB,EAAI,CAAC,EACjBrB,EAAE,IAAI,IAAMqB,EAAI,CAAC,EACjBpB,EAAE,IAAI,IAAMoB,EAAI,CAAC,EAEjB,MAAMiB,EAASC,EAAgB,GAAGF,EAAYG,EAAQ,OAAS,GAAM,GAAG,EACxEH,EAAa,CAAClB,EAAE,IAAKpB,EAAE,IAAKC,EAAE,IAAKC,EAAE,GAAG,EACxC,MAAMwC,EAAUF,EAAgB,GAAGF,EAAYG,EAAQ,OAAS,GAAM,GAAG,EACzE,KAAK,IAAI,KAAKF,EAAO,CAAC,EAAGG,EAAQ,CAAC,CAAC,CACrC,CACF,CACF,CAiBO,SAASC,EACd/C,EACAC,EACAE,EACAqB,EACAzB,EAAQ,QACR0B,EAAe,GACfC,EAAM,WACN,CACA,OAAO,IAAIH,EAAOvB,EAAGC,EAAGE,EAAGqB,EAAGzB,EAAO0B,EAAcC,CAAG,CACxD"}