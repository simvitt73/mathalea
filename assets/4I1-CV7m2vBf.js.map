{"version":3,"file":"4I1-CV7m2vBf.js","sources":["../../src/exercices/4e/4I1.ts"],"sourcesContent":["import { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { bleuMathalea, orangeMathalea } from '../../lib/colors'\nimport { setCliqueFigure } from '../../lib/interactif/gestionInteractif'\nimport { combinaisonListes, shuffle } from '../../lib/outils/arrayOutils'\nimport { texteEnCouleurEtGras } from '../../lib/outils/embellissements'\nimport { range } from '../../lib/outils/nombres'\nimport {\n  avance,\n  baisseCrayon,\n  creerLutin,\n  tournerD,\n} from '../../modules/2dLutin'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu } from '../../modules/outils'\nimport { scratchblock } from '../../modules/scratchblock'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Dessiner avec scratch'\nexport const dateDeModifImportante = '10/06/2025'\nexport const interactifReady = true\nexport const interactifType = 'cliqueFigure'\n\n/**\n * Dessiner selon un programme scratch\n * @author Sébastien Lozano\n * implémentation fonction scratchblock par Jean-Claude Lhote\n * Interactivité, grosse refactorisation par Eric Elter le 10/06/2025\n */\n\nexport const uuid = '33c9a'\n\nexport const refs = {\n  'fr-fr': ['4I1', '3AutoI01-1'],\n  'fr-ch': ['autres-16'],\n}\nexport default class TracerAvecScratch extends Exercice {\n  constructor() {\n    super()\n    this.consigne =\n      'Laquelle des 4 figures ci-dessous va être tracée avec le script fourni ?'\n    this.typeExercice = 'Scratch'\n    this.nbQuestions = 3\n  }\n\n  nouvelleVersion() {\n    const typesDeQuestionsDisponibles = [1, 2, 3, 4, 5]\n\n    const listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    ) // Tous les types de questions sont posées mais l'ordre diffère à chaque \"cycle\"\n\n    this.figures = [[], [], [], []]\n\n    for (\n      let i = 0, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      // une fonction pour gérer la sortie HTML/LaTeX\n      // code est un string contenant le code svg ou tikz\n\n      // une fonction pour dire le nom du polygone\n      const myPolyName = (n: number) => {\n        const sortie = {\n          name: '',\n          nameParSommets: '',\n          nbPas: 0,\n        }\n        switch (n) {\n          case 2:\n            sortie.name = 'segment'\n            sortie.nbPas = 400\n            break\n          case 3:\n            sortie.name = 'triangle équilatéral'\n            sortie.nbPas = 400\n            break\n          case 4:\n            sortie.name = 'carré'\n            sortie.nbPas = 400\n            break\n          case 5:\n            sortie.name = 'pentagone régulier'\n            sortie.nbPas = 300\n            break\n          case 6:\n            sortie.name = 'hexagone régulier'\n            sortie.nbPas = 250\n            break\n          case 7:\n            sortie.name = 'heptagone régulier'\n            sortie.nbPas = 200\n            break\n          case 8:\n            sortie.name = 'octogone régulier'\n            sortie.nbPas = 200\n            break\n          case 9:\n            sortie.name = 'ennéagone régulier'\n            sortie.nbPas = 200\n            break\n        }\n        return sortie\n      }\n\n      // une fonction pour renvoyer une situation\n      // n définit le nombre de côtés du polygone régulier\n      const mySituation = (n: number) => {\n        const situations = [\n          {\n            // polygones réguliers\n            nbCotes: n,\n            nom: myPolyName(n).name,\n            codeScratch: `\\\\begin{scratch}\n\\\\blockinit{quand \\\\greenflag est cliqué}\n\\\\blockpen{stylo en position d'écriture}\n\\\\blockrepeat{répéter \\\\ovalnum{${n}} fois}\n{\n\\\\blockmove{avancer de \\\\ovalnum{${myPolyName(n).nbPas}} pas}\n\\\\blockmove{tourner \\\\turnright{} de \\\\ovaloperator{\\\\ovalnum{360}/\\\\ovalnum{${n}}} degrés}\n}\n\\\\end{scratch}`,\n            fig: '',\n            fig_corr: '',\n          },\n        ]\n\n        const lutinEnonce = []\n        const figLutinEnonce = []\n\n        // le lutinEnonce[indiceLutin] fait la bonne figure\n        const tabNbCote = [n, n + 1, n - 1, n]\n        for (let indiceLutin = 0; indiceLutin < 4; indiceLutin++) {\n          lutinEnonce[indiceLutin] = creerLutin()\n          lutinEnonce[indiceLutin].stringColor = bleuMathalea\n          baisseCrayon(lutinEnonce[indiceLutin])\n          for (let k = 1; k < tabNbCote[indiceLutin] + 1; k++) {\n            avance(\n              myPolyName(tabNbCote[indiceLutin]).nbPas / 6,\n              lutinEnonce[indiceLutin],\n            )\n            tournerD(\n              360 / tabNbCote[indiceLutin] - (indiceLutin === 3 ? 10 : 0),\n              lutinEnonce[indiceLutin],\n            )\n          }\n          lutinEnonce[indiceLutin].updateBordures()\n          figLutinEnonce[indiceLutin] = mathalea2d(\n            Object.assign(\n              {\n                style: 'display: inline-block',\n                xmin: -4,\n                ymin: -13.5,\n                xmax: 10,\n                ymax: 0.5,\n                pixelsParCm: 20,\n                scale: 0.4,\n                id: `cliquefigure${indiceLutin}Ex${this.numeroExercice}Q${i}`,\n              },\n              fixeBordures([lutinEnonce[indiceLutin]]),\n            ),\n            lutinEnonce[indiceLutin],\n          )\n        }\n        const ordre = shuffle(range(3))\n        situations[0].fig =\n          figLutinEnonce[ordre[0]] +\n          figLutinEnonce[ordre[1]] +\n          figLutinEnonce[ordre[2]] +\n          figLutinEnonce[ordre[3]]\n\n        const lutinCorr = creerLutin()\n        lutinCorr.stringColor = orangeMathalea\n        baisseCrayon(lutinCorr)\n        for (let k = 1; k < n + 1; k++) {\n          avance(myPolyName(n).nbPas / 6, lutinCorr)\n          tournerD(360 / n, lutinCorr)\n        }\n        lutinCorr.updateBordures()\n\n        const figLutinCorr = mathalea2d(\n          Object.assign(\n            {\n              style: 'display: inline-block',\n              xmin: -4,\n              ymin: -13.5,\n              xmax: 10,\n              ymax: 0.5,\n              pixelsParCm: 20,\n              scale: 0.4,\n            },\n            fixeBordures([lutinCorr]),\n          ),\n          lutinCorr,\n        )\n\n        situations[0].fig_corr = figLutinCorr\n\n        const enonces = []\n        enonces.push({\n          enonce: `\n          ${scratchblock(situations[0].codeScratch)}\n          <br>\n          ${situations[0].fig}\n          `,\n          question: '',\n          correction: `\n          La figure tracée par le programme a ${situations[0].nbCotes} côtés de même longueur et ${situations[0].nbCotes} angles de même mesure, c'est un ${texteEnCouleurEtGras(situations[0].nom, bleuMathalea)}.\n          <br><br>\n          ${situations[0].fig_corr}\n          `,\n        })\n\n        return enonces\n      }\n      this.figures[i] = [\n        { id: `cliquefigure0Ex${this.numeroExercice}Q${i}`, solution: true },\n        { id: `cliquefigure1Ex${this.numeroExercice}Q${i}`, solution: false },\n        { id: `cliquefigure2Ex${this.numeroExercice}Q${i}`, solution: false },\n        { id: `cliquefigure3Ex${this.numeroExercice}Q${i}`, solution: false },\n      ]\n\n      const enonces = []\n      enonces.push(mySituation(3)[0])\n      enonces.push(mySituation(4)[0])\n      enonces.push(mySituation(5)[0])\n      enonces.push(mySituation(6)[0])\n      enonces.push(mySituation(8)[0])\n      texte = `${enonces[listeTypeDeQuestions[i] - 1].enonce}`\n      texteCorr = `${enonces[listeTypeDeQuestions[i] - 1].correction}`\n      if (this.interactif) {\n        this.autoCorrection[i] = {}\n        setCliqueFigure(this.autoCorrection[i])\n\n        texte += `<span id=\"resultatCheckEx${this.numeroExercice}Q${i}\"></span>`\n      }\n\n      if (this.questionJamaisPosee(i, texte)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","dateDeModifImportante","interactifReady","interactifType","uuid","refs","TracerAvecScratch","Exercice","listeTypeDeQuestions","combinaisonListes","i","texte","texteCorr","cpt","myPolyName","n","sortie","mySituation","situations","lutinEnonce","figLutinEnonce","tabNbCote","indiceLutin","creerLutin","bleuMathalea","baisseCrayon","k","avance","tournerD","mathalea2d","fixeBordures","ordre","shuffle","range","lutinCorr","orangeMathalea","figLutinCorr","enonces","scratchblock","texteEnCouleurEtGras","setCliqueFigure","listeQuestionsToContenu"],"mappings":"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"}