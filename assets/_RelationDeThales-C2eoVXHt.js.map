{"version":3,"file":"_RelationDeThales-C2eoVXHt.js","sources":["../../src/exercices/4e/_RelationDeThales.ts"],"sourcesContent":["import { pointAbstrait } from '../../lib/2d/PointAbstrait'\nimport { polygone } from '../../lib/2d/polygones'\nimport { texteParPoint } from '../../lib/2d/textes'\nimport { homothetie, similitude } from '../../lib/2d/transformations'\nimport { triangle2points2longueurs } from '../../lib/2d/triangles'\nimport {\n  angle,\n  angleOriente,\n  longueur,\n} from '../../lib/2d/utilitairesGeometriques'\nimport { pointAdistance, pointSurSegment } from '../../lib/2d/utilitairesPoint'\nimport { texteGras } from '../../lib/format/style'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { ajouterBoutonMathalea2d } from '../../lib/outils/enrichissements'\nimport { creerNomDePolygone } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Écrire une relation de Thalès'\nexport const interactifType = 'mathLive'\nexport const interactifReady = true\n/**\n * Relation de Thalès\n * @author Sébastien LOZANO\n */\n\n/**\n * Génère toutes les permutations uniques d’un tableau de chaînes.\n *\n * @param arr - Tableau d'éléments (chaînes) à permuter.\n * @returns Un tableau de permutations uniques, où chaque permutation est un tableau de chaînes.\n * @author Eric Elter\n */\nfunction permutationsUnique(arr: string[]): string[][] {\n  const results = new Set<string>()\n  function permute(a: string[], l = 0): void {\n    if (l === a.length - 1) {\n      results.add(a.join('||'))\n      return\n    }\n    for (let i = l; i < a.length; i++) {\n      const b = a.slice()\n      ;[b[l], b[i]] = [b[i], b[l]]\n      permute(b, l + 1)\n    }\n  }\n  permute(arr.slice())\n  return Array.from(results).map((s) => s.split('||'))\n}\n\n/**\n * Extrait toutes les fractions \\dfrac{...}{...} d’un texte LaTeX.\n *\n * @param texte - Chaîne contenant des fractions LaTeX du type \\dfrac{...}{...}.\n * @returns Un tableau d’objets représentant les fractions extraites avec leur forme brute, numérateur et dénominateur.\n * @author Eric Elter\n */\nfunction extraireFractions(\n  texte: string,\n): { raw: string; num: string; den: string }[] {\n  const re = /\\\\dfrac\\{([^}]*)\\}\\{([^}]*)\\}/g\n  const fractions: { raw: string; num: string; den: string }[] = []\n  let m: RegExpExecArray | null\n  while ((m = re.exec(texte)) !== null) {\n    fractions.push({ raw: m[0], num: m[1], den: m[2] })\n  }\n  return fractions\n}\n\n/**\n * Génère toutes les variantes d'une expression (numérateur ou dénominateur)\n * en tenant compte :\n *  - des permutations à l'intérieur des ${...} ou des \"a + b\"\n *  - des inversions de lettres majuscules (\"GE\" ↔ \"EG\")\n *\n * @param content - Contenu du numérateur ou du dénominateur.\n * @returns Un tableau de variantes de l’expression.\n *\n * @example\n * variantsFor(\"GE\")\n * // => [\"GE\", \"EG\"]\n *\n * variantsFor(\"${a + b}\")\n * // => [\"${a + b}\", \"${b + a}\"]\n *\n * @author Eric Elter\n */\nfunction variantsFor(content: string): string[] {\n  const trimmed = content.trim()\n\n  // Cas 1 : interpolation JS ${...}\n  const dollarCurly = /^\\$\\{([\\s\\S]+)\\}$/.exec(trimmed)\n  if (dollarCurly) {\n    const operands = dollarCurly[1].split(/\\s*\\+\\s*/).map((s) => s.trim())\n    const perms = permutationsUnique(operands)\n    return perms.map((parts) => `\\${${parts.join(' + ')}}`)\n  }\n\n  // Cas 2 : expression \"a + b\"\n  if (trimmed.includes('+')) {\n    const operands = trimmed.split(/\\s*\\+\\s*/).map((s) => s.trim())\n    const perms = permutationsUnique(operands)\n    return perms.map((parts) => parts.join(' + '))\n  }\n\n  // Cas 3 : lettres majuscules collées (ex: GE → EG)\n  if (/^[A-Z]{2,}$/.test(trimmed)) {\n    const letters = trimmed.split('')\n    const perms = permutationsUnique(letters)\n    return perms.map((l) => l.join(''))\n  }\n\n  // Cas par défaut : aucune permutation possible\n  return [trimmed]\n}\n\n/**\n * Génère toutes les variantes équivalentes (commutatives) pour chaque fraction trouvée dans un texte.\n *\n * @param texte - Chaîne contenant des fractions LaTeX du type \\dfrac{...}{...}.\n * @returns Un tableau de sous-tableaux : chaque sous-tableau contient les variantes d’une fraction donnée.\n * @example\n * genererVariantsParFraction(\"\\\\dfrac{GE}{GH}=\\\\dfrac{BF}{BK}\")\n * // => [[\"\\\\dfrac{GE}{GH}\", \"\\\\dfrac{EG}{GH}\", \"\\\\dfrac{GE}{HG}\", \"\\\\dfrac{EG}{HG}\"], ...]\n * @author Eric Elter\n */\nfunction genererVariantsParFraction(texte: string): string[][] {\n  const fractions = extraireFractions(texte)\n  return fractions.map((f) => {\n    const numVars = variantsFor(f.num)\n    const denVars = variantsFor(f.den)\n    const variants = new Set<string>()\n    for (const nv of numVars) {\n      for (const dv of denVars) {\n        variants.add(`\\\\dfrac{${nv}}{${dv}}`)\n      }\n    }\n    return Array.from(variants)\n  })\n}\n\n/**\n * Inverse une fraction LaTeX du type \\dfrac{num}{den}.\n *\n * @param fraction - Fraction LaTeX à inverser.\n * @returns La fraction inversée (\\dfrac{den}{num}).\n * @example\n * inverserFraction(\"\\\\dfrac{GE}{GH}\")\n * // => \"\\\\dfrac{GH}{GE}\"\n * @author Eric Elter\n */\nfunction inverserFraction(fraction: string): string {\n  const match = /\\\\dfrac\\{([^}]*)\\}\\{([^}]*)\\}/.exec(fraction)\n  if (!match) return fraction\n  const [, num, den] = match\n  return `\\\\dfrac{${den}}{${num}}`\n}\n\n/**\n * Génère toutes les égalités triples possibles entre les fractions d'un texte,\n * y compris leurs inverses.\n * Chaque égalité relie une variante de chaque fraction, et peut inclure toutes les permutations d’ordre.\n *\n * @param texte - Chaîne contenant des fractions LaTeX du type \\dfrac{...}{...}.\n * @param inclurePermutations - Si true, inclut aussi toutes les permutations d’ordre entre les fractions.\n * @returns Un tableau de chaînes représentant des égalités complètes de type \"f1 = f2 = f3\" et leurs inverses.\n * @example\n * genererToutesEgalites(\"\\\\dfrac{GE}{GH}=\\\\dfrac{BF}{BK}=\\\\dfrac{AB}{CD}\", true)\n * // => [\"\\\\dfrac{GE}{GH} = \\\\dfrac{BF}{BK} = \\\\dfrac{AB}{CD}\", \"\\\\dfrac{GH}{GE} = \\\\dfrac{BK}{BF} = \\\\dfrac{CD}{AB}\", ...]\n * @throws Erreur si le texte contient moins de trois fractions.\n * @author Eric Elter\n */\nfunction genererToutesEgalites(\n  texte: string,\n  inclurePermutations = false,\n): string[] {\n  const groupes = genererVariantsParFraction(texte)\n  if (groupes.length < 3)\n    throw new Error('Il faut au moins trois fractions dans le texte.')\n\n  const egalites = new Set<string>()\n\n  // Produit cartésien entre les 3 groupes\n  for (const f1 of groupes[0]) {\n    for (const f2 of groupes[1]) {\n      for (const f3 of groupes[2]) {\n        const base = [f1, f2, f3]\n        const baseStr = base.join('=')\n        egalites.add(baseStr)\n\n        // Ajoute la version inverse (toutes les fractions inversées)\n        const inverses = base.map(inverserFraction).join('=')\n        egalites.add(inverses)\n\n        if (inclurePermutations) {\n          for (const perm of permutationsUnique(base)) {\n            egalites.add(perm.join('='))\n            const invPerm = perm.map(inverserFraction)\n            egalites.add(invPerm.join('='))\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(egalites)\n}\n\nexport default class RelationDeThales extends Exercice {\n  level: number\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Configuration',\n      3,\n      '1 : Triangles imbriqués\\n2 : Papillon\\n3 : Mélange',\n    ]\n\n    this.nbQuestions = 1\n\n    this.sup = 1 // Triangles imbriqués / configuration papillon / les 2\n    this.level = 4\n  }\n\n  nouvelleVersion(numeroExercice: number) {\n    let listeDeNomsDePolygones: string[] = []\n\n    if (this.level === 4) {\n      this.sup = 1\n    }\n    const premiereQuestionPapillon = randint(0, 1) // Pour alterner les configurations et savoir par laquelle on commence\n\n    for (\n      let i = 0, texte = '', texteCorr = '', cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n\n    ) {\n      // this.autoCorrection[i] = {}\n      if (i % 3 === 0) {\n        // Toutes les 3 questions, on repart à zéro sur les noms des polygones\n        listeDeNomsDePolygones = ['QD']\n      }\n      const nomDesPoints = creerNomDePolygone(5, listeDeNomsDePolygones)\n      listeDeNomsDePolygones.push(nomDesPoints)\n      const nomA = nomDesPoints[0]\n      const nomB = nomDesPoints[1]\n      const nomC = nomDesPoints[2]\n      const nomM = nomDesPoints[3]\n      const nomN = nomDesPoints[4]\n      const ab = randint(5, 10)\n      const ac = randint(5, 10, ab)\n      const bc = randint(Math.max(ab - ac, ac - ab) + 1, ab + ac - 1, [ab, ac]) // Pas de triangle isocèle ou équilatéral\n      const A = pointAbstrait(0, 0, nomA)\n      const B = pointAdistance(A, ab, nomB)\n      const ABC = triangle2points2longueurs(A, B, ac, bc)\n      ABC.id = `M2D_${numeroExercice}_${i}_1`\n      const C = ABC.listePoints[2]\n      C.nom = nomC\n      let k = randint(3, 8, 5) / 10\n      if (this.sup === 2) {\n        k *= -1\n      }\n      if (this.sup === 3 && (i + premiereQuestionPapillon) % 2 === 0) {\n        k *= -1\n      }\n      const M = homothetie(A, C, k)\n      const N = homothetie(B, C, k)\n      const MNC = polygone(M, N, C)\n      MNC.id = `M2D_${numeroExercice}_${i}_2`\n      const m = pointSurSegment(M, N, -0.5)\n      const n = pointSurSegment(N, M, -0.5)\n      const marqueNomM = texteParPoint(nomM, m, 0, 'black', 1, 'milieu', true)\n      const marqueNomN = texteParPoint(nomN, n, 0, 'black', 1, 'milieu', true)\n      const a = pointSurSegment(A, B, -0.5)\n      const b = pointSurSegment(B, A, -0.5)\n      const marqueNomA = texteParPoint(nomA, a, 0, 'black', 1, 'milieu', true)\n      const marqueNomB = texteParPoint(nomB, b, 0, 'black', 1, 'milieu', true)\n      let c\n      if (k < 0) {\n        if (angle(A, C, N) < angle(N, C, A)) {\n          c = similitude(A, C, -angleOriente(A, C, N) / 2, 1 / longueur(A, C))\n        } else {\n          c = similitude(\n            A,\n            C,\n            -angleOriente(N, C, A) / 2,\n            (1 / longueur(A, C)) * 0.5,\n          )\n        }\n      } else {\n        c = similitude(\n          A,\n          C,\n          -180 + angleOriente(A, C, B) / 2,\n          (1 / longueur(A, C)) * 0.5,\n        )\n      }\n      const marqueNomC = texteParPoint(nomC, c, 0, 'black', 1, 'milieu', true)\n\n      texte = 'Sur la figure suivante : '\n      if (k > 0) {\n        texte += `\n        <br> $\\\\leadsto ${nomM}$ est sur $${'[' + nomC + nomA + ']'}$,\n        <br> $\\\\leadsto ${nomN}$ est sur $${'[' + nomC + nomB + ']'}$,`\n      } else {\n        texte += `<br> $\\\\leadsto$ les droites $(${nomA + nomM})$ et $(${nomB + nomN})$ sont sécantes en $${nomC}$,`\n      }\n\n      texte += `<br> $\\\\leadsto$ les droites $(${nomA + nomB})$ et $(${nomM + nomN})$ sont parallèles.<br>Écrire la double égalité de Thalès`\n      if (this.interactif)\n        texte +=\n          ' : ' + ajouteChampTexteMathLive(this, i, KeyboardType.alphanumeric)\n      else texte += '.<br>'\n\n      texte += mathalea2d(\n        {\n          xmin: Math.min(A.x, B.x, C.x, M.x, N.x) - 1.5,\n          ymin: Math.min(A.y, B.y, C.y, M.y, N.y) - 0.8,\n          xmax: Math.max(A.x, B.x, C.x, M.x, N.x) + 1.5,\n          ymax: Math.max(A.y, B.y, C.y, M.y, N.y) + 0.8,\n          scale: 0.5,\n        },\n\n        ABC,\n        MNC,\n        marqueNomA,\n        marqueNomB,\n        marqueNomC,\n        marqueNomM,\n        marqueNomN,\n      )\n\n      const epaisseurTriangle = k < 0 ? 2 : 6 // En cas de configuration papillon il est inutile de changer l'épaisseur\n      const boutonAideMathalea2d = ajouterBoutonMathalea2d(\n        `${numeroExercice}_${i}`,\n        `if (!document.getElementById('M2D_${numeroExercice}_${i}_1').dataset.colorie == true || (document.getElementById('M2D_${numeroExercice}_${i}_1').dataset.colorie == 'false')){\n          document.getElementById('M2D_${numeroExercice}_${i}_1').style.stroke = 'blue';\n          document.getElementById('M2D_${numeroExercice}_${i}_2').style.stroke = 'red';\n          document.getElementById('M2D_${numeroExercice}_${i}_1').style.opacity = .5;\n          document.getElementById('M2D_${numeroExercice}_${i}_1').style.strokeWidth = ${epaisseurTriangle};\n          document.getElementById('M2D_${numeroExercice}_${i}_2').style.opacity = 1;\n          document.getElementById('M2D_${numeroExercice}_${i}_2').style.strokeWidth = 2;\n          document.getElementById('M2D_${numeroExercice}_${i}_1').dataset.colorie = true;\n          document.getElementById('btnMathALEA2d_${numeroExercice}_${i}').classList.add('active');\n        } else {\n          document.getElementById('M2D_${numeroExercice}_${i}_1').style.stroke = 'black';\n          document.getElementById('M2D_${numeroExercice}_${i}_2').style.stroke = 'black';\n          document.getElementById('M2D_${numeroExercice}_${i}_1').style.opacity = 1;\n          document.getElementById('M2D_${numeroExercice}_${i}_1').style.strokeWidth = 1;\n          document.getElementById('M2D_${numeroExercice}_${i}_2').style.opacity = 1;\n          document.getElementById('M2D_${numeroExercice}_${i}_2').style.strokeWidth = 1;\n          document.getElementById('M2D_${numeroExercice}_${i}_1').dataset.colorie = false;\n          document.getElementById('btnMathALEA2d_${numeroExercice}_${i}').classList.remove('active');\n  \n        }\n        `,\n        'Mettre en couleur les 2 triangles',\n      )\n\n      if (k > 0) {\n        texteCorr = `Dans le triangle $${nomA + nomB + nomC}$ :\n       <br> $\\\\leadsto$ $${nomM}\\\\in${'[' + nomC + nomA + ']'}$,\n       <br> $\\\\leadsto$ $${nomN}\\\\in${'[' + nomC + nomB + ']'}$,\n       <br> $\\\\leadsto$  $(${nomA + nomB})//(${nomM + nomN})$,\n       <br> donc d'après le théorème de Thalès, les triangles $${nomA + nomB + nomC}$ et $${nomM + nomN + nomC}$ ont des longueurs proportionnelles.`\n      } else {\n        texteCorr = `$\\\\leadsto$ Les droites $(${nomA + nomM})$ et $(${nomB + nomN})$ sont sécantes en $${nomC}$,\n        <br> $\\\\leadsto$ les droites $(${nomA + nomB})$ et $(${nomM + nomN})$ sont parallèles,<br>\n        donc d'après le théorème de Thalès, les triangles $${nomA + nomB + nomC}$ et $${nomM + nomN + nomC}$ ont des longueurs proportionnelles.`\n      }\n      texteCorr += '<br><br>'\n      if (context.isHtml) {\n        texteCorr += `$\\\\dfrac{\\\\color{red}${nomC + nomM}}{\\\\color{blue}${nomC + nomA}}=\\\\dfrac{\\\\color{red}${nomC + nomN}}{\\\\color{blue}${nomC + nomB}}=\\\\dfrac{\\\\color{red}${nomM + nomN}}{\\\\color{blue}${nomA + nomB}}$`\n      } else {\n        texteCorr += `$\\\\dfrac{${nomC + nomM}}{${nomC + nomA}}=\\\\dfrac{${nomC + nomN}}{${nomC + nomB}}=\\\\dfrac{${nomM + nomN}}{${nomA + nomB}}$`\n      }\n\n      texteCorr += context.isHtml ? '<br>' : '\\\\medskip'\n      texteCorr += `<br>${texteGras('Remarque')}<br>On pourrait aussi écrire : `\n      if (context.isHtml) {\n        texteCorr += `$\\\\dfrac{\\\\color{blue}${nomC + nomA}}{\\\\color{red}${nomC + nomM}}=\\\\dfrac{\\\\color{blue}${nomC + nomB}}{\\\\color{red}${nomC + nomN}}=\\\\dfrac{\\\\color{blue}${nomA + nomB}}{\\\\color{red}${nomM + nomN}}$`\n      } else {\n        texteCorr += `$\\\\dfrac{${nomC + nomA}}{${nomC + nomM}}=\\\\dfrac{${nomC + nomB}}{${nomC + nomN}}=\\\\dfrac{${nomA + nomB}}{${nomM + nomN}}$`\n      }\n      const reponse = genererToutesEgalites(\n        `\\\\dfrac{${nomC + nomA}}{${nomC + nomM}}=\\\\dfrac{${nomC + nomB}}{${nomC + nomN}}=\\\\dfrac{${nomA + nomB}}{${nomM + nomN}}`,\n        true,\n      )\n      handleAnswers(this, i, {\n        reponse: { value: reponse, options: { texteAvecCasse: true } },\n      })\n      if (context.isHtml) {\n        texte += `<br><div style=\"display: inline-block;margin-top:20px;\">${boutonAideMathalea2d}</div>`\n      }\n\n      if (this.questionJamaisPosee(i, ...nomDesPoints)) {\n        // Si la question n'a jamais été posée, on en créé une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","interactifType","interactifReady","permutationsUnique","arr","results","permute","a","l","i","b","s","extraireFractions","texte","re","fractions","m","variantsFor","content","trimmed","dollarCurly","operands","parts","letters","genererVariantsParFraction","f","numVars","denVars","variants","nv","dv","inverserFraction","fraction","match","num","den","genererToutesEgalites","inclurePermutations","groupes","egalites","f1","f2","f3","base","baseStr","inverses","perm","invPerm","RelationDeThales","Exercice","__publicField","numeroExercice","listeDeNomsDePolygones","premiereQuestionPapillon","randint","texteCorr","cpt","nomDesPoints","creerNomDePolygone","nomA","nomB","nomC","nomM","nomN","ab","ac","bc","A","pointAbstrait","B","pointAdistance","ABC","triangle2points2longueurs","C","k","M","homothetie","N","MNC","polygone","pointSurSegment","n","marqueNomM","texteParPoint","marqueNomN","marqueNomA","marqueNomB","c","angle","similitude","angleOriente","longueur","marqueNomC","ajouteChampTexteMathLive","KeyboardType","mathalea2d","epaisseurTriangle","boutonAideMathalea2d","ajouterBoutonMathalea2d","context","texteGras","reponse","handleAnswers","listeQuestionsToContenu"],"mappings":"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"}