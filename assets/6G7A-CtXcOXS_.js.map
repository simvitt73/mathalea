{"version":3,"file":"6G7A-CtXcOXS_.js","sources":["../../src/exercices/6e/6G7A.ts"],"sourcesContent":["import Figure from 'apigeom'\nimport { reflectOverLineCoord } from 'apigeom/src/elements/calculus/Coords'\nimport type Line from 'apigeom/src/elements/lines/Line'\nimport type PointApigeom from 'apigeom/src/elements/points/Point'\nimport { cercleCentrePoint } from '../../lib/2d/cercle'\nimport { codageAngleDroit } from '../../lib/2d/CodageAngleDroit'\nimport { codageMilieu } from '../../lib/2d/CodageMilieu'\nimport { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport {\n  Droite,\n  droiteHorizontaleParPoint,\n  droiteParPointEtPente,\n  droiteParPointEtPerpendiculaire,\n  droiteVerticaleParPoint,\n} from '../../lib/2d/droites'\nimport { grille } from '../../lib/2d/Grille'\nimport { pointAbstrait, PointAbstrait } from '../../lib/2d/PointAbstrait'\nimport {\n  labelPoint,\n  latexParCoordonnees,\n  LatexParCoordonnees,\n} from '../../lib/2d/textes'\nimport { TracePoint } from '../../lib/2d/TracePoint'\nimport { projectionOrtho, symetrieAxiale } from '../../lib/2d/transformations'\nimport { pointSurDroite } from '../../lib/2d/utilitairesPoint'\nimport type { Vide2d } from '../../lib/2d/Vide2d'\nimport figureApigeom, { isFigureArray } from '../../lib/figureApigeom'\nimport {\n  choice,\n  combinaisonListes,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport { creerNomDePolygone } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { egal, randint } from '../../modules/outils'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Construire des symétriques de points'\nexport const dateDePublication = '07/01/2024'\nexport const dateDeModifImportante = '15/04/2025'\nexport const interactifReady = true\nexport const interactifType = 'custom'\n\nexport const uuid = '26ea4'\n\nexport const refs = {\n  'fr-fr': ['6G7A'],\n  'fr-2016': ['6G24-0'],\n  'fr-ch': ['9ES6-11'],\n}\n\n/**\n * Fonction pour positionner le label\n * @param pointA\n * @param pointB\n */\nfunction positionneLabel(pointA: PointAbstrait, pointB: PointAbstrait) {\n  if (pointA.x < pointB.x) return 'above left'\n  else if (pointA.x > pointB.x) return 'below right'\n  else {\n    if (pointA.y > pointB.y) return 'above left'\n    else return 'below right'\n  }\n}\n\n/**\n * supprime les points hors cadre\n * @param points\n */\nfunction deletePoints(points: { x: number; y: number }[], type: number) {\n  const newPoints: { x: number; y: number }[] = []\n  const typeV = [\n    { x: 1, y: 0 },\n    { x: 0, y: 1 },\n    { x: 1, y: 1 },\n    { x: 1, y: -1 },\n  ]\n  for (const point of points) {\n    if (\n      point.x >= -7.5 &&\n      point.x <= 7.5 &&\n      point.y >= -7.5 &&\n      point.y <= 7.5 &&\n      point.x !== point.y &&\n      point.x !== -point.y\n    ) {\n      if (\n        !newPoints.some(\n          (e) =>\n            (e.x === point.x && e.y === point.y) ||\n            typeV[type].x * point.x + typeV[type].y * point.y ===\n              typeV[type].x * e.x + typeV[type].y * e.y,\n        )\n      ) {\n        newPoints.push(point)\n      }\n    }\n  }\n  return newPoints\n}\n\n/**\n * Construction interactive de symétriques de points\n * @author Jean-Claude Lhote\n */\nclass ConstrctionsSymetriquesPoints extends Exercice {\n  figuresApiGeom: Figure[] = []\n  nbPoints!: number\n  antecedents!: PointApigeom[][]\n  antecedentsMathalea2d!: PointAbstrait[][]\n  labels!: string[][]\n  d!: Line[]\n  exoCustomResultat: boolean\n\n  constructor() {\n    super()\n    this.exoCustomResultat = true\n    this.nbQuestions = 1\n    this.besoinFormulaireNumerique = [\n      \"Type d'axes\",\n      5,\n      '1 : Axe horizontal\\n2 : Axe vertical\\n3 : Axe oblique /\\n4 : Axe oblique \\\\\\n5 : Mélange',\n    ]\n    this.besoinFormulaire2Numerique = [\n      \"Type d'aide\",\n      4,\n      'Quadrillages\\nPerpendiculaires en pointillés\\nMarques de compas\\nAucune',\n    ]\n    this.besoinFormulaire3Numerique = [\n      'Nombre de points à construire (5 maxi)',\n      5,\n    ]\n    this.sup = 1\n    this.sup2 = 1\n    this.sup3 = 3\n    this.nbPoints = 3\n  }\n\n  nouvelleVersion() {\n    this.figuresApiGeom.forEach((fig) => {\n      fig.destroy()\n    })\n    this.figuresApiGeom = []\n    this.sup = Number(this.sup) || 1 // valeur min 1\n    const marks: string[] = ['//', '///', 'x', 'O', '|||']\n    const colors: string[] = context.isHtml\n      ? ['red', 'green', 'purple', 'blue', 'gray']\n      : ['gray', 'gray', 'gray', 'gray', 'gray']\n    this.answers = {}\n    let choixDeLaxe: number[] = []\n    if (this.sup === 5) {\n      choixDeLaxe = combinaisonListes([1, 2, 3, 4], this.nbQuestions)\n    } else {\n      choixDeLaxe = combinaisonListes([this.sup], this.nbQuestions)\n    }\n    this.nbPoints = Math.max(Math.min(this.sup3, 5), 1) // on veut entre 1 et 5 points à construire\n    this.antecedents = []\n    this.labels = []\n    this.d = []\n    for (let i = 0; i < this.nbQuestions; i++) {\n      let enonce = ''\n      let antecedentsMathalea2d: Array<PointAbstrait> = []\n      const middle: PointAbstrait[] = []\n      const middleMathalea2d: PointAbstrait[] = []\n      const symetriques: PointAbstrait[] = []\n      const symetriquesMathalea2d: PointAbstrait[] = []\n      const objets: NestedObjetMathalea2dArray = []\n      let objetsCorrection: NestedObjetMathalea2dArray = []\n      const d: Droite[] = []\n      let labelD!: LatexParCoordonnees | Vide2d\n\n      objets.length = 0\n      objetsCorrection.length = 0\n      middle.length = 0\n      symetriques.length = 0\n      antecedentsMathalea2d.length = 0\n      let nuage: { x: number; y: number }[] = []\n      let nuageSaved: { x: number; y: number }[] = []\n      // On construit les points\n      do {\n        nuage = []\n        for (let x = -4; x < 4; x += 1) {\n          nuage.push({ y: (randint(1, 3) * 2 + 1) * choice([-0.5, 0.5]), x })\n        }\n        // On transforme les points en fonction du choix de l'axe\n        if (choixDeLaxe[i] === 1) {\n          for (let n = 0; n < nuage.length; n++) {\n            nuage[n] = { x: nuage[n].x * 2, y: nuage[n].y * 2 }\n          }\n        } else if (choixDeLaxe[i] === 2) {\n          for (let n = 0; n < nuage.length; n++) {\n            nuage[n] = { x: nuage[n].y * 2, y: nuage[n].x * 2 }\n          }\n        } else if (choixDeLaxe[i] === 3) {\n          for (let n = 0; n < nuage.length; n++) {\n            nuage[n] = {\n              x: Math.round(Math.sqrt(2) * (nuage[n].x - nuage[n].y)),\n              y: Math.round(Math.sqrt(2) * (nuage[n].x + nuage[n].y)),\n            }\n          }\n        } else {\n          for (let n = 0; n < nuage.length; n++) {\n            nuage[n] = {\n              x: Math.round(Math.sqrt(2) * (nuage[n].x + nuage[n].y)),\n              y: Math.round(Math.sqrt(2) * (nuage[n].y - nuage[n].x)),\n            }\n          }\n        }\n        nuageSaved.push(...nuage)\n        nuageSaved = deletePoints(nuageSaved, choixDeLaxe[i] - 1)\n      } while (nuageSaved.length < this.nbPoints)\n      nuageSaved = shuffle(nuageSaved)\n      nuage = nuageSaved.slice(0, this.nbPoints)\n      this.labels[i] = creerNomDePolygone(nuage.length).split('')\n      // Rémi : avant, les lettres étaient au hasard avec Array.from(choisitLettresDifferentes(nuage.length, 'Q', true))\n      // Maintenant, je les mets dans l'ordre alphabétique pour faciliter l'interactivité\n\n      // Les antécédents sont des points nommés\n      antecedentsMathalea2d = shuffle(nuage).map((el, k) =>\n        pointAbstrait(el.x, el.y, this.labels[i][k]),\n      ) // on mélange et on ne prendra que les nbPoints premiers\n      const O = pointAbstrait(0, 0, '', 'above')\n\n      if (choixDeLaxe[i] === 1) {\n        d[i] = droiteHorizontaleParPoint(O) as Droite\n        labelD = latexParCoordonnees('(d)', -7.5, -0.8, 'black', 0, 0, '', 8)\n      } else if (choixDeLaxe[i] === 2) {\n        d[i] = droiteVerticaleParPoint(O) as Droite\n        labelD = latexParCoordonnees('(d)', -0.8, -7.5, 'black', 0, 0, '', 8)\n      } else if (choixDeLaxe[i] === 3) {\n        d[i] = droiteParPointEtPente(O, 1) as Droite\n        labelD = latexParCoordonnees('(d)', -7.5, -6.2, 'black', 0, 0, '', 8)\n      } else {\n        d[i] = droiteParPointEtPente(O, -1) as Droite\n        labelD = latexParCoordonnees('(d)', -7.5, 6.2, 'black', 0, 0, '', 8)\n      }\n      const guideDroites = []\n      for (let k = 0; k < this.nbPoints; k++) {\n        const guide = droiteParPointEtPerpendiculaire(\n          antecedentsMathalea2d[k],\n          d[i],\n        ) as Droite\n        guide.pointilles = 2\n        guide.color = colorToLatexOrHTML(colors[k])\n        guide.opacite = 0.8\n        guideDroites.push(guide)\n      }\n      enonce =\n        `${this.sup2 === 1 ? 'Placer' : 'Construire'} le${this.nbPoints > 1 ? 's' : ''} symétrique${this.nbPoints > 1 ? 's' : ''} $${this.nbPoints > 1 ? this.labels[i].slice(0, this.nbPoints - 1).join(\"',\") + \"'\" : this.labels[i][0] + \"' \"}$` +\n        (this.nbPoints > 1\n          ? ` et $${this.labels[i][this.nbPoints - 1] + \"'\"}$`\n          : '') +\n        (this.nbPoints > 1 ? ' respectifs ' : '')\n      enonce +=\n        `${this.nbPoints > 1 ? ' des' : ' du'} point${this.nbPoints > 1 ? 's' : ''} $${this.nbPoints > 1 ? this.labels[i].slice(0, this.nbPoints - 1).join(',') : this.labels[i][0] + '$ par rapport à la droite $(d).'}$` +\n        (this.nbPoints > 1\n          ? ` et $${this.labels[i][this.nbPoints - 1]}$ par rapport à la droite $(d)$.<br>`\n          : '<br>')\n      const guidesArc = []\n      for (let k = 0; k < this.nbPoints; k++) {\n        symetriquesMathalea2d[k] = symetrieAxiale(\n          antecedentsMathalea2d[k],\n          d[i],\n        )\n        middleMathalea2d[k] = projectionOrtho(antecedentsMathalea2d[k], d[i])\n        /*  const angleOffset = choice([-12, -10, -8, 8, 10, 12])\n          const ext1 = rotation(symetriques[k], middle[k], 3 * angleOffset)\n          const ext2 = rotation(symetriques[k], middle[k], -angleOffset)\n         */\n        const guide = cercleCentrePoint(\n          middleMathalea2d[k],\n          antecedentsMathalea2d[k],\n          colors[k],\n        )\n        guide.pointilles = 2\n        guide.opacite = 0.8\n        guidesArc.push(guide)\n      }\n      if (this.sup2 === 1) {\n        objets.push(grille(-8, -8, 8, 8, 'gray', 0.5, 1, 0))\n      } else if (this.sup2 === 2) {\n        enonce +=\n          'Les droites tracées en pointillés sont perpendiculaires à $(d)$.<br>'\n        objets.push(...guideDroites)\n      } else if (this.sup2 === 3) {\n        enonce += 'Les cercles tracés en pointillés sont centrés sur $(d)$.<br>'\n        objets.push(...guidesArc)\n      }\n      objets.push(d[i], labelD)\n      for (let k = 0; k < this.nbPoints; k++) {\n        objets.push(new TracePoint(antecedentsMathalea2d[k]))\n        const sym = symetrieAxiale(\n          antecedentsMathalea2d[k],\n          d[i],\n          antecedentsMathalea2d[k].nom + \"'\",\n        )\n        sym.positionLabel = positionneLabel(sym, antecedentsMathalea2d[k])\n        antecedentsMathalea2d[k].positionLabel = positionneLabel(\n          antecedentsMathalea2d[k],\n          sym,\n        )\n        const egalite = codageMilieu(\n          antecedentsMathalea2d[k],\n          sym,\n          colors[k],\n          marks[k],\n        )\n        const trace: TracePoint = new TracePoint(sym)\n        trace.color = colorToLatexOrHTML('red')\n        const labelSym = labelPoint(sym)\n        const label = labelPoint(antecedentsMathalea2d[k])\n        objets.push(label)\n        objetsCorrection.push(trace, labelSym, egalite)\n      }\n      objetsCorrection = [...objets, ...objetsCorrection, ...guideDroites]\n      if (this.sup2 === 2) {\n        guideDroites.forEach((guide) => {\n          guide.epaisseur = 1\n          guide.opacite = 0.8\n        })\n        objetsCorrection.push(...guideDroites)\n      }\n      if (this.sup2 === 3) {\n        guidesArc.forEach((guide) => {\n          guide.epaisseur = 1\n          guide.opacite = 0.8\n        })\n        objetsCorrection.push(...guidesArc)\n      }\n      const pointSurD = pointSurDroite(d[i], 50, '', 'above')\n      for (let k = 0; k < this.nbPoints; k++) {\n        const carre = codageAngleDroit(\n          antecedentsMathalea2d[k],\n          middleMathalea2d[k],\n          pointSurD,\n          'blue',\n          0.3,\n          0.5,\n        )\n\n        objetsCorrection.push(carre)\n      }\n      if (context.isHtml && this.interactif) {\n        this.figuresApiGeom[i] = new Figure({\n          xMin: -10,\n          yMin: -10,\n          width: 300,\n          height: 300,\n          border: true,\n          scale: 0.5,\n          snapGrid: this.sup2 === 1,\n        })\n        if (isFigureArray(this.figures))\n          this.figures.push(this.figuresApiGeom[i])\n        this.figuresApiGeom[i].options.labelAutomaticBeginsWith =\n          this.labels[i][0] + \"'\"\n        this.figuresApiGeom[i].setToolbar({\n          tools: [\n            'POINT',\n            'POINT_ON',\n            'POINT_INTERSECTION',\n            'LINE_PERPENDICULAR',\n            'CIRCLE_CENTER_POINT',\n            'DRAG',\n            'NAME_POINT',\n            'SHAKE',\n            'UNDO',\n            'REDO',\n            'REMOVE',\n          ],\n          nbCols: 6,\n          position: 'top',\n        })\n        const O = this.figuresApiGeom[i].create('Point', {\n          x: 0,\n          y: 0,\n          isVisible: false,\n          isSelectable: false,\n        })\n        let pointB\n        if (choixDeLaxe[i] === 1) {\n          pointB = this.figuresApiGeom[i].create('Point', { x: 7, y: 0 })\n        } else if (choixDeLaxe[i] === 2) {\n          pointB = this.figuresApiGeom[i].create('Point', { x: 0, y: 7 })\n        } else if (choixDeLaxe[i] === 3) {\n          pointB = this.figuresApiGeom[i].create('Point', { x: 7, y: 7 })\n        } else {\n          pointB = this.figuresApiGeom[i].create('Point', { x: 7, y: -7 })\n        }\n        pointB.isVisible = false\n        // L'axe de symétrie est fixe\n        pointB.isFree = false\n        O.isFree = false\n        this.d[i] = this.figuresApiGeom[i].create('Line', {\n          point1: O,\n          point2: pointB,\n        }) as Line\n        this.d[i].color = 'blue'\n        this.d[i].thickness = 2\n        const labelX = labelD.x\n        const labelY = labelD.y\n        this.figuresApiGeom[i].create('TextByPosition', {\n          text: '$(d)$',\n          x: labelX,\n          y: labelY,\n        })\n        this.antecedents[i] = []\n        for (let k = 0; k < this.nbPoints; k++) {\n          this.antecedents[i][k] = this.figuresApiGeom[i].create('Point', {\n            x: antecedentsMathalea2d[k].x,\n            y: antecedentsMathalea2d[k].y,\n            isSelectable: true,\n            isFree: false,\n            label: antecedentsMathalea2d[k].nom,\n          })\n        }\n        if (this.sup2 === 1) {\n          this.figuresApiGeom[i].create('Grid', {\n            xMin: -10,\n            yMin: -10,\n            xMax: 10,\n            yMax: 10,\n            stepX: 1,\n            stepY: 1,\n            color: 'gray',\n            axeX: false,\n            axeY: false,\n            labelX: false,\n            labelY: false,\n          })\n        }\n        if (this.sup2 === 2) {\n          for (let k = 0; k < this.nbPoints; k++) {\n            this.figuresApiGeom[i].create('LinePerpendicular', {\n              point: this.antecedents[i][k],\n              line: this.d[i],\n              isDashed: true,\n              color: 'gray',\n            })\n          }\n        }\n        if (this.sup2 === 3) {\n          for (let k = 0; k < this.nbPoints; k++) {\n            this.figuresApiGeom[i].create('CircleCenterPoint', {\n              center: this.figuresApiGeom[i].create('Point', {\n                isVisible: false,\n                x: middleMathalea2d[k].x,\n                y: middleMathalea2d[k].y,\n              }),\n              point: this.antecedents[i][k],\n              isDashed: true,\n              color: 'gray',\n            })\n          }\n        }\n        const emplacementPourFigure = figureApigeom({\n          exercice: this,\n          i,\n          figure: this.figuresApiGeom[i],\n          defaultAction: 'POINT',\n        })\n        this.listeQuestions[i] = enonce + '<br><br>' + emplacementPourFigure\n      } else {\n        this.listeQuestions[i] =\n          enonce +\n          '<br><br>' +\n          mathalea2d(\n            {\n              xmin: -10,\n              xmax: 10,\n              ymin: -10,\n              ymax: 10,\n              scale: 0.5,\n              pixelsParCm: 15,\n            },\n            objets,\n          )\n      }\n      this.listeCorrections[i] = mathalea2d(\n        {\n          xmin: -10,\n          xmax: 10,\n          ymin: -10,\n          ymax: 10,\n          scale: 0.5,\n          pixelsParCm: 15,\n        },\n        objetsCorrection,\n      )\n    }\n  }\n\n  correctionInteractive = (i: number) => {\n    if (this.answers === undefined) this.answers = {}\n    // Sauvegarde de la réponse pour Capytale\n    this.answers[this.figuresApiGeom[i].id] = this.figuresApiGeom[i].json\n    const resultat = []\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q${i}`,\n    ) as HTMLDivElement\n    let feedback = ''\n\n    // on crée les bons symétriques :\n    for (let k = 0; k < this.nbPoints; k++) {\n      const { x, y } = reflectOverLineCoord(this.antecedents[i][k], this.d[i])\n      const elts = Array.from(this.figuresApiGeom[i].elements.values())\n      const points = elts.filter(\n        (e) =>\n          e.type !== 'pointer' &&\n          (e.type === 'Point' ||\n            e.type === 'PointOnLine' ||\n            e.type === 'PointOnCircle' ||\n            e.type === 'PointIntersectionLL' ||\n            e.type === 'PointIntersectionLC' ||\n            e.type === 'PointIntersectionCC'),\n      ) as PointApigeom[]\n      const matchPoint = points.find(\n        (p: PointApigeom) => p.label === `${this.labels[i][k]}'`,\n      )\n      const sym = points.find((p) => egal(x, p.x, 0.001) && egal(y, p.y, 0.001))\n      if (matchPoint != null) {\n        if (egal(x, matchPoint.x, 0.001) && egal(y, matchPoint.y, 0.001)) {\n          matchPoint.color = 'green'\n          matchPoint.thickness = 2\n          matchPoint.colorLabel = 'green'\n          resultat.push('OK')\n        } else {\n          matchPoint.color = 'green'\n          matchPoint.thickness = 2\n          matchPoint.colorLabel = 'green'\n          feedback += `Il y a  bien un point nommé $${this.antecedents[i][k].label}'$ mais ce n'est pas le symétrique de $${this.antecedents[i][k].label}$ !<br>`\n          resultat.push('KO')\n        }\n      } else {\n        if (sym != null) {\n          sym.color = 'green'\n          sym.thickness = 2\n          sym.colorLabel = 'red'\n          feedback += `Le symétrique de $${this.antecedents[i][k].label}$ est bien construit mais il n'est pas nommé $${this.antecedents[i][k].label}'$ !<br>`\n        } else {\n          feedback += `Il n'y a pas de point symétrique de $${this.antecedents[i][k].label}$ et il n'y a pas de point nommé $${this.antecedents[i][k].label}'$ !<br>`\n        }\n        resultat.push('KO')\n      }\n    }\n    if (this.sup2 !== 1) {\n      this.figuresApiGeom[i].shake()\n      feedback =\n        'On « secoue » la figure pour voir si les points sont bien définis.<br>' +\n        feedback\n    }\n    if (divFeedback) divFeedback.innerHTML = feedback\n    this.figuresApiGeom[i].isDynamic = false\n    this.figuresApiGeom[i].divButtons.style.display = 'none'\n    this.figuresApiGeom[i].divUserMessage.style.display = 'none'\n    return resultat\n  }\n}\n\nexport default ConstrctionsSymetriquesPoints\n"],"names":["titre","dateDePublication","dateDeModifImportante","interactifReady","interactifType","uuid","refs","positionneLabel","pointA","pointB","deletePoints","points","type","newPoints","typeV","point","e","ConstrctionsSymetriquesPoints","Exercice","__publicField","i","resultat","divFeedback","feedback","k","x","reflectOverLineCoord","matchPoint","p","sym","egal","fig","marks","colors","context","choixDeLaxe","combinaisonListes","enonce","antecedentsMathalea2d","middleMathalea2d","objets","objetsCorrection","d","labelD","nuage","nuageSaved","randint","choice","n","shuffle","creerNomDePolygone","el","pointAbstrait","O","droiteHorizontaleParPoint","latexParCoordonnees","droiteVerticaleParPoint","droiteParPointEtPente","guideDroites","guide","droiteParPointEtPerpendiculaire","colorToLatexOrHTML","guidesArc","symetrieAxiale","projectionOrtho","cercleCentrePoint","grille","TracePoint","egalite","codageMilieu","trace","labelSym","labelPoint","label","pointSurD","pointSurDroite","carre","codageAngleDroit","Figure","isFigureArray","labelX","labelY","emplacementPourFigure","figureApigeom","mathalea2d"],"mappings":"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"}