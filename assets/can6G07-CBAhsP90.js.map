{"version":3,"file":"can6G07-CBAhsP90.js","sources":["../../src/exercices/can/6e/can6G07.ts"],"sourcesContent":["import { colorToLatexOrHTML } from '../../../lib/2d/colorToLatexOrHtml'\nimport { droite } from '../../../lib/2d/droites'\nimport { point } from '../../../lib/2d/PointAbstrait'\nimport { papierPointe } from '../../../lib/2d/reperes'\nimport { tracePoint } from '../../../lib/2d/TracePoint'\nimport { symetrieAxiale } from '../../../lib/2d/transformations'\nimport { longueur } from '../../../lib/2d/utilitairesGeometriques'\nimport { ajouteChampTexteMathLive } from '../../../lib/interactif/questionMathLive'\nimport { choice, shuffle } from '../../../lib/outils/arrayOutils'\nimport { context } from '../../../modules/context'\nimport { mathalea2d } from '../../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../../modules/outils'\nimport Exercice from '../../Exercice'\n\nimport { KeyboardType } from '../../../lib/interactif/claviers/keyboard'\nimport { setReponse } from '../../../lib/interactif/gestionInteractif'\n\nexport const titre = 'Compter les points symétriques manquants'\nexport const dateDePublication = '18/12/2021'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCNum'\n\n/**\n * Symétrie axiale sur papier pointé\n * Ref can6G07\n * @author Jean-Claude Lhote\n * Publié le 18/12/2021\n */\nexport const uuid = '85dfb'\n\nexport const refs = {\n  'fr-fr': ['can6G07', '6G7B-flash2'],\n  'fr-ch': [],\n}\nexport default class CompleterParSymetrieCan extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 1\n\n    this.sup = 1\n    this.sup2 = 1\n  }\n\n  nouvelleVersion() {\n    this.sup = randint(1, 2)\n    const couples = []\n    let pointsPossibles\n    const pointsChoisis = []\n    const pointsAffiches = []\n    const pointsEnPlusCorr = []\n    const typeDePapier = ['quad', 'quad', 'hexa', 'equi'] // l'élément 0 sera changé aléatoirement pour correspondre au type mélange (this.sup2 % 4)\n    for (\n      let i = 0,\n        cpt = 0,\n        papier,\n        image,\n        d,\n        j,\n        trouve,\n        texte,\n        texteCorr,\n        objetsEnonce,\n        nbCouplesComplets,\n        objetsCorrection;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      typeDePapier[0] = typeDePapier[1 + (i % 3)]\n      // on remet à vide tous les tableaux utilisés pour la question suivante\n      objetsEnonce = []\n      objetsCorrection = []\n      pointsChoisis.length = 0\n      pointsAffiches.length = 0\n      pointsEnPlusCorr.length = 0\n      couples.length = 0\n\n      papier = papierPointe({\n        xmin: 0,\n        ymin: 0,\n        xmax: 6,\n        ymax: 6,\n        type: 'quad',\n      })\n\n      objetsEnonce.push(papier)\n\n      switch (randint(1, 2)) {\n        case 1:\n          d = droite(point(3, 0), point(3, 6))\n          break\n        case 2:\n        default:\n          d = droite(point(0, 3), point(6, 3))\n          break\n      }\n      d.epaisseur = 2\n      d.color = context.isHtml\n        ? colorToLatexOrHTML('blue')\n        : colorToLatexOrHTML('black')\n      objetsEnonce.push(d)\n      pointsPossibles = papier.listeCoords.slice()\n      // on prépare les points cliquables pour la version interactive\n      while (pointsPossibles.length > 1) {\n        // si il n'en reste qu'un, on ne peut pas trouver de symétrique\n        image = symetrieAxiale(\n          point(pointsPossibles[0][0], pointsPossibles[0][1]),\n          d,\n        )\n        j = 1\n        trouve = false\n        while (j < pointsPossibles.length && !trouve) {\n          // si l'image est proche d'un point, c'est qu'on a deux symétriques donc un couple potentiel.\n          if (\n            longueur(\n              image,\n              point(pointsPossibles[j][0], pointsPossibles[j][1]),\n            ) < 0.5\n          ) {\n            trouve = true\n          } else j++\n        }\n        if (trouve) {\n          // on stocke le couple de symétrique en modifiant aléatoirement l'ordre.\n          couples.push(\n            choice([true, false])\n              ? [pointsPossibles[0], pointsPossibles[j]]\n              : [pointsPossibles[j], pointsPossibles[0]],\n          )\n          pointsPossibles.splice(j, 1) // on retire d'abord le points d'indice j\n          pointsPossibles.splice(0, 1) // puis le point d'indice 0\n        } else {\n          pointsPossibles.splice(0, 1) // Le point d'indice 0 n'a pas de symétrique, on le retire\n        }\n      }\n      // la liste des couples est prête, on va pouvoir choisir les points affichés et ceux qu'on n'affiche pas.\n      const nbCouplesChoisis = randint(4, 7)\n      const couplesChoisis = shuffle(couples).splice(0, nbCouplesChoisis)\n      for (let p = 0; p < couplesChoisis.length; p++) {\n        pointsChoisis.push(couplesChoisis[p][0], couplesChoisis[p][1])\n      }\n      nbCouplesComplets = randint(1, 3)\n      for (let p = 0; p < pointsChoisis.length; p += 2) {\n        if (p < nbCouplesComplets) {\n          // On affiche un certains nombre de couples\n          pointsAffiches.push(point(pointsChoisis[p][0], pointsChoisis[p][1]))\n          pointsAffiches.push(\n            point(pointsChoisis[p + 1][0], pointsChoisis[p + 1][1]),\n          )\n        } else {\n          // et on affiche un seul des points pour les couples restants\n          pointsAffiches.push(point(pointsChoisis[p][0], pointsChoisis[p][1]))\n          pointsEnPlusCorr.push(\n            point(pointsChoisis[p + 1][0], pointsChoisis[p + 1][1]),\n          )\n        }\n      }\n      for (let p = 0; p < pointsAffiches.length; p++) {\n        objetsEnonce.push(tracePoint(pointsAffiches[p]))\n      }\n      for (let p = 0; p < pointsEnPlusCorr.length; p++) {\n        objetsCorrection.push(tracePoint(pointsEnPlusCorr[p], 'red'))\n      }\n      texte = context.isAmc\n        ? 'Voici une grille contenant des points et un axe de symétrie.<br>Quel nombre minimum de points faut-il ajouter pour que chacun ait son symétrique ?<br>Écrire le nombre de points ajoutés dans le cadre. Coder ensuite ce nombre de points.<br>'\n        : 'Voici une grille contenant des points et un axe de symétrie.<br>Quel nombre minimum de points faut-il ajouter pour que chacun ait son symétrique ?<br>'\n      texteCorr = `Il y a ${pointsEnPlusCorr.length} points à ajouter (en rouge sur la figure).<br>`\n      // On prépare la figure...\n      texte += mathalea2d(\n        { xmin: -0.5, ymin: -0.5, xmax: 6.5, ymax: 6.5, scale: 0.7 },\n        ...objetsEnonce,\n      )\n      if (this.interactif && context.isHtml) {\n        texte += ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers)\n      }\n      texteCorr += mathalea2d(\n        {\n          xmin: -0.5,\n          ymin: -0.5,\n          xmax: 6.5,\n          ymax: 6.5,\n          scale: 0.5,\n        },\n        ...objetsEnonce,\n        ...objetsCorrection,\n      )\n      setReponse(this, i, pointsEnPlusCorr.length)\n      if (\n        this.questionJamaisPosee(\n          i,\n          nbCouplesChoisis,\n          nbCouplesComplets,\n          pointsChoisis[0][0],\n          pointsChoisis[0][1],\n        )\n      ) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n  // this.besoinFormulaireNumerique = ['Type d\\'axes', 4, '1 : Axe vertical\\n2 : Axe horizontal\\n3 : Axe oblique\\n4 : Mélange']\n  // this.besoinFormulaire2Numerique = ['Type de papier pointé', 4, '1 : Carrés\\n2 : Hexagones\\n3 : Triangles équilatéraux\\n4 : Mélange']\n}\n"],"names":["titre","dateDePublication","interactifReady","interactifType","amcReady","amcType","uuid","refs","CompleterParSymetrieCan","Exercice","randint","couples","pointsPossibles","pointsChoisis","pointsAffiches","pointsEnPlusCorr","typeDePapier","i","cpt","papier","image","d","j","trouve","texte","texteCorr","objetsEnonce","nbCouplesComplets","objetsCorrection","papierPointe","droite","point","context","colorToLatexOrHTML","symetrieAxiale","longueur","choice","nbCouplesChoisis","couplesChoisis","shuffle","p","tracePoint","mathalea2d","ajouteChampTexteMathLive","KeyboardType","setReponse","listeQuestionsToContenu"],"mappings":"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"}