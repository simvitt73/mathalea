{"version":3,"file":"5C12-BPumPjbH.js","sources":["../../src/exercices/5e/5C12.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { lettreDepuisChiffre, sp } from '../../lib/outils/outilString'\nimport { context } from '../../modules/context'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport choisirExpressionNumerique from './_choisirExpressionNumerique'\n\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\nexport const titre = 'Calculer en respectant les priorités opératoires'\n\n/**\n * @author Jean-Claude Lhote\n */\nexport const uuid = 'e61fc'\n\nexport const refs = {\n  'fr-fr': ['5C12'],\n  'fr-ch': ['9NO6-2'],\n}\nexport default class CalculerUneExpressionNumerique extends Exercice {\n  version: number\n  constructor() {\n    super()\n    this.nbQuestions = 4\n\n    this.sup = 3\n    this.sup2 = false // si false alors utilisation de nombres entiers (calcul mental), si true alors utilisation de nombres à un chiffre après la virgule.\n    this.sup3 = true\n    this.sup4 = true\n    this.besoinFormulaireTexte = [\n      'Choix des expressions',\n      'Nombres séparés par des tirets :\\n2 : Expressions à deux opérations\\n3 : Expressions à 3 opérations\\n4 : Expressions à 4 opérations\\n5 : Expressions complexes',\n    ] // Texte, tooltip - il faut au moins deux opérations\n    this.besoinFormulaire2CaseACocher = [\n      'Utilisation de décimaux (pas de calcul mental)',\n      false,\n    ]\n    this.besoinFormulaire3CaseACocher = [\n      'Avec le signe × devant les parenthèses',\n      true,\n    ]\n    this.besoinFormulaire4CaseACocher = [\n      'Calculs nommés avec des lettres',\n      false,\n    ]\n    this.version = 5\n  }\n\n  nouvelleVersion() {\n    this.listeAvecNumerotation = !this.sup4\n    let reponse\n    const listeTypeDeQuestions = gestionnaireFormulaireTexte({\n      min: 2,\n      max: 5,\n      defaut: randint(2, 5),\n      nbQuestions: this.nbQuestions,\n      saisie: this.sup,\n      melange: 0,\n    }).map(Number)\n\n    let expf\n    let expn\n    let expc\n    let decimal\n    let nbOperations\n    let resultats\n    if (this.sup2) {\n      decimal = 10\n    } else {\n      decimal = 1\n    }\n\n    for (\n      let i = 0, texte: string, texteCorr: string, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      this.autoCorrection[i] = {}\n      nbOperations = listeTypeDeQuestions[i]\n      if (this.version > 2 && nbOperations === 1) nbOperations++\n      resultats = choisirExpressionNumerique(\n        nbOperations,\n        decimal,\n        this.sup3,\n        !this.sup2,\n        null,\n      )\n      expf = resultats[0]\n      expn = resultats[1] as string\n      expc = resultats[2] as string\n      if (expn.indexOf('ou') > 0) expn = expn.substring(0, expn.indexOf('ou')) // on supprime la deuxième expression fractionnaire\n      this.consigne = 'Calculer en respectant les priorités opératoires'\n      this.consigne += this.interactif ? '.' : ' et en détaillant.'\n      if (!this.sup4) {\n        texte = `${expn}`\n      } else {\n        texte = addLetterInExpression(expn, i + 1)\n      }\n      texteCorr = ''\n      if (!this.sup4) {\n        expc = expc.substring(1, expc.length - 1).split(' = ')\n        for (let ee = 0; ee < expc.length - 1; ee++) {\n          texteCorr += `$${expc[ee]}  = $` + sp()\n        }\n        texteCorr += `$${miseEnEvidence(expc[expc.length - 1])}$`\n      } else {\n        // On découpe\n        const etapes = expc.split('=')\n        let nbEtapes = 0\n        etapes.forEach(function (etape) {\n          nbEtapes++\n          etape = etape.replace('$', '')\n          if (context.isHtml) {\n            texteCorr += '<br>'\n          }\n          texteCorr += `$${lettreDepuisChiffre(i + 1)} = `\n          texteCorr +=\n            nbEtapes === etapes.length\n              ? `${miseEnEvidence(etape)}$ <br>`\n              : `${etape}$ <br>`\n        })\n      }\n      reponse = resultats[4]\n      if (this.questionJamaisPosee(i, expn, expf)) {\n        // Si la question n'a jamais été posée, on en créé une autre\n        if (this.interactif) {\n          texte += ajouteChampTexteMathLive(\n            this,\n            i,\n            KeyboardType.clavierDeBase,\n            { texteAvant: '$=$' },\n          )\n          setReponse(this, i, reponse)\n        } else if (context.isAmc) {\n          texte +=\n            '<br>Détailler les calculs dans le cadre et coder le résultat.<br>'\n          this.autoCorrection[i] = {\n            enonce: '',\n            enonceAvant: false,\n            propositions: [\n              {\n                type: 'AMCOpen',\n                propositions: [\n                  {\n                    enonce: texte,\n                    texte: texteCorr,\n                    statut: 3,\n                    pointilles: false,\n                  },\n                ],\n              },\n              {\n                type: 'AMCNum',\n                propositions: [\n                  {\n                    texte: '',\n                    statut: '',\n                    reponse: {\n                      texte: 'Résultat de cet enchaînement de calculs : ',\n                      valeur: [Number(reponse)],\n                      param: {\n                        digits: 2,\n                        decimals: 0,\n                        signe: false,\n                        approx: 0,\n                      },\n                    },\n                  },\n                ],\n              },\n            ],\n          }\n        }\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction addLetterInExpression(expression: string, i: number) {\n  const letter = lettreDepuisChiffre(i) + ' = '\n  const index = expression.indexOf('$') + 1\n  return expression.slice(0, index) + letter + expression.slice(index)\n}\n"],"names":["interactifReady","interactifType","amcReady","amcType","titre","uuid","refs","CalculerUneExpressionNumerique","Exercice","__publicField","reponse","listeTypeDeQuestions","gestionnaireFormulaireTexte","randint","expf","expn","expc","decimal","nbOperations","resultats","i","texte","texteCorr","cpt","choisirExpressionNumerique","addLetterInExpression","etapes","nbEtapes","etape","context","lettreDepuisChiffre","miseEnEvidence","ee","sp","ajouteChampTexteMathLive","KeyboardType","setReponse","listeQuestionsToContenu","expression","letter","index"],"mappings":"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"}