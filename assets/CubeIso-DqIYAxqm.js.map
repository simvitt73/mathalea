{"version":3,"file":"CubeIso-DqIYAxqm.js","sources":["../../src/lib/3d/3dProjectionMathalea2d/CubeIso.ts"],"sourcesContent":["import { mathalea2d } from '../../../modules/mathalea2d'\nimport { colorToLatexOrHTML } from '../../2d/colorToLatexOrHtml'\nimport { fixeBordures } from '../../2d/fixeBordures'\nimport { ObjetMathalea2D } from '../../2d/ObjetMathalea2D'\nimport { point } from '../../2d/PointAbstrait'\nimport { polygone } from '../../2d/polygones'\n\n/**\n * @author Erwan Duplessis et Jean-Claude Lhote\n * Attention !\n * Cette Classe définit un objet cube dans une représentation en perspective axonométrique paramétrée par alpha et beta\n * et non pas context.anglePerspective (contrairement à l'objet cube3d ci-dessus ou l'objet pave3d ci-dessous)\n * Il ne s'agit pas à proprement parler d'un objet 3d, c'est un objet 2d avec sa méthode svg() et sa méthode tikz()\n * Utilisée par exemple dans 6G43\n */\n\nexport class Cube extends ObjetMathalea2D {\n  constructor(\n    x: number,\n    y: number,\n    z: number,\n    alpha: number,\n    beta: number,\n    colorD: string,\n    colorT: string,\n    colorG: string,\n  ) {\n    super()\n    this.x = x\n    this.y = y\n    this.z = z\n    this.alpha = alpha\n    this.beta = beta\n    this.colorD = colorToLatexOrHTML(colorD)\n    this.colorG = colorToLatexOrHTML(colorG)\n    this.colorT = colorToLatexOrHTML(colorT)\n\n    this.lstPoints = []\n    this.lstPolygone = []\n\n    function proj(\n      x: number,\n      y: number,\n      z: number,\n      alpha: number,\n      beta: number,\n    ) {\n      const cosa = Math.cos((alpha * Math.PI) / 180)\n      const sina = Math.sin((alpha * Math.PI) / 180)\n      const cosb = Math.cos((beta * Math.PI) / 180)\n      const sinb = Math.sin((beta * Math.PI) / 180)\n      return point(\n        cosa * x - sina * y,\n        -sina * sinb * x - cosa * sinb * y + cosb * z,\n      )\n    }\n\n    this.lstPoints.push(proj(this.x, this.y, this.z, this.alpha, this.beta)) // point 0 en bas\n    this.lstPoints.push(proj(this.x + 1, this.y, this.z, this.alpha, this.beta)) // point 1\n    this.lstPoints.push(\n      proj(this.x + 1, this.y, this.z + 1, this.alpha, this.beta),\n    ) // point 2\n    this.lstPoints.push(proj(this.x, this.y, this.z + 1, this.alpha, this.beta)) // point 3\n    this.lstPoints.push(\n      proj(this.x + 1, this.y + 1, this.z + 1, this.alpha, this.beta),\n    ) // point 4\n    this.lstPoints.push(\n      proj(this.x, this.y + 1, this.z + 1, this.alpha, this.beta),\n    ) // point 5\n    this.lstPoints.push(proj(this.x, this.y + 1, this.z, this.alpha, this.beta)) // point 6\n    let p\n    p = polygone(\n      [\n        this.lstPoints[0],\n        this.lstPoints[1],\n        this.lstPoints[2],\n        this.lstPoints[3],\n      ],\n      'black',\n    )\n    p.opaciteDeRemplissage = 1\n    p.couleurDeRemplissage = this.colorD\n    this.lstPolygone.push(p)\n    p = polygone(\n      [\n        this.lstPoints[2],\n        this.lstPoints[4],\n        this.lstPoints[5],\n        this.lstPoints[3],\n      ],\n      'black',\n    )\n    p.couleurDeRemplissage = this.colorG\n    p.opaciteDeRemplissage = 1\n    this.lstPolygone.push(p)\n    p = polygone(\n      [\n        this.lstPoints[3],\n        this.lstPoints[5],\n        this.lstPoints[6],\n        this.lstPoints[0],\n      ],\n      'black',\n    )\n    p.couleurDeRemplissage = this.colorT\n    p.opaciteDeRemplissage = 1\n    this.lstPolygone.push(p)\n    this.c2d = this.lstPolygone\n  }\n}\n\nexport function cube(\n  x = 0,\n  y = 0,\n  z = 0,\n  alpha = 45,\n  beta = -35,\n  { colorD = 'green', colorT = 'white', colorG = 'gray' } = {},\n) {\n  return new Cube(x, y, z, alpha, beta, colorD, colorG, colorT)\n}\n\n/**\n * Crée les projections isométriques de cubes.\n * @param L - Liste des cubes à projeter\n * @param largeur - Largeur de la projection\n * @param longueur - Longueur de la projection\n * @param hauteur - Hauteur de la projection\n * @returns Les objets 2D et les paramètres de la projection\n */\nexport function createCubesProjections(\n  L: number[][],\n  largeur: number,\n  longueur: number,\n  hauteur: number,\n) {\n  // Projection 1\n  const { objets: objetsEnonce, params: paramsEnonce } = projectionCubesIso2d(\n    L,\n    10,\n    -40,\n    false,\n  )\n  // Projection 2\n  const { objets: objetsEnonce2, params: paramsEnonce2 } = projectionCubesIso2d(\n    L,\n    35,\n    -20,\n    false,\n  )\n  // Correction (projection 2, cubes déplacés)\n  const { objets: objetsCorrection, params: paramsCorrection } =\n    projectionCubesIso2d(L, 35, -20, true)\n\n  const figure =\n    mathalea2d(paramsEnonce, objetsEnonce) +\n    mathalea2d(paramsEnonce2, objetsEnonce2)\n  const figureCorrection = mathalea2d(paramsCorrection, objetsCorrection)\n  return { figure, figureCorrection }\n}\n\n/**\n * Génère les objets 2D et les paramètres pour une projection isométrique de cubes.\n */\nexport function projectionCubesIso2d(\n  L: number[][],\n  alpha: number,\n  beta: number,\n  eclate: boolean,\n  colors: { colorD?: string; colorT?: string; colorG?: string } = {\n    colorD: 'green',\n    colorT: 'white',\n    colorG: 'gray',\n  },\n) {\n  const objets = []\n  for (let i = 0; i < L.length; i++) {\n    objets.push(\n      ...cube(L[i][0] * (eclate ? 3 : 1), L[i][1], L[i][2], alpha, beta, {\n        colorD: colors.colorD ?? 'green',\n        colorT: colors.colorT ?? 'white',\n        colorG: colors.colorG ?? 'gray',\n      }).c2d,\n    )\n  }\n  const params = Object.assign(\n    {\n      pixelsParCm: 20,\n      scale: 0.6,\n      mainlevee: false,\n      style: 'display: inline-block',\n    },\n    fixeBordures(objets),\n  )\n  return { objets, params }\n}\n"],"names":["Cube","ObjetMathalea2D","x","y","z","alpha","beta","colorD","colorT","colorG","colorToLatexOrHTML","proj","cosa","sina","cosb","sinb","point","p","polygone","cube","createCubesProjections","L","largeur","longueur","hauteur","objetsEnonce","paramsEnonce","projectionCubesIso2d","objetsEnonce2","paramsEnonce2","objetsCorrection","paramsCorrection","figure","mathalea2d","figureCorrection","eclate","colors","objets","params","fixeBordures"],"mappings":"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"}