var D=Object.defineProperty;var B=($,c,r)=>c in $?D($,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):$[c]=r;var p=($,c,r)=>B($,typeof c!="symbol"?c+"":c,r);import{K as u,r as h,q as C,p as k,F,k as y,P as S,aF as A}from"./index-CMKaCP9B.js";import{t as L}from"./tableau-BNjuZw2z.js";import{c as P}from"./vendors/cortex-js_compute-engine-Bo_2zfG3.js";import{o as d}from"./colors-vbveSA7f.js";const E=new P.ComputeEngine;class N{constructor({type:c,largeur:r,hauteur:n,taille:g,Case:e,cellules:o,operation:b,valeurMax:s,solution:v}={type:"entiers",largeur:2,hauteur:2,taille:2,Case:void 0,resultats:[],operation:"addition",valeurMax:50,solution:!1,cellules:[]}){p(this,"type");p(this,"largeur");p(this,"hauteur");p(this,"taille");p(this,"Case");p(this,"cellules");p(this,"cellulesEE");p(this,"sommesCellules");p(this,"cellulesPreremplies");p(this,"resultats");p(this,"operation");p(this,"solution");p(this,"clavier");if(this.largeur=r??2,this.hauteur=n??2,this.Case=e,this.resultats=[],this.taille=g??2,this.operation=b,this.solution=v,this.type=c??"entiers",this.cellules=o??[],this.cellulesPreremplies=[],this.cellulesEE=[],this.sommesCellules=[],this.clavier=String(u.clavierDeBase),s==null&&(s=50),this.cellules.length===0){const m=h(2,s);for(let l=0;l<this.taille**2;l++)switch(this.type){case"entiers":this.cellules.push(String(h(1,s)??2)),this.clavier=String(u.clavierDeBase);break;case"entiers relatifs":this.cellules.push(String(h(-s,s,0))),this.clavier=String(u.clavierDeBase);break;case"littéraux":this.cellules.push(y(h(1,s),h(1,s),"x")),this.clavier=String(u.clavierDeBaseAvecVariable);break;case"fractions dénominateurs multiples":{let i=new F(h(1,s),m),a;if(l+1>=this.taille){if((l+1)%this.taille===1){a=new F(0,1);for(let t=0;t<this.taille;t++)a=a.sommeFraction(this.cellulesEE[t+this.taille*Math.floor(t/this.taille)]);this.sommesCellules.push(a)}if(l>=this.taille*(this.taille-1)){let t;do{t=!1,i=new F(h(1,s),m),a=new F(0,1);for(let f=0;f<this.taille-1;f++)a=a.sommeFraction(this.cellulesEE[l%this.taille+this.taille*f]);a=a.sommeFraction(i);for(let f=0;f<this.sommesCellules.length;f++)t=t||this.sommesCellules[f].isEqual(a)}while(t);this.sommesCellules.push(a)}}this.cellulesEE.push(i),this.cellules.push(i.texFSD.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break}case"fractions positives dénominateurs premiers":this.cellules.push(C(h(1,s),Number(k([2,3,5,7]))).texFraction.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break;case"fractions positives":this.cellules.push(C(h(1,s),h(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break;case"fractions relatives":this.cellules.push(C(h(-s,s,0),h(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break}}else{this.cellulesPreremplies=[...o??[]];for(let m=this.cellules.length;m<this.taille**2;m++)if(Array.isArray(o)&&o[m]==="")switch(this.type){case"entiers":this.cellules.push(String(h(1,s))),this.clavier=String(u.clavierDeBase);break;case"entiers relatifs":this.cellules.push(String(h(-s,s,0))),this.clavier=String(u.clavierDeBase);break;case"littéraux":this.cellules.push(y(h(1,s),h(1,s),"x")),this.clavier=String(u.clavierDeBaseAvecVariable);break;case"fractions dénominateurs multiples":{const l=E.parse(this.cellules[m-1]);if(Array.isArray(l.numericValue)){const[,i]=l.numericValue;this.cellules.push(C(h(1,s),Number(i)??1).texFraction.replace("dfrac","frac"))}this.clavier=String(u.clavierDeBaseAvecFraction)}break;case"fractions positives dénominateurs premiers":this.cellules.push(new F(h(1,s),Number(k([2,3,5,7]))).texFraction.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break;case"fractions positives":this.cellules.push(C(h(1,s),h(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break;case"fractions relatives":this.cellules.push(C(h(-s,s,0),h(2,s)).texFraction.replace("dfrac","frac")),this.clavier=String(u.clavierDeBaseAvecFraction);break}}}calculeResultats(){let c;for(let r=0;r<this.taille;r++){c=[];for(let n=0;n<this.taille;n++)c.push(this.cellules[r+n*this.taille]);this.resultats[r]=String(this.operate(c))}for(let r=this.taille;r<this.taille*2;r++){c=[];for(let n=0;n<this.taille;n++)c.push(this.cellules[(r-this.taille)*this.taille+n]);this.resultats[r]=String(this.operate(c))}}operate(c){let r;switch(this.operation){case"addition":return r="0",E.parse(c.reduce((n,g)=>`${n}+${g}`,r)).simplify().latex;case"multiplication":return r="1",E.parse(c.reduce((n,g)=>`(${n})\\times (${g})`,r)).simplify().latex}}representation({numeroExercice:c,question:r,isInteractif:n,classes:g=""}){const e=this.taille,o=this.taille+1,b=[this.operation==="addition"?"+":"\\times"],s=S.isHtml?"":"\\cellcolor{lightgray}";for(let t=0;t<e;t++)b.push(`\\text{Colonne ${t+1}}`);b.push(`\\text{${this.operation==="addition"?"Sommes":"Produits"}}`);const v=[];for(let t=0;t<e;t++)v.push(`\\text{Ligne ${t+1}}`);v.push(`\\text{${this.operation==="addition"?"Sommes":"Produits"}}`);const m=this.Case==null?null:this.Case%e+Math.floor(this.Case/e)*o,l=[];let i=0,a=0;for(let t=0;t<o**2;t++)if(this.solution)if(t%o<e)if(t<o*e){const f=this.cellules[a];l.push(f),a++}else i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++);else i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++);else if(this.Case==null)this.cellulesPreremplies[a]!=null?t%o<e?t<o*e?(l.push(this.cellulesPreremplies[a]),a++):i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++):i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++):t%o<e?t<o*e?(l.push(""),a++):i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++):i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++);else if(t%o<e)if(t===m){const f=this.cellules[a];a++,l.push(f)}else t<o*e?this.cellulesPreremplies[a]!=null?(l.push(this.cellulesPreremplies[a]),a++):(l.push(""),a++):i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++);else i<e*2&&(l.push(`${s}${this.resultats[(i+e)%(e*2)]}`),i++);if(l.push(`${S.isHtml?"":s}///////`),S.isHtml){const t=Object.fromEntries(this.solution?[["L1C1",`;${d}`],["L1C2",`;${d}`],["L2C1",`;${d}`],["L2C2",`;${d}`]]:[]);return A.create(c,r,A.convertTclToTableauMathlive(b,v,l),g+" "+this.clavier,n,t).output}else{const t=Object.fromEntries(this.solution?[["L1C1",`${d}`],["L1C2",`${d}`],["L2C1",`${d}`],["L2C2",`${d}`]]:[]);return L(b,v,l,2,!0,c,r,!1,t)}}}export{N as Y};
//# sourceMappingURL=Yohaku-CbjUvHd7.js.map
