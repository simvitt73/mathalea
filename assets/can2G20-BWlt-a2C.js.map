{"version":3,"file":"can2G20-BWlt-a2C.js","sources":["../../src/exercices/can/2e/can2G20.ts"],"sourcesContent":["import { point } from '../../../lib/2d/PointAbstrait'\nimport { tracePoint } from '../../../lib/2d/TracePoint'\nimport { vide2d } from '../../../lib/2d/Vide2d'\nimport { droite } from '../../../lib/2d/droites'\nimport { repere } from '../../../lib/2d/reperes'\nimport { segment } from '../../../lib/2d/segmentsVecteurs'\nimport { latex2d } from '../../../lib/2d/textes'\nimport { milieu } from '../../../lib/2d/utilitairesPoint'\nimport { KeyboardType } from '../../../lib/interactif/claviers/keyboard'\nimport { ecritureAlgebrique, rienSi1 } from '../../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../../lib/outils/embellissements'\nimport FractionEtendue from '../../../modules/FractionEtendue'\nimport { context } from '../../../modules/context'\nimport { mathalea2d } from '../../../modules/mathalea2d'\nimport { randint } from '../../../modules/outils'\nimport ExerciceSimple from '../../ExerciceSimple'\nexport const titre = 'Déterminer une équation de droite (graphique)'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const dateDePublication = '15/11/2022'\nexport const dateDeModifImportante = '08/07/2025'\n/**\n * Modèle d'exercice très simple pour la course aux nombres\n * @author Gilles Mora\n\n *\n*/\n\nexport const uuid = '1f967'\n\nexport const refs = {\n  'fr-fr': ['can2G20'],\n  'fr-ch': ['11QCM-8', '1mQCM-11'],\n}\nexport default class EquationDroite extends ExerciceSimple {\n  constructor() {\n    super()\n    this.typeExercice = 'simple'\n    this.nbQuestions = 1\n    this.versionQcmDisponible = true\n    this.formatChampTexte = KeyboardType.clavierDeBaseAvecFraction\n  }\n\n  nouvelleVersion() {\n    const xA = 0\n    const yA = randint(1, 4)\n    const xB = randint(-5, 5, 0)\n    const yB = randint(0, 4)\n\n    const o = latex2d('\\\\text{O}', -0.3, -0.3, { letterSize: 'scriptsize' })\n    const A = point(xA, yA)\n    const B = point(xB, yB)\n\n    // Pour l'affichage du coefficient directeur, on utilise toujours le point le plus à gauche\n    let pointRef, pointCible\n    if (xA < xB) {\n      // A est à gauche, B est à droite\n      pointRef = A\n      pointCible = B\n    } else {\n      // B est à gauche, A est à droite\n      pointRef = B\n      pointCible = A\n    }\n\n    const pointHorizontal = point(pointCible.x, pointRef.y)\n    const sHorizontal = segment(pointRef, pointHorizontal)\n    const sVertical =\n      pointCible.y === pointHorizontal.y\n        ? vide2d()\n        : segment(pointCible, pointHorizontal)\n\n    // On utilise toujours xB - xA et yB - yA pour la fraction (cohérent avec l'équation finale)\n    const maFraction = new FractionEtendue(yB - yA, xB - xA)\n\n    sVertical.epaisseur = 2\n    sVertical.pointilles = 5\n    sHorizontal.epaisseur = 2\n    sHorizontal.pointilles = 5\n\n    const lA = latex2d('A', xA, yA + 0.5, { letterSize: 'scriptsize' })\n    const traceA = tracePoint(A, 'black')\n    const lB = latex2d('B', xB, yB + 0.5, { letterSize: 'scriptsize' })\n\n    // Labels pour les déplacements (on affiche la valeur absolue si nécessaire)\n    const deltaX = pointCible.x - pointRef.x\n    const deltaY = pointCible.y - pointRef.y\n    const lHorizontal = latex2d(\n      `${deltaX}`,\n      milieu(pointRef, pointHorizontal).x,\n      pointRef.y + 0.3,\n      { color: 'red', letterSize: 'scriptsize' },\n    )\n    const lVertical = latex2d(\n      `${deltaY}`,\n      pointCible.x + 0.5,\n      milieu(pointCible, pointHorizontal).y,\n      { color: 'blue', letterSize: 'scriptsize' },\n    )\n\n    const traceB = tracePoint(B, 'black')\n    const d = droite(A, B, '', 'blue')\n    d.epaisseur = 2\n    traceA.taille = 3\n    traceA.epaisseur = 2\n    traceB.taille = 3\n    traceB.epaisseur = 2\n\n    const xmin = -6\n    const ymin = -1\n    const xmax = 6\n    const ymax = 5\n    const r1 = repere({\n      xMin: xmin,\n      xMax: xmax,\n      xUnite: 1,\n      yMin: ymin,\n      yMax: ymax,\n      yUnite: 1,\n      thickHauteur: 0.1,\n      xLabelMin: xmin + 1,\n      xLabelMax: xmax - 1,\n      yLabelMax: ymax - 1,\n      yLabelMin: ymin + 1,\n      axeXStyle: '->',\n      axeYStyle: '->',\n      yLabelDistance: 1,\n      yLabelEcart: 0.3,\n      grilleSecondaire: true,\n      grilleSecondaireYDistance: 1,\n      grilleSecondaireXDistance: 1,\n      grilleSecondaireYMin: ymin - 0.1,\n      grilleSecondaireYMax: ymax + 0.1,\n      grilleSecondaireXMin: xmin - 0.1,\n      grilleSecondaireXMax: xmax + 0.1,\n    })\n\n    const objet = mathalea2d(\n      {\n        xmin,\n        xmax,\n        ymin: ymin - 0.25,\n        ymax: ymax + 0.25,\n        pixelsParCm: 30,\n        scale: 0.75,\n        style: 'margin: auto',\n      },\n      d,\n      r1,\n      traceA,\n      traceB,\n      o,\n    )\n    const objetC = mathalea2d(\n      {\n        xmin,\n        xmax,\n        ymin,\n        ymax: ymax + 0.25,\n        pixelsParCm: 30,\n        scale: 0.75,\n        style: 'margin: auto',\n      },\n      d,\n      r1,\n      traceA,\n      lA,\n      lB,\n      traceB,\n      o,\n      sHorizontal,\n      sVertical,\n      lHorizontal,\n      lVertical,\n    )\n\n    if (context.isAmc) this.versionQcm = false\n    this.question = this.versionQcm\n      ? ''\n      : \"Donner l'équation réduite de la droite.<br>\"\n    this.question += `${objet}`\n    this.question += this.versionQcm\n      ? \"<br>L'équation réduite de cette droite est : \"\n      : ''\n\n    if (yB === yA) {\n      this.reponse = this.versionQcm\n        ? `$y= ${yA}$`\n        : [`y=${yA}`, `y=0x + ${yA}`, `y=0 \\\\cdot x + ${yA}`]\n      this.correction = `La droite est horizontale. On en déduit que son coefficient directeur est $m=0$.<br>\n        Son ordonnée à l'origine est $${yA}$, ainsi l'équation réduite de la droite est $${miseEnEvidence(`y=${yA}`)}$.`\n      this.distracteurs = [`$y=x + ${yA}$`, `$x=${yA}$`, `$y=${rienSi1(yA)}x$`]\n    } else {\n      // On utilise toujours le déplacement affiché graphiquement pour la correction\n      this.correction = `Le coefficient directeur $m$ de la droite $(AB)$ est donné par : <br>\n$m=\\\\dfrac{${miseEnEvidence(deltaY, 'blue')}}{${miseEnEvidence(deltaX, 'red')}}${maFraction.texSimplificationAvecEtapes()}$.<br>`\n\n      if ((yB - yA) / (xB - xA) === 1) {\n        this.correction += `Son ordonnée à l'origine est $${yA}$, ainsi l'équation réduite de la droite est $${miseEnEvidence(`y=x${yA === 0 ? '' : `${ecritureAlgebrique(yA)}`}`)}$.`\n      } else if ((yB - yA) / (xB - xA) === -1) {\n        this.correction += `Son ordonnée à l'origine est $${yA}$, ainsi l'équation réduite de la droite est $${miseEnEvidence(`y=-x${yA === 0 ? '' : `${ecritureAlgebrique(yA)}`}`)}$.`\n      } else {\n        this.correction += `Son ordonnée à l'origine est $${yA}$, ainsi l'équation réduite de la droite est $${miseEnEvidence(`y=${maFraction.texFractionSimplifiee}x${yA === 0 ? '' : `${ecritureAlgebrique(yA)}`}`)}$.`\n      }\n      this.correction += `<br>${objetC}<br>`\n\n      // Les réponses sont toujours basées sur la vraie équation y = mx + p où m = (yB-yA)/(xB-xA) et p = yA\n      if ((yB - yA) / (xB - xA) === 1 || (yB - yA) / (xB - xA) === -1) {\n        this.reponse = this.versionQcm\n          ? `$y= ${rienSi1(maFraction.valeurDecimale)}x${yA === 0 ? '' : ` ${ecritureAlgebrique(yA)}`}$`\n          : [\n              `y=${maFraction.valeurDecimale}x${ecritureAlgebrique(yA)}`,\n              `y=\\\\frac{${yB - yA}}{${xB - xA}}x${ecritureAlgebrique(yA)}`,\n              `y=\\\\frac{${yA - yB}}{${xA - xB}}x${ecritureAlgebrique(yA)}`,\n            ]\n      } else {\n        this.reponse = this.versionQcm\n          ? `$y= ${maFraction.texFractionSimplifiee}x${yA === 0 ? '' : ` ${ecritureAlgebrique(yA)}`}$`\n          : [\n              `y=${maFraction.texFraction}x${ecritureAlgebrique(yA)}`,\n              `y=\\\\frac{${yB - yA}}{${xB - xA}}x${ecritureAlgebrique(yA)}`,\n              `y=\\\\frac{${yA - yB}}{${xA - xB}}x${ecritureAlgebrique(yA)}`,\n            ]\n      }\n\n      if (this.versionQcm) {\n        // Distracteurs basés sur des erreurs classiques\n        if ((yB - yA) / (xB - xA) === 1 || (yB - yA) / (xB - xA) === -1) {\n          this.distracteurs = [\n            `$y= ${rienSi1(maFraction.multiplieEntier(-1).valeurDecimale)}x${ecritureAlgebrique(yA)}$`, // Coefficient opposé\n            `$y=${yA}$`, // Droite horizontale (erreur)\n            `$y= ${rienSi1(yA)}x${ecritureAlgebrique(-yA)}$`, // Fraction inversée\n          ]\n        } else {\n          this.distracteurs = [\n            `$y= ${maFraction.multiplieEntier(-1).texFractionSimplifiee}x${ecritureAlgebrique(yA)}$`, // Coefficient opposé\n            `$y=${yA}$`, // Droite horizontale (erreur)\n            `$y= ${new FractionEtendue(xB - xA, yB - yA).texFractionSimplifiee}x${ecritureAlgebrique(yA)}$`, // Fraction inversée\n          ]\n        }\n      }\n    }\n\n    this.canEnonce = this.question\n    this.canReponseACompleter = ''\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","dateDeModifImportante","uuid","refs","EquationDroite","ExerciceSimple","KeyboardType","yA","randint","xB","yB","o","latex2d","A","point","B","pointRef","pointCible","pointHorizontal","sHorizontal","segment","sVertical","vide2d","maFraction","FractionEtendue","lA","traceA","tracePoint","lB","deltaX","deltaY","lHorizontal","milieu","lVertical","traceB","d","droite","xmin","ymin","xmax","ymax","r1","repere","objet","mathalea2d","objetC","context","miseEnEvidence","rienSi1","ecritureAlgebrique"],"mappings":"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"}