{"version":3,"file":"segmentsVecteurs-Bz-aNFOx.js","sources":["../../src/lib/2d/MainLevee.ts","../../src/lib/2d/utilitairesPoint.ts","../../src/lib/2d/segmentsVecteurs.ts"],"sourcesContent":["import rough from 'roughjs'\nimport type { RoughSVG } from 'roughjs/bin/svg'\n\nclass MainLevee {\n  private roughSvg!: RoughSVG\n  private div!: HTMLDivElement\n  private svg: SVGSVGElement\n  constructor(rs: RoughSVG, div: HTMLDivElement, svg: SVGSVGElement) {\n    this.roughSvg = rs\n    this.div = div\n    this.svg = svg\n  }\n\n  line(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    { color = '#000', epaisseur = 2, roughness = 1 } = {},\n  ) {\n    return this.roughSvg.line(x1, y1, x2, y2, {\n      roughness,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  arc(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    start: number,\n    stop: number,\n    closed: boolean,\n    { color = '#000', epaisseur = 1, roughness = 1, bowing = 0.5 } = {},\n  ) {\n    return this.roughSvg.arc(x, y, width, height, start, stop, closed, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      strokeWidth: epaisseur,\n      preserveVertices: true,\n      seed: 10,\n      stroke: color,\n    }).outerHTML\n  }\n\n  circle(\n    x: number,\n    y: number,\n    rayon: number,\n    { color = '#000', epaisseur = 1, roughness = 1.5, bowing = 2.5 } = {},\n  ) {\n    return this.roughSvg.circle(x, y, rayon * 2, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  polygon(\n    points: Array<[x: number, y: number]> = [],\n    { color = '#000', epaisseur = 1, roughness = 1.5, bowing = 2.5 } = {},\n  ) {\n    return this.roughSvg.polygon(points, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  linearPath(\n    points: Array<[x: number, y: number]> = [],\n    { color = '#000', epaisseur = 1, roughness = 1.5, bowing = 2.5 } = {},\n  ) {\n    return this.roughSvg.linearPath(points, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  ellipse(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    start: number,\n    stop: number,\n    closed: boolean,\n    { color = '#000', epaisseur = 1, roughness = 1, bowing = 0.5 } = {},\n  ) {\n    return this.roughSvg.ellipse(x, y, width, height, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  rectangle(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    start: number,\n    stop: number,\n    closed: boolean,\n    { color = '#000', epaisseur = 1, roughness = 1, bowing = 0.5 } = {},\n  ) {\n    return this.roughSvg.rectangle(x, y, width, height, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  curve(\n    points: Array<[x: number, y: number]> = [],\n    { color = '#000', epaisseur = 1, roughness = 1.5, bowing = 2.5 } = {},\n  ) {\n    return this.roughSvg.curve(points, {\n      roughness,\n      bowing,\n      disableMultiStroke: true,\n      preserveVertices: true,\n      seed: 10,\n      strokeWidth: epaisseur,\n      stroke: color,\n    }).outerHTML\n  }\n\n  destroy() {\n    this.div.removeChild(this.svg)\n  }\n\n  static create() {\n    const div: HTMLDivElement | null = document.querySelector('div#appMathalea')\n    if (!div) return null\n    const svg: SVGSVGElement = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'svg',\n    )\n    svg.style.width = '1024'\n    svg.style.height = '1024'\n    svg.setAttribute('viewBox', '0 0 0 0')\n    div.appendChild(svg)\n    const roughSvg = rough.svg(svg)\n    return new MainLevee(roughSvg, div, svg)\n  }\n}\n\nexport default MainLevee\n","import type { ICercle, IDroite, IPointAbstrait } from './Interfaces'\nimport { PointAbstrait, pointAbstrait } from './PointAbstrait'\n\n/**\n * Retourne un entier aléatoire entre min et max (inclus)\n * @param min Borne inférieure (incluse)\n * @param max Borne supérieure (incluse)\n * @returns Entier aléatoire entre min et max\n */\nconst randint = (min: number, max: number): number =>\n  Math.floor(Math.random() * (max - min + 1)) + min\n\n/**\n * Calcule la distance entre deux points\n * @param A Premier point\n * @param B Deuxième point\n * @returns Distance euclidienne entre A et B\n */\nconst longueur = (A: IPointAbstrait, B: IPointAbstrait): number =>\n  Math.sqrt((B.x - A.x) ** 2 + (B.y - A.y) ** 2)\n\n/**\n * M = milieu(A,B) //M est le milieu de [AB]\n * M = milieu(A,B,'M') //M est le milieu [AB] et se nomme M\n * M = milieu(A,B,'M','below') //M est le milieu [AB], se nomme M et le nom est en dessous du point\n * @returns {PointAbstrait} Milieu du segment [AB]\n * @author Rémi Angot\n */\nexport function milieu(\n  A: PointAbstrait,\n  B: PointAbstrait,\n  nom = '',\n  positionLabel = 'above',\n): PointAbstrait {\n  if (isNaN(longueur(A, B)))\n    window.notify('milieu : Quelque chose ne va pas avec les points', { A, B })\n  const x = (A.x + B.x) / 2\n  const y = (A.y + B.y) / 2\n  return pointAbstrait(x, y, nom, positionLabel)\n}\n\n/**\n * M = pointSurSegment(A,B,l) //M est le point de [AB] à l cm de A\n * M = pointSurSegment(A,B,l,'M') //M est le point de [AB] à l cm de A et se nomme M\n * M = pointSurSegment(A,B,l,'M','below') //M est le point de [AB] à l cm de A, se nomme M et le nom est en dessous du point\n *\n * M = pointSurSegment(A,B,'h','M') // M est un point au hasard sur [AB] (on peut écrire n'importe quel texte à la place de 'h')\n * M = pointSurSegment(A,B) // M est un point au hasard sur [AB]\n * Sécurité ajoutée par Jean-Claude Lhote : si AB=0, alors on retourne A\n * @author Rémi Angot\n */\nexport function pointSurSegment(\n  A: IPointAbstrait,\n  B: IPointAbstrait,\n  l?: number,\n  nom = '',\n  positionLabel = 'above',\n): PointAbstrait {\n  if (isNaN(longueur(A, B))) {\n    window.notify('pointSurSegment : Quelque chose ne va pas avec les points', {\n      A,\n      B,\n    })\n    return pointAbstrait(A.x, A.y, A.nom, A.positionLabel)\n  }\n  if (l === undefined || typeof l === 'string') {\n    l = (longueur(A, B) * randint(15, 85)) / 100\n  }\n\n  // Calcul direct de l'homothétie de B par rapport à A avec rapport k = l / longueur(A, B)\n  if (longueur(A, B) === 0) {\n    return pointAbstrait(A.x, A.y, A.nom, A.positionLabel)\n  }\n  const k = l / longueur(A, B)\n  const x = A.x + k * (B.x - A.x)\n  const y = A.y + k * (B.y - A.y)\n  return pointAbstrait(x, y, nom, positionLabel)\n}\n\n/**\n *\n * @param {Cercle} c\n * @param {number} angle\n * @param {string} nom\n * @param {string} positionLabel\n * M = pointSurCercle(c,'','M') // M est un point choisi au hasard sur le cercle c et se nomme M.\n * N = pointSurCercle(c,90) // N est le point du cercle c situé à 90° par rapport à l'horizontale, donc au dessus du centre de c\n * P = pointSurCercle(c,-90) // P est le point du cercle c situé à l'opposé du point N précédent.\n * @author Jean-Claude Lhote\n */\nexport function pointSurCercle(\n  c: ICercle,\n  angle: number,\n  nom: string,\n  positionLabel = 'above',\n): PointAbstrait {\n  if (typeof angle !== 'number') angle = randint(-180, 180)\n  const angleRad = (angle * Math.PI) / 180\n  const x = c.centre.x + c.rayon * Math.cos(angleRad)\n  const y = c.centre.y + c.rayon * Math.sin(angleRad)\n  return pointAbstrait(x, y, nom, positionLabel)\n}\n\n/**\n * Retourne un point sur la droite d dont l'abscisse est x. Si c'est impossible (droite verticale) alors ce sera le point dont l'ordonnée vaut x.\n * @param {Droite} d\n * @param {number} x Abscisse du point\n * @param {string} [nom] Nom du point\n * @param {string} [positionLabel='above'] Facultatif, 'above' par défaut.\n * @return {PointAbstrait} PointAbstrait de la droite d dont l'abscisse est x\n * @author Jean-Claude Lhote\n */\nexport function pointSurDroite(\n  d: IDroite,\n  x: number,\n  nom = '',\n  positionLabel = 'above',\n): PointAbstrait {\n  // si d est parallèle à l'axe des ordonnées, le paramètre x servira pour y.\n  if (d.b === 0) return pointAbstrait(-d.c / d.a, x, nom, positionLabel)\n  else if (d.a === 0) return pointAbstrait(x, -d.c / d.b, nom, positionLabel)\n  else return pointAbstrait(x, (-d.c - d.a * x) / d.b, nom, positionLabel)\n}\n\n/**\n * Renvoie 'M' le point d'intersection des droites d1 et d2\n * @param {IDroite} d\n * @param {IDroite} f\n * @param {string} nom  le nom du point d'intersection. Facultatif, vide par défaut.\n * @param {string} [positionLabel='above'] Facultatif, 'above' par défaut.\n * @return {PointAbstrait} PointAbstrait 'M' d'intersection de d1 et de d2\n * @author Jean-Claude Lhote\n */\nexport function pointIntersectionDD(\n  d: IDroite,\n  f: IDroite,\n  nom = '',\n  positionLabel = 'above',\n): PointAbstrait {\n  let x, y\n  if (Math.abs(f.a * d.b - f.b * d.a) < 0.000001) {\n    // Les droites sont parallèles ou confondues, pas de point d'intersection ou une infinité\n    return pointIntersectionNonTrouveEntre(d, f, pointAbstrait(50, 50))\n  } else {\n    y = (f.c * d.a - d.c * f.a) / (f.a * d.b - f.b * d.a)\n  }\n  if (Math.abs(d.a) < 0.000001) {\n    // si d est horizontale alors f ne l'est pas donc f.a<>0\n    x = (-f.c - f.b * y) / f.a\n  } else {\n    // d n'est pas horizontale donc ...\n    x = (-d.c - d.b * y) / d.a\n  }\n  return pointAbstrait(x, y, nom, positionLabel)\n}\n\n/**\n * @example pointAdistance(A,d,angle,nom=\"\",positionLabel=\"above\") // Seuls le point A et la distance d sont obligatoires, angle peut être choisi : il s'agit de l'angle signé avec l'axe [OI) sinon, il est choisi aléatoirement.\n * @example p=pointAdistance(A,5,'M') // Place un point aléatoirement à 5 unités de A et lui donne le nom de 'M'.\n * @author Jean-Claude Lhote\n */\nexport function pointAdistance(\n  A: IPointAbstrait,\n  d: number = 1,\n  angle: string | number = 0,\n  nom = '',\n  positionLabel = 'above',\n): PointAbstrait {\n  let leNom = ''\n  let lAngle = 0\n  let lePositionLabel = 'above'\n  if (typeof angle === 'string') {\n    lAngle = randint(0, 360)\n    leNom = angle\n    if (nom != null) lePositionLabel = nom\n  } else {\n    lAngle = angle ?? randint(0, 360)\n    if (nom != null) leNom = nom\n    if (positionLabel != null) lePositionLabel = positionLabel\n  }\n\n  // Calcul direct de la similitude de centre A, angle lAngle (en degrés), rapport d\n  // appliquée au point B = (A.x + 1, A.y)\n  // Formule : M = A + d * R(lAngle) * (B - A)\n  // où R est la rotation d'angle lAngle\n  const angleRad = (lAngle * Math.PI) / 180\n  const cos = Math.cos(angleRad)\n  const sin = Math.sin(angleRad)\n\n  // Vecteur AB (ici B = (A.x + 1, A.y) donc AB = (1, 0))\n  const dx = 1\n  const dy = 0\n\n  // Application de la rotation puis homothétie de rapport d\n  const x = A.x + d * (cos * dx - sin * dy)\n  const y = A.y + d * (sin * dx + cos * dy)\n\n  return pointAbstrait(x, y, leNom, lePositionLabel)\n}\n\n/**\n * @param {Droite} d la droite qui intecepte (ou pas le cercle)\n * @param {Cercle} C le cercle\n * @param {string} nom le nom du point d'intersection\n * @param {entier} n 1 pour le premier point, 2 sinon. Si il n'y a qu'un seul point d'intesection, l'un ou l'autre renvoie ce point.\n * @example I = pointItersectionLC(d,c,'I',1) // I est le premier point d'intersection si il existe de la droite (d) et du cercle (c). On renvoie le centre du cercle sinon.\n * @author Jean-Claude Lhote\n */\nexport function pointIntersectionLC(\n  d: IDroite,\n  C: ICercle,\n  nom = '',\n  n = 1,\n): PointAbstrait {\n  const O = C.centre\n  const r = C.rayon\n  const a = d.a\n  const b = d.b\n  const c = d.c\n  const xO = O.x\n  const yO = O.y\n  let Delta, delta, xi, yi, xiPrime, yiPrime\n  if (Math.abs(b) < 0.000001) {\n    // la droite est verticale\n    xi = -c / a\n    xiPrime = xi\n    Delta = 4 * (-xO * xO - (c * c) / (a * a) - (2 * xO * c) / a + r * r)\n    if (Delta < 0)\n      return pointIntersectionNonTrouveEntre(d, C, pointAbstrait(50, 50))\n    else if (Math.abs(Delta) < 1e-10) {\n      // un seul point d'intersection\n      yi = yO + Math.sqrt(Delta) / 2\n      yiPrime = yi\n    } else {\n      // deux points d'intersection\n      yi = yO - Math.sqrt(Delta) / 2\n      yiPrime = yO + Math.sqrt(Delta) / 2\n    }\n  } else if (Math.abs(a) < 0.0000001) {\n    // la droite est horizontale\n    yi = -c / b\n    yiPrime = yi\n    Delta = 4 * (-yO * yO - (c * c) / (b * b) - (2 * yO * c) / b + r * r)\n    if (Delta < 0)\n      return pointIntersectionNonTrouveEntre(d, C, pointAbstrait(50, 50))\n    else if (Math.abs(Delta) < 1e-10) {\n      // un seul point d'intersection\n      xi = xO + Math.sqrt(Delta) / 2\n      xiPrime = xi\n    } else {\n      // deux points d'intersection\n      xi = xO - Math.sqrt(Delta) / 2\n      xiPrime = xO + Math.sqrt(Delta) / 2\n    }\n  } else {\n    // cas général\n    Delta =\n      (2 * ((a * c) / (b * b) + (yO * a) / b - xO)) ** 2 -\n      4 *\n        (1 + (a / b) ** 2) *\n        (xO * xO + yO * yO + (c / b) ** 2 + (2 * yO * c) / b - r * r)\n    if (Delta < 0)\n      return pointIntersectionNonTrouveEntre(d, C, pointAbstrait(50, 50))\n    else if (Math.abs(Delta) < 1e-10) {\n      // un seul point d'intersection\n      delta = Math.sqrt(Delta)\n      xi =\n        (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) - delta) /\n        (2 * (1 + (a / b) ** 2))\n      xiPrime = xi\n      yi = (-a * xi - c) / b\n      yiPrime = yi\n    } else {\n      // deux points d'intersection\n      delta = Math.sqrt(Delta)\n      xi =\n        (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) - delta) /\n        (2 * (1 + (a / b) ** 2))\n      xiPrime =\n        (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) + delta) /\n        (2 * (1 + (a / b) ** 2))\n      yi = (-a * xi - c) / b\n      yiPrime = (-a * xiPrime - c) / b\n    }\n  }\n  if (n === 1) {\n    if (yiPrime > yi) {\n      return pointAbstrait(xiPrime, yiPrime, nom)\n    } else {\n      return pointAbstrait(xi, yi, nom)\n    }\n  } else {\n    if (yiPrime > yi) {\n      return pointAbstrait(xi, yi, nom)\n    } else {\n      return pointAbstrait(xiPrime, yiPrime, nom)\n    }\n  }\n}\n\n/**\n * M = pointIntersectionCC(c1,c2,'M') // M est le point d'intersection le plus haut des cercles c1 et c2\n * M = pointIntersectionCC(c1,c2,'M',2) // M est le point d'intersection le plus bas des cercles c1 et c2\n * La fonction ne renvoie rien si les cercles n'ont pas de points d'intersection\n * @author Rémi Angot\n * @see https://stackoverflow.com/questions/12219802/a-javascript-function-that-returns-the-x-y-points-of-intersection-between-two-ci\n */\nexport function pointIntersectionCC(\n  c1: ICercle,\n  c2: ICercle,\n  nom = '',\n  n = 1,\n): PointAbstrait {\n  const O1 = c1.centre\n  const O2 = c2.centre\n  const r0 = c1.rayon\n  const r1 = c2.rayon\n  const x0 = O1.x\n  const x1 = O2.x\n  const y0 = O1.y\n  const y1 = O2.y\n  const dx = x1 - x0\n  const dy = y1 - y0\n  const d = Math.sqrt(dy * dy + dx * dx)\n  if (d > r0 + r1) {\n    return pointIntersectionNonTrouveEntre(c1, c2, pointAbstrait(50, 50))\n  }\n  if (d < Math.abs(r0 - r1)) {\n    return pointIntersectionNonTrouveEntre(c1, c2, pointAbstrait(50, 50))\n  }\n  const a = (r0 * r0 - r1 * r1 + d * d) / (2.0 * d)\n  const x2 = x0 + (dx * a) / d\n  const y2 = y0 + (dy * a) / d\n  const h = Math.sqrt(r0 * r0 - a * a)\n  const rx = -dy * (h / d)\n  const ry = dx * (h / d)\n  const xi = x2 + rx\n  const xiPrime = x2 - rx\n  const yi = y2 + ry\n  const yiPrime = y2 - ry\n  if (n === 1) {\n    if (yiPrime > yi) {\n      return pointAbstrait(xiPrime, yiPrime, nom)\n    } else {\n      return pointAbstrait(xi, yi, nom)\n    }\n  } else {\n    if (yiPrime > yi) {\n      return pointAbstrait(xi, yi, nom)\n    } else {\n      return pointAbstrait(xiPrime, yiPrime, nom)\n    }\n  }\n}\n\nfunction pointIntersectionNonTrouveEntre(\n  objet1: ICercle | IDroite,\n  objet2: ICercle | IDroite,\n  valeurParDefaut: PointAbstrait,\n): PointAbstrait {\n  window.notify(\n    `${JSON.stringify(objet1)} et ${JSON.stringify(objet2)} ne se coupent pas. Impossible de trouver leur intersection.`,\n    { objet1, objet2 },\n  )\n  return pointAbstrait(valeurParDefaut.x, valeurParDefaut.y)\n}\n\n/**\n * Vérifie si x est un point\n * @param x\n * @returns true si x est un point, false sinon\n * @author Jean-Claude Lhote\n */\nexport function isPoint(x: unknown): x is PointAbstrait {\n  return (\n    typeof x === 'object' &&\n    x !== null &&\n    (x as any).typeObjet === 'point' &&\n    typeof (x as any).x === 'number' &&\n    typeof (x as any).y === 'number'\n  )\n}\n","import { context } from '../../modules/context'\nimport { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport MainLevee from './MainLevee'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { point, PointAbstrait } from './PointAbstrait'\nimport {\n  angleOriente,\n  estSecant as estSecantUtil,\n} from './utilitairesGeometriques'\nimport { pointSurSegment } from './utilitairesPoint'\n\n/**\n * Rotation d'un point M autour d'un centre O d'un angle en degrés\n */\nfunction rotationPoint(\n  M: PointAbstrait,\n  O: PointAbstrait,\n  angleDeg: number,\n): PointAbstrait {\n  const angleRad = (angleDeg * Math.PI) / 180\n  const cos = Math.cos(angleRad)\n  const sin = Math.sin(angleRad)\n  const dx = M.x - O.x\n  const dy = M.y - O.y\n  return point(O.x + dx * cos - dy * sin, O.y + dx * sin + dy * cos)\n}\n\n/**\n * Similitude : rotation + homothétie\n * Point M' = O + k * rotation(M - O, angle)\n */\nfunction similitudePoint(\n  centre: PointAbstrait,\n  M: PointAbstrait,\n  angleDeg: number,\n  rapport: number,\n): PointAbstrait {\n  const angleRad = (angleDeg * Math.PI) / 180\n  const cos = Math.cos(angleRad)\n  const sin = Math.sin(angleRad)\n  const dx = M.x - centre.x\n  const dy = M.y - centre.y\n  return point(\n    centre.x + rapport * (dx * cos - dy * sin),\n    centre.y + rapport * (dx * sin + dy * cos),\n  )\n}\n\n/**\n * s = segment(A, B) //Segment d'extrémités A et B\n * s = segment(A,B,'blue') //Segment d'extrémités A et B et de couleur bleue\n * s = segment(x1,y1,x2,y2) //Segment défini par les coordonnées des deux extrémités\n * s = segment(x1,y1,x2,y2,'blue') //Segment défini par les coordonnées des deux extrémités et de couleur bleue\n * @class\n * @author Rémi Angot\n */\nexport class Segment extends ObjetMathalea2D {\n  tailleExtremites: number\n  styleExtremites: string\n  angleAvecHorizontale: number\n  x1: number\n  y1: number\n  x2: number\n  y2: number\n  extremite1: PointAbstrait\n  extremite2: PointAbstrait\n  longueur: number\n\n  // Surcharges\n  constructor(\n    A: PointAbstrait,\n    B: PointAbstrait,\n    color?: string,\n    styleExtremites?: string,\n  )\n  constructor(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    color?: string,\n    styleExtremites?: string,\n  )\n  constructor(\n    a: number | PointAbstrait,\n    b: number | PointAbstrait,\n    colorOrX2?: string | number,\n    styleOrY2?: string | number,\n    color?: string,\n    styleExtremites?: string,\n  ) {\n    super()\n    this.bordures = [0, 0, 0, 0]\n    this.typeObjet = 'segment'\n    this.tailleExtremites = 4\n\n    const isPoint = (v: unknown): v is PointAbstrait =>\n      v instanceof PointAbstrait\n\n    if (isPoint(a) && isPoint(b)) {\n      // Construction par deux points (A, B, color?, styleExtremites?)\n      this.x1 = a.x\n      this.y1 = a.y\n      this.x2 = b.x\n      this.y2 = b.y\n      this.color = colorToLatexOrHTML(\n        typeof colorOrX2 === 'string' ? colorOrX2 : 'black',\n      )\n      this.styleExtremites = typeof styleOrY2 === 'string' ? styleOrY2 : ''\n    } else if (\n      typeof a === 'number' &&\n      typeof b === 'number' &&\n      typeof colorOrX2 === 'number' &&\n      typeof styleOrY2 === 'number'\n    ) {\n      // Construction par coordonnées (x1, y1, x2, y2, color?, styleExtremites?)\n      if (\n        Number.isNaN(a) ||\n        Number.isNaN(b) ||\n        Number.isNaN(colorOrX2) ||\n        Number.isNaN(styleOrY2)\n      ) {\n        window.notify(\n          'Segment : (attendus : x1, y1, x2, y2 et \"couleur\") les arguments ne sont pas des nombres valides',\n          { a, b, colorOrX2, styleOrY2 },\n        )\n        this.x1 = 0\n        this.y1 = 0\n        this.x2 = 0\n        this.y2 = 0\n        this.color = colorToLatexOrHTML('black')\n        this.styleExtremites = ''\n      } else {\n        this.x1 = a\n        this.y1 = b\n        this.x2 = colorOrX2\n        this.y2 = styleOrY2\n        this.color = colorToLatexOrHTML(color || 'black')\n        this.styleExtremites = styleExtremites || ''\n      }\n    } else {\n      // Cas invalide\n      window.notify(\n        'Segment : utilisez (A, B, color?, style?) ou (x1, y1, x2, y2, color?, style?)',\n        { a, b, colorOrX2, styleOrY2 },\n      )\n      this.x1 = 0\n      this.y1 = 0\n      this.x2 = 0\n      this.y2 = 0\n      this.color = colorToLatexOrHTML('black')\n      this.styleExtremites = ''\n    }\n\n    this.x1 = Number(this.x1.toFixed(2))\n    this.y1 = Number(this.y1.toFixed(2))\n    this.x2 = Number(this.x2.toFixed(2))\n    this.y2 = Number(this.y2.toFixed(2))\n\n    this.epaisseur = 1\n    this.opacite = 1\n    this.pointilles = 0\n\n    this.bordures = [\n      Number(Math.min(this.x1, this.x2)),\n      Number(Math.min(this.y1, this.y2)),\n      Number(Math.max(this.x1, this.x2)),\n      Number(Math.max(this.y1, this.y2)),\n    ]\n    this.extremite1 = point(this.x1, this.y1)\n    this.extremite2 = point(this.x2, this.y2)\n    this.longueur = Math.sqrt(\n      (this.x2 - this.x1) ** 2 + (this.y2 - this.y1) ** 2,\n    )\n    // utiliser les fonctions de calcul d'angle avec un segment de longueur nulle est une erreur ! Je blinde en retournant un angle nul\n    this.angleAvecHorizontale =\n      this.longueur < 1e-8\n        ? 0\n        : angleOriente(\n            point(this.x1 + 1, this.y1),\n            this.extremite1,\n            this.extremite2,\n            5,\n          )\n    if (this.longueur < 1e-8) {\n      window.notify(\n        \"Création d'un segment de longueur nulle, les opérations géométriques peuvent être erronées\",\n        { x1: this.x1, y1: this.y1, x2: this.x2, y2: this.y2 },\n      )\n    }\n  }\n\n  svg(coeff: number) {\n    if (this.epaisseur !== 1) {\n      this.style += ` stroke-width=\"${this.epaisseur}\" `\n    }\n    switch (this.pointilles) {\n      case 1:\n        this.style += ' stroke-dasharray=\"6 10\" '\n        break\n      case 2:\n        this.style += ' stroke-dasharray=\"6 3\" '\n        break\n      case 3:\n        this.style += ' stroke-dasharray=\"3 2 6 2 \" '\n        break\n      case 4:\n        this.style += ' stroke-dasharray=\"1 2\" '\n        break\n      case 5:\n        this.style += ' stroke-dasharray=\"5 5\" '\n        break\n    }\n\n    if (this.opacite !== 1) {\n      this.style += ` stroke-opacity=\"${this.opacite}\" `\n    }\n    let code = this.codeExtremitesSVG(coeff)\n    const A = point(this.x1, this.y1)\n    const B = point(this.x2, this.y2)\n\n    code += `\\n\\t<line x1=\"${A.xSVG(coeff)}\" y1=\"${A.ySVG(coeff)}\" x2=\"${B.xSVG(\n      coeff,\n    )}\" y2=\"${B.ySVG(coeff)}\" stroke=\"${this.color[0]}\" ${this.style} />`\n\n    if (this.styleExtremites.length > 0) {\n      code = `<g id=\"${this.id}\">${code}</g>`\n    } else {\n      code = code.replace('/>', `id=\"${this.id}\" />`)\n    }\n\n    return code\n  }\n\n  tikz() {\n    let optionsDraw = ''\n    const tableauOptions = []\n    if (this.color[1].length > 1 && this.color[1] !== 'black') {\n      tableauOptions.push(`color =${this.color[1]}`)\n    }\n    if (this.epaisseur !== 1) {\n      tableauOptions.push(`line width = ${this.epaisseur}`)\n    }\n    if (this.opacite !== 1) {\n      tableauOptions.push(`opacity = ${this.opacite}`)\n    }\n    switch (this.pointilles) {\n      case 1:\n        tableauOptions.push(' dash dot ')\n        break\n      case 2:\n        tableauOptions.push(' densely dash dot dot ')\n        break\n      case 3:\n        tableauOptions.push(' dash dot dot ')\n        break\n\n      case 4:\n        tableauOptions.push(' dotted ')\n        break\n      case 5:\n        tableauOptions.push(' dashed ')\n        break\n    }\n    let arrowsOption = ''\n    if (this.styleExtremites.length > 0) {\n      // Map des styles\n      const map: { [key: string]: string } = {\n        '|': 'Bar',\n        '>': 'Stealth',\n        '<': 'Stealth',\n      }\n      // Taille des pointes\n      const width = Math.max(2, Math.round(this.tailleExtremites))\n      let left = ''\n      let right = ''\n      if (this.styleExtremites.length === 3) {\n        left = map[this.styleExtremites[0]] || ''\n        right = map[this.styleExtremites[2]] || ''\n      } else if (this.styleExtremites.length === 2) {\n        if (this.styleExtremites[0] in map) left = map[this.styleExtremites[0]]\n        if (this.styleExtremites[1] in map) right = map[this.styleExtremites[1]]\n      } else if (this.styleExtremites.length === 1) {\n        if (this.styleExtremites[0] in map) right = map[this.styleExtremites[0]]\n      }\n      // Ajout des tailles personnalisées\n      const leftTip = left ? `{${left}[width=${width}mm]}` : ''\n      const rightTip = right ? `{${right}[width=${width}mm]}` : ''\n      if (leftTip && rightTip) {\n        arrowsOption = `${leftTip}-${rightTip}`\n      } else if (leftTip) {\n        arrowsOption = `${leftTip}-`\n      } else if (rightTip) {\n        arrowsOption = `-${rightTip}`\n      }\n      if (arrowsOption) {\n        tableauOptions.push(arrowsOption)\n      }\n    }\n    if (tableauOptions.length > 0) {\n      optionsDraw = '[' + tableauOptions.join(',') + ']'\n    }\n    return `\\\\draw${optionsDraw} (${this.x1},${this.y1})--(${this.x2},${this.y2});`\n  }\n\n  svgml(coeff: number, amplitude: number) {\n    const mainLevee = MainLevee.create() // mainLevee permet d'accéder aux méthodes pour créer les objets roughjs\n    if (mainLevee != null) {\n      const A = point(this.x1, this.y1)\n      const B = point(this.x2, this.y2)\n      let code = this.codeExtremitesSVG(coeff)\n      code += mainLevee.line(\n        A.xSVG(coeff),\n        A.ySVG(coeff),\n        B.xSVG(coeff),\n        B.ySVG(coeff),\n        {\n          color: this.color[0],\n          epaisseur: this.epaisseur,\n          roughness: amplitude * 2,\n        },\n      )\n      if (this.styleExtremites.length > 0) {\n        code = `<g id=\"${this.id}\">${code}</g>`\n      } else {\n        code = code.replace('/>', `id=\"${this.id}\" />`)\n      }\n      mainLevee.destroy() // ne pas oublier de faire ça, sinon, il va trainer un svg qui ne sert à rien dans le DOM\n      return code\n    } else return ''\n  }\n\n  tikzml(amp: number) {\n    const A = point(this.x1, this.y1)\n    const B = point(this.x2, this.y2)\n    let optionsDraw = ''\n    const tableauOptions = []\n    if (this.color[1].length > 1 && this.color[1] !== 'black') {\n      tableauOptions.push(`color =${this.color[1]}`)\n    }\n    if (this.epaisseur !== 1) {\n      tableauOptions.push(`line width = ${this.epaisseur}`)\n    }\n\n    if (this.opacite !== 1) {\n      tableauOptions.push(`opacity = ${this.opacite}`)\n    }\n    if (this.styleExtremites.length > 1) {\n      if (\n        this.styleExtremites.includes('[') ||\n        this.styleExtremites.includes(']')\n      ) {\n        tableauOptions.push('{' + this.styleExtremites + '}')\n      } else {\n        tableauOptions.push(this.styleExtremites)\n      }\n    }\n    tableauOptions.push(\n      `decorate,decoration={random steps , amplitude = ${amp}pt}`,\n    )\n    optionsDraw = '[' + tableauOptions.join(',') + ']'\n\n    const code = `\\\\draw${optionsDraw} (${A.x},${A.y})--(${B.x},${B.y});`\n    return code\n  }\n\n  codeExtremitesSVG(coeff: number) {\n    let code = ''\n    const A = point(this.x1, this.y1)\n    const B = point(this.x2, this.y2)\n    // On ne peut pas coder des extrémités si le segment est de longueur nulle\n    if (this.longueur < 1e-8) return code // éviter les divisions par zéro\n    const h = this.tailleExtremites\n    if (this.styleExtremites.length > 1) {\n      const fin = this.styleExtremites.slice(-1)\n      if (fin === '|') {\n        // si ça termine par | on le rajoute en B\n        const M = pointSurSegment(B, A, h / context.pixelsParCm)\n        const B1 = rotationPoint(M, B, 90)\n        const B2 = rotationPoint(M, B, -90)\n        code += `<line x1=\"${B1.xSVG(coeff)}\" y1=\"${B1.ySVG(\n          coeff,\n        )}\" x2=\"${B2.xSVG(coeff)}\" y2=\"${B2.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (fin === '>') {\n        // si ça termine par > on rajoute une flèche en B\n        const M = pointSurSegment(B, A, h / context.pixelsParCm)\n        const B1 = similitudePoint(B, M, 45, 0.7)\n        const B2 = similitudePoint(B, M, -45, 0.7)\n        code += `<line x1=\"${B.xSVG(coeff)}\" y1=\"${B.ySVG(\n          coeff,\n        )}\" x2=\"${B1.xSVG(coeff)}\" y2=\"${B1.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n        code += `\\n\\t<line x1=\"${B.xSVG(coeff)}\" y1=\"${B.ySVG(\n          coeff,\n        )}\" x2=\"${B2.xSVG(coeff)}\" y2=\"${B2.ySVG(coeff)}\" stroke=\"${this.color[0]}\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (fin === '<') {\n        // si ça termine par < on rajoute une flèche inversée en B\n        const M = pointSurSegment(B, A, -h / context.pixelsParCm)\n        const B1 = similitudePoint(B, M, 45, 0.7)\n        const B2 = similitudePoint(B, M, -45, 0.7)\n        code += `<line x1=\"${B.xSVG(coeff)}\" y1=\"${B.ySVG(\n          coeff,\n        )}\" x2=\"${B1.xSVG(coeff)}\" y2=\"${B1.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n        code += `\\n\\t<line x1=\"${B.xSVG(coeff)}\" y1=\"${B.ySVG(\n          coeff,\n        )}\" x2=\"${B2.xSVG(coeff)}\" y2=\"${B2.ySVG(coeff)}\" stroke=\"${this.color[0]}\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (fin === '[') {\n        // si ça termine par | on le rajoute en B\n        const M = pointSurSegment(B, A, h / context.pixelsParCm)\n        const B1 = similitudePoint(M, B, 90, 1)\n        const B2 = similitudePoint(M, B, -90, 1)\n        const C1 = similitudePoint(B, B1, -90, 0.3)\n        const C2 = similitudePoint(B, B2, 90, 0.3)\n        code += `<polyline points=\"${C2.xSVG(coeff)},${C2.ySVG(coeff)} ${B2.xSVG(coeff)},${B2.ySVG(coeff)} ${B1.xSVG(coeff)},${B1.ySVG(coeff)} ${C1.xSVG(coeff)},${C1.ySVG(coeff)}\" fill=\"none\" stroke=\"${this.color[0]}\" ${this.style} id=\"${this.id}\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (fin === ']') {\n        // si ça termine par | on le rajoute en B\n        const M = pointSurSegment(B, A, h / context.pixelsParCm)\n        const B1 = similitudePoint(M, B, 90, 1)\n        const B2 = similitudePoint(M, B, -90, 1)\n        const C1 = similitudePoint(B, B1, 90, 0.3)\n        const C2 = similitudePoint(B, B2, -90, 0.3)\n        code += `<polyline points=\"${C2.xSVG(coeff)},${C2.ySVG(coeff)} ${B2.xSVG(coeff)},${B2.ySVG(coeff)} ${B1.xSVG(coeff)},${B1.ySVG(coeff)} ${C1.xSVG(coeff)},${C1.ySVG(coeff)}\" fill=\"none\" stroke=\"${this.color[0]}\" ${this.style} id=\"${this.id}\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      const debut = this.styleExtremites[0]\n      if (debut === '[') {\n        // si ça termine par | on le rajoute en B\n        const M = pointSurSegment(A, B, h / context.pixelsParCm)\n        const B1 = similitudePoint(M, A, 90, 1)\n        const B2 = similitudePoint(M, A, -90, 1)\n        const C1 = similitudePoint(A, B1, 90, 0.3)\n        const C2 = similitudePoint(A, B2, -90, 0.3)\n        code += `<polyline points=\"${C2.xSVG(coeff)},${C2.ySVG(coeff)} ${B2.xSVG(coeff)},${B2.ySVG(coeff)} ${B1.xSVG(coeff)},${B1.ySVG(coeff)} ${C1.xSVG(coeff)},${C1.ySVG(coeff)}\" fill=\"none\" stroke=\"${this.color[0]}\" ${this.style} id=\"${this.id}\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (debut === ']') {\n        // si ça termine par | on le rajoute en B\n        const M = pointSurSegment(A, B, h / context.pixelsParCm)\n        const B1 = similitudePoint(M, A, 90, 1)\n        const B2 = similitudePoint(M, A, -90, 1)\n        const C1 = similitudePoint(A, B1, -90, 0.3)\n        const C2 = similitudePoint(A, B2, 90, 0.3)\n        code += `<polyline points=\"${C2.xSVG(coeff)},${C2.ySVG(coeff)} ${B2.xSVG(coeff)},${B2.ySVG(coeff)} ${B1.xSVG(coeff)},${B1.ySVG(coeff)} ${C1.xSVG(coeff)},${C1.ySVG(coeff)}\" fill=\"none\" stroke=\"${this.color[0]}\" ${this.style} id=\"${this.id}\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (debut === '<') {\n        // si ça commence par < on rajoute une flèche en A\n        const M = pointSurSegment(A, B, h / context.pixelsParCm)\n        const A1 = similitudePoint(A, M, 45, 0.7)\n        const A2 = similitudePoint(A, M, -45, 0.7)\n        code += `<line x1=\"${A.xSVG(coeff)}\" y1=\"${A.ySVG(\n          coeff,\n        )}\" x2=\"${A1.xSVG(coeff)}\" y2=\"${A1.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n        code += `\\n\\t<line x1=\"${A.xSVG(coeff)}\" y1=\"${A.ySVG(\n          coeff,\n        )}\" x2=\"${A2.xSVG(coeff)}\" y2=\"${A2.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (debut === '>') {\n        // si ça commence par > on rajoute une flèche inversée en A\n        const M = pointSurSegment(A, B, -h / context.pixelsParCm)\n        const A1 = similitudePoint(A, M, 45, 0.7)\n        const A2 = similitudePoint(A, M, -45, 0.7)\n        code += `<line x1=\"${A.xSVG(coeff)}\" y1=\"${A.ySVG(\n          coeff,\n        )}\" x2=\"${A1.xSVG(coeff)}\" y2=\"${A1.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n        code += `\\n\\t<line x1=\"${A.xSVG(coeff)}\" y1=\"${A.ySVG(\n          coeff,\n        )}\" x2=\"${A2.xSVG(coeff)}\" y2=\"${A2.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n      }\n      if (debut === '|') {\n        // si ça commence par | on le rajoute en A\n        const N = pointSurSegment(A, B, h / context.pixelsParCm)\n        const A1 = rotationPoint(N, A, 90)\n        const A2 = rotationPoint(N, A, -90)\n        code += `<line x1=\"${A1.xSVG(coeff)}\" y1=\"${A1.ySVG(\n          coeff,\n        )}\" x2=\"${A2.xSVG(coeff)}\" y2=\"${A2.ySVG(coeff)}\" stroke=\"${\n          this.color[0]\n        }\" stroke-width=\"${this.epaisseur}\" />`\n      }\n    }\n    return code\n  }\n\n  /**\n   * Teste si un segment coupe un cercle, une droite, une demi-cercle ou un autre segment\n   * @memberof Segment\n   * @param {Segment | Droite | DemiDroite | Cercle} objet Objet géométrique dont on veut tester l'intersection avec le segment\n   * @example s1.estSecant(d1) // Renvoie true si s1 est sécant avec d1, false sinon\n   * @author Jean-Claude Lhote\n   * @return {boolean}\n   */\n  // JSDOC Validee par EE Aout 2022\n  estSecant(objet: any) {\n    return estSecantUtil(this, objet)\n  }\n}\n\n/**\n * @param {...any} args Points ou coordonnées + couleur facultative en dernier\n * @return {Segment}\n * @example segment(A,B,'blue') // Segment [AB] de couleur bleu\n * @example segment(x1,y1,x2,y2,'#f15929') // Segment dont les extrémités sont respectivement (x1,y1) et (x2,y2), de couleur orange (#f15929)\n * @author Rémi Angot\n */\n// Surcharges pour la fabrique\nexport function segment(\n  A: PointAbstrait,\n  B: PointAbstrait,\n  color?: string,\n  styleExtremites?: string,\n): Segment\nexport function segment(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  color?: string,\n  styleExtremites?: string,\n): Segment\nexport function segment(\n  a: number | PointAbstrait,\n  b: number | PointAbstrait,\n  colorOrX2?: string | number,\n  styleOrY2?: string | number,\n  color?: string,\n  styleExtremites?: string,\n) {\n  return new Segment(\n    a as any,\n    b as any,\n    colorOrX2 as any,\n    styleOrY2 as any,\n    color,\n    styleExtremites,\n  )\n}\n\n/**\n * @param {...args} args Points ou coordonnées\n * @param {string} color Facultatif\n * @example segmentAvecExtremites(A,B,'blue')\n * @example segmentAvecExtremites(x1,y1,x2,y2,'#f15929')\n * @author Rémi Angot\n */\nexport function segmentAvecExtremites(\n  ...args:\n    | [PointAbstrait, PointAbstrait, string?, string?]\n    | [number, number, number, number, string?, string?]\n) {\n  const s =\n    typeof args[0] === 'number' && typeof args[1] === 'number'\n      ? segment(\n          args[0],\n          args[1],\n          args[2] as number,\n          args[3] as number,\n          args[4] as string,\n          args[5] as string,\n        )\n      : segment(\n          args[0] as PointAbstrait,\n          args[1] as PointAbstrait,\n          args[2] as string,\n          args[3] as string,\n        )\n  s.styleExtremites = '|-|'\n  return s\n}\n"],"names":["MainLevee","rs","div","svg","__publicField","x1","y1","x2","y2","color","epaisseur","roughness","x","y","width","height","start","stop","closed","bowing","rayon","points","roughSvg","rough","randint","min","max","longueur","A","B","milieu","nom","positionLabel","pointAbstrait","pointSurSegment","l","k","pointSurCercle","c","angle","angleRad","pointSurDroite","d","pointIntersectionDD","f","pointIntersectionNonTrouveEntre","pointAdistance","leNom","lAngle","lePositionLabel","cos","sin","dx","dy","pointIntersectionLC","C","O","r","a","b","xO","yO","Delta","delta","xi","yi","xiPrime","yiPrime","pointIntersectionCC","c1","c2","O1","O2","r0","r1","x0","y0","h","rx","ry","objet1","objet2","valeurParDefaut","rotationPoint","M","angleDeg","point","similitudePoint","centre","rapport","Segment","ObjetMathalea2D","colorOrX2","styleOrY2","styleExtremites","isPoint","v","PointAbstrait","colorToLatexOrHTML","angleOriente","coeff","code","optionsDraw","tableauOptions","arrowsOption","map","left","right","leftTip","rightTip","amplitude","mainLevee","amp","fin","context","B1","B2","C1","C2","debut","A1","A2","N","objet","estSecantUtil","segment","segmentAvecExtremites","args","s"],"mappings":"sbAGA,MAAMA,CAAU,CAId,YAAYC,EAAcC,EAAqBC,EAAoB,CAH3DC,EAAA,iBACAA,EAAA,YACAA,EAAA,YAEN,KAAK,SAAWH,EAChB,KAAK,IAAMC,EACX,KAAK,IAAMC,CACb,CAEA,KACEE,EACAC,EACAC,EACAC,EACA,CAAE,MAAAC,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,CAAA,EAAM,CAAA,EACnD,CACA,OAAO,KAAK,SAAS,KAAKN,EAAIC,EAAIC,EAAIC,EAAI,CACxC,UAAAG,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaD,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,IACEG,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA,CAAE,MAAAT,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,EAAG,OAAAQ,EAAS,EAAA,EAAQ,GACjE,CACA,OAAO,KAAK,SAAS,IAAIP,EAAGC,EAAGC,EAAOC,EAAQC,EAAOC,EAAMC,EAAQ,CACjE,UAAAP,EACA,OAAAQ,EACA,mBAAoB,GACpB,YAAaT,EACb,iBAAkB,GAClB,KAAM,GACN,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,OACEG,EACAC,EACAO,EACA,CAAE,MAAAX,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,IAAK,OAAAQ,EAAS,GAAA,EAAQ,CAAA,EACnE,CACA,OAAO,KAAK,SAAS,OAAOP,EAAGC,EAAGO,EAAQ,EAAG,CAC3C,UAAAT,EACA,OAAAQ,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaT,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,QACEY,EAAwC,CAAA,EACxC,CAAE,MAAAZ,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,IAAK,OAAAQ,EAAS,GAAA,EAAQ,CAAA,EACnE,CACA,OAAO,KAAK,SAAS,QAAQE,EAAQ,CACnC,UAAAV,EACA,OAAAQ,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaT,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,WACEY,EAAwC,CAAA,EACxC,CAAE,MAAAZ,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,IAAK,OAAAQ,EAAS,GAAA,EAAQ,CAAA,EACnE,CACA,OAAO,KAAK,SAAS,WAAWE,EAAQ,CACtC,UAAAV,EACA,OAAAQ,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaT,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,QACEG,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA,CAAE,MAAAT,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,EAAG,OAAAQ,EAAS,EAAA,EAAQ,GACjE,CACA,OAAO,KAAK,SAAS,QAAQP,EAAGC,EAAGC,EAAOC,EAAQ,CAChD,UAAAJ,EACA,OAAAQ,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaT,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,UACEG,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA,CAAE,MAAAT,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,EAAG,OAAAQ,EAAS,EAAA,EAAQ,GACjE,CACA,OAAO,KAAK,SAAS,UAAUP,EAAGC,EAAGC,EAAOC,EAAQ,CAClD,UAAAJ,EACA,OAAAQ,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaT,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,MACEY,EAAwC,CAAA,EACxC,CAAE,MAAAZ,EAAQ,OAAQ,UAAAC,EAAY,EAAG,UAAAC,EAAY,IAAK,OAAAQ,EAAS,GAAA,EAAQ,CAAA,EACnE,CACA,OAAO,KAAK,SAAS,MAAME,EAAQ,CACjC,UAAAV,EACA,OAAAQ,EACA,mBAAoB,GACpB,iBAAkB,GAClB,KAAM,GACN,YAAaT,EACb,OAAQD,CAAA,CACT,EAAE,SACL,CAEA,SAAU,CACR,KAAK,IAAI,YAAY,KAAK,GAAG,CAC/B,CAEA,OAAO,QAAS,CACd,MAAMP,EAA6B,SAAS,cAAc,iBAAiB,EAC3E,GAAI,CAACA,EAAK,OAAO,KACjB,MAAMC,EAAqB,SAAS,gBAClC,6BACA,KAAA,EAEFA,EAAI,MAAM,MAAQ,OAClBA,EAAI,MAAM,OAAS,OACnBA,EAAI,aAAa,UAAW,SAAS,EACrCD,EAAI,YAAYC,CAAG,EACnB,MAAMmB,EAAWC,EAAM,IAAIpB,CAAG,EAC9B,OAAO,IAAIH,EAAUsB,EAAUpB,EAAKC,CAAG,CACzC,CACF,CCpKA,MAAMqB,EAAU,CAACC,EAAaC,IAC5B,KAAK,MAAM,KAAK,OAAA,GAAYA,EAAMD,EAAM,EAAE,EAAIA,EAQ1CE,EAAW,CAACC,EAAmBC,IACnC,KAAK,MAAMA,EAAE,EAAID,EAAE,IAAM,GAAKC,EAAE,EAAID,EAAE,IAAM,CAAC,EASxC,SAASE,EACdF,EACAC,EACAE,EAAM,GACNC,EAAgB,QACD,CACX,MAAML,EAASC,EAAGC,CAAC,CAAC,GACtB,OAAO,OAAO,mDAAoD,CAAE,EAAAD,EAAG,EAAAC,EAAG,EAC5E,MAAMjB,GAAKgB,EAAE,EAAIC,EAAE,GAAK,EAClBhB,GAAKe,EAAE,EAAIC,EAAE,GAAK,EACxB,OAAOI,EAAcrB,EAAGC,EAAGkB,EAAKC,CAAa,CAC/C,CAYO,SAASE,EACdN,EACAC,EACAM,EACAJ,EAAM,GACNC,EAAgB,QACD,CACf,GAAI,MAAML,EAASC,EAAGC,CAAC,CAAC,EACtB,cAAO,OAAO,4DAA6D,CACzE,EAAAD,EACA,EAAAC,CAAA,CACD,EACMI,EAAcL,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAAKA,EAAE,aAAa,EAOvD,IALIO,IAAM,QAAa,OAAOA,GAAM,YAClCA,EAAKR,EAASC,EAAGC,CAAC,EAAIL,EAAQ,GAAI,EAAE,EAAK,KAIvCG,EAASC,EAAGC,CAAC,IAAM,EACrB,OAAOI,EAAcL,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAAKA,EAAE,aAAa,EAEvD,MAAMQ,EAAID,EAAIR,EAASC,EAAGC,CAAC,EACrBjB,EAAIgB,EAAE,EAAIQ,GAAKP,EAAE,EAAID,EAAE,GACvBf,EAAIe,EAAE,EAAIQ,GAAKP,EAAE,EAAID,EAAE,GAC7B,OAAOK,EAAcrB,EAAGC,EAAGkB,EAAKC,CAAa,CAC/C,CAaO,SAASK,EACdC,EACAC,EACAR,EACAC,EAAgB,QACD,CACX,OAAOO,GAAU,WAAUA,EAAQf,EAAQ,KAAM,GAAG,GACxD,MAAMgB,EAAYD,EAAQ,KAAK,GAAM,IAC/B3B,EAAI0B,EAAE,OAAO,EAAIA,EAAE,MAAQ,KAAK,IAAIE,CAAQ,EAC5C3B,EAAIyB,EAAE,OAAO,EAAIA,EAAE,MAAQ,KAAK,IAAIE,CAAQ,EAClD,OAAOP,EAAcrB,EAAGC,EAAGkB,EAAKC,CAAa,CAC/C,CAWO,SAASS,GACdC,EACA9B,EACAmB,EAAM,GACNC,EAAgB,QACD,CAEf,OAAIU,EAAE,IAAM,EAAUT,EAAc,CAACS,EAAE,EAAIA,EAAE,EAAG9B,EAAGmB,EAAKC,CAAa,EAC5DU,EAAE,IAAM,EAAUT,EAAcrB,EAAG,CAAC8B,EAAE,EAAIA,EAAE,EAAGX,EAAKC,CAAa,EAC9DC,EAAcrB,GAAI,CAAC8B,EAAE,EAAIA,EAAE,EAAI9B,GAAK8B,EAAE,EAAGX,EAAKC,CAAa,CACzE,CAWO,SAASW,GACdD,EACAE,EACAb,EAAM,GACNC,EAAgB,QACD,CACf,IAAIpB,EAAGC,EACP,OAAI,KAAK,IAAI+B,EAAE,EAAIF,EAAE,EAAIE,EAAE,EAAIF,EAAE,CAAC,EAAI,KAE7BG,EAAgCH,EAAGE,EAAGX,EAAc,GAAI,EAAE,CAAC,GAElEpB,GAAK+B,EAAE,EAAIF,EAAE,EAAIA,EAAE,EAAIE,EAAE,IAAMA,EAAE,EAAIF,EAAE,EAAIE,EAAE,EAAIF,EAAE,GAEjD,KAAK,IAAIA,EAAE,CAAC,EAAI,KAElB9B,GAAK,CAACgC,EAAE,EAAIA,EAAE,EAAI/B,GAAK+B,EAAE,EAGzBhC,GAAK,CAAC8B,EAAE,EAAIA,EAAE,EAAI7B,GAAK6B,EAAE,EAEpBT,EAAcrB,EAAGC,EAAGkB,EAAKC,CAAa,EAC/C,CAOO,SAASc,GACdlB,EACAc,EAAY,EACZH,EAAyB,EACzBR,EAAM,GACNC,EAAgB,QACD,CACf,IAAIe,EAAQ,GACRC,EAAS,EACTC,EAAkB,QAClB,OAAOV,GAAU,UACnBS,EAASxB,EAAQ,EAAG,GAAG,EACvBuB,EAAQR,EACJR,GAAO,OAAMkB,EAAkBlB,KAEnCiB,EAAST,GAASf,EAAQ,EAAG,GAAG,EAC5BO,GAAO,OAAMgB,EAAQhB,GACrBC,GAAiB,OAAMiB,EAAkBjB,IAO/C,MAAMQ,EAAYQ,EAAS,KAAK,GAAM,IAChCE,EAAM,KAAK,IAAIV,CAAQ,EACvBW,EAAM,KAAK,IAAIX,CAAQ,EAGvBY,EAAK,EACLC,EAAK,EAGL,EAAIzB,EAAE,EAAIc,GAAKQ,EAAME,EAAKD,EAAME,GAChCxC,EAAIe,EAAE,EAAIc,GAAKS,EAAMC,EAAKF,EAAMG,GAEtC,OAAOpB,EAAc,EAAGpB,EAAGkC,EAAOE,CAAe,CACnD,CAUO,SAASK,GACdZ,EACAa,EACAxB,EAAM,GACN,EAAI,EACW,CACf,MAAMyB,EAAID,EAAE,OACNE,EAAIF,EAAE,MACNG,EAAIhB,EAAE,EACNiB,EAAIjB,EAAE,EACNJ,EAAII,EAAE,EACNkB,EAAKJ,EAAE,EACPK,EAAKL,EAAE,EACb,IAAIM,EAAOC,EAAOC,EAAIC,EAAIC,EAASC,EACnC,GAAI,KAAK,IAAIR,CAAC,EAAI,KAAU,CAK1B,GAHAK,EAAK,CAAC1B,EAAIoB,EACVQ,EAAUF,EACVF,EAAQ,GAAK,CAACF,EAAKA,EAAMtB,EAAIA,GAAMoB,EAAIA,GAAM,EAAIE,EAAKtB,EAAKoB,EAAID,EAAIA,GAC/DK,EAAQ,EACV,OAAOjB,EAAgCH,EAAGa,EAAGtB,EAAc,GAAI,EAAE,CAAC,EAC3D,KAAK,IAAI6B,CAAK,EAAI,OAEzBG,EAAKJ,EAAK,KAAK,KAAKC,CAAK,EAAI,EAC7BK,EAAUF,IAGVA,EAAKJ,EAAK,KAAK,KAAKC,CAAK,EAAI,EAC7BK,EAAUN,EAAK,KAAK,KAAKC,CAAK,EAAI,EAEtC,SAAW,KAAK,IAAIJ,CAAC,EAAI,KAAW,CAKlC,GAHAO,EAAK,CAAC3B,EAAIqB,EACVQ,EAAUF,EACVH,EAAQ,GAAK,CAACD,EAAKA,EAAMvB,EAAIA,GAAMqB,EAAIA,GAAM,EAAIE,EAAKvB,EAAKqB,EAAIF,EAAIA,GAC/DK,EAAQ,EACV,OAAOjB,EAAgCH,EAAGa,EAAGtB,EAAc,GAAI,EAAE,CAAC,EAC3D,KAAK,IAAI6B,CAAK,EAAI,OAEzBE,EAAKJ,EAAK,KAAK,KAAKE,CAAK,EAAI,EAC7BI,EAAUF,IAGVA,EAAKJ,EAAK,KAAK,KAAKE,CAAK,EAAI,EAC7BI,EAAUN,EAAK,KAAK,KAAKE,CAAK,EAAI,EAEtC,KAAO,CAOL,GALAA,GACG,GAAMJ,EAAIpB,GAAMqB,EAAIA,GAAME,EAAKH,EAAKC,EAAIC,KAAQ,EACjD,GACG,GAAKF,EAAIC,IAAM,IACfC,EAAKA,EAAKC,EAAKA,GAAMvB,EAAIqB,IAAM,EAAK,EAAIE,EAAKvB,EAAKqB,EAAIF,EAAIA,GAC3DK,EAAQ,EACV,OAAOjB,EAAgCH,EAAGa,EAAGtB,EAAc,GAAI,EAAE,CAAC,EAC3D,KAAK,IAAI6B,CAAK,EAAI,OAEzBC,EAAQ,KAAK,KAAKD,CAAK,EACvBE,GACG,IAAON,EAAIpB,GAAMqB,EAAIA,GAAME,EAAKH,EAAKC,EAAIC,GAAMG,IAC/C,GAAK,GAAKL,EAAIC,IAAM,IACvBO,EAAUF,EACVC,GAAM,CAACP,EAAIM,EAAK1B,GAAKqB,EACrBQ,EAAUF,IAGVF,EAAQ,KAAK,KAAKD,CAAK,EACvBE,GACG,IAAON,EAAIpB,GAAMqB,EAAIA,GAAME,EAAKH,EAAKC,EAAIC,GAAMG,IAC/C,GAAK,GAAKL,EAAIC,IAAM,IACvBO,GACG,IAAOR,EAAIpB,GAAMqB,EAAIA,GAAME,EAAKH,EAAKC,EAAIC,GAAMG,IAC/C,GAAK,GAAKL,EAAIC,IAAM,IACvBM,GAAM,CAACP,EAAIM,EAAK1B,GAAKqB,EACrBQ,GAAW,CAACT,EAAIQ,EAAU5B,GAAKqB,EAEnC,CACA,OAAI,IAAM,EACJQ,EAAUF,EACLhC,EAAciC,EAASC,EAASpC,CAAG,EAEnCE,EAAc+B,EAAIC,EAAIlC,CAAG,EAG9BoC,EAAUF,EACLhC,EAAc+B,EAAIC,EAAIlC,CAAG,EAEzBE,EAAciC,EAASC,EAASpC,CAAG,CAGhD,CASO,SAASqC,GACdC,EACAC,EACAvC,EAAM,GACN,EAAI,EACW,CACf,MAAMwC,EAAKF,EAAG,OACRG,EAAKF,EAAG,OACRG,EAAKJ,EAAG,MACRK,EAAKJ,EAAG,MACRK,EAAKJ,EAAG,EACRlE,EAAKmE,EAAG,EACRI,EAAKL,EAAG,EACRjE,EAAKkE,EAAG,EACRpB,EAAK/C,EAAKsE,EACVtB,EAAK/C,EAAKsE,EACVlC,EAAI,KAAK,KAAKW,EAAKA,EAAKD,EAAKA,CAAE,EACrC,GAAIV,EAAI+B,EAAKC,EACX,OAAO7B,EAAgCwB,EAAIC,EAAIrC,EAAc,GAAI,EAAE,CAAC,EAEtE,GAAIS,EAAI,KAAK,IAAI+B,EAAKC,CAAE,EACtB,OAAO7B,EAAgCwB,EAAIC,EAAIrC,EAAc,GAAI,EAAE,CAAC,EAEtE,MAAMyB,GAAKe,EAAKA,EAAKC,EAAKA,EAAKhC,EAAIA,IAAM,EAAMA,GACzCnC,EAAKoE,EAAMvB,EAAKM,EAAKhB,EACrBlC,EAAKoE,EAAMvB,EAAKK,EAAKhB,EACrBmC,EAAI,KAAK,KAAKJ,EAAKA,EAAKf,EAAIA,CAAC,EAC7BoB,EAAK,CAACzB,GAAMwB,EAAInC,GAChBqC,EAAK3B,GAAMyB,EAAInC,GACfsB,EAAKzD,EAAKuE,EACVZ,EAAU3D,EAAKuE,EACfb,EAAKzD,EAAKuE,EACVZ,EAAU3D,EAAKuE,EACrB,OAAI,IAAM,EACJZ,EAAUF,EACLhC,EAAciC,EAASC,EAASpC,CAAG,EAEnCE,EAAc+B,EAAIC,EAAIlC,CAAG,EAG9BoC,EAAUF,EACLhC,EAAc+B,EAAIC,EAAIlC,CAAG,EAEzBE,EAAciC,EAASC,EAASpC,CAAG,CAGhD,CAEA,SAASc,EACPmC,EACAC,EACAC,EACe,CACf,cAAO,OACL,GAAG,KAAK,UAAUF,CAAM,CAAC,OAAO,KAAK,UAAUC,CAAM,CAAC,+DACtD,CAAE,OAAAD,EAAQ,OAAAC,CAAA,CAAO,EAEZhD,EAAciD,EAAgB,EAAGA,EAAgB,CAAC,CAC3D,CC/VA,SAASC,EACPC,EACA5B,EACA6B,EACe,CACf,MAAM7C,EAAY6C,EAAW,KAAK,GAAM,IAClCnC,EAAM,KAAK,IAAIV,CAAQ,EACvBW,EAAM,KAAK,IAAIX,CAAQ,EACvBY,EAAKgC,EAAE,EAAI5B,EAAE,EACbH,EAAK+B,EAAE,EAAI5B,EAAE,EACnB,OAAO8B,EAAM9B,EAAE,EAAIJ,EAAKF,EAAMG,EAAKF,EAAKK,EAAE,EAAIJ,EAAKD,EAAME,EAAKH,CAAG,CACnE,CAMA,SAASqC,EACPC,EACAJ,EACAC,EACAI,EACe,CACf,MAAMjD,EAAY6C,EAAW,KAAK,GAAM,IAClCnC,EAAM,KAAK,IAAIV,CAAQ,EACvBW,EAAM,KAAK,IAAIX,CAAQ,EACvBY,EAAKgC,EAAE,EAAII,EAAO,EAClBnC,EAAK+B,EAAE,EAAII,EAAO,EACxB,OAAOF,EACLE,EAAO,EAAIC,GAAWrC,EAAKF,EAAMG,EAAKF,GACtCqC,EAAO,EAAIC,GAAWrC,EAAKD,EAAME,EAAKH,EAAA,CAE1C,CAUO,MAAMwC,UAAgBC,CAAgB,CA2B3C,YACEjC,EACAC,EACAiC,EACAC,EACApF,EACAqF,EACA,CACA,MAAA,EAlCF1F,EAAA,yBACAA,EAAA,wBACAA,EAAA,6BACAA,EAAA,WACAA,EAAA,WACAA,EAAA,WACAA,EAAA,WACAA,EAAA,mBACAA,EAAA,mBACAA,EAAA,iBA0BE,KAAK,SAAW,CAAC,EAAG,EAAG,EAAG,CAAC,EAC3B,KAAK,UAAY,UACjB,KAAK,iBAAmB,EAExB,MAAM2F,EAAWC,GACfA,aAAaC,EAEXF,EAAQrC,CAAC,GAAKqC,EAAQpC,CAAC,GAEzB,KAAK,GAAKD,EAAE,EACZ,KAAK,GAAKA,EAAE,EACZ,KAAK,GAAKC,EAAE,EACZ,KAAK,GAAKA,EAAE,EACZ,KAAK,MAAQuC,EACX,OAAON,GAAc,SAAWA,EAAY,OAAA,EAE9C,KAAK,gBAAkB,OAAOC,GAAc,SAAWA,EAAY,IAEnE,OAAOnC,GAAM,UACb,OAAOC,GAAM,UACb,OAAOiC,GAAc,UACrB,OAAOC,GAAc,SAInB,OAAO,MAAMnC,CAAC,GACd,OAAO,MAAMC,CAAC,GACd,OAAO,MAAMiC,CAAS,GACtB,OAAO,MAAMC,CAAS,GAEtB,OAAO,OACL,mGACA,CAAE,EAAAnC,EAAG,EAAAC,EAAG,UAAAiC,EAAW,UAAAC,CAAA,CAAU,EAE/B,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,MAAQK,EAAmB,OAAO,EACvC,KAAK,gBAAkB,KAEvB,KAAK,GAAKxC,EACV,KAAK,GAAKC,EACV,KAAK,GAAKiC,EACV,KAAK,GAAKC,EACV,KAAK,MAAQK,EAAmBzF,GAAS,OAAO,EAChD,KAAK,gBAAkBqF,GAAmB,KAI5C,OAAO,OACL,gFACA,CAAE,EAAApC,EAAG,EAAAC,EAAG,UAAAiC,EAAW,UAAAC,CAAA,CAAU,EAE/B,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,MAAQK,EAAmB,OAAO,EACvC,KAAK,gBAAkB,IAGzB,KAAK,GAAK,OAAO,KAAK,GAAG,QAAQ,CAAC,CAAC,EACnC,KAAK,GAAK,OAAO,KAAK,GAAG,QAAQ,CAAC,CAAC,EACnC,KAAK,GAAK,OAAO,KAAK,GAAG,QAAQ,CAAC,CAAC,EACnC,KAAK,GAAK,OAAO,KAAK,GAAG,QAAQ,CAAC,CAAC,EAEnC,KAAK,UAAY,EACjB,KAAK,QAAU,EACf,KAAK,WAAa,EAElB,KAAK,SAAW,CACd,OAAO,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,CAAC,EACjC,OAAO,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,CAAC,EACjC,OAAO,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,CAAC,EACjC,OAAO,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,CAAC,CAAA,EAEnC,KAAK,WAAaZ,EAAM,KAAK,GAAI,KAAK,EAAE,EACxC,KAAK,WAAaA,EAAM,KAAK,GAAI,KAAK,EAAE,EACxC,KAAK,SAAW,KAAK,MAClB,KAAK,GAAK,KAAK,KAAO,GAAK,KAAK,GAAK,KAAK,KAAO,CAAA,EAGpD,KAAK,qBACH,KAAK,SAAW,KACZ,EACAa,EACEb,EAAM,KAAK,GAAK,EAAG,KAAK,EAAE,EAC1B,KAAK,WACL,KAAK,WACL,CAAA,EAEJ,KAAK,SAAW,MAClB,OAAO,OACL,6FACA,CAAE,GAAI,KAAK,GAAI,GAAI,KAAK,GAAI,GAAI,KAAK,GAAI,GAAI,KAAK,EAAA,CAAG,CAG3D,CAEA,IAAIc,EAAe,CAIjB,OAHI,KAAK,YAAc,IACrB,KAAK,OAAS,kBAAkB,KAAK,SAAS,MAExC,KAAK,WAAA,CACX,IAAK,GACH,KAAK,OAAS,4BACd,MACF,IAAK,GACH,KAAK,OAAS,2BACd,MACF,IAAK,GACH,KAAK,OAAS,gCACd,MACF,IAAK,GACH,KAAK,OAAS,2BACd,MACF,IAAK,GACH,KAAK,OAAS,2BACd,KAAA,CAGA,KAAK,UAAY,IACnB,KAAK,OAAS,oBAAoB,KAAK,OAAO,MAEhD,IAAIC,EAAO,KAAK,kBAAkBD,CAAK,EACvC,MAAMxE,EAAI0D,EAAM,KAAK,GAAI,KAAK,EAAE,EAC1BzD,EAAIyD,EAAM,KAAK,GAAI,KAAK,EAAE,EAEhC,OAAAe,GAAQ;AAAA,aAAiBzE,EAAE,KAAKwE,CAAK,CAAC,SAASxE,EAAE,KAAKwE,CAAK,CAAC,SAASvE,EAAE,KACrEuE,CAAA,CACD,SAASvE,EAAE,KAAKuE,CAAK,CAAC,aAAa,KAAK,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,MAE5D,KAAK,gBAAgB,OAAS,EAChCC,EAAO,UAAU,KAAK,EAAE,KAAKA,CAAI,OAEjCA,EAAOA,EAAK,QAAQ,KAAM,OAAO,KAAK,EAAE,MAAM,EAGzCA,CACT,CAEA,MAAO,CACL,IAAIC,EAAc,GAClB,MAAMC,EAAiB,CAAA,EAUvB,OATI,KAAK,MAAM,CAAC,EAAE,OAAS,GAAK,KAAK,MAAM,CAAC,IAAM,SAChDA,EAAe,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC,EAAE,EAE3C,KAAK,YAAc,GACrBA,EAAe,KAAK,gBAAgB,KAAK,SAAS,EAAE,EAElD,KAAK,UAAY,GACnBA,EAAe,KAAK,aAAa,KAAK,OAAO,EAAE,EAEzC,KAAK,WAAA,CACX,IAAK,GACHA,EAAe,KAAK,YAAY,EAChC,MACF,IAAK,GACHA,EAAe,KAAK,wBAAwB,EAC5C,MACF,IAAK,GACHA,EAAe,KAAK,gBAAgB,EACpC,MAEF,IAAK,GACHA,EAAe,KAAK,UAAU,EAC9B,MACF,IAAK,GACHA,EAAe,KAAK,UAAU,EAC9B,KAAA,CAEJ,IAAIC,EAAe,GACnB,GAAI,KAAK,gBAAgB,OAAS,EAAG,CAEnC,MAAMC,EAAiC,CACrC,IAAK,MACL,IAAK,UACL,IAAK,SAAA,EAGD3F,EAAQ,KAAK,IAAI,EAAG,KAAK,MAAM,KAAK,gBAAgB,CAAC,EAC3D,IAAI4F,EAAO,GACPC,EAAQ,GACR,KAAK,gBAAgB,SAAW,GAClCD,EAAOD,EAAI,KAAK,gBAAgB,CAAC,CAAC,GAAK,GACvCE,EAAQF,EAAI,KAAK,gBAAgB,CAAC,CAAC,GAAK,IAC/B,KAAK,gBAAgB,SAAW,GACrC,KAAK,gBAAgB,CAAC,IAAKA,MAAYA,EAAI,KAAK,gBAAgB,CAAC,CAAC,GAClE,KAAK,gBAAgB,CAAC,IAAKA,MAAaA,EAAI,KAAK,gBAAgB,CAAC,CAAC,IAC9D,KAAK,gBAAgB,SAAW,GACrC,KAAK,gBAAgB,CAAC,IAAKA,MAAaA,EAAI,KAAK,gBAAgB,CAAC,CAAC,GAGzE,MAAMG,EAAUF,EAAO,IAAIA,CAAI,UAAU5F,CAAK,OAAS,GACjD+F,EAAWF,EAAQ,IAAIA,CAAK,UAAU7F,CAAK,OAAS,GACtD8F,GAAWC,EACbL,EAAe,GAAGI,CAAO,IAAIC,CAAQ,GAC5BD,EACTJ,EAAe,GAAGI,CAAO,IAChBC,IACTL,EAAe,IAAIK,CAAQ,IAEzBL,GACFD,EAAe,KAAKC,CAAY,CAEpC,CACA,OAAID,EAAe,OAAS,IAC1BD,EAAc,IAAMC,EAAe,KAAK,GAAG,EAAI,KAE1C,SAASD,CAAW,KAAK,KAAK,EAAE,IAAI,KAAK,EAAE,OAAO,KAAK,EAAE,IAAI,KAAK,EAAE,IAC7E,CAEA,MAAMF,EAAeU,EAAmB,CACtC,MAAMC,EAAY/G,EAAU,OAAA,EAC5B,GAAI+G,GAAa,KAAM,CACrB,MAAMnF,EAAI0D,EAAM,KAAK,GAAI,KAAK,EAAE,EAC1BzD,EAAIyD,EAAM,KAAK,GAAI,KAAK,EAAE,EAChC,IAAIe,EAAO,KAAK,kBAAkBD,CAAK,EACvC,OAAAC,GAAQU,EAAU,KAChBnF,EAAE,KAAKwE,CAAK,EACZxE,EAAE,KAAKwE,CAAK,EACZvE,EAAE,KAAKuE,CAAK,EACZvE,EAAE,KAAKuE,CAAK,EACZ,CACE,MAAO,KAAK,MAAM,CAAC,EACnB,UAAW,KAAK,UAChB,UAAWU,EAAY,CAAA,CACzB,EAEE,KAAK,gBAAgB,OAAS,EAChCT,EAAO,UAAU,KAAK,EAAE,KAAKA,CAAI,OAEjCA,EAAOA,EAAK,QAAQ,KAAM,OAAO,KAAK,EAAE,MAAM,EAEhDU,EAAU,QAAA,EACHV,CACT,KAAO,OAAO,EAChB,CAEA,OAAOW,EAAa,CAClB,MAAMpF,EAAI0D,EAAM,KAAK,GAAI,KAAK,EAAE,EAC1BzD,EAAIyD,EAAM,KAAK,GAAI,KAAK,EAAE,EAChC,IAAIgB,EAAc,GAClB,MAAMC,EAAiB,CAAA,EACvB,OAAI,KAAK,MAAM,CAAC,EAAE,OAAS,GAAK,KAAK,MAAM,CAAC,IAAM,SAChDA,EAAe,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC,EAAE,EAE3C,KAAK,YAAc,GACrBA,EAAe,KAAK,gBAAgB,KAAK,SAAS,EAAE,EAGlD,KAAK,UAAY,GACnBA,EAAe,KAAK,aAAa,KAAK,OAAO,EAAE,EAE7C,KAAK,gBAAgB,OAAS,IAE9B,KAAK,gBAAgB,SAAS,GAAG,GACjC,KAAK,gBAAgB,SAAS,GAAG,EAEjCA,EAAe,KAAK,IAAM,KAAK,gBAAkB,GAAG,EAEpDA,EAAe,KAAK,KAAK,eAAe,GAG5CA,EAAe,KACb,mDAAmDS,CAAG,KAAA,EAExDV,EAAc,IAAMC,EAAe,KAAK,GAAG,EAAI,IAElC,SAASD,CAAW,KAAK1E,EAAE,CAAC,IAAIA,EAAE,CAAC,OAAOC,EAAE,CAAC,IAAIA,EAAE,CAAC,IAEnE,CAEA,kBAAkBuE,EAAe,CAC/B,IAAIC,EAAO,GACX,MAAMzE,EAAI0D,EAAM,KAAK,GAAI,KAAK,EAAE,EAC1BzD,EAAIyD,EAAM,KAAK,GAAI,KAAK,EAAE,EAEhC,GAAI,KAAK,SAAW,KAAM,OAAOe,EACjC,MAAMxB,EAAI,KAAK,iBACf,GAAI,KAAK,gBAAgB,OAAS,EAAG,CACnC,MAAMoC,EAAM,KAAK,gBAAgB,MAAM,EAAE,EACzC,GAAIA,IAAQ,IAAK,CAEf,MAAM7B,EAAIlD,EAAgBL,EAAGD,EAAGiD,EAAIqC,EAAQ,WAAW,EACjDC,EAAKhC,EAAcC,EAAGvD,EAAG,EAAE,EAC3BuF,EAAKjC,EAAcC,EAAGvD,EAAG,GAAG,EAClCwE,GAAQ,aAAac,EAAG,KAAKf,CAAK,CAAC,SAASe,EAAG,KAC7Cf,CAAA,CACD,SAASgB,EAAG,KAAKhB,CAAK,CAAC,SAASgB,EAAG,KAAKhB,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,MACnC,CACA,GAAIa,IAAQ,IAAK,CAEf,MAAM7B,EAAIlD,EAAgBL,EAAGD,EAAGiD,EAAIqC,EAAQ,WAAW,EACjDC,EAAK5B,EAAgB1D,EAAGuD,EAAG,GAAI,EAAG,EAClCgC,EAAK7B,EAAgB1D,EAAGuD,EAAG,IAAK,EAAG,EACzCiB,GAAQ,aAAaxE,EAAE,KAAKuE,CAAK,CAAC,SAASvE,EAAE,KAC3CuE,CAAA,CACD,SAASe,EAAG,KAAKf,CAAK,CAAC,SAASe,EAAG,KAAKf,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,OACjCC,GAAQ;AAAA,aAAiBxE,EAAE,KAAKuE,CAAK,CAAC,SAASvE,EAAE,KAC/CuE,CAAA,CACD,SAASgB,EAAG,KAAKhB,CAAK,CAAC,SAASgB,EAAG,KAAKhB,CAAK,CAAC,aAAa,KAAK,MAAM,CAAC,CAAC,mBAAmB,KAAK,SAAS,MAC5G,CACA,GAAIa,IAAQ,IAAK,CAEf,MAAM7B,EAAIlD,EAAgBL,EAAGD,EAAG,CAACiD,EAAIqC,EAAQ,WAAW,EAClDC,EAAK5B,EAAgB1D,EAAGuD,EAAG,GAAI,EAAG,EAClCgC,EAAK7B,EAAgB1D,EAAGuD,EAAG,IAAK,EAAG,EACzCiB,GAAQ,aAAaxE,EAAE,KAAKuE,CAAK,CAAC,SAASvE,EAAE,KAC3CuE,CAAA,CACD,SAASe,EAAG,KAAKf,CAAK,CAAC,SAASe,EAAG,KAAKf,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,OACjCC,GAAQ;AAAA,aAAiBxE,EAAE,KAAKuE,CAAK,CAAC,SAASvE,EAAE,KAC/CuE,CAAA,CACD,SAASgB,EAAG,KAAKhB,CAAK,CAAC,SAASgB,EAAG,KAAKhB,CAAK,CAAC,aAAa,KAAK,MAAM,CAAC,CAAC,mBAAmB,KAAK,SAAS,MAC5G,CACA,GAAIa,IAAQ,IAAK,CAEf,MAAM7B,EAAIlD,EAAgBL,EAAGD,EAAGiD,EAAIqC,EAAQ,WAAW,EACjDC,EAAK5B,EAAgBH,EAAGvD,EAAG,GAAI,CAAC,EAChCuF,EAAK7B,EAAgBH,EAAGvD,EAAG,IAAK,CAAC,EACjCwF,EAAK9B,EAAgB1D,EAAGsF,EAAI,IAAK,EAAG,EACpCG,EAAK/B,EAAgB1D,EAAGuF,EAAI,GAAI,EAAG,EACzCf,GAAQ,qBAAqBiB,EAAG,KAAKlB,CAAK,CAAC,IAAIkB,EAAG,KAAKlB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,yBAAyB,KAAK,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,QAAQ,KAAK,EAAE,mBAAmB,KAAK,SAAS,MAChR,CACA,GAAIa,IAAQ,IAAK,CAEf,MAAM7B,EAAIlD,EAAgBL,EAAGD,EAAGiD,EAAIqC,EAAQ,WAAW,EACjDC,EAAK5B,EAAgBH,EAAGvD,EAAG,GAAI,CAAC,EAChCuF,EAAK7B,EAAgBH,EAAGvD,EAAG,IAAK,CAAC,EACjCwF,EAAK9B,EAAgB1D,EAAGsF,EAAI,GAAI,EAAG,EACnCG,EAAK/B,EAAgB1D,EAAGuF,EAAI,IAAK,EAAG,EAC1Cf,GAAQ,qBAAqBiB,EAAG,KAAKlB,CAAK,CAAC,IAAIkB,EAAG,KAAKlB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,yBAAyB,KAAK,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,QAAQ,KAAK,EAAE,mBAAmB,KAAK,SAAS,MAChR,CACA,MAAMmB,EAAQ,KAAK,gBAAgB,CAAC,EACpC,GAAIA,IAAU,IAAK,CAEjB,MAAMnC,EAAIlD,EAAgBN,EAAGC,EAAGgD,EAAIqC,EAAQ,WAAW,EACjDC,EAAK5B,EAAgBH,EAAGxD,EAAG,GAAI,CAAC,EAChCwF,EAAK7B,EAAgBH,EAAGxD,EAAG,IAAK,CAAC,EACjCyF,EAAK9B,EAAgB3D,EAAGuF,EAAI,GAAI,EAAG,EACnCG,EAAK/B,EAAgB3D,EAAGwF,EAAI,IAAK,EAAG,EAC1Cf,GAAQ,qBAAqBiB,EAAG,KAAKlB,CAAK,CAAC,IAAIkB,EAAG,KAAKlB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,yBAAyB,KAAK,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,QAAQ,KAAK,EAAE,mBAAmB,KAAK,SAAS,MAChR,CACA,GAAImB,IAAU,IAAK,CAEjB,MAAMnC,EAAIlD,EAAgBN,EAAGC,EAAGgD,EAAIqC,EAAQ,WAAW,EACjDC,EAAK5B,EAAgBH,EAAGxD,EAAG,GAAI,CAAC,EAChCwF,EAAK7B,EAAgBH,EAAGxD,EAAG,IAAK,CAAC,EACjCyF,EAAK9B,EAAgB3D,EAAGuF,EAAI,IAAK,EAAG,EACpCG,EAAK/B,EAAgB3D,EAAGwF,EAAI,GAAI,EAAG,EACzCf,GAAQ,qBAAqBiB,EAAG,KAAKlB,CAAK,CAAC,IAAIkB,EAAG,KAAKlB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIgB,EAAG,KAAKhB,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIe,EAAG,KAAKf,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,IAAIiB,EAAG,KAAKjB,CAAK,CAAC,yBAAyB,KAAK,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,QAAQ,KAAK,EAAE,mBAAmB,KAAK,SAAS,MAChR,CACA,GAAImB,IAAU,IAAK,CAEjB,MAAMnC,EAAIlD,EAAgBN,EAAGC,EAAGgD,EAAIqC,EAAQ,WAAW,EACjDM,EAAKjC,EAAgB3D,EAAGwD,EAAG,GAAI,EAAG,EAClCqC,EAAKlC,EAAgB3D,EAAGwD,EAAG,IAAK,EAAG,EACzCiB,GAAQ,aAAazE,EAAE,KAAKwE,CAAK,CAAC,SAASxE,EAAE,KAC3CwE,CAAA,CACD,SAASoB,EAAG,KAAKpB,CAAK,CAAC,SAASoB,EAAG,KAAKpB,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,OACjCC,GAAQ;AAAA,aAAiBzE,EAAE,KAAKwE,CAAK,CAAC,SAASxE,EAAE,KAC/CwE,CAAA,CACD,SAASqB,EAAG,KAAKrB,CAAK,CAAC,SAASqB,EAAG,KAAKrB,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,MACnC,CACA,GAAImB,IAAU,IAAK,CAEjB,MAAMnC,EAAIlD,EAAgBN,EAAGC,EAAG,CAACgD,EAAIqC,EAAQ,WAAW,EAClDM,EAAKjC,EAAgB3D,EAAGwD,EAAG,GAAI,EAAG,EAClCqC,EAAKlC,EAAgB3D,EAAGwD,EAAG,IAAK,EAAG,EACzCiB,GAAQ,aAAazE,EAAE,KAAKwE,CAAK,CAAC,SAASxE,EAAE,KAC3CwE,CAAA,CACD,SAASoB,EAAG,KAAKpB,CAAK,CAAC,SAASoB,EAAG,KAAKpB,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,OACjCC,GAAQ;AAAA,aAAiBzE,EAAE,KAAKwE,CAAK,CAAC,SAASxE,EAAE,KAC/CwE,CAAA,CACD,SAASqB,EAAG,KAAKrB,CAAK,CAAC,SAASqB,EAAG,KAAKrB,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,MACnC,CACA,GAAImB,IAAU,IAAK,CAEjB,MAAMG,EAAIxF,EAAgBN,EAAGC,EAAGgD,EAAIqC,EAAQ,WAAW,EACjDM,EAAKrC,EAAcuC,EAAG9F,EAAG,EAAE,EAC3B6F,EAAKtC,EAAcuC,EAAG9F,EAAG,GAAG,EAClCyE,GAAQ,aAAamB,EAAG,KAAKpB,CAAK,CAAC,SAASoB,EAAG,KAC7CpB,CAAA,CACD,SAASqB,EAAG,KAAKrB,CAAK,CAAC,SAASqB,EAAG,KAAKrB,CAAK,CAAC,aAC7C,KAAK,MAAM,CAAC,CACd,mBAAmB,KAAK,SAAS,MACnC,CACF,CACA,OAAOC,CACT,CAWA,UAAUsB,EAAY,CACpB,OAAOC,EAAc,KAAMD,CAAK,CAClC,CACF,CAwBO,SAASE,EACdnE,EACAC,EACAiC,EACAC,EACApF,EACAqF,EACA,CACA,OAAO,IAAIJ,EACThC,EACAC,EACAiC,EACAC,EACApF,EACAqF,CAAA,CAEJ,CASO,SAASgC,MACXC,EAGH,CACA,MAAMC,EACJ,OAAOD,EAAK,CAAC,GAAM,UAAY,OAAOA,EAAK,CAAC,GAAM,SAC9CF,EACEE,EAAK,CAAC,EACNA,EAAK,CAAC,EACNA,EAAK,CAAC,EACNA,EAAK,CAAC,EACNA,EAAK,CAAC,EACNA,EAAK,CAAC,CAAA,EAERF,EACEE,EAAK,CAAC,EACNA,EAAK,CAAC,EACNA,EAAK,CAAC,EACNA,EAAK,CAAC,CAAA,EAEd,OAAAC,EAAE,gBAAkB,MACbA,CACT"}