{"version":3,"file":"Yohaku-CbjUvHd7.js","sources":["../../src/lib/outils/Yohaku.ts"],"sourcesContent":["import { randint } from '../../modules/outils'\nimport { fraction } from '../../modules/fractions'\nimport { choice } from './arrayOutils'\nimport { context } from '../../modules/context'\nimport { AddTabDbleEntryMathlive } from '../interactif/tableaux/AjouteTableauMathlive'\nimport { tableauColonneLigne } from '../2d/tableau'\nimport { ComputeEngine } from '@cortex-js/compute-engine'\nimport { reduireAxPlusB } from './ecritures'\nimport { KeyboardType } from '../interactif/claviers/keyboard'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport { orangeMathalea } from '../colors'\n\nconst engine = new ComputeEngine()\n\n/**\n * @class\n * @property {'entiers'|'entiers relatifs'|'littéraux'|'fractions positives'|'fractions relatives'|'fractions dénominateurs multiples'|'fractions positives dénominateurs premiers'} type\n * @property {number?} largeur\n * @property {number?} hauteur\n * @property {number?} taille\n * @property {number|null} Case\n * @property {string[]} cellules\n * @property {'addition'|'multiplication'} operation = 'addition'\n * @property {number} valeurMax = 50,\n * @property {boolean} solution = false,\n * @author Jean-Claude Lhote\n */\nexport class Yohaku {\n  type: string\n  largeur: number\n  hauteur: number\n  taille: number\n  Case: number | undefined\n  cellules: string[]\n  cellulesEE: FractionEtendue[]\n  sommesCellules: FractionEtendue[]\n  cellulesPreremplies: string[]\n  resultats: string[]\n  operation?: 'addition' | 'multiplication'\n  solution?: boolean\n  clavier?: string\n  constructor(\n    {\n      type,\n      largeur,\n      hauteur,\n      taille,\n      Case,\n      cellules,\n      operation,\n      valeurMax,\n      solution,\n    }: {\n      type?: string\n      largeur?: number\n      hauteur?: number\n      taille?: number\n      Case?: number | undefined\n      cellules?: string[]\n      resultats?: string[]\n      operation?: 'addition' | 'multiplication'\n      valeurMax?: number\n      solution?: boolean\n    } = {\n      type: 'entiers',\n      largeur: 2,\n      hauteur: 2,\n      taille: 2,\n      Case: undefined,\n      resultats: [],\n      operation: 'addition',\n      valeurMax: 50,\n      solution: false,\n      cellules: [],\n    },\n  ) {\n    this.largeur = largeur ?? 2\n    this.hauteur = hauteur ?? 2\n    this.Case = Case\n    this.resultats = []\n    this.taille = taille ?? 2\n    this.operation = operation\n    this.solution = solution\n    this.type = type ?? 'entiers'\n    this.cellules = cellules ?? []\n    this.cellulesPreremplies = []\n    this.cellulesEE = []\n    this.sommesCellules = []\n    this.clavier = String(KeyboardType.clavierDeBase)\n    if (valeurMax == null) valeurMax = 50\n    if (this.cellules.length === 0) {\n      const den = randint(2, valeurMax)\n      for (let i = 0; i < this.taille ** 2; i++) {\n        switch (this.type) {\n          case 'entiers':\n            this.cellules.push(String(randint(1, valeurMax) ?? 2))\n            this.clavier = String(KeyboardType.clavierDeBase)\n            break\n          case 'entiers relatifs':\n            this.cellules.push(String(randint(-valeurMax, valeurMax, 0)))\n            this.clavier = String(KeyboardType.clavierDeBase)\n            break\n          case 'littéraux':\n            this.cellules.push(\n              reduireAxPlusB(randint(1, valeurMax), randint(1, valeurMax), 'x'),\n            )\n            this.clavier = String(KeyboardType.clavierDeBaseAvecVariable)\n            break\n          case 'fractions dénominateurs multiples': {\n            // EE : Modif pour 4C21-2 afin que les sommes des lignes ne soient pas identiques aux sommes des colonnes\n            let testFraction = new FractionEtendue(randint(1, valeurMax), den)\n            let sommeFractions: FractionEtendue\n            if (i + 1 >= this.taille) {\n              if ((i + 1) % this.taille === 1) {\n                sommeFractions = new FractionEtendue(0, 1)\n                for (let ee = 0; ee < this.taille; ee++) {\n                  sommeFractions = sommeFractions.sommeFraction(\n                    this.cellulesEE[\n                      ee + this.taille * Math.floor(ee / this.taille)\n                    ],\n                  )\n                }\n                this.sommesCellules.push(sommeFractions)\n              }\n              if (i >= this.taille * (this.taille - 1)) {\n                let fractionsEgales: boolean\n                do {\n                  fractionsEgales = false\n                  testFraction = new FractionEtendue(randint(1, valeurMax), den)\n                  sommeFractions = new FractionEtendue(0, 1)\n                  for (let ee = 0; ee < this.taille - 1; ee++) {\n                    sommeFractions = sommeFractions.sommeFraction(\n                      this.cellulesEE[(i % this.taille) + this.taille * ee],\n                    )\n                  }\n                  sommeFractions = sommeFractions.sommeFraction(testFraction)\n                  for (let ee = 0; ee < this.sommesCellules.length; ee++) {\n                    fractionsEgales =\n                      fractionsEgales ||\n                      this.sommesCellules[ee].isEqual(sommeFractions)\n                  }\n                } while (fractionsEgales)\n                this.sommesCellules.push(sommeFractions)\n              }\n            }\n            this.cellulesEE.push(testFraction)\n            this.cellules.push(testFraction.texFSD.replace('dfrac', 'frac'))\n            this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n            break\n          }\n          case 'fractions positives dénominateurs premiers':\n            this.cellules.push(\n              fraction(\n                randint(1, valeurMax),\n                Number(choice([2, 3, 5, 7])),\n              ).texFraction.replace('dfrac', 'frac'),\n            )\n            this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n            break\n\n          case 'fractions positives':\n            this.cellules.push(\n              fraction(\n                randint(1, valeurMax),\n                randint(2, valeurMax),\n              ).texFraction.replace('dfrac', 'frac'),\n            )\n            this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n            break\n          case 'fractions relatives':\n            this.cellules.push(\n              fraction(\n                randint(-valeurMax, valeurMax, 0),\n                randint(2, valeurMax),\n              ).texFraction.replace('dfrac', 'frac'),\n            )\n            this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n            break\n        }\n      }\n    } else {\n      // si elles sont définies, on complète éventuellement la grille aléatoirement.\n      this.cellulesPreremplies = [...(cellules ?? [])]\n      for (let i = this.cellules.length; i < this.taille ** 2; i++) {\n        if (Array.isArray(cellules) && cellules[i] === '') {\n          switch (this.type) {\n            case 'entiers':\n              this.cellules.push(String(randint(1, valeurMax)))\n              this.clavier = String(KeyboardType.clavierDeBase)\n              break\n            case 'entiers relatifs':\n              this.cellules.push(String(randint(-valeurMax, valeurMax, 0)))\n              this.clavier = String(KeyboardType.clavierDeBase)\n              break\n            case 'littéraux':\n              this.cellules.push(\n                reduireAxPlusB(\n                  randint(1, valeurMax),\n                  randint(1, valeurMax),\n                  'x',\n                ),\n              )\n              this.clavier = String(KeyboardType.clavierDeBaseAvecVariable)\n              break\n            case 'fractions dénominateurs multiples':\n              {\n                const cellulePrecedente = engine.parse(this.cellules[i - 1])\n                if (Array.isArray(cellulePrecedente.numericValue)) {\n                  const [, den] = cellulePrecedente.numericValue\n                  this.cellules.push(\n                    fraction(\n                      randint(1, valeurMax),\n                      Number(den) ?? 1,\n                    ).texFraction.replace('dfrac', 'frac'),\n                  )\n                }\n                this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n              }\n              break\n            case 'fractions positives dénominateurs premiers':\n              this.cellules.push(\n                new FractionEtendue(\n                  randint(1, valeurMax),\n                  Number(choice([2, 3, 5, 7])),\n                ).texFraction.replace('dfrac', 'frac'),\n              )\n              this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n              break\n            case 'fractions positives':\n              this.cellules.push(\n                fraction(\n                  randint(1, valeurMax),\n                  randint(2, valeurMax),\n                ).texFraction.replace('dfrac', 'frac'),\n              )\n              this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n              break\n            case 'fractions relatives':\n              this.cellules.push(\n                fraction(\n                  randint(-valeurMax, valeurMax, 0),\n                  randint(2, valeurMax),\n                ).texFraction.replace('dfrac', 'frac'),\n              )\n              this.clavier = String(KeyboardType.clavierDeBaseAvecFraction)\n              break\n          }\n        }\n      }\n    }\n  }\n\n  // méthode qui calcule les résultats si on le veut (sinon on peut les renseigner dans this.resultats manuellement)\n  calculeResultats() {\n    let valeurs\n    for (let i = 0; i < this.taille; i++) {\n      valeurs = []\n      for (let j = 0; j < this.taille; j++) {\n        valeurs.push(this.cellules[i + j * this.taille])\n      }\n      this.resultats[i] = String(this.operate(valeurs))\n    }\n    for (let i = this.taille; i < this.taille * 2; i++) {\n      valeurs = []\n      for (let j = 0; j < this.taille; j++) {\n        valeurs.push(this.cellules[(i - this.taille) * this.taille + j])\n      }\n      this.resultats[i] = String(this.operate(valeurs))\n    }\n  }\n\n  // fonction utilisée par calculeResultats\n  operate(valeurs: Array<string>) {\n    let initialValue: string\n    switch (this.operation) {\n      case 'addition':\n        initialValue = '0'\n        return engine\n          .parse(\n            valeurs.reduce(\n              (previous, current) => `${previous}+${current}`,\n              initialValue,\n            ),\n          )\n          .simplify().latex\n      case 'multiplication':\n        initialValue = '1'\n        return engine\n          .parse(\n            valeurs.reduce(\n              (previous, current) => `(${previous})\\\\times (${current})`,\n              initialValue,\n            ),\n          )\n          .simplify().latex\n    }\n  }\n\n  /**\n   * Retourne le tableau\n   * @param {boolean} isInteractif\n   * @returns {string}\n   */\n  representation({\n    numeroExercice,\n    question,\n    isInteractif,\n    classes = '',\n  }: {\n    numeroExercice: number\n    question: number\n    isInteractif: boolean\n    classes?: string\n  }) {\n    const dimension = this.taille\n    const largeurARemplir = this.taille + 1 // 1 de plus que dimension pour la colonne/ligne résultat.\n    // première case ; l'opération\n    const tabEnteteColonnes = [this.operation === 'addition' ? '+' : '\\\\times']\n    const couleur = context.isHtml ? '' : '\\\\cellcolor{lightgray}'\n    // suite des entêtes de colonnes\n    for (let i = 0; i < dimension; i++) {\n      tabEnteteColonnes.push(`\\\\text{Colonne ${i + 1}}`)\n    }\n    tabEnteteColonnes.push(\n      `\\\\text{${this.operation === 'addition' ? 'Sommes' : 'Produits'}}`,\n    )\n    // Les entêtes de lignes\n    const tabEnteteLignes: string[] = []\n    for (let i = 0; i < dimension; i++) {\n      tabEnteteLignes.push(`\\\\text{Ligne ${i + 1}}`)\n    }\n    tabEnteteLignes.push(\n      `\\\\text{${this.operation === 'addition' ? 'Sommes' : 'Produits'}}`,\n    )\n    // Y a-t-il une case prédéfinie ?\n    const laCase =\n      this.Case == null\n        ? null\n        : (this.Case % dimension) +\n          Math.floor(this.Case / dimension) * largeurARemplir\n    // La partie centrale du tableau : dimension + 1 pour les résultats.\n    const tabLignes: string[] = []\n    let j = 0 // Pour indexer le numéro de ligne\n    let k = 0 // Pour indexer les valeurs utilisées de la grille\n    for (let i = 0; i < largeurARemplir ** 2; i++) {\n      // i parcourt la partie centrale (dimension+1)²\n      if (this.solution) {\n        // On remplit toutes les cases avec les valeurs stockées\n        if (i % largeurARemplir < dimension) {\n          if (i < largeurARemplir * dimension) {\n            const cellule = this.cellules[k]\n            tabLignes.push(cellule)\n            k++\n          } else {\n            if (j < dimension * 2) {\n              tabLignes.push(\n                `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n              )\n              j++\n            }\n          }\n        } else {\n          if (j < dimension * 2) {\n            tabLignes.push(\n              `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n            )\n            j++\n          }\n        }\n      } else {\n        // Ici on met des chaines vides et éventuellement la case prédéfinie pour rendre la solution unique\n        if (this.Case == null) {\n          // numéro de case aléatoire prédéfinie undefined\n          if (this.cellulesPreremplies[k] != null) {\n            // Il peut y avoir des cases prédéfinies quand même par exemple 3 sur 4 pour une CAN à une réponse\n            if (i % largeurARemplir < dimension) {\n              if (i < largeurARemplir * dimension) {\n                tabLignes.push(this.cellulesPreremplies[k])\n                k++\n              } else {\n                if (j < dimension * 2) {\n                  tabLignes.push(\n                    `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n                  )\n                  j++\n                }\n              }\n            } else {\n              if (j < dimension * 2) {\n                tabLignes.push(\n                  `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n                )\n                j++\n              }\n            }\n          } else {\n            // On met une chaine vide donc case à compléter\n            if (i % largeurARemplir < dimension) {\n              if (i < largeurARemplir * dimension) {\n                tabLignes.push('')\n                k++\n              } else {\n                if (j < dimension * 2) {\n                  tabLignes.push(\n                    `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n                  )\n                  j++\n                }\n              }\n            } else {\n              if (j < dimension * 2) {\n                tabLignes.push(\n                  `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n                )\n                j++\n              }\n            }\n          }\n        } else {\n          if (i % largeurARemplir < dimension) {\n            if (i === laCase) {\n              const cellule = this.cellules[k]\n              k++\n              tabLignes.push(cellule)\n            } else {\n              if (i < largeurARemplir * dimension) {\n                if (this.cellulesPreremplies[k] != null) {\n                  tabLignes.push(this.cellulesPreremplies[k])\n                  k++\n                } else {\n                  tabLignes.push('')\n                  k++\n                }\n              } else {\n                if (j < dimension * 2) {\n                  tabLignes.push(\n                    `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n                  )\n                  j++\n                }\n              }\n            }\n          } else {\n            if (j < dimension * 2) {\n              tabLignes.push(\n                `${couleur}${this.resultats[(j + dimension) % (dimension * 2)]}`,\n              )\n              j++\n            }\n          }\n        }\n      }\n    }\n    // dernière case\n    tabLignes.push(`${context.isHtml ? '' : couleur}///////`)\n    if (context.isHtml) {\n      const style: { [key: string]: string } = Object.fromEntries(\n        this.solution\n          ? [\n              ['L1C1', `;${orangeMathalea}`],\n              ['L1C2', `;${orangeMathalea}`],\n              ['L2C1', `;${orangeMathalea}`],\n              ['L2C2', `;${orangeMathalea}`],\n            ]\n          : [],\n      )\n      const tab = AddTabDbleEntryMathlive.create(\n        numeroExercice,\n        question,\n        AddTabDbleEntryMathlive.convertTclToTableauMathlive(\n          tabEnteteColonnes,\n          tabEnteteLignes,\n          tabLignes,\n        ),\n        classes + ' ' + this.clavier,\n        isInteractif,\n        style,\n      )\n      return tab.output\n    } else {\n      const style: { [key: string]: string } = Object.fromEntries(\n        this.solution\n          ? [\n              ['L1C1', `${orangeMathalea}`],\n              ['L1C2', `${orangeMathalea}`],\n              ['L2C1', `${orangeMathalea}`],\n              ['L2C2', `${orangeMathalea}`],\n            ]\n          : [],\n      )\n      return tableauColonneLigne(\n        tabEnteteColonnes,\n        tabEnteteLignes,\n        tabLignes,\n        2,\n        true,\n        numeroExercice,\n        question,\n        false,\n        style,\n      )\n    }\n  }\n}\n"],"names":["engine","ComputeEngine","Yohaku","type","largeur","hauteur","taille","Case","cellules","operation","valeurMax","solution","__publicField","KeyboardType","den","randint","i","reduireAxPlusB","testFraction","FractionEtendue","sommeFractions","ee","fractionsEgales","fraction","choice","cellulePrecedente","valeurs","j","initialValue","previous","current","numeroExercice","question","isInteractif","classes","dimension","largeurARemplir","tabEnteteColonnes","couleur","context","tabEnteteLignes","laCase","tabLignes","k","cellule","style","orangeMathalea","AddTabDbleEntryMathlive","tableauColonneLigne"],"mappings":"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"}