{"version":3,"file":"P021-DN45ZfRk.js","sources":["../../src/exercices/profs/P021.ts"],"sourcesContent":["import { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { repere } from '../../lib/2d/reperes'\nimport { spline, type NoeudSpline } from '../../lib/mathFonctions/Spline'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport Exercice from '../Exercice'\nimport { valideListeOfPoints } from './P013'\n\nexport const titre = 'Interpollation par splines avec tangentes'\n\nexport const refs = {\n  'fr-fr': ['P021'],\n  'fr-ch': [],\n}\nexport const uuid = '4c7ca'\n\n/**\n * Trace une courbe interpolee par des splines version cubiques avec tangentes\n * @author Jean-Claude Lhote\n\n */\nexport default class TraceCourbeSpline extends Exercice {\n  constructor() {\n    super()\n    this.besoinFormulaireTexte = [\n      'Liste des coordonnées sous la forme: (x0;y0)/(x1;y1)/...',\n      '',\n    ]\n    this.besoinFormulaire2Texte = [\n      'Liste des nombres dérivés sous la forme (gauche0;droite0)/(gauche1;droite1)/...',\n      '',\n    ]\n    this.besoinFormulaire3Texte = [\n      'Etat visible(1)/invisible(0) de chaque noeud sous la forme 0/1/...',\n      '',\n    ]\n\n    this.nbQuestions = 1\n    this.nbQuestionsModifiable = false\n\n    this.sup = '(-3;-2)/(-1;0)/(1;-3)/(3;4)' // liste de points\n    this.sup2 = '(2;2)/(0;0)/(0;0)/(1;1)'\n    this.sup3 = '1/1/1/1'\n  }\n\n  nouvelleVersion() {\n    if (!valideListeOfPoints(this.sup)) {\n      this.sup = '(-3;-2)/(-1;0)/(1;-3)/(3;4)'\n    }\n    if (!valideListeOfPoints(this.sup2)) {\n      this.sup2 = '(2;2)/(0;0)/(0;0)/(1;1)'\n    }\n\n    const noeuds: NoeudSpline[] = []\n    const listeCoords = this.sup.split('/')\n    const listePentes = this.sup2.split('/')\n    const listeVisibles = this.sup3\n      .split('/')\n      .map((s: string) => Boolean(Number(s)))\n\n    if (listeCoords.length < 2) return\n    for (let i = 0; i < listeCoords.length; i++) {\n      const coordonnees = listeCoords[i].slice(1, -1).split(';')\n      const x = Number(coordonnees[0].replace(',', '.'))\n      const y = Number(coordonnees[1].replace(',', '.'))\n      noeuds.push({ x, y, deriveeGauche: 0, deriveeDroit: 0, isVisible: true })\n    }\n    for (let i = 0; i < noeuds.length; i++) {\n      let pentes = listePentes[i].slice(1, -1).split(';')\n      if (pentes == null) {\n        pentes = [0, 0]\n      } else {\n        pentes = [\n          Number(pentes[0].replace(',', '.')),\n          Number(pentes[1].replace(',', '.')),\n        ]\n      }\n      noeuds[i].deriveeGauche = pentes[0]\n      noeuds[i].deriveeDroit = pentes[1]\n    }\n    for (let i = 0; i < noeuds.length; i++) {\n      noeuds[i].isVisible = listeVisibles[i]\n    }\n\n    const f = spline(noeuds)\n    const { xMin, xMax, yMin, yMax } = f.trouveMaxes()\n    const r = repere({ xMin, xMax, yMin, yMax })\n    const c = f.courbe({ ajouteNoeuds: true })\n    const objets = [r, c]\n    this.listeQuestions[0] = mathalea2d(\n      Object.assign({}, fixeBordures(objets)),\n      objets,\n    )\n  }\n}\n"],"names":["titre","refs","uuid","TraceCourbeSpline","Exercice","valideListeOfPoints","noeuds","listeCoords","listePentes","listeVisibles","s","i","coordonnees","x","y","pentes","f","spline","xMin","xMax","yMin","yMax","r","repere","c","objets","mathalea2d","fixeBordures"],"mappings":"krHAOO,MAAMA,GAAQ,4CAERC,GAAO,CAClB,QAAS,CAAC,MAAM,EAChB,QAAS,CAAA,CACX,EACaC,GAAO,QAOpB,MAAqBC,WAA0BC,CAAS,CACtD,aAAc,CACZ,MAAA,EACA,KAAK,sBAAwB,CAC3B,2DACA,EAAA,EAEF,KAAK,uBAAyB,CAC5B,kFACA,EAAA,EAEF,KAAK,uBAAyB,CAC5B,qEACA,EAAA,EAGF,KAAK,YAAc,EACnB,KAAK,sBAAwB,GAE7B,KAAK,IAAM,8BACX,KAAK,KAAO,0BACZ,KAAK,KAAO,SACd,CAEA,iBAAkB,CACXC,EAAoB,KAAK,GAAG,IAC/B,KAAK,IAAM,+BAERA,EAAoB,KAAK,IAAI,IAChC,KAAK,KAAO,2BAGd,MAAMC,EAAwB,CAAA,EACxBC,EAAc,KAAK,IAAI,MAAM,GAAG,EAChCC,EAAc,KAAK,KAAK,MAAM,GAAG,EACjCC,EAAgB,KAAK,KACxB,MAAM,GAAG,EACT,IAAKC,GAAc,EAAQ,OAAOA,CAAC,CAAE,EAExC,GAAIH,EAAY,OAAS,EAAG,OAC5B,QAASI,EAAI,EAAGA,EAAIJ,EAAY,OAAQI,IAAK,CAC3C,MAAMC,EAAcL,EAAYI,CAAC,EAAE,MAAM,EAAG,EAAE,EAAE,MAAM,GAAG,EACnDE,EAAI,OAAOD,EAAY,CAAC,EAAE,QAAQ,IAAK,GAAG,CAAC,EAC3CE,EAAI,OAAOF,EAAY,CAAC,EAAE,QAAQ,IAAK,GAAG,CAAC,EACjDN,EAAO,KAAK,CAAE,EAAAO,EAAG,EAAAC,EAAG,cAAe,EAAG,aAAc,EAAG,UAAW,EAAA,CAAM,CAC1E,CACA,QAASH,EAAI,EAAGA,EAAIL,EAAO,OAAQK,IAAK,CACtC,IAAII,EAASP,EAAYG,CAAC,EAAE,MAAM,EAAG,EAAE,EAAE,MAAM,GAAG,EAC9CI,GAAU,KACZA,EAAS,CAAC,EAAG,CAAC,EAEdA,EAAS,CACP,OAAOA,EAAO,CAAC,EAAE,QAAQ,IAAK,GAAG,CAAC,EAClC,OAAOA,EAAO,CAAC,EAAE,QAAQ,IAAK,GAAG,CAAC,CAAA,EAGtCT,EAAOK,CAAC,EAAE,cAAgBI,EAAO,CAAC,EAClCT,EAAOK,CAAC,EAAE,aAAeI,EAAO,CAAC,CACnC,CACA,QAASJ,EAAI,EAAGA,EAAIL,EAAO,OAAQK,IACjCL,EAAOK,CAAC,EAAE,UAAYF,EAAcE,CAAC,EAGvC,MAAMK,EAAIC,EAAOX,CAAM,EACjB,CAAE,KAAAY,EAAM,KAAAC,EAAM,KAAAC,EAAM,KAAAC,CAAA,EAASL,EAAE,YAAA,EAC/BM,EAAIC,EAAO,CAAE,KAAAL,EAAM,KAAAC,EAAM,KAAAC,EAAM,KAAAC,EAAM,EACrCG,EAAIR,EAAE,OAAO,CAAE,aAAc,GAAM,EACnCS,EAAS,CAACH,EAAGE,CAAC,EACpB,KAAK,eAAe,CAAC,EAAIE,EACvB,OAAO,OAAO,CAAA,EAAIC,EAAaF,CAAM,CAAC,EACtCA,CAAA,CAEJ,CACF"}