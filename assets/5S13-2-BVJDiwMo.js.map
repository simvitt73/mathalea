{"version":3,"file":"5S13-2-BVJDiwMo.js","sources":["../../src/exercices/5e/5S13-2.ts"],"sourcesContent":["import { diagrammeBarres } from '../../lib/2d/diagrammes'\nimport { fixeBordures } from '../../lib/2d/fixeBordures'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice, shuffle } from '../../lib/outils/arrayOutils'\nimport { egalOuApprox } from '../../lib/outils/ecritures'\nimport { arrondi } from '../../lib/outils/nombres'\nimport { numAlpha, sp } from '../../lib/outils/outilString'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport { fraction } from '../../modules/fractions'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport { tableauColonneLigne } from '../../lib/2d/tableau'\nimport { setReponse } from '../../lib/interactif/gestionInteractif'\n\nexport const titre = 'Calculs de fréquences'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\n\ntype Serie = {\n  lieu: string\n  individus: string\n  caractere: string\n  caracterePourTableau: string\n  effectifTotal: number\n  modalites: string[]\n  effectifs: number[]\n  rangEffectifCache: number\n  entreeCachee: string\n}\n/**\n |*  888    888          888\n |*  888    888          888\n |*  888    888          888\n |*  8888888888  .d88b.  888 88888b.   .d88b.  888d888 .d8888b\n |*  888    888 d8P  Y8b 888 888 \"88b d8P  Y8b 888P\"   88K\n |*  888    888 88888888 888 888  888 88888888 888     \"Y8888b.\n |*  888    888 Y8b.     888 888 d88P Y8b.     888          X88\n |*  888    888  \"Y8888  888 88888P\"   \"Y8888  888      88888P'\n |*                          888\n |*                          888\n |*                          888\n */\n\n/**\n * Construit un tableau d'entiers de longueur connue\n * dont la somme des éléments est égale à un total connu.\n * @author Eve & Sylvain Chambon\n * @param {int} nbElements Nombre d'entiers dans le tableau\n * @param {int} total Somme des éléments du tableau\n * @returns {Array} Tableau d'entier\n * @example > listeEntiersDepuisSomme(100,3)\n * < [34,29,37]\n */\nfunction listeEntiersDepuisSomme(total: number, nbElements: number) {\n  const valeurs = new Array(nbElements)\n  // Répartition équitable du total dans les éléments du tableau\n  const quotient = Math.floor(total / nbElements)\n  const reste = total % nbElements\n  for (let i = 0; i < valeurs.length - 1; i++) {\n    valeurs[i] = quotient\n  }\n  valeurs[valeurs.length - 1] = quotient + reste\n  // Changement des valeurs\n  for (let i = 0, delta = 0; i < valeurs.length - 2; i++) {\n    // création du delta\n    delta = randint(-valeurs[i] + 1, valeurs[i] - 1)\n    valeurs[i] += delta\n    // répartition du delta entre les valeurs restantes du tableau\n    const diviseur = valeurs.length - i - 2\n    let q = 0\n    if (delta >= 0) {\n      q = Math.floor(delta / diviseur)\n    } else {\n      q = Math.ceil(delta / diviseur)\n    }\n    const r = delta % diviseur\n    for (let j = i + 1; j < valeurs.length - 1; j++) {\n      valeurs[j] -= q\n    }\n    valeurs[valeurs.length - 1] -= r\n  }\n  return valeurs\n}\n\nfunction graphique(\n  hauteursBarres: number[],\n  etiquettes: string[],\n  {\n    reperageTraitPointille = false,\n    couleurDeRemplissage = 'blue',\n    titreAxeVertical = '',\n    titre = '',\n    hauteurDiagramme = 8,\n    coeff = 2,\n    axeVertical = false,\n    etiquetteValeur = true,\n    labelAxeVert = false,\n  },\n) {\n  const diagramme = diagrammeBarres(hauteursBarres, etiquettes, {\n    reperageTraitPointille,\n    couleurDeRemplissage,\n    titreAxeVertical,\n    titre,\n    hauteurDiagramme,\n    coeff,\n    axeVertical,\n    etiquetteValeur,\n    labelAxeVert,\n  })\n  return mathalea2d(\n    Object.assign(\n      {},\n      fixeBordures([diagramme], { rxmin: -3, rymin: -3, rymax: 1.5 }),\n      {\n        style: 'inline',\n        scale: 0.5,\n      },\n    ),\n    diagramme,\n  )\n}\n\n/**\n |*  8888888888                                    d8b\n |*  888                                           Y8P\n |*  888\n |*  8888888    888  888  .d88b.  888d888  .d8888b 888  .d8888b  .d88b.\n |*  888        `Y8bd8P' d8P  Y8b 888P\"   d88P\"    888 d88P\"    d8P  Y8b\n |*  888          X88K   88888888 888     888      888 888      88888888\n |*  888        .d8\"\"8b. Y8b.     888     Y88b.    888 Y88b.    Y8b.\n |*  8888888888 888  888  \"Y8888  888      \"Y8888P 888  \"Y8888P  \"Y8888\n */\n\n/**\n * La classe Population sert à construire la série basée sur le theme choisi en paramètre\n */\nclass Population {\n  lieu: string\n  individus: string\n  caractere: string\n  caracterePourTableau: string\n  effectifTotal: number\n  modalites: string[]\n  effectifs: number[]\n  rangEffectifCache: number\n  entreeCachee: string\n\n  constructor(theme: string) {\n    // dictionnaires des séries\n    const listeThemes = ['etablissement', 'salon', 'parking', 'collection'] // chaque theme est une clé du dictionnaire\n    const series = new Map()\n    series.set('etablissement', {\n      lieu: 'un établissement',\n      individus: 'élèves',\n      caractere: 'leur sport préféré',\n      caracterePourTableau: 'Sports',\n      modalites: [\n        'Football',\n        'Rugby',\n        'Basket',\n        'Tennis',\n        'Judo',\n        'Handball',\n        'Volleyball',\n        'Athlétisme',\n        'Pingpong',\n      ],\n    })\n    series.set('salon', {\n      lieu: 'un salon européen de esport',\n      individus: 'visiteurs',\n      caractere: \"leur pays d'origine\",\n      caracterePourTableau: 'Pays',\n      modalites: [\n        'France',\n        'Angleterre',\n        'Hollande',\n        'Espagne',\n        'Italie',\n        'Belgique',\n        'Allemagne',\n        'Portugal',\n        'Autriche',\n      ],\n    })\n    series.set('parking', {\n      lieu: 'un parking de supermarché',\n      individus: 'voitures',\n      caractere: 'leur couleur',\n      caracterePourTableau: 'Couleurs',\n      modalites: [\n        'Noir',\n        'Blanc',\n        'Bleu',\n        'Rouge',\n        'Vert',\n        'Gris',\n        'Marron',\n        'Jaune',\n        'Orange',\n      ],\n    })\n    series.set('collection', {\n      lieu: 'une collection',\n      individus: 'disques',\n      caractere: 'leur style de musique',\n      caracterePourTableau: 'Styles',\n      modalites: [\n        'Pop',\n        'Jazz',\n        'Rap',\n        'RnB',\n        'Folk',\n        'Rock',\n        'Électro',\n        'Reggae',\n        'Soul',\n      ],\n    })\n    // construction de la série\n    let serie\n    if (theme === 'hasard') {\n      serie = series.get(choice(listeThemes))\n    } else {\n      serie = series.get(theme)\n    }\n    this.lieu = serie.lieu\n    this.individus = serie.individus\n    this.caractere = serie.caractere\n    this.caracterePourTableau = serie.caracterePourTableau\n    this.effectifTotal = choice([100, 120, 150, 200, 250, 400, 500, 1000])\n    this.modalites = shuffle(\n      serie.modalites.slice(0, randint(5, serie.modalites.length)),\n    )\n    this.effectifs = listeEntiersDepuisSomme(\n      this.effectifTotal,\n      this.modalites.length,\n    )\n    this.rangEffectifCache = randint(0, this.modalites.length - 1)\n    this.entreeCachee = this.modalites[this.rangEffectifCache]\n  }\n\n  getPreambule(styleExo: 'tableau' | 'diagramme') {\n    let preambule = `Dans ${this.lieu} comptant ${this.effectifTotal} ${this.individus}, on a noté ${this.caractere}.<br>`\n    switch (styleExo) {\n      case 'tableau':\n        preambule +=\n          'On a consigné les résultats dans le tableau suivant :<br><br>'\n        break\n      case 'diagramme':\n      default:\n        preambule +=\n          \"On a représenté ces données à l'aide du diagramme ci-dessous.<br><br>\"\n        break\n    }\n    return preambule\n  }\n\n  getEntrees() {\n    const entrees = new Map()\n    for (let i = 0; i < this.modalites.length; i++) {\n      entrees.set(this.modalites[i], this.effectifs[i])\n    }\n    return entrees\n  }\n}\n\n/**\n * Calculs de fréquences sur une série qualitative\n * avec un effectif manquant et l'effectif total donné\n * @author Eve & Sylvain CHAMBON\n\n */\nexport const uuid = 'ff67d'\n\nexport const refs = {\n  'fr-fr': ['5S13-2', 'BP2AutoA3', 'BP2SP4', '3AutoP02-2'],\n  'fr-ch': ['11NO2-2'],\n}\n/**\n * version 0 :\n * La consigne avec un tableau d'effectifs\n * */\nfunction exerciceAvecTableau(\n  theme: string,\n  exercice: Exercice,\n  numero: number,\n): { questions: string; corrections: string; effectifs: number[] } {\n  // On a besoin de l'exercice et du numéro de question pour l'interactif\n  // paramètres du problème\n  const serie = new Population(theme)\n  let preambule = serie.getPreambule('tableau')\n  // construction du tableau\n  const entetesColonnes = [`\\\\text{\\\\textbf{${serie.caracterePourTableau}}}`]\n  for (const modalite of serie.modalites) {\n    entetesColonnes.push(`\\\\text{${modalite}}`)\n  }\n  entetesColonnes.push('\\\\text{\\\\textbf{TOTAL}}')\n  const entetesLignes = [\n    '\\\\text{\\\\textbf{Effectifs}}',\n    '\\\\text{\\\\textbf{Fréquences}}',\n  ]\n  const cellules = []\n  // première ligne des effectifs\n  serie.effectifs.forEach((eff, index) => {\n    if (index !== serie.rangEffectifCache) {\n      cellules.push(eff)\n    } else {\n      cellules.push('')\n    }\n  })\n  cellules.push(`${serie.effectifTotal}`)\n  // deuxième ligne de fréquences (vide)\n  for (let i = 0; i <= serie.effectifs.length; i++) {\n    cellules.push('')\n  }\n  preambule += tableauColonneLigne(\n    entetesColonnes,\n    entetesLignes,\n    cellules,\n    1.5,\n  )\n  preambule += '<br>'\n  const texte = questionsEtCorrections(preambule, serie, exercice, numero) // on récupère les questions/réponses en relation\n  return {\n    questions: texte.questions,\n    corrections: texte.corrections,\n    effectifs: serie.effectifs,\n  } // On ajoute les effectifs pour ne pas avoir de doublons dans les différentes questions\n}\n\n/**\n * version 1 :\n * La consigne avec un diagramme bâton\n * */\nfunction exerciceAvecDiagramme(\n  theme: string,\n  exercice: Exercice,\n  numero: number,\n): { questions: string; corrections: string; effectifs: number[] } {\n  // On a besoin de l'exercice et du numéro de question pour l'interactif\n  // paramètres du problème\n  const serie = new Population(theme)\n  let preambule = serie.getPreambule('diagramme')\n  // construction du diagramme\n  const effectifsSansValeurCachee = serie.effectifs.map((elt, i) =>\n    i !== serie.rangEffectifCache ? elt : 0,\n  )\n  const diagrammeBaton = graphique(effectifsSansValeurCachee, serie.modalites, {\n    reperageTraitPointille: false,\n    axeVertical: true,\n    titreAxeVertical: 'Effectifs',\n    labelAxeVert: true,\n  })\n  preambule += diagrammeBaton\n  const texte = questionsEtCorrections(preambule, serie, exercice, numero) // on,numero récupère les questions/réponses en relation\n  return {\n    questions: texte.questions,\n    corrections: texte.corrections,\n    effectifs: serie.effectifs,\n  } // On ajoute les effectifs pour ne pas avoir de doublons dans les différentes questions\n}\n\n/**\n * Les questions non modifiables, seule la physionomie de la consigne change (données en tableau ou en diagramme)...\n * Une seule fonction donc pour générer les questions et leurs corrections identiques pour les deux versions\n * @param {Map} entreesTableau l'objet Map avec les entrees du tableau sport/effectif\n * @param {String} cachee le sport dont on a caché l'effectif\n * @returns liste des questions, liste des corrections\n */\nfunction questionsEtCorrections(\n  preambule: string,\n  serie: Serie,\n  exercice: Exercice,\n  numero: number,\n): { questions: string; corrections: string } {\n  let questions: string[] = []\n  const rangValeurChoisie = randint(\n    0,\n    serie.effectifs.length - 1,\n    serie.rangEffectifCache,\n  )\n  const frequenceDemandee = arrondi(\n    (serie.effectifs[rangValeurChoisie] * 100) / serie.effectifTotal,\n    1,\n  )\n  // correction question 1\n  let correction1 =\n    numAlpha(0) +\n    `L'effectif manquant est celui du ${serie.entreeCachee.charAt(0).toLocaleLowerCase() + serie.entreeCachee.slice(1)}. Soit $e$ cet effectif.<br>`\n  correction1 += `$e=${serie.effectifTotal}-( `\n  let first = true\n  serie.effectifs.forEach((eff, index) => {\n    if (index !== serie.rangEffectifCache) {\n      if (first) {\n        correction1 += `${eff} `\n        first = !first\n      } else {\n        correction1 += `+ ${eff} `\n      }\n    }\n  })\n  correction1 += ')$<br>'\n  correction1 += `$e=${texNombre(serie.effectifTotal, 0)}-${texNombre(serie.effectifTotal - serie.effectifs[serie.rangEffectifCache], 0)}$<br>`\n  correction1 += `$e=${texNombre(serie.effectifs[serie.rangEffectifCache], 0)}$<br>`\n  // correction question 2\n  let correction2\n  if (!context.isAmc && !exercice.interactif) {\n    correction2 = numAlpha(1) + 'Calculs des fréquences.<br>'\n    correction2 +=\n      'On rappelle que pour la fréquence relative à une valeur est donnée par le quotient : '\n    correction2 +=\n      '$\\\\dfrac{\\\\text{effectif de la valeur}}{\\\\text{effectif total}}$<br><br>'\n    correction2 += 'On en déduit donc les calculs suivants :<br><br>'\n    const enteteTableau = ['']\n    const premiereColonne = []\n    const premiereLigneTableau: string[] = []\n    const deuxiemeLigneTableau: string[] = []\n    serie.effectifs.forEach((eff, index) => {\n      enteteTableau.push(`\\\\text{${serie.modalites[index]}}`)\n      const f = fraction(eff, serie.effectifTotal)\n      premiereLigneTableau.push(f.texFraction)\n      deuxiemeLigneTableau.push(`${texNombre(f.pourcentage, 1)} ${sp(1)}\\\\%`)\n    })\n    premiereColonne.push(\n      '\\\\textbf{Fréquences}',\n      '\\\\textbf{Fréquences en pourcentages}',\n    )\n    correction2 += tableauColonneLigne(\n      enteteTableau,\n      premiereColonne,\n      premiereLigneTableau.concat(deuxiemeLigneTableau),\n    )\n    correction2 += '<br>'\n  } else {\n    // Pas besoin de tableau pour une seule valeur demandée.\n    correction2 =\n      '<br>' +\n      numAlpha(1) +\n      `Calcul de la fréquence de la valeur ${serie.modalites[rangValeurChoisie]}<br><br>`\n    correction2 +=\n      'On rappelle que pour la fréquence relative à une valeur est donnée par le quotient : '\n    correction2 +=\n      '$\\\\dfrac{\\\\text{effectif de la valeur}}{\\\\text{effectif total}}$.<br><br>'\n    correction2 += 'On en déduit donc :<br>'\n    const fValeur = fraction(\n      serie.effectifs[rangValeurChoisie],\n      serie.effectifTotal,\n    )\n    correction2 += `$\\\\text{Fréquence}_{${serie.modalites[rangValeurChoisie]}}= ${fValeur.texFraction}$<br>`\n    correction2 += `$\\\\text{Fréquence}_{${serie.modalites[rangValeurChoisie]}}${egalOuApprox((serie.effectifs[rangValeurChoisie] * 100) / serie.effectifTotal, 1)}${texNombre(arrondi(fValeur.pourcentage, 1))} ${sp(1)}\\\\%$`\n  }\n\n  if (!exercice.interactif && !context.isAmc) {\n    // Questions normales pour version non interactive html ou latex\n    questions = [\n      preambule,\n      numAlpha(0) + \"Déterminer l'effectif manquant.<br>\",\n      numAlpha(1) +\n        `Déterminer les fréquences pour chaque ${serie.caractere.substring(5)} (en pourcentage, arrondir au dixième si besoin).<br>`,\n    ]\n  } else {\n    if (!context.isAmc) {\n      // Questions pour interactivité html\n      setReponse(\n        exercice,\n        numero * 2,\n        serie.effectifs[serie.rangEffectifCache],\n        { formatInteractif: 'calcul' },\n      )\n      setReponse(exercice, numero * 2 + 1, frequenceDemandee, {\n        formatInteractif: 'calcul',\n      })\n      questions = [\n        preambule,\n        numAlpha(0) +\n          \"Déterminer l'effectif manquant.\" +\n          ajouteChampTexteMathLive(exercice, numero * 2, '') +\n          '<br>',\n        numAlpha(1) +\n          `Déterminer la fréquence de la valeur ${serie.modalites[rangValeurChoisie]} (en pourcentage, arrondir au dixième si besoin).` +\n          ajouteChampTexteMathLive(exercice, numero * 2 + 1, '', {\n            texteApres: '%',\n          }) +\n          '<br>',\n      ]\n    } else {\n      // Pour AMC, on ne peut pas doubler les questions, il faut les intégrer dans un seul AMCHybride.\n      exercice.autoCorrection[numero] = {\n        options: { multicols: true },\n        enonce:\n          preambule +\n          '<br>' +\n          numAlpha(0) +\n          \"Déterminer l'effectif manquant.\" +\n          '<br>' +\n          numAlpha(1) +\n          `Déterminer la fréquence de la valeur ${serie.modalites[rangValeurChoisie]} (en pourcentage, arrondir au dixième si besoin).`,\n        propositions: [\n          {\n            type: 'AMCNum',\n            propositions: [\n              {\n                texte: correction1 + correction2,\n                reponse: {\n                  texte: numAlpha(0),\n                  valeur: [serie.effectifs[serie.rangEffectifCache]],\n                  param: {\n                    digits: 3,\n                    decimals: 0,\n                    signe: false,\n                  },\n                },\n              },\n            ],\n          },\n          {\n            type: 'AMCNum',\n            propositions: [\n              {\n                texte: '',\n                reponse: {\n                  texte: numAlpha(1),\n                  valeur: [frequenceDemandee],\n                  param: {\n                    digits: 3,\n                    decimals: 1,\n                    signe: false,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n      }\n    }\n  }\n  return {\n    questions: questions.join('\\n'),\n    corrections: [correction1, correction2].join('\\n'),\n  }\n}\n\n// on met tout ensemble\nconst listeDesThemes = [\n  'hasard',\n  'etablissement',\n  'salon',\n  'parking',\n  'collection',\n]\nexport default class CalculerDesFrequences extends Exercice {\n  constructor() {\n    super()\n\n    this.nbQuestions = 1\n\n    this.spacingCorr = 1.5\n\n    this.sup = '3'\n    this.besoinFormulaireTexte = [\n      'Type de questions',\n      `Nombres séparés par des tirets\\n${[\n        \"1 : Calculer des fréquences à partir d'un tableau d'effectifs\",\n        \"2 : Calculer des fréquences à partir d'un diagramme bâton\",\n        '3 : Mélange',\n      ].join('\\n')}`,\n    ]\n    this.sup2 = 1\n    this.besoinFormulaire2Numerique = [\n      'Thème du contexte',\n      5,\n      [\n        '1 : Au hasard',\n        '2 : Établissement scolaire et sports préférés',\n        '3 : Salon européen et nationalités des participants',\n        '4 : Parking et couleurs des voitures',\n        '5 : Collection de disques et styles de musique',\n      ].join('\\n'),\n    ]\n  }\n\n  nouvelleVersion() {\n    const theme = listeDesThemes[this.sup2 - 1]\n    const exercice: { questions: string[]; corrections: string[] } = {\n      questions: [],\n      corrections: [],\n    }\n    let transit\n    const typeDeQuestions = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 2,\n      defaut: 1,\n      melange: 3,\n      nbQuestions: this.nbQuestions,\n    }).map(Number)\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      switch (typeDeQuestions[i]) {\n        case 1: // tableau\n          transit = exerciceAvecTableau(theme, this, i)\n          exercice.questions = [transit.questions]\n          exercice.corrections = [transit.corrections]\n          break\n        case 2: // diagramme\n        default:\n          transit = exerciceAvecDiagramme(theme, this, i)\n          exercice.questions = [transit.questions]\n          exercice.corrections = [transit.corrections]\n          break\n      }\n      if (this.questionJamaisPosee(i, ...transit.effectifs)) {\n        this.listeQuestions[i] = exercice.questions[0]\n        this.listeCorrections[i] = exercice.corrections[0]\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","listeEntiersDepuisSomme","total","nbElements","valeurs","quotient","reste","i","delta","randint","diviseur","q","r","j","graphique","hauteursBarres","etiquettes","reperageTraitPointille","couleurDeRemplissage","titreAxeVertical","hauteurDiagramme","coeff","axeVertical","etiquetteValeur","labelAxeVert","diagramme","diagrammeBarres","mathalea2d","fixeBordures","Population","theme","__publicField","listeThemes","series","serie","choice","shuffle","styleExo","preambule","entrees","uuid","refs","exerciceAvecTableau","exercice","numero","entetesColonnes","modalite","entetesLignes","cellules","eff","index","tableauColonneLigne","texte","questionsEtCorrections","exerciceAvecDiagramme","effectifsSansValeurCachee","elt","diagrammeBaton","questions","rangValeurChoisie","frequenceDemandee","arrondi","correction1","numAlpha","first","texNombre","correction2","context","enteteTableau","premiereColonne","premiereLigneTableau","deuxiemeLigneTableau","f","fraction","sp","fValeur","egalOuApprox","setReponse","ajouteChampTexteMathLive","listeDesThemes","CalculerDesFrequences","Exercice","transit","typeDeQuestions","gestionnaireFormulaireTexte","cpt","listeQuestionsToContenu"],"mappings":"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"}