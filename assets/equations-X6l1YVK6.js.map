{"version":3,"file":"equations-X6l1YVK6.js","sources":["../../src/lib/outils/equations.ts"],"sourcesContent":["import Decimal from 'decimal.js'\nimport { randint } from '../../modules/outils'\nimport { texFractionFromString } from './deprecatedFractions'\nimport {\n  ecritureAlgebrique,\n  ecritureParentheseSiNegatif,\n  rienSi1,\n} from './ecritures'\nimport { miseEnEvidence } from './embellissements'\nimport { abs, signe } from './nombres'\nimport { texNombre } from './texNombre'\n\nexport const equation1erDegre1Inconnue = (\n  options: {\n    valeursRelatives?: boolean\n    divisiblePar?: number\n    type?: 'x+b=d' | 'ax=d' | 'ax+b=0' | 'ax+b=d' | 'ax+b=cx+d'\n  } = { valeursRelatives: false, divisiblePar: 1, type: 'ax+b=cx+d' },\n) => {\n  let a: Decimal, b: Decimal, c: Decimal, d: Decimal, reponse: Decimal\n  switch (options.type) {\n    case 'x+b=d':\n      a = new Decimal(1)\n      c = new Decimal(0)\n      b = new Decimal(randint(-9, 9, [0])).times(options.divisiblePar ?? 1)\n      d = new Decimal(randint(-16, 15, 0)).times(options.divisiblePar ?? 1)\n      if (!options.valeursRelatives) {\n        d = d.abs()\n      }\n      reponse = d.minus(b)\n      break\n    case 'ax=d':\n      b = new Decimal(0)\n      c = new Decimal(0)\n      if (options.valeursRelatives) {\n        a = new Decimal(randint(-9, 9, [0, -1, 1]))\n        reponse = new Decimal(randint(-9, 9, [-1, 0, 1]))\n      } else {\n        a = new Decimal(randint(2, 15))\n        reponse = new Decimal(randint(2, 9))\n      }\n      d = a.times(reponse)\n      break\n    case 'ax+b=0':\n    case 'ax+b=d':\n      do {\n        c = new Decimal(0)\n        if (options.type === 'ax+b=0') {\n          d = new Decimal(0)\n        } else {\n          d = new Decimal(randint(-9, 9, [0])).times(options.divisiblePar ?? 1)\n        }\n        reponse = new Decimal(randint(-5, 5, [0, -1, 1]))\n        a = new Decimal(randint(-5, 5, [-1, 0, 1])).times(\n          options.divisiblePar ?? 1,\n        )\n        if (!options.valeursRelatives) {\n          reponse = reponse.abs()\n          a = a.abs()\n          d = d.abs()\n        }\n        b = d.minus(a.times(reponse))\n      } while (b.equals(0))\n      break\n    case 'ax+b=cx+d':\n    default:\n      d = new Decimal(randint(-15, 15, 0)).times(options.divisiblePar ?? 1)\n      c = new Decimal(randint(-5, 5, [-1, 0, 1])).times(\n        options.divisiblePar ?? 1,\n      )\n      if (!options.valeursRelatives) {\n        c = c.abs()\n        a = new Decimal(randint(2, 5)).times(options.divisiblePar ?? 1).plus(c)\n        reponse = new Decimal(\n          randint(-9, 9, [0, -1, 1, -d.div(c.minus(a))]),\n        ).abs()\n      } else {\n        a = new Decimal(randint(-5, 5, [-c, -c + 1, -c - 1, 0]))\n          .times(options.divisiblePar ?? 1)\n          .plus(c)\n        reponse = new Decimal(randint(-9, 9, [0, -1, 1, -d.div(c.minus(a))]))\n      }\n      b = c.minus(a).times(reponse).plus(d)\n      break\n  }\n  const membreDeGauche = a.equals(0)\n    ? b\n    : `${rienSi1(a)}x${b.equals(0) ? '' : ecritureAlgebrique(b)}`\n  const membreDeDroite = c.equals(0)\n    ? d\n    : `${rienSi1(c)}x${d.equals(0) ? '' : ecritureAlgebrique(d)}`\n  const egalite = `${membreDeGauche}=${membreDeDroite}`\n  let correction = ''\n  let correctionDetaillee = ''\n  if (!c.equals(0)) {\n    if (c.greaterThan(0)) {\n      correctionDetaillee += `On soustrait $${rienSi1(c)}x$ aux deux membres.<br>`\n    } else {\n      correctionDetaillee += `On ajoute $${rienSi1(-c)}x$ aux deux membres.<br>`\n    }\n    const soustraireCx = `$${rienSi1(a)}x${ecritureAlgebrique(b)}${miseEnEvidence(signe(-c) + rienSi1(abs(c)) + 'x')}=${texNombre(c)}x${ecritureAlgebrique(d)}${miseEnEvidence(signe(-c) + rienSi1(abs(c)) + 'x')}$<br>\n      $${rienSi1(a.minus(c))}x${ecritureAlgebrique(b)}=${texNombre(d)}$<br>`\n    correction += soustraireCx\n    correctionDetaillee += soustraireCx\n  }\n  if (!b.equals(0)) {\n    if (b.greaterThan(0)) {\n      correctionDetaillee += `On soustrait $${b}$ aux deux membres.<br>`\n    } else {\n      correctionDetaillee += `On ajoute $${texNombre(-b)}$ aux deux membres.<br>`\n    }\n    const soustraireB = `$${rienSi1(a.minus(c))}x${ecritureAlgebrique(b)}${miseEnEvidence(ecritureAlgebrique(-b))}=${texNombre(d)}${miseEnEvidence(ecritureAlgebrique(-b))}$<br>\n      $${rienSi1(a.minus(c))}x=${texNombre(d.minus(b))}$<br>`\n    correction += soustraireB\n    correctionDetaillee += soustraireB\n  }\n  if (!a.minus(c).equals(1)) {\n    correctionDetaillee += `On divise les deux membres par $${texNombre(a.minus(c))}$.<br>`\n    const diviserParA = `$${rienSi1(a.minus(c))}x${miseEnEvidence('\\\\div' + ecritureParentheseSiNegatif(a.minus(c)))}=${texNombre(d.minus(b)) + miseEnEvidence('\\\\div' + ecritureParentheseSiNegatif(a.minus(c)))}$<br>\n      $x=${texFractionFromString(texNombre(d.minus(b)), texNombre(a.minus(c)))}=${reponse}$<br>`\n    correction += diviserParA\n    correctionDetaillee += diviserParA\n  }\n  const conclusion = `La solution est $${miseEnEvidence(texNombre(reponse))}$.`\n  correction += conclusion\n  correctionDetaillee += conclusion\n  return {\n    membreDeGauche: String(membreDeGauche),\n    membreDeDroite: String(membreDeDroite),\n    egalite,\n    reponse: reponse.toNumber(),\n    reponseDecimale: reponse,\n    correction,\n    correctionDetaillee,\n    a: a.toNumber(),\n    aDecimal: a,\n    b: b.toNumber(),\n    bDecimal: b,\n    c: c.toNumber(),\n    cDecimal: c,\n    d: d.toNumber(),\n    dDecimal: d,\n  }\n}\n"],"names":["equation1erDegre1Inconnue","options","a","b","c","d","reponse","Decimal","randint","membreDeGauche","rienSi1","ecritureAlgebrique","membreDeDroite","egalite","correction","correctionDetaillee","soustraireCx","miseEnEvidence","signe","abs","texNombre","soustraireB","diviserParA","ecritureParentheseSiNegatif","texFractionFromString","conclusion"],"mappings":"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"}