{"version":3,"file":"CM2N2A-2-CpYIWVAM.js","sources":["../../src/exercices/CM2/CM2N2A-2.ts"],"sourcesContent":["import { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nimport Figure from 'apigeom'\nimport type CircleFractionDiagram from 'apigeom/src/elements/diagrams/CircleFractionDiagram'\nimport figureApigeom from '../../lib/figureApigeom'\nimport { fraction } from '../../modules/fractions'\nimport { representationFraction } from '../../modules/representationsFractions'\nexport const titre = 'Repr√©senter des fractions'\nexport const amcReady = true\nexport const interactifReady = true\nexport const interactifType = 'custom'\nexport const amcType = 'AMCHybride'\nexport const dateDeModifImportante = '15/01/2024'\n\n/**\n * Repr√©senter des fractions simples avec des disques partag√©s de fa√ßon ad√©quate.\n * @author Jean-Claude Lhote (Modifi√© par EE : rajout d'un param√®tre puis R√©mi Angot pour apiGeom)\n * 6N14\n * Relecture : Novembre 2021 par EE\n */\nexport const uuid = '87479'\n\nexport const refs = {\n  'fr-fr': ['CM2N2A-2'],\n  'fr-2016': ['6N14'],\n  'fr-ch': ['9NO10-1'],\n}\nexport default class RepresenterUneFraction extends Exercice {\n  figures: Figure[] = []\n  numerators: number[] = []\n  constructor() {\n    super()\n\n    this.nbQuestions = 4\n    this.nbCols = 2\n    this.nbColsCorr = 2\n    this.sup = 3\n    this.besoinFormulaireNumerique = [\n      'Type de fractions',\n      6,\n      '1 : Inf√©rieures √† 1\\n2 : Sup√©rieures √† 1\\n3 : Peu importe',\n    ]\n  }\n\n  nouvelleVersion() {\n    let sc\n    const ppc = 20\n    if (context.isHtml) {\n      sc = 0.5\n    } else {\n      sc = 0.4\n    }\n\n    const params = {\n      xmin: -2.2,\n      ymin: -2.2,\n      xmax: 18,\n      ymax: 3,\n      pixelsParCm: ppc,\n      scale: sc,\n    }\n    let den\n    let num\n    let f\n\n    const liste = combinaisonListes([2, 3, 4, 5, 6], this.nbQuestions)\n\n    for (\n      let i = 0, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n\n    ) {\n      den = liste[i]\n      switch (this.sup) {\n        case 1:\n          num = randint(1, den - 1)\n          break\n        case 2:\n          num = randint(den + 1, den * 3)\n          break\n        default:\n          num = randint(1, den * 3)\n          break\n      }\n      f = fraction(num, den)\n      texte = `Sachant qu'un disque repr√©sente une unit√©, repr√©senter la fraction $${f.texFraction}$ en coloriant la part correspondante.<br>`\n      this.numerators[i] = num\n      if (this.interactif) {\n        const figure = new Figure({\n          xMin: -1.6,\n          yMin: -1.6,\n          width: 336,\n          height: 95,\n        })\n        figure.options.color = 'blue'\n        figure._scale = context.isHtml ? 1 : 0.6\n        this.figures[i] = figure\n        figure.create('CircleFractionDiagram', {\n          denominator: den,\n          numberOfCircle: 3,\n          radius: 1.5,\n        })\n        figure.setToolbar({ tools: ['FILL'], position: 'top' })\n        texte += figureApigeom({\n          exercice: this,\n          figure,\n          isDynamic: true,\n          i,\n          defaultAction: 'FILL',\n        })\n        figure.divButtons.style.display = 'none' // Doit apparaitre apr√®s figureApigeom\n        figure.divUserMessage.style.display = 'none'\n      } else {\n        // if (context.isHtml) {\n        //   texte += figure.getStaticHtml()\n        // } else {\n        //   texte += figure.tikz()\n        // }\n        const f2 = fraction(den * 3, den)\n        texte += mathalea2d(\n          params,\n          representationFraction(f2, 0, 0, 2, 0, 'gateau', 'white'),\n        )\n      }\n      texteCorr = `Voici sur ces dessins, colori√©s en bleu, la part correspondante √† la fraction $${f.texFraction}$ :<br>`\n      if (this.interactif) {\n        const figureCorr = new Figure({\n          xMin: -2,\n          yMin: -2,\n          width: 600,\n          height: 95,\n        })\n        figureCorr.options.color = 'blue'\n        const diagrammeCorr = figureCorr.create('CircleFractionDiagram', {\n          denominator: den,\n          numberOfCircle: 3,\n          radius: 1,\n        })\n        diagrammeCorr.numerator = num\n        texteCorr += figureCorr.getStaticHtml()\n      } else {\n        texteCorr += mathalea2d(\n          params,\n          representationFraction(\n            f,\n            0,\n            0,\n            2,\n            randint(0, den - 1),\n            'gateau',\n            'blue',\n          ),\n        )\n      }\n      if (context.isAmc) {\n        this.autoCorrection[i] = {\n          enonce: 'ici la (ou les) question(s) est(sont) pos√©e(s)',\n          enonceAvant: false, // EE : ce champ est facultatif et permet (si false) de supprimer l'√©nonc√© ci-dessus avant la num√©rotation de chaque question.\n          enonceAvantUneFois: false, // EE : ce champ est facultatif et permet (si true) d'afficher l'√©nonc√© ci-dessus une seule fois avant la num√©rotation de la premi√®re question de l'exercice. Ne fonctionne correctement que si l'option melange est √† false.\n          propositions: [\n            {\n              type: 'AMCOpen', // on donne le type de la premi√®re question-r√©ponse qcmMono, qcmMult, AMCNum, AMCOpen\n              propositions: [\n                {\n                  texte: texteCorr,\n                  statut: 3, // OBLIGATOIRE (ici c'est le nombre de lignes du cadre pour la r√©ponse de l'√©l√®ve sur AMC)\n                  enonce: texte,\n                  sanscadre: true, // EE : ce champ est facultatif et permet (si true) de cacher le cadre et les lignes acceptant la r√©ponse de l'√©l√®ve\n                },\n              ],\n            },\n          ],\n        }\n      }\n      if (this.questionJamaisPosee(i, num, den)) {\n        // Si la question n'a jamais √©t√© pos√©e, on en cr√©e une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n\n  correctionInteractive = (i: number) => {\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la r√©ponse pour Capytale\n    this.answers[this.figures[i].id] = this.figures[i].json\n    let result = 'KO'\n    const divCheck = document.querySelector(\n      `#resultatCheckEx${this.numeroExercice}Q${i}`,\n    )\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q${i}`,\n    )\n    const diagramme = this.figures[i].elements.get(\n      'element0',\n    ) as CircleFractionDiagram\n    if (diagramme.type !== 'CircleFractionDiagram')\n      throw new Error('On attendait un diagramme circulaire de fractions')\n    if (diagramme.numerator === this.numerators[i]) {\n      if (divCheck) divCheck.innerHTML = 'üòé'\n      result = 'OK'\n    } else {\n      if (divCheck) divCheck.innerHTML = '‚òπÔ∏è'\n      const p = document.createElement('p')\n      p.innerText = `$\\\\dfrac{${diagramme.numerator}}{${diagramme.denominator}}$ a √©t√© colori√©.`\n      if (divFeedback) {\n        divFeedback.innerHTML = ''\n        divFeedback.appendChild(p)\n      }\n      result = 'KO'\n    }\n    this.figures[i].isDynamic = false\n    this.figures[i].divUserMessage.style.display = 'none'\n    return result\n  }\n}\n"],"names":["titre","amcReady","interactifReady","interactifType","amcType","dateDeModifImportante","uuid","refs","RepresenterUneFraction","Exercice","__publicField","i","result","divCheck","divFeedback","diagramme","p","sc","context","params","den","num","f","liste","combinaisonListes","texte","texteCorr","cpt","randint","fraction","figure","Figure","figureApigeom","f2","mathalea2d","representationFraction","figureCorr","diagrammeCorr","listeQuestionsToContenu"],"mappings":"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"}