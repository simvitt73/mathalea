{"version":3,"file":"GlisseNombre-CpHup3Qu.js","sources":["../../src/lib/2d/GlisseNombre.ts"],"sourcesContent":["import { apparitionAnimee, translationAnimee } from '../../modules/2dAnimation'\nimport { context } from '../../modules/context'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { point } from './PointAbstrait'\nimport { segment } from './segmentsVecteurs'\nimport { TexteParPoint, texteParPosition } from './textes'\nimport { vecteur } from './Vecteur'\nexport class GlisseNombre extends ObjetMathalea2D {\n  constructor(nombre = 0, decalage = 0) {\n    super()\n    this.objets = []\n    this.bordures = [3, -5, 28, 5]\n    const chiffresADecaler = []\n    const largeurColonne = 2\n    const hauteurLigne = 1.5\n    const hauteurPremiereLigne = 7.5\n    const nbLignes = 3\n    const nbColonnes = 12\n    const A = point(3, 5.5)\n    for (let i = 0; i < nbColonnes + 1; i++) {\n      const trait = segment(\n        point(A.x + i * largeurColonne, A.y),\n        point(\n          A.x + i * largeurColonne,\n          A.y - (nbLignes - 1) * hauteurLigne - hauteurPremiereLigne,\n        ),\n      )\n      this.objets.push(trait)\n    }\n    const traitDuHaut = segment(\n      A,\n      point(A.x + nbColonnes * largeurColonne, A.y),\n    )\n    this.objets.push(traitDuHaut)\n    for (let i = 1; i < nbLignes + 1; i++) {\n      const trait = segment(\n        point(A.x, A.y - (i - 1) * hauteurLigne - hauteurPremiereLigne),\n        point(\n          A.x + nbColonnes * largeurColonne,\n          A.y - (i - 1) * hauteurLigne - hauteurPremiereLigne,\n        ),\n      )\n      this.objets.push(trait)\n    }\n    const placeDansTableau: (\n      texte: string,\n      colonne: number,\n      ligne: number,\n      vertical?: boolean,\n      couleur?: string,\n    ) => TexteParPoint = (\n      texte,\n      colonne,\n      ligne,\n      vertical = false,\n      couleur = 'black',\n    ) => {\n      let textePlaceDansTableau\n      if (vertical) {\n        textePlaceDansTableau = texteParPosition(\n          texte,\n          A.x + (colonne + 0.5) * largeurColonne,\n          A.y - 0.9 * hauteurPremiereLigne,\n          -90,\n          couleur,\n          1,\n          'gauche',\n        ) as TexteParPoint\n      } else {\n        textePlaceDansTableau = texteParPosition(\n          texte,\n          A.x + (colonne + 0.5) * largeurColonne,\n          A.y - (ligne - 0.5) * hauteurLigne - hauteurPremiereLigne,\n          0,\n          couleur,\n        ) as TexteParPoint\n      }\n      return textePlaceDansTableau\n    }\n    const labels = [\n      'Millions',\n      'Centaines de milliers',\n      'Dizaines de milliers',\n      'Milliers',\n      'Centaines',\n      'Dizaines',\n      'Unités',\n      'Dixièmes',\n      'Centièmes',\n      'Millièmes',\n      'Dix-millièmes',\n      'Cent-Millièmes',\n    ]\n    for (let i = 0; i < nbColonnes; i++) {\n      const couleur = i === 6 || i === 6 - decalage ? '#f15929' : 'black'\n      const textePlaceDansTableau = placeDansTableau(\n        labels[i],\n        i,\n        0,\n        true,\n        couleur,\n      )\n      if (i === 6 || i === 6 - decalage) textePlaceDansTableau.gras = true\n      this.objets.push(textePlaceDansTableau)\n    }\n    const nombreString = nombre.toString()\n    const partieEntiere = nombreString.split('.')[0]\n    const partieDecimale = nombreString.split('.')[1]\n    const chiffreDesUnites = placeDansTableau(\n      partieEntiere[partieEntiere.length - 1],\n      6,\n      1,\n      false,\n      '#f15929',\n    )\n    const chiffreDesUnites2 = placeDansTableau(\n      partieEntiere[partieEntiere.length - 1],\n      6,\n      2,\n      false,\n      '#f15929',\n    )\n    chiffreDesUnites.gras = true\n    chiffreDesUnites2.gras = true\n    this.objets.push(chiffreDesUnites)\n    chiffresADecaler.push(chiffreDesUnites2)\n    for (let i = 1; i < partieEntiere.length; i++) {\n      const chiffre = placeDansTableau(\n        partieEntiere[partieEntiere.length - 1 - i],\n        6 - i,\n        1,\n      )\n      const chiffre2 = placeDansTableau(\n        partieEntiere[partieEntiere.length - 1 - i],\n        6 - i,\n        2,\n      )\n      this.objets.push(chiffre)\n      chiffresADecaler.push(chiffre2)\n    }\n    if (partieDecimale) {\n      for (let i = 0; i < partieDecimale.length; i++) {\n        const chiffre = placeDansTableau(partieDecimale[i], 7 + i, 1)\n        const chiffre2 = placeDansTableau(partieDecimale[i], 7 + i, 2)\n        this.objets.push(chiffre)\n        chiffresADecaler.push(chiffre2)\n      }\n      const texte1 = texteParPosition(\n        ',',\n        A.x + 6.9 * largeurColonne,\n        A.y - 0.3 * hauteurLigne - hauteurPremiereLigne,\n        0,\n        '#f15929',\n        3,\n      ) as TexteParPoint\n      const texte2 = texteParPosition(\n        ',',\n        A.x + 6.9 * largeurColonne,\n        A.y - 1.3 * hauteurLigne - hauteurPremiereLigne,\n        0,\n        '#f15929',\n        3,\n      ) as TexteParPoint\n      texte1.gras = true\n      texte2.gras = true\n      this.objets.push(texte1)\n      this.objets.push(texte2)\n    } else if (decalage < 0) {\n      // pas de partie décimale mais une division alors virgule pour le 2e nombre\n      if (context.isHtml) {\n        const texte2 = texteParPosition(\n          ',',\n          A.x + 6.9 * largeurColonne,\n          A.y - 1.3 * hauteurLigne - hauteurPremiereLigne,\n          0,\n          '#f15929',\n          3,\n        ) as TexteParPoint\n        texte2.gras = true\n        this.objets.push(apparitionAnimee([texte2], 6, 0.2))\n      }\n    }\n    if (context.isHtml) {\n      const chiffresQuiGlissent = translationAnimee(\n        chiffresADecaler,\n        vecteur(-decalage * largeurColonne, 0),\n        'id=\"op\" dur=\"1s\" begin=\"0s;op.end+5s\" fill=\"freeze\"',\n      )\n      this.objets.push(chiffresQuiGlissent as ObjetMathalea2D)\n    }\n    const nombreDeZeroPartieEntiere = partieDecimale\n      ? decalage - partieDecimale.length\n      : decalage\n    const nombreDeZeroPartieDecimale = -partieEntiere.length - decalage + 1\n    const zerosAAjouter = []\n    for (let i = 0; i < nombreDeZeroPartieEntiere; i++) {\n      const zero = placeDansTableau('0', 6 - i, 2, false, '#32CD32') // Lime Green\n      zero.gras = true\n      zerosAAjouter.push(zero)\n    }\n    for (let i = 0; i < nombreDeZeroPartieDecimale; i++) {\n      const zero = placeDansTableau('0', 6 + i, 2, false, '#32CD32')\n      zero.gras = true\n      zerosAAjouter.push(zero)\n    }\n    if (context.isHtml)\n      this.objets.push(apparitionAnimee(zerosAAjouter, 6, 0.2))\n  }\n\n  svg(coeff: number) {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      code += '\\n\\t' + objet.svg(coeff)\n    }\n    code = `<g id=\"${this.id}\">${code}</g>`\n    return code\n  }\n\n  tikz() {\n    let code = ''\n    if (this.objets == null) return code\n    for (const objet of this.objets) {\n      if (typeof objet.tikz === 'function') code += '\\n\\t' + objet.tikz()\n    }\n    return code\n  }\n}\n\nexport function glisseNombre(nombre = 0, decalage = 0) {\n  return new GlisseNombre(nombre, decalage)\n}\n"],"names":["GlisseNombre","ObjetMathalea2D","nombre","decalage","chiffresADecaler","largeurColonne","hauteurLigne","hauteurPremiereLigne","nbLignes","nbColonnes","A","point","i","trait","segment","traitDuHaut","placeDansTableau","texte","colonne","ligne","vertical","couleur","textePlaceDansTableau","texteParPosition","labels","nombreString","partieEntiere","partieDecimale","chiffreDesUnites","chiffreDesUnites2","chiffre","chiffre2","texte1","texte2","context","apparitionAnimee","chiffresQuiGlissent","translationAnimee","vecteur","nombreDeZeroPartieEntiere","nombreDeZeroPartieDecimale","zerosAAjouter","zero","coeff","code","objet","glisseNombre"],"mappings":"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"}