var _=Object.defineProperty;var j=(s,i,t)=>i in s?_(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t;var a=(s,i,t)=>j(s,typeof i!="symbol"?i+"":i,t);import{e as M}from"./vendors/earcut-jJVragJp.js";import{R as D,P}from"./index-vfG7N0N9.js";import{c,l as $}from"./utilitairesGeometriques-rO8Jz15i.js";import{O as H}from"./ObjetMathalea2D-CXcNXRpD.js";import{p as x}from"./pattern-I1sXJuF2.js";import{a as p,P as A,i as S}from"./PointAbstrait-Cz1GEocE.js";import{s as k,a as v}from"./segmentsVecteurs-Dh5p_FwX.js";import{b as w}from"./textes-CS7rU0Yo.js";function C(s){if(!(s!=null&&s.listePoints)||s.listePoints.length!==3)return!1;const[i,t,e]=s.listePoints;return .5*Math.abs((t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y))}function z(s,i="",t="above"){let e=0,o=0,l=0;for(const r of s.listePoints)e+=r.x,o+=r.y,l++;const n=e/l,h=o/l;return p(n,h,i,t)}class N extends H{constructor(...t){super();a(this,"couleurDeRemplissage");a(this,"opaciteDeRemplissage");a(this,"couleurDesHachures");a(this,"distanceDesHachures");a(this,"epaisseurDesHachures");a(this,"hachures");a(this,"listePoints");a(this,"nom");a(this,"pointilles");a(this,"_triangulation");a(this,"_flat");a(this,"_aire");a(this,"stringColor");a(this,"perimetre");this.epaisseurDesHachures=1,this.distanceDesHachures=10,this.couleurDeRemplissage=c("none"),this.opaciteDeRemplissage=.5,this.epaisseur=1,this.opacite=1,this.pointilles=0,this._triangulation=[],this._flat=[],this._aire=0,this.stringColor="black",Array.isArray(t[0])?(this.listePoints=t[0].map(r=>p(r.x,r.y,r.nom,r.positionLabel)),t[1]&&(this.color=c(String(t[1])),this.stringColor=String(t[1])),t[2]?this.couleurDeRemplissage=c(String(t[2])):this.couleurDeRemplissage=c("none"),t[3]?(this.couleurDesHachures=c(String(t[3])),this.hachures=!0):(this.couleurDesHachures=c("black"),this.hachures=!1),this.nom=this.listePoints.map(r=>r.nom).join("")):(typeof t[t.length-1]=="string"&&(this.color=c(String(t[t.length-1])),this.stringColor=String(t[t.length-1]),t.splice(t.length-1,1)),this.listePoints=t.filter(r=>r instanceof A),this.nom=this.listePoints.map(r=>r.nom).join(""),this.couleurDeRemplissage=c("none"),this.couleurDesHachures=c("none"),this.hachures=!1);let e=1e3,o=-1e3,l=1e3,n=-1e3;for(const r of this.listePoints)r.typeObjet!=="point"&&window.notify("Polygone : argument invalide",{...t}),e=Math.min(e,r.x),o=Math.max(o,r.x),l=Math.min(l,r.y),n=Math.max(n,r.y);this.bordures=[e,l,o,n];let h=0;for(let r=0;r<this.listePoints.length;r++)h+=$(this.listePoints[r],this.listePoints[(r+1)%this.listePoints.length]);this.perimetre=h}binomesXY(t){let e="";for(const o of this.listePoints)e+=`${o.xSVG(t)},${o.ySVG(t)} `;return e}get flat(){return this._flat.length===0&&(this._flat=O(this)),this._flat}get triangulation(){if(this._triangulation.length===0){const t=M(this.flat);this._triangulation=[];for(let e=0;e<t.length;e+=3)this._triangulation.push([p(this.flat[t[e]*2],this.flat[t[e]*2+1]),p(this.flat[t[e+1]*2],this.flat[t[e+1]*2+1]),p(this.flat[t[e+2]*2],this.flat[t[e+2]*2+1])])}return this._triangulation}get aire(){if(this._aire===0){const t=this.triangulation;this._aire=0;for(let e=0;e<t.length;e++)this._aire+=Number(C(g(t[e])))}return this._aire}svg(t){switch(this.epaisseur!==1&&(this.style+=` stroke-width="${this.epaisseur}" `),this.opacite!==1&&(this.style+=` stroke-opacity="${this.opacite}" `),this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;case 5:this.style+=' stroke-dasharray="5 5" ';break}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage=c("none")),x({motif:String(this.hachures),id:String(this.id),distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures[0]||"black",couleurDeRemplissage:this.couleurDeRemplissage[0],opaciteDeRemplissage:this.opaciteDeRemplissage})+`<polygon points="${this.binomesXY(t)}" stroke="${this.color[0]}" ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(this.couleurDeRemplissage[0]===""||this.couleurDeRemplissage[0]===void 0?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage[0]}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),this.opacite!==1&&(this.style+=` stroke-opacity="${this.opacite}" `),`<polygon points="${this.binomesXY(t)}" stroke="${this.color[0]}" ${this.style} id="${this.id}" />`)}tikz(){const t=[];switch(this.color[1].length>1&&this.color[1]!=="black"&&t.push(`color=${this.color[1]}`),this.epaisseur!==1&&t.push(`line width = ${this.epaisseur}`),this.pointilles){case 1:t.push(" dash dot ");break;case 2:t.push(" densely dash dot dot ");break;case 3:t.push(" dash dot dot ");break;case 4:t.push(" dotted ");break;case 5:t.push(" dashed ");break}this.opacite!==1&&t.push(`opacity=${this.opacite}`),this.couleurDeRemplissage[1]!==""&&this.couleurDeRemplissage[1]!=="none"&&t.push(`preaction={fill,color = ${this.couleurDeRemplissage[1]}${this.opaciteDeRemplissage!==1?", opacity = "+this.opaciteDeRemplissage:""}}`),this.hachures&&(this.hachures="dotted"),this.hachures!=null&&typeof this.hachures=="string"&&t.push(x({motif:this.hachures,id:String(this.id),distanceDesHachures:this.distanceDesHachures,couleurDesHachures:this.couleurDesHachures[1],couleurDeRemplissage:this.couleurDeRemplissage[1],opaciteDeRemplissage:this.opaciteDeRemplissage}));let e="";t.length>0&&(e="["+t.join(",")+"]");let o="";for(const n of this.listePoints)o+=`(${D(n.x)},${D(n.y)})--`;return`\\draw${e} ${o}cycle;`}svgml(t,e){let o="",l,n,h;for(let r=1;r<=this.listePoints.length;r++)h=this.listePoints[r%this.listePoints.length],n=this.listePoints[r-1],l=k(n,h,this.stringColor),l.epaisseur=this.epaisseur,l.opacite=this.opacite,o+=l.svgml(t,e);return o}tikzml(t){let e="",o,l,n;for(let h=1;h<=this.listePoints.length;h++)n=this.listePoints[h%this.listePoints.length],l=this.listePoints[h-1],o=k(l,n,this.stringColor),o.epaisseur=this.epaisseur,o.opacite=this.opacite,e+="	"+o.tikzml(t)+`
`;return e}}function g(...s){return new N(...s)}function q(...s){let i=.5;if(typeof s[s.length-1]=="number"&&(i=Number(s[s.length-1]),s.splice(s.length-1,1)),!S(s))return window.notify("polygoneAvecNom : les arguments doivent Ãªtre des objets PointAbstrait",{args:s}),[g(),R(g())];const t=g(...s);let e="";s.forEach(l=>{e+=l.nom+","}),e=e.substring(0,e.length-1);const o=R(t,e,i);return o.bordures=[0,0,0,0],o.bordures[0]=t.bordures[0]-1-i,o.bordures[1]=t.bordures[1]-1-i,o.bordures[2]=t.bordures[2]+1+i,o.bordures[3]=t.bordures[3]+1+i,[t,o]}function J(s,i){i=typeof i=="string"&&i.includes(",")?i.split(","):i;for(let t=0;t<s.listePoints.length;t++)i[t]!==void 0&&(s.listePoints[t].nom=i[t])}function O(s){const i=[];for(let t=0;t<s.listePoints.length;t++)i.push(s.listePoints[t].x,s.listePoints[t].y);return i}class L extends H{constructor(t,e="",o=.5,l="black",n=1){super();a(this,"poly");a(this,"dist");this.poly=t,this.dist=o,this.objets=[];const h=e.includes(",")?e.split(","):e;for(let u=0;u<t.listePoints.length;u++)h.length>0&&(t.listePoints[u].nom=h[u]);t.nom=t.listePoints.map(u=>u.nom).join("");const r=z(t);let f=1e3,y=-1e3,d=1e3,b=-1e3;for(const u of t.listePoints){const m=v(r,u,$(r,u)+(P.isHtml?o*20/P.pixelsParCm:o/P.scale));m.positionLabel="center",this.objets.push(w(u.nom,m,0,l,n,"milieu",!0)),f=Math.min(f,m.x-.5),y=Math.max(y,m.x+.5),d=Math.min(d,m.y-.5),b=Math.max(b,m.y+.5)}this.bordures=[f,d,y,b]}svg(t){let e="";if(this.objets==null)return e;for(const o of this.objets)e+=`
	`+o.svg(t);return e}tikz(){let t="";if(this.objets==null)return t;for(const e of this.objets)t+=`
	`+e.tikz();return t}}function R(s,i="",t=.5,e="black",o=1){return new L(s,i,t,e,o)}export{N as P,q as a,z as b,R as n,g as p,J as r};
//# sourceMappingURL=polygones-dllpvdk8.js.map
