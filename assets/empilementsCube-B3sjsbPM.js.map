{"version":3,"file":"empilementsCube-B3sjsbPM.js","sources":["../../src/lib/3d/3d_dynamique/empilementsCube.ts"],"sourcesContent":["import { randint } from '../../../modules/outils'\nimport { ajouteCanvas3d, type Elements3DDescription } from './Canvas3DElement'\n\nexport function cubesToSceneContent(\n  lstCoordonneesCubes: number[][],\n  eclate: boolean,\n) {\n  return lstCoordonneesCubes.map(([x, y, z]) => ({\n    type: 'cube' as const,\n    pos: [x * (eclate ? 3 : 1), z, -y] as [number, number, number],\n    size: 1,\n    edges: true,\n  }))\n}\nexport function empilementCubes(long: number, larg: number, hmax: number) {\n  const tabHauteurs = new Array(larg)\n  for (let i = 0; i < larg; i++) {\n    tabHauteurs[i] = new Array(long)\n  }\n  // premiere ligne\n  for (let i = 0; i < larg; i++) {\n    tabHauteurs[i][0] = randint(0, 1)\n  }\n  // deuxième ligne et suivantes\n  for (let i = 0; i < larg; i++) {\n    for (let j = 1; j < long; j++) {\n      tabHauteurs[i][j] = Math.min(tabHauteurs[i][j - 1] + randint(1, 2), hmax)\n    }\n  }\n  // Vérification Dernière Ligne : ne pas être vide.\n  for (let i = 0; i < larg; i++) {\n    tabHauteurs[i][long - 1] = Math.max(2, tabHauteurs[i][long - 1])\n  }\n  // Ajoute les cubes dans un tableau une dimension\n  // il faut trier les cubes : x décroissant puis y décroissant, puis z croissant\n  const lstCoordonneesCubes = []\n  for (let i = larg - 1; i > -1; i = i - 1) {\n    for (let j = long - 1; j > -1; j = j - 1) {\n      for (let k = 0; k < tabHauteurs[i][j]; k++) {\n        lstCoordonneesCubes.push([i, j, k])\n      }\n    }\n  }\n  return lstCoordonneesCubes\n}\n\nexport function canvasEnonceCorrection(\n  lstCoordonneesCubes: number[][],\n  id: string,\n) {\n  const objects: Elements3DDescription[] = cubesToSceneContent(\n    lstCoordonneesCubes,\n    false,\n  )\n  objects.push(\n    { type: 'ambientLight' as const, color: 0xffffff, intensity: 0.8 },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 1.2,\n      position: [1, 0, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 1.2,\n      position: [0, 1, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 1.2,\n      position: [0, 0, 1],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 0.6,\n      position: [-1, 0, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 0.6,\n      position: [0, -1, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 0.6,\n      position: [0, 0, -1],\n    },\n  )\n  const content = {\n    objects,\n    autoCenterZoomMargin: 1.2,\n  }\n  const canvasEnonce = ajouteCanvas3d({ id, content, width: 300, height: 300 })\n\n  const objectsCorr: Elements3DDescription[] = cubesToSceneContent(\n    lstCoordonneesCubes,\n    true,\n  )\n  objectsCorr.push(\n    { type: 'ambientLight' as const, color: 0xffffff, intensity: 0.8 },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 1.2,\n      position: [1, 0, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 1.2,\n      position: [0, 1, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 1.2,\n      position: [0, 0, 1],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 0.6,\n      position: [-1, 0, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 0.6,\n      position: [0, -1, 0],\n    },\n    {\n      type: 'directionalLight' as const,\n      color: 0xffffff,\n      intensity: 0.6,\n      position: [0, 0, -1],\n    },\n  )\n  const contentCorr = {\n    objects: objectsCorr,\n    autoCenterZoomMargin: 1,\n  }\n  const canvasCorrection = ajouteCanvas3d({\n    id: `${id}Correction`,\n    content: contentCorr,\n    width: 400,\n    height: 400,\n  })\n  return { canvasEnonce, canvasCorrection }\n}\n"],"names":["cubesToSceneContent","lstCoordonneesCubes","eclate","x","y","z","empilementCubes","long","larg","hmax","tabHauteurs","i","randint","j","k","canvasEnonceCorrection","id","objects","canvasEnonce","ajouteCanvas3d","objectsCorr","contentCorr","canvasCorrection"],"mappings":"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"}