{"version":3,"file":"5C11-2-u3TDLzbV.js","sources":["../../src/exercices/5e/5C11-2.ts"],"sourcesContent":["import type { MathfieldElement } from 'mathlive'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { checkLeCompteEstBon } from '../../lib/interactif/comparisonFunctions'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { sp } from '../../lib/outils/outilString'\nimport { prenom } from '../../lib/outils/Personne'\nimport { context } from '../../modules/context'\nimport { listeQuestionsToContenu } from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport TrouverSolutionMathador from './_TrouverSolutionMathador'\nexport const amcReady = true\nexport const amcType = 'AMCOpen'\nexport const interactifReady = true\nexport const interactifType = ['mathLive', 'custom']\n\nexport const titre = \"Traduire une succession d'op√©rations par une expression\"\nexport const dateDeModifImportante = '26/09/2024'\n\n/**\n * Transformer un programme de calcul avec les 4 op√©rations dans un ordre al√©atoire en un seul calcul.\n * @author Jean-Claude Lhote\n */\nexport const uuid = '3406a'\n\nexport const refs = {\n  'fr-fr': ['5C11-2'],\n  'fr-ch': ['9NO6-3'],\n}\nexport default class √âcrireUneExpressionMathador extends Exercice {\n  tirage: number[][]\n  cible: number[]\n  constructor() {\n    super()\n\n    this.nbQuestions = 4\n    this.spacing = 1.5\n    this.besoinFormulaireCaseACocher = ['Calculs cach√©s', false]\n    this.besoinFormulaire2CaseACocher = [\n      '4 op√©rations diff√©rentes obligatoires',\n      false,\n    ]\n    this.sup = false\n    this.sup2 = false\n    this.tirage = []\n    this.cible = []\n  }\n\n  nouvelleVersion() {\n    let expression, calculsSuccessifs, solutionMathador, quidam\n    this.tirage = []\n    this.cible = []\n    for (\n      let i = 0, texte, texteCorr, cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n\n    ) {\n      // traduire un calcul mathador\n      solutionMathador = TrouverSolutionMathador(30, 90)\n      this.tirage[i] = solutionMathador[0]\n      this.cible[i] = solutionMathador[1]\n      calculsSuccessifs = solutionMathador[2]\n      expression = solutionMathador[3]\n      quidam = prenom()\n      texte = `${quidam} a trouv√© une solution d'une variante du jeu ¬´ Le compte est bon ¬ª pour le tirage suivant $${this.tirage[i][0]}~;~${this.tirage[i][1]}~;~${this.tirage[i][2]}~;~${this.tirage[i][3]}~;~${this.tirage[i][4]}$ et pour la cible $${this.cible[i]}$.<br>`\n      texte +=\n        'Il faut utiliser, obligatoirement, tous les nombres du tirage, pour obtenir avec des op√©rations √©l√©mentaires, le nombre indiqu√© par la cible.<br>'\n      texte +=\n        this.sup && this.sup2\n          ? \"Pour que la solution soit gagnante, il faut que l'encha√Ænement de calculs poss√®de chacune des quatre op√©rations √©l√©mentaires.<br>\"\n          : ''\n      texte += this.sup ? '' : `Voici les calculs de ${quidam} :<br>`\n      if (!this.sup) {\n        for (let j = 0; j < 4; j++) {\n          texte += `$${calculsSuccessifs[j]}$<br>`\n        }\n        this.interactifType = 'mathLive'\n      } else this.interactifType = 'custom'\n\n      texte +=\n        \"√âcrire la succession d'op√©rations en une seule expression.\" +\n        (this.interactif\n          ? ajouteChampTexteMathLive(\n              this,\n              i,\n              KeyboardType.clavierDeBaseAvecEgal,\n              {\n                texteAvant: sp(10) + '$E=$',\n              },\n            )\n          : '')\n      texteCorr = ''\n      if (this.sup) {\n        texteCorr += `${quidam} a propos√© les calculs suivants :<br>`\n        for (let j = 0; j < 4; j++) {\n          texteCorr += `$${calculsSuccessifs[j]}$<br>`\n        }\n      }\n\n      texteCorr += `L'expression correspondante au calcul de ${quidam} est :<br>$${miseEnEvidence(expression)}$ ou $${miseEnEvidence(solutionMathador[4])}$.`\n      if (!this.sup) {\n        handleAnswers(this, i, {\n          reponse: {\n            value: [...expression, ...solutionMathador[4]],\n            options: { expressionNumerique: true },\n          },\n        })\n      }\n      if (context.isAmc) {\n        this.autoCorrection[i] = {\n          enonce: texte,\n          propositions: [\n            {\n              texte: texteCorr,\n              statut: 1, // OBLIGATOIRE (ici c'est le nombre de lignes du cadre pour la r√©ponse de l'√©l√®ve sur AMC)\n              sanscadre: false, // EE : ce champ est facultatif et permet (si true) de cacher le cadre et les lignes acceptant la r√©ponse de l'√©l√®ve\n              pointilles: false, // EE : ce champ est facultatif et permet (si false) d'enlever les pointill√©s sur chaque ligne.\n            },\n          ],\n        }\n      }\n\n      if (\n        this.questionJamaisPosee(\n          i,\n          solutionMathador,\n          this.tirage[i].join(';'),\n          this.cible[i],\n        )\n      ) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n\n  // EE : Modele Correction Interactive\n  correctionInteractive = (i: number) => {\n    // Champ r√©ponse : Son nom est en dur, ne rien changer\n    const mf = document.querySelector(\n      `math-field#champTexteEx${this.numeroExercice}Q${i}`,\n    ) as MathfieldElement\n\n    // Sauvegarde de la r√©ponse pour Capytale\n    if (this.answers == null) this.answers = {}\n    this.answers[`Ex${this.numeroExercice}Q${i}`] = mf.getValue()\n\n    // Saisie fournie par l'utilisateur qu'on va comparer √©ventuellement avec la r√©ponse attendue.\n    const input = mf.value\n\n    // Partie test de la saisie de l'utilisateur\n    const { isOk, feedback } = checkLeCompteEstBon(\n      input,\n      this.tirage[i],\n      this.cible[i],\n      this.sup2,\n    )\n    let reponse\n    let smiley\n    if (isOk) {\n      smiley = 'üòé'\n      reponse = 'OK'\n    } else {\n      smiley = '‚òπÔ∏è'\n      reponse = 'KO'\n    }\n    // Affichage du smiley final\n    const spanResultat = document.querySelector(\n      `span#resultatCheckEx${this.numeroExercice}Q${i}`,\n    ) as HTMLSpanElement\n    spanResultat.innerHTML = smiley\n\n    // Affichage du feedback final qu'il fait penser √† cr√©er avec ajouteFeedback dans l'exercice\n    const divFeedback = document.querySelector(\n      `#feedbackEx${this.numeroExercice}Q${i}`,\n    ) as HTMLDivElement\n    divFeedback.innerHTML = feedback ?? ''\n\n    return reponse\n  }\n}\n"],"names":["amcReady","amcType","interactifReady","interactifType","titre","dateDeModifImportante","uuid","refs","√âcrireUneExpressionMathador","Exercice","__publicField","i","mf","input","isOk","feedback","checkLeCompteEstBon","reponse","smiley","spanResultat","divFeedback","expression","calculsSuccessifs","solutionMathador","quidam","texte","texteCorr","cpt","TrouverSolutionMathador","prenom","j","ajouteChampTexteMathLive","KeyboardType","sp","miseEnEvidence","handleAnswers","context","listeQuestionsToContenu"],"mappings":"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"}