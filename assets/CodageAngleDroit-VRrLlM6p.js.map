{"version":3,"file":"CodageAngleDroit-VRrLlM6p.js","sources":["../../src/lib/2d/CodageAngleDroit.ts"],"sourcesContent":["import { context } from '../../modules/context'\nimport { colorToLatexOrHTML } from './colorToLatexOrHtml'\nimport { fixeBordures } from './fixeBordures'\nimport type { IPointAbstrait } from './Interfaces'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport type { PointAbstrait } from './PointAbstrait'\nimport { polygone } from './polygones'\nimport { polyline } from './Polyline'\nimport { rotation } from './transformations'\nimport { angleOriente } from './utilitairesGeometriques'\nimport { pointSurSegment } from './utilitairesPoint'\n\n/**\n * Code un angle droit\n * @param {PointAbstrait} A Point sur un côté de l'angle droit\n * @param {PointAbstrait} O Sommet de l'angle droit\n * @param {PointAbstrait} B Point sur l'autre côté de l'angle droit\n * @param {string} [color='black'] Couleur du codage : du type 'blue' ou du type '#f15929'\n * @param {number} [d=0.4] Taille du codage de l'angle droit\n * @param {number} [epaisseur=0.5] Epaisseur du trait\n * @param {number} [opacite=1] Opacité du trait\n * @param {string} [couleurDeRemplissage='none'] 'none' si on ne veut pas de remplissage, sinon une couleur du type 'blue' ou du type '#f15929'\n * @param {number} [opaciteDeRemplissage=1] Taux d'opacité du remplissage entre 0 et 1\n * @property {string} svg Sortie au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} svgml Sortie, à main levée, au format vectoriel (SVG) que l’on peut afficher dans un navigateur\n * @property {string} tikz Sortie au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @property {string} tikzml Sortie, à main levée, au format TikZ que l’on peut utiliser dans un fichier LaTeX\n * @property {PointAbstrait} depart Point sur un côté de l'angle droit\n * @property {PointAbstrait} sommet Sommet de l'angle droit\n * @property {PointAbstrait} arrivee Point sur l'autre côté de l'angle droit\n * @property {string} color Couleur du codage. À associer obligatoirement à colorToLatexOrHTML().\n * @property {number} taille Taille du codage de l'angle droit\n * @property {string} couleurDeRemplissage 'none' si on ne veut pas de remplissage. À associer obligatoirement à colorToLatexOrHTML().\n * @property {number} opaciteDeRemplissage Taux d'opacité du remplissage entre 0 et 1\n * @class\n */\n// JSDOC Validee par EE Juin 2022\n\nconst longueur = (A: IPointAbstrait, B: IPointAbstrait) =>\n  Math.sqrt((B.x - A.x) ** 2 + (B.y - A.y) ** 2)\nexport class CodageAngleDroit extends ObjetMathalea2D {\n  sommet: IPointAbstrait\n  depart: IPointAbstrait\n  arrivee: IPointAbstrait\n  taille: number\n  color: [string, string]\n  couleurDeRemplissage: [string, string]\n  opaciteDeRemplissage: number\n\n  constructor(\n    A: IPointAbstrait,\n    O: IPointAbstrait,\n    B: IPointAbstrait,\n    color = 'black',\n    d = 0.4,\n    epaisseur = 0.5,\n    opacite = 1,\n    couleurDeRemplissage = 'none',\n    opaciteDeRemplissage = 1,\n  ) {\n    super()\n    this.sommet = O\n    this.depart = A\n    this.arrivee = B\n    this.taille = d\n    this.color = colorToLatexOrHTML(color)\n    this.couleurDeRemplissage = colorToLatexOrHTML(couleurDeRemplissage)\n    this.opaciteDeRemplissage = opaciteDeRemplissage\n    let bordures: { xmin: number; xmax: number; ymin: number; ymax: number }\n    if (longueur(O, A) < 1e-8 || longueur(O, B) < 1e-8) {\n      window.notify(\n        \"Création d'un codage d'angle droit avec un côté de longueur nulle, le codage peut être erroné\",\n        { A, O, B },\n      )\n      this.sommet = O\n      this.depart = O\n      this.arrivee = O\n      bordures = { xmin: O.x, xmax: O.x, ymin: O.y, ymax: O.y }\n    } else {\n      const a = pointSurSegment(\n        this.sommet,\n        this.depart,\n        (this.taille * 20) / context.pixelsParCm,\n      )\n      const b = pointSurSegment(\n        this.sommet,\n        this.arrivee,\n        (this.taille * 20) / context.pixelsParCm,\n      )\n      let o\n      if (angleOriente(this.depart, this.sommet, this.arrivee) > 0) {\n        o = rotation(this.sommet, a, -90)\n      } else {\n        o = rotation(this.sommet, a, 90)\n      }\n      bordures = fixeBordures([a, b, o], {\n        rxmin: 0,\n        rxmax: 0,\n        rymin: 0,\n        rymax: 0,\n      })\n    }\n\n    this.bordures = [bordures.xmin, bordures.ymin, bordures.xmax, bordures.ymax]\n    this.epaisseur = epaisseur\n    this.opacite = opacite\n  }\n\n  svg(coeff: number) {\n    if (\n      longueur(this.sommet, this.depart) < 1e-8 ||\n      longueur(this.sommet, this.arrivee) < 1e-8\n    ) {\n      return ''\n    }\n    const a = pointSurSegment(\n      this.sommet,\n      this.depart,\n      (this.taille * 20) / coeff,\n    )\n    const b = pointSurSegment(\n      this.sommet,\n      this.arrivee,\n      (this.taille * 20) / coeff,\n    )\n    let o: PointAbstrait\n    if (angleOriente(this.depart, this.sommet, this.arrivee) > 0) {\n      o = rotation(this.sommet, a, -90)\n    } else {\n      o = rotation(this.sommet, a, 90)\n    }\n    const result = polygone([this.sommet, a, o, b], this.color[0])\n    if (this.couleurDeRemplissage[0] !== 'none') {\n      result.couleurDeRemplissage = [\n        this.couleurDeRemplissage[0],\n        this.couleurDeRemplissage[1],\n      ]\n      result.opaciteDeRemplissage = this.opaciteDeRemplissage\n    }\n    result.epaisseur = this.epaisseur\n    result.opacite = this.opacite\n    this.id = result.id\n    return result.svg(coeff)\n  }\n\n  tikz() {\n    if (\n      longueur(this.sommet, this.depart) < 1e-8 ||\n      longueur(this.sommet, this.arrivee) < 1e-8\n    ) {\n      return ''\n    }\n    const a = pointSurSegment(\n      this.sommet,\n      this.depart,\n      this.taille / context.scale,\n    )\n    const b = pointSurSegment(\n      this.sommet,\n      this.arrivee,\n      this.taille / context.scale,\n    )\n    let o: PointAbstrait\n    if (angleOriente(this.depart, this.sommet, this.arrivee) > 0) {\n      o = rotation(this.sommet, a, -90)\n    } else {\n      o = rotation(this.sommet, a, 90)\n    }\n    const result = polygone([this.sommet, a, o, b], this.color[1])\n    if (this.couleurDeRemplissage[1] === '') {\n      result.couleurDeRemplissage = [\n        this.couleurDeRemplissage[0],\n        this.couleurDeRemplissage[1],\n      ]\n      result.opaciteDeRemplissage = this.opaciteDeRemplissage\n      result.epaisseur = this.epaisseur\n      result.opacite = this.opacite\n    }\n    return result.tikz()\n  }\n\n  svgml(coeff: number, amp: number) {\n    const a = pointSurSegment(\n      this.sommet,\n      this.depart,\n      (this.taille * 20) / coeff,\n    )\n    const b = pointSurSegment(\n      this.sommet,\n      this.arrivee,\n      (this.taille * 20) / coeff,\n    )\n    let o: PointAbstrait\n    if (angleOriente(this.depart, this.sommet, this.arrivee) > 0) {\n      o = rotation(this.sommet, a, -90)\n    } else {\n      o = rotation(this.sommet, a, 90)\n    }\n    return polyline([a, o, b], this.color[0]).svgml(coeff, amp)\n  }\n\n  tikzml(amp: number) {\n    const a = pointSurSegment(\n      this.sommet,\n      this.depart,\n      this.taille / context.scale,\n    )\n    const b = pointSurSegment(\n      this.sommet,\n      this.arrivee,\n      this.taille / context.scale,\n    )\n    let o: PointAbstrait\n    if (angleOriente(this.depart, this.sommet, this.arrivee) > 0) {\n      o = rotation(this.sommet, a, -90)\n    } else {\n      o = rotation(this.sommet, a, 90)\n    }\n    return polyline([a, o, b], this.color[1]).tikzml(amp)\n  }\n}\n/**\n * Code un angle droit\n * @param {PointAbstrait} A Point sur un côté de l'angle droit\n * @param {PointAbstrait} O Sommet de l'angle droit\n * @param {PointAbstrait} B Point sur l'autre côté de l'angle droit\n * @param {string} [color='black'] Couleur du codage : du type 'blue' ou du type '#f15929'\n * @param {number} [d=0.4] Taille du codage de l'angle droit\n * @param {number} [epaisseur=0.5] Epaisseur du trait\n * @param {number} [opacite=1] Opacité du trait\n * @param {string} [couleurDeRemplissage='none'] 'none' si on ne veut pas de remplissage, sinon une couleur du type 'blue' ou du type '#f15929'\n * @param {number} [opaciteDeRemplissage=1] Taux d'opacité du remplissage\n * @example codageAngleDroit(A,J,T)\n * // Trace un codage d'angle droit pour l'angle direct AJT, de couleur noire, de taille 0,4, d'épaisseur 0,5 avec une opacité de 100 %, sans remplissage\n * @example codageAngleDroit(A,J,T,'pink',1,0.2,0.6,'blue',0.2)\n * // Trace un codage d'angle droit pour l'angle direct AJT, de couleur rose, de taille 1, d'épaisseur 0,2 avec une opacité de 60 %, rempli en bleu avec une opacité de 20%.\n * @return {CodageAngleDroit}\n * @author Rémi Angot\n */\n// JSDOC Validee par EE Juin 2022\n\nexport function codageAngleDroit(\n  A: IPointAbstrait,\n  O: IPointAbstrait,\n  B: IPointAbstrait,\n  color = 'black',\n  d = 0.4,\n  epaisseur = 0.5,\n  opacite = 1,\n  couleurDeRemplissage = 'none',\n  opaciteDeRemplissage = 1,\n) {\n  return new CodageAngleDroit(\n    A,\n    O,\n    B,\n    color,\n    d,\n    epaisseur,\n    opacite,\n    couleurDeRemplissage,\n    opaciteDeRemplissage,\n  )\n}\n"],"names":["longueur","A","B","CodageAngleDroit","ObjetMathalea2D","O","color","d","epaisseur","opacite","couleurDeRemplissage","opaciteDeRemplissage","__publicField","colorToLatexOrHTML","bordures","a","pointSurSegment","context","b","o","angleOriente","rotation","fixeBordures","coeff","result","polygone","amp","polyline","codageAngleDroit"],"mappings":"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"}