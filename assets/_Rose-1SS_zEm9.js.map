{"version":3,"file":"_Rose-1SS_zEm9.js","sources":["../../src/exercices/6e/_Rose.ts"],"sourcesContent":["import { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { polygoneRegulierParCentreEtRayon } from '../../lib/2d/polygonesParticuliers'\nimport { Segment, segment } from '../../lib/2d/segmentsVecteurs'\nimport {\n  latexParCoordonnees,\n  latexParCoordonneesBox,\n  texteParPoint,\n} from '../../lib/2d/textes'\nimport { homothetie, rotation, similitude } from '../../lib/2d/transformations'\nimport { longueur } from '../../lib/2d/utilitairesGeometriques'\nimport { vide2d } from '../../lib/2d/Vide2d'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { lettreMinusculeDepuisChiffre } from '../../lib/outils/outilString'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport { randint } from '../../modules/outils'\nimport { calculer } from '../../modules/outilsMathjs'\n\ntype ValueType = number | FractionEtendue | string\n/**\n * Classe Rose\n * @author Jean-Claude Lhote\n */\nexport class Rose {\n  type: string\n  operation: string\n  typeDonnees: string\n  nombreDeValeurs: number\n  cellulesPreremplies: ValueType[]\n  rayon: number\n  resultats: any[]\n  valeurMax: number\n  indexInconnue: number\n  values: ValueType[]\n  rayonBoite?: number\n\n  constructor({\n    values = [],\n    nombreDeValeurs = 3,\n    rayon = 2,\n    operation = 'addition',\n    type = 'résultats',\n    typeDonnees = 'entiers',\n    cellulesPreremplies = Array.from('abcdefghi'),\n    valeurMax = 10,\n    indexInconnue = 999,\n  }: {\n    values?: ValueType[]\n    nombreDeValeurs?: number\n    rayon?: number\n    operation?: string\n    type?: string\n    typeDonnees?: string\n    cellulesPreremplies?: string[]\n    valeurMax?: number\n    indexInconnue?: number\n  }) {\n    this.type = type\n    this.operation = operation\n    this.typeDonnees = typeDonnees\n    this.nombreDeValeurs = nombreDeValeurs\n    this.cellulesPreremplies = cellulesPreremplies\n    this.rayon = rayon\n    this.resultats = []\n    this.valeurMax = valeurMax\n    this.indexInconnue = indexInconnue\n\n    if (values === undefined || values.length === 0) {\n      values = []\n      while (this.valeurMax - 2 < this.nombreDeValeurs) {\n        this.valeurMax++\n      }\n      const den = randint(2, this.valeurMax)\n      for (let i = 0; i < this.nombreDeValeurs; i++) {\n        switch (this.typeDonnees) {\n          case 'entiers':\n            values.push(randint(2, this.valeurMax, values.map(Number)))\n            this.rayon = 2\n            break\n          case 'entiers relatifs':\n            values.push(\n              randint(-this.valeurMax, this.valeurMax, [\n                0,\n                1,\n                ...values.map(Number),\n              ]),\n            )\n            this.rayon = 2\n            break\n          case 'litteraux':\n            {\n              const value = calculer(\n                `${randint(1, this.valeurMax)}x + ${randint(1, this.valeurMax)}`,\n                {},\n              ).printResult\n              values.push(value)\n              this.rayon = 3\n            }\n            break\n          case 'fractions dénominateurs multiples':\n            values.push(\n              new FractionEtendue(randint(1, this.valeurMax), den).simplifie(),\n            )\n            this.rayon = 2.5\n            break\n          case 'fractions positives dénominateurs premiers':\n            values.push(\n              new FractionEtendue(\n                randint(1, this.valeurMax),\n                choice([2, 3, 5, 7]),\n              ).simplifie(),\n            )\n            this.rayon = 2.5\n            break\n\n          case 'fractions positives':\n            values.push(\n              new FractionEtendue(\n                randint(1, this.valeurMax),\n                randint(2, this.valeurMax),\n              ).simplifie(),\n            )\n            this.rayon = 2.5\n            break\n          case 'fractions relatives':\n            values.push(\n              new FractionEtendue(\n                randint(-this.valeurMax, this.valeurMax, 0),\n                randint(2, this.valeurMax),\n              ).simplifie(),\n            )\n            this.rayon = 2.5\n            break\n        }\n      }\n    } else {\n      // si elles sont définies, on complète éventuellement la grille aléatoirement.\n      for (let i = values.length; i < this.nombreDeValeurs; i++) {\n        switch (this.typeDonnees) {\n          case 'entiers':\n            values.push(randint(2, this.valeurMax, values.map(Number)))\n            break\n          case 'entiers relatifs':\n            values.push(\n              randint(-this.valeurMax, this.valeurMax, [\n                0,\n                1,\n                ...values.map(Number),\n              ]),\n            )\n            break\n          case 'litteraux':\n            {\n              const value = calculer(\n                `${randint(1, this.valeurMax)}x + ${randint(1, this.valeurMax)}`,\n                {},\n              ).printResult\n              values.push(value)\n            }\n            break\n          case 'fractions dénominateurs multiples':\n            values.push(\n              new FractionEtendue(\n                randint(1, this.valeurMax),\n                (values[i - 1] as FractionEtendue).d,\n              ).simplifie(),\n            )\n            break\n          case 'fractions positives dénominateurs premiers':\n            values.push(\n              new FractionEtendue(\n                randint(1, this.valeurMax),\n                choice([2, 3, 5, 7]),\n              ).simplifie(),\n            )\n            break\n          case 'fractions positives':\n            values.push(\n              new FractionEtendue(\n                randint(1, this.valeurMax),\n                randint(2, this.valeurMax),\n              ).simplifie(),\n            )\n            break\n          case 'fractions relatives':\n            values.push(\n              new FractionEtendue(\n                randint(-this.valeurMax, this.valeurMax, 0),\n                randint(2, this.valeurMax),\n              ).simplifie(),\n            )\n            break\n        }\n      }\n    }\n    this.values = values\n    this.calculeResultats()\n  }\n\n  // méthode qui calcule les résultats si on le veut (sinon on peut les renseigner dans this.resultats manuellement)\n  calculeResultats() {\n    for (let i = 0; i < this.nombreDeValeurs; i++) {\n      const valeur =\n        this.values[i] instanceof FractionEtendue\n          ? (this.values[i] as FractionEtendue).texFraction.replace(\n              'dfrac',\n              'frac',\n            )\n          : typeof this.values[i] === 'number'\n            ? String(this.values[i])\n            : String(this.values[i])\n      const valeur2 =\n        this.values[(i + 1) % this.nombreDeValeurs] instanceof FractionEtendue\n          ? (\n              this.values[(i + 1) % this.nombreDeValeurs] as FractionEtendue\n            ).texFraction.replace('dfrac', 'frac')\n          : typeof this.values[(i + 1) % this.nombreDeValeurs] === 'number'\n            ? String(this.values[(i + 1) % this.nombreDeValeurs])\n            : String(this.values[(i + 1) % this.nombreDeValeurs])\n\n      this.resultats[i] = this.operate(valeur, valeur2)\n    }\n  }\n\n  // fonction utilisée par calculeResultats On lui passe des strings pour unifier, elle retourne un string\n  operate(a: string, b: string): string {\n    switch (this.operation) {\n      case 'addition':\n        if (this.typeDonnees !== 'litteraux') {\n          if (this.typeDonnees.substring(0, 4) === 'frac') {\n            const numDenA = a.match(/\\{(\\d+)\\}\\{(\\d+)\\}/)\n            let numA: number\n            let denA: number\n            if (numDenA) {\n              numA = Number(numDenA[1])\n              denA = Number(numDenA[2])\n            } else {\n              numA = Number(a)\n              denA = 1\n            }\n            const numDenB = b.match(/\\{(\\d+)\\}\\{(\\d+)\\}/)\n            let numB: number\n            let denB: number\n            if (numDenB) {\n              numB = Number(numDenB[1])\n              denB = Number(numDenB[2])\n            } else {\n              numB = Number(b)\n              denB = 1\n            }\n            const aFrac = new FractionEtendue(numA, denA)\n            const bFrac = new FractionEtendue(numB, denB)\n            return aFrac.sommeFraction(bFrac).texFraction // math.fraction(math.add(a, b))\n          } else {\n            const aNumber = Number(a.replace(',', '.').replace('{.}', '.'))\n            const bNumber = Number(b.replace(',', '.').replace('{.}', '.'))\n            return String(aNumber + bNumber)\n          }\n        } else {\n          return calculer(\n            `${String(a).replace('\\\\times', '*')}+${String(b).replace('\\\\times', '*')}`,\n            {},\n          ).printResult\n        }\n      case 'multiplication':\n      default:\n        if (this.typeDonnees !== 'litteraux') {\n          if (this.typeDonnees.substring(0, 4) === 'frac') {\n            const numDenA = a.match(/\\{(\\d+)\\}\\{(\\d+)\\}/)\n            let numA: number\n            let denA: number\n            if (numDenA) {\n              numA = Number(numDenA[1])\n              denA = Number(numDenA[2])\n            } else {\n              numA = Number(a)\n              denA = 1\n            }\n            const numDenB = b.match(/\\{(\\d+)\\}\\{(\\d+)\\}/)\n            let numB: number\n            let denB: number\n            if (numDenB) {\n              numB = Number(numDenB[1])\n              denB = Number(numDenB[2])\n            } else {\n              numB = Number(b)\n              denB = 1\n            }\n            const aFrac = new FractionEtendue(numA, denA)\n            const bFrac = new FractionEtendue(numB, denB)\n            return aFrac.produitFraction(bFrac).texFraction\n          } else {\n            const aNumber = Number(a.replace(',', '.').replace('{.}', '.'))\n            const bNumber = Number(b.replace(',', '.').replace('{.}', '.'))\n            return String(aNumber * bNumber)\n          }\n        } else {\n          return calculer(\n            `(${String(a).replace('\\\\times', '*')}) * (${String(b).replace('\\\\times', '*')})`,\n            {},\n          ).printResult\n        }\n    }\n  }\n\n  representation() {\n    if (this.type === 'résultats') {\n      this.rayonBoite = 1\n    } else {\n      if (this.typeDonnees.substring(0, 4) === 'frac') this.rayonBoite = 1.5\n      else if (this.typeDonnees === 'litteraux') {\n        if (this.operation === 'multiplication') this.rayonBoite = 3.2\n        else this.rayonBoite = 2.5\n      } else this.rayonBoite = 1\n    }\n    const objets = []\n    const O = point(0, 0, '', '')\n    const A = rotation(\n      point(this.rayon, 0, '', ''),\n      O,\n      180 / this.nombreDeValeurs - 90,\n      'A',\n    )\n    for (let i = 0, bulle1, bulle2; i < this.nombreDeValeurs; i++) {\n      const M = rotation(A, O, (360 * i) / this.nombreDeValeurs, 'M')\n      M.positionLabel = 'center'\n      const B = similitude(M, O, 180 / this.nombreDeValeurs, 1.2, 'B')\n      const D = similitude(M, O, -180 / this.nombreDeValeurs, 1.2, 'D')\n      const C = homothetie(M, O, 1.5, 'C')\n      const N = rotation(C, O, 360 / this.nombreDeValeurs, 'N')\n      const P = similitude(M, O, 180 / this.nombreDeValeurs, 2.5, 'P')\n      const s = segment(O, B, 'black')\n      const t = segment(B, C, 'black')\n      const u = segment(C, D, 'black')\n      const M2 = homothetie(C, O, 0.6) // pointIntersectionDD(droite(B, D), droite(O, C), 'M2')\n      const s1 = homothetie(\n        segment(C, P),\n        C,\n        (longueur(C, P) - this.rayonBoite) / longueur(C, P),\n      ) as Segment\n      s1.styleExtremites = '->'\n      s1.tailleExtremites = 5\n      s1.pointilles = 2\n      const s2 = homothetie(\n        segment(N, P),\n        N,\n        (longueur(N, P) - this.rayonBoite) / longueur(N, P),\n      ) as Segment\n      s2.styleExtremites = '->'\n      s2.tailleExtremites = 5\n      s2.pointilles = 2\n      if (this.type === 'can1') {\n        bulle1 = vide2d() // rotation(boite({??????}), M, 180 / this.nombreDeValeurs - 90)\n      } else {\n        bulle1 = vide2d()\n      }\n      objets.push(bulle1)\n      objets.push(s, t, u, s1, s2)\n      bulle2 = rotation(\n        polygoneRegulierParCentreEtRayon(\n          P,\n          this.rayonBoite,\n          this.nombreDeValeurs,\n        ),\n        P,\n        360 / this.nombreDeValeurs - 90,\n      )\n      if (\n        this.type === 'résultats' ||\n        this.type === 'solutions' ||\n        this.type === 'can1' ||\n        this.type === 'can2'\n      ) {\n        if (\n          !(\n            this.type === 'can1' &&\n            (this.indexInconnue === i ||\n              i === (this.indexInconnue - 1) % this.nombreDeValeurs ||\n              i === (this.indexInconnue + 1) % this.nombreDeValeurs)\n          )\n        ) {\n          if (\n            !(\n              this.type === 'can2' &&\n              (this.indexInconnue === i ||\n                i === (this.indexInconnue + 1) % this.nombreDeValeurs)\n            )\n          ) {\n            if (\n              this.typeDonnees !== 'litteraux' &&\n              this.typeDonnees.substring(0, 4) !== 'frac'\n            ) {\n              objets.push(\n                texteParPoint(\n                  String(this.values[i]),\n                  M,\n                  0,\n                  'black',\n                  1,\n                  'milieu',\n                  true,\n                ),\n              )\n            } else {\n              if (this.typeDonnees !== 'litteraux') {\n                if (this.values[i] instanceof FractionEtendue) {\n                  objets.push(\n                    latexParCoordonnees(\n                      (this.values[i] as FractionEtendue).texFSD,\n                      M.x,\n                      M.y,\n                      'black',\n                      0,\n                      0,\n                      'none',\n                      8,\n                    ),\n                  )\n                } else {\n                  objets.push(\n                    texteParPoint(\n                      String(this.values[i]),\n                      M,\n                      0,\n                      'black',\n                      1,\n                      'milieu',\n                      true,\n                    ),\n                  )\n                }\n              } else {\n                objets.push(\n                  latexParCoordonneesBox(\n                    String(this.values[i]),\n                    M2.x,\n                    M2.y,\n                    'black',\n                    50,\n                    12,\n                    'none',\n                    8,\n                    { anchor: 'center' },\n                  ),\n                )\n              }\n            }\n          }\n        }\n        if (this.type === 'can1' && this.indexInconnue === i) {\n          objets.push(texteParPoint(lettreMinusculeDepuisChiffre(i + 1), M))\n        }\n      }\n      if (\n        this.type === 'solutions' ||\n        this.type === 'valeurs' ||\n        this.type === 'can1' ||\n        this.type === 'can2'\n      ) {\n        // on ajoute les produits\n        if (!(this.type === 'can2' && this.indexInconnue === i)) {\n          if (\n            this.typeDonnees !== 'litteraux' &&\n            this.typeDonnees.substring(0, 4) !== 'frac'\n          ) {\n            objets.push(\n              texteParPoint(\n                this.resultats[i],\n                P,\n                0,\n                'black',\n                1,\n                'milieu',\n                true,\n              ),\n            )\n          } else {\n            if (this.resultats[i] instanceof FractionEtendue) {\n              objets.push(\n                latexParCoordonnees(\n                  this.resultats[i].texFSD,\n                  P.x,\n                  P.y,\n                  'black',\n                  0,\n                  0,\n                  'none',\n                  8,\n                ),\n              )\n            } else {\n              objets.push(\n                latexParCoordonnees(\n                  String(this.resultats[i]),\n                  P.x,\n                  P.y,\n                  'black',\n                  0,\n                  0,\n                  'none',\n                  8,\n                ),\n              )\n            }\n          }\n        }\n        if (this.type === 'can2' && this.indexInconnue === i) {\n          objets.push(texteParPoint(lettreMinusculeDepuisChiffre(i + 1), P))\n        } else {\n          bulle2.color = colorToLatexOrHTML('black')\n          if (this.type === 'valeurs') {\n            objets.push(texteParPoint(lettreMinusculeDepuisChiffre(i + 1), M))\n          }\n        }\n      } else {\n        if (this.cellulesPreremplies[i] instanceof FractionEtendue) {\n          objets.push(\n            texteParPoint(\n              (this.cellulesPreremplies[i] as FractionEtendue).texFSD,\n              P,\n              0,\n              'black',\n              1,\n              'milieu',\n              true,\n            ),\n          )\n        } else {\n          objets.push(\n            texteParPoint(\n              String(this.cellulesPreremplies[i]),\n              P,\n              0,\n              'black',\n              1,\n              'milieu',\n              true,\n            ),\n          )\n        }\n      }\n\n      objets.push(bulle2)\n    }\n    return objets\n  }\n}\n"],"names":["Rose","values","nombreDeValeurs","rayon","operation","type","typeDonnees","cellulesPreremplies","valeurMax","indexInconnue","__publicField","den","randint","i","value","calculer","FractionEtendue","choice","valeur","valeur2","a","b","numDenA","numA","denA","numDenB","numB","denB","aFrac","bFrac","aNumber","bNumber","objets","O","point","A","rotation","bulle1","bulle2","M","B","similitude","D","C","homothetie","N","P","s","segment","t","u","M2","s1","longueur","s2","vide2d","polygoneRegulierParCentreEtRayon","texteParPoint","latexParCoordonnees","latexParCoordonneesBox","lettreMinusculeDepuisChiffre","colorToLatexOrHTML"],"mappings":"ghHAuBO,MAAMA,EAAK,CAahB,YAAY,CACV,OAAAC,EAAS,CAAA,EACT,gBAAAC,EAAkB,EAClB,MAAAC,EAAQ,EACR,UAAAC,EAAY,WACZ,KAAAC,EAAO,YACP,YAAAC,EAAc,UACd,oBAAAC,EAAsB,MAAM,KAAK,WAAW,EAC5C,UAAAC,EAAY,GACZ,cAAAC,EAAgB,GAAA,EAWf,CAhCHC,EAAA,aACAA,EAAA,kBACAA,EAAA,oBACAA,EAAA,wBACAA,EAAA,4BACAA,EAAA,cACAA,EAAA,kBACAA,EAAA,kBACAA,EAAA,sBACAA,EAAA,eACAA,EAAA,mBAiCE,GAVA,KAAK,KAAOL,EACZ,KAAK,UAAYD,EACjB,KAAK,YAAcE,EACnB,KAAK,gBAAkBJ,EACvB,KAAK,oBAAsBK,EAC3B,KAAK,MAAQJ,EACb,KAAK,UAAY,CAAA,EACjB,KAAK,UAAYK,EACjB,KAAK,cAAgBC,EAEjBR,IAAW,QAAaA,EAAO,SAAW,EAAG,CAE/C,IADAA,EAAS,CAAA,EACF,KAAK,UAAY,EAAI,KAAK,iBAC/B,KAAK,YAEP,MAAMU,EAAMC,EAAQ,EAAG,KAAK,SAAS,EACrC,QAASC,EAAI,EAAGA,EAAI,KAAK,gBAAiBA,IACxC,OAAQ,KAAK,YAAA,CACX,IAAK,UACHZ,EAAO,KAAKW,EAAQ,EAAG,KAAK,UAAWX,EAAO,IAAI,MAAM,CAAC,CAAC,EAC1D,KAAK,MAAQ,EACb,MACF,IAAK,mBACHA,EAAO,KACLW,EAAQ,CAAC,KAAK,UAAW,KAAK,UAAW,CACvC,EACA,EACA,GAAGX,EAAO,IAAI,MAAM,CAAA,CACrB,CAAA,EAEH,KAAK,MAAQ,EACb,MACF,IAAK,YACH,CACE,MAAMa,EAAQC,EACZ,GAAGH,EAAQ,EAAG,KAAK,SAAS,CAAC,OAAOA,EAAQ,EAAG,KAAK,SAAS,CAAC,GAC9D,CAAA,CAAC,EACD,YACFX,EAAO,KAAKa,CAAK,EACjB,KAAK,MAAQ,CACf,CACA,MACF,IAAK,oCACHb,EAAO,KACL,IAAIe,EAAgBJ,EAAQ,EAAG,KAAK,SAAS,EAAGD,CAAG,EAAE,UAAA,CAAU,EAEjE,KAAK,MAAQ,IACb,MACF,IAAK,6CACHV,EAAO,KACL,IAAIe,EACFJ,EAAQ,EAAG,KAAK,SAAS,EACzBK,EAAO,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,CAAA,EACnB,UAAA,CAAU,EAEd,KAAK,MAAQ,IACb,MAEF,IAAK,sBACHhB,EAAO,KACL,IAAIe,EACFJ,EAAQ,EAAG,KAAK,SAAS,EACzBA,EAAQ,EAAG,KAAK,SAAS,CAAA,EACzB,UAAA,CAAU,EAEd,KAAK,MAAQ,IACb,MACF,IAAK,sBACHX,EAAO,KACL,IAAIe,EACFJ,EAAQ,CAAC,KAAK,UAAW,KAAK,UAAW,CAAC,EAC1CA,EAAQ,EAAG,KAAK,SAAS,CAAA,EACzB,UAAA,CAAU,EAEd,KAAK,MAAQ,IACb,KAAA,CAGR,KAEE,SAASC,EAAIZ,EAAO,OAAQY,EAAI,KAAK,gBAAiBA,IACpD,OAAQ,KAAK,YAAA,CACX,IAAK,UACHZ,EAAO,KAAKW,EAAQ,EAAG,KAAK,UAAWX,EAAO,IAAI,MAAM,CAAC,CAAC,EAC1D,MACF,IAAK,mBACHA,EAAO,KACLW,EAAQ,CAAC,KAAK,UAAW,KAAK,UAAW,CACvC,EACA,EACA,GAAGX,EAAO,IAAI,MAAM,CAAA,CACrB,CAAA,EAEH,MACF,IAAK,YACH,CACE,MAAMa,EAAQC,EACZ,GAAGH,EAAQ,EAAG,KAAK,SAAS,CAAC,OAAOA,EAAQ,EAAG,KAAK,SAAS,CAAC,GAC9D,CAAA,CAAC,EACD,YACFX,EAAO,KAAKa,CAAK,CACnB,CACA,MACF,IAAK,oCACHb,EAAO,KACL,IAAIe,EACFJ,EAAQ,EAAG,KAAK,SAAS,EACxBX,EAAOY,EAAI,CAAC,EAAsB,CAAA,EACnC,UAAA,CAAU,EAEd,MACF,IAAK,6CACHZ,EAAO,KACL,IAAIe,EACFJ,EAAQ,EAAG,KAAK,SAAS,EACzBK,EAAO,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,CAAA,EACnB,UAAA,CAAU,EAEd,MACF,IAAK,sBACHhB,EAAO,KACL,IAAIe,EACFJ,EAAQ,EAAG,KAAK,SAAS,EACzBA,EAAQ,EAAG,KAAK,SAAS,CAAA,EACzB,UAAA,CAAU,EAEd,MACF,IAAK,sBACHX,EAAO,KACL,IAAIe,EACFJ,EAAQ,CAAC,KAAK,UAAW,KAAK,UAAW,CAAC,EAC1CA,EAAQ,EAAG,KAAK,SAAS,CAAA,EACzB,UAAA,CAAU,EAEd,KAAA,CAIR,KAAK,OAASX,EACd,KAAK,iBAAA,CACP,CAGA,kBAAmB,CACjB,QAASY,EAAI,EAAGA,EAAI,KAAK,gBAAiBA,IAAK,CAC7C,MAAMK,EACJ,KAAK,OAAOL,CAAC,YAAaG,EACrB,KAAK,OAAOH,CAAC,EAAsB,YAAY,QAC9C,QACA,MAAA,EAEF,OAAO,KAAK,OAAOA,CAAC,GAAM,SACxB,OAAO,KAAK,OAAOA,CAAC,CAAC,EACrB,OAAO,KAAK,OAAOA,CAAC,CAAC,EACvBM,EACJ,KAAK,QAAQN,EAAI,GAAK,KAAK,eAAe,YAAaG,EAEjD,KAAK,QAAQH,EAAI,GAAK,KAAK,eAAe,EAC1C,YAAY,QAAQ,QAAS,MAAM,EACrC,OAAO,KAAK,QAAQA,EAAI,GAAK,KAAK,eAAe,GAAM,SACrD,OAAO,KAAK,QAAQA,EAAI,GAAK,KAAK,eAAe,CAAC,EAClD,OAAO,KAAK,QAAQA,EAAI,GAAK,KAAK,eAAe,CAAC,EAE1D,KAAK,UAAUA,CAAC,EAAI,KAAK,QAAQK,EAAQC,CAAO,CAClD,CACF,CAGA,QAAQC,EAAWC,EAAmB,CACpC,OAAQ,KAAK,UAAA,CACX,IAAK,WACH,GAAI,KAAK,cAAgB,YACvB,GAAI,KAAK,YAAY,UAAU,EAAG,CAAC,IAAM,OAAQ,CAC/C,MAAMC,EAAUF,EAAE,MAAM,oBAAoB,EAC5C,IAAIG,EACAC,EACAF,GACFC,EAAO,OAAOD,EAAQ,CAAC,CAAC,EACxBE,EAAO,OAAOF,EAAQ,CAAC,CAAC,IAExBC,EAAO,OAAOH,CAAC,EACfI,EAAO,GAET,MAAMC,EAAUJ,EAAE,MAAM,oBAAoB,EAC5C,IAAIK,EACAC,EACAF,GACFC,EAAO,OAAOD,EAAQ,CAAC,CAAC,EACxBE,EAAO,OAAOF,EAAQ,CAAC,CAAC,IAExBC,EAAO,OAAOL,CAAC,EACfM,EAAO,GAET,MAAMC,EAAQ,IAAIZ,EAAgBO,EAAMC,CAAI,EACtCK,EAAQ,IAAIb,EAAgBU,EAAMC,CAAI,EAC5C,OAAOC,EAAM,cAAcC,CAAK,EAAE,WACpC,KAAO,CACL,MAAMC,EAAU,OAAOV,EAAE,QAAQ,IAAK,GAAG,EAAE,QAAQ,MAAO,GAAG,CAAC,EACxDW,EAAU,OAAOV,EAAE,QAAQ,IAAK,GAAG,EAAE,QAAQ,MAAO,GAAG,CAAC,EAC9D,OAAO,OAAOS,EAAUC,CAAO,CACjC,KAEA,QAAOhB,EACL,GAAG,OAAOK,CAAC,EAAE,QAAQ,UAAW,GAAG,CAAC,IAAI,OAAOC,CAAC,EAAE,QAAQ,UAAW,GAAG,CAAC,GACzE,CAAA,CAAC,EACD,YAGN,QACE,GAAI,KAAK,cAAgB,YACvB,GAAI,KAAK,YAAY,UAAU,EAAG,CAAC,IAAM,OAAQ,CAC/C,MAAMC,EAAUF,EAAE,MAAM,oBAAoB,EAC5C,IAAIG,EACAC,EACAF,GACFC,EAAO,OAAOD,EAAQ,CAAC,CAAC,EACxBE,EAAO,OAAOF,EAAQ,CAAC,CAAC,IAExBC,EAAO,OAAOH,CAAC,EACfI,EAAO,GAET,MAAMC,EAAUJ,EAAE,MAAM,oBAAoB,EAC5C,IAAIK,EACAC,EACAF,GACFC,EAAO,OAAOD,EAAQ,CAAC,CAAC,EACxBE,EAAO,OAAOF,EAAQ,CAAC,CAAC,IAExBC,EAAO,OAAOL,CAAC,EACfM,EAAO,GAET,MAAMC,EAAQ,IAAIZ,EAAgBO,EAAMC,CAAI,EACtCK,EAAQ,IAAIb,EAAgBU,EAAMC,CAAI,EAC5C,OAAOC,EAAM,gBAAgBC,CAAK,EAAE,WACtC,KAAO,CACL,MAAMC,EAAU,OAAOV,EAAE,QAAQ,IAAK,GAAG,EAAE,QAAQ,MAAO,GAAG,CAAC,EACxDW,EAAU,OAAOV,EAAE,QAAQ,IAAK,GAAG,EAAE,QAAQ,MAAO,GAAG,CAAC,EAC9D,OAAO,OAAOS,EAAUC,CAAO,CACjC,KAEA,QAAOhB,EACL,IAAI,OAAOK,CAAC,EAAE,QAAQ,UAAW,GAAG,CAAC,QAAQ,OAAOC,CAAC,EAAE,QAAQ,UAAW,GAAG,CAAC,IAC9E,CAAA,CAAC,EACD,WACJ,CAEN,CAEA,gBAAiB,CACX,KAAK,OAAS,YAChB,KAAK,WAAa,EAEd,KAAK,YAAY,UAAU,EAAG,CAAC,IAAM,YAAa,WAAa,IAC1D,KAAK,cAAgB,YACxB,KAAK,YAAc,iBAAkB,KAAK,WAAa,SACjD,WAAa,SACb,WAAa,EAE3B,MAAMW,EAAS,CAAA,EACTC,EAAIC,EAAM,EAAG,EAAG,GAAI,EAAE,EACtBC,EAAIC,EACRF,EAAM,KAAK,MAAO,EAAG,GAAI,EAAE,EAC3BD,EACA,IAAM,KAAK,gBAAkB,GAC7B,GAAA,EAEF,QAASpB,EAAI,EAAGwB,EAAQC,EAAQzB,EAAI,KAAK,gBAAiBA,IAAK,CAC7D,MAAM0B,EAAIH,EAASD,EAAGF,EAAI,IAAMpB,EAAK,KAAK,gBAAiB,GAAG,EAC9D0B,EAAE,cAAgB,SAClB,MAAMC,EAAIC,EAAWF,EAAGN,EAAG,IAAM,KAAK,gBAAiB,IAAK,GAAG,EACzDS,EAAID,EAAWF,EAAGN,EAAG,KAAO,KAAK,gBAAiB,IAAK,GAAG,EAC1DU,EAAIC,EAAWL,EAAGN,EAAG,IAAK,GAAG,EAC7BY,EAAIT,EAASO,EAAGV,EAAG,IAAM,KAAK,gBAAiB,GAAG,EAClDa,EAAIL,EAAWF,EAAGN,EAAG,IAAM,KAAK,gBAAiB,IAAK,GAAG,EACzDc,EAAIC,EAAQf,EAAGO,EAAG,OAAO,EACzBS,EAAID,EAAQR,EAAGG,EAAG,OAAO,EACzBO,EAAIF,EAAQL,EAAGD,EAAG,OAAO,EACzBS,EAAKP,EAAWD,EAAGV,EAAG,EAAG,EACzBmB,EAAKR,EACTI,EAAQL,EAAGG,CAAC,EACZH,GACCU,EAASV,EAAGG,CAAC,EAAI,KAAK,YAAcO,EAASV,EAAGG,CAAC,CAAA,EAEpDM,EAAG,gBAAkB,KACrBA,EAAG,iBAAmB,EACtBA,EAAG,WAAa,EAChB,MAAME,EAAKV,EACTI,EAAQH,EAAGC,CAAC,EACZD,GACCQ,EAASR,EAAGC,CAAC,EAAI,KAAK,YAAcO,EAASR,EAAGC,CAAC,CAAA,EAEpDQ,EAAG,gBAAkB,KACrBA,EAAG,iBAAmB,EACtBA,EAAG,WAAa,EACZ,KAAK,OAAS,OAChBjB,EAASkB,EAAA,EAETlB,EAASkB,EAAA,EAEXvB,EAAO,KAAKK,CAAM,EAClBL,EAAO,KAAKe,EAAGE,EAAGC,EAAGE,EAAIE,CAAE,EAC3BhB,EAASF,EACPoB,EACEV,EACA,KAAK,WACL,KAAK,eAAA,EAEPA,EACA,IAAM,KAAK,gBAAkB,EAAA,GAG7B,KAAK,OAAS,aACd,KAAK,OAAS,aACd,KAAK,OAAS,QACd,KAAK,OAAS,UAIV,KAAK,OAAS,SACb,KAAK,gBAAkBjC,GACtBA,KAAO,KAAK,cAAgB,GAAK,KAAK,iBACtCA,KAAO,KAAK,cAAgB,GAAK,KAAK,kBAKtC,KAAK,OAAS,SACb,KAAK,gBAAkBA,GACtBA,KAAO,KAAK,cAAgB,GAAK,KAAK,mBAIxC,KAAK,cAAgB,aACrB,KAAK,YAAY,UAAU,EAAG,CAAC,IAAM,OAErCmB,EAAO,KACLyB,EACE,OAAO,KAAK,OAAO5C,CAAC,CAAC,EACrB0B,EACA,EACA,QACA,EACA,SACA,EAAA,CACF,EAGE,KAAK,cAAgB,YACnB,KAAK,OAAO1B,CAAC,YAAaG,EAC5BgB,EAAO,KACL0B,EACG,KAAK,OAAO7C,CAAC,EAAsB,OACpC0B,EAAE,EACFA,EAAE,EACF,QACA,EACA,EACA,OACA,CAAA,CACF,EAGFP,EAAO,KACLyB,EACE,OAAO,KAAK,OAAO5C,CAAC,CAAC,EACrB0B,EACA,EACA,QACA,EACA,SACA,EAAA,CACF,EAIJP,EAAO,KACL2B,EACE,OAAO,KAAK,OAAO9C,CAAC,CAAC,EACrBsC,EAAG,EACHA,EAAG,EACH,QACA,GACA,GACA,OACA,EACA,CAAE,OAAQ,QAAA,CAAS,CACrB,GAMN,KAAK,OAAS,QAAU,KAAK,gBAAkBtC,GACjDmB,EAAO,KAAKyB,EAAcG,EAA6B/C,EAAI,CAAC,EAAG0B,CAAC,CAAC,GAInE,KAAK,OAAS,aACd,KAAK,OAAS,WACd,KAAK,OAAS,QACd,KAAK,OAAS,QAGR,KAAK,OAAS,QAAU,KAAK,gBAAkB1B,IAEjD,KAAK,cAAgB,aACrB,KAAK,YAAY,UAAU,EAAG,CAAC,IAAM,OAErCmB,EAAO,KACLyB,EACE,KAAK,UAAU5C,CAAC,EAChBiC,EACA,EACA,QACA,EACA,SACA,EAAA,CACF,EAGE,KAAK,UAAUjC,CAAC,YAAaG,EAC/BgB,EAAO,KACL0B,EACE,KAAK,UAAU7C,CAAC,EAAE,OAClBiC,EAAE,EACFA,EAAE,EACF,QACA,EACA,EACA,OACA,CAAA,CACF,EAGFd,EAAO,KACL0B,EACE,OAAO,KAAK,UAAU7C,CAAC,CAAC,EACxBiC,EAAE,EACFA,EAAE,EACF,QACA,EACA,EACA,OACA,CAAA,CACF,GAKJ,KAAK,OAAS,QAAU,KAAK,gBAAkBjC,EACjDmB,EAAO,KAAKyB,EAAcG,EAA6B/C,EAAI,CAAC,EAAGiC,CAAC,CAAC,GAEjER,EAAO,MAAQuB,EAAmB,OAAO,EACrC,KAAK,OAAS,WAChB7B,EAAO,KAAKyB,EAAcG,EAA6B/C,EAAI,CAAC,EAAG0B,CAAC,CAAC,IAIjE,KAAK,oBAAoB1B,CAAC,YAAaG,EACzCgB,EAAO,KACLyB,EACG,KAAK,oBAAoB5C,CAAC,EAAsB,OACjDiC,EACA,EACA,QACA,EACA,SACA,EAAA,CACF,EAGFd,EAAO,KACLyB,EACE,OAAO,KAAK,oBAAoB5C,CAAC,CAAC,EAClCiC,EACA,EACA,QACA,EACA,SACA,EAAA,CACF,EAKNd,EAAO,KAAKM,CAAM,CACpB,CACA,OAAON,CACT,CACF"}