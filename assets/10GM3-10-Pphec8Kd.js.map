{"version":3,"file":"10GM3-10-Pphec8Kd.js","sources":["../../src/exercices/ch/10GM3-10.ts"],"sourcesContent":["import { arrondi } from '../../lib/outils/nombres'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { sp } from '../../lib/outils/outilString'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport Grandeur from '../../modules/Grandeur'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre =\n  'Convertir des durées en heures-minutes-secondes, en heures décimales ou en minutes décimales'\nexport const dateDePublication = '19/08/2025'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const uuid = '31e61'\nexport const refs = {\n  'fr-ch': ['10GM3-10'],\n  'fr-fr': [''],\n}\n\n/**\n * Exercice de conversion de durées entre hhmmss, hdec et mindec utilisant la classe Grandeur\n * @author Nathan Scheinmann (Adaptation à la France par Eric Elter)\n */\nexport default class ConvertirDuree extends Exercice {\n  version: string\n  constructor() {\n    super()\n    this.nbQuestions = 5\n    this.sup = 1 // Type de conversion\n    this.sup2 = false // Quart ou demi-heures seulement\n    this.sup3 = false // dixièmes d'heure\n    this.besoinFormulaireNumerique = [\n      'Type de conversions',\n      6,\n      '1 : heures-minutes-secondes vers heures décimales\\n2 : heures-minutes-secondes vers minutes décimales\\n3 : heures décimales vers heures-minutes-secondes\\n4 : minutes décimales vers heures-minutes-secondes\\n5 : heures ↔ minutes décimales\\n6 : Mélange',\n    ]\n    this.besoinFormulaire2CaseACocher = [\n      'Quarts et demi-heures seulement',\n      false,\n    ]\n    this.besoinFormulaire3CaseACocher = [\"Dixièmes d'heure seulement\", true]\n    this.correctionDetailleeDisponible = true\n    this.correctionDetaillee = true\n    this.version = '10GM3-10'\n  }\n\n  nouvelleVersion(): void {\n    this.autoCorrection = []\n\n    // Déterminer les types de questions disponibles\n    let typesDeQuestionsDisponibles: number[]\n    switch (this.sup) {\n      case 1:\n        typesDeQuestionsDisponibles = [1]\n        break // hhmmss → hdec\n      case 2:\n        typesDeQuestionsDisponibles = [2]\n        break // hhmmss → mindec\n      case 3:\n        typesDeQuestionsDisponibles = [3]\n        break // hdec → hhmmss\n      case 4:\n        typesDeQuestionsDisponibles = [4]\n        break // mindec → hhmmss\n      case 5:\n        typesDeQuestionsDisponibles = [5, 6]\n        break // hdec ↔ mindec\n      default:\n        typesDeQuestionsDisponibles = [1, 2, 3, 4, 5, 6]\n        break // Mélange\n    }\n    if (this.version === '6M4C-3') {\n      // this.besoinFormulaireNumerique n'est plus le même.\n      // On parcourt le tableau à l'envers (pour éviter les décalages d'index)\n      for (let i = typesDeQuestionsDisponibles.length - 1; i >= 0; i--) {\n        if (typesDeQuestionsDisponibles[i] === 5) {\n          // 1. Supprimer tous les 5\n          typesDeQuestionsDisponibles.splice(i, 1)\n        } else if (typesDeQuestionsDisponibles[i] === 3) {\n          // 2. Remplacer chaque 3 par 6\n          typesDeQuestionsDisponibles.splice(i, 1, 6)\n        } else if (typesDeQuestionsDisponibles[i] === 4) {\n          // 3. Remplacer chaque 4 par [1,2,6]\n          typesDeQuestionsDisponibles.splice(i, 1, 1, 2, 6)\n        }\n      }\n    } else if (this.version === '6M4C-4') {\n      // this.besoinFormulaireNumerique n'est plus le même.\n      // On parcourt le tableau à l'envers (pour éviter les décalages d'index)\n      for (let i = typesDeQuestionsDisponibles.length - 1; i >= 0; i--) {\n        switch (typesDeQuestionsDisponibles[i]) {\n          case 3:\n            // Remplacer 3 par [3, 4]\n            typesDeQuestionsDisponibles.splice(i, 1, 3, 4)\n            break\n          case 1:\n            // Remplacer 1 par [3]\n            typesDeQuestionsDisponibles.splice(i, 1, 3)\n            break\n          case 2:\n            // Remplacer 2 par [4]\n            typesDeQuestionsDisponibles.splice(i, 1, 4)\n            break\n          case 5:\n          case 6:\n            // Supprimer 5 et 6\n            typesDeQuestionsDisponibles.splice(i, 1)\n            break\n        }\n      }\n    }\n    const listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    )\n\n    //    this.consigne = `${this.sup === 4 || this.sup === 3 || this.sup2 ? ' ' : `Arrondir, si nécessaire, les résultats au ${this.sup3 ? 'dixième' : 'centième'}`}`\n    this.consigne = `${this.sup === 4 || this.sup2 || this.sup3 ? ' ' : `Arrondir, si nécessaire, ${this.nbQuestions > 1 ? 'les résultats' : 'le résultat'} au centième.`}`\n    for (\n      let i = 0, cpt = 0, champIndex = 0;\n      i < this.nbQuestions && cpt < 50;\n      i++\n    ) {\n      let texte: string\n      let texteCorr: string\n      const typeDeQuestion = listeTypeDeQuestions[i]\n      let totalSecondes: number = 0\n      let valeurDepart: number | string = 0\n      let uniteDepart: string = ''\n      let uniteArrivee: string = ''\n      let reponse: number | string = 0\n      const estApproximation: boolean = false\n\n      // Déterminer les unités selon le type de question\n      switch (typeDeQuestion) {\n        case 1: // hhmmss → hdec\n          uniteDepart = 'hhmmss'\n          uniteArrivee = 'hdec'\n          break\n        case 2: // hhmmss → mindec\n          uniteDepart = 'hhmmss'\n          uniteArrivee = 'mindec'\n          break\n        case 3: // hdec → hhmmss\n          uniteDepart = 'hdec'\n          uniteArrivee = 'hhmmss'\n          break\n        case 4: // mindec → hhmmss\n          uniteDepart = 'mindec'\n          uniteArrivee = 'hhmmss'\n          break\n        case 5: // hdec → mindec\n          uniteDepart = 'hdec'\n          uniteArrivee = 'mindec'\n          break\n        case 6: // mindec → hdec\n          uniteDepart = 'mindec'\n          uniteArrivee = 'hdec'\n          break\n        default:\n          uniteDepart = 'hhmmss'\n          uniteArrivee = 'hdec'\n          break\n      }\n      let condition1 = false\n      let condition2 = false\n      let condition3 = false\n      do {\n        // Générer un nombre de secondes aléatoire\n        if (this.sup2) {\n          // Quarts et demi-heures seulement : multiples de 15 minutes (900 secondes)\n          const nbQuartsHeure =\n            uniteDepart === 'hhmmss'\n              ? randint(1, 31, [4, 8, 12, 16, 20, 24, 28]) // 1 à 12 quarts d'heure = 15 min à 3h\n              : randint(1, 12)\n          totalSecondes = nbQuartsHeure * 900\n        } else if (this.sup3) {\n          //  totalSecondes = randint(1, 60 * 3, [60, 120, 180]) * 60\n          totalSecondes = randint(11, 79, [10, 20, 30, 40, 50, 60, 70]) * 360\n        } else {\n          // Nombre de secondes aléatoire entre 1 et 3*3600 (3 heures)\n          const multiplesOf60 = []\n          for (let i = 120; i < 3600; i += 60) {\n            multiplesOf60.push(i)\n          }\n          totalSecondes = randint(60, 3 * 3600, multiplesOf60) // Au moins 1 minute\n        }\n\n        // Créer la grandeur de base en secondes\n        const dureeBase = new Grandeur(totalSecondes, 'hhmmss')\n\n        // Convertir vers l'unité de départ pour afficher la question\n        if (uniteDepart === 'hhmmss') {\n          // Pour hhmmss, la valeur de départ est directement le formatage du temps total\n          if (this.sup3 && uniteArrivee === 'hdec') {\n            valeurDepart = (randint(0, 3) + 0.1 * randint(1, 9)) * 3600\n          }\n          valeurDepart = dureeBase.toHHMMSS()\n        } else {\n          const dureeDepart = dureeBase.convertirEn(uniteDepart)\n          const valeurBrute =\n            typeof dureeDepart.mesure === 'number'\n              ? dureeDepart.mesure\n              : Number(dureeDepart.mesure)\n          valeurDepart = Math.round(valeurBrute * 100) / 100\n          /* if (this.sup3) {\n            valeurDepart = Math.round(valeurBrute * 10) / 10\n          } */\n          if (this.sup3 && uniteDepart === 'mindec') {\n            valeurDepart = (randint(0, 3) + 0.1 * randint(1, 9)) * 60\n          }\n        }\n\n        // Convertir vers l'unité d'arrivée pour la réponse\n        if (uniteArrivee === 'hhmmss') {\n          // Si on convertit vers hhmmss et qu'on a une approximation sur les unités de départ,\n          // recalculer le résultat à partir des valeurs arrondies pour la cohérence\n          if (uniteDepart !== 'hhmmss') {\n            // Recalculer à partir de la valeur de départ arrondie\n            valeurDepart = Math.floor((valeurDepart as number) * 100) / 100\n            /* if (this.sup3) {\n              valeurDepart = Math.round((valeurDepart as number) * 10) / 10\n            } */\n            const dureeDepArr = new Grandeur(valeurDepart, uniteDepart)\n            reponse = dureeDepArr.toHHMMSS()\n          } else {\n            reponse = dureeBase.toHHMMSS()\n          }\n        } else {\n          // IMPORTANT: Si on a une approximation sur l'unité de départ,\n          // calculer la réponse à partir de la valeur affichée (arrondie) pour la cohérence\n          if (uniteDepart !== 'hhmmss') {\n            // Recalculer à partir de la valeur de départ arrondie\n            const dureeDepArr = new Grandeur(\n              valeurDepart as number,\n              uniteDepart,\n            )\n            const dureeArriveeArr = dureeDepArr.convertirEn(uniteArrivee)\n            reponse =\n              typeof dureeArriveeArr.mesure === 'number'\n                ? dureeArriveeArr.mesure\n                : Number(dureeArriveeArr.mesure)\n          } else {\n            const dureeArrivee = dureeBase.convertirEn(uniteArrivee)\n            const reponseB =\n              typeof dureeArrivee.mesure === 'number'\n                ? dureeArrivee.mesure\n                : Number(dureeArrivee.mesure)\n\n            // Vérifier si c'est une approximation (plus de 2 décimales)\n            if (Math.round(reponseB * 100) !== reponseB * 100) {\n              // estApproximation = true\n              // Arrondir à 2 décimales pour la cohérence\n              reponse = Math.round(reponseB * 100) / 100\n              /* }\n            if (Math.round(reponseB * 10) !== reponseB * 10 && this.sup3) {\n              // estApproximation = true\n              // Arrondir à 2 décimales pour la cohérence\n              reponse = Math.round(reponseB * 10) / 10\n            */\n            } else {\n              reponse = reponseB\n            }\n            // reponse = reponseB\n          }\n        }\n        condition1 =\n          uniteArrivee === 'hhmmss' &&\n          ((reponse as string).length === 3 || (reponse as string).length === 0)\n        condition2 = uniteDepart === 'hhmmss' && totalSecondes < 3600\n        condition3 =\n          uniteArrivee === 'hhmmss' &&\n          !(\n            ((reponse as string).includes('h') &&\n              (reponse as string).includes('min')) ||\n            ((reponse as string).includes('h') &&\n              (reponse as string).includes('s')) ||\n            ((reponse as string).includes('min') &&\n              (reponse as string).includes('s'))\n          )\n      } while (condition1 || condition2 || condition3) // Éviter les réponses du type \"0 h 0 min 45 s\" et s'assurer qu'au moins h et min ou h et s ou min et s apparaissent\n\n      // Formater la question\n      let valeurAffichee: string\n      if (uniteDepart === 'hhmmss') {\n        // valeurDepart est déjà au format \"3 h 45 min 28 s\", extraire les nombres\n        const matches =\n          (valeurDepart as string).match(/(\\d+) h|(\\d+) min|(\\d+) s/g) || []\n        const parts: string[] = []\n        matches.forEach((match) => {\n          if (match.includes(' h')) {\n            const h = parseInt(match.replace(' h', ''))\n            if (h > 0) parts.push(`$${h}${sp()}$${h <= 1 ? 'heure' : 'heures'}`)\n          } else if (match.includes(' min')) {\n            const m = parseInt(match.replace(' min', ''))\n            if (m > 0) {\n              parts.push(`$${m}${sp()}$${m <= 1 ? 'minute' : 'minutes'}`)\n            }\n          } else if (match.includes(' s')) {\n            const s = parseInt(match.replace(' s', ''))\n            if (s > 0) {\n              parts.push(`$${s}${sp()}$${s <= 1 ? 'seconde' : 'secondes'}`)\n            }\n          }\n        })\n        valeurAffichee = parts.join(`${sp()}`)\n      } else {\n        valeurAffichee = `$${texNombre(valeurDepart as number, 2)}$`\n      }\n\n      let uniteAffichageDepart: string = ''\n      let uniteAffichageArrivee: string = ''\n\n      switch (uniteDepart) {\n        case 'hhmmss':\n          uniteAffichageDepart =\n            this.sup2 || this.sup3\n              ? 'format heures-minutes'\n              : 'format heures-minutes-secondes'\n          break\n        case 'hdec':\n          uniteAffichageDepart =\n            valeurDepart.toString() !== '1' ? 'heures' : 'heure'\n          break\n        case 'mindec':\n          uniteAffichageDepart = 'minutes'\n          break\n        default:\n          uniteAffichageDepart = this.sup2 || this.sup3 ? 'hh:mm:ss' : 'hh:mm'\n          break\n      }\n\n      switch (uniteArrivee) {\n        case 'hhmmss':\n          uniteAffichageArrivee =\n            this.sup2 || this.sup3\n              ? 'format heures-minutes'\n              : 'format heures-minutes-secondes'\n          break\n        case 'hdec':\n          uniteAffichageArrivee = 'heures'\n          break\n        case 'mindec':\n          uniteAffichageArrivee = 'minutes'\n          break\n        default:\n          uniteAffichageArrivee = 'heures'\n          break\n      }\n\n      texte = `Convertir ${valeurAffichee} ${uniteDepart === 'hhmmss' ? '' : uniteAffichageDepart} en ${uniteAffichageArrivee}.`\n\n      // Ajouter le champ de réponse si interactif\n      if (this.interactif) {\n        if (uniteArrivee === 'hhmmss') {\n          texte +=\n            '<br>' +\n            ajouteChampTexteMathLive(\n              this,\n              champIndex,\n              KeyboardType.clavierNumbers,\n              { texteApres: ' h ' },\n            )\n          texte += ajouteChampTexteMathLive(\n            this,\n            champIndex + 1,\n            KeyboardType.clavierNumbers,\n            { texteApres: ' min ' },\n          )\n          if (!this.sup2 && !this.sup3)\n            texte += ajouteChampTexteMathLive(\n              this,\n              champIndex + 2,\n              KeyboardType.clavierNumbers,\n              { texteApres: ' s' },\n            )\n        } else {\n          texte +=\n            '<br>' +\n            ajouteChampTexteMathLive(\n              this,\n              champIndex,\n              KeyboardType.clavierNumbers,\n              { texteAvant: ' ', texteApres: ` ${uniteAffichageArrivee}` },\n            )\n        }\n      } else {\n        if (uniteArrivee === 'hhmmss') {\n          texte += '<br><br>' + '$\\\\ldots \\\\ldots$' + ' h '\n          texte += '$\\\\ldots \\\\ldots$' + ' min '\n          texte += '$\\\\ldots \\\\ldots$' + ' s '\n        } else {\n          texte += '<br><br>' + `$\\\\ldots \\\\ldots$ ${uniteAffichageArrivee}`\n        }\n      }\n\n      // Préparer la correction détaillée\n      texteCorr = ''\n      const correctionDetaillee = this.genererCorrectionDetaillee(\n        typeDeQuestion,\n        valeurDepart,\n        reponse,\n        uniteDepart,\n        uniteArrivee,\n        estApproximation,\n      )\n      if (this.correctionDetaillee) {\n        texteCorr = correctionDetaillee.texte\n      }\n      texteCorr += this.genererCorrectionSimple(\n        valeurDepart,\n        reponse,\n        uniteDepart,\n        uniteArrivee,\n        correctionDetaillee.estApproximation,\n      )\n\n      // Ajouter la gestion pour l'interactivité\n      if (this.interactif) {\n        if (uniteArrivee === 'hhmmss') {\n          // Extraire heures, minutes, secondes de la réponse\n          const hmsString = reponse as string\n          const parts =\n            hmsString.match(/(\\d+)\\s*h|(\\d+)\\s*min|(\\d+)\\s*s/g) || []\n          let heures = 0\n          let minutes = 0\n          let secondes = 0\n\n          parts.forEach((part) => {\n            if (part.includes('h')) {\n              heures = parseInt(part.replace(/[^\\d]/g, ''))\n            } else if (part.includes('min')) {\n              minutes = parseInt(part.replace(/[^\\d]/g, ''))\n            } else if (part.includes('s')) {\n              secondes = parseInt(part.replace(/[^\\d]/g, ''))\n            }\n          })\n\n          handleAnswers(this, champIndex, {\n            reponse: {\n              value: arrondi(heures, 2),\n              options: {\n                nombreDecimalSeulement: true,\n              },\n            },\n          })\n          handleAnswers(this, champIndex + 1, {\n            reponse: {\n              value: minutes,\n              options: {\n                nombreDecimalSeulement: true,\n              },\n            },\n          })\n          if (!this.sup2 && !this.sup3)\n            handleAnswers(this, champIndex + 2, {\n              reponse: {\n                value: secondes,\n                options: {\n                  nombreDecimalSeulement: true,\n                },\n              },\n            })\n        } else {\n          handleAnswers(this, champIndex, {\n            reponse: {\n              value: arrondi(reponse as number, 2),\n              options: {\n                nombreDecimalSeulement: true,\n              },\n            },\n          })\n        }\n      }\n\n      if (this.questionJamaisPosee(i, valeurDepart, typeDeQuestion)) {\n        this.listeQuestions.push(texte)\n        this.listeCorrections.push(texteCorr)\n        // Incrémenter champIndex selon le type de réponse\n        champIndex +=\n          uniteArrivee === 'hhmmss' ? (this.sup2 || this.sup3 ? 2 : 3) : 1\n        cpt++\n      } else {\n        cpt++\n        i--\n      }\n    }\n\n    listeQuestionsToContenu(this)\n  }\n\n  private genererCorrectionDetaillee(\n    typeDeQuestion: number,\n    valeurDepart: number | string,\n    reponse: number | string,\n    uniteDepart: string,\n    uniteArrivee: string,\n    estApproximation: boolean = false,\n  ): { texte: string; estApproximation: boolean } {\n    let texteCorr = ''\n\n    switch (typeDeQuestion) {\n      case 1: {\n        // Extraire h, m, s du nouveau format \"X h Y min Z s\" // hhmmss → hdec\n        const valStr1 = valeurDepart as string\n        const h1 = valStr1.match(/(\\d+) h/)\n          ? parseInt(valStr1.match(/(\\d+) h/)![1])\n          : 0\n        const m1 = valStr1.match(/(\\d+) min/)\n          ? parseInt(valStr1.match(/(\\d+) min/)![1])\n          : 0\n        const s1 = valStr1.match(/(\\d+) s/)\n          ? parseInt(valStr1.match(/(\\d+) s/)![1])\n          : 0\n        texteCorr =\n          this.sup2 || this.sup3\n            ? \"Pour convertir un temps au format heures-minutes en heures, on convertit les minutes en fractions d'heures. <br>\"\n            : \"Pour convertir un temps au format heures-minutes-secondes en heures, on convertit les minutes et secondes en fractions d'heures. <br>\"\n        if (h1 > 0) {\n          texteCorr += ` Le nombre d'heures ne change pas : $${h1}\\\\text{\\\\,h}$. <br>`\n        }\n        if (m1 > 0) {\n          // Vérifier si m1/60 est périodique\n          const minToHours = m1 / 60\n          // const puissDix = this.sup3 ? 10 : 100\n          const puissDix = 100\n          const isPeriodicMin =\n            Math.round(minToHours * puissDix) !== minToHours * puissDix\n          const isExactMin = Math.round(minToHours * 100) === minToHours * 100\n          if (isPeriodicMin) estApproximation = true\n          texteCorr += !this.sup2\n            ? `On divise le nombre de minutes par $60$ pour le convertir en heures : `\n            : ''\n          texteCorr += `$${m1}\\\\text{\\\\,min} = ${this.sup2 ? new FractionEtendue(m1, 60).simplifie().texFSD : new FractionEtendue(m1, 60).texFSD}\\\\text{\\\\,h}`\n          if (isExactMin) {\n            texteCorr += `${!estApproximation ? '=' : '\\\\approx'}`\n            // texteCorr += `${this.sup3 ? `${texNombre(minToHours, 1)}` : `${texNombre(minToHours, 2)}`}\\\\text{\\\\,h}$. <br>`\n            texteCorr += `${texNombre(minToHours, 2)}\\\\text{\\\\,h}$. <br>`\n          } else {\n            texteCorr += '$. <br>'\n          }\n        }\n        const secToHours = s1 / 3600\n        const isExactSec = Math.round(secToHours * 100) === secToHours * 100\n        if (!isExactSec) estApproximation = true\n        if (s1 > 0) {\n          // Vérifier si s1/3600 est périodique\n          const secToHours = s1 / 3600\n          const isPeriodicSec =\n            Math.round(secToHours * 100) !== secToHours * 100\n          if (isPeriodicSec) estApproximation = true\n          texteCorr += `On divise le nombre de secondes par $${texNombre(3600)}$ pour le convertir en heures : $${s1}\\\\text{\\\\,s} = \\\\dfrac{${s1}}{${texNombre(3600)}}\\\\text{\\\\,h} ${isExactSec ? `=${secToHours}\\\\text{\\\\,h}` : ''}$.<br>`\n        }\n        texteCorr += 'On somme : $'\n        const parts = []\n        if (h1 > 0) parts.push(`${h1}`)\n        if (m1 > 0) {\n          // Utiliser la fraction si elle n'est pas un nombre exact\n          const minToHours = m1 / 60\n          const isExactMin = Math.round(minToHours * 100) === minToHours * 100\n          if (isExactMin) {\n            /* parts.push(\n              `${this.sup3 ? `${texNombre(minToHours, 1)}` : `${texNombre(minToHours, 2)}`}`,\n            ) */\n            parts.push(`${texNombre(minToHours, 2)}`)\n          } else {\n            parts.push(`\\\\dfrac{${m1}}{60}`)\n          }\n        }\n        if (s1 > 0) {\n          // Utiliser la fraction si elle n'est pas un nombre exact\n\n          if (isExactSec) {\n            parts.push(`${texNombre(secToHours, 2)}`)\n          } else {\n            parts.push(`\\\\dfrac{${s1}}{${texNombre(3600)}}`)\n          }\n        }\n        texteCorr += parts.join(' + ')\n\n        // Si on a des fractions, on peut simplifier le calcul\n        if (estApproximation && !this.sup3 && !this.sup2) {\n          texteCorr += ` \\\\approx ${texNombre(reponse as number, 2)}$`\n        } else {\n          texteCorr += ` = ${texNombre(reponse as number, 2)}$`\n        }\n        break\n      }\n      case 2: // hhmmss → mindec\n        {\n          // Extraire h, m, s du nouveau format \"X h Y min Z s\"\n          const valStr2 = valeurDepart as string\n          const h2 = valStr2.match(/(\\d+) h/)\n            ? parseInt(valStr2.match(/(\\d+) h/)![1])\n            : 0\n          const m2 = valStr2.match(/(\\d+) min/)\n            ? parseInt(valStr2.match(/(\\d+) min/)![1])\n            : 0\n          const s2 = valStr2.match(/(\\d+) s/)\n            ? parseInt(valStr2.match(/(\\d+) s/)![1])\n            : 0\n          const totalMinutes = h2 * 60 + m2 + s2 / 60\n          texteCorr =\n            this.sup2 || this.sup3\n              ? 'Pour convertir un temps au format heures-minutes en minutes, on convertit tout en minutes. <br>'\n              : 'Pour convertir un temps au format heures-minutes-secondes en minutes, on convertit tout en minutes. <br>'\n          const secToMin = s2 / 60\n          const isExactSec = Math.round(secToMin * 1000) === secToMin * 1000\n          if (h2 > 0) {\n            texteCorr += ` heures : $${h2}\\\\text{\\\\,h} = ${h2} \\\\times 60\\\\text{\\\\,min}= ${h2 * 60}\\\\text{\\\\,min}$ ;`\n          }\n          texteCorr += ` minutes : $${m2}\\\\text{\\\\,min}$${s2 > 0 ? ' ;' : '.'}`\n          if (s2 > 0) {\n            // Vérifier si s2/60 est périodique\n            const secToMin = s2 / 60\n            const isPeriodicSec2 =\n              Math.round(secToMin * 1000) !== secToMin * 1000\n            if (isPeriodicSec2) estApproximation = true\n            texteCorr += ` secondes : $${s2}\\\\text{\\\\,s} = \\\\dfrac{${s2}}{60}\\\\text{\\\\,min}${isExactSec ? `=${secToMin}\\\\text{\\\\,h}` : ''}$.`\n          }\n          texteCorr += `<br>On somme : $${h2 * 60} + ${m2}`\n          if (s2 > 0) {\n            if (isExactSec) {\n              texteCorr += ` + ${texNombre(secToMin, 3)}`\n            } else {\n              texteCorr += ` + \\\\dfrac{${s2}}{60}`\n            }\n          }\n          if (estApproximation) {\n            texteCorr += ` \\\\approx ${texNombre(totalMinutes, 2)}\\\\text{\\\\,min}$`\n          } else {\n            texteCorr += ` = ${texNombre(totalMinutes, 2)}\\\\text{\\\\,min}$`\n          }\n        }\n        break\n\n      case 3: {\n        // Utiliser la valeur affichée pour la cohérence avec le résultat final // hdec → hhmmss\n        const heuresTotales = valeurDepart as number\n        const heuresEnt = Math.floor(heuresTotales)\n\n        // Recalculer à partir du résultat final pour garantir la cohérence\n        const reponseString = reponse as string\n        /* const hFinal = reponseString.match(/(\\d+) h/)\n          ? parseInt(reponseString.match(/(\\d+) h/)![1])\n          : 0\n        */\n        const mFinal = reponseString.match(/(\\d+) min/)\n          ? parseInt(reponseString.match(/(\\d+) min/)![1])\n          : 0\n        /* const sFinal = reponseString.match(/(\\d+) s/)\n          ? parseInt(reponseString.match(/(\\d+) s/)![1])\n          : 0\n        */\n        // Calculer les valeurs intermédiaires cohérentes\n        const partieDecimale = heuresTotales - heuresEnt\n\n        texteCorr =\n          this.sup2 || this.sup3\n            ? 'Pour convertir des heures au format heures-minutes, on sépare la partie entière (heures) et on convertit la partie décimale.<br>'\n            : 'Pour convertir des heures au format heures-minutes-secondes, on sépare la partie entière (heures) et on convertit la partie décimale.<br>'\n\n        // Utiliser la précision d'affichage (2 décimales) pour la cohérence\n        texteCorr += `$${texNombre(heuresTotales, 2)}\\\\text{\\\\,h} = ${heuresEnt}\\\\text{\\\\,h} + ${texNombre(partieDecimale, 2)}\\\\text{\\\\,h}$`\n\n        if (partieDecimale > 0) {\n          if (this.sup2 || this.sup3) {\n            texteCorr +=\n              '<br><br>Conversion de la partie décimale en minutes :<br>'\n            const minutesTotales = partieDecimale * 60\n            texteCorr += `$${texNombre(partieDecimale, 2)}\\\\text{\\\\,h} = ${texNombre(partieDecimale, 2)} \\\\times 60\\\\text{\\\\,min} = ${texNombre(minutesTotales, 0)}\\\\text{\\\\,min}$`\n          } else {\n            texteCorr +=\n              '<br><br>Conversion de la partie décimale en secondes :<br>'\n\n            // Convertir d'abord en secondes totales\n            const secondesTotales = partieDecimale * 3600\n            // const egaliteSecondes = estApproximation ? '\\\\approx' : '='\n\n            texteCorr += `$${texNombre(partieDecimale, 2)}\\\\text{\\\\,h} = ${texNombre(partieDecimale, 2)} \\\\times ${texNombre(3600)}\\\\text{\\\\,s} = ${texNombre(secondesTotales, 0)}\\\\text{\\\\,s}$`\n\n            if (mFinal > 0) {\n              texteCorr += `<br><br>Le nombre de minutes entières est la partie entière du quotient $${texNombre(secondesTotales, 0)} \\\\div 60$, soit $${mFinal}\\\\text{\\\\,min}$.<br>`\n\n              const secondesRestantes = Math.round(\n                secondesTotales - mFinal * 60,\n              )\n              texteCorr += `Le nombre de secondes est donné par le nombre de secondes total moins le nombre de minutes entières $${texNombre(secondesTotales)} - ${mFinal} \\\\times 60 = ${texNombre(secondesRestantes)}\\\\text{\\\\,s}$`\n            } else {\n              texteCorr += `<br><br>Comme ${texNombre(secondesTotales, 0)} < 60, il n'y a pas de minutes entières, donc ${texNombre(secondesTotales, 0)} secondes.`\n            }\n          }\n        }\n        break\n      }\n      case 4: {\n        // mindec → hhmmss\n        const minTotales = valeurDepart as number\n        const heures4 = Math.floor(minTotales / 60)\n        const minutesRestantes = minTotales - heures4 * 60\n        const minutes4 = Math.floor(minutesRestantes)\n        const secondes4 = Math.round((minutesRestantes - minutes4) * 60)\n\n        texteCorr =\n          \"Pour convertir des minutes au format heures-minutes-secondes, on divise par $60$ pour obtenir le nombre d'heures, puis on traite le reste.<br><br>\"\n        texteCorr += `Le nombre d'heures entières correspond à la partie entière du quotient $${texNombre(minTotales, 2)}\\\\text{\\\\,min} \\\\div 60$, soit $${heures4}\\\\text{\\\\,h}$. `\n        if (heures4 > 0) {\n          if (!this.sup2 && !this.sup3) {\n            texteCorr += `<br><br>Il reste à convertir : $${minTotales}-(${heures4}\\\\times 60) =${texNombre(minutesRestantes, 2)}\\\\text{\\\\,min}$ en minutes`\n            texteCorr += this.sup2 || this.sup3 ? '' : ` et secondes`\n          } else {\n            texteCorr += `<br><br>Il reste à trouver les minutes : $${minTotales}-(${heures4}\\\\times 60) =${texNombre(minutesRestantes, 2)}\\\\text{\\\\,min}$`\n          }\n        }\n        if (!this.sup2 && !this.sup3) {\n          const egalite4 = estApproximation ? '\\\\approx' : '='\n          if (minutesRestantes !== minutes4) {\n            texteCorr += `<br><br>$${texNombre(minutesRestantes, 2)}\\\\text{\\\\,min} = ${minutes4}\\\\text{\\\\,min} + ${texNombre(minutesRestantes - minutes4, 3)}\\\\text{\\\\,min}$<br>`\n            texteCorr += `$${texNombre(minutesRestantes - minutes4, 3)}\\\\text{\\\\,min} = ${texNombre(minutesRestantes - minutes4, 3)} \\\\times 60 \\\\text{\\\\,s} ${egalite4} ${secondes4}\\\\text{\\\\,s}$`\n          } else {\n            texteCorr += `<br><br> Il y a un nombre entier de minutes, donc $${minutes4}\\\\text{\\\\,min}$ et $0\\\\text{\\\\,s}$.`\n          }\n        }\n        break\n      }\n      case 5: {\n        // hdec → mindec\n        texteCorr =\n          'Pour convertir des heures en minutes, on multiplie par $60$ (car $1\\\\text{\\\\,h} = 60\\\\text{\\\\,min}$).<br><br>'\n        const egalite5 = estApproximation ? '\\\\approx' : '='\n        texteCorr += `$${texNombre(valeurDepart as number, 2)}\\\\text{\\\\,h} = ${texNombre(valeurDepart as number, 2)} \\\\times 60 \\\\text{\\\\,min}${egalite5} ${texNombre(reponse as number, 2)}\\\\text{\\\\,min}$`\n        break\n      }\n      case 6: {\n        // mindec → hdec\n        texteCorr =\n          'Pour convertir des minutes en heures, on divise par $60$ (car $60\\\\text{\\\\,min} = 1\\\\text{\\\\,h}$).<br><br>'\n        if (\n          texNombre(reponse as number, 2) !== texNombre(reponse as number, 3)\n        ) {\n          estApproximation = true\n        }\n        const egalite6 = estApproximation ? '\\\\approx' : '='\n        texteCorr += `$${texNombre(valeurDepart as number, 2)}\\\\text{\\\\,min} = ${texNombre(valeurDepart as number, 2)} \\\\div 60 \\\\text{\\\\,h}${egalite6} ${texNombre(reponse as number, 2)}\\\\text{\\\\,h}$`\n        break\n      }\n    }\n    texteCorr += '.<br>Ainsi, '\n\n    return { texte: texteCorr, estApproximation }\n  }\n\n  private genererCorrectionSimple(\n    valeurDepart: number | string,\n    reponse: number | string,\n    uniteDepart: string,\n    uniteArrivee: string,\n    estApproximation: boolean,\n  ): string {\n    let texteCorr = '$'\n\n    // Afficher la valeur de départ avec son unité\n    if (typeof valeurDepart === 'string') {\n      // valeurDepart est déjà formaté avec les unités (ex: \"1 h 2 min 30 s\")\n      // On doit le convertir au format LaTeX\n      const valeurAvecUnites = valeurDepart\n        .replace(/(\\d+) h/g, '$1\\\\text{\\\\,h }')\n        .replace(/(\\d+) min/g, '$1\\\\text{\\\\,min }')\n        .replace(/(\\d+) s/g, '$1\\\\text{\\\\,s}')\n      texteCorr += `${valeurAvecUnites} `\n    } else {\n      // valeurDepart est un nombre, ajouter l'unité appropriée\n      const uniteTexte =\n        uniteDepart === 'hdec'\n          ? '\\\\text{\\\\,h}'\n          : uniteDepart === 'mindec'\n            ? '\\\\text{\\\\,min}'\n            : ''\n      texteCorr += `${texNombre(valeurDepart, 2)}${uniteTexte} `\n    }\n\n    let egalite = estApproximation ? '\\\\approx' : '='\n    if (uniteDepart === 'hdec' && uniteArrivee === 'hhmmss') {\n      egalite = '='\n    }\n    // Afficher la réponse avec son unité\n    if (typeof reponse === 'string') {\n      // reponse est déjà formaté avec les unités (ex: \"1 h 2 min 30 s\")\n      let reponseAvecUnites = reponse\n        .replace(/(\\d+) h/g, '$1\\\\text{\\\\,h }')\n        .replace(/(\\d+) min/g, '$1\\\\text{\\\\,min }')\n        .replace(/(\\d+) s/g, '$1\\\\text{\\\\,s}')\n\n      // Ajouter \"0 s\" si il y a des heures ou minutes mais pas de secondes\n      if (\n        (reponse.includes('h') || reponse.includes('min')) &&\n        !reponse.includes('s')\n      ) {\n        if (!this.sup2 && !this.sup3) reponseAvecUnites += ' 0\\\\text{\\\\,s}'\n      }\n\n      texteCorr += `${egalite} ${reponseAvecUnites.replace(/(\\d+)/g, (match) => miseEnEvidence(match))}`\n    } else {\n      // reponse est un nombre, ajouter l'unité appropriée\n      const uniteTexte =\n        uniteArrivee === 'hdec'\n          ? '\\\\text{\\\\,h}'\n          : uniteArrivee === 'mindec'\n            ? '\\\\text{\\\\,min}'\n            : ''\n      texteCorr += `${egalite} ${miseEnEvidence(texNombre(reponse, 2)) + uniteTexte}`\n    }\n\n    texteCorr += '$.'\n    return texteCorr\n  }\n}\n"],"names":["titre","dateDePublication","interactifReady","interactifType","uuid","refs","ConvertirDuree","Exercice","__publicField","typesDeQuestionsDisponibles","i","listeTypeDeQuestions","combinaisonListes","cpt","champIndex","texte","texteCorr","typeDeQuestion","totalSecondes","valeurDepart","uniteDepart","uniteArrivee","reponse","estApproximation","condition1","condition2","condition3","randint","multiplesOf60","dureeBase","Grandeur","dureeDepart","valeurBrute","dureeArriveeArr","dureeArrivee","reponseB","valeurAffichee","matches","parts","match","h","sp","m","s","texNombre","uniteAffichageDepart","uniteAffichageArrivee","ajouteChampTexteMathLive","KeyboardType","correctionDetaillee","heures","minutes","secondes","part","handleAnswers","arrondi","listeQuestionsToContenu","valStr1","h1","m1","s1","minToHours","puissDix","isPeriodicMin","isExactMin","FractionEtendue","secToHours","isExactSec","valStr2","h2","m2","s2","totalMinutes","secToMin","heuresTotales","heuresEnt","reponseString","mFinal","partieDecimale","minutesTotales","secondesTotales","secondesRestantes","minTotales","heures4","minutesRestantes","minutes4","secondes4","egalite4","egalite5","egalite6","valeurAvecUnites","uniteTexte","egalite","reponseAvecUnites","miseEnEvidence"],"mappings":"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"}