{"version":3,"file":"1A-S02-3-vbkWL4C-.js","sources":["../../src/exercices/1e/1A-S02-3.ts"],"sourcesContent":["import { choice } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { randint } from '../../modules/outils'\nimport { nombreElementsDifferents } from '../ExerciceQcm'\n// import ExerciceQcmA from '../../ExerciceQcmA'\nimport ExerciceQcmA from '../ExerciceQcmA'\n\nexport const uuid = 'bd806'\nexport const refs = {\n  'fr-fr': ['1A-S02-3'],\n  'fr-ch': [],\n}\nexport const interactifReady = true\nexport const interactifType = 'qcm'\nexport const amcReady = 'true'\nexport const amcType = 'qcmMono'\nexport const titre =\n  \"Déterminer la valeur manquante d'une série dont on connaît la moyenne\"\nexport const dateDePublication = '02/08/2025'\n// Ceci est un exemple de QCM avec version originale et version aléatoire\n/**\n *\n * @author Stéphane Guyon\n *\n */\n\nexport default class MoyenneQCM extends ExerciceQcmA {\n  // Méthode privée pour factoriser le code redondant\n  private appliquerLesValeurs(\n    valeurs: number[],\n    effectif: number,\n    moyenne: number,\n    x: number,\n    distracteur2: number,\n    distracteur3: number,\n    distracteur4: number,\n  ): void {\n    const somme = valeurs.reduce((a, b) => a + b, 0)\n\n    // Construction du tableau de réponses avec la bonne réponse en premier\n    this.reponses = [\n      `$${texNombre(x)}$`, // Bonne réponse\n      `$${texNombre(distracteur2)}$`, // Distracteur 1\n      `$${texNombre(distracteur3)}$`, // Distracteur 2\n      `$${texNombre(distracteur4)}$`, // Distracteur 3\n    ]\n\n    // Construction de l'énoncé\n    this.enonce = `On donne la série statistique suivante : $${valeurs.join(' ; ')}$.<br>\n    Quelle valeur faut-il ajouter à la série pour que sa moyenne soit égale à $${texNombre(moyenne)}$ ?`\n\n    // Construction de la correction\n    this.correction = `Appelons $x$ la valeur cherchée.<br>\n    On commence par calculer la somme des valeurs de la série de l'énoncé :<br>\n    $${valeurs.join(' + ')} = ${somme}$.<br>\n    Comme la série de l'énoncé contient $${effectif}$ valeurs, la nouvelle série avec $x$ en contient $${effectif + 1}$.\n    <br>On peut calculer sa moyenne avec l'expression : $\\\\dfrac{${somme} + x}{${effectif + 1}}$<br>\n    Comme cette moyenne vaut $${texNombre(moyenne)}$ d'après l'énoncé, il faut alors résoudre l'équation : <br>\n    $\\\\dfrac{${somme} + x}{${effectif + 1}} = ${texNombre(moyenne)}$\n    <br>\n    $${somme} + x = ${texNombre(moyenne)} \\\\times ${effectif + 1}$\n    <br>\n    $x = ${texNombre(moyenne)} \\\\times ${effectif + 1} - ${somme}$\n    <br>$x = ${miseEnEvidence(texNombre(x))}$`\n  }\n\n  // Ceci est la fonction qui s'occupe d'écrire l'énoncé, la correction et les réponses\n  // Elle factorise le code qui serait dupliqué dans versionAleatoire et versionOriginale\n  versionOriginale: () => void = () => {\n    // Version avec données statiques\n    const effectif = 4\n    const valeurs = [8, 12, 6, 10] // Série fixe\n    const somme = valeurs.reduce((a, b) => a + b, 0) // somme = 36\n    const moyenne = 9 // Moyenne cible fixe\n\n    // Calcul de la valeur à ajouter : x = moyenne * (effectif + 1) - somme\n    const x = moyenne * (effectif + 1) - somme // x = 9 * 5 - 36 = 9\n\n    // Distracteurs fixes\n    const distracteur2 = 7 // x - 2\n    const distracteur3 = 11 // x + 2\n    const distracteur4 = 5 // x - 4\n\n    this.appliquerLesValeurs(\n      valeurs,\n      effectif,\n      moyenne,\n      x,\n      distracteur2,\n      distracteur3,\n      distracteur4,\n    )\n  }\n\n  versionAleatoire = () => {\n    const n = 4 // nombre de réponses\n    let x: number,\n      distracteur2: number,\n      distracteur3: number,\n      distracteur4: number\n\n    do {\n      const effectif = choice([4, 5])\n      const valeurs = []\n\n      // Génération des valeurs de la série\n      for (let i = 0; i < effectif; i++) {\n        valeurs.push(randint(5, 15, 0))\n      }\n\n      const somme = valeurs.reduce((a, b) => a + b, 0)\n      const moyenne1 = somme / effectif\n\n      // Calcul de la moyenne cible\n      let moyenne: number\n      if (moyenne1 > 11) {\n        moyenne = Math.floor(moyenne1) - 1\n      } else {\n        moyenne = Math.floor(moyenne1) + 1\n      }\n\n      // Calcul de la valeur à ajouter\n      x = moyenne * (effectif + 1) - somme\n\n      // Fonction pour mélanger un tableau (Fisher-Yates)\n      function shuffleArray<T>(array: T[]): void {\n        for (let i = array.length - 1; i > 0; i--) {\n          const j = Math.floor(Math.random() * (i + 1))\n          ;[array[i], array[j]] = [array[j], array[i]]\n        }\n      }\n\n      // Génération des distracteurs\n      function genererDistracteurs(x: number): {\n        distracteur2: number\n        distracteur3: number\n        distracteur4: number\n      } {\n        // Génère les valeurs autour de x (±1, ±2, ±3)\n        const deltas = [-3, -2, -1, 1, 2, 3]\n        const candidates = deltas\n          .map((delta) => x + delta)\n          .filter((val) => val > 0) // Garde seulement les positifs\n\n        // Mélange les candidats\n        shuffleArray(candidates)\n\n        if (candidates.length < 3) {\n          throw new Error(\n            'Pas assez de valeurs positives autour de x pour générer 3 distracteurs',\n          )\n        }\n\n        const [distracteur2, distracteur3, distracteur4] = candidates.slice(\n          0,\n          3,\n        )\n        return { distracteur2, distracteur3, distracteur4 }\n      }\n\n      const distracteurs = genererDistracteurs(x)\n      distracteur2 = distracteurs.distracteur2\n      distracteur3 = distracteurs.distracteur3\n      distracteur4 = distracteurs.distracteur4\n\n      this.appliquerLesValeurs(\n        valeurs,\n        effectif,\n        moyenne,\n        x,\n        distracteur2,\n        distracteur3,\n        distracteur4,\n      )\n    } while (nombreElementsDifferents(this.reponses) < n)\n  }\n\n  constructor() {\n    super()\n    this.options = { vertical: false, ordered: false }\n    this.versionAleatoire() // Appel de la méthode pour initialiser l'exercice\n  }\n}\n"],"names":["uuid","refs","interactifReady","interactifType","amcReady","amcType","titre","dateDePublication","MoyenneQCM","ExerciceQcmA","__publicField","valeurs","somme","a","b","moyenne","x","distracteur2","distracteur3","distracteur4","shuffleArray","array","i","j","genererDistracteurs","candidates","delta","val","effectif","choice","randint","moyenne1","distracteurs","nombreElementsDifferents","texNombre","miseEnEvidence"],"mappings":"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"}