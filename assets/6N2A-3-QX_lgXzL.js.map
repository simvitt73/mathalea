{"version":3,"file":"6N2A-3-QX_lgXzL.js","sources":["../../src/exercices/6e/6N2A-3.ts"],"sourcesContent":["import { bleuMathalea } from '../../lib/colors'\nimport { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport {\n  handleAnswers,\n  setReponse,\n} from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport {\n  miseEnEvidence,\n  texteEnCouleurEtGras,\n} from '../../lib/outils/embellissements'\nimport { arrondi } from '../../lib/outils/nombres'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre =\n  \"Déterminer le dernier chiffre d'une somme ou différence entre décimaux\"\nexport const dateDePublication = '28/01/2026'\nexport const amcReady = true\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcType = 'AMCNum'\n\n/**\n * Trouver le dernier chiffre d'un calcul (somme, différence) entre décimaux\n * @author Eric Elter\n */\n\nexport const uuid = 'b38m3'\n\nexport const refs = {\n  'fr-fr': ['6N2A-3'],\n  'fr-ch': [],\n}\n\nfunction nomFractionDecimale(\n  n: number,\n): 'unités' | 'dixièmes' | 'centièmes' | 'millièmes' {\n  const correspondance = {\n    0: 'unités',\n    1: 'dixièmes',\n    2: 'centièmes',\n    3: 'millièmes',\n  } as const\n\n  if (!(n in correspondance)) {\n    throw new Error('Valeur attendue : 0, 1, 2 ou 3')\n  }\n\n  return correspondance[n as 0 | 1 | 2 | 3]\n}\n\nexport default class DernierChiffreSommeDifférenceDécimaux extends Exercice {\n  version: string\n  constructor() {\n    super()\n    this.besoinFormulaireTexte = [\n      \"Type d'opérations\",\n      'Nombres séparés par des tirets :\\n1 : Somme\\n2 : Différence',\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Nombre de décimales sur les deux nombres',\n      3,\n      'Avec le même nombre de décimales\\nAvec un nombre différent de décimales\\nPeu importe le nombre de décimales',\n    ]\n    this.besoinFormulaire3CaseACocher = ['Avec un entier']\n\n    this.sup = '1-2'\n    this.sup2 = 3\n    this.sup3 = false\n    this.nbQuestions = 4 // Ici le nombre de questions\n    this.version = '6e'\n    this.correctionDetailleeDisponible = true\n  }\n\n  nouvelleVersion() {\n    this.consigne =\n      this.nbQuestions > 1\n        ? 'Pour chaque calcul, déterminer le dernier chiffre (non nul) du résultat.'\n        : 'Déterminer le dernier chiffre (non nul) du résultat de ce calcul.'\n    const typeDeQuestionsDisponibles = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 2,\n      melange: 3,\n      defaut: 2,\n      nbQuestions: 2,\n      listeOfCase: ['somme', 'difference'],\n    })\n\n    const listeTypeDeQuestions = combinaisonListes(\n      typeDeQuestionsDisponibles,\n      this.nbQuestions,\n    )\n\n    if (this.sup3) this.sup2 = false\n    for (\n      let i = 0, a = 0, b = 0, texte = '', texteCorr = '', cpt = 0;\n      i < this.nbQuestions && cpt < 50;\n    ) {\n      let chiffreA, chiffreB\n      let resultat = 0\n\n      const memeNbDeDecimales =\n        this.sup2 === 3 ? choice([true, false]) : this.sup2 === 1\n      const exposant = randint(1, 3)\n      let exposant1 = randint(1, 3)\n      let exposant2 = randint(1, 3, exposant1)\n      if (this.sup3) {\n        choice([true, false]) ? (exposant1 = 0) : (exposant2 = 0)\n      }\n      switch (listeTypeDeQuestions[i]) {\n        case 'somme':\n          chiffreA = randint(1, 9)\n          chiffreB = randint(1, 9, [10 - chiffreA])\n          a =\n            randint(0, 1) * randint(1, 9) * 10000 +\n            randint(100, 999) * 10 +\n            chiffreA\n          b =\n            randint(0, 1) * randint(1, 9) * 10000 +\n            randint(10, 999) * 10 +\n            chiffreB\n          if (memeNbDeDecimales) {\n            a = arrondi(a / 10 ** exposant)\n            b = arrondi(b / 10 ** exposant)\n            resultat = (chiffreA + chiffreB) % 10\n          } else {\n            a = arrondi(a / 10 ** exposant1, exposant1)\n            b = arrondi(b / 10 ** exposant2, exposant2)\n            resultat = exposant1 > exposant2 ? chiffreA : chiffreB\n          }\n          texte = `$${texNombre(a)} + ${texNombre(b)}$`\n          texteCorr = ''\n          if (this.correctionDetaillee) {\n            if (memeNbDeDecimales) {\n              texteCorr += `Dans les deux termes ($${texNombre(a)}$ et $${texNombre(b)}$), le dernier chiffre non nul est le chiffre des ${nomFractionDecimale(exposant)} (respectivement $${chiffreA}$ et $${chiffreB}$).<br>`\n              texteCorr += `Le dernier chiffre attendu de la somme sera donc le chiffre des ${texteEnCouleurEtGras(nomFractionDecimale(exposant), bleuMathalea)}.<br>`\n              texteCorr += `Ce sera donc le chiffre des unités de la somme des chiffres respectifs des ${nomFractionDecimale(exposant)} : $${chiffreA}+${chiffreB}=${chiffreA + chiffreB < 10 ? '' : 1}${miseEnEvidence(resultat)}$.<br>`\n            } else {\n              texteCorr += `Dans $${texNombre(a)}$, le dernier chiffre non nul est le chiffre des ${nomFractionDecimale(exposant1)}.<br>`\n              texteCorr += `Dans $${texNombre(b)}$, le dernier chiffre non nul est le chiffre des ${nomFractionDecimale(exposant2)}.<br>`\n              texteCorr += `Le dernier chiffre attendu de la somme sera donc le chiffre des ${texteEnCouleurEtGras(nomFractionDecimale(Math.max(exposant1, exposant2)), bleuMathalea)}, soit $${miseEnEvidence(resultat)}$.<br>`\n            }\n          }\n          texteCorr += `Le dernier chiffre de $${texNombre(a)} + ${texNombre(b)}$ est $${miseEnEvidence(resultat)}$.`\n\n          break\n        case 'difference':\n          chiffreA = randint(1, 9)\n          chiffreB = randint(1, 9, [chiffreA])\n          do {\n            a =\n              randint(0, 1) * randint(1, 9) * 10000 +\n              randint(100, 999) * 10 +\n              chiffreA\n            b =\n              randint(0, 1) * randint(1, 9) * 10000 +\n              randint(10, 999) * 10 +\n              chiffreB\n\n            if (memeNbDeDecimales) {\n              a = arrondi(a / 10 ** exposant)\n              b = arrondi(b / 10 ** exposant)\n              resultat =\n                chiffreA > chiffreB\n                  ? chiffreA - chiffreB\n                  : 10 + chiffreA - chiffreB\n            } else {\n              a = arrondi(a / 10 ** exposant1, exposant1)\n              if (exposant2 !== 0) b = arrondi(b / 10 ** exposant2, exposant2)\n              else b = randint(0, Math.floor(a / 10)) * 10 + chiffreB\n\n              resultat = exposant1 > exposant2 ? chiffreA : 10 - chiffreB\n            }\n          } while (b >= a && a < 2)\n          texte = `$${texNombre(a)} - ${texNombre(b)}$`\n          texteCorr = ''\n          if (this.correctionDetaillee) {\n            if (memeNbDeDecimales) {\n              texteCorr += `Dans les deux termes ($${texNombre(a)}$ et $${texNombre(b)}$), le dernier chiffre non nul est le chiffre des ${nomFractionDecimale(exposant)} (respectivement $${chiffreA}$ et $${chiffreB}$).<br>`\n              texteCorr += `Le dernier chiffre attendu sera donc le chiffre des ${texteEnCouleurEtGras(nomFractionDecimale(exposant), bleuMathalea)}`\n              texteCorr +=\n                chiffreA >= chiffreB\n                  ? ` et $${chiffreA}-${chiffreB}=${miseEnEvidence(resultat)}$.<br>`\n                  : `.<br>Mais comme $${chiffreA}<${chiffreB}$, il faut trouver ajouter une dizaine à $${chiffreA}$ et trouver le résultat de $(10+${chiffreA})-${chiffreB}$, soit $${miseEnEvidence(resultat)}$.<br>`\n            } else {\n              texteCorr += `Dans $${texNombre(a)}$, le dernier chiffre non nul est le chiffre des ${nomFractionDecimale(exposant1)}.<br>`\n              texteCorr += `Dans $${texNombre(b)}$, le dernier chiffre non nul est le chiffre des ${nomFractionDecimale(exposant2)}.<br>`\n              texteCorr += `Le dernier chiffre attendu sera donc le chiffre des ${texteEnCouleurEtGras(nomFractionDecimale(Math.max(exposant1, exposant2)), bleuMathalea)}.<br>`\n              texteCorr +=\n                Math.max(exposant1, exposant2) === exposant1\n                  ? `Puisque c'est $${texNombre(a)}$ qui contient le chiffre des ${nomFractionDecimale(Math.max(exposant1, exposant2))}, ce sera donc ce chiffre qui sera le dernier chiffre attendu de cette différence.<br>`\n                  : `Puisque c'est $${texNombre(b)}$ qui contient le chiffre des ${nomFractionDecimale(Math.max(exposant1, exposant2))}, il faut aussi utiliser le chiffre des ${nomFractionDecimale(Math.max(exposant1, exposant2))} de $${texNombre(a)}$ qui est, en fait, $0$ (car $${texNombre(a)}=${texNombre(a, exposant2, true)}$).<br>\n                      On ajoute une dizaine à $0$ auquel on soustrait $${chiffreB}$, soit $(10 + 0)-${chiffreB}=${miseEnEvidence(resultat)}$.<br>`\n            }\n          }\n          texteCorr += `Le dernier chiffre de $${texNombre(a)} - ${texNombre(b)}$ est $${miseEnEvidence(resultat)}$.`\n          break\n      }\n      if (this.interactif) {\n        texte =\n          'Le dernier chiffre de ' +\n          texte +\n          ' est :' +\n          ajouteChampTexteMathLive(this, i, KeyboardType.clavierNumbers)\n        handleAnswers(this, i, {\n          reponse: {\n            value: resultat,\n            options: { nombreDecimalSeulement: true },\n          },\n        })\n      }\n      if (context.isAmc) {\n        setReponse(this, i, resultat)\n        this.autoCorrection[i].enonce =\n          texte.substring(0, texte.length - 1) +\n          '~=$<br>Le chiffre des unités est : '\n        this.autoCorrection[i].propositions = [{ texte: texteCorr }]\n        // @ts-expect-error trop compliqué à typer\n        this.autoCorrection[i].reponse.param.digits = 1\n        // @ts-expect-error trop compliqué à typer\n        this.autoCorrection[i].reponse.param.decimals = 0\n      }\n      if (this.questionJamaisPosee(i, a, b)) {\n        // Si la question n'a jamais été posée, on la stocke dans la liste des questions\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this) // On envoie l'exercice à la fonction de mise en page\n  }\n}\n"],"names":["titre","dateDePublication","amcReady","interactifReady","interactifType","amcType","uuid","refs","nomFractionDecimale","n","correspondance","DernierChiffreSommeDifférenceDécimaux","Exercice","__publicField","typeDeQuestionsDisponibles","gestionnaireFormulaireTexte","listeTypeDeQuestions","combinaisonListes","i","a","b","texte","texteCorr","cpt","chiffreA","chiffreB","resultat","memeNbDeDecimales","choice","exposant","randint","exposant1","exposant2","arrondi","texNombre","texteEnCouleurEtGras","bleuMathalea","miseEnEvidence","ajouteChampTexteMathLive","KeyboardType","handleAnswers","context","setReponse","listeQuestionsToContenu"],"mappings":"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"}