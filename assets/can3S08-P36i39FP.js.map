{"version":3,"file":"can3S08-P36i39FP.js","sources":["../../src/exercices/can/3e/can3S08.ts"],"sourcesContent":["import { orangeMathalea } from 'apigeom/src/elements/defaultValues'\nimport { KeyboardType } from '../../../lib/interactif/claviers/keyboard'\nimport { choice, shuffle } from '../../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../../lib/outils/embellissements'\nimport { texNombre } from '../../../lib/outils/texNombre'\nimport { fraction } from '../../../modules/fractions'\nimport { randint } from '../../../modules/outils'\nimport ExerciceSimple from '../../ExerciceSimple'\nexport const titre = 'Calculer une probabilité'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n/**\n * @author Jean-Claude Lhote\n\n * Date de publication\n*/\nexport const uuid = 'd86bf'\n\nexport const refs = {\n  'fr-fr': ['can3S08', '3AutoP01-1'],\n  'fr-ch': [],\n}\nexport default class CalculsProbabilite3 extends ExerciceSimple {\n  constructor() {\n    super()\n    this.formatChampTexte = KeyboardType.clavierDeBaseAvecFraction\n    this.typeExercice = 'simple'\n    this.nbQuestions = 1\n    this.versionQcmDisponible = true\n    this.spacing = 1.5\n    this.spacingCorr = 1.5\n  }\n\n  nouvelleVersion() {\n    let a: number, b: number\n    const choix = choice([true, false])\n\n    // On choisit le \"scénario\" global : a (noire/blanche, fraction) ou b (bleue/rouge, décimal)\n    const scenario = choice(['a', 'a', 'b'])\n    const formatDecimal = scenario === 'b'\n\n    // Pour le scénario b, on peut avoir un total à 10 ou 100 (comme dans l'ancien code)\n    let denom = 0\n    if (!formatDecimal) {\n      // scénario a : fraction classique avec a in [2,9], b in [5,15]\n      a = randint(2, 9)\n      b = randint(5, 15)\n      denom = a + b\n    } else {\n      // scénario b : total 10 ou 100\n      if (choice([true, false])) {\n        a = randint(2, 9)\n        b = 10 - a\n      } else {\n        a = randint(10, 80)\n        b = 100 - a\n      }\n      denom = a + b\n    }\n\n    // Choix des couleurs selon le scénario pour garder l'ancienne formulation\n    const situations = [\n      {\n        start: 'On tire une boule au hasard dans une urne',\n        article: 'une',\n        itemSing: 'boule',\n        itemPlur: 'boules',\n        lab1Sing: 'noire',\n        lab1Plur: 'noires',\n        lab2Sing: 'blanche',\n        lab2Plur: 'blanches',\n      },\n      {\n        start: 'On tire une carte au hasard dans un paquet',\n        article: 'une',\n        itemSing: 'carte',\n        itemPlur: 'cartes',\n        lab1Sing: 'rouge',\n        lab1Plur: 'rouges',\n        lab2Sing: 'verte',\n        lab2Plur: 'vertes',\n      },\n      {\n        start: 'On prend au hasard un bonbon dans un bocal',\n        article: 'un',\n        itemSing: 'bonbon',\n        itemPlur: 'bonbons',\n        lab1Sing: 'bleu',\n        lab1Plur: 'bleus',\n        lab2Sing: 'jaune',\n        lab2Plur: 'jaunes',\n      },\n      {\n        start: 'On choisit au hasard un ticket parmi',\n        itemSing: 'ticket',\n        article: 'un',\n        itemPlur: 'tickets',\n        lab1Sing: 'gagnant',\n        lab1Plur: 'gagnants',\n        lab2Sing: 'perdant',\n        lab2Plur: 'perdants',\n      },\n      {\n        start: 'On choisit au hasard une bille dans un sac',\n        itemSing: 'bille',\n        article: 'une',\n        itemPlur: 'billes',\n        lab1Sing: 'claire',\n        lab1Plur: 'claires',\n        lab2Sing: 'foncée',\n        lab2Plur: 'foncées',\n      },\n    ]\n\n    const situ = choice(situations)\n    const label1Plur = situ.lab1Plur\n    const label2Plur = situ.lab2Plur\n    const label1Sing = situ.lab1Sing\n    const label2Sing = situ.lab2Sing\n    const itemSing = situ.itemSing\n    const article = situ.article\n\n    const couleur1Plur = label1Plur\n    const couleur2Plur = label2Plur\n    const couleur1Sing = label1Sing\n    const couleur2Sing = label2Sing\n    const couleurDemandee = choix ? couleur1Sing : couleur2Sing\n\n    // Construction de l'énoncé (utilise les formes plurielles pour la description des quantités)\n    this.question = `${situ.start} contenant $${a}$ ${situ.itemPlur} ${couleur1Plur} et $${b}$ ${situ.itemPlur} ${couleur2Plur}.<br>\n\n             Quelle est la probabilité d'obtenir ${article} ${itemSing} ${couleurDemandee} ? <br>\n\n             ${formatDecimal ? 'On donnera le résultat sous forme décimale.' : \"On donnera le résultat sous forme d'une fraction irréductible.\"}`\n\n    // Correction commune + partie spécifique selon format\n    this.correction = `Dans une situation d'équiprobabilité,\n        on calcule la probabilité d'un événement par le quotient : \n        $\\\\dfrac{\\\\text{Nombre d'issues favorables}}{\\\\text{Nombre total d'issue}}$. <br>\n        La probabilité est donc donnée par :   $\\\\dfrac{\\\\text{Nombre de boules ${couleurDemandee}s}}{\\\\text{Nombre total de boules}}\n             =`\n    if (!formatDecimal) {\n      // fraction\n      const reponsepossible = `${choix ? fraction(a, denom).texFraction : fraction(b, denom).texFraction}`\n      this.correction += `${fraction(a, denom).estIrreductible ? miseEnEvidence(reponsepossible) : reponsepossible}  ${choix ? fraction(a, denom).texSimplificationAvecEtapes(false, orangeMathalea) : fraction(b, denom).texSimplificationAvecEtapes(false, orangeMathalea)}$`\n\n      this.reponse = choix\n        ? `$${fraction(a, denom).texFractionSimplifiee}$`\n        : `$${fraction(b, denom).texFractionSimplifiee}$`\n    } else {\n      // décimal\n      this.correction += `${choix ? fraction(a, denom).texFraction : fraction(b, denom).texFraction} =${miseEnEvidence(choix ? texNombre(a / denom) : texNombre(b / denom))}$`\n      this.reponse = choix ? a / denom : b / denom\n    }\n    this.correction += '.'\n    // Version QCM : proposer des distracteurs plausibles\n    if (this.versionQcm) {\n      const numCorrect = choix ? a : b\n      const correctTex = formatDecimal\n        ? texNombre(numCorrect / denom)\n        : fraction(numCorrect, denom).texFractionSimplifiee\n\n      const candidates: string[] = []\n\n      if (!formatDecimal) {\n        // erreurs typiques en fraction\n        candidates.push(fraction(numCorrect, denom).texFraction) // éventuelle écriture non réduite\n        candidates.push(fraction(denom - numCorrect, denom).texFraction) // complémentaire 1-p (non réduite)\n        candidates.push(\n          fraction(denom - numCorrect, denom).texFractionSimplifiee,\n        ) // complémentaire réduite\n        // mauvaise lecture: inverser num/den\n        candidates.push(fraction(denom, numCorrect).texFraction)\n        // confusion avec la partie non demandée\n        const otherNum = choix ? b : a\n        candidates.push(fraction(otherNum, denom).texFraction)\n      } else {\n        // erreurs typiques en décimal\n        candidates.push(texNombre(numCorrect / denom)) // écriture correcte (peut être identique)\n        candidates.push(texNombre((denom - numCorrect) / denom)) // complémentaire 1-p\n        candidates.push(texNombre(numCorrect, 0)) // oublier le dénominateur\n        // erreurs d'arrondi ou confusion entre 10/100\n        candidates.push(texNombre(Math.round((numCorrect / denom) * 100) / 100))\n        candidates.push(texNombre(Math.round((denom / numCorrect) * 100) / 100))\n      }\n\n      // filtrer, dédupliquer et retirer la bonne réponse\n      const uniq = Array.from(\n        new Set(candidates.filter((s) => s && s !== correctTex)),\n      )\n      const picked = shuffle(uniq).slice(0, 3)\n      // formatage pour QCM : mettre entre $...$\n      this.distracteurs = picked.map((n) => `$${n}$`)\n    }\n\n    this.canEnonce = this.question\n    this.canReponseACompleter = ''\n  }\n}\n"],"names":["titre","interactifReady","interactifType","uuid","refs","CalculsProbabilite3","ExerciceSimple","KeyboardType","a","b","choix","choice","formatDecimal","denom","randint","situ","label1Plur","label2Plur","label1Sing","label2Sing","itemSing","article","couleur1Plur","couleur2Plur","couleurDemandee","fraction","miseEnEvidence","texNombre","reponsepossible","orangeMathalea","numCorrect","correctTex","candidates","otherNum","uniq","s","picked","shuffle","n"],"mappings":"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"}