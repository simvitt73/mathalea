{"version":3,"file":"CM2N1D-3-CGggR6YP.js","sources":["../../src/exercices/CM2/CM2N1D-3.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { remplisLesBlancs } from '../../lib/interactif/questionMathLive'\nimport {\n  choice,\n  combinaisonListes,\n  shuffle,\n} from '../../lib/outils/arrayOutils'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport type { OptionsComparaisonType } from '../../lib/types'\nimport { randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport { glossaire } from './CM2N1D-2'\nexport const uuid = 'e116b'\n\nexport const refs = {\n  'fr-fr': ['CM2N1D-3'],\n  'fr-2016': ['c3N10-2'],\n  'fr-ch': [],\n}\nexport const titre = 'Décomposer des nombres entiers'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n/**\n * Decomposition d'entier version 1 : il faut compléter une décomposition écrite avec des trous pour les chiffres\n * La présence de zéros est paramétrable (valeur par défaut : sans)\n * Le nombre de chiffres est réglable de 1 à 8 (valeur par défaut : 5)\n * On peut choisir de désordonner la décomposition pour éviter le remplissage 'en suivant' (valeur par défaut : non ordonnée)\n * @author Jean-Claude Lhote\n */\nclass Decomp1 extends Exercice {\n  constructor(numeroExercice: number) {\n    super()\n\n    this.interactif = false\n    this.numeroExercice = numeroExercice\n    this.nbQuestions = 5\n    this.sup = 5 // nombre de chiffres\n    this.sup2 = false\n    this.sup4 = 1\n    this.besoinFormulaireNumerique = ['Nombre de chiffres significatifs', 8]\n    this.besoinFormulaire2CaseACocher = [\n      \"Présence de zéros à l'intérieur du nombre\",\n      false,\n    ]\n    this.besoinFormulaire4Numerique = [\n      'Type de question',\n      5,\n      \"1 : Trouver le chiffre dans l'ordre\\n2 : Trouver la classe dans l'ordre\\n3 : Trouver le chiffre dans le désordre\\n4 : Trouver la classe dans le désordre\\n5 : Mélange\",\n    ]\n  }\n\n  nouvelleVersion() {\n    const typeDeQuestions =\n      this.sup4 % 2 === 0\n        ? ['classe']\n        : this.sup4 < 5\n          ? ['chiffre']\n          : ['chiffre', 'classe']\n\n    const listeTypesDeQuestion = combinaisonListes(\n      typeDeQuestions,\n      this.nbQuestions,\n    )\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 100; ) {\n      const ordonne =\n        this.sup4 < 3 || (this.sup4 === 5 && choice([true, false]))\n      const nombreArray: number[] = []\n      const chiffresAvecExposantOrd: {\n        chiffre: number\n        exposant: number\n        classe: string\n      }[] = []\n      const nbZeros = this.sup2 ? randint(1, Math.max(this.sup - 2, 1)) : 0\n      for (let k = 0; k < this.sup; k++) {\n        const chiffre = this.sup2\n          ? k === this.sup - 1\n            ? randint(1, 9, nombreArray)\n            : randint(0, 9, nombreArray)\n          : randint(1, 9, nombreArray)\n        nombreArray.push(chiffre)\n      }\n      if (this.sup2) {\n        let nbZerosInit = nombreArray.filter((el) => el === 0).length\n        while (nbZeros > nbZerosInit) {\n          const index = randint(0, nombreArray.length - 2)\n          if (nombreArray[index] !== 0) {\n            nombreArray[index] = 0\n            nbZerosInit++\n          }\n        }\n      }\n      for (let k = 0; k < nombreArray.length; k++) {\n        chiffresAvecExposantOrd.push({\n          chiffre: nombreArray[k],\n          exposant: k,\n          classe: glossaire[k][nombreArray[k] > 1 ? 1 : 0],\n        })\n      }\n      nombreArray.reverse()\n      chiffresAvecExposantOrd.reverse()\n      const chiffresAvecExposantEtClasse = ordonne\n        ? chiffresAvecExposantOrd.filter((el) => el.chiffre !== 0)\n        : shuffle(chiffresAvecExposantOrd.filter((el) => el.chiffre !== 0))\n      // reverse() modifie nombreArray ! c'est maintenant l'élément 0, le chiffre de poids le plus fort.\n      // on injecte un zéro s'il n'y en a pas si this.sup2 est à true\n\n      // Le nombre complet écrit sans espace\n      const nombreStr = nombreArray.map((el) => String(el)).join('')\n      const items = chiffresAvecExposantEtClasse.filter(\n        (el) => el.chiffre !== 0,\n      )\n      let decompo = ''\n      const objetReponses: Record<\n        string,\n        {\n          value: string | { value: string; nombre: boolean }\n          compare?: unknown\n          options?: OptionsComparaisonType\n        }\n      > = {}\n      if (listeTypesDeQuestion[i] === 'chiffre') {\n        for (let k = 0; k < items.length; k++) {\n          decompo += `%{champ${k + 1}}\\\\text{${glossaire[items[k].exposant][items[k].chiffre > 1 ? 1 : 0]}}+`\n          objetReponses[`champ${k + 1}`] = { value: String(items[k].chiffre) }\n        }\n      } else {\n        for (let k = 0; k < items.length; k++) {\n          decompo += `${String(items[k].chiffre)}\\\\times %{champ${k + 1}}+`\n          objetReponses[`champ${k + 1}`] = {\n            value: texNombre(10 ** items[k].exposant, 0),\n            options: { nombreAvecEspace: true },\n          }\n        }\n      }\n\n      handleAnswers(this, i, objetReponses)\n      decompo = decompo.substring(0, decompo.length - 1)\n      const classe = KeyboardType.numbersSpace\n      const texte = remplisLesBlancs(\n        this,\n        i,\n        texNombre(Number(nombreStr), 0) + '=' + decompo,\n        classe,\n        '\\\\ldots',\n      )\n      const morceaux = items.map(\n        (el) => `${String(el.chiffre)}\\\\text{ ${el.classe} }`,\n      )\n      const decompStr = morceaux.join('+')\n      const texteCorr = `$${texNombre(Number(nombreStr), 0)}=${decompStr}$`\n      if (this.questionJamaisPosee(i, nombreStr)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n  }\n}\n\nexport default Decomp1\n"],"names":["uuid","refs","titre","interactifReady","interactifType","Decomp1","Exercice","numeroExercice","typeDeQuestions","listeTypesDeQuestion","combinaisonListes","i","cpt","ordonne","choice","nombreArray","chiffresAvecExposantOrd","nbZeros","randint","k","chiffre","nbZerosInit","el","index","glossaire","chiffresAvecExposantEtClasse","shuffle","nombreStr","items","decompo","objetReponses","texNombre","handleAnswers","classe","KeyboardType","texte","remplisLesBlancs","decompStr","texteCorr"],"mappings":"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"}