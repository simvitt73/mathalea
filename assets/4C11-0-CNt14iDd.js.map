{"version":3,"file":"4C11-0-CNt14iDd.js","sources":["../../src/exercices/4e/4C11-0.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { ecritureParentheseSiNegatif } from '../../lib/outils/ecritures'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { lettreDepuisChiffre } from '../../lib/outils/outilString'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Calculs complexes utilisant les priorités opératoires'\nexport const dateDePublication = '23/04/2025'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n/**\n * Plusieurs types de calculs avec des nombres relatifs, incluant des expressions complexes avec parenthèses imbriquées.\n *\n * Types d'expressions:\n *1. Expressions simples\n\n    Case  1: Expressions imbriquées simples: a - (b + (c - d))\n    Case  9: Opérations de multiplication avec addition: a × b + c × d\n    Case 10: Opérations de multiplication avec soustraction: a × b - c × d\n    Case 11: Expression avec fraction et multiples opérations: d + b × c - a\n\n2. Expressions complexes avec plusieurs niveaux de parenthèses\n\n    Case  2: Expression avec multiplications imbriquées: a × (b + c × d)\n    Case  4: Expression avec double niveau d'imbrication: a × (b - c × (d + e))\n    Case  8: Expression très complexe à multiples niveaux: a × (b × (c + d × e + f) - g) + h\n\n3. Expressions impliquant des fractions et des nombres décimaux\n\n    Case  3: Expression complexe avec fractions: (a - b × c) / (d + e)\n    Case  5: Expression avec nombre décimal et opérations multiples: a - (b + (c - d × e))\n    Case  6: Expression combinant multiplication et addition avec nombres décimaux: a × (b + c) - (d + e) × f\n\n4. Expressions avec multiples opérations et parenthèses imbriquées\n\n    Case  7: Expression avec fraction complexe: [a × (b + c × d)] / [e + f × g]\n    Case 12: Fraction complexe avec produits: (a - b × c) / (d × e + f)\n *\n *\n * @author Eric Elter\n */\nexport const uuid = '1bf3b'\nexport const refs = {\n  'fr-fr': ['4C11-0'],\n  'fr-ch': ['1mCN-14', '9NO6-5', '10N06-4'],\n}\n\nexport default class PrioritesEtRelatifsComplex extends Exercice {\n  constructor() {\n    super()\n    this.consigne = 'Calculer.'\n    this.spacing = 2\n    this.nbQuestions = 6\n    this.nbCols = 2\n    this.sup = 13\n    this.sup2 = true\n    this.besoinFormulaireTexte = [\n      \"Type d'expressions\",\n      [\n        'Nombres séparés par des tirets  :',\n        '1 : a - (b + (c - d))',\n        '2 : a × (b + c × d)',\n        '3 : (a - b × c) / (d + e)',\n        '4 : a × (b - c × (d + e))',\n        '5 : a - (b + (c - d × e))',\n        '6 : a × (b + c) - (d + e) × f',\n        '7 : [a × (b + c × d)] / [e + f × g]',\n        '8 : a × (b × (c + d × e + f) - g) + h',\n        '9 : a × b + c × d',\n        '10 : a × b - c × d',\n        '11 : d + b × c - a',\n        '12 : (a - b × c) / (d × e + f)',\n        '13 : Mélange',\n      ].join('\\n'),\n    ]\n\n    this.besoinFormulaire2CaseACocher = [\n      'Présentation des corrections en colonnes',\n      true,\n    ]\n    this.listeAvecNumerotation = false\n  }\n\n  nouvelleVersion() {\n    const listeTypeDeQuestions = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 1,\n      max: 12,\n      melange: 13,\n      defaut: 13,\n      nbQuestions: this.nbQuestions,\n    })\n\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      let texte = ''\n      let texteCorr = ''\n      let a = 0\n      let b = 0\n      let c = 0\n      let d, e, f, g, h\n      let resultat: string = '0'\n\n      switch (listeTypeDeQuestions[i]) {\n        case 1: {\n          // Expressions imbriquées simples: a - (b + (c - d))\n          a = randint(2, 15) * choice([-1, 1])\n          b = randint(2, 10) * choice([-1, 1])\n          c = randint(2, 10) * choice([-1, 1])\n          d = randint(2, 10) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} - (${b} + (${c} - ${ecritureParentheseSiNegatif(d)}))$`\n          // Calcul étape par étape\n          const etape1 = c - d\n          const etape2 = b + etape1\n          resultat = texNombre(a - etape2)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${a} - (${b} + (${miseEnEvidence(c + ' - ' + ecritureParentheseSiNegatif(d), 'blue')}))`\n          if (d < 0) {\n            texteCorr += `= ${a} - (${b} + (${miseEnEvidence(c + ' + ' + -d, 'blue')}))`\n          }\n          texteCorr += `= ${a} - (${miseEnEvidence(b + ' + ' + ecritureParentheseSiNegatif(etape1), 'blue')})`\n          texteCorr += `= ${a} - ${ecritureParentheseSiNegatif(etape2)}`\n          if (etape2 < 0) texteCorr += `= ${a} + ${-etape2}`\n          break\n        }\n        case 2: {\n          // Expression avec multiplications imbriquées: a × (b + c × d)\n          a = randint(2, 8) * choice([-1, 1])\n          b = randint(2, 8) * choice([-1, 1])\n          c = randint(2, 5) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${b} + ${ecritureParentheseSiNegatif(c)} \\\\times ${ecritureParentheseSiNegatif(d)})$`\n          // Calcul étape par étape\n          const etape1Q22 = c * d\n          const etape2Q22 = b + etape1Q22\n          resultat = texNombre(a * etape2Q22)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${b} + ${miseEnEvidence(ecritureParentheseSiNegatif(c) + ' \\\\times ' + ecritureParentheseSiNegatif(d), 'blue')})`\n          texteCorr += `= ${a} \\\\times (${miseEnEvidence(`${b} + ${ecritureParentheseSiNegatif(etape1Q22)}`, 'blue')})`\n          texteCorr += `= ${a} \\\\times ${ecritureParentheseSiNegatif(etape2Q22)}`\n          break\n        }\n        case 3: {\n          // Expression complexe avec fractions: (a - b × c) / (d + e)\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(1, 5) * choice([-1, 1])\n          // Pour éviter division par zéro\n          while (d + e === 0) {\n            d = randint(2, 5) * choice([-1, 1])\n            e = randint(1, 5) * choice([-1, 1])\n          }\n          b = randint(2, 5) * choice([-1, 1])\n          c = randint(2, 5) * choice([-1, 1])\n          a = b * c + randint(1, 10) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${a} - ${ecritureParentheseSiNegatif(b)} \\\\times ${ecritureParentheseSiNegatif(c)}}{${d} + ${ecritureParentheseSiNegatif(e)}}$`\n          // Calcul étape par étape\n          const etape1Q23 = b * c\n          const etape2Q23 = a - etape1Q23\n          const etape3Q23 = d + e\n          resultat = new FractionEtendue(etape2Q23, etape3Q23)\n            .texFractionSimplifiee\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${a} - ${miseEnEvidence(ecritureParentheseSiNegatif(b) + ' \\\\times ' + ecritureParentheseSiNegatif(c), 'blue')}}{${miseEnEvidence(d + ' + ' + ecritureParentheseSiNegatif(e), 'blue')}}`\n          texteCorr += `= \\\\dfrac{${miseEnEvidence(`${a} - ${ecritureParentheseSiNegatif(etape1Q23)}`, 'blue')}}{${etape3Q23}}`\n          if (etape1Q23 < 0) {\n            texteCorr += `= \\\\dfrac{${miseEnEvidence(`${a} + ${-etape1Q23}`, 'blue')}}{${etape3Q23}}`\n          }\n          if (!(etape2Q23 > 0 && etape3Q23 > 0)) {\n            texteCorr += `= \\\\dfrac{${etape2Q23}}{${etape3Q23}}`\n          }\n          break\n        }\n        case 4: {\n          // Expression avec double niveau d'imbrication: a × (b - c × (d + e))\n          a = randint(2, 5) * choice([-1, 1])\n          b = randint(5, 15) * choice([-1, 1])\n          c = randint(2, 4) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(1, 5) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${b} - ${ecritureParentheseSiNegatif(c)} \\\\times (${d} + ${ecritureParentheseSiNegatif(e)}))$`\n          // Calcul étape par étape\n          const etape1Q24 = d + e\n          const etape2Q24 = c * etape1Q24\n          const etape3Q24 = b - etape2Q24\n          resultat = texNombre(a * etape3Q24)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${b} - ${ecritureParentheseSiNegatif(c)} \\\\times (${miseEnEvidence(d + ' + ' + ecritureParentheseSiNegatif(e), 'blue')}))`\n          texteCorr += `= ${a} \\\\times (${b} - ${miseEnEvidence(ecritureParentheseSiNegatif(c) + ' \\\\times ' + ecritureParentheseSiNegatif(etape1Q24), 'blue')})`\n          texteCorr += `= ${a} \\\\times (${miseEnEvidence(b + ' - ' + ecritureParentheseSiNegatif(etape2Q24), 'blue')})`\n          if (etape2Q24 < 0) {\n            texteCorr += `= ${a} \\\\times (${miseEnEvidence(b + ' + ' + -etape2Q24, 'blue')})`\n          }\n          texteCorr += `= ${a} \\\\times ${ecritureParentheseSiNegatif(etape3Q24)}`\n          break\n        }\n        case 5: {\n          // Expression avec nombre décimal et opérations multiples: a - (b + (c - d × e))\n          a = randint(2, 7) * choice([-1, 1])\n          b = (randint(2, 10) + 0.5) * choice([-1, 1])\n          c = randint(2, 4) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(1, 5) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} - (${texNombre(b)} + (${c} - ${ecritureParentheseSiNegatif(d)} \\\\times ${ecritureParentheseSiNegatif(e)}))$`\n          // Calcul étape par étape\n          const etape1Q25 = d * e\n          const etape2Q25 = c - etape1Q25\n          const etape3Q25 = b + etape2Q25\n          resultat = texNombre(a - etape3Q25)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${a} - (${texNombre(b)} + (${c} - ${miseEnEvidence(ecritureParentheseSiNegatif(d) + ' \\\\times ' + ecritureParentheseSiNegatif(e), 'blue')}))`\n          texteCorr += `= ${a} - (${texNombre(b)} + (${miseEnEvidence(c + ' - ' + ecritureParentheseSiNegatif(etape1Q25), 'blue')}))`\n          if (etape1Q25 < 0) {\n            texteCorr += `= ${a} - (${texNombre(b)} + (${miseEnEvidence(c + ' + ' + -etape1Q25, 'blue')}))`\n          }\n          texteCorr += `= ${a} - (${miseEnEvidence(texNombre(b) + ' + ' + ecritureParentheseSiNegatif(etape2Q25), 'blue')})`\n          texteCorr += `= ${a} - ${ecritureParentheseSiNegatif(etape3Q25)}`\n          if (etape3Q25 < 0) {\n            texteCorr += `= ${a} + ${ecritureParentheseSiNegatif(-etape3Q25)}`\n          }\n          break\n        }\n        case 6: {\n          // Expression combinant multiplication et addition avec nombres décimaux: a × (b + c) - (d + e) × f\n          a = randint(2, 7) * choice([-1, 1])\n          b = (randint(2, 10) / 2) * choice([-1, 1])\n          c = (randint(2, 10) / 2) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(1, 5) * choice([-1, 1])\n          f = (randint(1, 5) + 0.5) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${texNombre(b)} + ${ecritureParentheseSiNegatif(c)}) - (${d} + ${ecritureParentheseSiNegatif(e)}) \\\\times ${ecritureParentheseSiNegatif(f)}$`\n          // Calcul étape par étape\n          const etape1Q26 = b + c\n          const etape2Q26 = a * etape1Q26\n          const etape3Q26 = d + e\n          const etape4Q26 = etape3Q26 * f\n          resultat = texNombre(etape2Q26 - etape4Q26)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${miseEnEvidence(texNombre(b) + ' + ' + ecritureParentheseSiNegatif(c), 'blue')}) - (${miseEnEvidence(d + ' + ' + ecritureParentheseSiNegatif(e), 'blue')}) \\\\times ${ecritureParentheseSiNegatif(f)}`\n          texteCorr += `= ${miseEnEvidence(a + ' \\\\times ' + ecritureParentheseSiNegatif(etape1Q26), 'blue')} - ${miseEnEvidence(ecritureParentheseSiNegatif(etape3Q26) + ' \\\\times ' + ecritureParentheseSiNegatif(f), 'blue')}`\n          texteCorr += `= ${texNombre(etape2Q26)} - ${ecritureParentheseSiNegatif(etape4Q26)}`\n          break\n        }\n        case 7: {\n          // Expression avec fraction complexe: [a × (b + c × d)] / [e + f × g]\n          a = randint(2, 7) * choice([-1, 1])\n          b = randint(2, 5) * choice([-1, 1])\n          c = randint(2, 5) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(2, 5) * choice([-1, 1])\n          f = randint(2, 5) * choice([-1, 1])\n          g = randint(2, 10) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${a} \\\\times (${b} + ${ecritureParentheseSiNegatif(c)} \\\\times ${ecritureParentheseSiNegatif(d)})}{${e} + ${ecritureParentheseSiNegatif(f)} \\\\times ${ecritureParentheseSiNegatif(g)}}$`\n          // Calcul étape par étape\n          const etape1Q27 = c * d\n          const etape2Q27 = b + etape1Q27\n          const etape3Q27 = a * etape2Q27\n          const etape4Q27 = f * g\n          const etape5Q27 = e + etape4Q27\n          resultat = new FractionEtendue(etape3Q27, etape5Q27).texFSD\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${a} \\\\times (${b} + ${miseEnEvidence(ecritureParentheseSiNegatif(c) + ' \\\\times ' + ecritureParentheseSiNegatif(d), 'blue')})}{${e} + ${miseEnEvidence(ecritureParentheseSiNegatif(f) + ' \\\\times ' + ecritureParentheseSiNegatif(g), 'blue')}}`\n          texteCorr += `= \\\\dfrac{${a} \\\\times (${miseEnEvidence(b + ' + ' + ecritureParentheseSiNegatif(etape1Q27), 'blue')})}{${miseEnEvidence(e + ' + ' + ecritureParentheseSiNegatif(etape4Q27), 'blue')}}`\n          texteCorr += `= \\\\dfrac{${a} \\\\times ${ecritureParentheseSiNegatif(etape2Q27)}}{${etape5Q27}}`\n          if (!(etape3Q27 > 0 && etape5Q27 > 0)) {\n            texteCorr += `= \\\\dfrac{${etape3Q27}}{${etape5Q27}}`\n          }\n          break\n        }\n        case 8: {\n          // Expression très complexe à multiples niveaux: a × (b × (c + d × e + f) - g) + h\n          a = randint(2, 7) * choice([-1, 1])\n          b = randint(2, 5) * choice([-1, 1])\n          c = randint(2, 5) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(2, 5) * choice([-1, 1])\n          f = randint(2, 5) * choice([-1, 1])\n          g = randint(2, 10) * choice([-1, 1])\n          h = randint(2, 10) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${b} \\\\times (${c} + ${ecritureParentheseSiNegatif(d)} \\\\times ${ecritureParentheseSiNegatif(e)} + ${ecritureParentheseSiNegatif(f)}) - ${ecritureParentheseSiNegatif(g)}) + ${ecritureParentheseSiNegatif(h)}$`\n          // Calcul étape par étape\n          const etape1Q28 = d * e\n          const etape2Q28 = c + etape1Q28 + f\n          const etape3Q28 = b * etape2Q28\n          const etape4Q28 = etape3Q28 - g\n          const etape5Q28 = a * etape4Q28\n          resultat = texNombre(etape5Q28 + h)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times (${b} \\\\times (${c} + ${miseEnEvidence(ecritureParentheseSiNegatif(d) + ' \\\\times ' + ecritureParentheseSiNegatif(e), 'blue')} + ${ecritureParentheseSiNegatif(f)}) - ${ecritureParentheseSiNegatif(g)}) + ${ecritureParentheseSiNegatif(h)}`\n          texteCorr += `= ${a} \\\\times (${b} \\\\times (${miseEnEvidence(c + ' + ' + ecritureParentheseSiNegatif(etape1Q28) + ' + ' + ecritureParentheseSiNegatif(f), 'blue')}) - ${ecritureParentheseSiNegatif(g)}) + ${ecritureParentheseSiNegatif(h)}`\n          texteCorr += `= ${a} \\\\times (${miseEnEvidence(b + ' \\\\times ' + ecritureParentheseSiNegatif(etape2Q28), 'blue')} - ${ecritureParentheseSiNegatif(g)}) + ${ecritureParentheseSiNegatif(h)}`\n          texteCorr += `= ${a} \\\\times (${miseEnEvidence(etape3Q28 + ' - ' + ecritureParentheseSiNegatif(g), 'blue')}) + ${ecritureParentheseSiNegatif(h)}`\n          if (g < 0) {\n            texteCorr += `= ${a} \\\\times (${miseEnEvidence(etape3Q28 + ' + ' + -g, 'blue')}) + ${ecritureParentheseSiNegatif(h)}`\n          }\n          texteCorr += `= ${miseEnEvidence(a + ' \\\\times ' + ecritureParentheseSiNegatif(etape4Q28), 'blue')} + ${ecritureParentheseSiNegatif(h)}`\n          texteCorr += `= ${etape5Q28} + ${ecritureParentheseSiNegatif(h)}`\n          break\n        }\n        case 9: {\n          // Opérations de multiplication avec addition: a × b + c × d\n          a = randint(2, 7) * choice([-1, 1])\n          b = (randint(3, 10) / 2) * choice([-1, 1])\n          c = randint(2, 5) * choice([-1, 1])\n          d = (randint(3, 10) / 2) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times ${ecritureParentheseSiNegatif(b)} + ${ecritureParentheseSiNegatif(c)} \\\\times ${ecritureParentheseSiNegatif(d)}$`\n          // Calcul étape par étape\n          const etape1Q29 = a * b\n          const etape2Q29 = c * d\n          resultat = texNombre(etape1Q29 + etape2Q29)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${miseEnEvidence(a + ' \\\\times ' + ecritureParentheseSiNegatif(b), 'blue')} + ${miseEnEvidence(ecritureParentheseSiNegatif(c) + ' \\\\times ' + ecritureParentheseSiNegatif(d), 'blue')}`\n          texteCorr += `= ${texNombre(etape1Q29)} + ${ecritureParentheseSiNegatif(etape2Q29)}`\n          break\n        }\n        case 10: {\n          // Opérations de multiplication avec soustraction: a × b - c × d\n          a = randint(2, 7) * choice([-1, 1])\n          b = (randint(3, 10) / 2) * choice([-1, 1])\n          c = (randint(3, 10) / 2) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${a} \\\\times ${ecritureParentheseSiNegatif(b)} - ${ecritureParentheseSiNegatif(c)} \\\\times ${ecritureParentheseSiNegatif(d)}$`\n          // Calcul étape par étape\n          const etape1Q30 = a * b\n          const etape2Q30 = c * d\n          resultat = texNombre(etape1Q30 - etape2Q30)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${miseEnEvidence(a + ' \\\\times ' + ecritureParentheseSiNegatif(b), 'blue')} - ${miseEnEvidence(ecritureParentheseSiNegatif(c) + ' \\\\times ' + ecritureParentheseSiNegatif(d), 'blue')}`\n          texteCorr += `= ${texNombre(etape1Q30)} - ${ecritureParentheseSiNegatif(etape2Q30)}`\n          if (etape2Q30 < 0) {\n            texteCorr += `= ${texNombre(etape1Q30)} + ${-etape2Q30}`\n          }\n          break\n        }\n        case 11: {\n          // Expression avec fraction et multiples opérations: d + b × c - a\n          a = randint(2, 7) * choice([-1, 1])\n          b = (randint(3, 10) / 2) * choice([-1, 1])\n          c = randint(3, 10) * choice([-1, 1])\n          e = choice([2, 4, 5])\n          f = new FractionEtendue(\n            randint(3, 10, [e, 2 * e, 3 * e, 4 * e, 5 * e]) * choice([-1, 1]),\n            e,\n          )\n          d = f.texFSD\n          g = f.toNumber()\n          texte = `$${lettreDepuisChiffre(i + 1)} = ${d} + ${ecritureParentheseSiNegatif(b)} \\\\times ${ecritureParentheseSiNegatif(c)} - ${ecritureParentheseSiNegatif(a)}$`\n          // Calcul étape par étape\n          const etape1Q31 = b * c\n          const etape2Q31 = g + etape1Q31\n          resultat = texNombre(etape2Q31 - a)\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = ${d} + ${miseEnEvidence(`${ecritureParentheseSiNegatif(b)} \\\\times ${ecritureParentheseSiNegatif(c)}`, 'blue')} - ${ecritureParentheseSiNegatif(a)}`\n          texteCorr += `= ${miseEnEvidence(`${d} + ${ecritureParentheseSiNegatif(etape1Q31)}`, 'blue')} - ${ecritureParentheseSiNegatif(a)}`\n          texteCorr += `= ${miseEnEvidence(`${texNombre(g)} + ${ecritureParentheseSiNegatif(etape1Q31)}`, 'blue')} - ${ecritureParentheseSiNegatif(a)}`\n          texteCorr += `= ${etape2Q31} - ${ecritureParentheseSiNegatif(a)}`\n          if (a < 0) texteCorr += `= ${etape2Q31} + ${-a}`\n          break\n        }\n        case 12: {\n          // Fraction complexe avec produits: (a - b × c) / (d × e + f)\n          a = randint(2, 7) * choice([-1, 1])\n          b = randint(2, 5) * choice([-1, 1])\n          c = randint(2, 5) * choice([-1, 1])\n          d = randint(2, 5) * choice([-1, 1])\n          e = randint(2, 5) * choice([-1, 1])\n          f = randint(2, 5) * choice([-1, 1])\n          texte = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${a} - ${ecritureParentheseSiNegatif(b)} \\\\times ${ecritureParentheseSiNegatif(c)}}{${d} \\\\times ${ecritureParentheseSiNegatif(e)} + ${ecritureParentheseSiNegatif(f)}}$`\n          // Calcul étape par étape\n          const etape1Q32 = b * c\n          const etape2Q32 = a - etape1Q32\n          const etape3Q32 = d * e\n          const etape4Q32 = etape3Q32 + f\n          resultat = new FractionEtendue(etape2Q32, etape4Q32).texFSD\n          texteCorr = `$${lettreDepuisChiffre(i + 1)} = \\\\dfrac{${a} - ${miseEnEvidence(ecritureParentheseSiNegatif(b) + ' \\\\times ' + ecritureParentheseSiNegatif(c), 'blue')}}{${miseEnEvidence(d + ' \\\\times ' + ecritureParentheseSiNegatif(e), 'blue')} + ${ecritureParentheseSiNegatif(f)}}`\n          texteCorr += `= \\\\dfrac{${miseEnEvidence(`${a} - ${ecritureParentheseSiNegatif(etape1Q32)}`, 'blue')}}{${miseEnEvidence(`${etape3Q32} + ${ecritureParentheseSiNegatif(f)}`, 'blue')}}`\n          if (etape1Q32 < 0) {\n            texteCorr += `= \\\\dfrac{${a} + ${-etape1Q32}}{${etape3Q32} + ${ecritureParentheseSiNegatif(f)}}`\n          }\n          if (!(etape2Q32 > 0 && etape4Q32 > 0)) {\n            texteCorr += `= \\\\dfrac{${etape2Q32}}{${etape4Q32}}`\n          }\n          break\n        }\n      }\n      texteCorr += `= ${miseEnEvidence(resultat)}$`\n\n      texte = parenthesesExterieuresPlusGrandes(texte)\n      texteCorr = parenthesesExterieuresPlusGrandes(texteCorr)\n\n      // texte += ' num du case : ' + listeTypeDeQuestions[i]\n\n      if (this.sup2) {\n        // Transformation de texteCorr en lignes séparées avec $\n        const texteCorrection = texteCorr.substring(1, texteCorr.length - 1) // Enlève premier et dernier $\n        const lignesCorr = texteCorrection.split('=')\n        const premierElement = lignesCorr[0]\n        lignesCorr.shift()\n\n        // Création du double saut de ligne pour FractionEtendue ou dfrac\n        let nouvelleCorrection = '$' + premierElement + '='\n\n        for (let i = 0; i < lignesCorr.length; i++) {\n          if (i > 0) {\n            // Détermine si un saut de ligne double est nécessaire\n            if (\n              lignesCorr[i - 1].includes('FractionEtendue') ||\n              lignesCorr[i - 1].includes('dfrac')\n            ) {\n              nouvelleCorrection += '$<br><br>$' + premierElement + '='\n            } else {\n              nouvelleCorrection += '$<br>$' + premierElement + '='\n            }\n          }\n          nouvelleCorrection += lignesCorr[i]\n        }\n\n        texteCorr = nouvelleCorrection + '$'\n      }\n\n      handleAnswers(this, i, {\n        reponse: {\n          value: resultat,\n          options: { nombreDecimalSeulement: true, fractionEgale: true },\n        },\n      })\n      texte += ajouteChampTexteMathLive(\n        this,\n        i,\n        KeyboardType.clavierDeBaseAvecFraction,\n        { texteAvant: '=' },\n      )\n\n      if (this.questionJamaisPosee(i, a, b, c)) {\n        // Si la question n'a jamais été posée, on en créé une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\n/**\n * Remplace les parenthèses par des délimiteurs LaTeX selon leur niveau d'imbrication.\n * Les plus intérieures sont \\left( et \\right), et on utilise ensuite\n * \\bigl(/\\bigr), \\Bigl(/\\Bigr), \\biggl(/\\biggr), \\Biggl(/\\Biggr) pour les niveaux plus extérieurs.\n * @param expr Expression mathématique avec parenthèses\n * @returns Expression avec délimiteurs LaTeX\n * @author : chatGPT\n */\nfunction replaceParenthesesWithLatexDelimiters(expr: string): string {\n  function processSegment(segment: string): string {\n    interface Paren {\n      index: number\n      isOpening: boolean\n      level: number\n      matchIndex?: number\n    }\n\n    const parens: Paren[] = []\n    const stack: Paren[] = []\n    let level = 0\n\n    // Collecter parenthèses + associer les paires\n    for (let i = 0; i < segment.length; i++) {\n      if (segment[i] === '(') {\n        level++\n        const opening: Paren = { index: i, isOpening: true, level }\n        parens.push(opening)\n        stack.push(opening)\n      } else if (segment[i] === ')') {\n        const opening = stack.pop()\n        if (opening) {\n          const closing: Paren = {\n            index: i,\n            isOpening: false,\n            level,\n            matchIndex: opening.index,\n          }\n          opening.matchIndex = i\n          closing.matchIndex = opening.index\n          parens.push(closing)\n        }\n        level--\n      }\n    }\n\n    const result = segment.split('')\n\n    // Obtenir les niveaux d'imbrication max de chaque paire\n    const groups = parens\n      .filter((p) => p.isOpening && p.matchIndex !== undefined)\n      .map((p) => ({\n        start: p.index,\n        end: p.matchIndex!,\n        level: p.level,\n      }))\n\n    // Trier par profondeur (plus externes d'abord)\n    groups.sort((a, b) => a.level - b.level)\n\n    for (const group of groups) {\n      const { start, end, level } = group\n\n      // Le niveau d'affichage doit être inversé : intérieur = plus petit\n      const maxDepth = groups\n        .filter((g) => g.start >= start && g.end <= end)\n        .reduce((max, g) => Math.max(max, g.level), 1)\n\n      const relativeLevel = maxDepth - level + 1\n\n      const useSize = (relativeLevel: number) => {\n        if (relativeLevel === 1) return ['\\\\left(', '\\\\right)']\n        if (relativeLevel === 2) return ['\\\\Bigl(', '\\\\Bigr)']\n        if (relativeLevel === 3) return ['\\\\Biggl(', '\\\\Biggr)']\n        return ['\\\\Biggl(', '\\\\Biggr)']\n      }\n\n      const [open, close] = useSize(relativeLevel)\n\n      result[start] = open\n      result[end] = close\n    }\n\n    return result.join('')\n  }\n\n  const parts = expr.split('=')\n  const processedParts = parts.map(processSegment)\n  return processedParts.join('=')\n}\n\nfunction parenthesesExterieuresPlusGrandes(texte: string): string {\n  const contenu = texte.substring(1, texte.length - 1)\n  const transforme = replaceParenthesesWithLatexDelimiters(contenu)\n  return `$${transforme}$`\n}\n"],"names":["titre","dateDePublication","interactifReady","interactifType","uuid","refs","PrioritesEtRelatifsComplex","Exercice","listeTypeDeQuestions","gestionnaireFormulaireTexte","i","cpt","texte","texteCorr","a","b","c","d","e","f","g","h","resultat","randint","choice","lettreDepuisChiffre","ecritureParentheseSiNegatif","etape1","etape2","texNombre","miseEnEvidence","etape1Q22","etape2Q22","etape1Q23","etape2Q23","etape3Q23","FractionEtendue","etape1Q24","etape2Q24","etape3Q24","etape1Q25","etape2Q25","etape3Q25","etape1Q26","etape2Q26","etape3Q26","etape4Q26","etape1Q27","etape2Q27","etape3Q27","etape4Q27","etape5Q27","etape1Q28","etape2Q28","etape3Q28","etape4Q28","etape5Q28","etape1Q29","etape2Q29","etape1Q30","etape2Q30","etape1Q31","etape2Q31","etape1Q32","etape2Q32","etape3Q32","etape4Q32","parenthesesExterieuresPlusGrandes","lignesCorr","premierElement","nouvelleCorrection","handleAnswers","ajouteChampTexteMathLive","KeyboardType","listeQuestionsToContenu","replaceParenthesesWithLatexDelimiters","expr","processSegment","segment","parens","stack","level","opening","closing","result","groups","p","group","start","end","relativeLevel","max","useSize","open","close","contenu"],"mappings":"koFAgBO,MAAMA,GAAQ,wDACRC,GAAoB,aACpBC,GAAkB,GAClBC,GAAiB,WAiCjBC,GAAO,QACPC,GAAO,CAClB,QAAS,CAAC,QAAQ,EAClB,QAAS,CAAC,UAAW,SAAU,SAAS,CAC1C,EAEA,MAAqBC,WAAmCC,CAAS,CAC/D,aAAc,CACZ,MAAA,EACA,KAAK,SAAW,YAChB,KAAK,QAAU,EACf,KAAK,YAAc,EACnB,KAAK,OAAS,EACd,KAAK,IAAM,GACX,KAAK,KAAO,GACZ,KAAK,sBAAwB,CAC3B,qBACA,CACE,oCACA,wBACA,sBACA,4BACA,4BACA,4BACA,gCACA,sCACA,wCACA,oBACA,qBACA,qBACA,iCACA,cAAA,EACA,KAAK;AAAA,CAAI,CAAA,EAGb,KAAK,6BAA+B,CAClC,2CACA,EAAA,EAEF,KAAK,sBAAwB,EAC/B,CAEA,iBAAkB,CAChB,MAAMC,EAAuBC,EAA4B,CACvD,OAAQ,KAAK,IACb,IAAK,EACL,IAAK,GACL,QAAS,GACT,OAAQ,GACR,YAAa,KAAK,WAAA,CACnB,EAED,QAASC,EAAI,EAAGC,EAAM,EAAGD,EAAI,KAAK,aAAeC,EAAM,IAAM,CAC3D,IAAIC,EAAQ,GACRC,EAAY,GACZC,EAAI,EACJC,EAAI,EACJC,EAAI,EACJC,EAAGC,EAAGC,EAAGC,EAAGC,EACZC,EAAmB,IAEvB,OAAQd,EAAqBE,CAAC,EAAA,CAC5B,IAAK,GAAG,CAENI,EAAIS,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCT,EAAIQ,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCR,EAAIO,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCP,EAAIM,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,OAAOC,CAAC,OAAOC,CAAC,MAAMU,EAA4BT,CAAC,CAAC,MAEjG,MAAMU,EAASX,EAAIC,EACbW,EAASb,EAAIY,EACnBL,EAAWO,EAAUf,EAAIc,CAAM,EAC/Bf,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,OAAOC,CAAC,OAAOe,EAAed,EAAI,MAAQU,EAA4BT,CAAC,EAAG,MAAM,CAAC,KAC9HA,EAAI,IACNJ,GAAa,KAAKC,CAAC,OAAOC,CAAC,OAAOe,EAAed,EAAI,MAAQ,CAACC,EAAG,MAAM,CAAC,MAE1EJ,GAAa,KAAKC,CAAC,OAAOgB,EAAef,EAAI,MAAQW,EAA4BC,CAAM,EAAG,MAAM,CAAC,IACjGd,GAAa,KAAKC,CAAC,MAAMY,EAA4BE,CAAM,CAAC,GACxDA,EAAS,IAAGf,GAAa,KAAKC,CAAC,MAAM,CAACc,CAAM,IAChD,KACF,CACA,IAAK,GAAG,CAENd,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAIQ,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAaC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,YAAYU,EAA4BT,CAAC,CAAC,KAEzI,MAAMc,EAAYf,EAAIC,EAChBe,EAAYjB,EAAIgB,EACtBT,EAAWO,EAAUf,EAAIkB,CAAS,EAClCnB,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAaC,CAAC,MAAMe,EAAeJ,EAA4BV,CAAC,EAAI,YAAcU,EAA4BT,CAAC,EAAG,MAAM,CAAC,IAC1KJ,GAAa,KAAKC,CAAC,aAAagB,EAAe,GAAGf,CAAC,MAAMW,EAA4BK,CAAS,CAAC,GAAI,MAAM,CAAC,IAC1GlB,GAAa,KAAKC,CAAC,YAAYY,EAA4BM,CAAS,CAAC,GACrE,KACF,CACA,IAAK,GAAG,CAKN,IAHAf,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAE3BP,EAAIC,IAAM,GACfD,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAEpCT,EAAIQ,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCV,EAAIC,EAAIC,EAAIO,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAC3CZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,cAAcI,CAAC,MAAMY,EAA4BX,CAAC,CAAC,YAAYW,EAA4BV,CAAC,CAAC,KAAKC,CAAC,MAAMS,EAA4BR,CAAC,CAAC,KAE7K,MAAMe,EAAYlB,EAAIC,EAChBkB,EAAYpB,EAAImB,EAChBE,EAAYlB,EAAIC,EACtBI,EAAW,IAAIc,EAAgBF,EAAWC,CAAS,EAChD,sBACHtB,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,cAAcI,CAAC,MAAMgB,EAAeJ,EAA4BX,CAAC,EAAI,YAAcW,EAA4BV,CAAC,EAAG,MAAM,CAAC,KAAKc,EAAeb,EAAI,MAAQS,EAA4BR,CAAC,EAAG,MAAM,CAAC,IAC3OL,GAAa,aAAaiB,EAAe,GAAGhB,CAAC,MAAMY,EAA4BO,CAAS,CAAC,GAAI,MAAM,CAAC,KAAKE,CAAS,IAC9GF,EAAY,IACdpB,GAAa,aAAaiB,EAAe,GAAGhB,CAAC,MAAM,CAACmB,CAAS,GAAI,MAAM,CAAC,KAAKE,CAAS,KAElFD,EAAY,GAAKC,EAAY,IACjCtB,GAAa,aAAaqB,CAAS,KAAKC,CAAS,KAEnD,KACF,CACA,IAAK,GAAG,CAENrB,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAIQ,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAaC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,aAAaC,CAAC,MAAMS,EAA4BR,CAAC,CAAC,MAEjJ,MAAMmB,EAAYpB,EAAIC,EAChBoB,EAAYtB,EAAIqB,EAChBE,EAAYxB,EAAIuB,EACtBhB,EAAWO,EAAUf,EAAIyB,CAAS,EAClC1B,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAaC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,aAAac,EAAeb,EAAI,MAAQS,EAA4BR,CAAC,EAAG,MAAM,CAAC,KAClLL,GAAa,KAAKC,CAAC,aAAaC,CAAC,MAAMe,EAAeJ,EAA4BV,CAAC,EAAI,YAAcU,EAA4BW,CAAS,EAAG,MAAM,CAAC,IACpJxB,GAAa,KAAKC,CAAC,aAAagB,EAAef,EAAI,MAAQW,EAA4BY,CAAS,EAAG,MAAM,CAAC,IACtGA,EAAY,IACdzB,GAAa,KAAKC,CAAC,aAAagB,EAAef,EAAI,MAAQ,CAACuB,EAAW,MAAM,CAAC,KAEhFzB,GAAa,KAAKC,CAAC,YAAYY,EAA4Ba,CAAS,CAAC,GACrE,KACF,CACA,IAAK,GAAG,CAENzB,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,GAAKQ,EAAQ,EAAG,EAAE,EAAI,IAAOC,EAAO,CAAC,GAAI,CAAC,CAAC,EAC3CR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,OAAOe,EAAUd,CAAC,CAAC,OAAOC,CAAC,MAAMU,EAA4BT,CAAC,CAAC,YAAYS,EAA4BR,CAAC,CAAC,MAEtJ,MAAMsB,EAAYvB,EAAIC,EAChBuB,EAAYzB,EAAIwB,EAChBE,EAAY3B,EAAI0B,EACtBnB,EAAWO,EAAUf,EAAI4B,CAAS,EAClC7B,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,OAAOe,EAAUd,CAAC,CAAC,OAAOC,CAAC,MAAMc,EAAeJ,EAA4BT,CAAC,EAAI,YAAcS,EAA4BR,CAAC,EAAG,MAAM,CAAC,KACvLL,GAAa,KAAKC,CAAC,OAAOe,EAAUd,CAAC,CAAC,OAAOe,EAAed,EAAI,MAAQU,EAA4Bc,CAAS,EAAG,MAAM,CAAC,KACnHA,EAAY,IACd3B,GAAa,KAAKC,CAAC,OAAOe,EAAUd,CAAC,CAAC,OAAOe,EAAed,EAAI,MAAQ,CAACwB,EAAW,MAAM,CAAC,MAE7F3B,GAAa,KAAKC,CAAC,OAAOgB,EAAeD,EAAUd,CAAC,EAAI,MAAQW,EAA4Be,CAAS,EAAG,MAAM,CAAC,IAC/G5B,GAAa,KAAKC,CAAC,MAAMY,EAA4BgB,CAAS,CAAC,GAC3DA,EAAY,IACd7B,GAAa,KAAKC,CAAC,MAAMY,EAA4B,CAACgB,CAAS,CAAC,IAElE,KACF,CACA,IAAK,GAAG,CAEN5B,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAKQ,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCR,EAAKO,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCL,GAAKI,EAAQ,EAAG,CAAC,EAAI,IAAOC,EAAO,CAAC,GAAI,CAAC,CAAC,EAC1CZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAae,EAAUd,CAAC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,QAAQC,CAAC,MAAMS,EAA4BR,CAAC,CAAC,aAAaQ,EAA4BP,CAAC,CAAC,IAElM,MAAMwB,EAAY5B,EAAIC,EAChB4B,EAAY9B,EAAI6B,EAChBE,EAAY5B,EAAIC,EAChB4B,EAAYD,EAAY1B,EAC9BG,EAAWO,EAAUe,EAAYE,CAAS,EAC1CjC,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAagB,EAAeD,EAAUd,CAAC,EAAI,MAAQW,EAA4BV,CAAC,EAAG,MAAM,CAAC,QAAQc,EAAeb,EAAI,MAAQS,EAA4BR,CAAC,EAAG,MAAM,CAAC,aAAaQ,EAA4BP,CAAC,CAAC,GAChQN,GAAa,KAAKiB,EAAehB,EAAI,YAAcY,EAA4BiB,CAAS,EAAG,MAAM,CAAC,MAAMb,EAAeJ,EAA4BmB,CAAS,EAAI,YAAcnB,EAA4BP,CAAC,EAAG,MAAM,CAAC,GACrNN,GAAa,KAAKgB,EAAUe,CAAS,CAAC,MAAMlB,EAA4BoB,CAAS,CAAC,GAClF,KACF,CACA,IAAK,GAAG,CAENhC,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAIQ,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCL,EAAII,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCJ,EAAIG,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,cAAcI,CAAC,aAAaC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,YAAYU,EAA4BT,CAAC,CAAC,MAAMC,CAAC,MAAMQ,EAA4BP,CAAC,CAAC,YAAYO,EAA4BN,CAAC,CAAC,KAEtO,MAAM2B,EAAY/B,EAAIC,EAChB+B,EAAYjC,EAAIgC,EAChBE,EAAYnC,EAAIkC,EAChBE,EAAY/B,EAAIC,EAChB+B,EAAYjC,EAAIgC,EACtB5B,EAAW,IAAIc,EAAgBa,EAAWE,CAAS,EAAE,OACrDtC,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,cAAcI,CAAC,aAAaC,CAAC,MAAMe,EAAeJ,EAA4BV,CAAC,EAAI,YAAcU,EAA4BT,CAAC,EAAG,MAAM,CAAC,MAAMC,CAAC,MAAMY,EAAeJ,EAA4BP,CAAC,EAAI,YAAcO,EAA4BN,CAAC,EAAG,MAAM,CAAC,IACpSP,GAAa,aAAaC,CAAC,aAAagB,EAAef,EAAI,MAAQW,EAA4BqB,CAAS,EAAG,MAAM,CAAC,MAAMjB,EAAeZ,EAAI,MAAQQ,EAA4BwB,CAAS,EAAG,MAAM,CAAC,IAClMrC,GAAa,aAAaC,CAAC,YAAYY,EAA4BsB,CAAS,CAAC,KAAKG,CAAS,IACrFF,EAAY,GAAKE,EAAY,IACjCtC,GAAa,aAAaoC,CAAS,KAAKE,CAAS,KAEnD,KACF,CACA,IAAK,GAAG,CAENrC,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAIQ,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCL,EAAII,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCJ,EAAIG,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCH,EAAIE,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAaC,CAAC,aAAaC,CAAC,MAAMU,EAA4BT,CAAC,CAAC,YAAYS,EAA4BR,CAAC,CAAC,MAAMQ,EAA4BP,CAAC,CAAC,OAAOO,EAA4BN,CAAC,CAAC,OAAOM,EAA4BL,CAAC,CAAC,IAErQ,MAAM+B,EAAYnC,EAAIC,EAChBmC,EAAYrC,EAAIoC,EAAYjC,EAC5BmC,EAAYvC,EAAIsC,EAChBE,EAAYD,EAAYlC,EACxBoC,EAAY1C,EAAIyC,EACtBjC,EAAWO,EAAU2B,EAAYnC,CAAC,EAClCR,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,aAAaC,CAAC,aAAaC,CAAC,MAAMc,EAAeJ,EAA4BT,CAAC,EAAI,YAAcS,EAA4BR,CAAC,EAAG,MAAM,CAAC,MAAMQ,EAA4BP,CAAC,CAAC,OAAOO,EAA4BN,CAAC,CAAC,OAAOM,EAA4BL,CAAC,CAAC,GACtSR,GAAa,KAAKC,CAAC,aAAaC,CAAC,aAAae,EAAed,EAAI,MAAQU,EAA4B0B,CAAS,EAAI,MAAQ1B,EAA4BP,CAAC,EAAG,MAAM,CAAC,OAAOO,EAA4BN,CAAC,CAAC,OAAOM,EAA4BL,CAAC,CAAC,GAC3OR,GAAa,KAAKC,CAAC,aAAagB,EAAef,EAAI,YAAcW,EAA4B2B,CAAS,EAAG,MAAM,CAAC,MAAM3B,EAA4BN,CAAC,CAAC,OAAOM,EAA4BL,CAAC,CAAC,GACzLR,GAAa,KAAKC,CAAC,aAAagB,EAAewB,EAAY,MAAQ5B,EAA4BN,CAAC,EAAG,MAAM,CAAC,OAAOM,EAA4BL,CAAC,CAAC,GAC3ID,EAAI,IACNP,GAAa,KAAKC,CAAC,aAAagB,EAAewB,EAAY,MAAQ,CAAClC,EAAG,MAAM,CAAC,OAAOM,EAA4BL,CAAC,CAAC,IAErHR,GAAa,KAAKiB,EAAehB,EAAI,YAAcY,EAA4B6B,CAAS,EAAG,MAAM,CAAC,MAAM7B,EAA4BL,CAAC,CAAC,GACtIR,GAAa,KAAK2C,CAAS,MAAM9B,EAA4BL,CAAC,CAAC,GAC/D,KACF,CACA,IAAK,GAAG,CAENP,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAKQ,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAKM,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,YAAYY,EAA4BX,CAAC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,YAAYU,EAA4BT,CAAC,CAAC,IAErK,MAAMwC,EAAY3C,EAAIC,EAChB2C,EAAY1C,EAAIC,EACtBK,EAAWO,EAAU4B,EAAYC,CAAS,EAC1C7C,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMoB,EAAehB,EAAI,YAAcY,EAA4BX,CAAC,EAAG,MAAM,CAAC,MAAMe,EAAeJ,EAA4BV,CAAC,EAAI,YAAcU,EAA4BT,CAAC,EAAG,MAAM,CAAC,GACnOJ,GAAa,KAAKgB,EAAU4B,CAAS,CAAC,MAAM/B,EAA4BgC,CAAS,CAAC,GAClF,KACF,CACA,IAAK,IAAI,CAEP5C,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAKQ,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCR,EAAKO,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMI,CAAC,YAAYY,EAA4BX,CAAC,CAAC,MAAMW,EAA4BV,CAAC,CAAC,YAAYU,EAA4BT,CAAC,CAAC,IAErK,MAAM0C,EAAY7C,EAAIC,EAChB6C,EAAY5C,EAAIC,EACtBK,EAAWO,EAAU8B,EAAYC,CAAS,EAC1C/C,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMoB,EAAehB,EAAI,YAAcY,EAA4BX,CAAC,EAAG,MAAM,CAAC,MAAMe,EAAeJ,EAA4BV,CAAC,EAAI,YAAcU,EAA4BT,CAAC,EAAG,MAAM,CAAC,GACnOJ,GAAa,KAAKgB,EAAU8B,CAAS,CAAC,MAAMjC,EAA4BkC,CAAS,CAAC,GAC9EA,EAAY,IACd/C,GAAa,KAAKgB,EAAU8B,CAAS,CAAC,MAAM,CAACC,CAAS,IAExD,KACF,CACA,IAAK,IAAI,CAEP9C,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAKQ,EAAQ,EAAG,EAAE,EAAI,EAAKC,EAAO,CAAC,GAAI,CAAC,CAAC,EACzCR,EAAIO,EAAQ,EAAG,EAAE,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EACnCN,EAAIM,EAAO,CAAC,EAAG,EAAG,CAAC,CAAC,EACpBL,EAAI,IAAIiB,EACNb,EAAQ,EAAG,GAAI,CAACL,EAAG,EAAIA,EAAG,EAAIA,EAAG,EAAIA,EAAG,EAAIA,CAAC,CAAC,EAAIM,EAAO,CAAC,GAAI,CAAC,CAAC,EAChEN,CAAA,EAEFD,EAAIE,EAAE,OACNC,EAAID,EAAE,SAAA,EACNP,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,MAAMO,CAAC,MAAMS,EAA4BX,CAAC,CAAC,YAAYW,EAA4BV,CAAC,CAAC,MAAMU,EAA4BZ,CAAC,CAAC,IAE/J,MAAM+C,EAAY9C,EAAIC,EAChB8C,EAAY1C,EAAIyC,EACtBvC,EAAWO,EAAUiC,EAAYhD,CAAC,EAClCD,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,MAAMO,CAAC,MAAMa,EAAe,GAAGJ,EAA4BX,CAAC,CAAC,YAAYW,EAA4BV,CAAC,CAAC,GAAI,MAAM,CAAC,MAAMU,EAA4BZ,CAAC,CAAC,GAChMD,GAAa,KAAKiB,EAAe,GAAGb,CAAC,MAAMS,EAA4BmC,CAAS,CAAC,GAAI,MAAM,CAAC,MAAMnC,EAA4BZ,CAAC,CAAC,GAChID,GAAa,KAAKiB,EAAe,GAAGD,EAAUT,CAAC,CAAC,MAAMM,EAA4BmC,CAAS,CAAC,GAAI,MAAM,CAAC,MAAMnC,EAA4BZ,CAAC,CAAC,GAC3ID,GAAa,KAAKiD,CAAS,MAAMpC,EAA4BZ,CAAC,CAAC,GAC3DA,EAAI,IAAGD,GAAa,KAAKiD,CAAS,MAAM,CAAChD,CAAC,IAC9C,KACF,CACA,IAAK,IAAI,CAEPA,EAAIS,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCT,EAAIQ,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCR,EAAIO,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCP,EAAIM,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCN,EAAIK,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCL,EAAII,EAAQ,EAAG,CAAC,EAAIC,EAAO,CAAC,GAAI,CAAC,CAAC,EAClCZ,EAAQ,IAAIa,EAAoBf,EAAI,CAAC,CAAC,cAAcI,CAAC,MAAMY,EAA4BX,CAAC,CAAC,YAAYW,EAA4BV,CAAC,CAAC,KAAKC,CAAC,YAAYS,EAA4BR,CAAC,CAAC,MAAMQ,EAA4BP,CAAC,CAAC,KAEvN,MAAM4C,EAAYhD,EAAIC,EAChBgD,EAAYlD,EAAIiD,EAChBE,EAAYhD,EAAIC,EAChBgD,EAAYD,EAAY9C,EAC9BG,EAAW,IAAIc,EAAgB4B,EAAWE,CAAS,EAAE,OACrDrD,EAAY,IAAIY,EAAoBf,EAAI,CAAC,CAAC,cAAcI,CAAC,MAAMgB,EAAeJ,EAA4BX,CAAC,EAAI,YAAcW,EAA4BV,CAAC,EAAG,MAAM,CAAC,KAAKc,EAAeb,EAAI,YAAcS,EAA4BR,CAAC,EAAG,MAAM,CAAC,MAAMQ,EAA4BP,CAAC,CAAC,IACrRN,GAAa,aAAaiB,EAAe,GAAGhB,CAAC,MAAMY,EAA4BqC,CAAS,CAAC,GAAI,MAAM,CAAC,KAAKjC,EAAe,GAAGmC,CAAS,MAAMvC,EAA4BP,CAAC,CAAC,GAAI,MAAM,CAAC,IAC/K4C,EAAY,IACdlD,GAAa,aAAaC,CAAC,MAAM,CAACiD,CAAS,KAAKE,CAAS,MAAMvC,EAA4BP,CAAC,CAAC,KAEzF6C,EAAY,GAAKE,EAAY,IACjCrD,GAAa,aAAamD,CAAS,KAAKE,CAAS,KAEnD,KACF,CAAA,CASF,GAPArD,GAAa,KAAKiB,EAAeR,CAAQ,CAAC,IAE1CV,EAAQuD,EAAkCvD,CAAK,EAC/CC,EAAYsD,EAAkCtD,CAAS,EAInD,KAAK,KAAM,CAGb,MAAMuD,EADkBvD,EAAU,UAAU,EAAGA,EAAU,OAAS,CAAC,EAChC,MAAM,GAAG,EACtCwD,EAAiBD,EAAW,CAAC,EACnCA,EAAW,MAAA,EAGX,IAAIE,EAAqB,IAAMD,EAAiB,IAEhD,QAAS3D,EAAI,EAAGA,EAAI0D,EAAW,OAAQ1D,IACjCA,EAAI,IAGJ0D,EAAW1D,EAAI,CAAC,EAAE,SAAS,iBAAiB,GAC5C0D,EAAW1D,EAAI,CAAC,EAAE,SAAS,OAAO,EAElC4D,GAAsB,aAAeD,EAAiB,IAEtDC,GAAsB,SAAWD,EAAiB,KAGtDC,GAAsBF,EAAW1D,CAAC,EAGpCG,EAAYyD,EAAqB,GACnC,CAEAC,EAAc,KAAM7D,EAAG,CACrB,QAAS,CACP,MAAOY,EACP,QAAS,CAAE,uBAAwB,GAAM,cAAe,EAAA,CAAK,CAC/D,CACD,EACDV,GAAS4D,EACP,KACA9D,EACA+D,EAAa,0BACb,CAAE,WAAY,GAAA,CAAI,EAGhB,KAAK,oBAAoB/D,EAAGI,EAAGC,EAAGC,CAAC,IAErC,KAAK,eAAeN,CAAC,EAAIE,EACzB,KAAK,iBAAiBF,CAAC,EAAIG,EAC3BH,KAEFC,GACF,CACA+D,EAAwB,IAAI,CAC9B,CACF,CAUA,SAASC,EAAsCC,EAAsB,CACnE,SAASC,EAAeC,EAAyB,CAQ/C,MAAMC,EAAkB,CAAA,EAClBC,EAAiB,CAAA,EACvB,IAAIC,EAAQ,EAGZ,QAASvE,EAAI,EAAGA,EAAIoE,EAAQ,OAAQpE,IAClC,GAAIoE,EAAQpE,CAAC,IAAM,IAAK,CACtBuE,IACA,MAAMC,EAAiB,CAAE,MAAOxE,EAAG,UAAW,GAAM,MAAAuE,CAAA,EACpDF,EAAO,KAAKG,CAAO,EACnBF,EAAM,KAAKE,CAAO,CACpB,SAAWJ,EAAQpE,CAAC,IAAM,IAAK,CAC7B,MAAMwE,EAAUF,EAAM,IAAA,EACtB,GAAIE,EAAS,CACX,MAAMC,EAAiB,CACrB,MAAOzE,EACP,UAAW,GACX,MAAAuE,EACA,WAAYC,EAAQ,KAAA,EAEtBA,EAAQ,WAAaxE,EACrByE,EAAQ,WAAaD,EAAQ,MAC7BH,EAAO,KAAKI,CAAO,CACrB,CACAF,GACF,CAGF,MAAMG,EAASN,EAAQ,MAAM,EAAE,EAGzBO,EAASN,EACZ,OAAQO,GAAMA,EAAE,WAAaA,EAAE,aAAe,MAAS,EACvD,IAAKA,IAAO,CACX,MAAOA,EAAE,MACT,IAAKA,EAAE,WACP,MAAOA,EAAE,KAAA,EACT,EAGJD,EAAO,KAAK,CAACvE,EAAGC,IAAMD,EAAE,MAAQC,EAAE,KAAK,EAEvC,UAAWwE,KAASF,EAAQ,CAC1B,KAAM,CAAE,MAAAG,EAAO,IAAAC,EAAK,MAAAR,GAAUM,EAOxBG,EAJWL,EACd,OAAQjE,GAAMA,EAAE,OAASoE,GAASpE,EAAE,KAAOqE,CAAG,EAC9C,OAAO,CAACE,EAAKvE,IAAM,KAAK,IAAIuE,EAAKvE,EAAE,KAAK,EAAG,CAAC,EAEd6D,EAAQ,EAEnCW,EAAWF,GACXA,IAAkB,EAAU,CAAC,UAAW,UAAU,EAClDA,IAAkB,EAAU,CAAC,UAAW,SAAS,EACjDA,IAAkB,EAAU,CAAC,WAAY,UAAU,EAChD,CAAC,WAAY,UAAU,EAG1B,CAACG,EAAMC,CAAK,EAAIF,EAAQF,CAAa,EAE3CN,EAAOI,CAAK,EAAIK,EAChBT,EAAOK,CAAG,EAAIK,CAChB,CAEA,OAAOV,EAAO,KAAK,EAAE,CACvB,CAIA,OAFcR,EAAK,MAAM,GAAG,EACC,IAAIC,CAAc,EACzB,KAAK,GAAG,CAChC,CAEA,SAASV,EAAkCvD,EAAuB,CAChE,MAAMmF,EAAUnF,EAAM,UAAU,EAAGA,EAAM,OAAS,CAAC,EAEnD,MAAO,IADY+D,EAAsCoB,CAAO,CAC3C,GACvB"}