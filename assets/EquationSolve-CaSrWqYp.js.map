{"version":3,"file":"EquationSolve-CaSrWqYp.js","sources":["../../src/exercicesInteractifs/EquationSolve.svelte"],"sourcesContent":["<script>\n  import katex from 'katex'\n  import { ChangeTypes } from 'mathsteps'\n  import { afterUpdate } from 'svelte'\n  import HeaderExerciceVueProf from '../components/shared/exercice/shared/headerExerciceVueProf/HeaderExerciceVueProf.svelte'\n  import CheckboxWithLabel from '../components/shared/forms/CheckboxWithLabel.svelte'\n  import InputText from '../components/shared/forms/InputText.svelte'\n  import SelectMultiple from '../components/shared/forms/SelectMultiple.svelte'\n  import SelectUnique from '../components/shared/forms/SelectUnique.svelte'\n  import Exercice from '../exercices/Exercice'\n  import { loadMathLive } from '../modules/loaders'\n  import { resoudre } from '../modules/outilsMathjs'\n\n  export let indiceExercice\n  export let indiceLastExercice\n\n  export const titre = \"Test du solveur d'équations\"\n  // Cette ressource n'a pas d'uuid ou de ref\n  // Son accès est défini dans uuidsRessources.json\n\n  const headerExerciceProps = {\n    title: '',\n    isInteractif: false,\n    settingsReady: false,\n    interactifReady: false,\n    randomReady: false,\n    correctionReady: false,\n  }\n\n  const exercice = new Exercice()\n  exercice.id = 'EquationSolve'\n  exercice.numeroExercice = indiceExercice\n  exercice.interactif = true\n\n  // Objet d’options bindé aux champs\n  let options = {\n    comment: false,\n    color: '#ff0000',\n    comments: {},\n    reduceSteps: false,\n    formatSolution: 'decimal',\n    substeps: false,\n    changeType: [],\n    produitsencroix: false,\n    verifications: false,\n    variables: {},\n  }\n\n  // Quelques exemples prédéfinis\n  const exemples = [\n    { label: 'Choisis un exemple...', value: '' },\n    { label: '2x + 5 = 15', value: '2x+5=15' },\n    { label: '3x - 7 = 11', value: '3x-7=11' },\n    { label: 'x/2 + 4 = 10', value: 'x/2+4=10' },\n    { label: '5(x - 1) = 20', value: '5(x-1)=20' },\n    { label: '5x - 8 = 10x + 7', value: '5x - 8 = 10x + 7' },\n    { label: '5x - 8 >= 8x + 7', value: '5x - 8 >= 8x + 7' },\n    { label: '5x - 8 = 10x + 4', value: '5x - 8 = 10x + 4' },\n    { label: '5x - 8 >= 10x + 4', value: '5x - 8 >= 10x + 4' },\n    { label: '5(x - 8) >= 10x + 7', value: '5(x - 8) >= 10x + 7' },\n    { label: '5(x - 8) >= 8x + 7', value: '5(x - 8) >= 8x + 7' },\n    { label: '5/x = 7/3', value: '5/x = 7/3' },\n    { label: '5/x + 4 = 7/3', value: '5/x + 4 = 7/3' },\n  ]\n\n  let types = Object.values(ChangeTypes).sort((a, b) => a.localeCompare(b))\n  const typesOptions = types.map((t) => ({ label: t, value: t }))\n\n  const formatSolutionOptions = [\n    { label: 'decimal', value: 'decimal' },\n    { label: 'fraction', value: 'fraction' },\n    { label: '2 (base n°)', value: '2' },\n    { label: '5 (base n°)', value: '5' },\n  ]\n\n  function handleTypesChange(event) {\n    options.changeType = event.detail\n  }\n\n  let saisie = ''\n  let resultat1 = ''\n  let resultat2 = ''\n\n  function choisirExemple(event) {\n    const value = event.detail\n    if (value) {\n      saisie = value // ⬅️ ça remplace la variable\n    }\n  }\n\n  function valider() {\n    const resu = resoudre(saisie, options)\n    resultat1 = katex.renderToString(resu.equation)\n    resultat2 = katex.renderToString(\n      `\\\\begin{aligned}\\n${resu.printSteps.join('\\\\\\\\\\n')}\\n\\\\end{aligned}`,\n    )\n    // resultat2 = katex.renderToString(resu.texteCorr);\n  }\n\n  afterUpdate(() => {\n    loadMathLive()\n  })\n</script>\n\n<div class=\"text-coopmaths-corpus dark:text-coopmathsdark-corpus\">\n  <HeaderExerciceVueProf\n    {indiceExercice}\n    {indiceLastExercice}\n    id=\"EquationSolve\"\n    {...headerExerciceProps}\n  />\n\n  <br />\n  <form\n    on:submit|preventDefault={valider}\n    style=\"display:flex; gap:0.5rem; align-items:center;\"\n  >\n    <InputText\n      inputID=\"equation-solve-saisie\"\n      bind:value={saisie}\n      placeholder=\"Tape quelque chose…\"\n      showTitle={false}\n    />\n    <button type=\"submit\" disabled={!saisie.trim()}> Valider </button>\n  </form>\n  <!-- Liste déroulante d'exemples -->\n  <label>\n    Exemple :\n    <SelectUnique\n      id=\"equation-solve-exemple\"\n      value=\"\"\n      options={exemples}\n      on:change={choisirExemple}\n    />\n  </label>\n  <!-- Options -->\n  <h3>Options de résolution</h3>\n  <div\n    style=\"display:grid; grid-template-columns: 1fr 1fr; gap:0.5rem; max-width:600px;\"\n  >\n    <CheckboxWithLabel\n      id=\"equation-solve-comment\"\n      bind:isChecked={options.comment}\n      label=\"comment\"\n    />\n\n    <label>\n      Couleur : <input type=\"color\" bind:value={options.color} />\n    </label>\n\n    <CheckboxWithLabel\n      id=\"equation-solve-reduceSteps\"\n      bind:isChecked={options.reduceSteps}\n      label=\"reduceSteps\"\n    />\n\n    <label>\n      formatSolution :\n      <SelectUnique\n        id=\"equation-solve-formatSolution\"\n        bind:value={options.formatSolution}\n        options={formatSolutionOptions}\n      />\n    </label>\n\n    <CheckboxWithLabel\n      id=\"equation-solve-substeps\"\n      bind:isChecked={options.substeps}\n      label=\"substeps\"\n    />\n\n    <label>\n      changeType (séparés par ,) :\n      <InputText\n        inputID=\"equation-solve-changeType-text\"\n        showTitle={false}\n        on:input={(e) =>\n          (options.changeType = e.detail.currentTarget.value\n            .split(',')\n            .map((x) => x.trim())\n            .filter(Boolean))}\n      />\n    </label>\n\n    <label>\n      changeType (sélection multiple) :\n      <SelectMultiple\n        id=\"equation-solve-changeType\"\n        size={4}\n        value={options.changeType}\n        options={typesOptions}\n        on:change={handleTypesChange}\n      />\n    </label>\n\n    <CheckboxWithLabel\n      id=\"equation-solve-produitsencroix\"\n      bind:isChecked={options.produitsencroix}\n      label=\"produitsencroix\"\n    />\n\n    <CheckboxWithLabel\n      id=\"equation-solve-verifications\"\n      bind:isChecked={options.verifications}\n      label=\"verifications\"\n    />\n  </div>\n\n  <!-- Affichage du résultat -->\n  <section style=\"margin-top:1rem;\">\n    <h3 style=\"margin:0 0 .25rem 0;\">Equation :</h3>\n    <div style=\"padding:.5rem; border:1px solid #ddd; border-radius:.5rem;\">\n      {@html resultat1}\n    </div>\n\n    <!-- Si tu veux interpréter la saisie comme du HTML, utilise {@html} -->\n    <!-- ⚠️ Attention : n'utilise pas {@html} avec du contenu non fiable (XSS). -->\n    <h3 style=\"margin:.75rem 0 .25rem 0;\">Résolution :</h3>\n    <div style=\"padding:.5rem; border:1px solid #ddd; border-radius:.5rem;\">\n      {@html resultat2}\n    </div>\n  </section>\n</div>\n"],"names":["indiceExercice","$.prop","$$props","indiceLastExercice","titre","headerExerciceProps","exercice","Exercice","options","$.mutable_source","exemples","typesOptions","ChangeTypes","a","b","t","formatSolutionOptions","handleTypesChange","event","$.mutate","saisie","resultat1","resultat2","choisirExemple","value","$.set","valider","resu","resoudre","$.get","katex","afterUpdate","loadMathLive","div","root","HeaderExerciceVueProf","node","$.spread_props","form","$.sibling","node_1","$.child","InputText","$$value","button","label","SelectUnique","node_2","div_1","node_3","CheckboxWithLabel","label_1","input","node_4","label_2","node_5","node_6","label_3","node_7","x","label_4","SelectMultiple","node_8","$.untrack","node_9","node_10","section","div_2","div_3","$0","$.event","$.preventDefault"],"mappings":"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"}