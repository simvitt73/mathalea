var B=Object.defineProperty;var S=(n,t,s)=>t in n?B(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var h=(n,t,s)=>S(n,typeof t!="symbol"?t+"":t,s);import{p as z}from"./PointAbstrait-Cz1GEocE.js";import{s as P}from"./segmentsVecteurs-DhSnlc3S.js";import{a as F}from"./textes-BId1S-Qs.js";import{h as w,t as g}from"./transformations-KFxwrOCd.js";import{v}from"./droites-D3-ZzJ69.js";import{v as A}from"./Vide2d-lYMmc9eB.js";import{q as a,B as y,F as L}from"./index-CMKaCP9B.js";function l(n){return typeof n=="object"&&n instanceof L}function T(n){return l(n)?n.simplifie().toLatex():a(n,1).toLatex()}class k{constructor({nom:t,proba:s,enfants:r,rationnel:o,visible:e,alter:i,racine:f}){h(this,"nom");h(this,"proba");h(this,"enfants");h(this,"rationnel");h(this,"visible");h(this,"alter");h(this,"racine");h(this,"taille");h(this,"pos");this.racine=f!==void 0?!!f:!1,this.enfants=r!==void 0?[...r]:[],this.nom=t!==void 0?String(t):"",this.rationnel=o!==void 0?!!o:!0,this.proba=s!==void 0?l(s)?s.simplifie():a(s,1):a(0,1),this.visible=e!==void 0?e:!0,this.alter=i!==void 0?String(i):"",this.taille=0,this.pos=0}setFils(t,s,r){const o=new k({nom:t,proba:s,rationnel:r||this.rationnel});return this.enfants.push(o),o}getFils(t){if(this.nom===t)return this;for(const s of this.enfants){if(s.nom===t)return s;const r=s.getFils(t);if(r)return r}return null}setFilsProba(t,s,r){let o=this.getFils(t);return o?o.proba=l(s)?s:a(s,1):(o=new k({nom:t,proba:s,rationnel:r||this.rationnel}),this.enfants.push(o)),o}getProba(t){let s=a(0,1),r=a(0,1),o;if(this.nom===t)return l(this.proba)?this.proba.simplifie():a(this.proba*100,100);for(const e of this.enfants)if(e.nom===t){const i=e.proba;s=s.sommeFraction(i)}else{o=e.getProba(t);const i=l(r)?r:a(r,1),f=l(e.proba)?e.proba:a(e.proba,1),c=l(o)?o:a(o,1);r=i.sommeFraction(f.produitFraction(c))}return s=s.sommeFraction(l(r)?r:a(r,1)),l(s)?s.simplifie():a(s,1)}branches(){let t=0;if(this.enfants.length===0)return 1;for(const s of this.enfants)t+=s.branches();return t}setTailles(){try{this.taille=this.branches();for(const t of this.enfants)t.setTailles()}catch(t){return console.error(t),!1}return!0}represente(t=0,s=0,r=0,o=1,e=!1,i=-1,f){f=f||5;const c=[],p=z(e?t:t+r+this.taille*o/2,e?s+r-this.taille*o/2:s,"","center"),b=z(e?t-i*5:t,e?s:s-i*5),d=F(this.nom,p.x+(e?.1*i:0),p.y+(e?0:.5*i),{color:"black",letterSize:"normalsize",backgroundColor:"white",opacity:.8}),m=e?w(p,b,.5):g(w(p,b,.5),v(p.x>b.x?.5:-.5,0)),x=this.visible?F(this.rationnel?T(this.proba):y(this.proba.valueOf(),4),m.x,m.y,{color:"black",letterSize:"scriptsize",backgroundColor:"white",opacity:.7}):this.alter?F(this.alter,m.x,m.y,{color:"black",letterSize:"scriptsize",backgroundColor:"white",opacity:.7}):A();if(this.enfants.length===0)return[P(b,p),d,x];for(let u=0;u<this.enfants.length;u++)c.push(...this.enfants[u].represente(e?t+i*5:t+r+this.taille*o/2,e?s+r-this.taille*o/2:s+i*5,e?o*((this.enfants.length/2-u)*this.enfants[u].taille):o*((u-this.enfants.length/2)*this.enfants[u].taille),o,e,i,f));return this.racine?c.push(d):c.push(P(b,p),d,x),c}}export{k as A,T as t};
//# sourceMappingURL=arbres-Ccdc25BR.js.map
