{"version":3,"file":"PEN14-CKvaR7Pw.js","sources":["../../src/exercices/PE/PEN14.ts"],"sourcesContent":["import { choice } from '../../lib/outils/arrayOutils'\nimport { obtenirListeFacteursPremiers } from '../../lib/outils/primalite'\nimport { texNombre } from '../../lib/outils/texNombre'\nimport FractionEtendue from '../../modules/FractionEtendue'\nimport operation from '../../modules/operations'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport Exercice from '../Exercice'\nexport const titre =\n  \"Déterminer la n-ième décimale d'un nombre irrationnel non décimal\"\nexport const uuid = 'cbd18'\nexport const dateDePublication = '1/1/2025'\nexport const refs = {\n  'fr-fr': ['PEN14'],\n  'fr-ch': [],\n}\n/**\n *\n * @author Rémi Angot\n */\nexport default class NiemeDecimale extends Exercice {\n  constructor() {\n    super()\n    this.nbQuestions = 1\n  }\n\n  nouvelleVersion() {\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      const den = choice([7, 13])\n      const num = randint(den + 1, 2 * den - 1)\n      let n = randint(1, 9) * 100 + randint(1, 9) * 10 + randint(1, 9)\n      if (choice([true, false])) n = new Date().getFullYear()\n      const texte = `Déterminer la $${n}^{\\\\mathrm{e}}$ décimale du nombre $\\\\dfrac{${num}}{${den}}$.`\n      const { hasPeriod, periodLength, firstRepeat } = analyzeDecimal(num, den)\n      if (!hasPeriod) throw new Error('Pas de période')\n      let texteCorr = operation({\n        operande1: num,\n        operande2: den,\n        type: 'division',\n        precision: firstRepeat,\n      })\n\n      texteCorr += '<br><br>'\n      texteCorr += `La division posée fait apparaitre un reste déjà obtenu, l'écriture décimale de $\\\\dfrac{${num}}{${den}}\\\\approx ${texNombreAvecZeroInutile(toFixedTruncate(num / den, periodLength))}\\\\ldots$ a une période à ${periodLength} chiffres.`\n      texteCorr += '<br><br>'\n      texteCorr += operation({\n        operande1: n,\n        operande2: periodLength,\n        type: 'divisionE',\n      })\n\n      texteCorr += '<br><br>'\n      const rang = n % periodLength\n      const rangString =\n        rang === 1 ? `$${rang}^{\\\\text{re}}$` : `$${rang}^{\\\\mathrm{e}}$`\n      if (rang === 0) {\n        texteCorr += `$${n} = ${periodLength} \\\\times ${Math.floor(n / periodLength)}$<br>`\n        texteCorr += `La $${n}^{\\\\mathrm{e}}$ décimale du nombre $\\\\dfrac{${num}}{${den}}$ est donc identique à la dernière décimale de la période soit ${toFixedTruncate(num / den, periodLength).at(-1)}.`\n      } else {\n        texteCorr += `$${n} = ${periodLength} \\\\times ${Math.floor(n / periodLength)} + ${n % periodLength}$<br>`\n        texteCorr += `La $${n}^{\\\\mathrm{e}}$ décimale du nombre $\\\\dfrac{${num}}{${den}}$ est donc identique à la ${rangString} décimale soit ${toFixedTruncate(num / den, n % periodLength).at(-1)}.`\n      }\n\n      if (this.questionJamaisPosee(i, texte)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nexport function toFixedTruncate(num: number, digits: number): string {\n  const re = new RegExp('^-?\\\\d+(?:\\\\.\\\\d{0,' + (digits || -1) + '})?')\n  const match = num.toString().match(re)\n  return match ? match[0] : '0'\n}\n\nexport function analyzeDecimal(numerator: number, denominator: number) {\n  const f = new FractionEtendue(numerator, denominator)\n  const n = f.numIrred\n  const d = f.denIrred\n  const listeFacteursPremiers = obtenirListeFacteursPremiers(d)\n  const hasOtherFactorThan2And5 = listeFacteursPremiers.some(\n    (f) => f !== 2 && f !== 5,\n  )\n  if (!hasOtherFactorThan2And5) {\n    return {\n      hasPeriod: false,\n      periodLength: 0,\n      firstRepeat: 0,\n    }\n  }\n\n  let rang = 1\n  const restes = new Set<number>()\n  while (!restes.has((n * 10 ** rang) % d)) {\n    restes.add((n * 10 ** rang) % d)\n    rang++\n  }\n\n  return {\n    hasPeriod: true,\n    periodLength: rang - 1,\n    firstRepeat: rang,\n  }\n}\n\nexport function texNombreAvecZeroInutile(text: string) {\n  if (text.endsWith('0')) {\n    return texNombre(Number(text)) + '0'\n  } else if (text.endsWith('00')) {\n    return texNombre(Number(text)) + '00'\n  } else {\n    return texNombre(Number(text))\n  }\n}\n"],"names":["titre","uuid","dateDePublication","refs","NiemeDecimale","Exercice","i","cpt","den","choice","num","randint","n","texte","hasPeriod","periodLength","firstRepeat","analyzeDecimal","texteCorr","operation","texNombreAvecZeroInutile","toFixedTruncate","rang","rangString","listeQuestionsToContenu","digits","re","match","numerator","denominator","f","FractionEtendue","d","obtenirListeFacteursPremiers","restes","text","texNombre"],"mappings":"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"}