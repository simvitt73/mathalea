{"version":3,"file":"6I1B-2-DKNX-JaX.js","sources":["../../src/exercices/6e/6I1B-2.ts"],"sourcesContent":["/* eslint-disable camelcase */\nimport { point } from '../../lib/2d/PointAbstrait'\nimport { texteParPositionEchelle } from '../../lib/2d/textes'\nimport { choixDeroulant } from '../../lib/interactif/questionListeDeroulante'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport { texteEnCouleurEtGras } from '../../lib/outils/embellissements'\nimport { ajouterLien } from '../../lib/outils/enrichissements'\nimport { stringNombre } from '../../lib/outils/texNombre'\nimport {\n  allerA,\n  angleScratchTo2d,\n  attendre,\n  baisseCrayon,\n  clone,\n  creerLutin,\n  ObjetLutin,\n  orienter,\n} from '../../modules/2dLutin'\nimport { context } from '../../modules/context'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  noteLaCouleur,\n  plateau2dNLC,\n  testBoucle,\n  testInstruction,\n  testSequence,\n  thePlateau,\n  traducColor,\n  traducNum,\n} from '../../modules/noteLaCouleur'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport { scratchblock } from '../../modules/scratchblock'\nimport Exercice from '../Exercice'\n\nimport { colorToLatexOrHTML } from '../../lib/2d/colorToLatexOrHtml'\nimport type { ObjetMathalea2D } from '../../lib/2d/ObjetMathalea2D'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport type { NestedObjetMathalea2dArray } from '../../types/2d'\n\nexport const interactifReady = true\nexport const interactifType = 'listeDeroulante'\nexport const dateDeModifImportante = '14/05/2023'\nexport const dateDePublication = '11/04/2021'\nexport const titre = 'Note la couleur (scratch)'\n\n/**\n * Note_la_couleur() Exercice inspiré de l'activité débranchée de Jean-Yves Labouche Note La Couleur\n * https://www.monclasseurdemaths.fr/profs/algorithmique-scratch/note-la-couleur/\n * @author Jean-Claude Lhote\n * A faire : ajouter d'autres niveaux avec des instructions conditionnelles, des blocs définis...\n */\nexport const uuid = '0e016'\n\nexport const refs = {\n  'fr-fr': ['6I1B-2'],\n  'fr-2016': ['6I11'],\n  'fr-ch': ['autres-6'],\n}\nexport default class NoteLaCouleur6e extends Exercice {\n  relatif: boolean\n  constructor() {\n    super()\n    this.besoinFormulaireNumerique = [\n      'Type de plateau',\n      4,\n      '1 : Plateau couleur sans numéro\\n2 : Plateau couleur avec numéros\\n3 : Plateau noir et blanc avec nom des couleurs\\n4 : Plateau noir et blanc avec numéros',\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Type de programme',\n      3,\n      '1 : Avancer et tourner\\n2 : Boucles\\n3 : Mélange',\n    ]\n    this.besoinFormulaire3Numerique = ['Nombre de couleurs (Maximum 6)', 6]\n    this.besoinFormulaire4CaseACocher = ['Plateau de jeu original', false]\n    this.nbQuestions = 1\n    this.typeExercice = 'Scratch'\n    this.sup = 1\n    this.sup2 = 1\n    this.sup3 = 4\n    this.sup4 = true\n    this.relatif = false\n    this.correctionDetailleeDisponible = true\n    this.correctionDetaillee = true\n  }\n\n  nouvelleVersion() {\n    const damier = [\n      [\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Noir',\n        'Jaune',\n        'Bleu',\n        'Vert',\n        'Orange',\n        'Rouge',\n        'Orange',\n        'Noir',\n        'Jaune',\n        'Gris',\n        'Vert',\n        'Rose',\n        'Noir',\n        'Jaune',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Rouge',\n        'Bleu',\n        'Orange',\n        'Jaune',\n        'Rose',\n        'Gris',\n        'Jaune',\n        'Rose',\n        'Gris',\n        'Jaune',\n        'Bleu',\n        'Rouge',\n        'Gris',\n        'Rouge',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Rose',\n        'Vert',\n        'Gris',\n        'Rouge',\n        'Noir',\n        'Bleu',\n        'Vert',\n        'Noir',\n        'Vert',\n        'Bleu',\n        'Rose',\n        'Gris',\n        'Vert',\n        'Orange',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Vert',\n        'Bleu',\n        'Rose',\n        'Vert',\n        'Bleu',\n        'Orange',\n        'Gris',\n        'Rouge',\n        'Orange',\n        'Jaune',\n        'Gris',\n        'Rouge',\n        'Rose',\n        'Bleu',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Noir',\n        'Orange',\n        'Rouge',\n        'Orange',\n        'Jaune',\n        'Rouge',\n        'Blanc',\n        'Blanc',\n        'Noir',\n        'Gris',\n        'Orange',\n        'Noir',\n        'Jaune',\n        'Rose',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Rose',\n        'Gris',\n        'Noir',\n        'Bleu',\n        'Vert',\n        'Bleu',\n        'Blanc',\n        'Blanc',\n        'Rouge',\n        'Bleu',\n        'Gris',\n        'Vert',\n        'Rouge',\n        'Noir',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Noir',\n        'Rouge',\n        'Rose',\n        'Vert',\n        'Orange',\n        'Rose',\n        'Noir',\n        'Orange',\n        'Vert',\n        'Jaune',\n        'Rose',\n        'Noir',\n        'Rose',\n        'Vert',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Orange',\n        'Gris',\n        'Rouge',\n        'Jaune',\n        'Noir',\n        'Vert',\n        'Rouge',\n        'Rose',\n        'Noir',\n        'Bleu',\n        'Vert',\n        'Jaune',\n        'Orange',\n        'Gris',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Bleu',\n        'Jaune',\n        'Orange',\n        'Vert',\n        'Gris',\n        'Jaune',\n        'Gris',\n        'Orange',\n        'Gris',\n        'Rose',\n        'Bleu',\n        'Rouge',\n        'Bleu',\n        'Orange',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Rose',\n        'Bleu',\n        'Jaune',\n        'Rose',\n        'Orange',\n        'Rouge',\n        'Bleu',\n        'Noir',\n        'Jaune',\n        'Gris',\n        'Vert',\n        'Jaune',\n        'Noir',\n        'Rouge',\n        'Blanc',\n      ],\n      [\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n        'Blanc',\n      ],\n    ]\n    const choixListeDeroulante = [\n      [\n        'Blanc',\n        'Noir',\n        'Rouge',\n        'Bleu',\n        'Orange',\n        'Rose',\n        'Jaune',\n        'Vert',\n        'Gris',\n      ],\n      [\n        '(0) Blanc',\n        '(1) Noir',\n        '(2) Rouge',\n        '(3) Bleu',\n        '(4) Orange',\n        '(5) Rose',\n        '(6) Jaune',\n        '(7) Vert',\n        '(8) Gris',\n      ],\n    ]\n    const echelleDessin = 0.5\n\n    let j, test\n    const paramsCorrection = this.relatif\n      ? {\n          xmin: -13,\n          ymin: -10,\n          xmax: 13,\n          ymax: 10,\n          pixelsParCm: 20,\n          scale: echelleDessin,\n        }\n      : {\n          xmin: -1,\n          ymin: -1,\n          xmax: 25,\n          ymax: 19,\n          pixelsParCm: 20,\n          scale: echelleDessin,\n        }\n    let commandes_disponibles\n    const sequences_disponibles = []\n    let sequence\n    let result\n    let nb_couleurs\n    let instruction\n    let couleurs\n    let liste_instructions\n\n    let lutin = creerLutin()\n    let lutindepart\n    let angledepart\n    let xdepart\n    let ydepart\n    context.unitesLutinParCm = 20\n    context.pixelsParCm = 20\n    let pion\n    const typeDeQuestion =\n      Number(this.sup2) === 1\n        ? combinaisonListes([1], this.nbQuestions)\n        : Number(this.sup2) === 2\n          ? combinaisonListes([2], this.nbQuestions)\n          : combinaisonListes([1, 2], this.nbQuestions)\n    const lePlateau = plateau2dNLC({\n      type: this.sup,\n      melange: !this.sup4,\n      scale: echelleDessin,\n      relatif: this.relatif,\n      nx: 16,\n      ny: 12,\n      pas: 30,\n      plateau: damier,\n    })\n    for (let q = 0; q < this.nbQuestions; ) {\n      const objetsCorrection: NestedObjetMathalea2dArray = []\n      const objetsEnonce: NestedObjetMathalea2dArray = []\n      const objets = lePlateau.objets ?? []\n      objetsEnonce.push(objets)\n      objetsCorrection.push(objets)\n      let reponseCouleur = []\n      let texte = ''\n      let texteCorr = ''\n      let compteur = 0\n      let retour_a_la_case_depart\n      let compteur_essais_boucle\n      let compteur_essais_sequence\n      couleurs = []\n      nb_couleurs = this.sup3\n      liste_instructions = []\n      switch (typeDeQuestion[q]) {\n        case 1: {\n          // Programme sans boucles\n          commandes_disponibles = [\n            ['AV30', 'AV60', 'AV90', 'AV120', 'AV150'],\n            ['TD90', 'TG90', 'TG90', 'TG180'],\n          ]\n          for (let m = 0, ins1; m < 5; m++) {\n            for (let n = 0, ins2; n < 4; n++) {\n              ins1 = commandes_disponibles[0][m]\n              ins2 = commandes_disponibles[1][n]\n              sequences_disponibles.push(\n                [ins1, ins2, 'NLC'],\n                [ins2, ins1, 'NLC'],\n              )\n            }\n          }\n          retour_a_la_case_depart = true\n          while (retour_a_la_case_depart) {\n            objetsEnonce.length = 1\n            lutin = creerLutin()\n            angledepart = choice([90, 0, -90, 180])\n            xdepart = -225 + randint(4, 11) * 30 + (this.relatif ? 0 : 240)\n            ydepart = -165 + randint(3, 8) * 30 + (this.relatif ? 0 : 180)\n\n            pion = noteLaCouleur({\n              x: xdepart,\n              y: ydepart,\n              orientation: angledepart,\n              plateau: thePlateau,\n              relatif: this.relatif,\n            })\n            lutin.color = context.isHtml\n              ? colorToLatexOrHTML('green')\n              : colorToLatexOrHTML('black')\n            lutin.epaisseur = 2\n            lutin.pointilles = 2\n            allerA(xdepart, ydepart, lutin)\n            orienter(angleScratchTo2d(angledepart), lutin)\n            lutindepart = clone(lutin) as ObjetLutin\n            baisseCrayon(lutindepart)\n            allerA(xdepart, ydepart, lutindepart)\n            objetsEnonce.push(lutindepart)\n            baisseCrayon(lutin)\n            compteur++\n            if (compteur > 5) break\n            pion.codeScratch = ''\n            j = 0\n            compteur_essais_sequence = 0\n            pion.codeScratch =\n              '\\\\begin{scratch}[print,fill,blocks,scale=0.7]\\n \\\\blockinit{quand \\\\greenflag est cliqué}\\n '\n            pion.codeScratch += `\\\\blockmove{aller à x: \\\\ovalnum{${xdepart}} y: \\\\ovalnum{${ydepart}}}\\n \\\\blockmove{s'orienter à \\\\ovalnum{${angledepart}}}\\n`\n            pion.currentIndex += pion.codeScratch.length\n            while (nb_couleurs > j && compteur_essais_sequence < 10) {\n              compteur_essais_sequence = 0\n              sequence = choice(sequences_disponibles)\n              test = testSequence(sequence, pion)\n              while (!test[0] && compteur_essais_sequence < 10) {\n                compteur_essais_sequence++\n                sequence = choice(sequences_disponibles)\n                test = testSequence(sequence, pion)\n              }\n              if (compteur_essais_sequence < 10) {\n                retour_a_la_case_depart = false\n                for (let i = 0; i < sequence.length; i++) {\n                  instruction = sequence[i]\n                  result = testInstruction(instruction, lutin, pion)\n                  if (instruction === 'NLC') {\n                    liste_instructions.push(instruction)\n                    couleurs.push(pion.nlc())\n                    j++\n                    pion.codeScratch += result[4] + '\\n'\n                    pion.currentIndex += result[4].length + 1\n                    lutin = result[5]\n                    attendre(5, lutin)\n                  } else {\n                    liste_instructions.push(instruction)\n                    pion.currentPos.x = result[1]\n                    pion.currentPos.y = result[2]\n                    pion.currentOrientation = result[3]\n                    pion.codeScratch += result[4] + '\\n'\n                    pion.currentIndex += result[4].length + 1\n                    lutin = result[5]\n                  }\n                }\n              } else {\n                angledepart = choice([90, 0, -90, 180])\n                xdepart = -225 + randint(4, 11) * 30 + (this.relatif ? 0 : 240)\n                ydepart = -165 + randint(3, 8) * 30 + (this.relatif ? 0 : 180)\n              }\n            }\n          }\n\n          break\n        }\n        case 2: {\n          // programmes à boucles\n          commandes_disponibles = [\n            ['AV30', 'AV60', 'AV90', 'AV120'],\n            ['TD90', 'TG90', 'TD90', 'TG180'],\n          ]\n          for (let m = 0, ins1; m < 3; m++) {\n            for (let n = 0, ins2; n < 3; n++) {\n              for (let p = 0, ins3; p < 3; p++) {\n                for (let q = 0, ins4; q < 3; q++) {\n                  ins1 = commandes_disponibles[0][m]\n                  ins2 = commandes_disponibles[1][n]\n                  ins3 = commandes_disponibles[0][p]\n                  ins4 = commandes_disponibles[1][q]\n                  sequences_disponibles.push(\n                    [ins1, ins2, 'NLC', ins3, ins4],\n                    [ins2, ins1, 'NLC', ins3, ins4],\n                    [ins1, ins2, 'NLC', ins4, ins3],\n                    [ins2, ins1, 'NLC', ins4, ins3],\n                    [ins1, ins2, ins3, 'NLC', ins4],\n                    [ins2, ins1, ins4, ins3, 'NLC'],\n                    [ins1, 'NLC', ins2, ins3, ins4],\n                    [ins2, 'NLC', ins1, ins4, ins3],\n                  )\n                }\n              }\n            }\n          }\n\n          retour_a_la_case_depart = true\n          const repetitions = nb_couleurs - 1\n          while (retour_a_la_case_depart) {\n            objetsEnonce.length = 1\n            lutin = creerLutin()\n            angledepart = choice([90, 0, -90, 180])\n            xdepart = -225 + randint(4, 11) * 30 + (this.relatif ? 0 : 240)\n            ydepart = -165 + randint(3, 8) * 30 + (this.relatif ? 0 : 180)\n\n            pion = noteLaCouleur({\n              x: xdepart,\n              y: ydepart,\n              orientation: angledepart,\n              plateau: lePlateau.plateauNLC,\n              relatif: this.relatif,\n            })\n            pion.codeScratch = ''\n            lutin.color = context.isHtml\n              ? colorToLatexOrHTML('green')\n              : colorToLatexOrHTML('black')\n            lutin.epaisseur = 2\n            lutin.pointilles = 2\n            allerA(xdepart, ydepart, lutin)\n            orienter(angleScratchTo2d(angledepart), lutin)\n            lutindepart = clone(lutin)\n            objetsEnonce.push(lutindepart as ObjetMathalea2D)\n            baisseCrayon(lutin)\n            compteur++\n            if (compteur > 5) break // 5 tentatives infructueuses -> On sort de la boucle.\n            compteur_essais_boucle = 0\n            pion.codeScratch =\n              '\\\\begin{scratch}[print,fill,blocks,scale=0.7]\\n \\\\blockinit{quand \\\\greenflag est cliqué}\\n '\n            pion.codeScratch += `\\\\blockmove{aller à x: \\\\ovalnum{${xdepart}} y: \\\\ovalnum{${ydepart}}}\\n \\\\blockmove{s'orienter à \\\\ovalnum{${angledepart}}}\\n`\n            pion.currentIndex += pion.codeScratch.length\n            // On choisit le code à l'intérieur de la boucle\n            sequence = choice(sequences_disponibles)\n            test = testBoucle(repetitions, sequence, pion) as unknown as [\n              boolean,\n              number,\n              number,\n              number,\n              string,\n              ObjetLutin,\n            ]\n            while (!test[0] && compteur_essais_boucle < 5) {\n              // On tente 5 boucles à cette position, après on change de position.\n              compteur_essais_boucle++\n              sequence = choice(sequences_disponibles)\n              test = testBoucle(repetitions, sequence, pion) as unknown as [\n                boolean,\n                number,\n                number,\n                number,\n                string,\n                ObjetLutin,\n              ]\n            }\n            if (compteur_essais_boucle < 5) {\n              retour_a_la_case_depart = false\n              pion.codeScratch += `\\\\blockrepeat{répéter \\\\ovalnum{${repetitions}} fois}{\\n`\n              liste_instructions.push('début de boucle')\n              for (let i = 0; i < sequence.length; i++) {\n                instruction = sequence[i]\n                result = testInstruction(instruction, lutin, pion)\n                if (instruction === 'NLC' && result != null) {\n                  liste_instructions.push(instruction)\n                  couleurs.push(pion.nlc())\n                  pion.codeScratch += result[4] + '\\n'\n                  pion.currentIndex += result[4].length + 1\n                  lutin = result[5]\n                  attendre(5, lutin)\n                } else {\n                  liste_instructions.push(instruction)\n                  pion.currentPos.x = result[1]\n                  pion.currentPos.y = result[2]\n                  pion.currentOrientation = result[3]\n                  pion.codeScratch += result[4] + '\\n'\n                  pion.currentIndex += result[4].length + 1\n                  lutin = result[5]\n                }\n              }\n              liste_instructions.push('fin de boucle')\n              pion.codeScratch += '} \\n'\n              // on recommence n-1 fois pour faire avancer le pion et le lutin\n              for (let j = 1; j < repetitions; j++) {\n                for (let i = 0; i < sequence.length; i++) {\n                  instruction = sequence[i]\n                  result = testInstruction(instruction, lutin, pion)\n                  if (instruction === 'NLC') {\n                    couleurs.push(pion.nlc())\n                    lutin = result[5]\n                    attendre(5, lutin)\n                  } else {\n                    pion.currentPos.x = result[1]\n                    pion.currentPos.y = result[2]\n                    pion.currentOrientation = result[3]\n                    lutin = result[5]\n                  }\n                }\n              }\n              sequence = choice(sequences_disponibles)\n              test = testSequence(sequence, pion)\n              while (!test[0]) {\n                sequence = choice(sequences_disponibles)\n                test = testSequence(sequence, pion)\n              }\n              for (let i = 0; i < sequence.length; i++) {\n                instruction = sequence[i]\n                result = testInstruction(instruction, lutin, pion)\n                if (instruction === 'NLC') {\n                  liste_instructions.push(instruction)\n\n                  couleurs.push(pion.nlc())\n                  pion.codeScratch += result[4] + '\\n'\n                  pion.currentIndex += result[4].length + 1\n                  lutin = result[5]\n                  attendre(5, lutin)\n                } else {\n                  liste_instructions.push(instruction)\n                  pion.currentPos.x = result[1]\n                  pion.currentPos.y = result[2]\n                  pion.currentOrientation = result[3]\n                  pion.codeScratch += result[4] + '\\n'\n                  pion.currentIndex += result[4].length + 1\n                  lutin = result[5]\n                }\n              }\n            } else {\n              angledepart = choice([90, 0, -90, 180])\n              xdepart = -225 + randint(4, 11) * 30 + (this.relatif ? 0 : 240)\n              ydepart = -165 + randint(3, 8) * 30 + (this.relatif ? 0 : 180)\n            }\n          }\n          break\n        }\n      }\n      if (pion == null) {\n        window.notify('pion est null', { pion })\n        return\n      }\n      pion.codeScratch += '\\\\end{scratch}'\n      if (context.isHtml) {\n        texte = `Cet exercice est tiré de l'excellente activité débranchée ${ajouterLien('https://www.monclasseurdemaths.fr/profs/algorithmique-scratch/note-la-couleur/', 'Note la couleur')} de Jean-Yves Labouche.<br>`\n        texte +=\n          'Il a été conçu pour étendre les possibilités de fiches proposées.<br>'\n        texte += `N'hésitez pas à vous rendre sur le site ${ajouterLien('https://www.monclasseurdemaths.fr', 'Mon classeur de Maths.fr')} de Jean-Yves pour y découvrir la multitude de ressources qu'il propose.<br>`\n        texte += `Pour jouer, regarder les ${ajouterLien('https://coopmaths.fr/alea/assets/pdf/reglesnlc.pdf', 'Règles du jeu')} .<br>`\n      } else {\n        texte = ''\n      }\n      texte +=\n        'Exécuter le programme et trouver la succession de couleurs.<br><br>'\n      if (context.isHtml) {\n        texte +=\n          '<table><tr><td>' +\n          scratchblock(pion.codeScratch) +\n          '</td><td>' +\n          `${\n            this.sup % 2 === 0\n              ? 'Correspondance chiffre-couleur : <br>0=Blanc ; 1=Noir ; 2=Rouge ; 3=Bleu ; 4=Orange ; 5=Rose ; 6=Jaune ; 7=Vert ; 8=Gris<br>'\n              : ''\n          }` +\n          mathalea2d(paramsCorrection, ...objetsEnonce) +\n          '</td></tr></table>'\n      } else {\n        texte += `\\\\begin{minipage}{.3 \\\\linewidth} \\n\\t ${scratchblock(pion.codeScratch)} \\n \\\\end{minipage}\n      \\\\begin{minipage}{.7 \\\\linewidth} \\n\\t ${\n        this.sup % 2 === 0\n          ? 'Correspondance chiffre-couleur : \\\\\\\\\\n0=Blanc, 1=Noir, 2=Rouge, 3=Bleu, 4=Orange, 5=Rose, 6=Jaune, 7=Vert, 8=Gris\\\\\\\\\\n'\n          : ''\n      } ${mathalea2d(paramsCorrection, ...objetsEnonce)} \\n \\\\end{minipage}`\n        if (q < this.nbQuestions - 1 && !context.isHtml) {\n          texte += '\\n \\\\medskip'\n        }\n      }\n      reponseCouleur = couleurs\n      if (this.sup % 2 === 0)\n        reponseCouleur[0] =\n          '(' +\n          traducNum(\n            couleurs[0] as unknown as\n              | 'Blanc'\n              | 'Bleu'\n              | 'Noir'\n              | 'Rouge'\n              | 'Jaune'\n              | 'Rose'\n              | 'Vert'\n              | 'Orange'\n              | 'Gris',\n          ) +\n          ') ' +\n          couleurs[0]\n      texteCorr = 'On obtient la série de couleurs suivante :<br> '\n      texteCorr += `${texteEnCouleurEtGras(reponseCouleur[0])} `\n      texte += !this.interactif\n        ? ''\n        : 'Couleur n°1 : ' +\n          choixDeroulant(this, q * couleurs.length, [\n            { label: 'Choisir une couleur', value: '' },\n            ...choixListeDeroulante[(this.sup - 1) % 2].map((item) =>\n              this.sup === 1\n                ? {\n                    svg:\n                      '<rect x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" stroke=\"black\" fill=\"' +\n                      traducColor(item) +\n                      '\"/>',\n                    value: item,\n                  }\n                : { label: item, value: item },\n            ),\n          ]) +\n          '<br>'\n      handleAnswers(\n        this,\n        q * couleurs.length,\n        { reponse: { value: couleurs[0] } },\n        { formatInteractif: 'listeDeroulante' },\n      )\n      for (let i = 1; i < couleurs.length; i++) {\n        if (this.sup % 2 === 0)\n          reponseCouleur[i] =\n            '(' +\n            traducNum(\n              couleurs[i] as unknown as\n                | 'Blanc'\n                | 'Bleu'\n                | 'Noir'\n                | 'Rouge'\n                | 'Jaune'\n                | 'Rose'\n                | 'Vert'\n                | 'Orange'\n                | 'Gris',\n            ) +\n            ') ' +\n            couleurs[i]\n        texteCorr += `${texteEnCouleurEtGras(reponseCouleur[i])} `\n        texte += !this.interactif\n          ? ''\n          : 'Couleur n°' +\n            (i + 1) +\n            ' : ' +\n            choixDeroulant(this, q * couleurs.length + i, [\n              { label: 'Choisir une couleur', value: '' },\n              ...choixListeDeroulante[(this.sup - 1) % 2].map((item) =>\n                this.sup === 1\n                  ? {\n                      svg:\n                        '<rect x=\"-10\" y=\"-10\" width=\"20\" height=\"20\" stroke=\"black\" fill=\"' +\n                        traducColor(item) +\n                        '\"/>',\n                      value: item,\n                    }\n                  : { label: item, value: item },\n              ),\n            ]) +\n            '<br>'\n        handleAnswers(\n          this,\n          q * couleurs.length + i,\n          { reponse: { value: couleurs[i] } },\n          { formatInteractif: 'listeDeroulante' },\n        )\n      }\n      lutin.animation = `<radialGradient id=\"Ball\" cx=\"8\" cy=\"-3\" r=\"20\" gradientUnits=\"userSpaceOnUse\">\n    <stop offset=\"0\" style=\"stop-color:#FFFF99\"/>\n    <stop offset=\"1\" style=\"stop-color:#FF9400\"/>\n  </radialGradient> <circle fill=\"url(#Ball)\"  r=\"12\" stroke-width=\"1\"\n   x=\"${lutin.listeTraces[0][0] * context.pixelsParCm}\"\n    y=\"${-lutin.listeTraces[0][1] * context.pixelsParCm}\">\\n\n    <animateMotion path=\"M ${lutin.listeTraces[0][0] * context.pixelsParCm} ${-lutin.listeTraces[0][1] * context.pixelsParCm} L`\n\n      for (let i = 0; i < lutin.listeTraces.length; i++) {\n        const B = point(lutin.listeTraces[i][2], lutin.listeTraces[i][3])\n        lutin.animation += ` ${B.xSVG(context.pixelsParCm)} ${B.ySVG(context.pixelsParCm)} `\n      }\n      lutin.animation +=\n        '\" begin=\"10s\" dur=\"10s\" repeatCount=\"indefinite\" />; </circle>'\n      if (this.correctionDetaillee) {\n        for (let i = 1; i < 16; i++) {\n          if (this.relatif) {\n            if (i < 7 || i > 9) {\n              objetsCorrection.push(\n                texteParPositionEchelle(\n                  stringNombre(-240 + 30 * i),\n                  -12.1 + 1.5 * i,\n                  -0.3,\n                  0,\n                  'black',\n                  1.2,\n                  'milieu',\n                  true,\n                  echelleDessin,\n                ),\n              )\n            }\n          } else {\n            if (i !== 1) {\n              objetsCorrection.push(\n                texteParPositionEchelle(\n                  stringNombre(30 * i),\n                  1.5 * i,\n                  -0.3,\n                  0,\n                  'black',\n                  1.2,\n                  'milieu',\n                  true,\n                  echelleDessin,\n                ),\n              )\n            }\n          }\n        }\n        for (let i = 1; i < 12; i++) {\n          if (this.relatif) {\n            if (i < 5 || i > 7) {\n              objetsCorrection.push(\n                texteParPositionEchelle(\n                  stringNombre(-180 + 30 * i),\n                  -0.5,\n                  -9 + 1.5 * i,\n                  0,\n                  'black',\n                  1.2,\n                  'milieu',\n                  true,\n                  echelleDessin,\n                ),\n              )\n            }\n          } else {\n            if (i !== 1) {\n              objetsCorrection.push(\n                texteParPositionEchelle(\n                  stringNombre(30 * i),\n                  -0.5,\n                  1.5 * i,\n                  0,\n                  'black',\n                  1.2,\n                  'milieu',\n                  true,\n                  echelleDessin,\n                ),\n              )\n            }\n          }\n        }\n      }\n      const objetsCorr = objetsCorrection.filter((obj) => obj != null).flat()\n      texteCorr +=\n        '<br><br>' + mathalea2d(paramsCorrection, ...objetsCorr, lutin)\n      if (q < this.nbQuestions - 1 && !context.isHtml) {\n        texteCorr += '\\n\\\\newpage'\n      }\n      if (\n        this.questionJamaisPosee(\n          q,\n          String(xdepart),\n          String(ydepart),\n          String(angledepart),\n        )\n      ) {\n        this.listeQuestions[q] = texte\n        this.listeCorrections[q] = texteCorr\n\n        q++\n      }\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n"],"names":["interactifReady","interactifType","dateDeModifImportante","dateDePublication","titre","uuid","refs","NoteLaCouleur6e","Exercice","__publicField","damier","choixListeDeroulante","j","test","paramsCorrection","commandes_disponibles","sequences_disponibles","sequence","result","nb_couleurs","instruction","couleurs","liste_instructions","lutin","creerLutin","lutindepart","angledepart","xdepart","ydepart","context","pion","typeDeQuestion","combinaisonListes","lePlateau","plateau2dNLC","q","objetsCorrection","objetsEnonce","objets","reponseCouleur","texte","texteCorr","compteur","retour_a_la_case_depart","compteur_essais_boucle","compteur_essais_sequence","m","ins1","ins2","choice","randint","noteLaCouleur","thePlateau","colorToLatexOrHTML","allerA","orienter","angleScratchTo2d","clone","baisseCrayon","testSequence","i","testInstruction","attendre","n","p","ins3","ins4","repetitions","testBoucle","ajouterLien","scratchblock","mathalea2d","traducNum","texteEnCouleurEtGras","choixDeroulant","item","traducColor","handleAnswers","B","point","texteParPositionEchelle","stringNombre","objetsCorr","obj","listeQuestionsToContenu"],"mappings":"2/GAuCO,MAAMA,GAAkB,GAClBC,GAAiB,kBACjBC,GAAwB,aACxBC,GAAoB,aACpBC,GAAQ,4BAQRC,GAAO,QAEPC,GAAO,CAClB,QAAS,CAAC,QAAQ,EAClB,UAAW,CAAC,MAAM,EAClB,QAAS,CAAC,UAAU,CACtB,EACA,MAAqBC,WAAwBC,EAAS,CAEpD,aAAc,CACZ,MAAA,EAFFC,GAAA,gBAGE,KAAK,0BAA4B,CAC/B,kBACA,EACA;AAAA;AAAA;AAAA,uCAAA,EAEF,KAAK,2BAA6B,CAChC,oBACA,EACA;AAAA;AAAA,YAAA,EAEF,KAAK,2BAA6B,CAAC,iCAAkC,CAAC,EACtE,KAAK,6BAA+B,CAAC,0BAA2B,EAAK,EACrE,KAAK,YAAc,EACnB,KAAK,aAAe,UACpB,KAAK,IAAM,EACX,KAAK,KAAO,EACZ,KAAK,KAAO,EACZ,KAAK,KAAO,GACZ,KAAK,QAAU,GACf,KAAK,8BAAgC,GACrC,KAAK,oBAAsB,EAC7B,CAEA,iBAAkB,CAChB,MAAMC,EAAS,CACb,CACE,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OAAA,EAEF,CACE,QACA,OACA,QACA,OACA,OACA,SACA,QACA,SACA,OACA,QACA,OACA,OACA,OACA,OACA,QACA,OAAA,EAEF,CACE,QACA,QACA,OACA,SACA,QACA,OACA,OACA,QACA,OACA,OACA,QACA,OACA,QACA,OACA,QACA,OAAA,EAEF,CACE,QACA,OACA,OACA,OACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,SACA,OAAA,EAEF,CACE,QACA,OACA,OACA,OACA,OACA,OACA,SACA,OACA,QACA,SACA,QACA,OACA,QACA,OACA,OACA,OAAA,EAEF,CACE,QACA,OACA,SACA,QACA,SACA,QACA,QACA,QACA,QACA,OACA,OACA,SACA,OACA,QACA,OACA,OAAA,EAEF,CACE,QACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,OACA,OACA,OACA,QACA,OACA,OAAA,EAEF,CACE,QACA,OACA,QACA,OACA,OACA,SACA,OACA,OACA,SACA,OACA,QACA,OACA,OACA,OACA,OACA,OAAA,EAEF,CACE,QACA,SACA,OACA,QACA,QACA,OACA,OACA,QACA,OACA,OACA,OACA,OACA,QACA,SACA,OACA,OAAA,EAEF,CACE,QACA,OACA,QACA,SACA,OACA,OACA,QACA,OACA,SACA,OACA,OACA,OACA,QACA,OACA,SACA,OAAA,EAEF,CACE,QACA,OACA,OACA,QACA,OACA,SACA,QACA,OACA,OACA,QACA,OACA,OACA,QACA,OACA,QACA,OAAA,EAEF,CACE,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OAAA,CACF,EAEIC,GAAuB,CAC3B,CACE,QACA,OACA,QACA,OACA,SACA,OACA,QACA,OACA,MAAA,EAEF,CACE,YACA,WACA,YACA,WACA,aACA,WACA,YACA,WACA,UAAA,CACF,EAIF,IAAIC,EAAGC,EACP,MAAMC,EAAmB,KAAK,QAC1B,CACE,KAAM,IACN,KAAM,IACN,KAAM,GACN,KAAM,GACN,YAAa,GACb,MAAO,EAAA,EAET,CACE,KAAM,GACN,KAAM,GACN,KAAM,GACN,KAAM,GACN,YAAa,GACb,MAAO,EAAA,EAEb,IAAIC,EACJ,MAAMC,EAAwB,CAAA,EAC9B,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EAAQC,EAAA,EACRC,EACAC,EACAC,EACAC,EACJC,EAAQ,iBAAmB,GAC3BA,EAAQ,YAAc,GACtB,IAAIC,EACJ,MAAMC,GACJ,OAAO,KAAK,IAAI,IAAM,EAClBC,EAAkB,CAAC,CAAC,EAAG,KAAK,WAAW,EACvC,OAAO,KAAK,IAAI,IAAM,EACpBA,EAAkB,CAAC,CAAC,EAAG,KAAK,WAAW,EACvCA,EAAkB,CAAC,EAAG,CAAC,EAAG,KAAK,WAAW,EAC5CC,GAAYC,GAAa,CAC7B,KAAM,KAAK,IACX,QAAS,CAAC,KAAK,KACf,MAAO,GACP,QAAS,KAAK,QACd,GAAI,GA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"}