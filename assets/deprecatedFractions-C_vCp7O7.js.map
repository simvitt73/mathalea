{"version":3,"file":"deprecatedFractions-C_vCp7O7.js","sources":["../../src/lib/outils/deprecatedFractions.ts"],"sourcesContent":["import { miseEnEvidence } from './embellissements'\nimport { ecritureParentheseSiNegatif } from './ecritures'\nimport { pgcd } from './primalite'\nimport { texNombre } from './texNombre'\nimport { bleuMathalea } from '../colors'\n\n/**\n * Fonction de comparaison à utiliser avec tableau.sort(compareFractions)\n *\n * Le tableau doit être du type `[[num,den],[num2,den2]]`\n *\n * @author Rémi Angot\n */\nexport function compareFractions(a: [number, number], b: [number, number]) {\n  if (a[0] / a[1] > b[0] / b[1]) {\n    return 1\n  }\n  if (a[0] / a[1] < b[0] / b[1]) {\n    return -1\n  }\n  // Sinon il y a égalité\n  return 0\n}\n\n/**\n * Retourne le numérateur et le dénominateur de la fraction passée en argument sous la forme (numérateur, dénominateur) réduite au maximum dans un tableau [numérateur,dénominateur]\n * @deprecated : utiliser la class FractionEtendue à la place\n * @author Rémi Angot\n */\nexport function fractionSimplifiee(n: number, d: number): [number, number] {\n  const p = pgcd(n, d)\n  let ns = n / p\n  let ds = d / p\n  if (ns < 0 && ds < 0) {\n    ;[ns, ds] = [-ns, -ds]\n  }\n  if (ns > 0 && ds < 0) {\n    ;[ns, ds] = [-ns, -ds]\n  }\n  return [ns, ds]\n}\n\n/**\n * Retourne le code LaTeX d'une fraction simplifiée ou d'un nombre entier\n * @deprecated : utiliser la class FractionEtendue à la place. Exemple : new FractionEtendue(a, b).texFractionSimplifiee\n * @author Rémi Angot\n */\nexport function texFractionReduite(n: number, d: number): string {\n  if (Math.abs(n) % Math.abs(d) === 0) {\n    return texNombre(n / d, 0)\n  } else {\n    return texFractionSigne(\n      fractionSimplifiee(n, d)[0],\n      fractionSimplifiee(n, d)[1],\n    )\n  }\n}\n\n/**\n * @deprecated : utiliser la class FractionEtendue à la place\n * produitDeDeuxFractions(num1,den1,num2,den2) retourne deux chaines :\n * la première est la fraction résultat, la deuxième est le calcul mis en forme Latex avec simplification éventuelle\n * Applique une simplification si le numérateur de l'une est égal au dénominateur de l'autre.\n */\nexport function produitDeDeuxFractions(\n  num1: number,\n  den1: number,\n  num2: number,\n  den2: number,\n): [string, string, [number, number, number, number]] {\n  let num, den, texProduit\n  if (num1 === den2) {\n    texProduit = `\\\\dfrac{\\\\cancel{${num1}}\\\\times ${ecritureParentheseSiNegatif(num2)}}{${den1}\\\\times\\\\cancel{${ecritureParentheseSiNegatif(den2)}}}`\n    num = num2\n    num1 = 1\n    den2 = 1\n    den = den1\n  } else if (num2 === den1) {\n    texProduit = `\\\\dfrac{${num1}\\\\times \\\\cancel{${ecritureParentheseSiNegatif(num2)}}}{\\\\cancel{${den1}}\\\\times${ecritureParentheseSiNegatif(den2)}}`\n    num = num1\n    num2 = 1\n    den1 = 1\n    den = den2\n  } else {\n    num = num1 * num2\n    den = den1 * den2\n    texProduit = `\\\\dfrac{${num1}\\\\times ${ecritureParentheseSiNegatif(num2)}}{${den1}\\\\times${ecritureParentheseSiNegatif(den2)}}`\n  }\n  return [texFractionFromString(num, den), texProduit, [num1, den1, num2, den2]]\n}\n\n/**\n * @deprecated utiliser la class FractionEtendue à la place\n * Simplifie une fraction en montrant les étapes\n * Le résultat est un string qui doit être entouré de $ pour le mode mathématique\n * @author Rémi Angot\n */\nexport function simplificationDeFractionAvecEtapes(\n  num: number,\n  den: number,\n  {\n    couleur1 = bleuMathalea,\n    couleur2 = 'black',\n    colorisationResultat = true,\n  } = {},\n): string {\n  let result = '='\n  if (num === 0) {\n    return '=0'\n  }\n  const signe = num * den < 0 ? '-' : ''\n  const numAbs = Math.abs(num)\n  const denAbs = Math.abs(den)\n  // Est-ce que le résultat est simplifiable ?\n  const s = pgcd(numAbs, denAbs)\n  if (s !== 1) {\n    if (numAbs % denAbs === 0) {\n      // si le résultat est entier\n      result += colorisationResultat\n        ? `${miseEnEvidence(num / den, couleur2)}`\n        : `${num / den}`\n    } else {\n      result += colorisationResultat\n        ? `${signe}${texFractionFromString(numAbs / s + miseEnEvidence('\\\\times' + s, couleur1), denAbs / s + miseEnEvidence('\\\\times' + s, couleur1))}=${miseEnEvidence(texFractionSigne(num / s, den / s), couleur2)}`\n        : `${signe}${texFractionFromString(numAbs / s + '\\\\times' + s, denAbs / s + '\\\\times' + s)}=${texFractionSigne(num / s, den / s)}`\n    }\n  } else if (num < 0 || den < 0) {\n    result += colorisationResultat\n      ? `${miseEnEvidence(texFractionSigne(num, den), couleur2)}`\n      : `${texFractionSigne(num, den)}`\n  } else return ''\n  return result\n}\n\n/**\n * @deprecated Utiliser la classe FractionEtendue et ses différentes méthodes\n * Retourne la string LaTeX de la fraction\n * @param num\n * @param den\n * @return {string}\n * @author Jean-Claude Lhote\n */\nexport function texFractionSigne(num: number, den: number): string {\n  if (den === 1) return String(num)\n  if (num * den > 0) {\n    return `\\\\dfrac{${texNombre(Math.abs(num))}}{${texNombre(Math.abs(den))}}`\n  }\n  if (num * den < 0) {\n    return `-\\\\dfrac{${texNombre(Math.abs(num))}}{${texNombre(Math.abs(den))}}`\n  }\n  return '0'\n}\n\n/**\n * Retourne une liste de fractions irréductibles\n * @author Jean-Claude Lhote\n */\nexport function obtenirListeFractionsIrreductibles(): [number, number][] {\n  // sous forme de tableaux [numérateur,dénominateur]\n  return [\n    [1, 2],\n    [1, 3],\n    [2, 3],\n    [1, 4],\n    [3, 4],\n    [1, 5],\n    [2, 5],\n    [3, 5],\n    [4, 5],\n    [1, 6],\n    [5, 6],\n    [1, 7],\n    [2, 7],\n    [3, 7],\n    [4, 7],\n    [5, 7],\n    [6, 7],\n    [1, 8],\n    [3, 8],\n    [5, 8],\n    [7, 8],\n    [1, 9],\n    [2, 9],\n    [4, 9],\n    [5, 9],\n    [7, 9],\n    [8, 9],\n    [1, 10],\n    [3, 10],\n    [7, 10],\n    [9, 10],\n  ]\n}\n\n/**\n * Retourne une liste de fractions irréductibles de dénominateur égal à 2 3 5 7\n * @author Mireille Gain\n */\nexport function obtenirListeFractionsIrreductiblesFaciles(): [\n  number,\n  number,\n][] {\n  // sous forme de tableaux [numérateur,dénominateur]\n  return [\n    [1, 2],\n    [1, 3],\n    [2, 3],\n    [1, 5],\n    [2, 5],\n    [3, 5],\n    [4, 5],\n    [1, 7],\n    [2, 7],\n    [3, 7],\n    [4, 7],\n    [5, 7],\n    [6, 7],\n  ]\n}\n\n/**\n * Utiliser plutôt la classe FractionEtendue et sa méthode texFSD (ou une autre)\n * EE : En fait, texFractionFromString est deprecated quand numérateur et dénominateur sont des nombres au profit souvent de new FractionEtendue(a,b).texFSD.\n * EE : Quand le numérateur et/ou le dénominateur contien(nen)t du LaTeX, alors texFractionFromString() est celle qui affiche le mieux la fraction que l'on veut.\n * Retourne le code LaTeX d'une fraction a/b (deprecated si a et b sont des nombres)\n * @param {string||number} a\n * @param {string||number} b\n * @author Rémi Angot\n * @returns {string}\n */\nexport function texFractionFromString(\n  a: number | string,\n  b: number | string,\n): string {\n  if (b !== 1 && b !== '1') {\n    return `\\\\dfrac{${typeof a === 'number' ? texNombre(a) : a}}{${typeof b === 'number' ? texNombre(b) : b}}`\n  } else {\n    return `${typeof a === 'number' ? texNombre(a) : a}`\n  }\n}\n"],"names":["compareFractions","a","b","fractionSimplifiee","n","d","p","pgcd","ns","ds","texFractionReduite","texNombre","texFractionSigne","produitDeDeuxFractions","num1","den1","num2","den2","num","den","texProduit","ecritureParentheseSiNegatif","texFractionFromString","simplificationDeFractionAvecEtapes","couleur1","bleuMathalea","couleur2","colorisationResultat","result","signe","numAbs","denAbs","s","miseEnEvidence","obtenirListeFractionsIrreductibles","obtenirListeFractionsIrreductiblesFaciles"],"mappings":"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"}