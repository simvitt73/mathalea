{"version":3,"file":"horloge-kdWtUtJo.js","sources":["../../src/lib/2d/horloge.ts"],"sourcesContent":["import type Hms from '../../modules/Hms'\nimport { cercle } from './cercle'\nimport { ObjetMathalea2D } from './ObjetMathalea2D'\nimport { point } from './PointAbstrait'\nimport { polygone } from './polygones'\nimport { segment } from './segmentsVecteurs'\nimport { latex2d } from './textes'\nimport { rotation, similitude, translation } from './transformations'\nimport { vecteur } from './Vecteur'\n\n/**\n * Un objet pour avoir une horloge\n * Si heure n'est pas définie, il n'y a pas d'aiguilles.\n * @author Jean-Claude Lhote\n * Date de publication : 01/02/2025\n */\nexport default class Horloge extends ObjetMathalea2D {\n  constructor(x = 0, y = 0, rayon = 2, heure?: Hms) {\n    super()\n    this.objets = []\n    const O = point(x, y)\n    const C = cercle(O, rayon)\n    C.opacite = 0.8\n    this.objets.push(C)\n    const rouage = cercle(O, 0.15, 'black', 'gray')\n    rouage.epaisseur = 3\n    const ecartNumeros = 0.5\n    for (let i = 1; i <= 12; i++) {\n      const angleRot = (Math.PI / 180) * (90 - i * 30)\n      const numero = latex2d(\n        String(i),\n        x + (rayon - ecartNumeros) * Math.cos(angleRot),\n        y + (rayon - ecartNumeros) * Math.sin(angleRot),\n        { letterSize: 'footnotesize', orientation: 0, opacity: 0.6 },\n      )\n      this.objets.push(numero)\n    }\n    this.objets.push(rouage)\n    const t = segment(x + rayon - 0.2, y, x + rayon - 0.05, y)\n    for (let i = 0; i < 4; i++) {\n      const tick1 = rotation(t, O, 30 + i * 90)\n      const tick2 = rotation(t, O, 60 + i * 90)\n      const tick3 = rotation(t, O, 90 + i * 90)\n      const opaciteTick = 0.8\n      tick1.opacite = opaciteTick\n      tick2.opacite = opaciteTick\n      tick3.opacite = opaciteTick\n      this.objets.push(tick1, tick2, tick3)\n    }\n\n    if (heure != null) {\n      const h = heure.hour\n      const m = heure.minute\n      const alpha = 90 - h * 30 - m / 2\n      const beta = 90 - m * 6\n      const epissure = 3\n      const point0 = translation(O, vecteur(0.2, 0))\n      const extTitAig = point(x + rayon - 1, y)\n      const m1TitAig = similitude(extTitAig, point0, epissure, 0.9)\n      const m2TitAig = similitude(extTitAig, point0, -epissure, 0.9)\n      const polyTitAig = polygone(point0, m1TitAig, extTitAig, m2TitAig)\n      const extGdeAig = point(x + rayon - 0.6, y)\n      const m1GdeAig = similitude(extGdeAig, point0, epissure, 0.9)\n      const m2GdeAig = similitude(extGdeAig, point0, -epissure, 0.9)\n      const polyGdeAig = polygone(point0, m1GdeAig, extGdeAig, m2GdeAig)\n      const grandeAiguille = rotation(polyGdeAig, O, beta)\n      const petiteAiguille = rotation(polyTitAig, O, alpha)\n      petiteAiguille.epaisseur = 1\n      grandeAiguille.epaisseur = 1\n      this.objets.push(petiteAiguille, grandeAiguille)\n    }\n  }\n\n  svg(coef: number) {\n    let code = ''\n    if (this.objets != null) {\n      for (const objet of this.objets) {\n        code += objet.svg(coef) + '\\n'\n      }\n    }\n    return code\n  }\n\n  // à remplacer par un code tikzPicture plus propre ?\n  tikz() {\n    let code = ''\n    if (this.objets != null) {\n      for (const objet of this.objets) {\n        code += objet.tikz() + '\\n'\n      }\n    }\n    return code\n  }\n}\n"],"names":["Horloge","ObjetMathalea2D","x","y","rayon","heure","O","point","C","cercle","rouage","ecartNumeros","i","angleRot","numero","latex2d","t","segment","tick1","rotation","tick2","tick3","opaciteTick","h","m","alpha","beta","epissure","point0","translation","vecteur","extTitAig","m1TitAig","similitude","m2TitAig","polyTitAig","polygone","extGdeAig","m1GdeAig","m2GdeAig","polyGdeAig","grandeAiguille","petiteAiguille","coef","code","objet"],"mappings":"6XAgBA,MAAqBA,UAAgBC,CAAgB,CACnD,YAAYC,EAAI,EAAGC,EAAI,EAAGC,EAAQ,EAAGC,EAAa,CAChD,MAAA,EACA,KAAK,OAAS,CAAA,EACd,MAAMC,EAAIC,EAAML,EAAGC,CAAC,EACdK,EAAIC,EAAOH,EAAGF,CAAK,EACzBI,EAAE,QAAU,GACZ,KAAK,OAAO,KAAKA,CAAC,EAClB,MAAME,EAASD,EAAOH,EAAG,IAAM,QAAS,MAAM,EAC9CI,EAAO,UAAY,EACnB,MAAMC,EAAe,GACrB,QAASC,EAAI,EAAGA,GAAK,GAAIA,IAAK,CAC5B,MAAMC,EAAY,KAAK,GAAK,KAAQ,GAAKD,EAAI,IACvCE,EAASC,EACb,OAAOH,CAAC,EACRV,GAAKE,EAAQO,GAAgB,KAAK,IAAIE,CAAQ,EAC9CV,GAAKC,EAAQO,GAAgB,KAAK,IAAIE,CAAQ,EAC9C,CAAE,WAAY,eAAgB,YAAa,EAAG,QAAS,EAAA,CAAI,EAE7D,KAAK,OAAO,KAAKC,CAAM,CACzB,CACA,KAAK,OAAO,KAAKJ,CAAM,EACvB,MAAMM,EAAIC,EAAQf,EAAIE,EAAQ,GAAKD,EAAGD,EAAIE,EAAQ,IAAMD,CAAC,EACzD,QAASS,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMM,EAAQC,EAASH,EAAGV,EAAG,GAAKM,EAAI,EAAE,EAClCQ,EAAQD,EAASH,EAAGV,EAAG,GAAKM,EAAI,EAAE,EAClCS,EAAQF,EAASH,EAAGV,EAAG,GAAKM,EAAI,EAAE,EAClCU,EAAc,GACpBJ,EAAM,QAAUI,EAChBF,EAAM,QAAUE,EAChBD,EAAM,QAAUC,EAChB,KAAK,OAAO,KAAKJ,EAAOE,EAAOC,CAAK,CACtC,CAEA,GAAIhB,GAAS,KAAM,CACjB,MAAMkB,EAAIlB,EAAM,KACVmB,EAAInB,EAAM,OACVoB,EAAQ,GAAKF,EAAI,GAAKC,EAAI,EAC1BE,EAAO,GAAKF,EAAI,EAChBG,EAAW,EACXC,EAASC,EAAYvB,EAAGwB,EAAQ,GAAK,CAAC,CAAC,EACvCC,EAAYxB,EAAML,EAAIE,EAAQ,EAAGD,CAAC,EAClC6B,EAAWC,EAAWF,EAAWH,EAAQD,EAAU,EAAG,EACtDO,EAAWD,EAAWF,EAAWH,EAAQ,CAACD,EAAU,EAAG,EACvDQ,EAAaC,EAASR,EAAQI,EAAUD,EAAWG,CAAQ,EAC3DG,EAAY9B,EAAML,EAAIE,EAAQ,GAAKD,CAAC,EACpCmC,EAAWL,EAAWI,EAAWT,EAAQD,EAAU,EAAG,EACtDY,EAAWN,EAAWI,EAAWT,EAAQ,CAACD,EAAU,EAAG,EACvDa,EAAaJ,EAASR,EAAQU,EAAUD,EAAWE,CAAQ,EAC3DE,EAAiBtB,EAASqB,EAAYlC,EAAGoB,CAAI,EAC7CgB,EAAiBvB,EAASgB,EAAY7B,EAAGmB,CAAK,EACpDiB,EAAe,UAAY,EAC3BD,EAAe,UAAY,EAC3B,KAAK,OAAO,KAAKC,EAAgBD,CAAc,CACjD,CACF,CAEA,IAAIE,EAAc,CAChB,IAAIC,EAAO,GACX,GAAI,KAAK,QAAU,KACjB,UAAWC,KAAS,KAAK,OACvBD,GAAQC,EAAM,IAAIF,CAAI,EAAI;AAAA,EAG9B,OAAOC,CACT,CAGA,MAAO,CACL,IAAIA,EAAO,GACX,GAAI,KAAK,QAAU,KACjB,UAAWC,KAAS,KAAK,OACvBD,GAAQC,EAAM,OAAS;AAAA,EAG3B,OAAOD,CACT,CACF"}