{"version":3,"file":"operations-AQNnMpfw.js","sources":["../../src/modules/operations.ts"],"sourcesContent":["import Decimal from 'decimal.js'\nimport { fixeBordures } from '../lib/2d/fixeBordures'\nimport { segment } from '../lib/2d/segmentsVecteurs'\nimport { texteParPosition } from '../lib/2d/textes'\nimport { bleuMathalea, orangeMathalea } from '../lib/colors'\nimport { base10VersBaseN } from '../lib/mathFonctions/baseConversions'\nimport {\n  nombreDeChiffresDansLaPartieEntiere,\n  ordreDeGrandeur,\n} from '../lib/outils/nombres'\nimport { stringNombre, texNombre } from '../lib/outils/texNombre'\nimport { context } from './context'\nimport { mathalea2d } from './mathalea2d'\nfunction nombreDeChiffresApresLaVirgule(x: Decimal) {\n  const s = x.toString()\n  const pe = x.floor().toString()\n  if (pe.length === s.length) return 0\n  return s.length - pe.length - 1\n}\n\nfunction cacherleszerosdevant(chaine: string) {\n  let blancs = ''\n  while (chaine[0] === '0') {\n    chaine = chaine.substr(1)\n    blancs += ' '\n  }\n  for (let i = 0; i < chaine.length; i++) {\n    blancs += `${chaine[i]}`\n  }\n  return blancs\n}\n\nfunction soustractionPosee(\n  operande1: number | Decimal,\n  operande2: number | Decimal,\n  base: number,\n  retenuesOn = true,\n  methodeParCompensation = true,\n  calculer = true,\n  style: string,\n) {\n  operande1 = new Decimal(operande1)\n  operande2 = new Decimal(operande2)\n  if (operande1.lessThan(operande2)) {\n    return `Je ne sais pas faire de soustraction avec un résultat négatif, or ici $${texNombre(operande1)} < ${texNombre(operande2)}$.`\n  }\n  if (operande2.equals(0))\n    return `Lorsqu'on soustrait 0, le résultat est le nombre initial, ici $${texNombre(operande1)}$.`\n  let code = ''\n  const objets = []\n  let sop1\n  let sop2\n  let sresultat\n  let resultat\n  let lresultat\n  let decalage\n  let chiffreop1, chiffreop2\n  const coefEntreChiffres = context.vue === 'latex' ? 0.6 : 1\n  if (base ? base === 10 : true) {\n    const dec1 = nombreDeChiffresApresLaVirgule(operande1)\n    const dec2 = nombreDeChiffresApresLaVirgule(operande2)\n    decalage = Math.max(dec1, dec2)\n    operande1 = operande1.mul(10 ** decalage)\n    operande2 = operande2.mul(10 ** decalage)\n    resultat = operande1.sub(operande2)\n    sresultat = resultat.toString()\n    lresultat = sresultat.length\n    if (operande1.lt(operande2)) {\n      sop2 = operande1.toString()\n      sop1 = operande2.toString()\n    } else {\n      sop1 = operande1.toString()\n      sop2 = operande2.toString()\n    }\n  } else {\n    decalage = 0\n    sop1 = base10VersBaseN(operande1, base)\n    sop2 = base10VersBaseN(operande2, base)\n    resultat = operande1.sub(operande2)\n    sresultat = base10VersBaseN(resultat, base)\n    lresultat = sresultat.length\n  }\n  const lop1 = sop1.length\n  const lop2 = sop2.length\n  const longueuroperandes = lop1\n  let retenues = '00'\n  if (lop1 > lop2) {\n    // si op1 a plus de chiffres qu'op2 on complète op2 avec des blancs.\n    for (let j = 0; j < lop1 - lop2; j++) {\n      sop2 = ' ' + sop2\n    }\n  }\n\n  // les deux opérandes ont le même nombre de chiffres\n  for (let i = longueuroperandes - 1; i >= lop1 - lop2; i--) {\n    // on construit la chaine des retenues.\n    chiffreop1 = isNaN(parseInt(sop1[i], base)) ? 0 : parseInt(sop1[i], base)\n    chiffreop2 = isNaN(parseInt(sop2[i], base)) ? 0 : parseInt(sop2[i], base)\n    if (chiffreop1 < chiffreop2 + parseInt(retenues.charAt(0), base)) {\n      retenues = `1${retenues}`\n    } else {\n      retenues = `0${retenues}`\n    }\n  }\n  sop1 = ` ${sop1}`\n  sop2 = `-${sop2}`\n  retenues = `0${retenues}`\n\n  for (let i = 0; i < longueuroperandes + 1 - lresultat; i++) {\n    sresultat = ` ${sresultat}`\n  }\n  if (methodeParCompensation || !calculer) {\n    const offsetCarry = lop1 - lop2\n    for (let i = 0; i < longueuroperandes + 1; i++) {\n      if (retenues[i] !== '0' && retenuesOn && calculer)\n        objets.push(\n          texteParPosition(\n            retenues[i],\n            i * espacement - 0.25 + espacement * offsetCarry,\n            4 * coefEntreChiffres,\n            0,\n            'red',\n            0.8,\n            'milieu',\n            false,\n          ),\n        )\n      if (sop1[i] !== ' ')\n        objets.push(\n          texteParPosition(\n            sop1[i],\n            i * espacement,\n            4 * coefEntreChiffres,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n      if (sop2[i] !== ' ')\n        objets.push(\n          texteParPosition(\n            sop2[i],\n            i * espacement,\n            3 * coefEntreChiffres,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n      if (retenues[i] !== '0' && retenuesOn && calculer)\n        objets.push(\n          texteParPosition(\n            `+${retenues[i]}`,\n            (i + offsetCarry - 1) * espacement,\n            2.5 * coefEntreChiffres,\n            0,\n            'blue',\n            0.6,\n            'milieu',\n            false,\n          ),\n        )\n      if (sresultat[i] !== ' ' && calculer)\n        objets.push(\n          texteParPosition(\n            sresultat[i],\n            i * espacement,\n            2 * coefEntreChiffres,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n    }\n  } else {\n    const hauteur = Array.apply(null, Array(longueuroperandes + 1)).map(\n      function () {\n        return 0\n      },\n    )\n    const ArrsOp1 = Array.apply(null, Array(sop1.length)).map(function (x, i) {\n      return sop1[i]\n    })\n    for (let i = longueuroperandes; i >= 0; i--) {\n      chiffreop2 = isNaN(parseInt(sop2[i], base)) ? 0 : parseInt(sop2[i], base)\n      const additOp1 = new Decimal(\n        parseInt(sresultat[i] === ' ' ? '0' : sresultat[i], base) + chiffreop2,\n      )\n      if (ArrsOp1[i] !== ' ')\n        objets.push(\n          texteParPosition(\n            ArrsOp1[i],\n            i * espacement,\n            4 * coefEntreChiffres,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n      if (\n        retenuesOn &&\n        additOp1.sub(parseInt(ArrsOp1[i])).abs().greaterThan(0.5)\n      ) {\n        // retenu à mettre ou cassage\n        for (let k = 0; k < 2; k++) {\n          if (\n            (additOp1.gte(10) &&\n              additOp1\n                .sub(10)\n                .sub(parseInt(ArrsOp1[i]))\n                .abs()\n                .greaterThan(0.5)) || // addition >= 10 & unités différentes donc il faut casser si unité différente\n            (additOp1.lt(10) &&\n              additOp1.sub(parseInt(ArrsOp1[i])).abs().greaterThan(0.5))\n          ) {\n            // addition < 10 et chiffres différents donc il faut casser\n            // on doit casser\n            objets.push(\n              segment(\n                i * espacement - 0.3,\n                (4 + hauteur[i] - 0.3) * coefEntreChiffres,\n                i * espacement + 0.3,\n                (4 + hauteur[i] + 0.3) * coefEntreChiffres,\n              ),\n            )\n            if (parseInt(ArrsOp1[i]) > 0) {\n              ArrsOp1[i] = (parseInt(ArrsOp1[i]) - 1).toString()\n            } else {\n              ArrsOp1[i] = '9'\n              // On ajoute une retenue car on passe de 10 à 9\n              objets.push(\n                texteParPosition(\n                  '1',\n                  i * espacement - 0.3,\n                  (4 + hauteur[i]) * coefEntreChiffres,\n                  0,\n                  bleuMathalea,\n                  0.8,\n                  'milieu',\n                  false,\n                ),\n              )\n            }\n            hauteur[i]++\n            objets.push(\n              texteParPosition(\n                ArrsOp1[i],\n                i * espacement,\n                (4 + hauteur[i]) * coefEntreChiffres,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                false,\n              ),\n            )\n          } else if (\n            additOp1.gte(10) &&\n            additOp1.sub(10).sub(parseInt(ArrsOp1[i])).abs().lessThan(0.5)\n          ) {\n            // addition >= 10 & unités différentes donc il faut mettre une retenue\n            // addition >= 10 & et les unités sont les mêmes donc il faut mettre une retenue\n            objets.push(\n              texteParPosition(\n                '1',\n                i * espacement - 0.3,\n                (4 + hauteur[i]) * coefEntreChiffres,\n                0,\n                bleuMathalea,\n                0.8,\n                'milieu',\n                false,\n              ),\n            )\n            break\n          }\n        }\n      }\n      if (sop2[i] !== ' ')\n        objets.push(\n          texteParPosition(\n            sop2[i],\n            i * espacement,\n            3 * coefEntreChiffres,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n      if (sresultat[i] !== ' ')\n        objets.push(\n          texteParPosition(\n            sresultat[i],\n            i * espacement,\n            2 * coefEntreChiffres,\n            0,\n            orangeMathalea,\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n    }\n  }\n\n  objets.push(\n    segment(\n      0,\n      (2 + 0.5) * coefEntreChiffres,\n      (longueuroperandes + 1) * espacement,\n      (2 + 0.5) * coefEntreChiffres,\n    ),\n  ) // Barre de la soustraction\n\n  if (decalage !== 0) {\n    objets.push(\n      texteParPosition(\n        ',',\n        0.3 + espacement * (longueuroperandes - decalage),\n        (4 + (context.vue === 'latex' ? -0.2 : 0)) * coefEntreChiffres,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n    objets.push(\n      texteParPosition(\n        ',',\n        0.3 + espacement * (longueuroperandes - decalage),\n        (3 + (context.vue === 'latex' ? -0.2 : 0)) * coefEntreChiffres,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n    if (calculer)\n      objets.push(\n        texteParPosition(\n          ',',\n          0.3 + espacement * (longueuroperandes - decalage),\n          (2 + (context.vue === 'latex' ? -0.2 : 0)) * coefEntreChiffres,\n          0,\n          orangeMathalea,\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n  }\n\n  code += mathalea2d(\n    Object.assign(\n      {\n        pixelsParCm: 20,\n        scale: 0.8,\n        style,\n        optionsTikz: ['transform shape, yshift=-1.75cm'],\n      },\n      fixeBordures(objets),\n    ),\n    objets,\n  )\n  return code\n}\n\nfunction divisionPosee(\n  divid: number | Decimal,\n  divis: number | Decimal,\n  precision = 0,\n  calculer = true,\n  style: string,\n) {\n  divid = new Decimal(divid)\n  divis = new Decimal(divis)\n  if (divis.equals(0)) {\n    return 'On ne peut pas diviser par 0.'\n  }\n  if (divid.equals(0)) {\n    return \"Lorsqu'on divise 0 par un nombre, le quotient est 0.\"\n  }\n  if (divid.equals(divis)) {\n    return \"Lorsqu'on divise un nombre par lui-même, le quotient est 1.\"\n  }\n  if (divis.equals(1)) {\n    return `Lorsqu'on divise un nombre par 1, le quotient est le nombre initial : $${texNombre(divid)}$.`\n  }\n  const objets = []\n  let zeroutile = false\n  const periode = 0 // EE : Pas compris à quoi servait cette variable ?\n  precision = Math.min(\n    precision,\n    nombreDeChiffresApresLaVirgule(divid.div(divis)),\n  )\n  const decalage = nombreDeChiffresApresLaVirgule(divis)\n  const dec1 = nombreDeChiffresApresLaVirgule(divid)\n  zeroutile = divid.lt(divis)\n  divis = divis.mul(10 ** decalage)\n  divid = divid.mul(10 ** (decalage + dec1))\n  let dec2 = nombreDeChiffresApresLaVirgule(divid)\n  dec2 = precision - dec2 - dec1\n  divid = divid.mul(10 ** dec2) // math.format(divid * 10 ** dec2, { notation: 'auto', lowerExp: -12, upperExp: 12, precision: 12 })\n  const ecriresoustraction = function (upos: number, P: string) {\n    objets.push(\n      texteParPosition(\n        '-',\n        (upos - P.length - 0.5) * espacement,\n        10 - i * 2,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n    for (let k = 0; k < P.length; k++) {\n      objets.push(\n        texteParPosition(\n          P[P.length - k - 1],\n          (upos - k - 1) * espacement,\n          10 - i * 2,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    }\n    objets.push(\n      segment(\n        (upos - P.length - 0.5) * espacement,\n        9.6 - i * 2,\n        (upos + 0.2 - 1) * espacement,\n        9.6 - i * 2,\n      ),\n    )\n  }\n  const ecrirereste = function (upos: number, R: string) {\n    for (let k = 0; k < R.length; k++) {\n      objets.push(\n        texteParPosition(\n          R[R.length - k - 1],\n          (upos - k - 1) * espacement,\n          9 - i * 2,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    }\n  }\n  const ecrirequotient = function (x: number, Q: string) {\n    objets.push(\n      texteParPosition(\n        Q,\n        (n + 1.5 + x) * espacement,\n        10,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n  }\n\n  const divd: string[] = []\n  const Q = []\n  const R = []\n  const P = []\n  const ProduitPartiel = []\n  let q\n  const dividende = divid.toString()\n  const diviseur = divis.toString()\n  const n = Math.log10(ordreDeGrandeur(divid.toNumber(), 1)) // nombre de chiffres du dividende\n  const m = Math.log10(ordreDeGrandeur(divis.toNumber(), 1)) // nombre de chiffre du diviseur\n  let upos = m\n\n  for (let i = 0; i < n; i++) {\n    // on écrit le dividende\n    objets.push(\n      texteParPosition(\n        dividende[i],\n        i * espacement,\n        11,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n  }\n  for (let i = 0; i < m; i++) {\n    // on écrit le diviseur\n    objets.push(\n      texteParPosition(\n        diviseur[i],\n        (i + n + 1.5) * espacement,\n        11,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n  }\n  if (dec1 + dec2 !== 0) {\n    objets.push(\n      texteParPosition(\n        ',',\n        (n - dec1 - dec2 - 1 + 0.5) * espacement,\n        11,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n  }\n  const longueurPotence = nombreDeChiffresDansLaPartieEntiere(\n    divid.toNumber() / divis.toNumber(),\n  )\n  objets.push(\n    segment(n * espacement, 11.5, n * espacement, 10.5 - 2 * longueurPotence),\n  ) // on trace le trait vertical\n  let i = 0\n  if (calculer) {\n    divd.push(dividende.substr(0, m))\n    if (parseInt(divd[0]) < divis.toNumber()) {\n      divd[0] += dividende.substr(m, 1)\n      if (divis.div(10 ** dec2).lt(divis) && zeroutile) {\n        ecrirequotient(-1, '0')\n      } else if (zeroutile) {\n        ecrirequotient(-1, '0')\n      }\n      upos++\n    } else if (zeroutile) {\n      ecrirequotient(-1, '0')\n    }\n    while (upos <= n) {\n      q = new Decimal(divd[i]).div(divis).floor()\n      Q.push(q.toString())\n      R.push(new Decimal(divd[i]).mod(divis).toString())\n      ProduitPartiel.push(new Decimal(q).mul(divis).floor().toString())\n      P.push('')\n      if (Q[i] === '0') {\n        for (let z = 0; z < m; z++) {\n          P[i] += '0'\n        }\n      } else {\n        for (\n          let ee = 0;\n          ee < divd[i].length - divis.mul(parseInt(Q[i])).toString().length;\n          ee++\n        ) {\n          P[i] += '0'\n        }\n        P[i] += divis.mul(parseInt(Q[i])).toString()\n      }\n      // ecriresoustraction(upos, divd[i])\n      ecriresoustraction(upos, ProduitPartiel[i])\n      if (upos < n) {\n        R[i] += dividende.substr(upos, 1)\n        ecrirereste(upos + 1, R[i])\n      } else {\n        ecrirereste(upos, R[i])\n      }\n      divd.push(R[i])\n      upos++\n      ecrirequotient(i, Q[i])\n      i++\n    }\n    if (precision > 0 && periode === 0) {\n      objets.push(\n        texteParPosition(\n          ',',\n          (n + 1 + i - dec2 - dec1) * espacement,\n          10,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    }\n    /* else if (periode !== 0) {\n        objets.push(texteParPosition(',', (2 * n - dec2 - dec1) * espacement, 10, 0, 'black', 1.2, 'milieu', false))\n      } */\n  }\n  if (calculer)\n    objets.push(segment(n * espacement, 10.5, (n + m + i) * espacement, 10.5)) // on trace le trait horizontal\n  else\n    objets.push(segment(n * espacement, 10.5, (n + m + 2) * espacement, 10.5)) // on trace le trait horizontal\n\n  const code = mathalea2d(\n    Object.assign({ pixelsParCm: 20, scale: 0.8, style }, fixeBordures(objets)),\n    objets,\n  )\n  return code\n}\n\nfunction additionPosee(\n  operande1: number | Decimal,\n  operande2: number | Decimal,\n  base: number,\n  retenuesOn: boolean,\n  calculer = true,\n  style: string,\n) {\n  operande1 = new Decimal(operande1)\n  operande2 = new Decimal(operande2)\n  if (operande1.equals(0) || operande2.equals(0)) {\n    return operande1.equals(0)\n      ? `$${texNombre(operande1)}$ étant nul, l'addition est égale à $${texNombre(operande2)}$`\n      : `$${texNombre(operande2)}$ étant nul, l'addition est égale à $${texNombre(operande1)}$`\n  }\n  const dec1 = nombreDeChiffresApresLaVirgule(operande1)\n  const dec2 = nombreDeChiffresApresLaVirgule(operande2)\n  const terme1 = operande1\n  const terme2 = operande2\n  const somme = terme1.plus(terme2)\n  let code = ''\n  const objets = []\n  let sop1\n  let sop2\n  let sresultat\n  let resultat\n  let lresultat\n  let decalage\n  let chiffreop1, chiffreop2\n  if (base ? base === 10 : true) {\n    decalage = Math.max(dec1, dec2)\n    sop1 = operande1.mul(10 ** dec1).toString()\n    sop2 = operande2.mul(10 ** dec2).toString()\n    operande1 = operande1.mul(10 ** decalage)\n    operande2 = operande2.mul(10 ** decalage)\n    if (dec1 > dec2)\n      for (let j = 0; j < dec1 - dec2; j++) sop2 += ' ' // On complète par des espaces si besoin\n    else for (let j = 0; j < dec2 - dec1; j++) sop1 += ' ' // On complète par des espaces si besoin\n    for (\n      let j = 0;\n      j < Math.abs(Math.min(0, Math.floor(Math.log10(terme1.toNumber()))));\n      j++\n    )\n      sop1 = '0' + sop1 // On complète par des zéros si besoin\n    for (\n      let j = 0;\n      j < Math.abs(Math.min(0, Math.floor(Math.log10(terme2.toNumber()))));\n      j++\n    )\n      sop2 = '0' + sop2 // On complète par des zéros si besoin\n    resultat = operande1.plus(operande2)\n    sresultat = resultat.toString()\n    for (\n      let j = 0;\n      j < Math.abs(Math.min(0, Math.floor(Math.log10(somme.toNumber()))));\n      j++\n    )\n      sresultat = '0' + sresultat // On complète par des zéros si besoin\n    lresultat = sresultat.length\n  } else {\n    decalage = 0\n    sop1 = base10VersBaseN(operande1, base)\n    sop2 = base10VersBaseN(operande2, base)\n    resultat = operande1.plus(operande2)\n    sresultat = base10VersBaseN(resultat, base)\n    lresultat = sresultat.length\n  }\n  const lop1 = sop1.length\n  const lop2 = sop2.length\n  const longueuroperandes = Math.max(lop1, lop2)\n  let retenues = ' '\n  if (lop1 > lop2) {\n    // si op1 a plus de chiffres qu'op2, on complète op2 avec des espaces.\n    for (let j = 0; j < lop1 - lop2; j++) {\n      sop2 = ' ' + sop2\n    }\n  } else if (lop2 > lop1) {\n    // on fait pareil pour op1 si c'est op2 le plus 'grand'\n    for (let j = 0; j < lop2 - lop1; j++) {\n      sop1 = ' ' + sop1\n    }\n  }\n  // les deux opérandes ont le même nombre de chiffres\n  for (let i = longueuroperandes - 1; i > 0; i--) {\n    // on construit la chaine des retenues.\n    chiffreop1 = isNaN(parseInt(sop1[i], base)) ? 0 : parseInt(sop1[i], base)\n    chiffreop2 = isNaN(parseInt(sop2[i], base)) ? 0 : parseInt(sop2[i], base)\n    if (\n      chiffreop1 +\n        chiffreop2 +\n        parseInt(Number(retenues[0]) > 0 ? retenues[0] : '0') >\n      base - 1\n    ) {\n      retenues = `1${retenues}`\n    } else {\n      retenues = ` ${retenues}`\n    }\n  }\n  retenues = ' ' + retenues\n  sop1 = ` ${sop1}`\n  sop2 = `+${sop2}`\n\n  for (let i = 0; i < longueuroperandes + 1 - lresultat; i++) {\n    sresultat = ` ${sresultat}`\n  }\n\n  for (let i = 0; i < longueuroperandes + 1; i++) {\n    if (sop1[i] !== ' ')\n      objets.push(\n        texteParPosition(\n          sop1[i],\n          i * espacement,\n          4,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    if (sop2[i] !== ' ')\n      objets.push(\n        texteParPosition(\n          sop2[i],\n          i * espacement,\n          3,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    objets.push(segment(0, 2, (longueuroperandes + 1) * espacement, 2))\n    if (retenues[i] !== ' ' && retenuesOn && calculer)\n      objets.push(\n        texteParPosition(\n          retenues[i],\n          i * espacement,\n          4.5,\n          0,\n          'red',\n          0.8,\n          'milieu',\n          false,\n        ),\n      )\n    if (sresultat[i] !== ' ' && calculer)\n      objets.push(\n        texteParPosition(\n          sresultat[i],\n          i * espacement,\n          1,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n  }\n  if (decalage !== 0) {\n    objets.push(\n      texteParPosition(\n        ',',\n        0.3 + espacement * (longueuroperandes - decalage),\n        4,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n    objets.push(\n      texteParPosition(\n        ',',\n        0.3 + espacement * (longueuroperandes - decalage),\n        3,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n    if (calculer)\n      objets.push(\n        texteParPosition(\n          ',',\n          0.3 + espacement * (longueuroperandes - decalage),\n          1,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n  }\n  code += mathalea2d(\n    Object.assign({ pixelsParCm: 20, scale: 0.8, style }, fixeBordures(objets)),\n    objets,\n  )\n  return code\n}\n\nexport function additionMultiplePosee(\n  operandes: (number | Decimal)[],\n  {\n    base = 10,\n    retenuesOn = false,\n    calculer = false,\n    style = 'display: block',\n  }: {\n    base?: number\n    retenuesOn?: boolean\n    calculer?: boolean\n    style?: string\n  },\n) {\n  if (context.isHtml) {\n    let code = ''\n    const operandesDecimal = operandes.map(\n      (op) => new Decimal(stringNombre(op, 5).replaceAll(',', '.').trim()),\n    ) // Je limite à 5 chiffres après la virgule pour éviter les problèmes des flottants.\n    const somme = operandesDecimal.reduce(\n      (acc: Decimal, val) => acc.plus(val),\n      new Decimal(0),\n    )\n    let maxDec = 0\n    const nbDecimals = operandesDecimal.map((op) =>\n      nombreDeChiffresApresLaVirgule(op),\n    )\n    nbDecimals.forEach((dec) => {\n      if (dec > maxDec) maxDec = dec\n    })\n    const objets = []\n    const stringOperandes: string[] = []\n    operandesDecimal.forEach((op, index) => {\n      let sop = ''\n      if (base ? base === 10 : true) {\n        sop = op.mul(10 ** nbDecimals[index]).toString()\n        op = op.mul(10 ** maxDec)\n        for (let j = 0; j < maxDec - nbDecimals[index]; j++) sop += ' ' // On complète par des espaces si besoin\n        for (\n          let j = 0;\n          j <\n          Math.abs(\n            Math.min(\n              0,\n              Math.floor(Math.log10(operandesDecimal[index].toNumber())),\n            ),\n          );\n          j++\n        )\n          sop = '0' + sop // On complète par des zéros si besoin\n      } else {\n        sop = base10VersBaseN(op, base)\n        op = op.mul(new Decimal(base).pow(maxDec))\n      }\n      stringOperandes.push(sop)\n    })\n    const longueurOperandes = Math.max(\n      ...stringOperandes.map((sop) => sop.length),\n    )\n\n    let retenues = ' '\n    stringOperandes.forEach((sop, index) => {\n      const lop = sop.length\n      if (lop < longueurOperandes) {\n        // si l'opérande a moins de chiffres que l'opérande le plus long, on complète avec des espaces.\n        for (let j = 0; j < longueurOperandes - lop; j++) {\n          sop = ' ' + sop\n        }\n        stringOperandes[index] = sop\n      }\n    })\n\n    // les deux opérandes ont le même nombre de chiffres\n    for (let i = longueurOperandes - 1; i > 0; i--) {\n      // on construit la chaine des retenues.\n      const chiffresSum = stringOperandes.reduce((acc, sop) => {\n        const chiffre = isNaN(parseInt(sop[i], base))\n          ? 0\n          : parseInt(sop[i], base)\n        return acc + chiffre\n      }, 0)\n      if (\n        chiffresSum + parseInt(Number(retenues[0]) > 0 ? retenues[0] : '0') >\n        base - 1\n      ) {\n        retenues = `${Math.floor((chiffresSum + parseInt(Number(retenues[0]) > 0 ? retenues[0] : '0')) / base)}${retenues}`\n      } else {\n        retenues = ` ${retenues}`\n      }\n    }\n\n    retenues = ' ' + retenues\n    for (let index = 0; index < stringOperandes.length; index++) {\n      if (index < stringOperandes.length - 1)\n        stringOperandes[index] = ` ${stringOperandes[index]}`\n      else stringOperandes[index] = `+${stringOperandes[index]}`\n    }\n\n    let sresultat = somme.toString().replace('.', '')\n    for (let i = 0; i < longueurOperandes + 1 - sresultat.length; i++) {\n      sresultat = ` ${sresultat}`\n    }\n    for (let i = 0; i < longueurOperandes + 1; i++) {\n      for (let k = 0; k < stringOperandes.length; k++) {\n        if (stringOperandes[k][i] !== ' ')\n          objets.push(\n            texteParPosition(\n              stringOperandes[k][i],\n              i * espacement,\n              operandesDecimal.length + 1 - k,\n              0,\n              'black',\n              1.2,\n              'milieu',\n              false,\n            ),\n          )\n      }\n      objets.push(segment(0, 1.4, (longueurOperandes + 1) * espacement, 1.4))\n      if (retenues[i] !== ' ' && retenuesOn && calculer)\n        objets.push(\n          texteParPosition(\n            retenues[i],\n            i * espacement,\n            operandesDecimal.length + 1.5,\n            0,\n            'red',\n            0.8,\n            'milieu',\n            false,\n          ),\n        )\n      if (sresultat[i] !== ' ' && calculer && i < sresultat.length)\n        objets.push(\n          texteParPosition(\n            sresultat[i],\n            i * espacement,\n            1,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n    }\n    if (maxDec !== 0) {\n      for (let i = 0; i < operandesDecimal.length; i++) {\n        objets.push(\n          texteParPosition(\n            ',',\n            0.3 + espacement * (longueurOperandes - maxDec),\n            operandesDecimal.length + 1 - i * 1,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n      }\n\n      if (calculer)\n        objets.push(\n          texteParPosition(\n            ',',\n            0.3 + espacement * (longueurOperandes - maxDec),\n            1,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n    }\n    code += mathalea2d(\n      Object.assign(\n        { pixelsParCm: 20, scale: 0.8, style },\n        fixeBordures(objets),\n      ),\n      objets,\n    )\n    return code\n  } else {\n    return calculer\n      ? `\\\\opmanyadd[lineheight=\\\\baselineskip,columnwidth=2ex,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operandes\n          .map((op) => texNombre(op, 5).replace('{,}', '.'))\n          .join('}{')}}`\n      : `\\\\opmanyadd[lineheight=\\\\baselineskip,columnwidth=2ex,displayshiftintermediary=none,resultstyle=\\\\white,intermediarystyle=\\\\white,remainderstyle=\\\\whitedecimalsepsymbol={,},voperator=bottom,voperation=top]{${operandes\n          .map((op) => texNombre(op, 5).replace('{,}', '.'))\n          .join('}{')}}`\n  }\n}\n\nfunction multiplicationPosee(\n  operande1: number | Decimal,\n  operande2: number | Decimal,\n  base: number,\n  calculer = true,\n  style: string,\n) {\n  operande1 = new Decimal(operande1)\n  operande2 = new Decimal(operande2)\n  if (operande1.equals(0) || operande2.equals(0)) {\n    return operande1.equals(0)\n      ? `$${texNombre(operande1)}$ étant nul, le produit est nul.`\n      : `$${texNombre(operande2)}$ étant nul, le produit est nul.`\n  }\n  if (operande1.equals(1) || operande2.equals(1)) {\n    return operande1.equals(1)\n      ? `Lorsqu'on multiplie par 1, le produit est le nombre initial, ici $${texNombre(operande2)}$.`\n      : `Lorsqu'on multiplie par 1, le produit est le nombre initial, ici $${texNombre(operande1)}$.`\n  }\n  let sop1\n  let sop2\n  const objets = []\n  let lignesinutiles = 0\n  let zeroUtile1, zeroUtile2\n  const produits = []\n  let strprod = 0\n  const sommes = []\n  let dec1, dec2\n  if (base ? base === 10 : true) {\n    // on est en base 10, la multiplication peut être décimale, on gère\n    zeroUtile1 = operande1.lt(1) // on gère les nombres en 0.xxx\n    zeroUtile2 = operande2.lt(1)\n    dec1 = nombreDeChiffresApresLaVirgule(operande1)\n    dec2 = nombreDeChiffresApresLaVirgule(operande2)\n    operande1 = operande1.mul(10 ** dec1)\n    operande2 = operande2.mul(10 ** dec2)\n    sop1 = (zeroUtile1 ? '0' : '') + Number(operande1).toString()\n    sop2 = (zeroUtile2 ? '0' : '') + Number(operande2).toString()\n  } else {\n    // en base différente de 10, les opérandes sont entières\n    dec1 = 0\n    dec2 = 0\n    sop1 = base10VersBaseN(operande1, base)\n    sop2 = base10VersBaseN(operande2, base)\n  }\n  let sresultat\n  const lop1 = sop1.length // nombre de chiffres de operande1\n  const lop2 = sop2.length // nombre de chiffres de operande2\n  const longueurtotale = lop1 + lop2 + 1\n  const retenues = []\n  for (let i = 0; i < lop2; i++) {\n    // i est l'index de la ligne de produit (i est l'indice du chiffre de operande2 traité)\n    retenues.push('0')\n    produits.push('')\n    for (let k = 0; k < i; k++) {\n      // on remplit ses chaines avec des 0 pour les retenues et des ° pour les produits\n      retenues[i] = `${retenues[i]}0` // non retenue\n      produits[i] = `${produits[i]}°` // non présence de chiffre dans le produit (décalage = zéro non affiché)\n    }\n    if (sop2[lop2 - i - 1] !== '0') {\n      // On évite la ligne de 0 si le chiffre de l'operande2 est 0 (0.xxx)\n      for (let j = 0; j < lop1; j++) {\n        // on effectue le produit du chiffre de l'operande2 par l'operande1 (j est l'indice du chiffre de operande1 traité)\n        if (base ? base === 10 : true) {\n          strprod =\n            parseInt(sop1[lop1 - j - 1]) * parseInt(sop2[lop2 - i - 1]) +\n            parseInt(retenues[i][0]) // retenues[i][0] est la retenue du produit précédent\n          if (j !== lop1 - 1)\n            retenues[i] =\n              `${Number(Math.floor(strprod / 10)).toString()}${retenues[i]}` // la nouvelle retenue est stockée en début de chaine retenues[i]\n          // il n'y a pas de retenues sur le dernier produit on ajoutera les dizaines dans la chaine produits[i] à la fin\n          produits[i] = `${Number(strprod % 10).toString()}${produits[i]}` // le chiffre du produit courant est stocké en début de chaine produits[i]\n        } else {\n          // ici on gère le calcul dans les autres bases (note de relecture : si base = 10 ce code fait la même chose qu'au dessus on pourrait ne garder que ce code)\n          strprod =\n            parseInt(sop1[lop1 - j - 1], base) *\n              parseInt(sop2[lop2 - i - 1], base) +\n            parseInt(retenues[i][0], base)\n          retenues[i] =\n            `${Number(Math.floor(strprod / base)).toString()}${retenues[i]}`\n          produits[i] = `${Number(strprod % base).toString()}${produits[i]}`\n        }\n      }\n      produits[i] =\n        `${Number(Math.floor(strprod / 10)).toString()}${produits[i]}` // on ajoute les dizaines du dernier produit en début de produits[i]\n    } else {\n      // ici on multiplie par 0 donc le produit est 0 et il n'y a pas de retenue ça ne sera pas affiché, mais on remplit les tableaux\n      for (let j = 0; j < lop1; j++) {\n        retenues[i] = `0${retenues[i]}`\n        produits[i] = `°${produits[i]}`\n      }\n    }\n  }\n  // mise en page : on complète les chaines à la même longueur\n  for (let i = lop2; i < longueurtotale; i++) {\n    sop2 = ` ${sop2}`\n  }\n  for (let i = lop1; i <= longueurtotale; i++) {\n    sop1 = ` ${sop1}`\n  }\n  for (let i = 0; i < lop2; i++) {\n    for (let j = retenues[i].length; j <= longueurtotale; j++) {\n      retenues[i] = `0${retenues[i]}`\n    }\n  }\n  let resultat\n  if (base ? base === 10 : true) {\n    resultat = operande1.mul(operande2)\n  } else {\n    resultat = base10VersBaseN(operande1.mul(operande2), base)\n  }\n  sresultat = resultat.toString()\n  if (dec1 + dec2 === sresultat.length) sresultat = '0' + sresultat\n  const lresultat = sresultat.length\n  for (let i = 0; i < lop2; i++) {\n    for (let j = produits[i].length; j <= lresultat; j++) {\n      produits[i] = `0${produits[i]}`\n    }\n  }\n  // la dernière chaine de retenue sera celle de la somme, on la complète ici\n  retenues.push('0')\n  for (let i = 0; i < lresultat - 1; i++) {\n    sommes.push(0)\n    sommes[i] += parseInt(retenues[lop2][0])\n    for (let j = 0; j < lop2; j++) {\n      if (\n        produits[j][lresultat - i] !== '0' &&\n        produits[j][lresultat - i] !== '°'\n      ) {\n        sommes[i] += parseInt(produits[j][lresultat - i])\n      }\n    }\n    retenues[lop2] =\n      `${Number(Math.floor(sommes[i] / 10)).toString()}${retenues[lop2]}`\n  }\n  // on remplace les zéros dans les produits par des espaces\n  for (let i = 0; i < lop2; i++) {\n    produits[i] = cacherleszerosdevant(produits[i])\n    for (let j = produits[i].length; j <= longueurtotale; j++) {\n      produits[i] = ` ${produits[i]}`\n    }\n  }\n  sop2 = `×${sop2}`\n  for (let i = lresultat; i <= longueurtotale; i++) {\n    sresultat = ` ${sresultat}`\n  }\n  // on complète la chaine de retenue à la taille de l'ensemble pour l'alignement\n  for (let i = retenues[lop2].length; i <= longueurtotale; i++) {\n    retenues[lop2] = `0${retenues[lop2]}`\n  }\n  // Ici commence la création des différents éléments affichés\n  for (let i = 0; i <= longueurtotale; i++) {\n    // d'abord les opérandes\n    if (sop1[i] !== ' ')\n      objets.push(\n        texteParPosition(\n          sop1[i],\n          i * espacement,\n          7,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    if (sop2[i] !== ' ')\n      objets.push(\n        texteParPosition(\n          sop2[i],\n          i * espacement,\n          6,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n  }\n  // Les virgules éventuelles\n  if (dec1 !== 0) {\n    objets.push(\n      texteParPosition(\n        ',',\n        0.3 + (longueurtotale - dec1) * espacement,\n        7,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n  }\n  if (dec2 !== 0) {\n    objets.push(\n      texteParPosition(\n        ',',\n        0.3 + (longueurtotale - dec2) * espacement,\n        6,\n        0,\n        'black',\n        1.2,\n        'milieu',\n        false,\n      ),\n    )\n  }\n  // Les produits partiels\n  if (calculer && lop2 !== 1) {\n    for (let j = 0; j < lop2; j++) {\n      if (sop2[longueurtotale - j] !== '0') {\n        for (let i = 0; i <= longueurtotale; i++) {\n          if (produits[j][i] !== ' ' && produits[j][i] !== '°')\n            objets.push(\n              texteParPosition(\n                produits[j][i],\n                i * espacement,\n                5 - j + lignesinutiles,\n                0,\n                'black',\n                1.2,\n                'milieu',\n                false,\n              ),\n            )\n          // if (retenues[j][i] !== '0' && retenuesOn) objets.push(texteParPosition(`(${retenues[j][i]})`, i * espacement, 5.5 - j + lignesinutiles, 0, 'blue', 0.7, 'milieu', false))\n        }\n      } else {\n        lignesinutiles++\n      }\n    }\n    // Les retenues\n    for (let i = 0; i <= longueurtotale; i++) {\n      if (!(produits[lop2 - 1][2] === ' ' && i === 2)) {\n        // on n'affiche pas la retenue si il n'y a pas autre chose dans la dernière colonne\n        if (retenues[lop2][i] !== '0')\n          objets.push(\n            texteParPosition(\n              retenues[lop2][i],\n              i * espacement,\n              5.5,\n              0,\n              'red',\n              0.7,\n              'milieu',\n              false,\n            ),\n          )\n      }\n    }\n  }\n  // Les traits horizontaux\n  if (calculer && lop2 !== 1)\n    objets.push(\n      segment(\n        0,\n        5.2 - lop2 + lignesinutiles,\n        (longueurtotale + 1) * espacement,\n        5.2 - lop2 + lignesinutiles,\n      ),\n    )\n  objets.push(segment(0, 5.5, (longueurtotale + 1) * espacement, 5.5))\n  if (calculer) {\n    // Le résultat et sa virgule\n    for (let i = 0; i <= longueurtotale; i++) {\n      if (sresultat[i] !== ' ')\n        objets.push(\n          texteParPosition(\n            sresultat[i],\n            i * espacement,\n            4.5 - (lop2 === 1 ? 0 : lop2) + lignesinutiles,\n            0,\n            'black',\n            1.2,\n            'milieu',\n            false,\n          ),\n        )\n    }\n    if (dec1 + dec2 !== 0) {\n      objets.push(\n        texteParPosition(\n          ',',\n          0.3 + (longueurtotale - dec2 - dec1) * espacement,\n          4.5 - (lop2 === 1 ? 0 : lop2) + lignesinutiles,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    }\n    for (let j = 1; j < lop2 - lignesinutiles; j++) {\n      objets.push(\n        texteParPosition(\n          '+',\n          0,\n          5 + j - lop2 + lignesinutiles,\n          0,\n          'black',\n          1.2,\n          'milieu',\n          false,\n        ),\n      )\n    }\n  }\n  const code = mathalea2d(\n    Object.assign({ pixelsParCm: 20, scale: 0.8, style }, fixeBordures(objets)),\n    objets,\n  )\n\n  return code\n}\n/**\n *\n * Pose une opération\n * @author Jean-Claude Lhote\n * les types possibles sont : addition, soustraction, multiplication, division, additiond, soustractiond, multiplicationd, divisiond\n * Le paramètre précision précise pour divisiond, le nombre de chiffres après la virgule dans le quotient.\n */\n\nconst espacement = 1\nexport default function operation({\n  operande1 = 1,\n  operande2 = 2,\n  type = 'addition',\n  precision = 0,\n  base = 10,\n  retenuesOn = true,\n  style = 'display: block',\n  methodeParCompensation = true,\n  options = { solution: true, colore: '' },\n}) {\n  // precision est pour le quotient décimal\n  const calculer = options.solution\n  let Code\n\n  let colore = ''\n  if (options.colore != null) colore = options.colore\n  const solution = options.solution ? 'Solution' : ''\n  if (context.isHtml) {\n    switch (type) {\n      case 'soustraction':\n        Code = soustractionPosee(\n          operande1,\n          operande2,\n          base,\n          retenuesOn,\n          methodeParCompensation,\n          calculer,\n          style,\n        )\n        break\n      case 'multiplication':\n        Code = multiplicationPosee(operande1, operande2, base, calculer, style)\n        break\n      case 'division':\n        Code = divisionPosee(operande1, operande2, precision, calculer, style)\n        break\n      case 'divisionE':\n        Code = divisionPosee(operande1, operande2, 0, calculer, style)\n        break\n      case 'addition':\n      default:\n        Code = additionPosee(\n          operande1,\n          operande2,\n          base,\n          retenuesOn,\n          calculer,\n          style,\n        )\n        break\n    }\n  } else {\n    switch (type) {\n      case 'soustraction':\n        if (!methodeParCompensation) {\n          Code = soustractionPosee(\n            operande1,\n            operande2,\n            base,\n            retenuesOn,\n            methodeParCompensation,\n            calculer,\n            style,\n          )\n        } else {\n          Code = options.colore\n            ? `Addition${colore}[${solution}]{${operande1}}{${operande2}}`\n            : options.solution\n              ? `\\\\opsub[lineheight=\\\\baselineskip,columnwidth=3ex,carrysub,lastcarry,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}`\n              : `\\\\opsub[lineheight=\\\\baselineskip,columnwidth=3ex,displayshiftintermediary=none,resultstyle=\\\\white,intermediarystyle=\\\\white,remainderstyle=\\\\white,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}`\n        } // { Code = `\\\\opsub[carrysub,lastcarry,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}` }\n        break\n      case 'multiplication':\n        Code = options.colore\n          ? `\\\\Multiplication${colore}[${solution}]{${operande1}}{${operande2}}`\n          : options.solution\n            ? `\\\\opmul[lineheight=\\\\baselineskip,columnwidth=2ex,displayshiftintermediary=all,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}`\n            : `\\\\opmul[lineheight=\\\\baselineskip,columnwidth=2ex,displayshiftintermediary=none,resultstyle=\\\\white,intermediarystyle=\\\\white,remainderstyle=\\\\white,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}`\n        break\n      case 'division':\n        Code = options.colore\n          ? `\\\\Division${colore}[${solution}]{${operande1}}{${operande2}}`\n          : options.solution\n            ? `\\\\opdiv[lineheight=\\\\baselineskip,columnwidth=2ex,displayintermediary=all,voperation=top,period,decimalsepsymbol={,},shiftdecimalsep=none]{${operande1}}{${operande2}}`\n            : `\\\\opdiv[lineheight=\\\\baselineskip,columnwidth=2ex,displayshiftintermediary=none,resultstyle=\\\\white,intermediarystyle=\\\\white,remainderstyle=\\\\white,voperation=top,period,decimalsepsymbol={,},shiftdecimalsep=none]{${operande1}}{${operande2}}`\n        break\n      case 'divisionE':\n        Code = options.colore\n          ? `\\\\Division${colore}{${operande1}}{${operande2}}`\n          : options.solution\n            ? `\\\\opidiv[lineheight=\\\\baselineskip,columnwidth=2ex,voperation=top]{${operande1}}{${operande2}}`\n            : `\\\\opidiv[lineheight=\\\\baselineskip,columnwidth=2ex,displayshiftintermediary=none,resultstyle=\\\\white,intermediarystyle=\\\\white,remainderstyle=\\\\white,voperation=top]{${operande1}}{${operande2}}`\n        break\n      case 'addition':\n      default:\n        Code = options.colore\n          ? `\\\\Addition${colore}[${solution}]{${operande1}}{${operande2}}`\n          : options.solution\n            ? `\\\\opadd[lineheight=\\\\baselineskip,columnwidth=2ex,decimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}`\n            : `\\\\opadd[lineheight=\\\\baselineskip,columnwidth=2ex,displayshiftintermediary=none,resultstyle=\\\\white,intermediarystyle=\\\\white,remainderstyle=\\\\whitedecimalsepsymbol={,},voperator=bottom,voperation=top]{${operande1}}{${operande2}}`\n        break\n    }\n  }\n\n  return Code\n}\n"],"names":["nombreDeChiffresApresLaVirgule","x","s","pe","cacherleszerosdevant","chaine","blancs","i","soustractionPosee","operande1","operande2","base","retenuesOn","methodeParCompensation","calculer","style","Decimal","texNombre","code","objets","sop1","sop2","sresultat","resultat","lresultat","decalage","chiffreop1","chiffreop2","coefEntreChiffres","context","dec1","dec2","base10VersBaseN","lop1","lop2","longueuroperandes","retenues","j","offsetCarry","texteParPosition","espacement","hauteur","ArrsOp1","additOp1","k","segment","bleuMathalea","orangeMathalea","mathalea2d","fixeBordures","divisionPosee","divid","divis","precision","zeroutile","periode","ecriresoustraction","upos","P","ecrirereste","R","ecrirequotient","Q","n","divd","ProduitPartiel","q","dividende","diviseur","ordreDeGrandeur","m","longueurPotence","nombreDeChiffresDansLaPartieEntiere","z","ee","additionPosee","terme1","terme2","somme","additionMultiplePosee","operandes","operandesDecimal","op","stringNombre","acc","val","maxDec","nbDecimals","dec","stringOperandes","index","sop","longueurOperandes","lop","chiffresSum","chiffre","multiplicationPosee","lignesinutiles","zeroUtile1","zeroUtile2","produits","strprod","sommes","longueurtotale","operation","type","options","Code","colore","solution"],"mappings":"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"}