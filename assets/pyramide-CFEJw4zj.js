var c=Object.defineProperty;var v=(o,e,i)=>e in o?c(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var n=(o,e,i)=>v(o,typeof e!="symbol"?e+"":e,i);import{B as m}from"./BoiteBuilder-CO6E317I.js";import{p,r as u,q as d,O as V}from"./index-CMKaCP9B.js";class E{constructor({operation:e="+",nombreEtages:i=3,rangeData:l=[1,10],exclusions:a=[],fractionOn:r=!1}){n(this,"operation");n(this,"nombreEtages");n(this,"valeurs");n(this,"isVisible");n(this,"fractionOn");this.operation=e,this.nombreEtages=i,this.valeurs=[],this.isVisible=[],this.fractionOn=r;for(let s=i-1;s>=0;s--){this.valeurs[s]=[],this.isVisible[s]=[];for(let t=0,f,b;t<=s;t++){if(s===i-1)if(this.fractionOn){const h=l;b=p(h[1]),f=u(h[0][0],h[0][1],a.concat([b])),this.valeurs[s][t]=d(f,b).simplifie()}else{const h=l;this.valeurs[s][t]=u(h[0],h[1],a)}else switch(e){case"+":this.fractionOn?this.valeurs[s][t]=this.valeurs[s+1][t].sommeFraction(this.valeurs[s+1][t+1]).simplifie():this.valeurs[s][t]=Number(this.valeurs[s+1][t])+Number(this.valeurs[s+1][t+1]);break;case"*":this.fractionOn?this.valeurs[s][t]=this.valeurs[s+1][t].produitFraction(this.valeurs[s+1][t+1]).simplifie():this.valeurs[s][t]=Number(this.valeurs[s+1][t])*Number(this.valeurs[s+1][t+1]);break}this.isVisible[s][t]=!1}}}visible(e,i){return this.isVisible[i][e]}estSolvable(e,i){return this.visible(e,i)?!0:i===this.nombreEtages-1?!1:this.estSolvable(e,i+1)&&this.estSolvable(e+1,i+1)}choisisUneCaseNonVisible(){let e,i,l=!1,a=0;do{a++,i=u(1,this.nombreEtages-1),e=u(0,i);let r=!0;for(let s=0;s<i;s++)s!==e&&!this.visible(s,i)&&(r=!1);r&&a<20?l=!1:l=!this.visible(e,i)}while(!l);return[e,i]}aleatoirise(){let e=!1;do{const[i,l]=this.choisisUneCaseNonVisible();this.isVisible[l][i]=!0,e=this.estSolvable(0,0)}while(!e)}representeMoi(e=0,i=0){const l=[],a=this.fractionOn?2:1;for(let r=this.nombreEtages;r>0;r--)for(let s=0;s<r;s++)l.push(new m({xMin:e+s*4+(this.nombreEtages-r)*2,yMin:i+(this.nombreEtages-r)*a,xMax:e+s*4+4+(this.nombreEtages-r)*2,yMax:i+(1+this.nombreEtages-r)*a}).addTextIn({textIn:this.isVisible[r-1][s]?this.fractionOn?this.valeurs[r-1][s].texFractionSimplifiee:V(Number(this.valeurs[r-1][s]),0):"",opacity:1}).render());return l}}export{E as P};
//# sourceMappingURL=pyramide-CFEJw4zj.js.map
