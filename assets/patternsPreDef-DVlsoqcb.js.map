{"version":3,"file":"patternsPreDef-DVlsoqcb.js","sources":["../../src/lib/mathFonctions/Ratio.ts","../../src/lib/2d/figures2d/Shape3d.ts","../../src/lib/2d/patterns/VisualPattern3D.ts","../../src/lib/2d/patterns/patternsPreDef.ts"],"sourcesContent":["export class Ratio {\n  values: number[]\n\n  constructor(values: number[]) {\n    if (values.length < 2) {\n      throw new Error('Un ratio doit avoir au moins 2 valeurs.')\n    }\n    if (values.some((v) => v <= 0 || !isFinite(v))) {\n      throw new Error(\n        'Toutes les valeurs du ratio doivent être des nombres strictement positifs et finis.',\n      )\n    }\n    this.values = [...values]\n  }\n\n  total(): number {\n    return this.values.reduce((acc, val) => acc + val, 0)\n  }\n\n  percentages(): number[] {\n    const total = this.total()\n    return this.values.map((v) => (v / total) * 100)\n  }\n\n  setValue(index: number, newValue: number): void {\n    if (index < 0 || index >= this.values.length) {\n      throw new Error('Index hors limites.')\n    }\n    if (newValue <= 0 || !isFinite(newValue)) {\n      throw new Error(\n        'La nouvelle valeur doit être strictement positive et finie.',\n      )\n    }\n    const scaleFactor = newValue / this.values[index]\n    this.values = this.values.map((v, i) =>\n      i === index ? newValue : v * scaleFactor,\n    )\n  }\n\n  scale(factor: number): void {\n    if (factor <= 0 || !isFinite(factor)) {\n      throw new Error('Le facteur doit être strictement positif et fini.')\n    }\n    this.values = this.values.map((v) => v * factor)\n  }\n\n  adjustToTotal(targetTotal: number): void {\n    if (targetTotal <= 0 || !isFinite(targetTotal)) {\n      throw new Error('Le total cible doit être strictement positif et fini.')\n    }\n    const currentTotal = this.total()\n    const factor = targetTotal / currentTotal\n    this.scale(factor)\n  }\n\n  normalized(): number[] {\n    // Pour les floats, on cherche un GCD approximatif\n    const precision = 1e-8\n    const scaled = this.scaleToIntegers(this.values, precision)\n    const gcd = this.greatestCommonDivisor(scaled)\n    return scaled.map((v) => v / gcd)\n  }\n\n  isProportionalTo(other: Ratio, epsilon: number = 1e-6): boolean {\n    if (this.values.length !== other.values.length) return false\n\n    const ratios = this.values.map((v, i) => v / other.values[i])\n\n    // Vérifie que tous les ratios sont égaux dans la tolérance epsilon\n    const firstRatio = ratios[0]\n    return ratios.every((r) => Math.abs(r - firstRatio) < epsilon)\n  }\n\n  equals(other: Ratio, epsilon: number = 1e-8): boolean {\n    if (this.values.length !== other.values.length) return false\n    return this.values.every((v, i) => Math.abs(v - other.values[i]) < epsilon)\n  }\n\n  asString(separator: string = ':'): string {\n    return this.values.join(separator)\n  }\n\n  toJSON(): number[] {\n    return [...this.values]\n  }\n\n  static fromJSON(json: number[]): Ratio {\n    return new Ratio(json)\n  }\n\n  toLatex(): string {\n    return this.values.join(' : ')\n  }\n\n  clone(): Ratio {\n    return new Ratio([...this.values])\n  }\n\n  private scaleToIntegers(values: number[], precision: number): number[] {\n    const scaleFactor = this.findScaleFactor(values, precision)\n    return values.map((v) => Math.round(v * scaleFactor))\n  }\n\n  private findScaleFactor(values: number[], precision: number): number {\n    let maxDecimals = 0\n    for (const v of values) {\n      const decimals = this.countDecimals(v, precision)\n      if (decimals > maxDecimals) maxDecimals = decimals\n    }\n    return Math.pow(10, maxDecimals)\n  }\n\n  private countDecimals(value: number, precision: number): number {\n    let decimals = 0\n    while (\n      Math.abs(\n        Math.round(value * Math.pow(10, decimals)) -\n          value * Math.pow(10, decimals),\n      ) > precision &&\n      decimals < 10\n    ) {\n      decimals++\n    }\n    return decimals\n  }\n\n  private greatestCommonDivisor(arr: number[]): number {\n    const gcdTwo = (a: number, b: number): number => {\n      if (!b) return a\n      return gcdTwo(b, a % b)\n    }\n\n    return arr.reduce((acc, val) => gcdTwo(acc, val))\n  }\n}\nexport function ratioFromJSON(json: number[]): Ratio {\n  return Ratio.fromJSON(json)\n}\nexport function ratioToJSON(ratio: Ratio): number[] {\n  return ratio.toJSON()\n}\nexport function ratioToLatex(ratio: Ratio): string {\n  return ratio.toLatex()\n}\nexport function ratioFromLatex(latex: string): Ratio {\n  const values = latex.split(':').map((v) => parseFloat(v.trim()))\n  return new Ratio(values)\n}\n","import { context } from '../../../modules/context'\nimport type { IVisualPattern3D } from '../Interfaces'\nimport { ObjetMathalea2D } from '../ObjetMathalea2D'\nimport { VisualPattern } from '../patterns/VisualPattern'\n// Fonction dupliquée de ../Figures2D.ts pour éviter les dépendances circulaires\nfunction rotatedBoundingBoxWithCenter(\n  xmin: number,\n  ymin: number,\n  xmax: number,\n  ymax: number,\n  alpha: number,\n  cx: number,\n  cy: number,\n): [number, number, number, number] {\n  const w2 = (xmax - xmin) / 2\n  const h2 = (ymax - ymin) / 2\n\n  const cosA = Math.cos(alpha)\n  const sinA = Math.sin(alpha)\n\n  const dx = Math.abs(w2 * cosA) + Math.abs(h2 * sinA)\n  const dy = Math.abs(w2 * sinA) + Math.abs(h2 * cosA)\n\n  const centerX = (xmin + xmax) / 2\n  const centerY = (ymin + ymax) / 2\n\n  const rotatedCenterX = cosA * (centerX - cx) - sinA * (centerY - cy) + cx\n  const rotatedCenterY = sinA * (centerX - cx) + cosA * (centerY - cy) + cy\n\n  return [\n    rotatedCenterX - dx,\n    rotatedCenterY - dy,\n    rotatedCenterX + dx,\n    rotatedCenterY + dy,\n  ]\n}\n\n// Classe de base pour les formes 2D sans les méthodes de transformation et d'animation de Figure2D\nexport class Shape3D extends ObjetMathalea2D {\n  shapeId: string\n  codeSvg: string\n  codeTikz: string\n  x: number\n  y: number\n  angle: number\n  scale: number\n  width: number // laargeur en cm\n  height: number // hauteur en cm\n  pixelsParCm: number\n  bordures: [number, number, number, number] // [xmin, ymin, xmax, ymax]\n  opacite = 1\n  constructor({\n    name = '',\n    codeSvg,\n    codeTikz,\n    x = 0,\n    y = 0,\n    angle = 0,\n    scale = 1,\n    width,\n    height,\n    pixelsParCm = context.pixelsParCm,\n    opacite = 1,\n    bordures,\n    shapeId = 'cubeIso',\n  }: {\n    name?: string\n    codeSvg: string\n    codeTikz: string\n    x?: number\n    y?: number\n    angle?: number\n    scale?: number\n    width: number\n    height: number\n    pixelsParCm?: number\n    opacite?: number\n    bordures?: [number, number, number, number]\n    shapeIso?: string\n    shapeId?: string\n  }) {\n    super()\n    this.name = name\n    this.codeSvg = codeSvg\n    this.codeTikz = codeTikz\n    this.width = width\n    this.height = height\n    this.x = x\n    this.y = y\n    this.angle = angle\n    this.scale = scale\n    this.shapeId = shapeId\n\n    this.pixelsParCm = pixelsParCm\n    this.opacite = opacite\n    this.bordures = bordures ?? [\n      this.x,\n      this.y,\n      this.x + this.width,\n      this.y + this.height,\n    ]\n  }\n\n  svg(coeff: number) {\n    return `<g opacity=${this.opacite} transform=\"translate(${this.x * coeff}, ${-this.y * coeff}) ${this.scale !== 1 || this.scale !== 1 || coeff !== 20 ? `scale(${(this.scale * coeff) / 20},${(this.scale * coeff) / 20})` : ''} ${this.angle !== 0 ? `rotate(${-this.angle})` : ''}\">${this.codeSvg}</g>`\n  }\n\n  tikz() {\n    // const tikzCenterX = this.width / 2\n    // const tikzCenterY = this.height / 2\n    return `\\\\begin{scope}[fill opacity=${this.opacite}, shift={(${this.x.toFixed(3)},${this.y.toFixed(3)})}${this.scale !== 1 ? `, xscale=${this.scale}` : ''}${this.scale !== 1 ? `, yscale=${this.scale}` : ''}${this.angle !== 0 ? `, rotate around={${this.angle}:(0,0)}` : ''}]\n    ${this.codeTikz}\n    \\\\end{scope}`\n  }\n\n  updateBordures() {\n    this.bordures = [this.x, this.y, this.x + this.width, this.y + this.height]\n    if (this.angle !== 0) {\n      this.bordures = rotatedBoundingBoxWithCenter(\n        this.bordures[0],\n        this.bordures[1],\n        this.bordures[2],\n        this.bordures[3],\n        (this.angle * Math.PI) / 180,\n        this.x,\n        this.y,\n      )\n    }\n  }\n\n  dilate(factor: number) {\n    const lastScale = this.scale\n    this.scale = lastScale\n    this.width *= factor\n    this.heigth *= factor\n  }\n\n  clone(x: number, y: number, z: number, angle: number): Shape3D {\n    const codeTikz = String(this.codeTikz)\n    const codeSvg = String(this.codeSvg)\n    const [px, py] = project3dIso(x, y, z, angle ?? Math.PI / 6).map(\n      (n) => n / 20,\n    )\n    const scale = this.scale\n    const width = Number(this.width)\n    const height = Number(this.height)\n    const pixelsParCm = Number(this.pixelsParCm)\n    return new Shape3D({\n      codeSvg,\n      codeTikz,\n      x: px,\n      y: py,\n      angle,\n      scale,\n      width,\n      height,\n      pixelsParCm,\n      opacite: this.opacite,\n      bordures: this.bordures,\n    })\n  }\n}\n\nexport function project3dIso(\n  x: number,\n  y: number,\n  z: number,\n  angle: number = Math.PI / 6,\n): [number, number] {\n  const cosA = Math.cos(angle)\n  const sinA = Math.sin(angle)\n  const px = context.isHtml\n    ? (x * sinA + y * cosA) * 20\n    : (x * sinA + y * cosA) * 20\n  const py = context.isHtml\n    ? (x * cosA - y * sinA) * 10 - z * 20\n    : z * 20 - (x * cosA - y * sinA) * 10\n  return [px, py]\n}\nexport function faceTop(angle: number): string {\n  const topPoints = [\n    project3dIso(0, 0, 1, angle),\n    project3dIso(0, 1, 1, angle),\n    project3dIso(1, 1, 1, angle),\n    project3dIso(1, 0, 1, angle),\n  ]\n  return `<polygon points=\"${topPoints.map((p) => p.join(',')).join(' ')}\" fill=\"green\" stroke=\"black\" stroke-width=\"1\" />`\n}\nexport function faceLeft(angle: number): string {\n  const leftPoints = [\n    project3dIso(0, 0, 1, angle),\n    project3dIso(1, 0, 1, angle),\n    project3dIso(1, 0, 0, angle),\n    project3dIso(0, 0, 0, angle),\n  ]\n  return `<polygon points=\"${leftPoints.map((p) => p.join(',')).join(' ')}\n\" fill=\"yellow\" stroke=\"black\" stroke-width=\"1\" />`\n}\nexport function faceRight(angle: number): string {\n  const rightPoints = [\n    project3dIso(1, 0, 1, angle),\n    project3dIso(1, 1, 1, angle),\n    project3dIso(1, 1, 0, angle),\n    project3dIso(1, 0, 0, angle),\n  ]\n  return `<polygon points=\"${rightPoints.map((p) => p.join(',')).join(' ')}\" fill=\"red\" stroke=\"black\" stroke-width=\"1\" />`\n}\n\nexport function cubeDef(shapeId?: string, scale?: number): ObjetMathalea2D {\n  const cube = new ObjetMathalea2D()\n  cube.bordures = [0, -0.5, 1, 1]\n  cube.svg = function (coeff: number): string {\n    return `\n  <defs>\n    <g id=\"${shapeId ?? 'cubeIso'}\" transform=\"scale(${scale ?? 1},${scale ?? 1})\">\n      ${faceTop(Math.PI / 6)}\n      ${faceLeft(Math.PI / 6)}\n      ${faceRight(Math.PI / 6)}\n    </g>\n  </defs>`\n  }\n  cube.tikz = function (): string {\n    return `\n  \\\\tikzset{\n   cubeIso/.pic = {\n    % Cube en projection axonométrique\n    \\\\draw[fill=yellow, draw=darkgray, line width=0.5pt] (0,0) -- (0,1) -- (0.5,0.567) -- (0.5,-0.433) -- cycle;\n    \\\\draw[fill=red, draw=darkgray, line width=0.5pt] (0.5,0.567) -- (1.366,0.817) -- (1.366,-0.183) -- (0.5,-0.433) -- cycle;\n    \\\\draw[fill=green, draw=darkgray, line width=0.5pt]  (0,1) -- (0.5,0.567) -- (1.366,0.817) -- (0.866,1.25) -- cycle;\n   }\n  }`.trim()\n  }\n\n  return cube\n}\n\n/**\n * Génère une figure représentant un cube en projection axonométrique centré en (0,0), taille 1x1.\n * @param options Options pour personnaliser le style du cube.\n * @returns Une instance de Shape2D représentant un cube.\n */\nexport function shapeCubeIso(\n  shapeId?: string,\n  x?: number,\n  y?: number,\n  options?: {\n    fillStyle?: string\n    strokeStyle?: string\n    lineWidth?: number\n    opacite?: number\n    scale?: number\n  },\n): Shape3D {\n  const codeSvg = `<use href=\"#${shapeId}\" transform=\"translate(${x ?? 0},${y ?? 0})\"></use>`\n  const codeTikz = '\\\\pic at (0,0) {cubeIso};'\n  return new Shape3D({\n    codeSvg,\n    codeTikz,\n    width: 1.732,\n    height: 2,\n    opacite: 1,\n    name: 'cube',\n    scale: options?.scale ?? 1,\n  })\n}\n/*\n  MGu refactoring pour gérer les eventsListeners\n*/\nexport function updateCubeIso({\n  pattern,\n  i,\n  j,\n  angle,\n  newScale,\n  inCorrectionMode,\n}: {\n  pattern: IVisualPattern3D\n  i: number\n  j: number\n  angle: number\n  newScale?: number\n  inCorrectionMode?: boolean\n}): void | (() => void) {\n  if (pattern instanceof VisualPattern) return\n  let dragging = false\n  let lastX = 0\n  const motifId = `Motif${i}F${j}`\n\n  function mouseMoveAction(e: MouseEvent) {\n    if (!dragging) return\n    const dx = e.clientX - lastX\n    lastX = e.clientX\n    angle += dx * 0.02\n    angle = Math.max(0.1, Math.min(1.4, angle))\n    renderScene()\n  }\n\n  function mouseupAction() {\n    dragging = false\n  }\n\n  function destroyListeners() {\n    window.removeEventListener('mousemove', mouseMoveAction)\n    window.removeEventListener('mouseup', mouseupAction)\n    document.removeEventListener('correctionsAffichees', setup)\n    document.removeEventListener('exercicesAffiches', setup)\n  }\n\n  window.addEventListener('mousemove', mouseMoveAction)\n  window.addEventListener('mouseup', mouseupAction)\n\n  function renderScene() {\n    const svg = document.querySelector(`svg#${motifId}`) as\n      | (SVGSVGElement & { _eventsBound?: boolean })\n      | null\n    if (!svg) return\n    // Sélectionne la balise <defs> qui contient un <g> dont l'id commence par \"cubeIso\"\n    const defs = Array.from(svg.querySelectorAll('defs')).find((defsEl) =>\n      defsEl.querySelector('g[id^=\"cubeIso\"]'),\n    ) as SVGDefsElement | undefined\n    if (!defs) return\n\n    // Recalculate face coordinates based on angle\n    // Example: update faceTop, faceLeft, faceRight\n    // (Assume faceTop, faceLeft, faceRight are functions that accept angle)\n    const top = faceTop(angle)\n    const left = faceLeft(angle)\n    const right = faceRight(angle)\n\n    // Update the <g> content in <defs>\n    const g = defs.querySelector(`#cubeIsoQ${i}F${j}`)\n    if (g) {\n      g.innerHTML = `${top}\\n${left}\\n${right}\\n`\n    }\n    // Sélectionne tous les <g> qui suivent <defs> et qui sont enfants directs de <svg>\n    const svgGroups = Array.from(svg.children).filter(\n      (el) => el.tagName === 'g',\n    ) as SVGGElement[]\n    // Supprimer tous les groupes enfants directs de <svg>\n    svgGroups.forEach((group) => group.remove())\n\n    // Recalculer chaque polygone avec pattern.render(j, angle)\n    const cells = (pattern as IVisualPattern3D).update3DCells(j + 1)\n    // Ajouter les SVG générés par svg() de chaque objet\n    cells.forEach((cell) => {\n      const [px, py] = project3dIso(cell[0], cell[1], cell[2], angle)\n      const obj = shapeCubeIso(`cubeIsoQ${i}F${j}`, px, py, {\n        scale: 1,\n      })\n      if (typeof obj.svg === 'function') {\n        const temp = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n        // temp.setAttribute('transform', `translate(${px}, ${py})`)\n        temp.innerHTML = obj.svg(20)\n        svg.appendChild(temp)\n      }\n    })\n  }\n\n  function setup() {\n    const svg = document.querySelector(`svg#${motifId}`) as\n      | (SVGSVGElement & { _eventsBound?: boolean })\n      | null\n    if (svg && !svg._eventsBound) {\n      // console.log(motifId)\n      svg._eventsBound = true\n\n      svg.addEventListener('mouseover', () => {\n        svg.style.cursor = 'grab'\n      })\n\n      svg.addEventListener('mousedown', (e) => {\n        dragging = true\n        lastX = e.clientX\n      })\n      renderScene()\n    }\n  }\n  if (inCorrectionMode) {\n    // MGu Jean-Claude a raison , il faut cette évent pour savoir quand la correction est affichée\n    document.addEventListener('correctionsAffichees', setup)\n  } else {\n    // Listen for the 'exercicesAffiches' event to re-render the scene\n    document.addEventListener('exercicesAffiches', setup)\n  }\n  return destroyListeners\n}\n","import type { NestedObjetMathalea2dArray } from '../../../types/2d'\nimport {\n  ajouteCanvas3d,\n  type Elements3DDescription,\n} from '../../3d/3d_dynamique/Canvas3DElement'\nimport { Shape3D, shapeCubeIso } from '../figures2d/Shape3d'\nimport { rangeCubes } from './patternsPreDef'\n\ntype Coord3d = [number, number, number, string]\n/**\n * @author Jean-Claude Lhote\n *\n */\n\nfunction filterCells(cells: Set<string>): Set<string> {\n  function hasAllNeightbors(cell: string, cells: Set<string>): boolean {\n    const [x, y, z] = cell.split(';').map(Number)\n    // Vérifie si toutes les cellules voisines sont présentes\n    return (\n      cells.has(`${x + 1};${y};${z}`) &&\n      cells.has(`${x};${y - 1};${z}`) &&\n      cells.has(`${x};${y};${z + 1}`)\n    )\n  }\n  const filteredCells = new Set<string>()\n  for (const cell of cells) {\n    if (!hasAllNeightbors(cell, cells)) {\n      // Si la cellule a tous ses voisins, on la supprime\n      filteredCells.add(cell)\n    }\n  }\n  return filteredCells\n}\n\nexport class VisualPattern3D {\n  shape?: Shape3D\n  shapes: string[] // formes utilisées pour les cellules\n  prefixId?: string\n  type: 'iso' | 'full3D'\n  cells: Set<string> // ce sont des coordonnées sous forme de chaîne de caractères \"x,y\" car les ensembles ne peuvent pas contenir d'objets complexes comme des tableaux\n  // on utilise un ensemble pour stocker les cellules, ce qui permet d'éviter les doublons et de faciliter la vérification de la présence d'une cellule\n  // et la conversion en chaîne de caractères permet de les stocker efficacement dans un ensemble\n\n  constructor({\n    initialCells,\n    prefixId,\n    shapes,\n    type,\n  }: {\n    initialCells: Coord3d[] | string[] | Set<string>\n    prefixId: string\n    shapes: string[]\n    type: 'iso' | 'full3D'\n  }) {\n    if (initialCells instanceof Set) {\n      // si initialCells est déjà un Set, on l'utilise directement\n      this.cells = initialCells\n    } else if (Array.isArray(initialCells)) {\n      if (typeof initialCells[0] === 'string') {\n        // si initialCells est déjà un tableau de chaînes de caractères, on le convertit en Set directement\n        this.cells = new Set(initialCells as string[])\n      } else if (Array.isArray(initialCells[0]) && initialCells[0].length > 2) {\n        // si initialCells est un tableau de coordonnées, on les convertit en chaînes de caractères\n        // en utilisant la méthode coordToKey\n        this.cells = new Set(\n          (initialCells as Coord3d[]).map(VisualPattern3D.coordToKey),\n        )\n      } else if (initialCells.length === 0) {\n        this.cells = new Set()\n      } else {\n        throw new Error(\n          'initialCells must be an array of coordinates or strings',\n        )\n      }\n      // on initialise l'ensemble des cellules avec les coordonnées initiales\n    } else {\n      throw new Error(\n        'initialCells must be a Set, an array of coordinates or an array of strings',\n      )\n    }\n    this.type = type\n    this.shapes = shapes == null ? ['cube'] : shapes\n    this.prefixId = prefixId\n  }\n\n  hasCell(x: number, y: number, z: number, shape: string): boolean {\n    return this.cells.has(VisualPattern3D.coordToKey([x, y, z, shape]))\n  }\n\n  iterate3d(this: VisualPattern3D, n: number): Set<string> {\n    return this.cells // cette méthode doit être modifiée pour créer un motif changeant.\n  }\n\n  static coordToKey(coord: Coord3d): string {\n    return `${coord[0]};${coord[1]};${coord[2]};${String(coord[3])}`\n  }\n\n  static keyToCoord(key: string): Coord3d {\n    const [x, y, z, shape] = key.split(';')\n    return [Number(x), Number(y), Number(z), shape] as Coord3d\n  }\n\n  update3DCells(n: number) {\n    const cells = this.iterate3d(n)\n    return Array.from(filterCells(cells)).map(VisualPattern3D.keyToCoord)\n  }\n\n  getShapeOfCell(cell: string): string {\n    // const shape = VisualPattern3D.keyToCoord(cell)[3]\n    // on peut implémenter une logique pour choisir la forme en fonction de la position de la cellule\n    // par exemple, on peut alterner entre les formes ou choisir une forme en fonction de la position\n    // ici, on retourne simplement la première forme de la liste\n    // Pour les motifs à plusieurs formes, on peut implémenter une logique plus complexe en remplaçant cette méthode.\n    return this.shapes[0] ?? 'cube'\n  }\n\n  private getCenterOfGravity(): [number, number, number] {\n    if (this.cells.size === 0) return [0, 0, 0]\n    let sumX = 0\n    let sumY = 0\n    let sumZ = 0\n    let count = 0\n    for (const cell of this.cells) {\n      const [x, z, y] = VisualPattern3D.keyToCoord(cell)\n      sumX += x\n      sumY += y\n      sumZ += z\n      count++\n    }\n    return [sumX / count, sumY / count, -sumZ / count]\n  }\n\n  render3d(n: number): string {\n    const cells = this.iterate3d(n)\n    if (cells.size === 0) return ''\n\n    const objects: Elements3DDescription[] = []\n    for (const cell of cells) {\n      const [x, y, z /*, shape */] = VisualPattern3D.keyToCoord(cell)\n      objects.push({\n        type: 'cube',\n        pos: [x, z, -y], // adapte selon ta convention\n        size: 1,\n        color: '#ffffff',\n        edges: true,\n      })\n    }\n    objects.push(\n      { type: 'ambientLight', color: 0xffffff, intensity: 1.2 },\n      {\n        type: 'directionalLight',\n        pos: [5, 10, 5],\n        color: 0xffffff,\n        intensity: 2,\n      },\n      {\n        type: 'directionalLight',\n        pos: [-5, -10, -5],\n        color: 0xffffff,\n        intensity: 1.6,\n      },\n    )\n\n    // Optionnel : calcul du centre pour centrer la scène\n\n    const content = {\n      objects,\n      backgroundColor: '#ffffff',\n      autoCenterZoomMargin: 1.2,\n    }\n\n    // Utilise la fonction utilitaire pour générer le HTML\n    return ajouteCanvas3d({\n      id: `${this.prefixId}-motif-${n}`,\n      content,\n      width: 250,\n      height: 250,\n    })\n  }\n\n  render(\n    n: number,\n    dx: number,\n    dy: number,\n    angle: number,\n  ): NestedObjetMathalea2dArray {\n    let cells: Set<string> = this.cells\n    const newPattern = new VisualPattern3D({\n      initialCells: cells,\n      prefixId: this.prefixId ?? '',\n      shapes: ['cube'],\n      type: 'iso',\n    })\n    newPattern.iterate3d = this.iterate3d.bind(newPattern)\n    cells = newPattern.iterate3d(n)\n    const objets: NestedObjetMathalea2dArray = []\n\n    if (cells.size === 0) {\n      return objets\n    }\n    if (cells.size > 1000) {\n      console.warn(\n        \"VisualPattern3d: le motif contient plus de 1000 cellules, l'affichage peut être long\",\n      )\n    }\n    if (cells.size > 10000) {\n      console.warn(\n        \"VisualPattern3d: le motif contient plus de 10000 cellules, l'affichage peut être très long\",\n      )\n    }\n    if (cells.size > 100000) {\n      console.warn(\n        \"VisualPattern3d: le motif contient plus de 100000 cellules, l'affichage peut être très très long\",\n      )\n    }\n    const filteredCells = filterCells(cells)\n    const sortedCubes = Array.from(filteredCells).map(\n      VisualPattern3D.keyToCoord,\n    )\n    const sortedCells = rangeCubes(sortedCubes).map(VisualPattern3D.coordToKey)\n\n    for (const cell of sortedCells) {\n      const [x, y, z, shape] = VisualPattern3D.keyToCoord(cell)\n      if (this.shape == null) {\n        this.shape = shapeCubeIso(shape, 0, 0, {\n          fillStyle: '#ffffff',\n          strokeStyle: '#000000',\n          lineWidth: 1,\n          opacite: 1,\n          scale: 1,\n        })\n      }\n      const newShape = this.shape.clone(x, y, z, angle ?? Math.PI / 6)\n      newShape.updateBordures()\n      objets.push(newShape)\n    }\n    return objets\n  }\n\n  print(): string {\n    return Array.from(this.cells)\n      .map(VisualPattern3D.keyToCoord)\n      .map((coord) =>\n        [\n          coord.join(';'),\n          this.getShapeOfCell(VisualPattern3D.coordToKey(coord)),\n        ].join(':'),\n      )\n      .join('\\n')\n  }\n}\n","import FractionEtendue from '../../../modules/FractionEtendue'\nimport { Ratio } from '../../mathFonctions/Ratio'\nimport { listeShapes2DInfos } from '../figures2d/shapes2d'\nimport { VisualPattern } from './VisualPattern'\nimport { VisualPattern3D } from './VisualPattern3D'\ntype Shape = keyof typeof listeShapes2DInfos\ntype ShapeInfo = (typeof listeShapes2DInfos)[Shape]\nexport type PatternRiche = {\n  visualImg?: string\n  visualId?: number\n  numero: number\n  shapes: Shape[]\n  fonctionNb: (x: number) => number\n  fonctionFraction?: (x: number) => FractionEtendue\n  fonctionRatio?: (x: number) => Ratio\n  texRatio?: string\n  formule: string\n  type: 'linéaire' | 'affine' | 'degré2' | 'degré3' | 'autre' | 'fractal'\n  pattern?: VisualPattern\n  iterate: (this: VisualPattern, n?: number) => Set<string>\n}\nexport type PatternRiche3D = {\n  visualImg?: string\n  visualId?: number\n  numero: number\n  shapes: string[]\n  fonctionNb: (x: number) => number\n  fonctionFraction?: (x: number) => FractionEtendue\n  fonctionRatio?: (x: number) => Ratio\n  formule: string\n  type: 'linéaire' | 'affine' | 'degré2' | 'degré3' | 'autre' | 'fractal'\n  pattern?: VisualPattern3D\n  iterate3d: (this: VisualPattern3D, angle: number) => Set<string>\n}\nexport type PatternRicheRepetition = {\n  visualImg?: string\n  visualId?: number\n  nbMotifMin: number\n  shapes: Shape[]\n  numero?: number\n  formule?: string\n  fonctionShape: (x: number) => ShapeInfo\n  pattern?: VisualPattern\n  iterate: (this: VisualPattern, n?: number) => Set<string>\n}\n\n/**\n * Trie les coordonnées de cubes dans l'espace pour que les cubes du dessus ou de droite\n * recouvrent ceux du dessous ou de gauche.\n * On trie d'abord par z croissant (du bas vers le haut), puis par y croissant (de gauche à droite),\n * puis par x croissant (de l'arrière vers l'avant).\n */\nexport const rangeCubes = function (\n  coords: [number, number, number, string][],\n): [number, number, number, string][] {\n  // Regrouper par z croissant\n  const byZ = new Map<number, [number, number, number, string][]>()\n  for (const coord of coords) {\n    const z = coord[2]\n    if (!byZ.has(z)) byZ.set(z, [])\n    const [x, y, zCoord, w] = coord\n    byZ\n      .get(z)!\n      .push([\n        x,\n        y,\n        zCoord,\n        w !== undefined ? w : 'cube-trois-couleurs-tube-edges',\n      ]) // On ne garde que les 3 premières coordonnées, w est forcé à number\n  }\n  const result: [number, number, number, string][] = []\n  const zs = Array.from(byZ.keys()).sort((a, b) => a - b)\n  for (const z of zs) {\n    const groupZ = byZ.get(z)!\n    // Regrouper par y décroissant dans chaque z\n    const byY = new Map<number, [number, number, number, string][]>()\n    for (const coord of groupZ) {\n      const y = coord[1]\n      if (!byY.has(y)) {\n        byY.set(y, [])\n      }\n      const w =\n        coord[3] !== undefined ? coord[3] : 'cube-trois-couleurs-tube-edges' // On force w à number\n      byY.get(y)!.push([coord[0], y, z, w]) // On garde les 3 premières coordonnées, w est forcé à number\n    }\n    const ys = Array.from(byY.keys()).sort((a, b) => b - a)\n    for (const y of ys) {\n      const groupY = byY.get(y)!\n      // Trier par x croissant dans chaque (z, y)\n      groupY.sort((a, b) => a[0] - b[0])\n      result.push(...groupY)\n    }\n  }\n  return result\n}\n\n// Il faudra peut-être trouver un moyen de classer les patterns.\n\nconst pattern1: PatternRiche = {\n  numero: 1,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/5da32a25-8bdd-4072-bd76-5e94635ba57d/vp11_2.png?format=2500w',\n  visualId: 11,\n  shapes: ['soleil'],\n  fonctionNb: (x: number) => 2 * x + 1,\n  formule: '2\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n?: number): Set<string> {\n    const newCells = new Set<string>()\n    if (n === undefined) n = 1\n    for (let i = 1; i <= n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([0, i, this.shapes[0]]))\n    }\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n\n    return newCells\n  },\n}\n\nconst pattern2: PatternRiche = {\n  numero: 2,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/54e5912a-d7ae-4d39-82ba-c0a3822ba19c/2020-09-26-09-37-38_orig+%281%29.jpg?format=2500w',\n  visualId: 1,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x * x,\n  formule: 'n^2',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    const newCells = new Set<string>()\n    if (n === undefined) n = 1\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern3: PatternRiche = {\n  numero: 3,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/bae949b2-d658-41ad-a0ab-ff08226865f3/vp10_2_orig.png?format=2500w',\n  visualId: 10,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 2 * x - 1,\n  formule: '2\\\\times n -1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    const newCells = new Set<string>()\n    if (n === undefined) n = 1\n    newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[0]]))\n    for (let i = 1; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i - 1, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i, 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern4: PatternRiche = {\n  numero: 4,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/65bbb191-819f-42aa-b269-3c393e88a68b/8497466_orig+%281%29.png?format=2500w',\n  visualId: 32,\n\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x * x + x,\n  formule: 'n^2 + n',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j <= n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern5: PatternRiche = {\n  numero: 5,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/79dbcbbf-d2b5-4578-857e-fcdccb4fb8af/2023-03-22-10-30-31.png?format=2500w',\n  visualId: 3,\n  shapes: ['carré'],\n  fonctionNb: (n: number) => (n * (n + 1)) / 2,\n  formule: '\\\\dfrac{n\\\\times (n+1)}{2}',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = n - 1; j >= 0; j--) {\n        if (i + j < n) {\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern6: PatternRiche = {\n  numero: 6,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/272cb8f2-585b-4b90-aca5-a115fe8b555d/vp5_3.png?format=2500w',\n  visualId: 4,\n  shapes: ['carré'],\n  fonctionNb: (n: number) => 4 * n + 1,\n  formule: '4\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let x = 0; x <= 2 * n; x++) {\n      for (let y = 0; y <= 2 * n; y++) {\n        if (x === y || x + y === 2 * n) {\n          newCells.add(VisualPattern.coordToKey([x, y, this.shapes[0]]))\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern7: PatternRiche = {\n  numero: 7,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/a3f4ea08-cdcb-46c2-bcc8-bd6aa2722f96/720875_orig.png?format=2500w',\n  visualId: 15,\n  shapes: ['carré'],\n  fonctionNb: (n: number) => 4 * n + 1,\n  formule: '4\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      if (i === 0) {\n        newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[0]]))\n      }\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1, 2, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1, 1, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1 + 1, 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern8: PatternRiche = {\n  numero: 8,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/bda4693c-4923-4c87-a3a1-06ef7762c45f/4203089_orig.png?format=2500w',\n  visualId: 16,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x * x,\n  formule: 'n^2',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    const newCells = new Set<string>()\n    if (n === undefined) n = 1\n    for (let i = 0; i < n; i++) {\n      // de ligne 0 à n\n      let x = i\n      for (let j = i; j < 2 * n - i - 1; j++) {\n        // la ligne commence à i et finit à\n        newCells.add(VisualPattern.coordToKey([x++, i, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern9: PatternRiche = {\n  numero: 9,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/09099fb7-f01e-49d4-a328-25507dde66e5/4982399.png?format=2500w',\n  visualId: 101,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x ** 2 + 4,\n  formule: 'n^2 + 4',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([1 + n, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([0, 1 + n, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([1 + n, 1 + n, this.shapes[0]]))\n    for (let i = 1; i <= n; i++) {\n      for (let j = 1; j <= n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern10: PatternRiche = {\n  numero: 10,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/9f3f398b-13e6-45a1-8929-446af89cb1d6/2020-09-08-09-47-44_orig.png?format=2500w',\n  visualId: 391,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x * x + 2 * x,\n  formule: '(n+1)^2-1',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      for (let j = 0; j <= n; j++) {\n        if (!(i === n && j === n)) {\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern11: PatternRiche = {\n  numero: 11,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/9ef9630a-170f-41ec-9b43-a698a57cfa0e/vp22_orig.png?format=2500w',\n  visualId: 296,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 4 * x + 4,\n  formule: '4\\\\times n + 4',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n + 1; i++) {\n      for (let j = 0; j <= n + 1; j++) {\n        if (i === 0 || i === n + 1 || j === 0 || j === n + 1) {\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n        }\n      }\n    }\n    return newCells\n  },\n}\n\n// J'ai decidé de décaler le rang du pattern sur l'image le rang 1 correspond à mon rang 2.\nconst pattern12: PatternRiche = {\n  numero: 12,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/d2fc2e2a-14e2-4446-85c0-3ba743bb5adf/8815256_orig.png?format=2500w',\n  visualId: 108,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x * x + 1,\n  formule: 'n^2 + 1',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n, n, this.shapes[0]]))\n    for (let i = 1; i < n; i++) {\n      for (let j = 0; j <= n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\n// J'ai decidé de décaler le rang du pattern sur l'image le rang 1 correspond à mon rang 2.\nconst pattern13: PatternRiche = {\n  numero: 13,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/7fc51d33-c4af-4d94-9786-b7d75aab62a8/2163990_orig.png?format=2500w',\n  visualId: 114,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 3 * x,\n  formule: '3\\\\times n',\n  type: 'linéaire',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      if (i === 0) {\n        newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n      } else {\n        newCells.add(VisualPattern.coordToKey([i, 0, this.shapes[0]]))\n        newCells.add(VisualPattern.coordToKey([0, i, this.shapes[0]]))\n        if (i > 1)\n          newCells.add(VisualPattern.coordToKey([i - 1, i - 1, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern14: PatternRiche = {\n  numero: 14,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/1098eb03-4083-40d7-9d63-c4cbc87f1093/682934_orig.png?format=2500w',\n  visualId: 115,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 7 * x,\n  formule: '7\\\\times n',\n  type: 'linéaire',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let j = 0; j <= 3; j++) {\n      for (let i = 0; i <= 2 * n; i++) {\n        if (j < 2) {\n          if (i > 0 && i < 2 * n) {\n            newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n          }\n        }\n        if (j === 2) {\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n        }\n        if (j === 3) {\n          if (i % 2 === 0) {\n            newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n          }\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern15: PatternRiche = {\n  numero: 15,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/c3792615-d769-4c6b-a0f5-5c4397fe5d1b/7970874_orig.png?format=2500w',\n  visualId: 116,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 8 * x - 1,\n  formule: '8\\\\times n - 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let j = 0; j <= 4; j++) {\n      for (let i = 0; i <= 2 * n; i++) {\n        if (j < 2) {\n          if (i > 0 && i < 2 * n) {\n            newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n          }\n        }\n        if (j === 2) {\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n        }\n        if (j === 3) {\n          if (i % 2 === 0) {\n            newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n          }\n        }\n        if (j === 4) {\n          if (i % 2 === 0 && i > 1 && i < 2 * n) {\n            newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n          }\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern16: PatternRiche = {\n  numero: 16,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/b9f7df36-66e8-452a-8619-06c1161736a3/2023-07-03_05-43-43.png?format=2500w',\n  visualId: 128,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 4 * x - 3,\n  formule: '4\\\\times n - 3',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    if (n === 1) {\n      newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    } else {\n      for (let i = 1; i < n; i++) {\n        newCells.add(VisualPattern.coordToKey([i, 1, this.shapes[0]]))\n        newCells.add(VisualPattern.coordToKey([i + 1, 1, this.shapes[0]]))\n        newCells.add(\n          VisualPattern.coordToKey([0.5 + (i - 1) * 3, 0, this.shapes[0]]),\n        )\n        newCells.add(\n          VisualPattern.coordToKey([1.5 + (i - 1) * 3, 0, this.shapes[0]]),\n        )\n        newCells.add(\n          VisualPattern.coordToKey([2.5 + (i - 1) * 3, 0, this.shapes[0]]),\n        )\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern17: PatternRiche = {\n  numero: 17,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/a9b947a5-1a65-49cd-ab8d-ff824ffbf718/2023-07-03_04-23-55.png?format=2500w',\n  visualId: 85,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 2 * (x * x + x),\n  formule: '2\\\\times (n^2 +  n)',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      for (let j = 0; j <= n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([n + i, n + j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern18: PatternRiche = {\n  numero: 18,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/fbb334a6-f77e-402d-b438-c78f294ff6b3/2023-07-17_06-56-59.png?format=2500w',\n  visualId: 93,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 2 + 2 * x * (1 + x),\n  formule: '2\\\\times (n^2+2\\\\times n + 1)',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[0]]))\n    for (let j = 0; j < 2 * n + 2; j++) {\n      for (let i = 1; i <= n; i++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    newCells.add(VisualPattern.coordToKey([n + 1, 1, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern19: PatternRiche = {\n  numero: 19,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/9e7e0715-850c-4ce4-9b3c-7b9d5b93bd75/2023-07-06_00-51-38.png?format=2500w',\n  visualId: 91,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x ** 2 + 4 * x + 2,\n  formule: 'n^2+4\\\\times n + 2',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < 2 * n + 1; i++) {\n      newCells.add(VisualPattern.coordToKey([i, 0, this.shapes[0]]))\n    }\n    for (let i = n; i < 2 * n + 1; i++) {\n      for (let j = 1; j < n + 1; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    for (let i = n; i < 3 * n + 2; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern20: PatternRiche = {\n  numero: 20,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/b78ea1f9-f4ff-4121-964a-cb0ff2be2afc/2023-07-06_01-18-35.png?format=2500w',\n  visualId: 94,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => (x * (x + 1)) / 2 + 2,\n  formule: '\\\\dfrac{n\\\\times (n+1)}{2}+2',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 1, 0, this.shapes[0]]))\n    for (let i = 1; i <= n; i++) {\n      for (let j = n - i; j >= 0; j--) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\n// J'ai transposé horizontalement pour prendre moins de place\nconst pattern21: PatternRiche = {\n  numero: 21,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/62fb6a8b-01d1-4d0c-8cac-7eeb30fbba41/4528553_orig.png?format=2500w',\n  visualId: 165,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 2 * x + 3,\n  formule: '2\\\\times n + 3',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= 2 * n; i++) {\n      if (i === n) {\n        newCells.add(VisualPattern.coordToKey([i, 0, this.shapes[0]]))\n        newCells.add(VisualPattern.coordToKey([i, 2, this.shapes[0]]))\n      }\n      newCells.add(VisualPattern.coordToKey([i, 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern22: PatternRiche3D = {\n  numero: 22,\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  fonctionNb: (x: number) => ((x + 1) * (x + 2)) / 2,\n  formule: '\\\\dfrac{(n+1)\\\\times (n+2)}{2}',\n  type: 'degré2',\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n\n    for (let i = -Math.round(n / 2); i < n + Math.round(n / 2); i++) {\n      for (let j = 0; j <= n - i - Math.round(n / 2); j++) {\n        cubes.push([i, 0, j, 'cube-trois-couleurs-tube-edges'])\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern23: PatternRiche3D = {\n  numero: 23,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/34b73461-9c26-4e8c-a979-82a32a319f1e/1188365_orig.png?format=2500w',\n  visualId: 155,\n  fonctionNb: (x: number) => 6 * x - 5,\n  formule: '6\\\\times n-5',\n  type: 'affine',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    for (let i = -n + 0.5; i <= n - 1.5; i += 1) {\n      cubes.push([i, -0.5, n - 1, 'cube-trois-couleurs-tube-edges'])\n    }\n\n    for (let i = -n + 0.5; i <= n - 1.5; i += 1) {\n      cubes.push([-0.5, i, n - 1, 'cube-trois-couleurs-tube-edges'])\n    }\n\n    for (let i = 0; i <= 2 * n - 2; i++) {\n      cubes.push([-0.5, -0.5, i, 'cube-trois-couleurs-tube-edges'])\n    }\n\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern24: PatternRiche3D = {\n  numero: 24,\n  fonctionNb: (x: number) => (2 * x ** 3 + 3 * x ** 2 + x) / 6,\n  formule: '\\\\dfrac{2\\\\times n^3 + 3\\\\times n^2 + n}{6}',\n  type: 'degré3',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    for (let z = 0; z < n; z++) {\n      for (let y = 0; y < n - z; y++) {\n        for (let x = 0; x < n - z; x++) {\n          cubes.push([x - 1, n - y - 2, z, 'cube-trois-couleurs-tube-edges'])\n        }\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern25: PatternRiche3D = {\n  numero: 25,\n  fonctionNb: (x: number) => x ** 3,\n  formule: 'n^3',\n  type: 'degré3',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    const demiPas = n / 2\n    for (let z = 0; z < n; z++) {\n      for (let y = 0 - demiPas; y < n - demiPas; y++) {\n        for (let x = 0 - demiPas; x < n - demiPas; x++) {\n          cubes.push([x, y, z, 'cube-trois-couleurs-tube-edges'])\n        }\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern26: PatternRiche3D = {\n  numero: 26,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/4150fdf6-f9ee-47f8-bc47-d96b8455c073/4158599_orig.png?format=2500w',\n  visualId: 28,\n  fonctionNb: (x: number) => x ** 3 - (x - 1) ** 3,\n  formule: '3\\\\times n^2 - 3\\\\times n + 1',\n  type: 'degré2',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const demiPas = n / 2\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    for (let z = 0; z < n; z++) {\n      if (z === 0) {\n        for (let y = 0; y < n; y++) {\n          for (let x = 0; x < n; x++) {\n            cubes.push([\n              x - demiPas,\n              y - demiPas,\n              z,\n              'cube-trois-couleurs-tube-edges',\n            ])\n          }\n        }\n      } else {\n        for (let y = 0; y < n; y++) {\n          cubes.push([\n            0 - demiPas,\n            y - demiPas,\n            z,\n            'cube-trois-couleurs-tube-edges',\n          ]) // Ajouter la première colonne de chaque ligne\n        }\n        for (let x = 0; x < n; x++) {\n          cubes.push([\n            x - demiPas,\n            n - 1 - demiPas,\n            z,\n            'cube-trois-couleurs-tube-edges',\n          ])\n        }\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern27: PatternRiche3D = {\n  numero: 27,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/17ccbdb3-2047-47f4-94cb-1ed0723982cd/8681279_orig.png?format=2500w',\n  visualId: 46,\n  fonctionNb: (x: number) => 5 * x - 4,\n  formule: '5\\\\times n - 4',\n  type: 'affine',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    for (let z = 0; z < n; z++) {\n      if (z === 0) {\n        for (let y = -n + 1; y <= n - 1; y++) {\n          cubes.push([0, y, 0, 'cube-trois-couleurs-tube-edges'])\n        }\n        for (let x = -n + 1; x <= n - 1; x++) {\n          cubes.push([x, 0, 0, 'cube-trois-couleurs-tube-edges'])\n        }\n      } else {\n        cubes.push([0, 0, z, 'cube-trois-couleurs-tube-edges'])\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern28: PatternRiche3D = {\n  numero: 28,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/af167f89-9c72-4ba5-b406-697f59d73412/9861425_orig.png?format=2500w',\n  visualId: 52,\n\n  fonctionNb: (x: number) => 2 * x ** 2 - x,\n  formule: 'n\\\\times (2\\\\times n - 1)',\n  type: 'degré2',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    for (let z = 0; z < n; z++) {\n      if (z < n - 1) {\n        for (let y = n - z - 1; y >= z - n + 1; y--) {\n          cubes.push([-0.5, y - 0.5, z, 'cube-trois-couleurs-tube-edges'])\n        }\n        for (let x = z - n + 1; x <= n - z - 1; x++) {\n          cubes.push([x - 0.5, -0.5, z, 'cube-trois-couleurs-tube-edges'])\n        }\n      } else {\n        cubes.push([-0.5, -0.5, z, 'cube-trois-couleurs-tube-edges'])\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern29: PatternRiche = {\n  numero: 29,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/5c72d74d-af6b-437e-a1a2-69495c67202d/2018-10-14-13-34-36_orig.png?format=2500w',\n  visualId: 263,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 2 * x + 1,\n  formule: '2\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      newCells.add(VisualPattern.coordToKey([n - i, i, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([n - i, 2 * n - i, this.shapes[0]]))\n    }\n    newCells.add(VisualPattern.coordToKey([0, n, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern30: PatternRiche = {\n  numero: 30,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/c3833797-d82a-4c4b-bff7-d22d877c000b/2018-11-18-11-34-08_orig.png?format=2500w',\n  visualId: 266,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 3 * x + 2,\n  formule: '3\\\\times n + 2',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([4, 0, this.shapes[0]]))\n    for (let i = 1; i < 4; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern31: PatternRiche = {\n  numero: 31,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/3b345e8a-ccab-4fb2-bec6-f21b650d79bc/2023-07-05_15-04-34.png?format=2500w',\n  visualId: 256,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 3 * x + 1,\n  formule: '3\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 1; i < n + 2; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n - 1, this.shapes[0]]))\n      if (i < n + 1) {\n        newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n      }\n    }\n    for (let j = 0; j > -n; j--) {\n      newCells.add(VisualPattern.coordToKey([0, j + n - 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern32: PatternRiche = {\n  numero: 32,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/382218dd-df17-4747-8215-cbe3f950f453/p4_orig.png?format=2500w',\n  visualId: 257,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x ** 2 + 4 * x - 2,\n  formule: 'n^2 + 4\\\\times n - 2',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let x = 0; x < 3; x++) {\n      for (let y = 0; y < 3; y++) {\n        if (x === y) {\n          for (let k = 0; k < n; k++) {\n            for (let l = 0; l < n; l++) {\n              newCells.add(\n                VisualPattern.coordToKey([x + l, y + k, this.shapes[0]]),\n              )\n            }\n          }\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern33: PatternRiche = {\n  numero: 33,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/d9c26deb-510e-43fc-85c5-4573f5d60735/vp54_2_orig.png?format=2500w',\n  visualId: 54,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => x + 1,\n  formule: '1\\\\times n+1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let x = 0; x <= n; x++) {\n      newCells.add(VisualPattern.coordToKey([x, 0, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern34: PatternRiche = {\n  numero: 34,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/1fc58a54-b378-407b-9bea-b9a136fca28f/4700362_orig.png?format=2500w',\n  visualId: 72,\n  shapes: ['carré'],\n  fonctionNb: (x: number) => 8 * x ** 2 + 4 * x + 1,\n  formule: '8\\\\times n^2 + 4\\\\times n + 1',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let x = 0; x < n; x++) {\n      for (let y = 0; y < n; y++) {\n        newCells.add(VisualPattern.coordToKey([x, y, this.shapes[0]]))\n        newCells.add(\n          VisualPattern.coordToKey([x + 3 * n + 1, y, this.shapes[0]]),\n        )\n        newCells.add(\n          VisualPattern.coordToKey([\n            x + 3 * n + 1,\n            y + 3 * n + 1,\n            this.shapes[0],\n          ]),\n        )\n        newCells.add(\n          VisualPattern.coordToKey([x, y + 3 * n + 1, this.shapes[0]]),\n        )\n        const m = 3 * n + 1\n        for (let i = n; i < m; i++) {\n          for (let j = n; j < m; j++) {\n            newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n          }\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern35: PatternRiche = {\n  numero: 35,\n  shapes: ['losange'],\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/fe162543-f853-4705-9964-6ceceb0959a3/9292613_orig.png?format=2500w',\n  visualId: 75,\n  fonctionNb: (x: number) => 4 * x,\n  formule: '4\\\\times n',\n  type: 'linéaire',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let y = 0; y <= n; y++) {\n      const end = 2 * n - y\n      if (y < n) {\n        newCells.add(\n          VisualPattern.coordToKey([2 * n - end - 1, y, this.shapes[0]]),\n        )\n        newCells.add(VisualPattern.coordToKey([2 * n - end, y, this.shapes[0]]))\n        newCells.add(VisualPattern.coordToKey([end - 1, y, this.shapes[0]]))\n        newCells.add(VisualPattern.coordToKey([end - 2, y, this.shapes[0]]))\n      } else {\n        newCells.add(VisualPattern.coordToKey([n - 1, y, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern36: PatternRiche3D = {\n  numero: 36,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/7181e027-b3bc-4960-af21-07f38e5ebf03/9571721_orig.png?format=2500w',\n  visualId: 79,\n  fonctionNb: (x: number) => ((x * (x + 1)) / 2) ** 2,\n  formule: '\\\\left(\\\\dfrac{n\\\\times (n+1)}{2}\\\\right)^2',\n  type: 'autre',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const altitude = function (base: number, etage: number) {\n      let h = 0\n      for (let i = 0; i < etage; i++) {\n        h += base--\n      }\n      return h\n    }\n    const cubes: [number, number, number, string][] = []\n    for (let arete = n; arete > 0; arete--) {\n      const etage = n - arete\n      for (let x = 0; x < arete; x++) {\n        for (let y = 0; y < arete; y++) {\n          for (let z = 0; z < arete; z++) {\n            cubes.push([\n              x,\n              n - y,\n              z + altitude(n, etage),\n              'cube-trois-couleurs-tube-edges',\n            ])\n          }\n        }\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern37: PatternRiche = {\n  numero: 37,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/e0ee90d8-a577-4ce3-877f-e4b52fcead83/2023-10-11_11-20-15.png?format=2500w',\n  visualId: 254,\n  fonctionNb: (x: number) => x ** 2 + 2 * x + 4,\n  formule: 'n^2+2\\\\times n+4',\n  type: 'degré2',\n  shapes: ['soleil'],\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([1, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([1, n + 2, this.shapes[0]]))\n    for (let i = 1; i <= n + 1; i++) {\n      for (let j = 1; j <= n + 1; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern38: PatternRiche = {\n  numero: 38,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/24421acb-3211-41ba-8974-7b33abb8bb70/vp8_orig.png?format=2500w',\n  visualId: 281,\n  fonctionNb: (x: number) => x ** 2 + x + 2,\n  formule: 'n^2+n+2',\n  type: 'degré2',\n  shapes: ['carréRond'],\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([n, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n, n + 1, this.shapes[0]]))\n    for (let i = 0; i <= n; i++) {\n      for (let j = 1; j <= n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern39: PatternRiche = {\n  numero: 39,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/f817210e-0b89-42bb-8a37-dc3afa804f3a/vp10_orig.png?format=2500w',\n  visualId: 283,\n  fonctionNb: (x: number) => x * x,\n  formule: 'n^2',\n  type: 'degré2',\n  shapes: ['losange'],\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(\n          VisualPattern.coordToKey([\n            i * 0.5 - j * 0.5,\n            j * 0.5 + i * 0.5,\n            this.shapes[0],\n          ]),\n        )\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern40: PatternRiche3D = {\n  numero: 40,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/c3f1ff49-ca30-47ab-8ee9-acb7e253aa87/vp11_orig.png?format=2500w',\n  visualId: 284,\n  fonctionNb: (x: number) => 2 * x + 2,\n  formule: '2\\\\times n + 2',\n  type: 'affine',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n) {\n    if (n === undefined) n = 1\n    const cubes: [number, number, number, string][] = []\n    for (let z = 0; z <= n; z++) {\n      cubes.push([-1, 0, z, 'cube-trois-couleurs-tube-edges'])\n      if (z > 0 && z < n)\n        cubes.push([1, 0, z, 'cube-trois-couleurs-tube-edges'])\n    }\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    const newCells = new Set<string>()\n\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern41: PatternRiche = {\n  numero: 41,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/58e493c4-91ae-408a-9eec-e5ac101bc5e0/vp24_orig.png?format=2500w',\n  visualId: 298,\n  fonctionNb: (x: number) => ((x + 2) * (x + 1)) / 2 + 1,\n  formule: '\\\\dfrac{(n+1)(n+2)}{2} + 1',\n  type: 'degré2',\n  shapes: ['étoile'],\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    for (let j = 1; j < n + 2; j++) {\n      for (let i = 0; i < j; i++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern42: PatternRiche = {\n  numero: 42,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/048b9214-fee6-400a-a28c-aa420054c3c9/vp30_orig.png?format=2500w',\n  visualId: 300,\n  shapes: ['chat'],\n  fonctionNb: (x: number) => 2 * x * (x + 1) + 1,\n  formule: '2\\\\times n\\\\times (n+1) + 1',\n  type: 'degré3',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = n + 1; i > 0; i--) {\n      for (let j = 0; j < i; j++) {\n        for (let k = 0; k < i; k++) {\n          newCells.add(\n            VisualPattern.coordToKey([\n              n + 1 - i + j * 2,\n              n - i + 1 + k * 2,\n              this.shapes[0],\n            ]),\n          )\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern43: PatternRiche = {\n  numero: 43,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/7a81a3ec-f14f-4d8e-b440-bd24f8f3a58f/vp46_orig.png?format=2500w',\n  visualId: 307,\n  shapes: ['carréRond'],\n  fonctionNb: (x: number) => 3 * x + 1,\n  formule: '3\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let x = 0; x < 2; x++) {\n        for (let y = 0; y < 2; y++) {\n          newCells.add(VisualPattern.coordToKey([i + x, i + y, this.shapes[0]]))\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern44: PatternRiche = {\n  numero: 44,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/a4735ae7-f530-45ae-aef0-4b46fb6cefa1/vp47_orig.png?format=2500w',\n  visualId: 308,\n  shapes: ['soleil'],\n  fonctionNb: (x: number) => 4 * x + 2,\n  formule: '4\\\\times n + 2',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 1; i <= 2 * n; i++) {\n      newCells.add(VisualPattern.coordToKey([0, i, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([1, i, this.shapes[0]]))\n    }\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([2, 2, this.shapes[0]]))\n\n    return newCells\n  },\n}\n\nconst pattern45: PatternRiche = {\n  numero: 45,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/78b879d4-b760-4bd2-8ad3-316bb5607126/vp50_orig.png?format=2500w',\n  visualId: 311,\n  fonctionNb: (x: number) => x ** 2 + x + 3,\n  formule: 'n^2+n+3',\n  type: 'degré2',\n  shapes: ['carréRond'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, n, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 1, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 1, n, this.shapes[0]]))\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n + 1; j++) {\n        newCells.add(VisualPattern.coordToKey([1 + i, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern46: PatternRiche = {\n  numero: 46,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/c894cc7a-f78b-401d-a6fb-0c8eabceb28c/vp55_orig.png?format=2500w',\n  visualId: 316,\n  fonctionNb: (x: number) => x ** 2 + x,\n  formule: 'n^2+n',\n  type: 'degré2',\n  shapes: ['hexagone'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    for (let i = 1; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n    }\n    newCells.add(VisualPattern.coordToKey([n, 0, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern47: PatternRiche = {\n  numero: 47,\n  fonctionNb: (x: number) => 4 * x,\n  formule: '4\\\\times n',\n  type: 'linéaire',\n  shapes: ['balle'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([n, i, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([2 * n - i, n, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([n, 2 * n - i, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern48: PatternRiche = {\n  numero: 48,\n  fonctionNb: (x: number) => 2 * x - 1,\n  formule: '2\\\\times n - 1',\n  type: 'affine',\n  shapes: ['balle'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n - 1; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n    }\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([n + i - 1, n - i, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern49: PatternRiche = {\n  numero: 49,\n  fonctionNb: (x: number) => 2 * x + 2,\n  formule: '2\\\\times n + 2',\n  type: 'affine',\n  shapes: ['hexagone'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i, 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern50: PatternRiche = {\n  numero: 50,\n  fonctionNb: (x: number) => 3 * x + 2,\n  formule: '3\\\\times n + 2',\n  type: 'affine',\n  shapes: ['losange'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n + 2; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n    }\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([1 + (n - 1) / 2, i, this.shapes[0]]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([1 + (n - 1) / 2, 2 * n - i, this.shapes[0]]),\n      )\n    }\n    return newCells\n  },\n}\n\nconst pattern51: PatternRiche = {\n  numero: 51,\n  fonctionNb: (x: number) => 3 + x,\n  formule: '1\\\\times n + 3',\n  type: 'affine',\n  shapes: ['chat'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([1, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[0]]))\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([1, i + 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern52: PatternRiche = {\n  numero: 52,\n  fonctionNb: (x: number) => 4 * x + 4,\n  formule: '4\\\\times n + 4',\n  type: 'affine',\n  shapes: ['étoile'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([0, 2, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 1, 1, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 1, 2, this.shapes[0]]))\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < 4; j++) {\n        newCells.add(VisualPattern.coordToKey([i + 1, j, this.shapes[0]]))\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern53: PatternRiche = {\n  numero: 53,\n  fonctionNb: (x: number) => 2 * x,\n  formule: '2\\\\times n',\n  type: 'linéaire',\n  shapes: ['cerise'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([0, i, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern54: PatternRiche = {\n  numero: 54,\n  fonctionNb: (x: number) => 5 * x,\n  formule: '5\\\\times n',\n  type: 'linéaire',\n  shapes: ['peche'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < 5; j++) {\n        if (i === 0) {\n          newCells.add(VisualPattern.coordToKey([j, 5, this.shapes[0]]))\n        } else {\n          newCells.add(VisualPattern.coordToKey([i - 1, j, this.shapes[0]]))\n        }\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern55: PatternRiche = {\n  numero: 55,\n  fonctionNb: (x: number) => 4 * x,\n  formule: '4\\\\times n',\n  type: 'linéaire',\n  shapes: ['banane'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([1, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([2, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([2, 1, this.shapes[0]]))\n    for (let i = 1; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([3 * i, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([1 + 3 * i, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([2 + 3 * i, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([3 * i, 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern56: PatternRiche = {\n  numero: 56,\n  fonctionNb: (x: number) => 2 * x - 1,\n  formule: '2\\\\times n - 1',\n  type: 'affine',\n  shapes: ['rond'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    for (let i = 1; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([2 * i, 0, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([2 * i - 1, 1, this.shapes[0]]))\n    }\n    return newCells\n  },\n}\n\nconst pattern57: PatternRiche = {\n  numero: 57,\n  fonctionNb: (x: number) => x ** 2 + 1,\n  fonctionFraction: (x: number) => new FractionEtendue(x, x ** 2 + 1),\n  formule: '\\\\dfrac{n}{n^2+1}',\n  type: 'degré2',\n  shapes: ['carré', 'carréBleu'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[1]]))\n      for (let j = 1; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern58: PatternRiche = {\n  numero: 58,\n  fonctionNb: (x: number) => x ** 2 + 2 * x + 1,\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(x ** 2, x ** 2 + 2 * x + 1),\n  fonctionRatio: (x: number) => new Ratio([x ** 2, 2 * x, 1]),\n  formule: 'n^2 : 2n : 1',\n  type: 'degré2',\n  shapes: ['carréBleu', 'carréRond', 'rond'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]])) // carréBleu\n      }\n      newCells.add(VisualPattern.coordToKey([i, n, this.shapes[1]])) // carréRond\n      newCells.add(VisualPattern.coordToKey([n, i, this.shapes[1]])) // carréRond\n    }\n    newCells.add(VisualPattern.coordToKey([n, n, this.shapes[2]])) // rond\n    return newCells\n  },\n}\n\nconst pattern59: PatternRiche = {\n  numero: 59,\n  fonctionNb: (x: number) => 4 * x + 2,\n  fonctionFraction: (x: number) => new FractionEtendue(x, 4 * x + 2),\n  // ratio: new Ratio([2 * x,\n  fonctionRatio: (x: number) => new Ratio([x, x + 1, 2 * x + 1]),\n  texRatio: 'soleils : étoiles : hexagones',\n  formule: 'n : n+1 : 2n+1',\n  type: 'affine',\n  shapes: ['soleil', 'étoile', 'hexagone'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, 0, this.shapes[0]])) // soleil\n    }\n    for (let j = 0; j < n + 1; j++) {\n      newCells.add(VisualPattern.coordToKey([n + j, 0, this.shapes[1]])) // étoile\n    }\n    for (let k = 0; k < 2 * n + 1; k++) {\n      newCells.add(VisualPattern.coordToKey([k, 1, this.shapes[2]])) // hexagone\n    }\n    return newCells\n  },\n}\n\nconst pattern60: PatternRiche = {\n  numero: 60,\n  fonctionNb: (x: number) => 2 * x + 2,\n  fonctionRatio: (x: number) => new Ratio([x, x + 2]),\n  fonctionFraction: (x: number) => new FractionEtendue(x, 2 * x + 2),\n  texRatio: 'tortues : chats',\n  formule: '\\\\dfrac{n}{2n+2}',\n  type: 'affine',\n  shapes: ['tortue', 'chat'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([i * 2, 0, this.shapes[0], { scale: 2 }]),\n      ) // tortue\n      newCells.add(\n        VisualPattern.coordToKey([i * 2, 2, this.shapes[1], { scale: 2 }]),\n      ) // chat\n    }\n    newCells.add(\n      VisualPattern.coordToKey([n * 2, 0, this.shapes[1], { scale: 2 }]),\n    ) // chat\n    newCells.add(\n      VisualPattern.coordToKey([n * 2, 2, this.shapes[1], { scale: 2 }]),\n    ) // chat\n    return newCells\n  },\n}\n\nconst pattern61: PatternRiche = {\n  numero: 61,\n  fonctionNb: (x: number) => x ** 2 + 4 * x + 2,\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(x ** 2 + 2 * x + 1, x ** 2 + 4 * x + 2),\n  fonctionRatio: (x: number) => new Ratio([x ** 2 + 2 * x + 1, 2 * x + 1]),\n  texRatio: 'carrés : hexagones',\n  formule: 'n^2+4n+2',\n  type: 'degré2',\n  shapes: ['carréBleu', 'hexagone'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      for (let j = 0; j <= n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]])) // carréBleu\n      }\n    }\n    for (let i = 1; i < n + 2; i++) {\n      for (let j = 1; j < n + 2; j++) {\n        if (i > n || j > n)\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[1]])) // hexagone\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern62: PatternRiche = {\n  numero: 62,\n  fonctionNb: (x: number) => 3 * x,\n  fonctionRatio: (x: number) => new Ratio([x, 2 * x]),\n  texRatio: 'ronds : croix rouges',\n  fonctionFraction: (x: number) => new FractionEtendue(x, 3 * x),\n  formule: '3\\\\times n',\n  type: 'linéaire',\n  shapes: ['redCross', 'rond'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i * 3, 0, this.shapes[1]])) // rond\n      newCells.add(VisualPattern.coordToKey([i * 3 + 1, 0, this.shapes[0]])) // redCross\n      newCells.add(VisualPattern.coordToKey([i * 3 + 2, 0, this.shapes[1]])) // rond\n    }\n    return newCells\n  },\n}\nconst pattern63: PatternRiche = {\n  numero: 63,\n  fonctionNb: (x: number) => 2 * x + 1,\n  fonctionRatio: (x: number) => new Ratio([x + 1, x]),\n  texRatio: 'hexagones : étoiles',\n  fonctionFraction: (x: number) => new FractionEtendue(x + 1, 2 * x + 1),\n  formule: '2\\\\times n + 1',\n  type: 'affine',\n  shapes: ['hexagone', 'étoile'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[0]])) // hexagone\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([1 + i * 2, 0, this.shapes[1]])) // hexagone\n      newCells.add(VisualPattern.coordToKey([i * 2 + 2, 0, this.shapes[0]])) // étoile\n    }\n    return newCells\n  },\n}\n\nconst pattern64: PatternRiche = {\n  numero: 64,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/a3f4ea08-cdcb-46c2-bcc8-bd6aa2722f96/720875_orig.png?format=2500w',\n  visualId: 15,\n  shapes: ['carréRond', 'rond'],\n  fonctionNb: (n: number) => 4 * n + 1,\n  fonctionRatio: (x: number) => new Ratio([x, 3 * x + 1]),\n  texRatio: 'carrés : ronds',\n  fonctionFraction: (x: number) => new FractionEtendue(x, 4 * x + 1),\n  formule: '4\\\\times n + 1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      if (i === 0) {\n        newCells.add(VisualPattern.coordToKey([0, 1, this.shapes[1]]))\n      }\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1, 2, this.shapes[1]]))\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1, 0, this.shapes[1]]))\n      newCells.add(VisualPattern.coordToKey([i * 2 + 1, 1, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([i * 2 + 2, 1, this.shapes[1]]))\n    }\n    return newCells\n  },\n}\nconst pattern65: PatternRiche = {\n  numero: 65,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/762956a8-dadf-4c59-bcfe-5212a27e0ca9/vp44_2_orig+%281%29.png?format=2500w',\n  visualId: 44,\n  shapes: ['hexagone', 'hexagoneJaune'],\n  type: 'affine',\n  formule: '5\\\\times n + 2',\n  fonctionNb: (x: number) => 5 * x + 2,\n  fonctionRatio: (x: number) => new Ratio([4 * x + 2, x]),\n  texRatio: 'hexagones bleus : hexagones jaunes',\n  fonctionFraction: (x: number) => new FractionEtendue(4 * x + 2, 5 * x + 2),\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0.433, 'hexagone']))\n    newCells.add(VisualPattern.coordToKey([0, 1.299, 'hexagone']))\n    for (let i = 0; i < n; i++) {\n      newCells.add(VisualPattern.coordToKey([i * 1.5 + 0.75, 0, 'hexagone']))\n      newCells.add(VisualPattern.coordToKey([i * 1.5 + 1.5, 0.433, 'hexagone']))\n      newCells.add(VisualPattern.coordToKey([i * 1.5 + 1.5, 1.299, 'hexagone']))\n      newCells.add(\n        VisualPattern.coordToKey([i * 1.5 + 0.75, 1.732, 'hexagone']),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([i * 1.5 + 0.75, 0.866, 'hexagoneJaune']),\n      )\n    }\n    return newCells\n  },\n}\n\nconst pattern66: PatternRiche = {\n  numero: 66,\n  fonctionNb: (x: number) => 1 + 3 * (x + 1) * x,\n  formule: '1+3\\\\times n(n+1)',\n  fonctionRatio: (x: number) => new Ratio([1 + 3 * (x - 1) * x, 6 * x]),\n  texRatio: 'hexagones bleux : hexagones jaunes',\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(1 + 3 * (x - 1) * x, 1 + 3 * (x + 1) * x),\n  type: 'degré2',\n  shapes: ['hexagone', 'hexagoneJaune'],\n  iterate: function (this: VisualPattern, n: number = 1): Set<string> {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < 2 * n + 1; i++) {\n      const nbCells = 2 * n + 1 - Math.abs(i - n)\n      for (let j = 0; j < nbCells; j++) {\n        const hexa =\n          i === 0 || i === 2 * n\n            ? n % 2 === 0\n              ? 'hexagoneJaune'\n              : 'hexagone'\n            : j === 0 || j === nbCells - 1\n              ? n % 2 !== 0\n                ? 'hexagone'\n                : 'hexagoneJaune'\n              : (n + 1) % 2 !== 0\n                ? 'hexagone'\n                : 'hexagoneJaune'\n        if (i < n + 1)\n          newCells.add(\n            VisualPattern.coordToKey([j * 0.75, (n + 2 * i - j) * 0.433, hexa]),\n          )\n        else if (i === n + 1)\n          newCells.add(\n            VisualPattern.coordToKey([\n              (j + i - n) * 0.75,\n              (n + 2 * i - 1 - j) * 0.433,\n              hexa,\n            ]),\n          )\n        else\n          newCells.add(\n            VisualPattern.coordToKey([\n              (j + i - n) * 0.75,\n              (2 * n + i - j) * 0.433,\n              hexa,\n            ]),\n          )\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern67: PatternRiche = {\n  numero: 67,\n  fonctionNb: (x: number) => (x * (x + 1)) / 2,\n  fonctionRatio: (x: number) =>\n    new Ratio([\n      Math.floor(x / 2) ** 2,\n      Math.floor(x / 2) * (Math.floor(x / 2) + 1),\n    ]),\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(\n      Math.floor(x / 2) ** 2,\n      Math.floor(x / 2) * (Math.floor(x / 2) + 1) + Math.floor(x / 2) ** 2,\n    ),\n  formule: '\\\\dfrac{n\\\\times(n+1)}{2}',\n  type: 'degré2',\n  shapes: ['cloche', 'fleur'],\n  texRatio: 'cloches : fleurs',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n - i; j++) {\n        newCells.add(\n          VisualPattern.coordToKey([\n            j + 0.5 * i,\n            i,\n            this.shapes[(i + n + 1) % 2],\n          ]),\n        )\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern68: PatternRiche = {\n  numero: 68,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/90c1a0e4-f515-4f30-9c1c-6f3f9707669b/vp59_2_orig.png?format=2500w',\n  visualId: 59,\n  fonctionNb: (x: number) => (x + 2) ** 2,\n  fonctionRatio: (x: number) => new Ratio([x ** 2, 4 * x + 4]),\n  fonctionFraction: (x: number) => new FractionEtendue(x ** 2, (x + 2) ** 2),\n  formule: '(n+2)^2',\n  type: 'degré2',\n  shapes: ['carré', 'carréBleu'],\n  texRatio: 'carrés gris : carrés bleus',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n + 2; i++) {\n      for (let j = 0; j < n + 2; j++) {\n        if (i === 0 || i === n + 1 || j === 0 || j === n + 1)\n          newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]])) // carré\n        else newCells.add(VisualPattern.coordToKey([i, j, this.shapes[1]])) // carréBleu\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern69: PatternRiche = {\n  numero: 69,\n  fonctionNb: (x: number) => x ** 2,\n  fonctionRatio: (x: number) => new Ratio([2 * x - 1, (x - 1) ** 2]),\n  fonctionFraction: (x: number) => new FractionEtendue(2 * x - 1, x ** 2),\n  formule: 'n^2',\n  type: 'degré2',\n  shapes: ['carréBleu', 'carré'],\n  texRatio: 'carrés bleus : carrés',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j < n; j++) {\n        if (i === 0 || j === 0)\n          newCells.add(VisualPattern.coordToKey([i, n - j - 1, this.shapes[0]])) // carré\n        else newCells.add(VisualPattern.coordToKey([i, j - 1, this.shapes[1]])) // carréBleu\n      }\n    }\n    return newCells\n  },\n}\nconst pattern70: PatternRiche3D = {\n  numero: 70,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/ee8ed904-6443-4fb5-ad24-897fcc391710/2023-03-22-10-14-45_orig+%281%29.png?format=2500w',\n  visualId: 39,\n  fonctionNb: (x: number) => (x ** 2 * (x + 1)) / 2,\n  formule: '\\\\dfrac{n^2(n+1)}{2}',\n  type: 'degré3',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n?: number) {\n    if (n === undefined) n = 1\n    const cubes: [number, number, number, string][] = []\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let k = n - 1; k >= 0; k--) {\n        for (let j = 0; j < n - i; j++) {\n          cubes.push([\n            i - n / 2,\n            k - n / 2,\n            j,\n            'cube-trois-couleurs-tube-edges',\n          ])\n        }\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern71: PatternRiche3D = {\n  numero: 71,\n  fonctionNb: (x: number) => (x * (x + 1) * (x + 2)) / 2,\n  formule: '\\\\dfrac{n(n+1)(n+2)}{2}',\n  type: 'degré3',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n?: number) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n + 1; i++) {\n      for (let k = n - 1; k >= 0; k--) {\n        for (let j = 0; j < n + 1 - i; j++) {\n          cubes.push([\n            i - n / 2,\n            k - n / 2,\n            j,\n            'cube-trois-couleurs-tube-edges',\n          ])\n        }\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern72: PatternRiche = {\n  numero: 72,\n  fonctionNb: (x: number) => x ** 2,\n  fonctionRatio: (x: number) =>\n    new Ratio([((x + 1) * x) / 2, (x * (x - 1)) / 2]),\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(((x + 1) * x) / 2, x ** 2),\n  formule: 'n^2',\n  type: 'degré2',\n  shapes: ['triangle'],\n  texRatio: 'triangles blancs : triangles verts ',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j <= i; j++) {\n        newCells.add(\n          VisualPattern.coordToKey([\n            i * 0.866 - j * 0.433,\n            j * 0.75,\n            this.shapes[0],\n          ]),\n        ) // triangle\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern73: PatternRiche = {\n  numero: 73,\n  fonctionNb: (x: number) => 3 * x + 5,\n  fonctionRatio: (x: number) => new Ratio([3 * x + 3, 1, 1]),\n  fonctionFraction: (x: number) => new FractionEtendue(3 * x + 3, 3 * x + 5),\n  formule: '3\\\\times n + 5',\n  type: 'affine',\n  shapes: ['rond', 'carré', 'étoile'],\n  texRatio: 'ronds : carrés : étoiles',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0.5 * (1 + n), 0, this.shapes[1]])) // carré\n    newCells.add(\n      VisualPattern.coordToKey([0.5 * (1 + n), n + 3, this.shapes[2]]),\n    ) // étoile\n    for (let i = 0; i <= n + 1; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([\n          (2 * (n + 1) - i) * 0.5,\n          i + 1,\n          this.shapes[0],\n        ]),\n      ) // rond\n      newCells.add(VisualPattern.coordToKey([i * 0.5, i + 1, this.shapes[0]])) // rond\n    }\n    for (let i = 1; i <= n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, 1, this.shapes[0]])) // carré\n    }\n    return newCells\n  },\n}\n\nconst pattern74: PatternRiche3D = {\n  numero: 74,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/05dbfae2-82ce-4106-a070-1ee0128ee99d/8840270_orig.png?format=2500w',\n  visualId: 156,\n  fonctionNb: (x: number) => 3 * x + 1,\n  formule: '3\\\\times n+1',\n  type: 'affine',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    for (let k = 0; k <= n; k++) {\n      if (k !== n && k !== 0) {\n        cubes.push([0, -0.5, k + n / 2, 'cube-trois-couleurs-tube-edges'])\n        continue\n      }\n      for (let i = 0; i < n + 1; i++) {\n        if (k === 0)\n          cubes.push([i, -0.5, n / 2, 'cube-trois-couleurs-tube-edges'])\n        else\n          cubes.push([i - n, -0.5, n + n / 2, 'cube-trois-couleurs-tube-edges'])\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\nconst pattern75: PatternRiche3D = {\n  numero: 75,\n  fonctionNb: (x: number) => 2 * x ** 3 + x,\n  formule: '2n^3+n',\n  type: 'degré3',\n  shapes: ['cube-trois-couleurs-tube-edges'],\n  iterate3d: function (this: VisualPattern3D, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const cubes: [number, number, number, string][] = []\n    if (n === 1) {\n      cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([2, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    } else {\n      for (let k = 0; k < n; k++) {\n        for (let j = n - 1; j >= 0; j--) {\n          for (let i = -n; i < n + 1; i++) {\n            if (k === 0) {\n              cubes.push([\n                i,\n                j - n / 2,\n                k + n / 2,\n                'cube-trois-couleurs-tube-edges',\n              ])\n            }\n          }\n          for (let i = 0; i < n + 1; i++) {\n            if (i !== n && k !== 0) {\n              cubes.push([\n                i - n,\n                j - n / 2,\n                k + n / 2,\n                'cube-trois-couleurs-tube-edges',\n              ])\n              cubes.push([\n                i + 1,\n                j - n / 2,\n                k + n / 2,\n                'cube-trois-couleurs-tube-edges',\n              ])\n            }\n          }\n        }\n      }\n    }\n\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern76: PatternRiche = {\n  numero: 76,\n  fonctionNb: (x: number) => 5 * x + 4,\n  fonctionRatio: (x: number) => new Ratio([x, 4 * x + 4]),\n  fonctionFraction: (x: number) => new FractionEtendue(x, 5 * x + 4),\n  formule: '5\\\\times n + 4',\n  type: 'affine',\n  shapes: ['licorne', 'dragon'],\n  texRatio: 'licornes : dragons',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      newCells.add(VisualPattern.coordToKey([i, 0.5 * i, this.shapes[1]]))\n      newCells.add(\n        VisualPattern.coordToKey([i, n + 1 - 0.5 * i, this.shapes[1]]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([2 * n + 2 - i, 0.5 * i, this.shapes[1]]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([\n          2 * n + 2 - i,\n          n + 1 - 0.5 * i,\n          this.shapes[1],\n        ]),\n      )\n    }\n    newCells.add(VisualPattern.coordToKey([n + 1, n / 2 + 0.5, this.shapes[0]])) // rond\n    return newCells\n  },\n}\n\nconst pattern77: PatternRiche = {\n  numero: 77,\n  fonctionNb: (x: number) => (x + 1) * (x + 3),\n  fonctionRatio: (x: number) => new Ratio([x + 2, x ** 2 + 3 * x + 2]),\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(x + 2, (x + 1) * (x + 3)),\n  formule: '(n+1)(n+3)',\n  type: 'degré2',\n  shapes: ['rectangleVert', 'rectangleBlanc'],\n  texRatio: 'rectangles verts : rectangles blancs',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n + 1; i++) {\n      for (let j = 0; j < n + 3; j++) {\n        if (i === 0 && j > 0)\n          newCells.add(VisualPattern.coordToKey([i, j * 0.5, this.shapes[0]])) // rectangleVert\n        else\n          newCells.add(VisualPattern.coordToKey([i, j * 0.5, this.shapes[1]])) // rectangleBlanc\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern78: PatternRiche = {\n  numero: 78,\n  fonctionNb: (x: number) => 1 + x * (x - 1) * 3,\n  formule: '3\\\\times n^2-3\\\\times n-2',\n  fonctionRatio: (x: number) => new Ratio([3 * x ** 2 - 3 * x - 2, x]),\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(3 * x ** 2 - 3 * x - 2, 1 + x * (x - 1) * 3),\n  type: 'degré2',\n  shapes: ['hexagone', 'hexagoneJaune'],\n  texRatio: 'hexagones bleus : hexagones jaunes',\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      for (let a = Math.PI / 6; a < 2 * Math.PI; a += Math.PI / 3) {\n        const x = i * Math.cos(a) * 0.866\n        const y = i * Math.sin(a) * 0.866 + n / 2\n        if (i > 1) {\n          const x2 = i * Math.cos(a + Math.PI / 3) * 0.866\n          const y2 = i * Math.sin(a + Math.PI / 3) * 0.866 + n / 2\n          for (let j = 1; j < n - 1; j++) {\n            newCells.add(\n              VisualPattern.coordToKey([\n                x + (j * (x2 - x)) / i,\n                y + (j * (y2 - y)) / i,\n                i % 2 === 0 ? this.shapes[0] : this.shapes[1],\n              ]),\n            ) // hexagone\n          }\n        }\n        newCells.add(\n          VisualPattern.coordToKey([\n            x,\n            y,\n            i % 2 === 0 ? this.shapes[0] : this.shapes[1],\n          ]),\n        ) // hexagone\n      }\n    }\n    return newCells\n  },\n}\n\nconst pattern79: PatternRiche = {\n  numero: 79,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/b5a4fa70-e93a-4cda-a58a-46eab96e699d/vp8_2_orig.png?format=2500w',\n  visualId: 8,\n  fonctionNb: (x: number) => (x * (x + 1)) / 2 + 1,\n  formule: '1+\\\\dfrac{n\\\\times(n+1)}{2}',\n  type: 'degré2',\n  shapes: ['pingouin'],\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i <= n; i++) {\n      for (let j = 0; j < n - i; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]])) // hexagone\n      }\n    }\n    newCells.add(VisualPattern.coordToKey([n, 0, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern80: PatternRiche = {\n  numero: 80,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/c7d48a0a-841b-4eb1-a4ee-b40bbfc6d880/vp7_2_orig.png?format=2500w',\n  visualId: 7,\n  shapes: ['carré', 'carré'],\n  fonctionNb: (x: number) => 1 + 2 * x,\n  formule: '2\\\\times n+1',\n  type: 'affine',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < 2; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n      }\n    }\n    newCells.add(VisualPattern.coordToKey([2, 0, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern81: PatternRiche = {\n  numero: 81,\n  shapes: ['rond'],\n  visualId: 5,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/f96d2e80-0bd6-444b-9dc8-8abb96f5731c/vp5_2_orig.png?format=2500w',\n  fonctionNb: (x: number) => 3 + 2 * x * (x + 1),\n  formule: '3+2\\\\times n(n+1)',\n  type: 'degré2',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, n, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n, 2 * n, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 1, n - 1, this.shapes[0]]))\n    for (let i = 0; i <= n; i++) {\n      for (let j = 0; j < n; j++) {\n        newCells.add(VisualPattern.coordToKey([i, j, this.shapes[0]]))\n        newCells.add(\n          VisualPattern.coordToKey([n + 1 + j, n + i, this.shapes[0]]),\n        )\n      }\n    }\n    newCells.add(VisualPattern.coordToKey([2, 0, this.shapes[0]]))\n    return newCells\n  },\n}\n\nconst pattern82: PatternRiche = {\n  numero: 82,\n  shapes: ['carréRond'],\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/57dfb354-2e9f-4a19-92ea-34d33ae4caf7/2018-04-05-09-56-48_orig.png?format=2500w',\n  visualId: 252,\n  fonctionNb: (x: number) => 5 + 6 * x,\n  type: 'affine',\n  formule: '6\\\\times n + 5',\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([n, 0, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n, 2 * n, this.shapes[0]]))\n    newCells.add(VisualPattern.coordToKey([n + 2, 0, this.shapes[0]]))\n    for (let i = 0; i < n + 5; i++) {\n      newCells.add(VisualPattern.coordToKey([i + n, n, this.shapes[0]]))\n    }\n    for (let j = 0; j <= 2 * n; j++) {\n      newCells.add(VisualPattern.coordToKey([n, j, this.shapes[0]]))\n    }\n    for (let j = 0; j <= n; j++) {\n      newCells.add(VisualPattern.coordToKey([n + 2, j, this.shapes[0]]))\n    }\n    for (let z = 0; z < n; z++) {\n      newCells.add(\n        VisualPattern.coordToKey([n - 1 - z, 2 * n + z + 1, this.shapes[0]]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([n + 1 + z, 2 * n + z + 1, this.shapes[0]]),\n      )\n    }\n\n    return newCells\n  },\n}\n\n// chien, chat, tortue\nconst pattern83: PatternRicheRepetition = {\n  numero: 83,\n  shapes: ['chien', 'chat', 'tortue'],\n  nbMotifMin: 6,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 3 === 0) return listeShapes2DInfos['chien']\n    if ((n - 1) % 3 === 1) return listeShapes2DInfos['chat']\n    return listeShapes2DInfos['tortue']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[(n - 1) % 3]]))\n    return newCells\n  },\n}\n\n// losange, hexagone\nconst pattern84: PatternRicheRepetition = {\n  numero: 84,\n  shapes: ['losange', 'hexagone'],\n  nbMotifMin: 4,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 2 === 0) return listeShapes2DInfos['losange']\n    return listeShapes2DInfos['hexagone']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[(n - 1) % 2]]))\n    return newCells\n  },\n}\n\n// fraise, banane, kiwi, citron\nconst pattern85: PatternRicheRepetition = {\n  numero: 85,\n  shapes: ['fraise', 'banane', 'kiwi', 'citron'],\n  nbMotifMin: 8,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 4 === 0) return listeShapes2DInfos['fraise']\n    if ((n - 1) % 4 === 1) return listeShapes2DInfos['banane']\n    if ((n - 1) % 4 === 2) return listeShapes2DInfos['kiwi']\n    return listeShapes2DInfos['citron']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([0, 0, this.shapes[(n - 1) % 4]]))\n    return newCells\n  },\n}\n\n// rond, carré, carré, triangle, losange, hexagone\nconst pattern86: PatternRicheRepetition = {\n  numero: 86,\n  shapes: ['rond', 'carré', 'carré', 'triangle', 'losange', 'hexagone'],\n  nbMotifMin: 12,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 6 === 0) return listeShapes2DInfos['rond']\n    if ((n - 1) % 6 === 1 || n % 6 === 2) return listeShapes2DInfos['carré']\n    if ((n - 1) % 6 === 3) return listeShapes2DInfos['triangle']\n    if ((n - 1) % 6 === 4) return listeShapes2DInfos['losange']\n    return listeShapes2DInfos['hexagone']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        ['rond', 'carré', 'carré', 'triangle', 'losange', 'hexagone'][\n          (n - 1) % 6\n        ],\n      ]),\n    )\n    return newCells\n  },\n}\n\n// carré, triangle, hexagone, triangle, carré\nconst pattern87: PatternRicheRepetition = {\n  numero: 87,\n  shapes: ['carré', 'triangle', 'hexagone'],\n  nbMotifMin: 10,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 5 === 0) return listeShapes2DInfos['carré']\n    if ((n - 1) % 5 === 1) return listeShapes2DInfos['triangle']\n    if ((n - 1) % 5 === 2) return listeShapes2DInfos['hexagone']\n    if ((n - 1) % 5 === 3) return listeShapes2DInfos['triangle']\n    return listeShapes2DInfos['carré']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const modulo = (n - 1) % 5\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        modulo % 4 === 0\n          ? this.shapes[0]\n          : modulo % 2 === 1\n            ? this.shapes[1]\n            : this.shapes[2],\n      ]),\n    )\n    return newCells\n  },\n}\n\n// rond, triangle, hexagone, rond\nconst pattern88: PatternRicheRepetition = {\n  numero: 88,\n  shapes: ['rond', 'triangle', 'hexagone'],\n  nbMotifMin: 8,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 4 === 0) return listeShapes2DInfos['rond']\n    if ((n - 1) % 4 === 1) return listeShapes2DInfos['triangle']\n    if ((n - 1) % 4 === 2) return listeShapes2DInfos['hexagone']\n    return listeShapes2DInfos['rond']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const modulo = (n - 1) % 4\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        (modulo % 4) % 3 === 0\n          ? this.shapes[0]\n          : modulo % 4 === 1\n            ? this.shapes[1]\n            : this.shapes[2],\n      ]),\n    )\n    return newCells\n  },\n}\n\n// raisin, pomme, pomme, orange\nconst pattern89: PatternRicheRepetition = {\n  numero: 89,\n  shapes: ['raisin', 'pomme', 'orange'],\n  nbMotifMin: 8,\n  fonctionShape: (n: number) => {\n    if ((n - 1) % 4 === 0) return listeShapes2DInfos['raisin']\n    if ((n - 1) % 4 === 1) return listeShapes2DInfos['pomme']\n    if ((n - 1) % 4 === 2) return listeShapes2DInfos['pomme']\n    return listeShapes2DInfos['orange']\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    const modulo = (n - 1) % 4\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        modulo % 4 === 0\n          ? this.shapes[0]\n          : modulo % 4 === 3\n            ? this.shapes[2]\n            : this.shapes[1],\n      ]),\n    )\n    return newCells\n  },\n}\n\nconst pattern90: PatternRiche = {\n  numero: 90,\n  shapes: ['triangle'],\n  visualId: 100,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/c407a52a-19ae-4f37-b0fa-fbbbe2a3b7fd/4403080_orig.png?format=2500w',\n  fonctionNb: (x: number) => (3 ** x - 1) / 2,\n  formule: '\\\\dfrac{3^n-1}{2}',\n  fonctionRatio: (x: number) =>\n    new Ratio([(3 ** (x - 1) - 1) / 2, 3 ** (x - 1)]),\n  texRatio: 'triangles blancs : triangles verts',\n  fonctionFraction: (x: number) =>\n    new FractionEtendue((3 ** (x - 1) - 1) / 2, (3 ** x - 1) / 2),\n  type: 'autre',\n  pattern: new VisualPattern([[0, 0, 'triangle', { scale: 3 }]]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    function partageTriangle(n: number, x: number, y: number, scale: number) {\n      if (n > 1) {\n        partageTriangle(n - 1, x, y, scale / 2)\n        partageTriangle(n - 1, x + 0.433 * scale, y, scale / 2)\n        partageTriangle(n - 1, x + 0.2165 * scale, y + 0.375 * scale, scale / 2)\n      } else {\n        newCells.add(VisualPattern.coordToKey([x, y, 'triangle', { scale }]))\n      }\n    }\n    partageTriangle(n, n, 1, 5)\n    return newCells\n  },\n}\n\n// allumettes en carrés\nconst pattern91: PatternRiche = {\n  numero: 91,\n  shapes: ['allumetteV', 'allumetteH'],\n  type: 'autre',\n  formule: '3\\\\times n+1',\n  fonctionNb: (x: number) => 3 * x + 1,\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        this.shapes[0],\n        { scale: 1.6, translate: [0, 0] },\n      ]),\n    ) // allumette\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          0,\n          this.shapes[1],\n          { scale: 1.6, translate: [1, 0.9] },\n        ]),\n      ) // allumette horizontale haute\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          0,\n          this.shapes[1],\n          { scale: 1.6, translate: [1, -0.9] },\n        ]),\n      ) // allumette horizontale basse\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          0,\n          this.shapes[0],\n          { scale: 1.6, translate: [2, 0] },\n        ]),\n      ) // allumette verticale à droite\n    }\n    return newCells\n  },\n}\n\n// allumettes en triangles\nconst pattern92: PatternRiche = {\n  numero: 92,\n  shapes: ['allumette60', 'allumette120', 'allumetteH'],\n  type: 'autre',\n  formule: '2\\\\times n+1',\n  fonctionNb: (x: number) => 2 * x + 1,\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        this.shapes[0],\n        { scale: 1.6, translate: [-0.9, 0] },\n      ]),\n    ) // allumette\n    for (let i = 0; i < n; i++) {\n      if (i % 2 === 0) {\n        newCells.add(\n          VisualPattern.coordToKey([\n            i,\n            0,\n            this.shapes[1],\n            { scale: 1.6, translate: [0.2, 0] },\n          ]),\n        ) // allumette120\n        newCells.add(\n          VisualPattern.coordToKey([\n            i,\n            0,\n            this.shapes[2],\n            { scale: 1.6, translate: [-0.3, -0.9] },\n          ]),\n        ) // allumette horizontale basse\n      } else {\n        newCells.add(\n          VisualPattern.coordToKey([\n            i,\n            0,\n            this.shapes[2],\n            { scale: 1.6, translate: [-0.3, 0.9] },\n          ]),\n        ) // allumette horizontale haute\n        newCells.add(\n          VisualPattern.coordToKey([\n            i,\n            0,\n            this.shapes[0],\n            { scale: 1.6, translate: [0.2, 0] },\n          ]),\n        ) // allumettt60\n      }\n    }\n    return newCells\n  },\n}\n\n// allumettes en triangles\nconst pattern93: PatternRiche = {\n  numero: 93,\n  shapes: ['allumetteV', 'allumette120'],\n  type: 'autre',\n  formule: '2\\\\times n+1',\n  fonctionNb: (x: number) => 2 * x + 1,\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        this.shapes[0],\n        { scale: 1.6, translate: [0, 0] },\n      ]),\n    ) // allumette\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([\n          1.2 * i,\n          0,\n          this.shapes[1],\n          { scale: 1.6, translate: [0.6, 0], rotate: 180 },\n        ]),\n      ) // allumette120\n      newCells.add(\n        VisualPattern.coordToKey([\n          1.2 * i,\n          0,\n          this.shapes[0],\n          { scale: 1.6, translate: [1.2, 0] },\n        ]),\n      ) // allumette horizontale basse\n    }\n    return newCells\n  },\n}\n\nconst pattern94: PatternRiche = {\n  numero: 94,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/385a9845-9d3f-49cf-90c8-ecfc3e10668c/2020-09-26-09-44-00_orig.png?format=2500w',\n  visualId: 6,\n  shapes: ['allumetteH', 'allumette60', 'allumette120'],\n  type: 'autre',\n  fonctionNb: (x: number) => 3 ** x,\n  formule: '3^n',\n  pattern: new VisualPattern([]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    function partageTriangle(n: number, x: number, y: number, scale: number) {\n      if (n > 1) {\n        partageTriangle(n - 1, x + 0.1, y, scale * 0.5)\n        partageTriangle(n - 1, x + 0.866 * scale, y, scale * 0.5)\n        partageTriangle(n - 1, x + 0.433 * scale, y + 0.75 * scale, scale * 0.5)\n      } else {\n        newCells.add(\n          VisualPattern.coordToKey([\n            x,\n            y,\n            'allumetteH',\n            { scale: scale * 1.6 },\n          ]),\n        )\n        newCells.add(\n          VisualPattern.coordToKey([\n            x - 0.5 * scale,\n            y + 0.8 * scale,\n            'allumette60',\n            { scale: scale * 1.6 },\n          ]),\n        )\n        newCells.add(\n          VisualPattern.coordToKey([\n            x + 0.5 * scale,\n            y + 0.8 * scale,\n            'allumette120',\n            { scale: scale * 1.6 },\n          ]),\n        )\n      }\n    }\n    partageTriangle(n, n, 0, 3)\n    return newCells\n  },\n}\n\nconst pattern95: PatternRiche = {\n  numero: 95,\n  shapes: ['chien'],\n  type: 'linéaire',\n  formule: '2\\\\times n',\n  fonctionNb: (x: number) => 2 * x,\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([i * 4, 0, this.shapes[0], { scale: 2 }]),\n      ) // chien\n      newCells.add(\n        VisualPattern.coordToKey([i * 4 + 2, 0, this.shapes[0], { scale: 2 }]),\n      ) // chien\n    }\n    return newCells\n  },\n}\n\nconst pattern96: PatternRiche = {\n  numero: 96,\n  shapes: ['fraise', 'soleil'],\n  type: 'affine',\n  formule: '8\\\\times n+1',\n  fonctionNb: (x: number) => 1 + 8 * x,\n  fonctionRatio: (x: number) => new Ratio([1 + 4 * x, 4 * x]),\n  texRatio: 'fraises : soleils',\n  fonctionFraction: (x: number) => new FractionEtendue(1 + 4 * x, 4 * x),\n\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(VisualPattern.coordToKey([n + 2, 2 * n, this.shapes[0]])) // fraise\n    for (let i = 1; i <= n; i++) {\n      newCells.add(VisualPattern.coordToKey([n + 2 + i, 2 * n, this.shapes[0]])) // fraise\n      newCells.add(VisualPattern.coordToKey([n + 2 - i, 2 * n, this.shapes[0]])) // fraise\n      newCells.add(VisualPattern.coordToKey([n + 2, 2 * n + i, this.shapes[0]])) // fraise\n      newCells.add(VisualPattern.coordToKey([n + 2, 2 * n - i, this.shapes[0]])) // fraise\n    }\n    for (let i = n + 1; i <= 2 * n; i++) {\n      newCells.add(VisualPattern.coordToKey([n + 2 + i, 2 * n, this.shapes[1]])) // soleil\n      newCells.add(VisualPattern.coordToKey([n + 2 - i, 2 * n, this.shapes[1]])) // soleil\n      newCells.add(VisualPattern.coordToKey([n + 2, 2 * n + i, this.shapes[1]])) // soleil\n      newCells.add(VisualPattern.coordToKey([n + 2, 2 * n - i, this.shapes[1]])) // soleil\n    }\n    return newCells\n  },\n}\n\nconst pattern97: PatternRiche = {\n  numero: 97,\n  shapes: ['chat', 'chien', 'fraise', 'cerise'],\n  type: 'affine',\n  formule: '4\\\\times n+4',\n  fonctionNb: (x: number) => 4 * x + 4,\n  fonctionFraction: (x: number) => new FractionEtendue(x + 1, 4 * x + 4),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 0; i < n + 1; i++) {\n      newCells.add(VisualPattern.coordToKey([n + 1, i, this.shapes[0]]))\n      newCells.add(VisualPattern.coordToKey([n + 1, n + 2 + i, this.shapes[2]]))\n\n      newCells.add(VisualPattern.coordToKey([n - i + 1, n + 1, this.shapes[3]]))\n      newCells.add(VisualPattern.coordToKey([n + 2 + i, n + 1, this.shapes[1]]))\n    }\n    return newCells\n  },\n}\n// flèche en allumettes\nconst pattern98: PatternRiche = {\n  numero: 98,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/863acf91-20a3-4821-9e33-0dd6ceb3e3f0/vp52_2_orig.png?format=2500w',\n  visualId: 53,\n  shapes: ['allumetteV'],\n  type: 'affine',\n  fonctionNb: (x: number) => 3 * x + 3,\n  formule: '3\\\\times n+ 3',\n  pattern: new VisualPattern([]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        n * 2,\n        1,\n        this.shapes[0],\n        { scale: 2, rotate: 60 },\n      ]),\n    )\n    newCells.add(\n      VisualPattern.coordToKey([\n        n * 2,\n        0,\n        this.shapes[0],\n        { scale: 2, rotate: -60 },\n      ]),\n    )\n    newCells.add(\n      VisualPattern.coordToKey([n * 2 - 1, 0.5, this.shapes[0], { scale: 2 }]),\n    )\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2 - 1,\n          0.5,\n          this.shapes[0],\n          { scale: 2 },\n        ]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          1.5,\n          this.shapes[0],\n          { scale: 2, rotate: 90 },\n        ]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          -0.5,\n          this.shapes[0],\n          { scale: 2, rotate: 90 },\n        ]),\n      )\n    }\n    return newCells\n  },\n}\n\n// flèche en allumettes\nconst pattern99: PatternRiche = {\n  numero: 99,\n  visualImg:\n    'https://images.squarespace-cdn.com/content/v1/647f8c4916cb6662848ba604/38a70e2e-75f6-4395-b2d5-15b83aa73771/vp55_2.png?format=2500w',\n  visualId: 55,\n  shapes: ['allumetteV'],\n  type: 'affine',\n  fonctionNb: (x: number) => 3 * x + 5,\n  formule: '3\\\\times n+ 5',\n  pattern: new VisualPattern([]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        n * 2,\n        -0.8,\n        this.shapes[0],\n        { scale: 2, rotate: -108 },\n      ]),\n    )\n    newCells.add(\n      VisualPattern.coordToKey([\n        n * 2,\n        1.8,\n        this.shapes[0],\n        { scale: 2, rotate: -72 },\n      ]),\n    )\n    newCells.add(\n      VisualPattern.coordToKey([\n        n * 2 + 1.6,\n        -0.3,\n        this.shapes[0],\n        { scale: 2, rotate: -36 },\n      ]),\n    )\n    newCells.add(\n      VisualPattern.coordToKey([\n        n * 2 + 1.6,\n        1.2,\n        this.shapes[0],\n        { scale: 2, rotate: 36 },\n      ]),\n    )\n    newCells.add(\n      VisualPattern.coordToKey([n * 2 - 1, 0.5, this.shapes[0], { scale: 2 }]),\n    )\n    for (let i = 0; i < n; i++) {\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2 - 1,\n          0.5,\n          this.shapes[0],\n          { scale: 2, rotate: 180 },\n        ]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          1.5,\n          this.shapes[0],\n          { scale: 2, rotate: 90 },\n        ]),\n      )\n      newCells.add(\n        VisualPattern.coordToKey([\n          i * 2,\n          -0.5,\n          this.shapes[0],\n          { scale: 2, rotate: -90 },\n        ]),\n      )\n    }\n    return newCells\n  },\n}\n\nconst pattern100: PatternRicheRepetition = {\n  shapes: ['cadeau', 'explosion'],\n  nbMotifMin: 10,\n  numero: 100,\n  fonctionShape: (n: number) => {\n    return [listeShapes2DInfos['cadeau'], listeShapes2DInfos['explosion']][\n      Number.isInteger(Math.sqrt(9 + 8 * n)) ? 0 : 1\n    ]\n  },\n  iterate: function (this: VisualPattern, n?: number) {\n    if (n === undefined) n = 0\n\n    const newCells = new Set<string>()\n    newCells.add(\n      VisualPattern.coordToKey([\n        0,\n        0,\n        ['cadeau', 'explosion'][Number.isInteger(Math.sqrt(9 + 8 * n)) ? 0 : 1],\n      ]),\n    ) // explosion ou cadeau\n    return newCells\n  },\n}\n\n// triangle de Sierpinski avec des carrés\nconst pattern101: PatternRiche = {\n  shapes: ['carré'],\n  numero: 101,\n  fonctionNb: (x: number) => (3 ** x - 2) * 2,\n  formule: '\\\\dfrac{3^n-1}{2}',\n  fonctionRatio: (x: number) => new Ratio([3 ** (x - 2), 3 ** (x - 1)]),\n  texRatio: 'carrés blancs : carrés gris',\n  fonctionFraction: (x: number) =>\n    new FractionEtendue(3 ** (x - 1), 2 * 3 ** (x - 2)),\n  type: 'fractal',\n  pattern: new VisualPattern([]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    function partageCarré(n: number, x: number, y: number, scale: number) {\n      if (n > 1) {\n        partageCarré(n - 1, x, y - scale / 4, scale / 2)\n        partageCarré(n - 1, x + scale * 0.5, y - scale / 4, scale / 2)\n        partageCarré(n - 1, x + scale * 0.25, y + scale / 4, scale / 2)\n      } else {\n        newCells.add(VisualPattern.coordToKey([x, y, 'carré', { scale }]))\n      }\n    }\n    partageCarré(n, 0, 2, 5)\n    return newCells\n  },\n}\n\n// Tapis de Serpinski\nconst pattern102: PatternRiche = {\n  shapes: ['carré', 'carréBleu'],\n  numero: 101,\n  fonctionNb: (x: number) => (3 ** x - 1) / 2,\n  formule: '\\\\dfrac{3^n-1}{2}',\n  fonctionRatio: (x: number) =>\n    new Ratio([(3 ** (x - 1) - 1) / 2, 8 ** (x - 1)]),\n  texRatio: 'carrés blancs : carrés bleus',\n  fonctionFraction: (x: number) =>\n    new FractionEtendue((3 ** (x - 1) - 1) / 2, (3 ** x - 1) / 2),\n  type: 'fractal',\n  pattern: new VisualPattern([]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    function evideCarré(n: number, x: number, y: number, scale: number) {\n      if (n > 1) {\n        for (let i = 0; i < 3; i++) {\n          for (let j = 0; j < 3; j++) {\n            if (!(i === 1 && j === 1)) {\n              evideCarré(\n                n - 1,\n                x + (i * scale) / 3,\n                y + (j * scale) / 3,\n                scale / 3,\n              )\n            }\n          }\n        }\n      } else {\n        newCells.add(\n          VisualPattern.coordToKey([\n            x + scale / 3,\n            y + scale / 3,\n            'carréBleu',\n            { scale },\n          ]),\n        )\n      }\n    }\n    evideCarré(n, 0, 2, 5)\n    return newCells\n  },\n}\n\nconst pattern103: PatternRiche = {\n  shapes: ['pentagone'],\n  numero: 101,\n  fonctionNb: (x: number) => (3 ** x - 1) / 2,\n  formule: '\\\\dfrac{3^n-1}{2}',\n  type: 'fractal',\n  pattern: new VisualPattern([]),\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    function DecoupePenta(n: number, x: number, y: number, scale: number) {\n      // Facteur d'échelle pour coller parfaitement les pentagones\n      const phi = (1 + Math.sqrt(5)) / 2 // Nombre d'or\n      const apo = 0.809\n\n      const k = (1 / phi) ** 2\n      if (n > 1) {\n        for (let i = 0; i < 5; i++) {\n          const teta = ((i * 2 + 0.5) * Math.PI) / 5\n          DecoupePenta(\n            n - 1,\n            x + scale * k * apo * Math.cos(teta),\n            y + scale * k * apo * Math.sin(teta),\n            scale * k,\n          )\n        }\n      } else {\n        newCells.add(VisualPattern.coordToKey([x, y, 'pentagone', { scale }]))\n        // newCells.add(VisualPattern.coordToKey([x + scale / 3, y + scale / 3, 'carréBleu', { scale }]))\n      }\n    }\n    DecoupePenta(n, 0, 2, 6)\n    return newCells\n  },\n}\n\nconst pattern104: PatternRiche = {\n  shapes: ['allumetteH'],\n  numero: 104,\n  type: 'fractal',\n  formule: '2\\\\times n+1',\n  fonctionNb: (x: number) => 2 * x + 1,\n  iterate: function (this: VisualPattern, n) {\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    function casseSegment(\n      n: number,\n      x1: number,\n      y1: number,\n      x2: number,\n      y2: number,\n      depth: number,\n    ) {\n      if (depth === 0) {\n        // Calcul de l'angle du segment pour l'orientation du dessin\n        const angle = Math.atan2(y2 - y1, x2 - x1)\n        const scale = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)\n        // Le segmentHorizontal est centré en (0,0) et de longueur 1, donc on centre à [(x1+x2)/2, (y1+y2)/2]\n        newCells.add(\n          VisualPattern.coordToKey([\n            (x1 + x2) / 2,\n            (y1 + y2) / 2,\n            'allumetteH',\n            { scale, rotate: (angle * 180) / Math.PI },\n          ]),\n        )\n      } else {\n        // Découpe le segment en 4 parties selon la géométrie du flocon de Koch\n        const dx = (x2 - x1) / 3\n        const dy = (y2 - y1) / 3\n        const xA = x1 + dx\n        const yA = y1 + dy\n        const xB = x1 + 2 * dx\n        const yB = y1 + 2 * dy\n        // Calcul du sommet du \"pic\"\n        const angle = Math.atan2(y2 - y1, x2 - x1) + Math.PI / 3\n        const xC = xA + Math.cos(angle) * Math.sqrt(dx * dx + dy * dy)\n        const yC = yA + Math.sin(angle) * Math.sqrt(dx * dx + dy * dy)\n        casseSegment(n, x1, y1, xA, yA, depth - 1)\n        casseSegment(n, xA, yA, xC, yC, depth - 1)\n        casseSegment(n, xC, yC, xB, yB, depth - 1)\n        casseSegment(n, xB, yB, x2, y2, depth - 1)\n      }\n    }\n    // Exemple : segment horizontal de longueur 3, profondeur n\n    casseSegment(n, 0, 0, 5, 0, n)\n    return newCells\n  },\n}\n\nconst pattern105: PatternRiche3D = {\n  numero: 105,\n  shapes: ['cube'],\n  type: 'linéaire',\n  formule: '4\\\\times n',\n  fonctionNb: (x: number) => 4 * x,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([-i + 1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, -i, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, 0, i, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern106: PatternRiche3D = {\n  numero: 106,\n  shapes: ['cube'],\n  type: 'linéaire',\n  formule: '4\\\\times n',\n  fonctionNb: (x: number) => 4 * x,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([1, 0, i - 1, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([-1, 0, i - 1, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, -1, i - 1, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, 1, i - 1, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern107: PatternRiche3D = {\n  numero: 107,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '4\\\\times n+1',\n  fonctionNb: (x: number) => 4 * x + 1,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([-i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, -i, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, i, 0, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern108: PatternRiche3D = {\n  numero: 108,\n  shapes: ['cube'],\n  type: 'linéaire',\n  formule: '5\\\\times n',\n  fonctionNb: (x: number) => 5 * x,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([\n        i === 1 ? 1 : 1 + (i - 1) / 3,\n        0,\n        i - 1,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([\n        -(i === 1 ? 1 : 1 + (i - 1) / 3),\n        0,\n        i - 1,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([\n        0,\n        -(i === 1 ? 1 : 1 + (i - 1) / 3),\n        i - 1,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([\n        0,\n        i === 1 ? 1 : 1 + (i - 1) / 3,\n        i - 1,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([0, 0, i - 1, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern109: PatternRiche3D = {\n  numero: 109,\n  shapes: ['cube'],\n  type: 'linéaire',\n  formule: '2\\\\times n+3',\n  fonctionNb: (x: number) => 2 * x + 3,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([-i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern110: PatternRiche3D = {\n  numero: 110,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '2\\\\times n+6',\n  fonctionNb: (x: number) => 2 * x + 6,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n + 1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n + 1, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n + 1, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([i, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern111: PatternRiche3D = {\n  numero: 111,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '4\\\\times n+4',\n  fonctionNb: (x: number) => 4 * x + 4,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    cubes.push([0, n + 1, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n + 1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n + 1, n + 1, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    const newCells = new Set<string>()\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, i, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([i, n + 1, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([n + 1, i, 0, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern112: PatternRiche3D = {\n  numero: 112,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '4\\\\times n+1',\n  fonctionNb: (x: number) => 4 * x + 1,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    for (let i = 1; i < n; i++) {\n      cubes.push([\n        i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2,\n        i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2,\n        -i,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([\n        -(i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2),\n        -(i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2),\n        -i,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([\n        i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2,\n        -(i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2),\n        -i,\n        'cube-trois-couleurs-tube-edges',\n      ])\n      cubes.push([\n        -(i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2),\n        i === 1 ? 1 / 2 : 1 / 2 + (i - 1) / 2,\n        -i,\n        'cube-trois-couleurs-tube-edges',\n      ])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern113: PatternRiche3D = {\n  numero: 113,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '2\\\\times n+1',\n  fonctionNb: (x: number) => 2 * x + 1,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    const newCells = new Set<string>()\n    for (let i = 2; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([i - 1, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern114: PatternRiche3D = {\n  numero: 114,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '4\\\\times n+4',\n  fonctionNb: (x: number) => 4 * x + 4,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    cubes.push([0, 1, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([1, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([2, 1, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([1, 2, 0, 'cube-trois-couleurs-tube-edges'])\n\n    const newCells = new Set<string>()\n    for (let i = 0; i < n; i++) {\n      cubes.push([0, 0, -i, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([2, 0, -i, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, 2, -i, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([2, 2, -i, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern115: PatternRiche3D = {\n  numero: 115,\n  shapes: ['cube'],\n  type: 'affine',\n  formule: '4\\\\times n+14',\n  fonctionNb: (x: number) => 4 * x + 14,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    cubes.push([n, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 1, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 2, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 1, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 2, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 1, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([n, 2, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 1, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 2, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 1, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 2, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 1, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 2, 2, 'cube-trois-couleurs-tube-edges'])\n    const newCells = new Set<string>()\n    for (let i = 1; i < n; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([i, 2, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([i, 2, 2, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([i, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern116: PatternRiche3D = {\n  numero: 116,\n  shapes: ['cube'],\n  type: 'linéaire',\n  formule: '5\\\\times n',\n  fonctionNb: (x: number) => 5 * x,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    for (let i = 1; i < n + 1; i++) {\n      cubes.push([i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([-i, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, -i, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([0, i, 0, 'cube-trois-couleurs-tube-edges'])\n      if (i > 1) {\n        cubes.push([0, 0, i - 1, 'cube-trois-couleurs-tube-edges'])\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst pattern117: PatternRiche3D = {\n  numero: 117,\n  shapes: ['cube'],\n  type: 'linéaire',\n  formule: '4\\\\times n',\n  fonctionNb: (x: number) => 4 * x,\n  iterate3d: function (this: VisualPattern3D, n) {\n    const cubes: [number, number, number, string][] = []\n    if (n === undefined) n = 1\n    const newCells = new Set<string>()\n    cubes.push([0, 0, 0, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 1, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 2, 'cube-trois-couleurs-tube-edges'])\n    cubes.push([0, 0, 3, 'cube-trois-couleurs-tube-edges'])\n    for (let i = 2; i < n + 1; i++) {\n      cubes.push([(i - 1) * 2, 0, 0, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([(i - 1) * 2, 0, 1, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([(i - 1) * 2, 0, 2, 'cube-trois-couleurs-tube-edges'])\n      cubes.push([(i - 1) * 2 - 1, 0, 2, 'cube-trois-couleurs-tube-edges'])\n      if (i > 1) {\n        cubes.push([0, 0, i - 1, 'cube-trois-couleurs-tube-edges'])\n      }\n    }\n    const cubesSorted = rangeCubes(cubes)\n    for (const [x, y, z, s] of cubesSorted) {\n      const key = VisualPattern3D.coordToKey([x, y, z, s])\n      if (newCells.has(key)) {\n        newCells.delete(key) // Supprimer la cellule si elle existe déjà car en 3d il peut y avoir des superpositions et c'est la dernière qui doit être dessinée.\n      }\n      newCells.add(VisualPattern3D.coordToKey([x, y, z, s]))\n    }\n    return newCells\n  },\n}\n\nconst listePatternsPreDef: (PatternRiche | PatternRiche3D)[] = [\n  pattern1,\n  pattern2,\n  pattern3,\n  pattern4,\n  pattern5,\n  pattern6,\n  pattern7,\n  pattern8,\n  pattern9,\n  pattern10,\n  pattern11,\n  pattern12,\n  pattern13,\n  pattern14,\n  pattern15,\n  pattern16,\n  pattern17,\n  pattern18,\n  pattern19,\n  pattern20,\n  pattern21,\n  pattern22,\n  pattern23,\n  pattern24,\n  pattern25,\n  pattern26,\n  pattern27,\n  pattern28,\n  pattern29,\n  pattern30,\n  pattern31,\n  pattern32,\n  pattern33,\n  pattern34,\n  pattern35,\n  pattern36,\n  pattern37,\n  pattern38,\n  pattern39,\n  pattern40,\n  pattern41,\n  pattern42,\n  pattern43,\n  pattern44,\n  pattern45,\n  pattern46,\n  pattern47,\n  pattern48,\n  pattern49,\n  pattern50,\n  pattern51,\n  pattern52,\n  pattern53,\n  pattern54,\n  pattern55,\n  pattern56,\n  pattern57,\n  pattern58,\n  pattern59,\n  pattern60,\n  pattern61,\n  pattern62,\n  pattern63,\n  pattern64,\n  pattern65,\n  pattern66,\n  pattern67,\n  pattern68,\n  pattern69,\n  pattern70,\n  pattern71,\n  pattern72,\n  pattern73,\n  pattern74,\n  pattern75,\n  pattern76,\n  pattern77,\n  pattern78,\n  pattern79,\n  pattern80,\n  pattern81,\n  pattern82,\n  pattern90,\n  pattern91,\n  pattern92,\n  pattern93,\n  pattern94,\n  pattern95,\n  pattern96,\n  pattern97,\n  pattern98,\n  pattern99,\n  pattern101,\n  pattern102,\n  pattern103,\n  pattern104,\n  pattern105,\n  pattern106,\n  pattern107,\n  pattern108,\n  pattern109,\n  pattern110,\n  pattern111,\n  pattern112,\n  pattern113,\n  pattern114,\n  pattern115,\n  pattern116,\n  pattern117,\n].sort((a, b) => Number(a.numero) - Number(b.numero))\n/**\n * Liste des patterns prédéfinis, triés par type.\n * - listePattern2d : tous les patterns 2D\n * - listePattern3d : tous les patterns 3D\n * - listePatternAffine : tous les patterns affines\n * - listePatternLineaire : tous les patterns linéaires\n * - listePatternDegre2 : tous les patterns de degré 2\n * - listePatternDegre3 : tous les patterns de degré 3\n */\n\nconst listePattern3d: PatternRiche3D[] = listePatternsPreDef // Tous les patterns 3D\n  .filter((p) => 'iterate3d' in p && typeof p.iterate3d === 'function')\n  .sort((a, b) => Number(a.numero) - Number(b.numero)) as PatternRiche3D[]\n\nconst listePatternRatio: (PatternRiche | PatternRiche3D)[] = listePatternsPreDef // Tous les partern avec un ratio\n  .filter((p) => p.fonctionRatio != null)\n  .sort((a, b) => Number(a.numero) - Number(b.numero))\n\nconst listePatternAffineOuLineaire: (PatternRiche | PatternRiche3D)[] = // Tous les partern affines ou linéaires, 2D ou 3D\n  listePatternsPreDef\n    .filter((p) => p.type === 'affine' || p.type === 'linéaire')\n    .sort((a, b) => Number(a.numero) - Number(b.numero))\nconst listePatternsSansRatioNiFraction = listePatternAffineOuLineaire // Tous les pattern sans ratio, sans fraction, affine ou linéaire.\n  .filter((p) => p.fonctionRatio == null && p.fonctionFraction == null)\n  .sort((a, b) => Number(a.numero) - Number(b.numero))\n\nexport {\n  listePattern3d,\n  listePatternAffineOuLineaire,\n  listePatternRatio,\n  listePatternsPreDef,\n  listePatternsSansRatioNiFraction,\n}\n"],"names":["Ratio","values","__publicField","v","acc","val","total","index","newValue","scaleFactor","i","factor","targetTotal","currentTotal","scaled","gcd","other","epsilon","ratios","firstRatio","r","separator","json","precision","maxDecimals","decimals","value","arr","gcdTwo","a","b","rotatedBoundingBoxWithCenter","xmin","ymin","xmax","ymax","alpha","cx","cy","w2","h2","cosA","sinA","dx","dy","centerX","centerY","rotatedCenterX","rotatedCenterY","Shape3D","ObjetMathalea2D","name","codeSvg","codeTikz","x","y","angle","scale","width","height","pixelsParCm","context","opacite","bordures","shapeId","coeff","lastScale","z","px","py","project3dIso","n","faceTop","p","faceLeft","faceRight","cubeDef","cube","shapeCubeIso","options","updateCubeIso","pattern","j","newScale","inCorrectionMode","VisualPattern","dragging","lastX","motifId","mouseMoveAction","e","renderScene","mouseupAction","destroyListeners","setup","svg","defs","defsEl","top","left","right","g","el","group","cell","obj","temp","filterCells","cells","hasAllNeightbors","filteredCells","VisualPattern3D","initialCells","prefixId","shapes","type","shape","coord","key","sumX","sumY","sumZ","count","objects","content","ajouteCanvas3d","newPattern","objets","sortedCubes","sortedCells","rangeCubes","newShape","coords","byZ","zCoord","w","result","zs","groupZ","byY","ys","groupY","pattern1","newCells","pattern2","pattern3","pattern4","pattern5","pattern6","pattern7","pattern8","pattern9","pattern10","pattern11","pattern12","pattern13","pattern14","pattern15","pattern16","pattern17","pattern18","pattern19","pattern20","pattern21","pattern22","cubes","cubesSorted","s","pattern23","pattern24","pattern25","demiPas","pattern26","pattern27","pattern28","pattern29","pattern30","pattern31","pattern32","k","l","pattern33","pattern34","m","pattern35","end","pattern36","altitude","base","etage","h","arete","pattern37","pattern38","pattern39","pattern40","pattern41","pattern42","pattern43","pattern44","pattern45","pattern46","pattern47","pattern48","pattern49","pattern50","pattern51","pattern52","pattern53","pattern54","pattern55","pattern56","pattern57","FractionEtendue","pattern58","pattern59","pattern60","pattern61","pattern62","pattern63","pattern64","pattern65","pattern66","nbCells","hexa","pattern67","pattern68","pattern69","pattern70","pattern71","pattern72","pattern73","pattern74","pattern75","pattern76","pattern77","pattern78","x2","y2","pattern79","pattern80","pattern81","pattern82","pattern90","partageTriangle","pattern91","pattern92","pattern93","pattern94","pattern95","pattern96","pattern97","pattern98","pattern99","pattern101","partageCarré","pattern102","evideCarré","pattern103","DecoupePenta","phi","apo","teta","pattern104","casseSegment","x1","y1","depth","xA","yA","xB","yB","xC","yC","pattern105","pattern106","pattern107","pattern108","pattern109","pattern110","pattern111","pattern112","pattern113","pattern114","pattern115","pattern116","pattern117","listePatternsPreDef","listePattern3d","listePatternRatio","listePatternAffineOuLineaire","listePatternsSansRatioNiFraction"],"mappings":"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"}