{"version":3,"file":"auto6N3D-2-COupNKD9.js","sources":["../../src/exercices/6e/auto6N3D-2.ts"],"sourcesContent":["import { KeyboardType } from '../../lib/interactif/claviers/keyboard'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { ajouteChampTexteMathLive } from '../../lib/interactif/questionMathLive'\nimport {\n  choice,\n  combinaisonListes,\n  combinaisonListesSansChangerOrdre,\n} from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport { context } from '../../modules/context'\nimport { labyrinthe } from '../../modules/Labyrinthe'\nimport { mathalea2d } from '../../modules/mathalea2d'\nimport {\n  contraindreValeur,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const amcReady = true\nexport const amcType = 'AMCOpen'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const titre = 'Parcourir un labyrinthe de multiples'\nexport const dateDePublication = '06/12/2020'\nexport const dateDeModifImportante = '29/10/2024'\n\n/**\n * @author Jean-Claude Lhote (remaniée par EE pour la prise en compte du nb de lignes et de colonnes du labyrinthe)\n * Parcourir un labyrinthe de nombres en passant par les multiples du nombre choisi.\n * Relecture : Janvier 2022 par EE\n */\n\nexport const uuid = 'fd4d8'\n\nexport const refs = {\n  'fr-fr': ['auto6N3D-2'],\n  'fr-2016': ['6C10-5'],\n  'fr-ch': ['9NO4-18'],\n}\nexport default class ExerciceLabyrintheMultiples extends Exercice {\n  niveau: string\n  constructor() {\n    super()\n    this.niveau = '6e'\n    this.nbQuestions = 3\n\n    this.besoinFormulaireNumerique = [\n      'Tables',\n      4,\n      '1 : Tables de 2,5 et 10\\n2 : Tables de 3 et 9\\n3 : Tables de 4,6,7 et 8\\n4 : Mélange',\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Niveau de rapidité',\n      6,\n      '1 : Escargot\\n2 : Tortue\\n3 : Lièvre\\n4 : Antilope\\n5 : Guépard\\n6 : Au hasard',\n    ]\n    this.besoinFormulaire3Numerique = [\n      'Nombre de lignes du labyrinthe (entre 2 et 8 ou bien 1 si vous laissez le hasard décider)',\n      8,\n    ]\n    this.besoinFormulaire4Numerique = [\n      'Nombre de colonnes du labyrinthe (entre 2 et 8 ou bien 1 si vous laissez le hasard décider)',\n      8,\n    ]\n    this.sup = 4\n    this.sup2 = this.niveau === 'CM' ? 3 : 4\n    this.sup3 = 1\n    this.sup4 = 1\n  }\n\n  nouvelleVersion() {\n    const maximum = this.niveau === 'CM' ? 10 : 13\n    let table\n    if (this.sup === 1) {\n      table = combinaisonListes([2, 5, 10], this.nbQuestions)\n    } else if (this.sup === 2) {\n      table = combinaisonListes([3, 9], this.nbQuestions)\n    } else if (this.sup === 3) {\n      table = combinaisonListes([4, 6, 8], this.nbQuestions)\n    } else {\n      table = combinaisonListesSansChangerOrdre(\n        [\n          choice([2, 5, 10]),\n          choice([3, 9]),\n          choice([4, 6, 7, 8]),\n          2,\n          3,\n          4,\n          5,\n          6,\n          7,\n          8,\n          9,\n        ],\n        this.nbQuestions,\n      )\n    }\n    const tailleChiffre = 1.5\n\n    for (\n      let q = 0, texte, texteCorr, monChemin, laby, listeMultiples;\n      q < this.nbQuestions;\n\n    ) {\n      const nbL = this.sup3 === 1 ? randint(2, 8) : Math.max(2, this.sup3)\n      const nbC =\n        this.sup4 === 1 ? randint(3, 11 - nbL) : Math.max(3, this.sup4)\n      laby = labyrinthe({ nbLignes: nbL, nbColonnes: nbC, scaleFigure: 0.7 })\n      laby.niveau = contraindreValeur(1, 6, this.sup2, randint(1, 6)) // Le niveau (de 1 à 6=mélange) définit le nombre d'étapes\n      monChemin = laby.choisitChemin(laby.niveau) // On choisit un chemin\n      laby.murs2d = laby.construitMurs(monChemin) // On construit le labyrinthe\n      laby.chemin2d = laby.traceChemin(monChemin) // On trace le chemin solution\n\n      texte = `Trouver la sortie en ne passant que par les cases contenant un multiple de $${table[q]}$.<br>`\n      // Zone de construction des tableaux de nombres\n      listeMultiples = []\n      const listeNonMultiples = []\n      for (let i = 2; i <= maximum; i++) {\n        listeMultiples.push(table[q] * i)\n      }\n      for (let i = 1; i <= nbC * nbL; i++) {\n        listeNonMultiples.push(\n          randint(2, maximum) * table[q] + randint(1, table[q] - 1),\n        )\n      }\n\n      listeMultiples = combinaisonListes(listeMultiples, nbC * nbL)\n\n      // Le tableau de nombre étant fait, on place les objets nombres.\n      laby.nombres2d = laby.placeNombres(\n        monChemin,\n        listeMultiples,\n        listeNonMultiples,\n        tailleChiffre,\n      )\n      const params = {\n        xmin: -4,\n        ymin: 0,\n        xmax: 5 + 3 * nbC,\n        ymax: 2 + 3 * nbL,\n        pixelsParCm: 20,\n        scale: 0.4,\n      }\n      texte += mathalea2d(params, laby.murs2d, laby.nombres2d)\n      if (\n        (1 + q) % 3 === 0 &&\n        !context.isHtml &&\n        !context.isAmc &&\n        this.nbQuestions > 3\n      ) {\n        // en contexte Latex, on évite que la consigne soit sur un page différente du labyrinthe\n        texte += '\\\\newpage'\n      }\n      texte += ajouteChampTexteMathLive(\n        this,\n        2 * q,\n        KeyboardType.clavierNumbers,\n        { texteAvant: 'Indiquer le numéro de la bonne sortie :' },\n      )\n      handleAnswers(this, 2 * q, {\n        reponse: { value: `${nbL - monChemin[monChemin.length - 1][1]}` },\n      })\n      texte += ajouteChampTexteMathLive(\n        this,\n        2 * q + 1,\n        KeyboardType.clavierNumbers,\n        { texteAvant: '<br>Combien de nombres rencontrés avant la sortie ?' },\n      )\n      handleAnswers(this, 2 * q + 1, {\n        reponse: { value: `${laby.chemin2d.length - 1}` },\n      })\n      texteCorr = `Voici le chemin en couleur ($${miseEnEvidence(String(laby.chemin2d.length - 1))}$ nombres rencontrés avant la sortie) et la sortie est le numéro $${miseEnEvidence(String(nbL - monChemin[monChemin.length - 1][1]))}$.<br>`\n      texteCorr += mathalea2d(\n        params,\n        laby.murs2d,\n        laby.nombres2d,\n        laby.chemin2d,\n      )\n\n      /** ********************** AMC Open *****************************/\n      if (context.isAmc) {\n        this.autoCorrection = [\n          {\n            enonce: texte,\n            propositions: [{ texte: texteCorr, statut: 3, feedback: '' }],\n          },\n        ]\n      }\n      /****************************************************/\n      if (\n        this.questionJamaisPosee(q, listeMultiples[0], listeNonMultiples[0])\n      ) {\n        this.listeQuestions[q] = texte\n        this.listeCorrections[q] = texteCorr\n\n        q++\n      }\n      listeQuestionsToContenu(this)\n    }\n  }\n}\n"],"names":["amcReady","amcType","interactifReady","interactifType","titre","dateDePublication","dateDeModifImportante","uuid","refs","ExerciceLabyrintheMultiples","Exercice","__publicField","maximum","table","combinaisonListes","combinaisonListesSansChangerOrdre","choice","tailleChiffre","q","texte","texteCorr","monChemin","laby","listeMultiples","nbL","randint","nbC","labyrinthe","contraindreValeur","listeNonMultiples","i","params","mathalea2d","context","ajouteChampTexteMathLive","KeyboardType","handleAnswers","miseEnEvidence","listeQuestionsToContenu"],"mappings":"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"}